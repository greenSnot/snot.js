// threejs.org/license
'use strict';var THREE={REVISION:"79"};"function"===typeof define&&define.amd?define("three",THREE):"undefined"!==typeof exports&&"undefined"!==typeof module&&(module.exports=THREE);void 0===Number.EPSILON&&(Number.EPSILON=Math.pow(2,-52));void 0===Math.sign&&(Math.sign=function(a){return 0>a?-1:0<a?1:+a});void 0===Function.prototype.name&&Object.defineProperty(Function.prototype,"name",{get:function(){return this.toString().match(/^\s*function\s*(\S*)\s*\(/)[1]}});
void 0===Object.assign&&function(){Object.assign=function(a){if(void 0===a||null===a)throw new TypeError("Cannot convert undefined or null to object");for(var b=Object(a),c=1;c<arguments.length;c++){var d=arguments[c];if(void 0!==d&&null!==d)for(var e in d)Object.prototype.hasOwnProperty.call(d,e)&&(b[e]=d[e])}return b}}();
Object.assign(THREE,{MOUSE:{LEFT:0,MIDDLE:1,RIGHT:2},CullFaceNone:0,CullFaceBack:1,CullFaceFront:2,CullFaceFrontBack:3,FrontFaceDirectionCW:0,FrontFaceDirectionCCW:1,BasicShadowMap:0,PCFShadowMap:1,PCFSoftShadowMap:2,FrontSide:0,BackSide:1,DoubleSide:2,FlatShading:1,SmoothShading:2,NoColors:0,FaceColors:1,VertexColors:2,NoBlending:0,NormalBlending:1,AdditiveBlending:2,SubtractiveBlending:3,MultiplyBlending:4,CustomBlending:5,AddEquation:100,SubtractEquation:101,ReverseSubtractEquation:102,MinEquation:103,
MaxEquation:104,ZeroFactor:200,OneFactor:201,SrcColorFactor:202,OneMinusSrcColorFactor:203,SrcAlphaFactor:204,OneMinusSrcAlphaFactor:205,DstAlphaFactor:206,OneMinusDstAlphaFactor:207,DstColorFactor:208,OneMinusDstColorFactor:209,SrcAlphaSaturateFactor:210,NeverDepth:0,AlwaysDepth:1,LessDepth:2,LessEqualDepth:3,EqualDepth:4,GreaterEqualDepth:5,GreaterDepth:6,NotEqualDepth:7,MultiplyOperation:0,MixOperation:1,AddOperation:2,NoToneMapping:0,LinearToneMapping:1,ReinhardToneMapping:2,Uncharted2ToneMapping:3,
CineonToneMapping:4,UVMapping:300,CubeReflectionMapping:301,CubeRefractionMapping:302,EquirectangularReflectionMapping:303,EquirectangularRefractionMapping:304,SphericalReflectionMapping:305,CubeUVReflectionMapping:306,CubeUVRefractionMapping:307,RepeatWrapping:1E3,ClampToEdgeWrapping:1001,MirroredRepeatWrapping:1002,NearestFilter:1003,NearestMipMapNearestFilter:1004,NearestMipMapLinearFilter:1005,LinearFilter:1006,LinearMipMapNearestFilter:1007,LinearMipMapLinearFilter:1008,UnsignedByteType:1009,
ByteType:1010,ShortType:1011,UnsignedShortType:1012,IntType:1013,UnsignedIntType:1014,FloatType:1015,HalfFloatType:1025,UnsignedShort4444Type:1016,UnsignedShort5551Type:1017,UnsignedShort565Type:1018,AlphaFormat:1019,RGBFormat:1020,RGBAFormat:1021,LuminanceFormat:1022,LuminanceAlphaFormat:1023,RGBEFormat:THREE.RGBAFormat,DepthFormat:1026,RGB_S3TC_DXT1_Format:2001,RGBA_S3TC_DXT1_Format:2002,RGBA_S3TC_DXT3_Format:2003,RGBA_S3TC_DXT5_Format:2004,RGB_PVRTC_4BPPV1_Format:2100,RGB_PVRTC_2BPPV1_Format:2101,
RGBA_PVRTC_4BPPV1_Format:2102,RGBA_PVRTC_2BPPV1_Format:2103,RGB_ETC1_Format:2151,LoopOnce:2200,LoopRepeat:2201,LoopPingPong:2202,InterpolateDiscrete:2300,InterpolateLinear:2301,InterpolateSmooth:2302,ZeroCurvatureEnding:2400,ZeroSlopeEnding:2401,WrapAroundEnding:2402,TrianglesDrawMode:0,TriangleStripDrawMode:1,TriangleFanDrawMode:2,LinearEncoding:3E3,sRGBEncoding:3001,GammaEncoding:3007,RGBEEncoding:3002,LogLuvEncoding:3003,RGBM7Encoding:3004,RGBM16Encoding:3005,RGBDEncoding:3006,BasicDepthPacking:3200,
RGBADepthPacking:3201});THREE.Color=function(a,b,c){return void 0===b&&void 0===c?this.set(a):this.setRGB(a,b,c)};
THREE.Color.prototype={constructor:THREE.Color,r:1,g:1,b:1,set:function(a){a instanceof THREE.Color?this.copy(a):"number"===typeof a?this.setHex(a):"string"===typeof a&&this.setStyle(a);return this},setScalar:function(a){this.b=this.g=this.r=a},setHex:function(a){a=Math.floor(a);this.r=(a>>16&255)/255;this.g=(a>>8&255)/255;this.b=(a&255)/255;return this},setRGB:function(a,b,c){this.r=a;this.g=b;this.b=c;return this},setHSL:function(){function a(a,c,d){0>d&&(d+=1);1<d&&(d-=1);return d<1/6?a+6*(c-a)*
d:.5>d?c:d<2/3?a+6*(c-a)*(2/3-d):a}return function(b,c,d){b=THREE.Math.euclideanModulo(b,1);c=THREE.Math.clamp(c,0,1);d=THREE.Math.clamp(d,0,1);0===c?this.r=this.g=this.b=d:(c=.5>=d?d*(1+c):d+c-d*c,d=2*d-c,this.r=a(d,c,b+1/3),this.g=a(d,c,b),this.b=a(d,c,b-1/3));return this}}(),setStyle:function(a){function b(b){void 0!==b&&1>parseFloat(b)&&console.warn("THREE.Color: Alpha component of "+a+" will be ignored.")}var c;if(c=/^((?:rgb|hsl)a?)\(\s*([^\)]*)\)/.exec(a)){var d=c[2];switch(c[1]){case "rgb":case "rgba":if(c=
/^(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*(,\s*([0-9]*\.?[0-9]+)\s*)?$/.exec(d))return this.r=Math.min(255,parseInt(c[1],10))/255,this.g=Math.min(255,parseInt(c[2],10))/255,this.b=Math.min(255,parseInt(c[3],10))/255,b(c[5]),this;if(c=/^(\d+)\%\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(,\s*([0-9]*\.?[0-9]+)\s*)?$/.exec(d))return this.r=Math.min(100,parseInt(c[1],10))/100,this.g=Math.min(100,parseInt(c[2],10))/100,this.b=Math.min(100,parseInt(c[3],10))/100,b(c[5]),this;break;case "hsl":case "hsla":if(c=/^([0-9]*\.?[0-9]+)\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(,\s*([0-9]*\.?[0-9]+)\s*)?$/.exec(d)){var d=
parseFloat(c[1])/360,e=parseInt(c[2],10)/100,f=parseInt(c[3],10)/100;b(c[5]);return this.setHSL(d,e,f)}}}else if(c=/^\#([A-Fa-f0-9]+)$/.exec(a)){c=c[1];d=c.length;if(3===d)return this.r=parseInt(c.charAt(0)+c.charAt(0),16)/255,this.g=parseInt(c.charAt(1)+c.charAt(1),16)/255,this.b=parseInt(c.charAt(2)+c.charAt(2),16)/255,this;if(6===d)return this.r=parseInt(c.charAt(0)+c.charAt(1),16)/255,this.g=parseInt(c.charAt(2)+c.charAt(3),16)/255,this.b=parseInt(c.charAt(4)+c.charAt(5),16)/255,this}a&&0<a.length&&
(c=THREE.ColorKeywords[a],void 0!==c?this.setHex(c):console.warn("THREE.Color: Unknown color "+a));return this},clone:function(){return new this.constructor(this.r,this.g,this.b)},copy:function(a){this.r=a.r;this.g=a.g;this.b=a.b;return this},copyGammaToLinear:function(a,b){void 0===b&&(b=2);this.r=Math.pow(a.r,b);this.g=Math.pow(a.g,b);this.b=Math.pow(a.b,b);return this},copyLinearToGamma:function(a,b){void 0===b&&(b=2);var c=0<b?1/b:1;this.r=Math.pow(a.r,c);this.g=Math.pow(a.g,c);this.b=Math.pow(a.b,
c);return this},convertGammaToLinear:function(){var a=this.r,b=this.g,c=this.b;this.r=a*a;this.g=b*b;this.b=c*c;return this},convertLinearToGamma:function(){this.r=Math.sqrt(this.r);this.g=Math.sqrt(this.g);this.b=Math.sqrt(this.b);return this},getHex:function(){return 255*this.r<<16^255*this.g<<8^255*this.b<<0},getHexString:function(){return("000000"+this.getHex().toString(16)).slice(-6)},getHSL:function(a){a=a||{h:0,s:0,l:0};var b=this.r,c=this.g,d=this.b,e=Math.max(b,c,d),f=Math.min(b,c,d),g,h=
(f+e)/2;if(f===e)f=g=0;else{var k=e-f,f=.5>=h?k/(e+f):k/(2-e-f);switch(e){case b:g=(c-d)/k+(c<d?6:0);break;case c:g=(d-b)/k+2;break;case d:g=(b-c)/k+4}g/=6}a.h=g;a.s=f;a.l=h;return a},getStyle:function(){return"rgb("+(255*this.r|0)+","+(255*this.g|0)+","+(255*this.b|0)+")"},offsetHSL:function(a,b,c){var d=this.getHSL();d.h+=a;d.s+=b;d.l+=c;this.setHSL(d.h,d.s,d.l);return this},add:function(a){this.r+=a.r;this.g+=a.g;this.b+=a.b;return this},addColors:function(a,b){this.r=a.r+b.r;this.g=a.g+b.g;this.b=
a.b+b.b;return this},addScalar:function(a){this.r+=a;this.g+=a;this.b+=a;return this},sub:function(a){this.r=Math.max(0,this.r-a.r);this.g=Math.max(0,this.g-a.g);this.b=Math.max(0,this.b-a.b);return this},multiply:function(a){this.r*=a.r;this.g*=a.g;this.b*=a.b;return this},multiplyScalar:function(a){this.r*=a;this.g*=a;this.b*=a;return this},lerp:function(a,b){this.r+=(a.r-this.r)*b;this.g+=(a.g-this.g)*b;this.b+=(a.b-this.b)*b;return this},equals:function(a){return a.r===this.r&&a.g===this.g&&a.b===
this.b},fromArray:function(a,b){void 0===b&&(b=0);this.r=a[b];this.g=a[b+1];this.b=a[b+2];return this},toArray:function(a,b){void 0===a&&(a=[]);void 0===b&&(b=0);a[b]=this.r;a[b+1]=this.g;a[b+2]=this.b;return a}};
THREE.ColorKeywords={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,
darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,
grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,
lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,
palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,
tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};THREE.Quaternion=function(a,b,c,d){this._x=a||0;this._y=b||0;this._z=c||0;this._w=void 0!==d?d:1};
THREE.Quaternion.prototype={constructor:THREE.Quaternion,get x(){return this._x},set x(a){this._x=a;this.onChangeCallback()},get y(){return this._y},set y(a){this._y=a;this.onChangeCallback()},get z(){return this._z},set z(a){this._z=a;this.onChangeCallback()},get w(){return this._w},set w(a){this._w=a;this.onChangeCallback()},set:function(a,b,c,d){this._x=a;this._y=b;this._z=c;this._w=d;this.onChangeCallback();return this},clone:function(){return new this.constructor(this._x,this._y,this._z,this._w)},
copy:function(a){this._x=a.x;this._y=a.y;this._z=a.z;this._w=a.w;this.onChangeCallback();return this},setFromEuler:function(a,b){if(!1===a instanceof THREE.Euler)throw Error("THREE.Quaternion: .setFromEuler() now expects a Euler rotation rather than a Vector3 and order.");var c=Math.cos(a._x/2),d=Math.cos(a._y/2),e=Math.cos(a._z/2),f=Math.sin(a._x/2),g=Math.sin(a._y/2),h=Math.sin(a._z/2),k=a.order;"XYZ"===k?(this._x=f*d*e+c*g*h,this._y=c*g*e-f*d*h,this._z=c*d*h+f*g*e,this._w=c*d*e-f*g*h):"YXZ"===
k?(this._x=f*d*e+c*g*h,this._y=c*g*e-f*d*h,this._z=c*d*h-f*g*e,this._w=c*d*e+f*g*h):"ZXY"===k?(this._x=f*d*e-c*g*h,this._y=c*g*e+f*d*h,this._z=c*d*h+f*g*e,this._w=c*d*e-f*g*h):"ZYX"===k?(this._x=f*d*e-c*g*h,this._y=c*g*e+f*d*h,this._z=c*d*h-f*g*e,this._w=c*d*e+f*g*h):"YZX"===k?(this._x=f*d*e+c*g*h,this._y=c*g*e+f*d*h,this._z=c*d*h-f*g*e,this._w=c*d*e-f*g*h):"XZY"===k&&(this._x=f*d*e-c*g*h,this._y=c*g*e-f*d*h,this._z=c*d*h+f*g*e,this._w=c*d*e+f*g*h);if(!1!==b)this.onChangeCallback();return this},setFromAxisAngle:function(a,
b){var c=b/2,d=Math.sin(c);this._x=a.x*d;this._y=a.y*d;this._z=a.z*d;this._w=Math.cos(c);this.onChangeCallback();return this},setFromRotationMatrix:function(a){var b=a.elements,c=b[0];a=b[4];var d=b[8],e=b[1],f=b[5],g=b[9],h=b[2],k=b[6],b=b[10],l=c+f+b;0<l?(c=.5/Math.sqrt(l+1),this._w=.25/c,this._x=(k-g)*c,this._y=(d-h)*c,this._z=(e-a)*c):c>f&&c>b?(c=2*Math.sqrt(1+c-f-b),this._w=(k-g)/c,this._x=.25*c,this._y=(a+e)/c,this._z=(d+h)/c):f>b?(c=2*Math.sqrt(1+f-c-b),this._w=(d-h)/c,this._x=(a+e)/c,this._y=
.25*c,this._z=(g+k)/c):(c=2*Math.sqrt(1+b-c-f),this._w=(e-a)/c,this._x=(d+h)/c,this._y=(g+k)/c,this._z=.25*c);this.onChangeCallback();return this},setFromUnitVectors:function(){var a,b;return function(c,d){void 0===a&&(a=new THREE.Vector3);b=c.dot(d)+1;1E-6>b?(b=0,Math.abs(c.x)>Math.abs(c.z)?a.set(-c.y,c.x,0):a.set(0,-c.z,c.y)):a.crossVectors(c,d);this._x=a.x;this._y=a.y;this._z=a.z;this._w=b;return this.normalize()}}(),inverse:function(){return this.conjugate().normalize()},conjugate:function(){this._x*=
-1;this._y*=-1;this._z*=-1;this.onChangeCallback();return this},dot:function(a){return this._x*a._x+this._y*a._y+this._z*a._z+this._w*a._w},lengthSq:function(){return this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w},length:function(){return Math.sqrt(this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w)},normalize:function(){var a=this.length();0===a?(this._z=this._y=this._x=0,this._w=1):(a=1/a,this._x*=a,this._y*=a,this._z*=a,this._w*=a);this.onChangeCallback();return this},
multiply:function(a,b){return void 0!==b?(console.warn("THREE.Quaternion: .multiply() now only accepts one argument. Use .multiplyQuaternions( a, b ) instead."),this.multiplyQuaternions(a,b)):this.multiplyQuaternions(this,a)},premultiply:function(a){return this.multiplyQuaternions(a,this)},multiplyQuaternions:function(a,b){var c=a._x,d=a._y,e=a._z,f=a._w,g=b._x,h=b._y,k=b._z,l=b._w;this._x=c*l+f*g+d*k-e*h;this._y=d*l+f*h+e*g-c*k;this._z=e*l+f*k+c*h-d*g;this._w=f*l-c*g-d*h-e*k;this.onChangeCallback();
return this},slerp:function(a,b){if(0===b)return this;if(1===b)return this.copy(a);var c=this._x,d=this._y,e=this._z,f=this._w,g=f*a._w+c*a._x+d*a._y+e*a._z;0>g?(this._w=-a._w,this._x=-a._x,this._y=-a._y,this._z=-a._z,g=-g):this.copy(a);if(1<=g)return this._w=f,this._x=c,this._y=d,this._z=e,this;var h=Math.sqrt(1-g*g);if(.001>Math.abs(h))return this._w=.5*(f+this._w),this._x=.5*(c+this._x),this._y=.5*(d+this._y),this._z=.5*(e+this._z),this;var k=Math.atan2(h,g),g=Math.sin((1-b)*k)/h,h=Math.sin(b*
k)/h;this._w=f*g+this._w*h;this._x=c*g+this._x*h;this._y=d*g+this._y*h;this._z=e*g+this._z*h;this.onChangeCallback();return this},equals:function(a){return a._x===this._x&&a._y===this._y&&a._z===this._z&&a._w===this._w},fromArray:function(a,b){void 0===b&&(b=0);this._x=a[b];this._y=a[b+1];this._z=a[b+2];this._w=a[b+3];this.onChangeCallback();return this},toArray:function(a,b){void 0===a&&(a=[]);void 0===b&&(b=0);a[b]=this._x;a[b+1]=this._y;a[b+2]=this._z;a[b+3]=this._w;return a},onChange:function(a){this.onChangeCallback=
a;return this},onChangeCallback:function(){}};
Object.assign(THREE.Quaternion,{slerp:function(a,b,c,d){return c.copy(a).slerp(b,d)},slerpFlat:function(a,b,c,d,e,f,g){var h=c[d+0],k=c[d+1],l=c[d+2];c=c[d+3];d=e[f+0];var m=e[f+1],p=e[f+2];e=e[f+3];if(c!==e||h!==d||k!==m||l!==p){f=1-g;var n=h*d+k*m+l*p+c*e,q=0<=n?1:-1,r=1-n*n;r>Number.EPSILON&&(r=Math.sqrt(r),n=Math.atan2(r,n*q),f=Math.sin(f*n)/r,g=Math.sin(g*n)/r);q*=g;h=h*f+d*q;k=k*f+m*q;l=l*f+p*q;c=c*f+e*q;f===1-g&&(g=1/Math.sqrt(h*h+k*k+l*l+c*c),h*=g,k*=g,l*=g,c*=g)}a[b]=h;a[b+1]=k;a[b+2]=l;
a[b+3]=c}});THREE.Vector2=function(a,b){this.x=a||0;this.y=b||0};
THREE.Vector2.prototype={constructor:THREE.Vector2,get width(){return this.x},set width(a){this.x=a},get height(){return this.y},set height(a){this.y=a},set:function(a,b){this.x=a;this.y=b;return this},setScalar:function(a){this.y=this.x=a;return this},setX:function(a){this.x=a;return this},setY:function(a){this.y=a;return this},setComponent:function(a,b){switch(a){case 0:this.x=b;break;case 1:this.y=b;break;default:throw Error("index is out of range: "+a);}},getComponent:function(a){switch(a){case 0:return this.x;
case 1:return this.y;default:throw Error("index is out of range: "+a);}},clone:function(){return new this.constructor(this.x,this.y)},copy:function(a){this.x=a.x;this.y=a.y;return this},add:function(a,b){if(void 0!==b)return console.warn("THREE.Vector2: .add() now only accepts one argument. Use .addVectors( a, b ) instead."),this.addVectors(a,b);this.x+=a.x;this.y+=a.y;return this},addScalar:function(a){this.x+=a;this.y+=a;return this},addVectors:function(a,b){this.x=a.x+b.x;this.y=a.y+b.y;return this},
addScaledVector:function(a,b){this.x+=a.x*b;this.y+=a.y*b;return this},sub:function(a,b){if(void 0!==b)return console.warn("THREE.Vector2: .sub() now only accepts one argument. Use .subVectors( a, b ) instead."),this.subVectors(a,b);this.x-=a.x;this.y-=a.y;return this},subScalar:function(a){this.x-=a;this.y-=a;return this},subVectors:function(a,b){this.x=a.x-b.x;this.y=a.y-b.y;return this},multiply:function(a){this.x*=a.x;this.y*=a.y;return this},multiplyScalar:function(a){isFinite(a)?(this.x*=a,
this.y*=a):this.y=this.x=0;return this},divide:function(a){this.x/=a.x;this.y/=a.y;return this},divideScalar:function(a){return this.multiplyScalar(1/a)},min:function(a){this.x=Math.min(this.x,a.x);this.y=Math.min(this.y,a.y);return this},max:function(a){this.x=Math.max(this.x,a.x);this.y=Math.max(this.y,a.y);return this},clamp:function(a,b){this.x=Math.max(a.x,Math.min(b.x,this.x));this.y=Math.max(a.y,Math.min(b.y,this.y));return this},clampScalar:function(){var a,b;return function(c,d){void 0===
a&&(a=new THREE.Vector2,b=new THREE.Vector2);a.set(c,c);b.set(d,d);return this.clamp(a,b)}}(),clampLength:function(a,b){var c=this.length();return this.multiplyScalar(Math.max(a,Math.min(b,c))/c)},floor:function(){this.x=Math.floor(this.x);this.y=Math.floor(this.y);return this},ceil:function(){this.x=Math.ceil(this.x);this.y=Math.ceil(this.y);return this},round:function(){this.x=Math.round(this.x);this.y=Math.round(this.y);return this},roundToZero:function(){this.x=0>this.x?Math.ceil(this.x):Math.floor(this.x);
this.y=0>this.y?Math.ceil(this.y):Math.floor(this.y);return this},negate:function(){this.x=-this.x;this.y=-this.y;return this},dot:function(a){return this.x*a.x+this.y*a.y},lengthSq:function(){return this.x*this.x+this.y*this.y},length:function(){return Math.sqrt(this.x*this.x+this.y*this.y)},lengthManhattan:function(){return Math.abs(this.x)+Math.abs(this.y)},normalize:function(){return this.divideScalar(this.length())},angle:function(){var a=Math.atan2(this.y,this.x);0>a&&(a+=2*Math.PI);return a},
distanceTo:function(a){return Math.sqrt(this.distanceToSquared(a))},distanceToSquared:function(a){var b=this.x-a.x;a=this.y-a.y;return b*b+a*a},distanceToManhattan:function(a){return Math.abs(this.x-a.x)+Math.abs(this.y-a.y)},setLength:function(a){return this.multiplyScalar(a/this.length())},lerp:function(a,b){this.x+=(a.x-this.x)*b;this.y+=(a.y-this.y)*b;return this},lerpVectors:function(a,b,c){return this.subVectors(b,a).multiplyScalar(c).add(a)},equals:function(a){return a.x===this.x&&a.y===this.y},
fromArray:function(a,b){void 0===b&&(b=0);this.x=a[b];this.y=a[b+1];return this},toArray:function(a,b){void 0===a&&(a=[]);void 0===b&&(b=0);a[b]=this.x;a[b+1]=this.y;return a},fromAttribute:function(a,b,c){void 0===c&&(c=0);b=b*a.itemSize+c;this.x=a.array[b];this.y=a.array[b+1];return this},rotateAround:function(a,b){var c=Math.cos(b),d=Math.sin(b),e=this.x-a.x,f=this.y-a.y;this.x=e*c-f*d+a.x;this.y=e*d+f*c+a.y;return this}};THREE.Vector3=function(a,b,c){this.x=a||0;this.y=b||0;this.z=c||0};
THREE.Vector3.prototype={constructor:THREE.Vector3,set:function(a,b,c){this.x=a;this.y=b;this.z=c;return this},setScalar:function(a){this.z=this.y=this.x=a;return this},setX:function(a){this.x=a;return this},setY:function(a){this.y=a;return this},setZ:function(a){this.z=a;return this},setComponent:function(a,b){switch(a){case 0:this.x=b;break;case 1:this.y=b;break;case 2:this.z=b;break;default:throw Error("index is out of range: "+a);}},getComponent:function(a){switch(a){case 0:return this.x;case 1:return this.y;
case 2:return this.z;default:throw Error("index is out of range: "+a);}},clone:function(){return new this.constructor(this.x,this.y,this.z)},copy:function(a){this.x=a.x;this.y=a.y;this.z=a.z;return this},add:function(a,b){if(void 0!==b)return console.warn("THREE.Vector3: .add() now only accepts one argument. Use .addVectors( a, b ) instead."),this.addVectors(a,b);this.x+=a.x;this.y+=a.y;this.z+=a.z;return this},addScalar:function(a){this.x+=a;this.y+=a;this.z+=a;return this},addVectors:function(a,
b){this.x=a.x+b.x;this.y=a.y+b.y;this.z=a.z+b.z;return this},addScaledVector:function(a,b){this.x+=a.x*b;this.y+=a.y*b;this.z+=a.z*b;return this},sub:function(a,b){if(void 0!==b)return console.warn("THREE.Vector3: .sub() now only accepts one argument. Use .subVectors( a, b ) instead."),this.subVectors(a,b);this.x-=a.x;this.y-=a.y;this.z-=a.z;return this},subScalar:function(a){this.x-=a;this.y-=a;this.z-=a;return this},subVectors:function(a,b){this.x=a.x-b.x;this.y=a.y-b.y;this.z=a.z-b.z;return this},
multiply:function(a,b){if(void 0!==b)return console.warn("THREE.Vector3: .multiply() now only accepts one argument. Use .multiplyVectors( a, b ) instead."),this.multiplyVectors(a,b);this.x*=a.x;this.y*=a.y;this.z*=a.z;return this},multiplyScalar:function(a){isFinite(a)?(this.x*=a,this.y*=a,this.z*=a):this.z=this.y=this.x=0;return this},multiplyVectors:function(a,b){this.x=a.x*b.x;this.y=a.y*b.y;this.z=a.z*b.z;return this},applyEuler:function(){var a;return function(b){!1===b instanceof THREE.Euler&&
console.error("THREE.Vector3: .applyEuler() now expects an Euler rotation rather than a Vector3 and order.");void 0===a&&(a=new THREE.Quaternion);return this.applyQuaternion(a.setFromEuler(b))}}(),applyAxisAngle:function(){var a;return function(b,c){void 0===a&&(a=new THREE.Quaternion);return this.applyQuaternion(a.setFromAxisAngle(b,c))}}(),applyMatrix3:function(a){var b=this.x,c=this.y,d=this.z;a=a.elements;this.x=a[0]*b+a[3]*c+a[6]*d;this.y=a[1]*b+a[4]*c+a[7]*d;this.z=a[2]*b+a[5]*c+a[8]*d;return this},
applyMatrix4:function(a){var b=this.x,c=this.y,d=this.z;a=a.elements;this.x=a[0]*b+a[4]*c+a[8]*d+a[12];this.y=a[1]*b+a[5]*c+a[9]*d+a[13];this.z=a[2]*b+a[6]*c+a[10]*d+a[14];return this},applyProjection:function(a){var b=this.x,c=this.y,d=this.z;a=a.elements;var e=1/(a[3]*b+a[7]*c+a[11]*d+a[15]);this.x=(a[0]*b+a[4]*c+a[8]*d+a[12])*e;this.y=(a[1]*b+a[5]*c+a[9]*d+a[13])*e;this.z=(a[2]*b+a[6]*c+a[10]*d+a[14])*e;return this},applyQuaternion:function(a){var b=this.x,c=this.y,d=this.z,e=a.x,f=a.y,g=a.z;a=
a.w;var h=a*b+f*d-g*c,k=a*c+g*b-e*d,l=a*d+e*c-f*b,b=-e*b-f*c-g*d;this.x=h*a+b*-e+k*-g-l*-f;this.y=k*a+b*-f+l*-e-h*-g;this.z=l*a+b*-g+h*-f-k*-e;return this},project:function(){var a;return function(b){void 0===a&&(a=new THREE.Matrix4);a.multiplyMatrices(b.projectionMatrix,a.getInverse(b.matrixWorld));return this.applyProjection(a)}}(),unproject:function(){var a;return function(b){void 0===a&&(a=new THREE.Matrix4);a.multiplyMatrices(b.matrixWorld,a.getInverse(b.projectionMatrix));return this.applyProjection(a)}}(),
transformDirection:function(a){var b=this.x,c=this.y,d=this.z;a=a.elements;this.x=a[0]*b+a[4]*c+a[8]*d;this.y=a[1]*b+a[5]*c+a[9]*d;this.z=a[2]*b+a[6]*c+a[10]*d;return this.normalize()},divide:function(a){this.x/=a.x;this.y/=a.y;this.z/=a.z;return this},divideScalar:function(a){return this.multiplyScalar(1/a)},min:function(a){this.x=Math.min(this.x,a.x);this.y=Math.min(this.y,a.y);this.z=Math.min(this.z,a.z);return this},max:function(a){this.x=Math.max(this.x,a.x);this.y=Math.max(this.y,a.y);this.z=
Math.max(this.z,a.z);return this},clamp:function(a,b){this.x=Math.max(a.x,Math.min(b.x,this.x));this.y=Math.max(a.y,Math.min(b.y,this.y));this.z=Math.max(a.z,Math.min(b.z,this.z));return this},clampScalar:function(){var a,b;return function(c,d){void 0===a&&(a=new THREE.Vector3,b=new THREE.Vector3);a.set(c,c,c);b.set(d,d,d);return this.clamp(a,b)}}(),clampLength:function(a,b){var c=this.length();return this.multiplyScalar(Math.max(a,Math.min(b,c))/c)},floor:function(){this.x=Math.floor(this.x);this.y=
Math.floor(this.y);this.z=Math.floor(this.z);return this},ceil:function(){this.x=Math.ceil(this.x);this.y=Math.ceil(this.y);this.z=Math.ceil(this.z);return this},round:function(){this.x=Math.round(this.x);this.y=Math.round(this.y);this.z=Math.round(this.z);return this},roundToZero:function(){this.x=0>this.x?Math.ceil(this.x):Math.floor(this.x);this.y=0>this.y?Math.ceil(this.y):Math.floor(this.y);this.z=0>this.z?Math.ceil(this.z):Math.floor(this.z);return this},negate:function(){this.x=-this.x;this.y=
-this.y;this.z=-this.z;return this},dot:function(a){return this.x*a.x+this.y*a.y+this.z*a.z},lengthSq:function(){return this.x*this.x+this.y*this.y+this.z*this.z},length:function(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)},lengthManhattan:function(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)},normalize:function(){return this.divideScalar(this.length())},setLength:function(a){return this.multiplyScalar(a/this.length())},lerp:function(a,b){this.x+=(a.x-this.x)*b;this.y+=
(a.y-this.y)*b;this.z+=(a.z-this.z)*b;return this},lerpVectors:function(a,b,c){return this.subVectors(b,a).multiplyScalar(c).add(a)},cross:function(a,b){if(void 0!==b)return console.warn("THREE.Vector3: .cross() now only accepts one argument. Use .crossVectors( a, b ) instead."),this.crossVectors(a,b);var c=this.x,d=this.y,e=this.z;this.x=d*a.z-e*a.y;this.y=e*a.x-c*a.z;this.z=c*a.y-d*a.x;return this},crossVectors:function(a,b){var c=a.x,d=a.y,e=a.z,f=b.x,g=b.y,h=b.z;this.x=d*h-e*g;this.y=e*f-c*h;
this.z=c*g-d*f;return this},projectOnVector:function(a){var b=a.dot(this)/a.lengthSq();return this.copy(a).multiplyScalar(b)},projectOnPlane:function(){var a;return function(b){void 0===a&&(a=new THREE.Vector3);a.copy(this).projectOnVector(b);return this.sub(a)}}(),reflect:function(){var a;return function(b){void 0===a&&(a=new THREE.Vector3);return this.sub(a.copy(b).multiplyScalar(2*this.dot(b)))}}(),angleTo:function(a){a=this.dot(a)/Math.sqrt(this.lengthSq()*a.lengthSq());return Math.acos(THREE.Math.clamp(a,
-1,1))},distanceTo:function(a){return Math.sqrt(this.distanceToSquared(a))},distanceToSquared:function(a){var b=this.x-a.x,c=this.y-a.y;a=this.z-a.z;return b*b+c*c+a*a},distanceToManhattan:function(a){return Math.abs(this.x-a.x)+Math.abs(this.y-a.y)+Math.abs(this.z-a.z)},setFromSpherical:function(a){var b=Math.sin(a.phi)*a.radius;this.x=b*Math.sin(a.theta);this.y=Math.cos(a.phi)*a.radius;this.z=b*Math.cos(a.theta);return this},setFromMatrixPosition:function(a){return this.setFromMatrixColumn(a,3)},
setFromMatrixScale:function(a){var b=this.setFromMatrixColumn(a,0).length(),c=this.setFromMatrixColumn(a,1).length();a=this.setFromMatrixColumn(a,2).length();this.x=b;this.y=c;this.z=a;return this},setFromMatrixColumn:function(a,b){if("number"===typeof a){console.warn("THREE.Vector3: setFromMatrixColumn now expects ( matrix, index ).");var c=a;a=b;b=c}return this.fromArray(a.elements,4*b)},equals:function(a){return a.x===this.x&&a.y===this.y&&a.z===this.z},fromArray:function(a,b){void 0===b&&(b=0);
this.x=a[b];this.y=a[b+1];this.z=a[b+2];return this},toArray:function(a,b){void 0===a&&(a=[]);void 0===b&&(b=0);a[b]=this.x;a[b+1]=this.y;a[b+2]=this.z;return a},fromAttribute:function(a,b,c){void 0===c&&(c=0);b=b*a.itemSize+c;this.x=a.array[b];this.y=a.array[b+1];this.z=a.array[b+2];return this}};THREE.Vector4=function(a,b,c,d){this.x=a||0;this.y=b||0;this.z=c||0;this.w=void 0!==d?d:1};
THREE.Vector4.prototype={constructor:THREE.Vector4,set:function(a,b,c,d){this.x=a;this.y=b;this.z=c;this.w=d;return this},setScalar:function(a){this.w=this.z=this.y=this.x=a;return this},setX:function(a){this.x=a;return this},setY:function(a){this.y=a;return this},setZ:function(a){this.z=a;return this},setW:function(a){this.w=a;return this},setComponent:function(a,b){switch(a){case 0:this.x=b;break;case 1:this.y=b;break;case 2:this.z=b;break;case 3:this.w=b;break;default:throw Error("index is out of range: "+
a);}},getComponent:function(a){switch(a){case 0:return this.x;case 1:return this.y;case 2:return this.z;case 3:return this.w;default:throw Error("index is out of range: "+a);}},clone:function(){return new this.constructor(this.x,this.y,this.z,this.w)},copy:function(a){this.x=a.x;this.y=a.y;this.z=a.z;this.w=void 0!==a.w?a.w:1;return this},add:function(a,b){if(void 0!==b)return console.warn("THREE.Vector4: .add() now only accepts one argument. Use .addVectors( a, b ) instead."),this.addVectors(a,b);
this.x+=a.x;this.y+=a.y;this.z+=a.z;this.w+=a.w;return this},addScalar:function(a){this.x+=a;this.y+=a;this.z+=a;this.w+=a;return this},addVectors:function(a,b){this.x=a.x+b.x;this.y=a.y+b.y;this.z=a.z+b.z;this.w=a.w+b.w;return this},addScaledVector:function(a,b){this.x+=a.x*b;this.y+=a.y*b;this.z+=a.z*b;this.w+=a.w*b;return this},sub:function(a,b){if(void 0!==b)return console.warn("THREE.Vector4: .sub() now only accepts one argument. Use .subVectors( a, b ) instead."),this.subVectors(a,b);this.x-=
a.x;this.y-=a.y;this.z-=a.z;this.w-=a.w;return this},subScalar:function(a){this.x-=a;this.y-=a;this.z-=a;this.w-=a;return this},subVectors:function(a,b){this.x=a.x-b.x;this.y=a.y-b.y;this.z=a.z-b.z;this.w=a.w-b.w;return this},multiplyScalar:function(a){isFinite(a)?(this.x*=a,this.y*=a,this.z*=a,this.w*=a):this.w=this.z=this.y=this.x=0;return this},applyMatrix4:function(a){var b=this.x,c=this.y,d=this.z,e=this.w;a=a.elements;this.x=a[0]*b+a[4]*c+a[8]*d+a[12]*e;this.y=a[1]*b+a[5]*c+a[9]*d+a[13]*e;this.z=
a[2]*b+a[6]*c+a[10]*d+a[14]*e;this.w=a[3]*b+a[7]*c+a[11]*d+a[15]*e;return this},divideScalar:function(a){return this.multiplyScalar(1/a)},setAxisAngleFromQuaternion:function(a){this.w=2*Math.acos(a.w);var b=Math.sqrt(1-a.w*a.w);1E-4>b?(this.x=1,this.z=this.y=0):(this.x=a.x/b,this.y=a.y/b,this.z=a.z/b);return this},setAxisAngleFromRotationMatrix:function(a){var b,c,d;a=a.elements;var e=a[0];d=a[4];var f=a[8],g=a[1],h=a[5],k=a[9];c=a[2];b=a[6];var l=a[10];if(.01>Math.abs(d-g)&&.01>Math.abs(f-c)&&.01>
Math.abs(k-b)){if(.1>Math.abs(d+g)&&.1>Math.abs(f+c)&&.1>Math.abs(k+b)&&.1>Math.abs(e+h+l-3))return this.set(1,0,0,0),this;a=Math.PI;e=(e+1)/2;h=(h+1)/2;l=(l+1)/2;d=(d+g)/4;f=(f+c)/4;k=(k+b)/4;e>h&&e>l?.01>e?(b=0,d=c=.707106781):(b=Math.sqrt(e),c=d/b,d=f/b):h>l?.01>h?(b=.707106781,c=0,d=.707106781):(c=Math.sqrt(h),b=d/c,d=k/c):.01>l?(c=b=.707106781,d=0):(d=Math.sqrt(l),b=f/d,c=k/d);this.set(b,c,d,a);return this}a=Math.sqrt((b-k)*(b-k)+(f-c)*(f-c)+(g-d)*(g-d));.001>Math.abs(a)&&(a=1);this.x=(b-k)/
a;this.y=(f-c)/a;this.z=(g-d)/a;this.w=Math.acos((e+h+l-1)/2);return this},min:function(a){this.x=Math.min(this.x,a.x);this.y=Math.min(this.y,a.y);this.z=Math.min(this.z,a.z);this.w=Math.min(this.w,a.w);return this},max:function(a){this.x=Math.max(this.x,a.x);this.y=Math.max(this.y,a.y);this.z=Math.max(this.z,a.z);this.w=Math.max(this.w,a.w);return this},clamp:function(a,b){this.x=Math.max(a.x,Math.min(b.x,this.x));this.y=Math.max(a.y,Math.min(b.y,this.y));this.z=Math.max(a.z,Math.min(b.z,this.z));
this.w=Math.max(a.w,Math.min(b.w,this.w));return this},clampScalar:function(){var a,b;return function(c,d){void 0===a&&(a=new THREE.Vector4,b=new THREE.Vector4);a.set(c,c,c,c);b.set(d,d,d,d);return this.clamp(a,b)}}(),floor:function(){this.x=Math.floor(this.x);this.y=Math.floor(this.y);this.z=Math.floor(this.z);this.w=Math.floor(this.w);return this},ceil:function(){this.x=Math.ceil(this.x);this.y=Math.ceil(this.y);this.z=Math.ceil(this.z);this.w=Math.ceil(this.w);return this},round:function(){this.x=
Math.round(this.x);this.y=Math.round(this.y);this.z=Math.round(this.z);this.w=Math.round(this.w);return this},roundToZero:function(){this.x=0>this.x?Math.ceil(this.x):Math.floor(this.x);this.y=0>this.y?Math.ceil(this.y):Math.floor(this.y);this.z=0>this.z?Math.ceil(this.z):Math.floor(this.z);this.w=0>this.w?Math.ceil(this.w):Math.floor(this.w);return this},negate:function(){this.x=-this.x;this.y=-this.y;this.z=-this.z;this.w=-this.w;return this},dot:function(a){return this.x*a.x+this.y*a.y+this.z*
a.z+this.w*a.w},lengthSq:function(){return this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w},length:function(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w)},lengthManhattan:function(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)+Math.abs(this.w)},normalize:function(){return this.divideScalar(this.length())},setLength:function(a){return this.multiplyScalar(a/this.length())},lerp:function(a,b){this.x+=(a.x-this.x)*b;this.y+=(a.y-this.y)*b;this.z+=(a.z-
this.z)*b;this.w+=(a.w-this.w)*b;return this},lerpVectors:function(a,b,c){return this.subVectors(b,a).multiplyScalar(c).add(a)},equals:function(a){return a.x===this.x&&a.y===this.y&&a.z===this.z&&a.w===this.w},fromArray:function(a,b){void 0===b&&(b=0);this.x=a[b];this.y=a[b+1];this.z=a[b+2];this.w=a[b+3];return this},toArray:function(a,b){void 0===a&&(a=[]);void 0===b&&(b=0);a[b]=this.x;a[b+1]=this.y;a[b+2]=this.z;a[b+3]=this.w;return a},fromAttribute:function(a,b,c){void 0===c&&(c=0);b=b*a.itemSize+
c;this.x=a.array[b];this.y=a.array[b+1];this.z=a.array[b+2];this.w=a.array[b+3];return this}};THREE.Euler=function(a,b,c,d){this._x=a||0;this._y=b||0;this._z=c||0;this._order=d||THREE.Euler.DefaultOrder};THREE.Euler.RotationOrders="XYZ YZX ZXY XZY YXZ ZYX".split(" ");THREE.Euler.DefaultOrder="XYZ";
THREE.Euler.prototype={constructor:THREE.Euler,get x(){return this._x},set x(a){this._x=a;this.onChangeCallback()},get y(){return this._y},set y(a){this._y=a;this.onChangeCallback()},get z(){return this._z},set z(a){this._z=a;this.onChangeCallback()},get order(){return this._order},set order(a){this._order=a;this.onChangeCallback()},set:function(a,b,c,d){this._x=a;this._y=b;this._z=c;this._order=d||this._order;this.onChangeCallback();return this},clone:function(){return new this.constructor(this._x,
this._y,this._z,this._order)},copy:function(a){this._x=a._x;this._y=a._y;this._z=a._z;this._order=a._order;this.onChangeCallback();return this},setFromRotationMatrix:function(a,b,c){var d=THREE.Math.clamp,e=a.elements;a=e[0];var f=e[4],g=e[8],h=e[1],k=e[5],l=e[9],m=e[2],p=e[6],e=e[10];b=b||this._order;"XYZ"===b?(this._y=Math.asin(d(g,-1,1)),.99999>Math.abs(g)?(this._x=Math.atan2(-l,e),this._z=Math.atan2(-f,a)):(this._x=Math.atan2(p,k),this._z=0)):"YXZ"===b?(this._x=Math.asin(-d(l,-1,1)),.99999>Math.abs(l)?
(this._y=Math.atan2(g,e),this._z=Math.atan2(h,k)):(this._y=Math.atan2(-m,a),this._z=0)):"ZXY"===b?(this._x=Math.asin(d(p,-1,1)),.99999>Math.abs(p)?(this._y=Math.atan2(-m,e),this._z=Math.atan2(-f,k)):(this._y=0,this._z=Math.atan2(h,a))):"ZYX"===b?(this._y=Math.asin(-d(m,-1,1)),.99999>Math.abs(m)?(this._x=Math.atan2(p,e),this._z=Math.atan2(h,a)):(this._x=0,this._z=Math.atan2(-f,k))):"YZX"===b?(this._z=Math.asin(d(h,-1,1)),.99999>Math.abs(h)?(this._x=Math.atan2(-l,k),this._y=Math.atan2(-m,a)):(this._x=
0,this._y=Math.atan2(g,e))):"XZY"===b?(this._z=Math.asin(-d(f,-1,1)),.99999>Math.abs(f)?(this._x=Math.atan2(p,k),this._y=Math.atan2(g,a)):(this._x=Math.atan2(-l,e),this._y=0)):console.warn("THREE.Euler: .setFromRotationMatrix() given unsupported order: "+b);this._order=b;if(!1!==c)this.onChangeCallback();return this},setFromQuaternion:function(){var a;return function(b,c,d){void 0===a&&(a=new THREE.Matrix4);a.makeRotationFromQuaternion(b);return this.setFromRotationMatrix(a,c,d)}}(),setFromVector3:function(a,
b){return this.set(a.x,a.y,a.z,b||this._order)},reorder:function(){var a=new THREE.Quaternion;return function(b){a.setFromEuler(this);return this.setFromQuaternion(a,b)}}(),equals:function(a){return a._x===this._x&&a._y===this._y&&a._z===this._z&&a._order===this._order},fromArray:function(a){this._x=a[0];this._y=a[1];this._z=a[2];void 0!==a[3]&&(this._order=a[3]);this.onChangeCallback();return this},toArray:function(a,b){void 0===a&&(a=[]);void 0===b&&(b=0);a[b]=this._x;a[b+1]=this._y;a[b+2]=this._z;
a[b+3]=this._order;return a},toVector3:function(a){return a?a.set(this._x,this._y,this._z):new THREE.Vector3(this._x,this._y,this._z)},onChange:function(a){this.onChangeCallback=a;return this},onChangeCallback:function(){}};THREE.Line3=function(a,b){this.start=void 0!==a?a:new THREE.Vector3;this.end=void 0!==b?b:new THREE.Vector3};
THREE.Line3.prototype={constructor:THREE.Line3,set:function(a,b){this.start.copy(a);this.end.copy(b);return this},clone:function(){return(new this.constructor).copy(this)},copy:function(a){this.start.copy(a.start);this.end.copy(a.end);return this},center:function(a){return(a||new THREE.Vector3).addVectors(this.start,this.end).multiplyScalar(.5)},delta:function(a){return(a||new THREE.Vector3).subVectors(this.end,this.start)},distanceSq:function(){return this.start.distanceToSquared(this.end)},distance:function(){return this.start.distanceTo(this.end)},
at:function(a,b){var c=b||new THREE.Vector3;return this.delta(c).multiplyScalar(a).add(this.start)},closestPointToPointParameter:function(){var a=new THREE.Vector3,b=new THREE.Vector3;return function(c,d){a.subVectors(c,this.start);b.subVectors(this.end,this.start);var e=b.dot(b),e=b.dot(a)/e;d&&(e=THREE.Math.clamp(e,0,1));return e}}(),closestPointToPoint:function(a,b,c){a=this.closestPointToPointParameter(a,b);c=c||new THREE.Vector3;return this.delta(c).multiplyScalar(a).add(this.start)},applyMatrix4:function(a){this.start.applyMatrix4(a);
this.end.applyMatrix4(a);return this},equals:function(a){return a.start.equals(this.start)&&a.end.equals(this.end)}};THREE.Box2=function(a,b){this.min=void 0!==a?a:new THREE.Vector2(Infinity,Infinity);this.max=void 0!==b?b:new THREE.Vector2(-Infinity,-Infinity)};
THREE.Box2.prototype={constructor:THREE.Box2,set:function(a,b){this.min.copy(a);this.max.copy(b);return this},setFromPoints:function(a){this.makeEmpty();for(var b=0,c=a.length;b<c;b++)this.expandByPoint(a[b]);return this},setFromCenterAndSize:function(){var a=new THREE.Vector2;return function(b,c){var d=a.copy(c).multiplyScalar(.5);this.min.copy(b).sub(d);this.max.copy(b).add(d);return this}}(),clone:function(){return(new this.constructor).copy(this)},copy:function(a){this.min.copy(a.min);this.max.copy(a.max);
return this},makeEmpty:function(){this.min.x=this.min.y=Infinity;this.max.x=this.max.y=-Infinity;return this},isEmpty:function(){return this.max.x<this.min.x||this.max.y<this.min.y},center:function(a){return(a||new THREE.Vector2).addVectors(this.min,this.max).multiplyScalar(.5)},size:function(a){return(a||new THREE.Vector2).subVectors(this.max,this.min)},expandByPoint:function(a){this.min.min(a);this.max.max(a);return this},expandByVector:function(a){this.min.sub(a);this.max.add(a);return this},expandByScalar:function(a){this.min.addScalar(-a);
this.max.addScalar(a);return this},containsPoint:function(a){return a.x<this.min.x||a.x>this.max.x||a.y<this.min.y||a.y>this.max.y?!1:!0},containsBox:function(a){return this.min.x<=a.min.x&&a.max.x<=this.max.x&&this.min.y<=a.min.y&&a.max.y<=this.max.y?!0:!1},getParameter:function(a,b){return(b||new THREE.Vector2).set((a.x-this.min.x)/(this.max.x-this.min.x),(a.y-this.min.y)/(this.max.y-this.min.y))},intersectsBox:function(a){return a.max.x<this.min.x||a.min.x>this.max.x||a.max.y<this.min.y||a.min.y>
this.max.y?!1:!0},clampPoint:function(a,b){return(b||new THREE.Vector2).copy(a).clamp(this.min,this.max)},distanceToPoint:function(){var a=new THREE.Vector2;return function(b){return a.copy(b).clamp(this.min,this.max).sub(b).length()}}(),intersect:function(a){this.min.max(a.min);this.max.min(a.max);return this},union:function(a){this.min.min(a.min);this.max.max(a.max);return this},translate:function(a){this.min.add(a);this.max.add(a);return this},equals:function(a){return a.min.equals(this.min)&&
a.max.equals(this.max)}};THREE.Box3=function(a,b){this.min=void 0!==a?a:new THREE.Vector3(Infinity,Infinity,Infinity);this.max=void 0!==b?b:new THREE.Vector3(-Infinity,-Infinity,-Infinity)};
THREE.Box3.prototype={constructor:THREE.Box3,set:function(a,b){this.min.copy(a);this.max.copy(b);return this},setFromArray:function(a){for(var b=Infinity,c=Infinity,d=Infinity,e=-Infinity,f=-Infinity,g=-Infinity,h=0,k=a.length;h<k;h+=3){var l=a[h],m=a[h+1],p=a[h+2];l<b&&(b=l);m<c&&(c=m);p<d&&(d=p);l>e&&(e=l);m>f&&(f=m);p>g&&(g=p)}this.min.set(b,c,d);this.max.set(e,f,g)},setFromPoints:function(a){this.makeEmpty();for(var b=0,c=a.length;b<c;b++)this.expandByPoint(a[b]);return this},setFromCenterAndSize:function(){var a=
new THREE.Vector3;return function(b,c){var d=a.copy(c).multiplyScalar(.5);this.min.copy(b).sub(d);this.max.copy(b).add(d);return this}}(),setFromObject:function(){var a=new THREE.Vector3;return function(b){var c=this;b.updateMatrixWorld(!0);this.makeEmpty();b.traverse(function(b){var e=b.geometry;if(void 0!==e)if(e instanceof THREE.Geometry)for(var e=e.vertices,f=0,g=e.length;f<g;f++)a.copy(e[f]),a.applyMatrix4(b.matrixWorld),c.expandByPoint(a);else if(e instanceof THREE.BufferGeometry&&(g=e.attributes.position,
void 0!==g)){var h;g instanceof THREE.InterleavedBufferAttribute?(e=g.data.array,f=g.offset,h=g.data.stride):(e=g.array,f=0,h=3);for(g=e.length;f<g;f+=h)a.fromArray(e,f),a.applyMatrix4(b.matrixWorld),c.expandByPoint(a)}});return this}}(),clone:function(){return(new this.constructor).copy(this)},copy:function(a){this.min.copy(a.min);this.max.copy(a.max);return this},makeEmpty:function(){this.min.x=this.min.y=this.min.z=Infinity;this.max.x=this.max.y=this.max.z=-Infinity;return this},isEmpty:function(){return this.max.x<
this.min.x||this.max.y<this.min.y||this.max.z<this.min.z},center:function(a){return(a||new THREE.Vector3).addVectors(this.min,this.max).multiplyScalar(.5)},size:function(a){return(a||new THREE.Vector3).subVectors(this.max,this.min)},expandByPoint:function(a){this.min.min(a);this.max.max(a);return this},expandByVector:function(a){this.min.sub(a);this.max.add(a);return this},expandByScalar:function(a){this.min.addScalar(-a);this.max.addScalar(a);return this},containsPoint:function(a){return a.x<this.min.x||
a.x>this.max.x||a.y<this.min.y||a.y>this.max.y||a.z<this.min.z||a.z>this.max.z?!1:!0},containsBox:function(a){return this.min.x<=a.min.x&&a.max.x<=this.max.x&&this.min.y<=a.min.y&&a.max.y<=this.max.y&&this.min.z<=a.min.z&&a.max.z<=this.max.z?!0:!1},getParameter:function(a,b){return(b||new THREE.Vector3).set((a.x-this.min.x)/(this.max.x-this.min.x),(a.y-this.min.y)/(this.max.y-this.min.y),(a.z-this.min.z)/(this.max.z-this.min.z))},intersectsBox:function(a){return a.max.x<this.min.x||a.min.x>this.max.x||
a.max.y<this.min.y||a.min.y>this.max.y||a.max.z<this.min.z||a.min.z>this.max.z?!1:!0},intersectsSphere:function(){var a;return function(b){void 0===a&&(a=new THREE.Vector3);this.clampPoint(b.center,a);return a.distanceToSquared(b.center)<=b.radius*b.radius}}(),intersectsPlane:function(a){var b,c;0<a.normal.x?(b=a.normal.x*this.min.x,c=a.normal.x*this.max.x):(b=a.normal.x*this.max.x,c=a.normal.x*this.min.x);0<a.normal.y?(b+=a.normal.y*this.min.y,c+=a.normal.y*this.max.y):(b+=a.normal.y*this.max.y,
c+=a.normal.y*this.min.y);0<a.normal.z?(b+=a.normal.z*this.min.z,c+=a.normal.z*this.max.z):(b+=a.normal.z*this.max.z,c+=a.normal.z*this.min.z);return b<=a.constant&&c>=a.constant},clampPoint:function(a,b){return(b||new THREE.Vector3).copy(a).clamp(this.min,this.max)},distanceToPoint:function(){var a=new THREE.Vector3;return function(b){return a.copy(b).clamp(this.min,this.max).sub(b).length()}}(),getBoundingSphere:function(){var a=new THREE.Vector3;return function(b){b=b||new THREE.Sphere;b.center=
this.center();b.radius=.5*this.size(a).length();return b}}(),intersect:function(a){this.min.max(a.min);this.max.min(a.max);this.isEmpty()&&this.makeEmpty();return this},union:function(a){this.min.min(a.min);this.max.max(a.max);return this},applyMatrix4:function(){var a=[new THREE.Vector3,new THREE.Vector3,new THREE.Vector3,new THREE.Vector3,new THREE.Vector3,new THREE.Vector3,new THREE.Vector3,new THREE.Vector3];return function(b){if(this.isEmpty())return this;a[0].set(this.min.x,this.min.y,this.min.z).applyMatrix4(b);
a[1].set(this.min.x,this.min.y,this.max.z).applyMatrix4(b);a[2].set(this.min.x,this.max.y,this.min.z).applyMatrix4(b);a[3].set(this.min.x,this.max.y,this.max.z).applyMatrix4(b);a[4].set(this.max.x,this.min.y,this.min.z).applyMatrix4(b);a[5].set(this.max.x,this.min.y,this.max.z).applyMatrix4(b);a[6].set(this.max.x,this.max.y,this.min.z).applyMatrix4(b);a[7].set(this.max.x,this.max.y,this.max.z).applyMatrix4(b);this.setFromPoints(a);return this}}(),translate:function(a){this.min.add(a);this.max.add(a);
return this},equals:function(a){return a.min.equals(this.min)&&a.max.equals(this.max)}};THREE.Matrix3=function(){this.elements=new Float32Array([1,0,0,0,1,0,0,0,1]);0<arguments.length&&console.error("THREE.Matrix3: the constructor no longer reads arguments. use .set() instead.")};
THREE.Matrix3.prototype={constructor:THREE.Matrix3,set:function(a,b,c,d,e,f,g,h,k){var l=this.elements;l[0]=a;l[1]=d;l[2]=g;l[3]=b;l[4]=e;l[5]=h;l[6]=c;l[7]=f;l[8]=k;return this},identity:function(){this.set(1,0,0,0,1,0,0,0,1);return this},clone:function(){return(new this.constructor).fromArray(this.elements)},copy:function(a){a=a.elements;this.set(a[0],a[3],a[6],a[1],a[4],a[7],a[2],a[5],a[8]);return this},setFromMatrix4:function(a){a=a.elements;this.set(a[0],a[4],a[8],a[1],a[5],a[9],a[2],a[6],a[10]);
return this},applyToVector3Array:function(){var a;return function(b,c,d){void 0===a&&(a=new THREE.Vector3);void 0===c&&(c=0);void 0===d&&(d=b.length);for(var e=0;e<d;e+=3,c+=3)a.fromArray(b,c),a.applyMatrix3(this),a.toArray(b,c);return b}}(),applyToBuffer:function(){var a;return function(b,c,d){void 0===a&&(a=new THREE.Vector3);void 0===c&&(c=0);void 0===d&&(d=b.length/b.itemSize);for(var e=0;e<d;e++,c++)a.x=b.getX(c),a.y=b.getY(c),a.z=b.getZ(c),a.applyMatrix3(this),b.setXYZ(a.x,a.y,a.z);return b}}(),
multiplyScalar:function(a){var b=this.elements;b[0]*=a;b[3]*=a;b[6]*=a;b[1]*=a;b[4]*=a;b[7]*=a;b[2]*=a;b[5]*=a;b[8]*=a;return this},determinant:function(){var a=this.elements,b=a[0],c=a[1],d=a[2],e=a[3],f=a[4],g=a[5],h=a[6],k=a[7],a=a[8];return b*f*a-b*g*k-c*e*a+c*g*h+d*e*k-d*f*h},getInverse:function(a,b){a instanceof THREE.Matrix4&&console.error("THREE.Matrix3.getInverse no longer takes a Matrix4 argument.");var c=a.elements,d=this.elements,e=c[0],f=c[1],g=c[2],h=c[3],k=c[4],l=c[5],m=c[6],p=c[7],
c=c[8],n=c*k-l*p,q=l*m-c*h,r=p*h-k*m,s=e*n+f*q+g*r;if(0===s){if(b)throw Error("THREE.Matrix3.getInverse(): can't invert matrix, determinant is 0");console.warn("THREE.Matrix3.getInverse(): can't invert matrix, determinant is 0");return this.identity()}s=1/s;d[0]=n*s;d[1]=(g*p-c*f)*s;d[2]=(l*f-g*k)*s;d[3]=q*s;d[4]=(c*e-g*m)*s;d[5]=(g*h-l*e)*s;d[6]=r*s;d[7]=(f*m-p*e)*s;d[8]=(k*e-f*h)*s;return this},transpose:function(){var a,b=this.elements;a=b[1];b[1]=b[3];b[3]=a;a=b[2];b[2]=b[6];b[6]=a;a=b[5];b[5]=
b[7];b[7]=a;return this},flattenToArrayOffset:function(a,b){console.warn("THREE.Matrix3: .flattenToArrayOffset is deprecated - just use .toArray instead.");return this.toArray(a,b)},getNormalMatrix:function(a){return this.setFromMatrix4(a).getInverse(this).transpose()},transposeIntoArray:function(a){var b=this.elements;a[0]=b[0];a[1]=b[3];a[2]=b[6];a[3]=b[1];a[4]=b[4];a[5]=b[7];a[6]=b[2];a[7]=b[5];a[8]=b[8];return this},fromArray:function(a){this.elements.set(a);return this},toArray:function(a,b){void 0===
a&&(a=[]);void 0===b&&(b=0);var c=this.elements;a[b]=c[0];a[b+1]=c[1];a[b+2]=c[2];a[b+3]=c[3];a[b+4]=c[4];a[b+5]=c[5];a[b+6]=c[6];a[b+7]=c[7];a[b+8]=c[8];return a}};THREE.Matrix4=function(){this.elements=new Float32Array([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]);0<arguments.length&&console.error("THREE.Matrix4: the constructor no longer reads arguments. use .set() instead.")};
THREE.Matrix4.prototype={constructor:THREE.Matrix4,set:function(a,b,c,d,e,f,g,h,k,l,m,p,n,q,r,s){var v=this.elements;v[0]=a;v[4]=b;v[8]=c;v[12]=d;v[1]=e;v[5]=f;v[9]=g;v[13]=h;v[2]=k;v[6]=l;v[10]=m;v[14]=p;v[3]=n;v[7]=q;v[11]=r;v[15]=s;return this},identity:function(){this.set(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1);return this},clone:function(){return(new THREE.Matrix4).fromArray(this.elements)},copy:function(a){this.elements.set(a.elements);return this},copyPosition:function(a){var b=this.elements;a=a.elements;
b[12]=a[12];b[13]=a[13];b[14]=a[14];return this},extractBasis:function(a,b,c){a.setFromMatrixColumn(this,0);b.setFromMatrixColumn(this,1);c.setFromMatrixColumn(this,2);return this},makeBasis:function(a,b,c){this.set(a.x,b.x,c.x,0,a.y,b.y,c.y,0,a.z,b.z,c.z,0,0,0,0,1);return this},extractRotation:function(){var a;return function(b){void 0===a&&(a=new THREE.Vector3);var c=this.elements,d=b.elements,e=1/a.setFromMatrixColumn(b,0).length(),f=1/a.setFromMatrixColumn(b,1).length();b=1/a.setFromMatrixColumn(b,
2).length();c[0]=d[0]*e;c[1]=d[1]*e;c[2]=d[2]*e;c[4]=d[4]*f;c[5]=d[5]*f;c[6]=d[6]*f;c[8]=d[8]*b;c[9]=d[9]*b;c[10]=d[10]*b;return this}}(),makeRotationFromEuler:function(a){!1===a instanceof THREE.Euler&&console.error("THREE.Matrix: .makeRotationFromEuler() now expects a Euler rotation rather than a Vector3 and order.");var b=this.elements,c=a.x,d=a.y,e=a.z,f=Math.cos(c),c=Math.sin(c),g=Math.cos(d),d=Math.sin(d),h=Math.cos(e),e=Math.sin(e);if("XYZ"===a.order){a=f*h;var k=f*e,l=c*h,m=c*e;b[0]=g*h;b[4]=
-g*e;b[8]=d;b[1]=k+l*d;b[5]=a-m*d;b[9]=-c*g;b[2]=m-a*d;b[6]=l+k*d;b[10]=f*g}else"YXZ"===a.order?(a=g*h,k=g*e,l=d*h,m=d*e,b[0]=a+m*c,b[4]=l*c-k,b[8]=f*d,b[1]=f*e,b[5]=f*h,b[9]=-c,b[2]=k*c-l,b[6]=m+a*c,b[10]=f*g):"ZXY"===a.order?(a=g*h,k=g*e,l=d*h,m=d*e,b[0]=a-m*c,b[4]=-f*e,b[8]=l+k*c,b[1]=k+l*c,b[5]=f*h,b[9]=m-a*c,b[2]=-f*d,b[6]=c,b[10]=f*g):"ZYX"===a.order?(a=f*h,k=f*e,l=c*h,m=c*e,b[0]=g*h,b[4]=l*d-k,b[8]=a*d+m,b[1]=g*e,b[5]=m*d+a,b[9]=k*d-l,b[2]=-d,b[6]=c*g,b[10]=f*g):"YZX"===a.order?(a=f*g,k=f*
d,l=c*g,m=c*d,b[0]=g*h,b[4]=m-a*e,b[8]=l*e+k,b[1]=e,b[5]=f*h,b[9]=-c*h,b[2]=-d*h,b[6]=k*e+l,b[10]=a-m*e):"XZY"===a.order&&(a=f*g,k=f*d,l=c*g,m=c*d,b[0]=g*h,b[4]=-e,b[8]=d*h,b[1]=a*e+m,b[5]=f*h,b[9]=k*e-l,b[2]=l*e-k,b[6]=c*h,b[10]=m*e+a);b[3]=0;b[7]=0;b[11]=0;b[12]=0;b[13]=0;b[14]=0;b[15]=1;return this},makeRotationFromQuaternion:function(a){var b=this.elements,c=a.x,d=a.y,e=a.z,f=a.w,g=c+c,h=d+d,k=e+e;a=c*g;var l=c*h,c=c*k,m=d*h,d=d*k,e=e*k,g=f*g,h=f*h,f=f*k;b[0]=1-(m+e);b[4]=l-f;b[8]=c+h;b[1]=l+
f;b[5]=1-(a+e);b[9]=d-g;b[2]=c-h;b[6]=d+g;b[10]=1-(a+m);b[3]=0;b[7]=0;b[11]=0;b[12]=0;b[13]=0;b[14]=0;b[15]=1;return this},lookAt:function(){var a,b,c;return function(d,e,f){void 0===a&&(a=new THREE.Vector3,b=new THREE.Vector3,c=new THREE.Vector3);var g=this.elements;c.subVectors(d,e).normalize();0===c.lengthSq()&&(c.z=1);a.crossVectors(f,c).normalize();0===a.lengthSq()&&(c.z+=1E-4,a.crossVectors(f,c).normalize());b.crossVectors(c,a);g[0]=a.x;g[4]=b.x;g[8]=c.x;g[1]=a.y;g[5]=b.y;g[9]=c.y;g[2]=a.z;
g[6]=b.z;g[10]=c.z;return this}}(),multiply:function(a,b){return void 0!==b?(console.warn("THREE.Matrix4: .multiply() now only accepts one argument. Use .multiplyMatrices( a, b ) instead."),this.multiplyMatrices(a,b)):this.multiplyMatrices(this,a)},premultiply:function(a){return this.multiplyMatrices(a,this)},multiplyMatrices:function(a,b){var c=a.elements,d=b.elements,e=this.elements,f=c[0],g=c[4],h=c[8],k=c[12],l=c[1],m=c[5],p=c[9],n=c[13],q=c[2],r=c[6],s=c[10],v=c[14],t=c[3],u=c[7],D=c[11],c=c[15],
w=d[0],I=d[4],z=d[8],y=d[12],A=d[1],G=d[5],B=d[9],F=d[13],J=d[2],P=d[6],K=d[10],H=d[14],M=d[3],O=d[7],N=d[11],d=d[15];e[0]=f*w+g*A+h*J+k*M;e[4]=f*I+g*G+h*P+k*O;e[8]=f*z+g*B+h*K+k*N;e[12]=f*y+g*F+h*H+k*d;e[1]=l*w+m*A+p*J+n*M;e[5]=l*I+m*G+p*P+n*O;e[9]=l*z+m*B+p*K+n*N;e[13]=l*y+m*F+p*H+n*d;e[2]=q*w+r*A+s*J+v*M;e[6]=q*I+r*G+s*P+v*O;e[10]=q*z+r*B+s*K+v*N;e[14]=q*y+r*F+s*H+v*d;e[3]=t*w+u*A+D*J+c*M;e[7]=t*I+u*G+D*P+c*O;e[11]=t*z+u*B+D*K+c*N;e[15]=t*y+u*F+D*H+c*d;return this},multiplyToArray:function(a,b,
c){var d=this.elements;this.multiplyMatrices(a,b);c[0]=d[0];c[1]=d[1];c[2]=d[2];c[3]=d[3];c[4]=d[4];c[5]=d[5];c[6]=d[6];c[7]=d[7];c[8]=d[8];c[9]=d[9];c[10]=d[10];c[11]=d[11];c[12]=d[12];c[13]=d[13];c[14]=d[14];c[15]=d[15];return this},multiplyScalar:function(a){var b=this.elements;b[0]*=a;b[4]*=a;b[8]*=a;b[12]*=a;b[1]*=a;b[5]*=a;b[9]*=a;b[13]*=a;b[2]*=a;b[6]*=a;b[10]*=a;b[14]*=a;b[3]*=a;b[7]*=a;b[11]*=a;b[15]*=a;return this},applyToVector3Array:function(){var a;return function(b,c,d){void 0===a&&
(a=new THREE.Vector3);void 0===c&&(c=0);void 0===d&&(d=b.length);for(var e=0;e<d;e+=3,c+=3)a.fromArray(b,c),a.applyMatrix4(this),a.toArray(b,c);return b}}(),applyToBuffer:function(){var a;return function(b,c,d){void 0===a&&(a=new THREE.Vector3);void 0===c&&(c=0);void 0===d&&(d=b.length/b.itemSize);for(var e=0;e<d;e++,c++)a.x=b.getX(c),a.y=b.getY(c),a.z=b.getZ(c),a.applyMatrix4(this),b.setXYZ(a.x,a.y,a.z);return b}}(),determinant:function(){var a=this.elements,b=a[0],c=a[4],d=a[8],e=a[12],f=a[1],g=
a[5],h=a[9],k=a[13],l=a[2],m=a[6],p=a[10],n=a[14];return a[3]*(+e*h*m-d*k*m-e*g*p+c*k*p+d*g*n-c*h*n)+a[7]*(+b*h*n-b*k*p+e*f*p-d*f*n+d*k*l-e*h*l)+a[11]*(+b*k*m-b*g*n-e*f*m+c*f*n+e*g*l-c*k*l)+a[15]*(-d*g*l-b*h*m+b*g*p+d*f*m-c*f*p+c*h*l)},transpose:function(){var a=this.elements,b;b=a[1];a[1]=a[4];a[4]=b;b=a[2];a[2]=a[8];a[8]=b;b=a[6];a[6]=a[9];a[9]=b;b=a[3];a[3]=a[12];a[12]=b;b=a[7];a[7]=a[13];a[13]=b;b=a[11];a[11]=a[14];a[14]=b;return this},flattenToArrayOffset:function(a,b){console.warn("THREE.Matrix3: .flattenToArrayOffset is deprecated - just use .toArray instead.");
return this.toArray(a,b)},getPosition:function(){var a;return function(){void 0===a&&(a=new THREE.Vector3);console.warn("THREE.Matrix4: .getPosition() has been removed. Use Vector3.setFromMatrixPosition( matrix ) instead.");return a.setFromMatrixColumn(this,3)}}(),setPosition:function(a){var b=this.elements;b[12]=a.x;b[13]=a.y;b[14]=a.z;return this},getInverse:function(a,b){var c=this.elements,d=a.elements,e=d[0],f=d[1],g=d[2],h=d[3],k=d[4],l=d[5],m=d[6],p=d[7],n=d[8],q=d[9],r=d[10],s=d[11],v=d[12],
t=d[13],u=d[14],d=d[15],D=q*u*p-t*r*p+t*m*s-l*u*s-q*m*d+l*r*d,w=v*r*p-n*u*p-v*m*s+k*u*s+n*m*d-k*r*d,I=n*t*p-v*q*p+v*l*s-k*t*s-n*l*d+k*q*d,z=v*q*m-n*t*m-v*l*r+k*t*r+n*l*u-k*q*u,y=e*D+f*w+g*I+h*z;if(0===y){if(b)throw Error("THREE.Matrix4.getInverse(): can't invert matrix, determinant is 0");console.warn("THREE.Matrix4.getInverse(): can't invert matrix, determinant is 0");return this.identity()}y=1/y;c[0]=D*y;c[1]=(t*r*h-q*u*h-t*g*s+f*u*s+q*g*d-f*r*d)*y;c[2]=(l*u*h-t*m*h+t*g*p-f*u*p-l*g*d+f*m*d)*y;c[3]=
(q*m*h-l*r*h-q*g*p+f*r*p+l*g*s-f*m*s)*y;c[4]=w*y;c[5]=(n*u*h-v*r*h+v*g*s-e*u*s-n*g*d+e*r*d)*y;c[6]=(v*m*h-k*u*h-v*g*p+e*u*p+k*g*d-e*m*d)*y;c[7]=(k*r*h-n*m*h+n*g*p-e*r*p-k*g*s+e*m*s)*y;c[8]=I*y;c[9]=(v*q*h-n*t*h-v*f*s+e*t*s+n*f*d-e*q*d)*y;c[10]=(k*t*h-v*l*h+v*f*p-e*t*p-k*f*d+e*l*d)*y;c[11]=(n*l*h-k*q*h-n*f*p+e*q*p+k*f*s-e*l*s)*y;c[12]=z*y;c[13]=(n*t*g-v*q*g+v*f*r-e*t*r-n*f*u+e*q*u)*y;c[14]=(v*l*g-k*t*g-v*f*m+e*t*m+k*f*u-e*l*u)*y;c[15]=(k*q*g-n*l*g+n*f*m-e*q*m-k*f*r+e*l*r)*y;return this},scale:function(a){var b=
this.elements,c=a.x,d=a.y;a=a.z;b[0]*=c;b[4]*=d;b[8]*=a;b[1]*=c;b[5]*=d;b[9]*=a;b[2]*=c;b[6]*=d;b[10]*=a;b[3]*=c;b[7]*=d;b[11]*=a;return this},getMaxScaleOnAxis:function(){var a=this.elements;return Math.sqrt(Math.max(a[0]*a[0]+a[1]*a[1]+a[2]*a[2],a[4]*a[4]+a[5]*a[5]+a[6]*a[6],a[8]*a[8]+a[9]*a[9]+a[10]*a[10]))},makeTranslation:function(a,b,c){this.set(1,0,0,a,0,1,0,b,0,0,1,c,0,0,0,1);return this},makeRotationX:function(a){var b=Math.cos(a);a=Math.sin(a);this.set(1,0,0,0,0,b,-a,0,0,a,b,0,0,0,0,1);
return this},makeRotationY:function(a){var b=Math.cos(a);a=Math.sin(a);this.set(b,0,a,0,0,1,0,0,-a,0,b,0,0,0,0,1);return this},makeRotationZ:function(a){var b=Math.cos(a);a=Math.sin(a);this.set(b,-a,0,0,a,b,0,0,0,0,1,0,0,0,0,1);return this},makeRotationAxis:function(a,b){var c=Math.cos(b),d=Math.sin(b),e=1-c,f=a.x,g=a.y,h=a.z,k=e*f,l=e*g;this.set(k*f+c,k*g-d*h,k*h+d*g,0,k*g+d*h,l*g+c,l*h-d*f,0,k*h-d*g,l*h+d*f,e*h*h+c,0,0,0,0,1);return this},makeScale:function(a,b,c){this.set(a,0,0,0,0,b,0,0,0,0,c,
0,0,0,0,1);return this},compose:function(a,b,c){this.makeRotationFromQuaternion(b);this.scale(c);this.setPosition(a);return this},decompose:function(){var a,b;return function(c,d,e){void 0===a&&(a=new THREE.Vector3,b=new THREE.Matrix4);var f=this.elements,g=a.set(f[0],f[1],f[2]).length(),h=a.set(f[4],f[5],f[6]).length(),k=a.set(f[8],f[9],f[10]).length();0>this.determinant()&&(g=-g);c.x=f[12];c.y=f[13];c.z=f[14];b.elements.set(this.elements);c=1/g;var f=1/h,l=1/k;b.elements[0]*=c;b.elements[1]*=c;
b.elements[2]*=c;b.elements[4]*=f;b.elements[5]*=f;b.elements[6]*=f;b.elements[8]*=l;b.elements[9]*=l;b.elements[10]*=l;d.setFromRotationMatrix(b);e.x=g;e.y=h;e.z=k;return this}}(),makeFrustum:function(a,b,c,d,e,f){var g=this.elements;g[0]=2*e/(b-a);g[4]=0;g[8]=(b+a)/(b-a);g[12]=0;g[1]=0;g[5]=2*e/(d-c);g[9]=(d+c)/(d-c);g[13]=0;g[2]=0;g[6]=0;g[10]=-(f+e)/(f-e);g[14]=-2*f*e/(f-e);g[3]=0;g[7]=0;g[11]=-1;g[15]=0;return this},makePerspective:function(a,b,c,d){a=c*Math.tan(THREE.Math.DEG2RAD*a*.5);var e=
-a;return this.makeFrustum(e*b,a*b,e,a,c,d)},makeOrthographic:function(a,b,c,d,e,f){var g=this.elements,h=1/(b-a),k=1/(c-d),l=1/(f-e);g[0]=2*h;g[4]=0;g[8]=0;g[12]=-((b+a)*h);g[1]=0;g[5]=2*k;g[9]=0;g[13]=-((c+d)*k);g[2]=0;g[6]=0;g[10]=-2*l;g[14]=-((f+e)*l);g[3]=0;g[7]=0;g[11]=0;g[15]=1;return this},equals:function(a){var b=this.elements;a=a.elements;for(var c=0;16>c;c++)if(b[c]!==a[c])return!1;return!0},fromArray:function(a){this.elements.set(a);return this},toArray:function(a,b){void 0===a&&(a=[]);
void 0===b&&(b=0);var c=this.elements;a[b]=c[0];a[b+1]=c[1];a[b+2]=c[2];a[b+3]=c[3];a[b+4]=c[4];a[b+5]=c[5];a[b+6]=c[6];a[b+7]=c[7];a[b+8]=c[8];a[b+9]=c[9];a[b+10]=c[10];a[b+11]=c[11];a[b+12]=c[12];a[b+13]=c[13];a[b+14]=c[14];a[b+15]=c[15];return a}};THREE.Ray=function(a,b){this.origin=void 0!==a?a:new THREE.Vector3;this.direction=void 0!==b?b:new THREE.Vector3};
THREE.Ray.prototype={constructor:THREE.Ray,set:function(a,b){this.origin.copy(a);this.direction.copy(b);return this},clone:function(){return(new this.constructor).copy(this)},copy:function(a){this.origin.copy(a.origin);this.direction.copy(a.direction);return this},at:function(a,b){return(b||new THREE.Vector3).copy(this.direction).multiplyScalar(a).add(this.origin)},lookAt:function(a){this.direction.copy(a).sub(this.origin).normalize();return this},recast:function(){var a=new THREE.Vector3;return function(b){this.origin.copy(this.at(b,
a));return this}}(),closestPointToPoint:function(a,b){var c=b||new THREE.Vector3;c.subVectors(a,this.origin);var d=c.dot(this.direction);return 0>d?c.copy(this.origin):c.copy(this.direction).multiplyScalar(d).add(this.origin)},distanceToPoint:function(a){return Math.sqrt(this.distanceSqToPoint(a))},distanceSqToPoint:function(){var a=new THREE.Vector3;return function(b){var c=a.subVectors(b,this.origin).dot(this.direction);if(0>c)return this.origin.distanceToSquared(b);a.copy(this.direction).multiplyScalar(c).add(this.origin);
return a.distanceToSquared(b)}}(),distanceSqToSegment:function(){var a=new THREE.Vector3,b=new THREE.Vector3,c=new THREE.Vector3;return function(d,e,f,g){a.copy(d).add(e).multiplyScalar(.5);b.copy(e).sub(d).normalize();c.copy(this.origin).sub(a);var h=.5*d.distanceTo(e),k=-this.direction.dot(b),l=c.dot(this.direction),m=-c.dot(b),p=c.lengthSq(),n=Math.abs(1-k*k),q;0<n?(d=k*m-l,e=k*l-m,q=h*n,0<=d?e>=-q?e<=q?(h=1/n,d*=h,e*=h,k=d*(d+k*e+2*l)+e*(k*d+e+2*m)+p):(e=h,d=Math.max(0,-(k*e+l)),k=-d*d+e*(e+2*
m)+p):(e=-h,d=Math.max(0,-(k*e+l)),k=-d*d+e*(e+2*m)+p):e<=-q?(d=Math.max(0,-(-k*h+l)),e=0<d?-h:Math.min(Math.max(-h,-m),h),k=-d*d+e*(e+2*m)+p):e<=q?(d=0,e=Math.min(Math.max(-h,-m),h),k=e*(e+2*m)+p):(d=Math.max(0,-(k*h+l)),e=0<d?h:Math.min(Math.max(-h,-m),h),k=-d*d+e*(e+2*m)+p)):(e=0<k?-h:h,d=Math.max(0,-(k*e+l)),k=-d*d+e*(e+2*m)+p);f&&f.copy(this.direction).multiplyScalar(d).add(this.origin);g&&g.copy(b).multiplyScalar(e).add(a);return k}}(),intersectSphere:function(){var a=new THREE.Vector3;return function(b,
c){a.subVectors(b.center,this.origin);var d=a.dot(this.direction),e=a.dot(a)-d*d,f=b.radius*b.radius;if(e>f)return null;f=Math.sqrt(f-e);e=d-f;d+=f;return 0>e&&0>d?null:0>e?this.at(d,c):this.at(e,c)}}(),intersectsSphere:function(a){return this.distanceToPoint(a.center)<=a.radius},distanceToPlane:function(a){var b=a.normal.dot(this.direction);if(0===b)return 0===a.distanceToPoint(this.origin)?0:null;a=-(this.origin.dot(a.normal)+a.constant)/b;return 0<=a?a:null},intersectPlane:function(a,b){var c=
this.distanceToPlane(a);return null===c?null:this.at(c,b)},intersectsPlane:function(a){var b=a.distanceToPoint(this.origin);return 0===b||0>a.normal.dot(this.direction)*b?!0:!1},intersectBox:function(a,b){var c,d,e,f,g;d=1/this.direction.x;f=1/this.direction.y;g=1/this.direction.z;var h=this.origin;0<=d?(c=(a.min.x-h.x)*d,d*=a.max.x-h.x):(c=(a.max.x-h.x)*d,d*=a.min.x-h.x);0<=f?(e=(a.min.y-h.y)*f,f*=a.max.y-h.y):(e=(a.max.y-h.y)*f,f*=a.min.y-h.y);if(c>f||e>d)return null;if(e>c||c!==c)c=e;if(f<d||d!==
d)d=f;0<=g?(e=(a.min.z-h.z)*g,g*=a.max.z-h.z):(e=(a.max.z-h.z)*g,g*=a.min.z-h.z);if(c>g||e>d)return null;if(e>c||c!==c)c=e;if(g<d||d!==d)d=g;return 0>d?null:this.at(0<=c?c:d,b)},intersectsBox:function(){var a=new THREE.Vector3;return function(b){return null!==this.intersectBox(b,a)}}(),intersectTriangle:function(){var a=new THREE.Vector3,b=new THREE.Vector3,c=new THREE.Vector3,d=new THREE.Vector3;return function(e,f,g,h,k){b.subVectors(f,e);c.subVectors(g,e);d.crossVectors(b,c);f=this.direction.dot(d);
if(0<f){if(h)return null;h=1}else if(0>f)h=-1,f=-f;else return null;a.subVectors(this.origin,e);e=h*this.direction.dot(c.crossVectors(a,c));if(0>e)return null;g=h*this.direction.dot(b.cross(a));if(0>g||e+g>f)return null;e=-h*a.dot(d);return 0>e?null:this.at(e/f,k)}}(),applyMatrix4:function(a){this.direction.add(this.origin).applyMatrix4(a);this.origin.applyMatrix4(a);this.direction.sub(this.origin);this.direction.normalize();return this},equals:function(a){return a.origin.equals(this.origin)&&a.direction.equals(this.direction)}};
THREE.Sphere=function(a,b){this.center=void 0!==a?a:new THREE.Vector3;this.radius=void 0!==b?b:0};
THREE.Sphere.prototype={constructor:THREE.Sphere,set:function(a,b){this.center.copy(a);this.radius=b;return this},setFromPoints:function(){var a=new THREE.Box3;return function(b,c){var d=this.center;void 0!==c?d.copy(c):a.setFromPoints(b).center(d);for(var e=0,f=0,g=b.length;f<g;f++)e=Math.max(e,d.distanceToSquared(b[f]));this.radius=Math.sqrt(e);return this}}(),clone:function(){return(new this.constructor).copy(this)},copy:function(a){this.center.copy(a.center);this.radius=a.radius;return this},
empty:function(){return 0>=this.radius},containsPoint:function(a){return a.distanceToSquared(this.center)<=this.radius*this.radius},distanceToPoint:function(a){return a.distanceTo(this.center)-this.radius},intersectsSphere:function(a){var b=this.radius+a.radius;return a.center.distanceToSquared(this.center)<=b*b},intersectsBox:function(a){return a.intersectsSphere(this)},intersectsPlane:function(a){return Math.abs(this.center.dot(a.normal)-a.constant)<=this.radius},clampPoint:function(a,b){var c=
this.center.distanceToSquared(a),d=b||new THREE.Vector3;d.copy(a);c>this.radius*this.radius&&(d.sub(this.center).normalize(),d.multiplyScalar(this.radius).add(this.center));return d},getBoundingBox:function(a){a=a||new THREE.Box3;a.set(this.center,this.center);a.expandByScalar(this.radius);return a},applyMatrix4:function(a){this.center.applyMatrix4(a);this.radius*=a.getMaxScaleOnAxis();return this},translate:function(a){this.center.add(a);return this},equals:function(a){return a.center.equals(this.center)&&
a.radius===this.radius}};THREE.Frustum=function(a,b,c,d,e,f){this.planes=[void 0!==a?a:new THREE.Plane,void 0!==b?b:new THREE.Plane,void 0!==c?c:new THREE.Plane,void 0!==d?d:new THREE.Plane,void 0!==e?e:new THREE.Plane,void 0!==f?f:new THREE.Plane]};
THREE.Frustum.prototype={constructor:THREE.Frustum,set:function(a,b,c,d,e,f){var g=this.planes;g[0].copy(a);g[1].copy(b);g[2].copy(c);g[3].copy(d);g[4].copy(e);g[5].copy(f);return this},clone:function(){return(new this.constructor).copy(this)},copy:function(a){for(var b=this.planes,c=0;6>c;c++)b[c].copy(a.planes[c]);return this},setFromMatrix:function(a){var b=this.planes,c=a.elements;a=c[0];var d=c[1],e=c[2],f=c[3],g=c[4],h=c[5],k=c[6],l=c[7],m=c[8],p=c[9],n=c[10],q=c[11],r=c[12],s=c[13],v=c[14],
c=c[15];b[0].setComponents(f-a,l-g,q-m,c-r).normalize();b[1].setComponents(f+a,l+g,q+m,c+r).normalize();b[2].setComponents(f+d,l+h,q+p,c+s).normalize();b[3].setComponents(f-d,l-h,q-p,c-s).normalize();b[4].setComponents(f-e,l-k,q-n,c-v).normalize();b[5].setComponents(f+e,l+k,q+n,c+v).normalize();return this},intersectsObject:function(){var a=new THREE.Sphere;return function(b){var c=b.geometry;null===c.boundingSphere&&c.computeBoundingSphere();a.copy(c.boundingSphere).applyMatrix4(b.matrixWorld);return this.intersectsSphere(a)}}(),
intersectsSprite:function(){var a=new THREE.Sphere;return function(b){a.center.set(0,0,0);a.radius=.7071067811865476;a.applyMatrix4(b.matrixWorld);return this.intersectsSphere(a)}}(),intersectsSphere:function(a){var b=this.planes,c=a.center;a=-a.radius;for(var d=0;6>d;d++)if(b[d].distanceToPoint(c)<a)return!1;return!0},intersectsBox:function(){var a=new THREE.Vector3,b=new THREE.Vector3;return function(c){for(var d=this.planes,e=0;6>e;e++){var f=d[e];a.x=0<f.normal.x?c.min.x:c.max.x;b.x=0<f.normal.x?
c.max.x:c.min.x;a.y=0<f.normal.y?c.min.y:c.max.y;b.y=0<f.normal.y?c.max.y:c.min.y;a.z=0<f.normal.z?c.min.z:c.max.z;b.z=0<f.normal.z?c.max.z:c.min.z;var g=f.distanceToPoint(a),f=f.distanceToPoint(b);if(0>g&&0>f)return!1}return!0}}(),containsPoint:function(a){for(var b=this.planes,c=0;6>c;c++)if(0>b[c].distanceToPoint(a))return!1;return!0}};THREE.Plane=function(a,b){this.normal=void 0!==a?a:new THREE.Vector3(1,0,0);this.constant=void 0!==b?b:0};
THREE.Plane.prototype={constructor:THREE.Plane,set:function(a,b){this.normal.copy(a);this.constant=b;return this},setComponents:function(a,b,c,d){this.normal.set(a,b,c);this.constant=d;return this},setFromNormalAndCoplanarPoint:function(a,b){this.normal.copy(a);this.constant=-b.dot(this.normal);return this},setFromCoplanarPoints:function(){var a=new THREE.Vector3,b=new THREE.Vector3;return function(c,d,e){d=a.subVectors(e,d).cross(b.subVectors(c,d)).normalize();this.setFromNormalAndCoplanarPoint(d,
c);return this}}(),clone:function(){return(new this.constructor).copy(this)},copy:function(a){this.normal.copy(a.normal);this.constant=a.constant;return this},normalize:function(){var a=1/this.normal.length();this.normal.multiplyScalar(a);this.constant*=a;return this},negate:function(){this.constant*=-1;this.normal.negate();return this},distanceToPoint:function(a){return this.normal.dot(a)+this.constant},distanceToSphere:function(a){return this.distanceToPoint(a.center)-a.radius},projectPoint:function(a,
b){return this.orthoPoint(a,b).sub(a).negate()},orthoPoint:function(a,b){var c=this.distanceToPoint(a);return(b||new THREE.Vector3).copy(this.normal).multiplyScalar(c)},intersectLine:function(){var a=new THREE.Vector3;return function(b,c){var d=c||new THREE.Vector3,e=b.delta(a),f=this.normal.dot(e);if(0===f){if(0===this.distanceToPoint(b.start))return d.copy(b.start)}else return f=-(b.start.dot(this.normal)+this.constant)/f,0>f||1<f?void 0:d.copy(e).multiplyScalar(f).add(b.start)}}(),intersectsLine:function(a){var b=
this.distanceToPoint(a.start);a=this.distanceToPoint(a.end);return 0>b&&0<a||0>a&&0<b},intersectsBox:function(a){return a.intersectsPlane(this)},intersectsSphere:function(a){return a.intersectsPlane(this)},coplanarPoint:function(a){return(a||new THREE.Vector3).copy(this.normal).multiplyScalar(-this.constant)},applyMatrix4:function(){var a=new THREE.Vector3,b=new THREE.Matrix3;return function(c,d){var e=this.coplanarPoint(a).applyMatrix4(c),f=d||b.getNormalMatrix(c),f=this.normal.applyMatrix3(f).normalize();
this.constant=-e.dot(f);return this}}(),translate:function(a){this.constant-=a.dot(this.normal);return this},equals:function(a){return a.normal.equals(this.normal)&&a.constant===this.constant}};THREE.Spherical=function(a,b,c){this.radius=void 0!==a?a:1;this.phi=void 0!==b?b:0;this.theta=void 0!==c?c:0;return this};
THREE.Spherical.prototype={constructor:THREE.Spherical,set:function(a,b,c){this.radius=a;this.phi=b;this.theta=c;return this},clone:function(){return(new this.constructor).copy(this)},copy:function(a){this.radius.copy(a.radius);this.phi.copy(a.phi);this.theta.copy(a.theta);return this},makeSafe:function(){this.phi=Math.max(1E-6,Math.min(Math.PI-1E-6,this.phi));return this},setFromVector3:function(a){this.radius=a.length();0===this.radius?this.phi=this.theta=0:(this.theta=Math.atan2(a.x,a.z),this.phi=
Math.acos(THREE.Math.clamp(a.y/this.radius,-1,1)));return this}};
THREE.Math={DEG2RAD:Math.PI/180,RAD2DEG:180/Math.PI,generateUUID:function(){var a="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz".split(""),b=Array(36),c=0,d;return function(){for(var e=0;36>e;e++)8===e||13===e||18===e||23===e?b[e]="-":14===e?b[e]="4":(2>=c&&(c=33554432+16777216*Math.random()|0),d=c&15,c>>=4,b[e]=a[19===e?d&3|8:d]);return b.join("")}}(),clamp:function(a,b,c){return Math.max(b,Math.min(c,a))},euclideanModulo:function(a,b){return(a%b+b)%b},mapLinear:function(a,b,c,
d,e){return d+(a-b)*(e-d)/(c-b)},smoothstep:function(a,b,c){if(a<=b)return 0;if(a>=c)return 1;a=(a-b)/(c-b);return a*a*(3-2*a)},smootherstep:function(a,b,c){if(a<=b)return 0;if(a>=c)return 1;a=(a-b)/(c-b);return a*a*a*(a*(6*a-15)+10)},random16:function(){console.warn("THREE.Math.random16() has been deprecated. Use Math.random() instead.");return Math.random()},randInt:function(a,b){return a+Math.floor(Math.random()*(b-a+1))},randFloat:function(a,b){return a+Math.random()*(b-a)},randFloatSpread:function(a){return a*
(.5-Math.random())},degToRad:function(a){return a*THREE.Math.DEG2RAD},radToDeg:function(a){return a*THREE.Math.RAD2DEG},isPowerOfTwo:function(a){return 0===(a&a-1)&&0!==a},nearestPowerOfTwo:function(a){return Math.pow(2,Math.round(Math.log(a)/Math.LN2))},nextPowerOfTwo:function(a){a--;a|=a>>1;a|=a>>2;a|=a>>4;a|=a>>8;a|=a>>16;a++;return a}};
THREE.Spline=function(a){function b(a,b,c,d,e,f,g){a=.5*(c-a);d=.5*(d-b);return(2*(b-c)+a+d)*g+(-3*(b-c)-2*a-d)*f+a*e+b}this.points=a;var c=[],d={x:0,y:0,z:0},e,f,g,h,k,l,m,p,n;this.initFromArray=function(a){this.points=[];for(var b=0;b<a.length;b++)this.points[b]={x:a[b][0],y:a[b][1],z:a[b][2]}};this.getPoint=function(a){e=(this.points.length-1)*a;f=Math.floor(e);g=e-f;c[0]=0===f?f:f-1;c[1]=f;c[2]=f>this.points.length-2?this.points.length-1:f+1;c[3]=f>this.points.length-3?this.points.length-1:f+
2;l=this.points[c[0]];m=this.points[c[1]];p=this.points[c[2]];n=this.points[c[3]];h=g*g;k=g*h;d.x=b(l.x,m.x,p.x,n.x,g,h,k);d.y=b(l.y,m.y,p.y,n.y,g,h,k);d.z=b(l.z,m.z,p.z,n.z,g,h,k);return d};this.getControlPointsArray=function(){var a,b,c=this.points.length,d=[];for(a=0;a<c;a++)b=this.points[a],d[a]=[b.x,b.y,b.z];return d};this.getLength=function(a){var b,c,d,e=b=b=0,f=new THREE.Vector3,g=new THREE.Vector3,h=[],k=0;h[0]=0;a||(a=100);c=this.points.length*a;f.copy(this.points[0]);for(a=1;a<c;a++)b=
a/c,d=this.getPoint(b),g.copy(d),k+=g.distanceTo(f),f.copy(d),b*=this.points.length-1,b=Math.floor(b),b!==e&&(h[b]=k,e=b);h[h.length]=k;return{chunks:h,total:k}};this.reparametrizeByArcLength=function(a){var b,c,d,e,f,g,h=[],k=new THREE.Vector3,l=this.getLength();h.push(k.copy(this.points[0]).clone());for(b=1;b<this.points.length;b++){c=l.chunks[b]-l.chunks[b-1];g=Math.ceil(a*c/l.total);e=(b-1)/(this.points.length-1);f=b/(this.points.length-1);for(c=1;c<g-1;c++)d=e+1/g*c*(f-e),d=this.getPoint(d),
h.push(k.copy(d).clone());h.push(k.copy(this.points[b]).clone())}this.points=h}};THREE.Triangle=function(a,b,c){this.a=void 0!==a?a:new THREE.Vector3;this.b=void 0!==b?b:new THREE.Vector3;this.c=void 0!==c?c:new THREE.Vector3};THREE.Triangle.normal=function(){var a=new THREE.Vector3;return function(b,c,d,e){e=e||new THREE.Vector3;e.subVectors(d,c);a.subVectors(b,c);e.cross(a);b=e.lengthSq();return 0<b?e.multiplyScalar(1/Math.sqrt(b)):e.set(0,0,0)}}();
THREE.Triangle.barycoordFromPoint=function(){var a=new THREE.Vector3,b=new THREE.Vector3,c=new THREE.Vector3;return function(d,e,f,g,h){a.subVectors(g,e);b.subVectors(f,e);c.subVectors(d,e);d=a.dot(a);e=a.dot(b);f=a.dot(c);var k=b.dot(b);g=b.dot(c);var l=d*k-e*e;h=h||new THREE.Vector3;if(0===l)return h.set(-2,-1,-1);l=1/l;k=(k*f-e*g)*l;d=(d*g-e*f)*l;return h.set(1-k-d,d,k)}}();
THREE.Triangle.containsPoint=function(){var a=new THREE.Vector3;return function(b,c,d,e){b=THREE.Triangle.barycoordFromPoint(b,c,d,e,a);return 0<=b.x&&0<=b.y&&1>=b.x+b.y}}();
THREE.Triangle.prototype={constructor:THREE.Triangle,set:function(a,b,c){this.a.copy(a);this.b.copy(b);this.c.copy(c);return this},setFromPointsAndIndices:function(a,b,c,d){this.a.copy(a[b]);this.b.copy(a[c]);this.c.copy(a[d]);return this},clone:function(){return(new this.constructor).copy(this)},copy:function(a){this.a.copy(a.a);this.b.copy(a.b);this.c.copy(a.c);return this},area:function(){var a=new THREE.Vector3,b=new THREE.Vector3;return function(){a.subVectors(this.c,this.b);b.subVectors(this.a,
this.b);return.5*a.cross(b).length()}}(),midpoint:function(a){return(a||new THREE.Vector3).addVectors(this.a,this.b).add(this.c).multiplyScalar(1/3)},normal:function(a){return THREE.Triangle.normal(this.a,this.b,this.c,a)},plane:function(a){return(a||new THREE.Plane).setFromCoplanarPoints(this.a,this.b,this.c)},barycoordFromPoint:function(a,b){return THREE.Triangle.barycoordFromPoint(a,this.a,this.b,this.c,b)},containsPoint:function(a){return THREE.Triangle.containsPoint(a,this.a,this.b,this.c)},
closestPointToPoint:function(){var a,b,c,d;return function(e,f){void 0===a&&(a=new THREE.Plane,b=[new THREE.Line3,new THREE.Line3,new THREE.Line3],c=new THREE.Vector3,d=new THREE.Vector3);var g=f||new THREE.Vector3,h=Infinity;a.setFromCoplanarPoints(this.a,this.b,this.c);a.projectPoint(e,c);if(!0===this.containsPoint(c))g.copy(c);else{b[0].set(this.a,this.b);b[1].set(this.b,this.c);b[2].set(this.c,this.a);for(var k=0;k<b.length;k++){b[k].closestPointToPoint(c,!0,d);var l=c.distanceToSquared(d);l<
h&&(h=l,g.copy(d))}}return g}}(),equals:function(a){return a.a.equals(this.a)&&a.b.equals(this.b)&&a.c.equals(this.c)}};THREE.Interpolant=function(a,b,c,d){this.parameterPositions=a;this._cachedIndex=0;this.resultBuffer=void 0!==d?d:new b.constructor(c);this.sampleValues=b;this.valueSize=c};
THREE.Interpolant.prototype={constructor:THREE.Interpolant,evaluate:function(a){var b=this.parameterPositions,c=this._cachedIndex,d=b[c],e=b[c-1];a:{b:{c:{d:if(!(a<d)){for(var f=c+2;;){if(void 0===d){if(a<e)break d;this._cachedIndex=c=b.length;return this.afterEnd_(c-1,a,e)}if(c===f)break;e=d;d=b[++c];if(a<d)break b}d=b.length;break c}if(a>=e)break a;else{f=b[1];a<f&&(c=2,e=f);for(f=c-2;;){if(void 0===e)return this._cachedIndex=0,this.beforeStart_(0,a,d);if(c===f)break;d=e;e=b[--c-1];if(a>=e)break b}d=
c;c=0}}for(;c<d;)e=c+d>>>1,a<b[e]?d=e:c=e+1;d=b[c];e=b[c-1];if(void 0===e)return this._cachedIndex=0,this.beforeStart_(0,a,d);if(void 0===d)return this._cachedIndex=c=b.length,this.afterEnd_(c-1,e,a)}this._cachedIndex=c;this.intervalChanged_(c,e,d)}return this.interpolate_(c,e,a,d)},settings:null,DefaultSettings_:{},getSettings_:function(){return this.settings||this.DefaultSettings_},copySampleValue_:function(a){var b=this.resultBuffer,c=this.sampleValues,d=this.valueSize;a*=d;for(var e=0;e!==d;++e)b[e]=
c[a+e];return b},interpolate_:function(a,b,c,d){throw Error("call to abstract method");},intervalChanged_:function(a,b,c){}};Object.assign(THREE.Interpolant.prototype,{beforeStart_:THREE.Interpolant.prototype.copySampleValue_,afterEnd_:THREE.Interpolant.prototype.copySampleValue_});THREE.CubicInterpolant=function(a,b,c,d){THREE.Interpolant.call(this,a,b,c,d);this._offsetNext=this._weightNext=this._offsetPrev=this._weightPrev=-0};
THREE.CubicInterpolant.prototype=Object.assign(Object.create(THREE.Interpolant.prototype),{constructor:THREE.CubicInterpolant,DefaultSettings_:{endingStart:THREE.ZeroCurvatureEnding,endingEnd:THREE.ZeroCurvatureEnding},intervalChanged_:function(a,b,c){var d=this.parameterPositions,e=a-2,f=a+1,g=d[e],h=d[f];if(void 0===g)switch(this.getSettings_().endingStart){case THREE.ZeroSlopeEnding:e=a;g=2*b-c;break;case THREE.WrapAroundEnding:e=d.length-2;g=b+d[e]-d[e+1];break;default:e=a,g=c}if(void 0===h)switch(this.getSettings_().endingEnd){case THREE.ZeroSlopeEnding:f=
a;h=2*c-b;break;case THREE.WrapAroundEnding:f=1;h=c+d[1]-d[0];break;default:f=a-1,h=b}a=.5*(c-b);d=this.valueSize;this._weightPrev=a/(b-g);this._weightNext=a/(h-c);this._offsetPrev=e*d;this._offsetNext=f*d},interpolate_:function(a,b,c,d){var e=this.resultBuffer,f=this.sampleValues,g=this.valueSize;a*=g;var h=a-g,k=this._offsetPrev,l=this._offsetNext,m=this._weightPrev,p=this._weightNext,n=(c-b)/(d-b);c=n*n;d=c*n;b=-m*d+2*m*c-m*n;m=(1+m)*d+(-1.5-2*m)*c+(-.5+m)*n+1;n=(-1-p)*d+(1.5+p)*c+.5*n;p=p*d-p*
c;for(c=0;c!==g;++c)e[c]=b*f[k+c]+m*f[h+c]+n*f[a+c]+p*f[l+c];return e}});THREE.DiscreteInterpolant=function(a,b,c,d){THREE.Interpolant.call(this,a,b,c,d)};THREE.DiscreteInterpolant.prototype=Object.assign(Object.create(THREE.Interpolant.prototype),{constructor:THREE.DiscreteInterpolant,interpolate_:function(a,b,c,d){return this.copySampleValue_(a-1)}});THREE.LinearInterpolant=function(a,b,c,d){THREE.Interpolant.call(this,a,b,c,d)};
THREE.LinearInterpolant.prototype=Object.assign(Object.create(THREE.Interpolant.prototype),{constructor:THREE.LinearInterpolant,interpolate_:function(a,b,c,d){var e=this.resultBuffer,f=this.sampleValues,g=this.valueSize;a*=g;var h=a-g;b=(c-b)/(d-b);c=1-b;for(d=0;d!==g;++d)e[d]=f[h+d]*c+f[a+d]*b;return e}});THREE.QuaternionLinearInterpolant=function(a,b,c,d){THREE.Interpolant.call(this,a,b,c,d)};
THREE.QuaternionLinearInterpolant.prototype=Object.assign(Object.create(THREE.Interpolant.prototype),{constructor:THREE.QuaternionLinearInterpolant,interpolate_:function(a,b,c,d){var e=this.resultBuffer,f=this.sampleValues,g=this.valueSize;a*=g;b=(c-b)/(d-b);for(c=a+g;a!==c;a+=4)THREE.Quaternion.slerpFlat(e,0,f,a-g,f,a,b);return e}});THREE.Clock=function(a){this.autoStart=void 0!==a?a:!0;this.elapsedTime=this.oldTime=this.startTime=0;this.running=!1};
THREE.Clock.prototype={constructor:THREE.Clock,start:function(){this.oldTime=this.startTime=(performance||Date).now();this.running=!0},stop:function(){this.getElapsedTime();this.running=!1},getElapsedTime:function(){this.getDelta();return this.elapsedTime},getDelta:function(){var a=0;this.autoStart&&!this.running&&this.start();if(this.running){var b=(performance||Date).now(),a=(b-this.oldTime)/1E3;this.oldTime=b;this.elapsedTime+=a}return a}};THREE.EventDispatcher=function(){};
Object.assign(THREE.EventDispatcher.prototype,{addEventListener:function(a,b){void 0===this._listeners&&(this._listeners={});var c=this._listeners;void 0===c[a]&&(c[a]=[]);-1===c[a].indexOf(b)&&c[a].push(b)},hasEventListener:function(a,b){if(void 0===this._listeners)return!1;var c=this._listeners;return void 0!==c[a]&&-1!==c[a].indexOf(b)?!0:!1},removeEventListener:function(a,b){if(void 0!==this._listeners){var c=this._listeners[a];if(void 0!==c){var d=c.indexOf(b);-1!==d&&c.splice(d,1)}}},dispatchEvent:function(a){if(void 0!==
this._listeners){var b=this._listeners[a.type];if(void 0!==b){a.target=this;for(var c=[],d=0,e=b.length,d=0;d<e;d++)c[d]=b[d];for(d=0;d<e;d++)c[d].call(this,a)}}}});THREE.Layers=function(){this.mask=1};THREE.Layers.prototype={constructor:THREE.Layers,set:function(a){this.mask=1<<a},enable:function(a){this.mask|=1<<a},toggle:function(a){this.mask^=1<<a},disable:function(a){this.mask&=~(1<<a)},test:function(a){return 0!==(this.mask&a.mask)}};
(function(a){function b(a,b){return a.distance-b.distance}function c(a,b,f,g){if(!1!==a.visible&&(a.raycast(b,f),!0===g)){a=a.children;g=0;for(var h=a.length;g<h;g++)c(a[g],b,f,!0)}}a.Raycaster=function(b,c,f,g){this.ray=new a.Ray(b,c);this.near=f||0;this.far=g||Infinity;this.params={Mesh:{},Line:{},LOD:{},Points:{threshold:1},Sprite:{}};Object.defineProperties(this.params,{PointCloud:{get:function(){console.warn("THREE.Raycaster: params.PointCloud has been renamed to params.Points.");return this.Points}}})};
a.Raycaster.prototype={constructor:a.Raycaster,linePrecision:1,set:function(a,b){this.ray.set(a,b)},setFromCamera:function(b,c){c instanceof a.PerspectiveCamera?(this.ray.origin.setFromMatrixPosition(c.matrixWorld),this.ray.direction.set(b.x,b.y,.5).unproject(c).sub(this.ray.origin).normalize()):c instanceof a.OrthographicCamera?(this.ray.origin.set(b.x,b.y,(c.near+c.far)/(c.near-c.far)).unproject(c),this.ray.direction.set(0,0,-1).transformDirection(c.matrixWorld)):console.error("THREE.Raycaster: Unsupported camera type.")},
intersectObject:function(a,e){var f=[];c(a,this,f,e);f.sort(b);return f},intersectObjects:function(a,e){var f=[];if(!1===Array.isArray(a))return console.warn("THREE.Raycaster.intersectObjects: objects is not an Array."),f;for(var g=0,h=a.length;g<h;g++)c(a[g],this,f,e);f.sort(b);return f}}})(THREE);
THREE.Object3D=function(){Object.defineProperty(this,"id",{value:THREE.Object3DIdCount++});this.uuid=THREE.Math.generateUUID();this.name="";this.type="Object3D";this.parent=null;this.children=[];this.up=THREE.Object3D.DefaultUp.clone();var a=new THREE.Vector3,b=new THREE.Euler,c=new THREE.Quaternion,d=new THREE.Vector3(1,1,1);b.onChange(function(){c.setFromEuler(b,!1)});c.onChange(function(){b.setFromQuaternion(c,void 0,!1)});Object.defineProperties(this,{position:{enumerable:!0,value:a},rotation:{enumerable:!0,
value:b},quaternion:{enumerable:!0,value:c},scale:{enumerable:!0,value:d},modelViewMatrix:{value:new THREE.Matrix4},normalMatrix:{value:new THREE.Matrix3}});this.matrix=new THREE.Matrix4;this.matrixWorld=new THREE.Matrix4;this.matrixAutoUpdate=THREE.Object3D.DefaultMatrixAutoUpdate;this.matrixWorldNeedsUpdate=!1;this.layers=new THREE.Layers;this.visible=!0;this.receiveShadow=this.castShadow=!1;this.frustumCulled=!0;this.renderOrder=0;this.userData={}};
THREE.Object3D.DefaultUp=new THREE.Vector3(0,1,0);THREE.Object3D.DefaultMatrixAutoUpdate=!0;
Object.assign(THREE.Object3D.prototype,THREE.EventDispatcher.prototype,{applyMatrix:function(a){this.matrix.multiplyMatrices(a,this.matrix);this.matrix.decompose(this.position,this.quaternion,this.scale)},setRotationFromAxisAngle:function(a,b){this.quaternion.setFromAxisAngle(a,b)},setRotationFromEuler:function(a){this.quaternion.setFromEuler(a,!0)},setRotationFromMatrix:function(a){this.quaternion.setFromRotationMatrix(a)},setRotationFromQuaternion:function(a){this.quaternion.copy(a)},rotateOnAxis:function(){var a=
new THREE.Quaternion;return function(b,c){a.setFromAxisAngle(b,c);this.quaternion.multiply(a);return this}}(),rotateX:function(){var a=new THREE.Vector3(1,0,0);return function(b){return this.rotateOnAxis(a,b)}}(),rotateY:function(){var a=new THREE.Vector3(0,1,0);return function(b){return this.rotateOnAxis(a,b)}}(),rotateZ:function(){var a=new THREE.Vector3(0,0,1);return function(b){return this.rotateOnAxis(a,b)}}(),translateOnAxis:function(){var a=new THREE.Vector3;return function(b,c){a.copy(b).applyQuaternion(this.quaternion);
this.position.add(a.multiplyScalar(c));return this}}(),translateX:function(){var a=new THREE.Vector3(1,0,0);return function(b){return this.translateOnAxis(a,b)}}(),translateY:function(){var a=new THREE.Vector3(0,1,0);return function(b){return this.translateOnAxis(a,b)}}(),translateZ:function(){var a=new THREE.Vector3(0,0,1);return function(b){return this.translateOnAxis(a,b)}}(),localToWorld:function(a){return a.applyMatrix4(this.matrixWorld)},worldToLocal:function(){var a=new THREE.Matrix4;return function(b){return b.applyMatrix4(a.getInverse(this.matrixWorld))}}(),
lookAt:function(){var a=new THREE.Matrix4;return function(b){a.lookAt(b,this.position,this.up);this.quaternion.setFromRotationMatrix(a)}}(),add:function(a){if(1<arguments.length){for(var b=0;b<arguments.length;b++)this.add(arguments[b]);return this}if(a===this)return console.error("THREE.Object3D.add: object can't be added as a child of itself.",a),this;a instanceof THREE.Object3D?(null!==a.parent&&a.parent.remove(a),a.parent=this,a.dispatchEvent({type:"added"}),this.children.push(a)):console.error("THREE.Object3D.add: object not an instance of THREE.Object3D.",
a);return this},remove:function(a){if(1<arguments.length)for(var b=0;b<arguments.length;b++)this.remove(arguments[b]);b=this.children.indexOf(a);-1!==b&&(a.parent=null,a.dispatchEvent({type:"removed"}),this.children.splice(b,1))},getObjectById:function(a){return this.getObjectByProperty("id",a)},getObjectByName:function(a){return this.getObjectByProperty("name",a)},getObjectByProperty:function(a,b){if(this[a]===b)return this;for(var c=0,d=this.children.length;c<d;c++){var e=this.children[c].getObjectByProperty(a,
b);if(void 0!==e)return e}},getWorldPosition:function(a){a=a||new THREE.Vector3;this.updateMatrixWorld(!0);return a.setFromMatrixPosition(this.matrixWorld)},getWorldQuaternion:function(){var a=new THREE.Vector3,b=new THREE.Vector3;return function(c){c=c||new THREE.Quaternion;this.updateMatrixWorld(!0);this.matrixWorld.decompose(a,c,b);return c}}(),getWorldRotation:function(){var a=new THREE.Quaternion;return function(b){b=b||new THREE.Euler;this.getWorldQuaternion(a);return b.setFromQuaternion(a,
this.rotation.order,!1)}}(),getWorldScale:function(){var a=new THREE.Vector3,b=new THREE.Quaternion;return function(c){c=c||new THREE.Vector3;this.updateMatrixWorld(!0);this.matrixWorld.decompose(a,b,c);return c}}(),getWorldDirection:function(){var a=new THREE.Quaternion;return function(b){b=b||new THREE.Vector3;this.getWorldQuaternion(a);return b.set(0,0,1).applyQuaternion(a)}}(),raycast:function(){},traverse:function(a){a(this);for(var b=this.children,c=0,d=b.length;c<d;c++)b[c].traverse(a)},traverseVisible:function(a){if(!1!==
this.visible){a(this);for(var b=this.children,c=0,d=b.length;c<d;c++)b[c].traverseVisible(a)}},traverseAncestors:function(a){var b=this.parent;null!==b&&(a(b),b.traverseAncestors(a))},updateMatrix:function(){this.matrix.compose(this.position,this.quaternion,this.scale);this.matrixWorldNeedsUpdate=!0},updateMatrixWorld:function(a){!0===this.matrixAutoUpdate&&this.updateMatrix();if(!0===this.matrixWorldNeedsUpdate||!0===a)null===this.parent?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,
this.matrix),this.matrixWorldNeedsUpdate=!1,a=!0;for(var b=0,c=this.children.length;b<c;b++)this.children[b].updateMatrixWorld(a)},toJSON:function(a){function b(a){var b=[],c;for(c in a){var d=a[c];delete d.metadata;b.push(d)}return b}var c=void 0===a||""===a,d={};c&&(a={geometries:{},materials:{},textures:{},images:{}},d.metadata={version:4.4,type:"Object",generator:"Object3D.toJSON"});var e={};e.uuid=this.uuid;e.type=this.type;""!==this.name&&(e.name=this.name);"{}"!==JSON.stringify(this.userData)&&
(e.userData=this.userData);!0===this.castShadow&&(e.castShadow=!0);!0===this.receiveShadow&&(e.receiveShadow=!0);!1===this.visible&&(e.visible=!1);e.matrix=this.matrix.toArray();void 0!==this.geometry&&(void 0===a.geometries[this.geometry.uuid]&&(a.geometries[this.geometry.uuid]=this.geometry.toJSON(a)),e.geometry=this.geometry.uuid);void 0!==this.material&&(void 0===a.materials[this.material.uuid]&&(a.materials[this.material.uuid]=this.material.toJSON(a)),e.material=this.material.uuid);if(0<this.children.length){e.children=
[];for(var f=0;f<this.children.length;f++)e.children.push(this.children[f].toJSON(a).object)}if(c){var c=b(a.geometries),f=b(a.materials),g=b(a.textures);a=b(a.images);0<c.length&&(d.geometries=c);0<f.length&&(d.materials=f);0<g.length&&(d.textures=g);0<a.length&&(d.images=a)}d.object=e;return d},clone:function(a){return(new this.constructor).copy(this,a)},copy:function(a,b){void 0===b&&(b=!0);this.name=a.name;this.up.copy(a.up);this.position.copy(a.position);this.quaternion.copy(a.quaternion);this.scale.copy(a.scale);
this.matrix.copy(a.matrix);this.matrixWorld.copy(a.matrixWorld);this.matrixAutoUpdate=a.matrixAutoUpdate;this.matrixWorldNeedsUpdate=a.matrixWorldNeedsUpdate;this.visible=a.visible;this.castShadow=a.castShadow;this.receiveShadow=a.receiveShadow;this.frustumCulled=a.frustumCulled;this.renderOrder=a.renderOrder;this.userData=JSON.parse(JSON.stringify(a.userData));if(!0===b)for(var c=0;c<a.children.length;c++)this.add(a.children[c].clone());return this}});THREE.Object3DIdCount=0;
THREE.Face3=function(a,b,c,d,e,f){this.a=a;this.b=b;this.c=c;this.normal=d instanceof THREE.Vector3?d:new THREE.Vector3;this.vertexNormals=Array.isArray(d)?d:[];this.color=e instanceof THREE.Color?e:new THREE.Color;this.vertexColors=Array.isArray(e)?e:[];this.materialIndex=void 0!==f?f:0};
THREE.Face3.prototype={constructor:THREE.Face3,clone:function(){return(new this.constructor).copy(this)},copy:function(a){this.a=a.a;this.b=a.b;this.c=a.c;this.normal.copy(a.normal);this.color.copy(a.color);this.materialIndex=a.materialIndex;for(var b=0,c=a.vertexNormals.length;b<c;b++)this.vertexNormals[b]=a.vertexNormals[b].clone();b=0;for(c=a.vertexColors.length;b<c;b++)this.vertexColors[b]=a.vertexColors[b].clone();return this}};
THREE.BufferAttribute=function(a,b,c){this.uuid=THREE.Math.generateUUID();this.array=a;this.itemSize=b;this.dynamic=!1;this.updateRange={offset:0,count:-1};this.version=0;this.normalized=!0===c};
THREE.BufferAttribute.prototype={constructor:THREE.BufferAttribute,get count(){return this.array.length/this.itemSize},set needsUpdate(a){!0===a&&this.version++},setDynamic:function(a){this.dynamic=a;return this},copy:function(a){this.array=new a.array.constructor(a.array);this.itemSize=a.itemSize;this.dynamic=a.dynamic;return this},copyAt:function(a,b,c){a*=this.itemSize;c*=b.itemSize;for(var d=0,e=this.itemSize;d<e;d++)this.array[a+d]=b.array[c+d];return this},copyArray:function(a){this.array.set(a);
return this},copyColorsArray:function(a){for(var b=this.array,c=0,d=0,e=a.length;d<e;d++){var f=a[d];void 0===f&&(console.warn("THREE.BufferAttribute.copyColorsArray(): color is undefined",d),f=new THREE.Color);b[c++]=f.r;b[c++]=f.g;b[c++]=f.b}return this},copyIndicesArray:function(a){for(var b=this.array,c=0,d=0,e=a.length;d<e;d++){var f=a[d];b[c++]=f.a;b[c++]=f.b;b[c++]=f.c}return this},copyVector2sArray:function(a){for(var b=this.array,c=0,d=0,e=a.length;d<e;d++){var f=a[d];void 0===f&&(console.warn("THREE.BufferAttribute.copyVector2sArray(): vector is undefined",
d),f=new THREE.Vector2);b[c++]=f.x;b[c++]=f.y}return this},copyVector3sArray:function(a){for(var b=this.array,c=0,d=0,e=a.length;d<e;d++){var f=a[d];void 0===f&&(console.warn("THREE.BufferAttribute.copyVector3sArray(): vector is undefined",d),f=new THREE.Vector3);b[c++]=f.x;b[c++]=f.y;b[c++]=f.z}return this},copyVector4sArray:function(a){for(var b=this.array,c=0,d=0,e=a.length;d<e;d++){var f=a[d];void 0===f&&(console.warn("THREE.BufferAttribute.copyVector4sArray(): vector is undefined",d),f=new THREE.Vector4);
b[c++]=f.x;b[c++]=f.y;b[c++]=f.z;b[c++]=f.w}return this},set:function(a,b){void 0===b&&(b=0);this.array.set(a,b);return this},getX:function(a){return this.array[a*this.itemSize]},setX:function(a,b){this.array[a*this.itemSize]=b;return this},getY:function(a){return this.array[a*this.itemSize+1]},setY:function(a,b){this.array[a*this.itemSize+1]=b;return this},getZ:function(a){return this.array[a*this.itemSize+2]},setZ:function(a,b){this.array[a*this.itemSize+2]=b;return this},getW:function(a){return this.array[a*
this.itemSize+3]},setW:function(a,b){this.array[a*this.itemSize+3]=b;return this},setXY:function(a,b,c){a*=this.itemSize;this.array[a+0]=b;this.array[a+1]=c;return this},setXYZ:function(a,b,c,d){a*=this.itemSize;this.array[a+0]=b;this.array[a+1]=c;this.array[a+2]=d;return this},setXYZW:function(a,b,c,d,e){a*=this.itemSize;this.array[a+0]=b;this.array[a+1]=c;this.array[a+2]=d;this.array[a+3]=e;return this},clone:function(){return(new this.constructor).copy(this)}};
THREE.Int8Attribute=function(a,b){return new THREE.BufferAttribute(new Int8Array(a),b)};THREE.Uint8Attribute=function(a,b){return new THREE.BufferAttribute(new Uint8Array(a),b)};THREE.Uint8ClampedAttribute=function(a,b){return new THREE.BufferAttribute(new Uint8ClampedArray(a),b)};THREE.Int16Attribute=function(a,b){return new THREE.BufferAttribute(new Int16Array(a),b)};THREE.Uint16Attribute=function(a,b){return new THREE.BufferAttribute(new Uint16Array(a),b)};
THREE.Int32Attribute=function(a,b){return new THREE.BufferAttribute(new Int32Array(a),b)};THREE.Uint32Attribute=function(a,b){return new THREE.BufferAttribute(new Uint32Array(a),b)};THREE.Float32Attribute=function(a,b){return new THREE.BufferAttribute(new Float32Array(a),b)};THREE.Float64Attribute=function(a,b){return new THREE.BufferAttribute(new Float64Array(a),b)};
THREE.DynamicBufferAttribute=function(a,b){console.warn("THREE.DynamicBufferAttribute has been removed. Use new THREE.BufferAttribute().setDynamic( true ) instead.");return(new THREE.BufferAttribute(a,b)).setDynamic(!0)};THREE.InstancedBufferAttribute=function(a,b,c){THREE.BufferAttribute.call(this,a,b);this.meshPerAttribute=c||1};THREE.InstancedBufferAttribute.prototype=Object.create(THREE.BufferAttribute.prototype);THREE.InstancedBufferAttribute.prototype.constructor=THREE.InstancedBufferAttribute;
THREE.InstancedBufferAttribute.prototype.copy=function(a){THREE.BufferAttribute.prototype.copy.call(this,a);this.meshPerAttribute=a.meshPerAttribute;return this};THREE.InterleavedBuffer=function(a,b){this.uuid=THREE.Math.generateUUID();this.array=a;this.stride=b;this.dynamic=!1;this.updateRange={offset:0,count:-1};this.version=0};
THREE.InterleavedBuffer.prototype={constructor:THREE.InterleavedBuffer,get length(){return this.array.length},get count(){return this.array.length/this.stride},set needsUpdate(a){!0===a&&this.version++},setDynamic:function(a){this.dynamic=a;return this},copy:function(a){this.array=new a.array.constructor(a.array);this.stride=a.stride;this.dynamic=a.dynamic;return this},copyAt:function(a,b,c){a*=this.stride;c*=b.stride;for(var d=0,e=this.stride;d<e;d++)this.array[a+d]=b.array[c+d];return this},set:function(a,
b){void 0===b&&(b=0);this.array.set(a,b);return this},clone:function(){return(new this.constructor).copy(this)}};THREE.InstancedInterleavedBuffer=function(a,b,c){THREE.InterleavedBuffer.call(this,a,b);this.meshPerAttribute=c||1};THREE.InstancedInterleavedBuffer.prototype=Object.create(THREE.InterleavedBuffer.prototype);THREE.InstancedInterleavedBuffer.prototype.constructor=THREE.InstancedInterleavedBuffer;
THREE.InstancedInterleavedBuffer.prototype.copy=function(a){THREE.InterleavedBuffer.prototype.copy.call(this,a);this.meshPerAttribute=a.meshPerAttribute;return this};THREE.InterleavedBufferAttribute=function(a,b,c,d){this.uuid=THREE.Math.generateUUID();this.data=a;this.itemSize=b;this.offset=c;this.normalized=!0===d};
THREE.InterleavedBufferAttribute.prototype={constructor:THREE.InterleavedBufferAttribute,get length(){console.warn("THREE.BufferAttribute: .length has been deprecated. Please use .count.");return this.array.length},get count(){return this.data.count},get array(){return this.data.array},setX:function(a,b){this.data.array[a*this.data.stride+this.offset]=b;return this},setY:function(a,b){this.data.array[a*this.data.stride+this.offset+1]=b;return this},setZ:function(a,b){this.data.array[a*this.data.stride+
this.offset+2]=b;return this},setW:function(a,b){this.data.array[a*this.data.stride+this.offset+3]=b;return this},getX:function(a){return this.data.array[a*this.data.stride+this.offset]},getY:function(a){return this.data.array[a*this.data.stride+this.offset+1]},getZ:function(a){return this.data.array[a*this.data.stride+this.offset+2]},getW:function(a){return this.data.array[a*this.data.stride+this.offset+3]},setXY:function(a,b,c){a=a*this.data.stride+this.offset;this.data.array[a+0]=b;this.data.array[a+
1]=c;return this},setXYZ:function(a,b,c,d){a=a*this.data.stride+this.offset;this.data.array[a+0]=b;this.data.array[a+1]=c;this.data.array[a+2]=d;return this},setXYZW:function(a,b,c,d,e){a=a*this.data.stride+this.offset;this.data.array[a+0]=b;this.data.array[a+1]=c;this.data.array[a+2]=d;this.data.array[a+3]=e;return this}};
THREE.Geometry=function(){Object.defineProperty(this,"id",{value:THREE.GeometryIdCount++});this.uuid=THREE.Math.generateUUID();this.name="";this.type="Geometry";this.vertices=[];this.colors=[];this.faces=[];this.faceVertexUvs=[[]];this.morphTargets=[];this.morphNormals=[];this.skinWeights=[];this.skinIndices=[];this.lineDistances=[];this.boundingSphere=this.boundingBox=null;this.groupsNeedUpdate=this.lineDistancesNeedUpdate=this.colorsNeedUpdate=this.normalsNeedUpdate=this.uvsNeedUpdate=this.verticesNeedUpdate=
this.elementsNeedUpdate=!1};
Object.assign(THREE.Geometry.prototype,THREE.EventDispatcher.prototype,{applyMatrix:function(a){for(var b=(new THREE.Matrix3).getNormalMatrix(a),c=0,d=this.vertices.length;c<d;c++)this.vertices[c].applyMatrix4(a);c=0;for(d=this.faces.length;c<d;c++){a=this.faces[c];a.normal.applyMatrix3(b).normalize();for(var e=0,f=a.vertexNormals.length;e<f;e++)a.vertexNormals[e].applyMatrix3(b).normalize()}null!==this.boundingBox&&this.computeBoundingBox();null!==this.boundingSphere&&this.computeBoundingSphere();
this.normalsNeedUpdate=this.verticesNeedUpdate=!0;return this},rotateX:function(){var a;return function(b){void 0===a&&(a=new THREE.Matrix4);a.makeRotationX(b);this.applyMatrix(a);return this}}(),rotateY:function(){var a;return function(b){void 0===a&&(a=new THREE.Matrix4);a.makeRotationY(b);this.applyMatrix(a);return this}}(),rotateZ:function(){var a;return function(b){void 0===a&&(a=new THREE.Matrix4);a.makeRotationZ(b);this.applyMatrix(a);return this}}(),translate:function(){var a;return function(b,
c,d){void 0===a&&(a=new THREE.Matrix4);a.makeTranslation(b,c,d);this.applyMatrix(a);return this}}(),scale:function(){var a;return function(b,c,d){void 0===a&&(a=new THREE.Matrix4);a.makeScale(b,c,d);this.applyMatrix(a);return this}}(),lookAt:function(){var a;return function(b){void 0===a&&(a=new THREE.Object3D);a.lookAt(b);a.updateMatrix();this.applyMatrix(a.matrix)}}(),fromBufferGeometry:function(a){function b(a,b,d,e){var f=void 0!==g?[m[a].clone(),m[b].clone(),m[d].clone()]:[],q=void 0!==h?[c.colors[a].clone(),
c.colors[b].clone(),c.colors[d].clone()]:[];e=new THREE.Face3(a,b,d,f,q,e);c.faces.push(e);void 0!==k&&c.faceVertexUvs[0].push([p[a].clone(),p[b].clone(),p[d].clone()]);void 0!==l&&c.faceVertexUvs[1].push([n[a].clone(),n[b].clone(),n[d].clone()])}var c=this,d=null!==a.index?a.index.array:void 0,e=a.attributes,f=e.position.array,g=void 0!==e.normal?e.normal.array:void 0,h=void 0!==e.color?e.color.array:void 0,k=void 0!==e.uv?e.uv.array:void 0,l=void 0!==e.uv2?e.uv2.array:void 0;void 0!==l&&(this.faceVertexUvs[1]=
[]);for(var m=[],p=[],n=[],q=e=0;e<f.length;e+=3,q+=2)c.vertices.push(new THREE.Vector3(f[e],f[e+1],f[e+2])),void 0!==g&&m.push(new THREE.Vector3(g[e],g[e+1],g[e+2])),void 0!==h&&c.colors.push(new THREE.Color(h[e],h[e+1],h[e+2])),void 0!==k&&p.push(new THREE.Vector2(k[q],k[q+1])),void 0!==l&&n.push(new THREE.Vector2(l[q],l[q+1]));if(void 0!==d)if(f=a.groups,0<f.length)for(e=0;e<f.length;e++)for(var r=f[e],s=r.start,v=r.count,q=s,s=s+v;q<s;q+=3)b(d[q],d[q+1],d[q+2],r.materialIndex);else for(e=0;e<
d.length;e+=3)b(d[e],d[e+1],d[e+2]);else for(e=0;e<f.length/3;e+=3)b(e,e+1,e+2);this.computeFaceNormals();null!==a.boundingBox&&(this.boundingBox=a.boundingBox.clone());null!==a.boundingSphere&&(this.boundingSphere=a.boundingSphere.clone());return this},center:function(){this.computeBoundingBox();var a=this.boundingBox.center().negate();this.translate(a.x,a.y,a.z);return a},normalize:function(){this.computeBoundingSphere();var a=this.boundingSphere.center,b=this.boundingSphere.radius,b=0===b?1:1/
b,c=new THREE.Matrix4;c.set(b,0,0,-b*a.x,0,b,0,-b*a.y,0,0,b,-b*a.z,0,0,0,1);this.applyMatrix(c);return this},computeFaceNormals:function(){for(var a=new THREE.Vector3,b=new THREE.Vector3,c=0,d=this.faces.length;c<d;c++){var e=this.faces[c],f=this.vertices[e.a],g=this.vertices[e.b];a.subVectors(this.vertices[e.c],g);b.subVectors(f,g);a.cross(b);a.normalize();e.normal.copy(a)}},computeVertexNormals:function(a){void 0===a&&(a=!0);var b,c,d;d=Array(this.vertices.length);b=0;for(c=this.vertices.length;b<
c;b++)d[b]=new THREE.Vector3;if(a){var e,f,g,h=new THREE.Vector3,k=new THREE.Vector3;a=0;for(b=this.faces.length;a<b;a++)c=this.faces[a],e=this.vertices[c.a],f=this.vertices[c.b],g=this.vertices[c.c],h.subVectors(g,f),k.subVectors(e,f),h.cross(k),d[c.a].add(h),d[c.b].add(h),d[c.c].add(h)}else for(a=0,b=this.faces.length;a<b;a++)c=this.faces[a],d[c.a].add(c.normal),d[c.b].add(c.normal),d[c.c].add(c.normal);b=0;for(c=this.vertices.length;b<c;b++)d[b].normalize();a=0;for(b=this.faces.length;a<b;a++)c=
this.faces[a],e=c.vertexNormals,3===e.length?(e[0].copy(d[c.a]),e[1].copy(d[c.b]),e[2].copy(d[c.c])):(e[0]=d[c.a].clone(),e[1]=d[c.b].clone(),e[2]=d[c.c].clone());0<this.faces.length&&(this.normalsNeedUpdate=!0)},computeMorphNormals:function(){var a,b,c,d,e;c=0;for(d=this.faces.length;c<d;c++)for(e=this.faces[c],e.__originalFaceNormal?e.__originalFaceNormal.copy(e.normal):e.__originalFaceNormal=e.normal.clone(),e.__originalVertexNormals||(e.__originalVertexNormals=[]),a=0,b=e.vertexNormals.length;a<
b;a++)e.__originalVertexNormals[a]?e.__originalVertexNormals[a].copy(e.vertexNormals[a]):e.__originalVertexNormals[a]=e.vertexNormals[a].clone();var f=new THREE.Geometry;f.faces=this.faces;a=0;for(b=this.morphTargets.length;a<b;a++){if(!this.morphNormals[a]){this.morphNormals[a]={};this.morphNormals[a].faceNormals=[];this.morphNormals[a].vertexNormals=[];e=this.morphNormals[a].faceNormals;var g=this.morphNormals[a].vertexNormals,h,k;c=0;for(d=this.faces.length;c<d;c++)h=new THREE.Vector3,k={a:new THREE.Vector3,
b:new THREE.Vector3,c:new THREE.Vector3},e.push(h),g.push(k)}g=this.morphNormals[a];f.vertices=this.morphTargets[a].vertices;f.computeFaceNormals();f.computeVertexNormals();c=0;for(d=this.faces.length;c<d;c++)e=this.faces[c],h=g.faceNormals[c],k=g.vertexNormals[c],h.copy(e.normal),k.a.copy(e.vertexNormals[0]),k.b.copy(e.vertexNormals[1]),k.c.copy(e.vertexNormals[2])}c=0;for(d=this.faces.length;c<d;c++)e=this.faces[c],e.normal=e.__originalFaceNormal,e.vertexNormals=e.__originalVertexNormals},computeTangents:function(){console.warn("THREE.Geometry: .computeTangents() has been removed.")},
computeLineDistances:function(){for(var a=0,b=this.vertices,c=0,d=b.length;c<d;c++)0<c&&(a+=b[c].distanceTo(b[c-1])),this.lineDistances[c]=a},computeBoundingBox:function(){null===this.boundingBox&&(this.boundingBox=new THREE.Box3);this.boundingBox.setFromPoints(this.vertices)},computeBoundingSphere:function(){null===this.boundingSphere&&(this.boundingSphere=new THREE.Sphere);this.boundingSphere.setFromPoints(this.vertices)},merge:function(a,b,c){if(!1===a instanceof THREE.Geometry)console.error("THREE.Geometry.merge(): geometry not an instance of THREE.Geometry.",
a);else{var d,e=this.vertices.length,f=this.vertices,g=a.vertices,h=this.faces,k=a.faces,l=this.faceVertexUvs[0];a=a.faceVertexUvs[0];void 0===c&&(c=0);void 0!==b&&(d=(new THREE.Matrix3).getNormalMatrix(b));for(var m=0,p=g.length;m<p;m++){var n=g[m].clone();void 0!==b&&n.applyMatrix4(b);f.push(n)}m=0;for(p=k.length;m<p;m++){var g=k[m],q,r=g.vertexNormals,s=g.vertexColors,n=new THREE.Face3(g.a+e,g.b+e,g.c+e);n.normal.copy(g.normal);void 0!==d&&n.normal.applyMatrix3(d).normalize();b=0;for(f=r.length;b<
f;b++)q=r[b].clone(),void 0!==d&&q.applyMatrix3(d).normalize(),n.vertexNormals.push(q);n.color.copy(g.color);b=0;for(f=s.length;b<f;b++)q=s[b],n.vertexColors.push(q.clone());n.materialIndex=g.materialIndex+c;h.push(n)}m=0;for(p=a.length;m<p;m++)if(c=a[m],d=[],void 0!==c){b=0;for(f=c.length;b<f;b++)d.push(c[b].clone());l.push(d)}}},mergeMesh:function(a){!1===a instanceof THREE.Mesh?console.error("THREE.Geometry.mergeMesh(): mesh not an instance of THREE.Mesh.",a):(a.matrixAutoUpdate&&a.updateMatrix(),
this.merge(a.geometry,a.matrix))},mergeVertices:function(){var a={},b=[],c=[],d,e=Math.pow(10,4),f,g;f=0;for(g=this.vertices.length;f<g;f++)d=this.vertices[f],d=Math.round(d.x*e)+"_"+Math.round(d.y*e)+"_"+Math.round(d.z*e),void 0===a[d]?(a[d]=f,b.push(this.vertices[f]),c[f]=b.length-1):c[f]=c[a[d]];a=[];f=0;for(g=this.faces.length;f<g;f++)for(e=this.faces[f],e.a=c[e.a],e.b=c[e.b],e.c=c[e.c],e=[e.a,e.b,e.c],d=0;3>d;d++)if(e[d]===e[(d+1)%3]){a.push(f);break}for(f=a.length-1;0<=f;f--)for(e=a[f],this.faces.splice(e,
1),c=0,g=this.faceVertexUvs.length;c<g;c++)this.faceVertexUvs[c].splice(e,1);f=this.vertices.length-b.length;this.vertices=b;return f},sortFacesByMaterialIndex:function(){for(var a=this.faces,b=a.length,c=0;c<b;c++)a[c]._id=c;a.sort(function(a,b){return a.materialIndex-b.materialIndex});var d=this.faceVertexUvs[0],e=this.faceVertexUvs[1],f,g;d&&d.length===b&&(f=[]);e&&e.length===b&&(g=[]);for(c=0;c<b;c++){var h=a[c]._id;f&&f.push(d[h]);g&&g.push(e[h])}f&&(this.faceVertexUvs[0]=f);g&&(this.faceVertexUvs[1]=
g)},toJSON:function(){function a(a,b,c){return c?a|1<<b:a&~(1<<b)}function b(a){var b=a.x.toString()+a.y.toString()+a.z.toString();if(void 0!==l[b])return l[b];l[b]=k.length/3;k.push(a.x,a.y,a.z);return l[b]}function c(a){var b=a.r.toString()+a.g.toString()+a.b.toString();if(void 0!==p[b])return p[b];p[b]=m.length;m.push(a.getHex());return p[b]}function d(a){var b=a.x.toString()+a.y.toString();if(void 0!==q[b])return q[b];q[b]=n.length/2;n.push(a.x,a.y);return q[b]}var e={metadata:{version:4.4,type:"Geometry",
generator:"Geometry.toJSON"}};e.uuid=this.uuid;e.type=this.type;""!==this.name&&(e.name=this.name);if(void 0!==this.parameters){var f=this.parameters,g;for(g in f)void 0!==f[g]&&(e[g]=f[g]);return e}f=[];for(g=0;g<this.vertices.length;g++){var h=this.vertices[g];f.push(h.x,h.y,h.z)}var h=[],k=[],l={},m=[],p={},n=[],q={};for(g=0;g<this.faces.length;g++){var r=this.faces[g],s=void 0!==this.faceVertexUvs[0][g],v=0<r.normal.length(),t=0<r.vertexNormals.length,u=1!==r.color.r||1!==r.color.g||1!==r.color.b,
D=0<r.vertexColors.length,w=0,w=a(w,0,0),w=a(w,1,!0),w=a(w,2,!1),w=a(w,3,s),w=a(w,4,v),w=a(w,5,t),w=a(w,6,u),w=a(w,7,D);h.push(w);h.push(r.a,r.b,r.c);h.push(r.materialIndex);s&&(s=this.faceVertexUvs[0][g],h.push(d(s[0]),d(s[1]),d(s[2])));v&&h.push(b(r.normal));t&&(v=r.vertexNormals,h.push(b(v[0]),b(v[1]),b(v[2])));u&&h.push(c(r.color));D&&(r=r.vertexColors,h.push(c(r[0]),c(r[1]),c(r[2])))}e.data={};e.data.vertices=f;e.data.normals=k;0<m.length&&(e.data.colors=m);0<n.length&&(e.data.uvs=[n]);e.data.faces=
h;return e},clone:function(){return(new THREE.Geometry).copy(this)},copy:function(a){this.vertices=[];this.faces=[];this.faceVertexUvs=[[]];for(var b=a.vertices,c=0,d=b.length;c<d;c++)this.vertices.push(b[c].clone());b=a.faces;c=0;for(d=b.length;c<d;c++)this.faces.push(b[c].clone());c=0;for(d=a.faceVertexUvs.length;c<d;c++){b=a.faceVertexUvs[c];void 0===this.faceVertexUvs[c]&&(this.faceVertexUvs[c]=[]);for(var e=0,f=b.length;e<f;e++){for(var g=b[e],h=[],k=0,l=g.length;k<l;k++)h.push(g[k].clone());
this.faceVertexUvs[c].push(h)}}return this},dispose:function(){this.dispatchEvent({type:"dispose"})}});THREE.GeometryIdCount=0;
THREE.DirectGeometry=function(){Object.defineProperty(this,"id",{value:THREE.GeometryIdCount++});this.uuid=THREE.Math.generateUUID();this.name="";this.type="DirectGeometry";this.indices=[];this.vertices=[];this.normals=[];this.colors=[];this.uvs=[];this.uvs2=[];this.groups=[];this.morphTargets={};this.skinWeights=[];this.skinIndices=[];this.boundingSphere=this.boundingBox=null;this.groupsNeedUpdate=this.uvsNeedUpdate=this.colorsNeedUpdate=this.normalsNeedUpdate=this.verticesNeedUpdate=!1};
Object.assign(THREE.DirectGeometry.prototype,THREE.EventDispatcher.prototype,{computeBoundingBox:THREE.Geometry.prototype.computeBoundingBox,computeBoundingSphere:THREE.Geometry.prototype.computeBoundingSphere,computeFaceNormals:function(){console.warn("THREE.DirectGeometry: computeFaceNormals() is not a method of this type of geometry.")},computeVertexNormals:function(){console.warn("THREE.DirectGeometry: computeVertexNormals() is not a method of this type of geometry.")},computeGroups:function(a){var b,
c=[],d;a=a.faces;for(var e=0;e<a.length;e++){var f=a[e];f.materialIndex!==d&&(d=f.materialIndex,void 0!==b&&(b.count=3*e-b.start,c.push(b)),b={start:3*e,materialIndex:d})}void 0!==b&&(b.count=3*e-b.start,c.push(b));this.groups=c},fromGeometry:function(a){var b=a.faces,c=a.vertices,d=a.faceVertexUvs,e=d[0]&&0<d[0].length,f=d[1]&&0<d[1].length,g=a.morphTargets,h=g.length,k;if(0<h){k=[];for(var l=0;l<h;l++)k[l]=[];this.morphTargets.position=k}var m=a.morphNormals,p=m.length,n;if(0<p){n=[];for(l=0;l<
p;l++)n[l]=[];this.morphTargets.normal=n}for(var q=a.skinIndices,r=a.skinWeights,s=q.length===c.length,v=r.length===c.length,l=0;l<b.length;l++){var t=b[l];this.vertices.push(c[t.a],c[t.b],c[t.c]);var u=t.vertexNormals;3===u.length?this.normals.push(u[0],u[1],u[2]):(u=t.normal,this.normals.push(u,u,u));u=t.vertexColors;3===u.length?this.colors.push(u[0],u[1],u[2]):(u=t.color,this.colors.push(u,u,u));!0===e&&(u=d[0][l],void 0!==u?this.uvs.push(u[0],u[1],u[2]):(console.warn("THREE.DirectGeometry.fromGeometry(): Undefined vertexUv ",
l),this.uvs.push(new THREE.Vector2,new THREE.Vector2,new THREE.Vector2)));!0===f&&(u=d[1][l],void 0!==u?this.uvs2.push(u[0],u[1],u[2]):(console.warn("THREE.DirectGeometry.fromGeometry(): Undefined vertexUv2 ",l),this.uvs2.push(new THREE.Vector2,new THREE.Vector2,new THREE.Vector2)));for(u=0;u<h;u++){var D=g[u].vertices;k[u].push(D[t.a],D[t.b],D[t.c])}for(u=0;u<p;u++)D=m[u].vertexNormals[l],n[u].push(D.a,D.b,D.c);s&&this.skinIndices.push(q[t.a],q[t.b],q[t.c]);v&&this.skinWeights.push(r[t.a],r[t.b],
r[t.c])}this.computeGroups(a);this.verticesNeedUpdate=a.verticesNeedUpdate;this.normalsNeedUpdate=a.normalsNeedUpdate;this.colorsNeedUpdate=a.colorsNeedUpdate;this.uvsNeedUpdate=a.uvsNeedUpdate;this.groupsNeedUpdate=a.groupsNeedUpdate;return this},dispose:function(){this.dispatchEvent({type:"dispose"})}});
THREE.BufferGeometry=function(){Object.defineProperty(this,"id",{value:THREE.GeometryIdCount++});this.uuid=THREE.Math.generateUUID();this.name="";this.type="BufferGeometry";this.index=null;this.attributes={};this.morphAttributes={};this.groups=[];this.boundingSphere=this.boundingBox=null;this.drawRange={start:0,count:Infinity}};
Object.assign(THREE.BufferGeometry.prototype,THREE.EventDispatcher.prototype,{getIndex:function(){return this.index},setIndex:function(a){this.index=a},addAttribute:function(a,b,c){if(!1===b instanceof THREE.BufferAttribute&&!1===b instanceof THREE.InterleavedBufferAttribute)console.warn("THREE.BufferGeometry: .addAttribute() now expects ( name, attribute )."),this.addAttribute(a,new THREE.BufferAttribute(b,c));else if("index"===a)console.warn("THREE.BufferGeometry.addAttribute: Use .setIndex() for index attribute."),
this.setIndex(b);else return this.attributes[a]=b,this},getAttribute:function(a){return this.attributes[a]},removeAttribute:function(a){delete this.attributes[a];return this},addGroup:function(a,b,c){this.groups.push({start:a,count:b,materialIndex:void 0!==c?c:0})},clearGroups:function(){this.groups=[]},setDrawRange:function(a,b){this.drawRange.start=a;this.drawRange.count=b},applyMatrix:function(a){var b=this.attributes.position;void 0!==b&&(a.applyToVector3Array(b.array),b.needsUpdate=!0);b=this.attributes.normal;
void 0!==b&&((new THREE.Matrix3).getNormalMatrix(a).applyToVector3Array(b.array),b.needsUpdate=!0);null!==this.boundingBox&&this.computeBoundingBox();null!==this.boundingSphere&&this.computeBoundingSphere();return this},rotateX:function(){var a;return function(b){void 0===a&&(a=new THREE.Matrix4);a.makeRotationX(b);this.applyMatrix(a);return this}}(),rotateY:function(){var a;return function(b){void 0===a&&(a=new THREE.Matrix4);a.makeRotationY(b);this.applyMatrix(a);return this}}(),rotateZ:function(){var a;
return function(b){void 0===a&&(a=new THREE.Matrix4);a.makeRotationZ(b);this.applyMatrix(a);return this}}(),translate:function(){var a;return function(b,c,d){void 0===a&&(a=new THREE.Matrix4);a.makeTranslation(b,c,d);this.applyMatrix(a);return this}}(),scale:function(){var a;return function(b,c,d){void 0===a&&(a=new THREE.Matrix4);a.makeScale(b,c,d);this.applyMatrix(a);return this}}(),lookAt:function(){var a;return function(b){void 0===a&&(a=new THREE.Object3D);a.lookAt(b);a.updateMatrix();this.applyMatrix(a.matrix)}}(),
center:function(){this.computeBoundingBox();var a=this.boundingBox.center().negate();this.translate(a.x,a.y,a.z);return a},setFromObject:function(a){var b=a.geometry;if(a instanceof THREE.Points||a instanceof THREE.Line){a=new THREE.Float32Attribute(3*b.vertices.length,3);var c=new THREE.Float32Attribute(3*b.colors.length,3);this.addAttribute("position",a.copyVector3sArray(b.vertices));this.addAttribute("color",c.copyColorsArray(b.colors));b.lineDistances&&b.lineDistances.length===b.vertices.length&&
(a=new THREE.Float32Attribute(b.lineDistances.length,1),this.addAttribute("lineDistance",a.copyArray(b.lineDistances)));null!==b.boundingSphere&&(this.boundingSphere=b.boundingSphere.clone());null!==b.boundingBox&&(this.boundingBox=b.boundingBox.clone())}else a instanceof THREE.Mesh&&b instanceof THREE.Geometry&&this.fromGeometry(b);return this},updateFromObject:function(a){var b=a.geometry;if(a instanceof THREE.Mesh){var c=b.__directGeometry;if(void 0===c||!0===b.elementsNeedUpdate)return this.fromGeometry(b);
c.verticesNeedUpdate=b.verticesNeedUpdate||b.elementsNeedUpdate;c.normalsNeedUpdate=b.normalsNeedUpdate||b.elementsNeedUpdate;c.colorsNeedUpdate=b.colorsNeedUpdate||b.elementsNeedUpdate;c.uvsNeedUpdate=b.uvsNeedUpdate||b.elementsNeedUpdate;c.groupsNeedUpdate=b.groupsNeedUpdate||b.elementsNeedUpdate;b.elementsNeedUpdate=!1;b.verticesNeedUpdate=!1;b.normalsNeedUpdate=!1;b.colorsNeedUpdate=!1;b.uvsNeedUpdate=!1;b.groupsNeedUpdate=!1;b=c}!0===b.verticesNeedUpdate&&(c=this.attributes.position,void 0!==
c&&(c.copyVector3sArray(b.vertices),c.needsUpdate=!0),b.verticesNeedUpdate=!1);!0===b.normalsNeedUpdate&&(c=this.attributes.normal,void 0!==c&&(c.copyVector3sArray(b.normals),c.needsUpdate=!0),b.normalsNeedUpdate=!1);!0===b.colorsNeedUpdate&&(c=this.attributes.color,void 0!==c&&(c.copyColorsArray(b.colors),c.needsUpdate=!0),b.colorsNeedUpdate=!1);b.uvsNeedUpdate&&(c=this.attributes.uv,void 0!==c&&(c.copyVector2sArray(b.uvs),c.needsUpdate=!0),b.uvsNeedUpdate=!1);b.lineDistancesNeedUpdate&&(c=this.attributes.lineDistance,
void 0!==c&&(c.copyArray(b.lineDistances),c.needsUpdate=!0),b.lineDistancesNeedUpdate=!1);b.groupsNeedUpdate&&(b.computeGroups(a.geometry),this.groups=b.groups,b.groupsNeedUpdate=!1);return this},fromGeometry:function(a){a.__directGeometry=(new THREE.DirectGeometry).fromGeometry(a);return this.fromDirectGeometry(a.__directGeometry)},fromDirectGeometry:function(a){var b=new Float32Array(3*a.vertices.length);this.addAttribute("position",(new THREE.BufferAttribute(b,3)).copyVector3sArray(a.vertices));
0<a.normals.length&&(b=new Float32Array(3*a.normals.length),this.addAttribute("normal",(new THREE.BufferAttribute(b,3)).copyVector3sArray(a.normals)));0<a.colors.length&&(b=new Float32Array(3*a.colors.length),this.addAttribute("color",(new THREE.BufferAttribute(b,3)).copyColorsArray(a.colors)));0<a.uvs.length&&(b=new Float32Array(2*a.uvs.length),this.addAttribute("uv",(new THREE.BufferAttribute(b,2)).copyVector2sArray(a.uvs)));0<a.uvs2.length&&(b=new Float32Array(2*a.uvs2.length),this.addAttribute("uv2",
(new THREE.BufferAttribute(b,2)).copyVector2sArray(a.uvs2)));0<a.indices.length&&(b=new (65535<a.vertices.length?Uint32Array:Uint16Array)(3*a.indices.length),this.setIndex((new THREE.BufferAttribute(b,1)).copyIndicesArray(a.indices)));this.groups=a.groups;for(var c in a.morphTargets){for(var b=[],d=a.morphTargets[c],e=0,f=d.length;e<f;e++){var g=d[e],h=new THREE.Float32Attribute(3*g.length,3);b.push(h.copyVector3sArray(g))}this.morphAttributes[c]=b}0<a.skinIndices.length&&(c=new THREE.Float32Attribute(4*
a.skinIndices.length,4),this.addAttribute("skinIndex",c.copyVector4sArray(a.skinIndices)));0<a.skinWeights.length&&(c=new THREE.Float32Attribute(4*a.skinWeights.length,4),this.addAttribute("skinWeight",c.copyVector4sArray(a.skinWeights)));null!==a.boundingSphere&&(this.boundingSphere=a.boundingSphere.clone());null!==a.boundingBox&&(this.boundingBox=a.boundingBox.clone());return this},computeBoundingBox:function(){null===this.boundingBox&&(this.boundingBox=new THREE.Box3);var a=this.attributes.position.array;
void 0!==a?this.boundingBox.setFromArray(a):this.boundingBox.makeEmpty();(isNaN(this.boundingBox.min.x)||isNaN(this.boundingBox.min.y)||isNaN(this.boundingBox.min.z))&&console.error('THREE.BufferGeometry.computeBoundingBox: Computed min/max have NaN values. The "position" attribute is likely to have NaN values.',this)},computeBoundingSphere:function(){var a=new THREE.Box3,b=new THREE.Vector3;return function(){null===this.boundingSphere&&(this.boundingSphere=new THREE.Sphere);var c=this.attributes.position;
if(c){var c=c.array,d=this.boundingSphere.center;a.setFromArray(c);a.center(d);for(var e=0,f=0,g=c.length;f<g;f+=3)b.fromArray(c,f),e=Math.max(e,d.distanceToSquared(b));this.boundingSphere.radius=Math.sqrt(e);isNaN(this.boundingSphere.radius)&&console.error('THREE.BufferGeometry.computeBoundingSphere(): Computed radius is NaN. The "position" attribute is likely to have NaN values.',this)}}}(),computeFaceNormals:function(){},computeVertexNormals:function(){var a=this.index,b=this.attributes,c=this.groups;
if(b.position){var d=b.position.array;if(void 0===b.normal)this.addAttribute("normal",new THREE.BufferAttribute(new Float32Array(d.length),3));else for(var e=b.normal.array,f=0,g=e.length;f<g;f++)e[f]=0;var e=b.normal.array,h,k,l,m=new THREE.Vector3,p=new THREE.Vector3,n=new THREE.Vector3,q=new THREE.Vector3,r=new THREE.Vector3;if(a){a=a.array;0===c.length&&this.addGroup(0,a.length);for(var s=0,v=c.length;s<v;++s)for(f=c[s],g=f.start,h=f.count,f=g,g+=h;f<g;f+=3)h=3*a[f+0],k=3*a[f+1],l=3*a[f+2],m.fromArray(d,
h),p.fromArray(d,k),n.fromArray(d,l),q.subVectors(n,p),r.subVectors(m,p),q.cross(r),e[h]+=q.x,e[h+1]+=q.y,e[h+2]+=q.z,e[k]+=q.x,e[k+1]+=q.y,e[k+2]+=q.z,e[l]+=q.x,e[l+1]+=q.y,e[l+2]+=q.z}else for(f=0,g=d.length;f<g;f+=9)m.fromArray(d,f),p.fromArray(d,f+3),n.fromArray(d,f+6),q.subVectors(n,p),r.subVectors(m,p),q.cross(r),e[f]=q.x,e[f+1]=q.y,e[f+2]=q.z,e[f+3]=q.x,e[f+4]=q.y,e[f+5]=q.z,e[f+6]=q.x,e[f+7]=q.y,e[f+8]=q.z;this.normalizeNormals();b.normal.needsUpdate=!0}},merge:function(a,b){if(!1===a instanceof
THREE.BufferGeometry)console.error("THREE.BufferGeometry.merge(): geometry not an instance of THREE.BufferGeometry.",a);else{void 0===b&&(b=0);var c=this.attributes,d;for(d in c)if(void 0!==a.attributes[d])for(var e=c[d].array,f=a.attributes[d],g=f.array,h=0,f=f.itemSize*b;h<g.length;h++,f++)e[f]=g[h];return this}},normalizeNormals:function(){for(var a=this.attributes.normal.array,b,c,d,e=0,f=a.length;e<f;e+=3)b=a[e],c=a[e+1],d=a[e+2],b=1/Math.sqrt(b*b+c*c+d*d),a[e]*=b,a[e+1]*=b,a[e+2]*=b},toNonIndexed:function(){if(null===
this.index)return console.warn("THREE.BufferGeometry.toNonIndexed(): Geometry is already non-indexed."),this;var a=new THREE.BufferGeometry,b=this.index.array,c=this.attributes,d;for(d in c){for(var e=c[d],f=e.array,e=e.itemSize,g=new f.constructor(b.length*e),h=0,k=0,l=0,m=b.length;l<m;l++)for(var h=b[l]*e,p=0;p<e;p++)g[k++]=f[h++];a.addAttribute(d,new THREE.BufferAttribute(g,e))}return a},toJSON:function(){var a={metadata:{version:4.4,type:"BufferGeometry",generator:"BufferGeometry.toJSON"}};a.uuid=
this.uuid;a.type=this.type;""!==this.name&&(a.name=this.name);if(void 0!==this.parameters){var b=this.parameters,c;for(c in b)void 0!==b[c]&&(a[c]=b[c]);return a}a.data={attributes:{}};var d=this.index;null!==d&&(b=Array.prototype.slice.call(d.array),a.data.index={type:d.array.constructor.name,array:b});d=this.attributes;for(c in d){var e=d[c],b=Array.prototype.slice.call(e.array);a.data.attributes[c]={itemSize:e.itemSize,type:e.array.constructor.name,array:b,normalized:e.normalized}}c=this.groups;
0<c.length&&(a.data.groups=JSON.parse(JSON.stringify(c)));c=this.boundingSphere;null!==c&&(a.data.boundingSphere={center:c.center.toArray(),radius:c.radius});return a},clone:function(){return(new THREE.BufferGeometry).copy(this)},copy:function(a){var b=a.index;null!==b&&this.setIndex(b.clone());var b=a.attributes,c;for(c in b)this.addAttribute(c,b[c].clone());a=a.groups;c=0;for(b=a.length;c<b;c++){var d=a[c];this.addGroup(d.start,d.count,d.materialIndex)}return this},dispose:function(){this.dispatchEvent({type:"dispose"})}});
THREE.BufferGeometry.MaxIndex=65535;THREE.InstancedBufferGeometry=function(){THREE.BufferGeometry.call(this);this.type="InstancedBufferGeometry";this.maxInstancedCount=void 0};THREE.InstancedBufferGeometry.prototype=Object.create(THREE.BufferGeometry.prototype);THREE.InstancedBufferGeometry.prototype.constructor=THREE.InstancedBufferGeometry;THREE.InstancedBufferGeometry.prototype.addGroup=function(a,b,c){this.groups.push({start:a,count:b,instances:c})};
THREE.InstancedBufferGeometry.prototype.copy=function(a){var b=a.index;null!==b&&this.setIndex(b.clone());var b=a.attributes,c;for(c in b)this.addAttribute(c,b[c].clone());a=a.groups;c=0;for(b=a.length;c<b;c++){var d=a[c];this.addGroup(d.start,d.count,d.instances)}return this};THREE.Uniform=function(a,b){"string"===typeof a&&(console.warn("THREE.Uniform: Type parameter is no longer needed."),a=b);this.value=a;this.dynamic=!1};
THREE.Uniform.prototype={constructor:THREE.Uniform,onUpdate:function(a){this.dynamic=!0;this.onUpdateCallback=a;return this}};THREE.AnimationAction=function(){throw Error("THREE.AnimationAction: Use mixer.clipAction for construction.");};
THREE.AnimationAction._new=function(a,b,c){this._mixer=a;this._clip=b;this._localRoot=c||null;a=b.tracks;b=a.length;c=Array(b);for(var d={endingStart:THREE.ZeroCurvatureEnding,endingEnd:THREE.ZeroCurvatureEnding},e=0;e!==b;++e){var f=a[e].createInterpolant(null);c[e]=f;f.settings=d}this._interpolantSettings=d;this._interpolants=c;this._propertyBindings=Array(b);this._weightInterpolant=this._timeScaleInterpolant=this._byClipCacheIndex=this._cacheIndex=null;this.loop=THREE.LoopRepeat;this._loopCount=
-1;this._startTime=null;this.time=0;this._effectiveWeight=this.weight=this._effectiveTimeScale=this.timeScale=1;this.repetitions=Infinity;this.paused=!1;this.enabled=!0;this.clampWhenFinished=!1;this.zeroSlopeAtEnd=this.zeroSlopeAtStart=!0};
THREE.AnimationAction._new.prototype={constructor:THREE.AnimationAction._new,play:function(){this._mixer._activateAction(this);return this},stop:function(){this._mixer._deactivateAction(this);return this.reset()},reset:function(){this.paused=!1;this.enabled=!0;this.time=0;this._loopCount=-1;this._startTime=null;return this.stopFading().stopWarping()},isRunning:function(){return this.enabled&&!this.paused&&0!==this.timeScale&&null===this._startTime&&this._mixer._isActiveAction(this)},isScheduled:function(){return this._mixer._isActiveAction(this)},
startAt:function(a){this._startTime=a;return this},setLoop:function(a,b){this.loop=a;this.repetitions=b;return this},setEffectiveWeight:function(a){this.weight=a;this._effectiveWeight=this.enabled?a:0;return this.stopFading()},getEffectiveWeight:function(){return this._effectiveWeight},fadeIn:function(a){return this._scheduleFading(a,0,1)},fadeOut:function(a){return this._scheduleFading(a,1,0)},crossFadeFrom:function(a,b,c){a.fadeOut(b);this.fadeIn(b);if(c){c=this._clip.duration;var d=a._clip.duration,
e=c/d;a.warp(1,d/c,b);this.warp(e,1,b)}return this},crossFadeTo:function(a,b,c){return a.crossFadeFrom(this,b,c)},stopFading:function(){var a=this._weightInterpolant;null!==a&&(this._weightInterpolant=null,this._mixer._takeBackControlInterpolant(a));return this},setEffectiveTimeScale:function(a){this.timeScale=a;this._effectiveTimeScale=this.paused?0:a;return this.stopWarping()},getEffectiveTimeScale:function(){return this._effectiveTimeScale},setDuration:function(a){this.timeScale=this._clip.duration/
a;return this.stopWarping()},syncWith:function(a){this.time=a.time;this.timeScale=a.timeScale;return this.stopWarping()},halt:function(a){return this.warp(this._effectiveTimeScale,0,a)},warp:function(a,b,c){var d=this._mixer,e=d.time,f=this._timeScaleInterpolant,g=this.timeScale;null===f&&(this._timeScaleInterpolant=f=d._lendControlInterpolant());d=f.parameterPositions;f=f.sampleValues;d[0]=e;d[1]=e+c;f[0]=a/g;f[1]=b/g;return this},stopWarping:function(){var a=this._timeScaleInterpolant;null!==a&&
(this._timeScaleInterpolant=null,this._mixer._takeBackControlInterpolant(a));return this},getMixer:function(){return this._mixer},getClip:function(){return this._clip},getRoot:function(){return this._localRoot||this._mixer._root},_update:function(a,b,c,d){var e=this._startTime;if(null!==e){b=(a-e)*c;if(0>b||0===c)return;this._startTime=null;b*=c}b*=this._updateTimeScale(a);c=this._updateTime(b);a=this._updateWeight(a);if(0<a){b=this._interpolants;for(var e=this._propertyBindings,f=0,g=b.length;f!==
g;++f)b[f].evaluate(c),e[f].accumulate(d,a)}},_updateWeight:function(a){var b=0;if(this.enabled){var b=this.weight,c=this._weightInterpolant;if(null!==c){var d=c.evaluate(a)[0],b=b*d;a>c.parameterPositions[1]&&(this.stopFading(),0===d&&(this.enabled=!1))}}return this._effectiveWeight=b},_updateTimeScale:function(a){var b=0;if(!this.paused){var b=this.timeScale,c=this._timeScaleInterpolant;if(null!==c){var d=c.evaluate(a)[0],b=b*d;a>c.parameterPositions[1]&&(this.stopWarping(),0===b?this.paused=!0:
this.timeScale=b)}}return this._effectiveTimeScale=b},_updateTime:function(a){var b=this.time+a;if(0===a)return b;var c=this._clip.duration,d=this.loop,e=this._loopCount;if(d===THREE.LoopOnce)a:{if(-1===e&&(this.loopCount=0,this._setEndings(!0,!0,!1)),b>=c)b=c;else if(0>b)b=0;else break a;this.clampWhenFinished?this.paused=!0:this.enabled=!1;this._mixer.dispatchEvent({type:"finished",action:this,direction:0>a?-1:1})}else{d=d===THREE.LoopPingPong;-1===e&&(0<=a?(e=0,this._setEndings(!0,0===this.repetitions,
d)):this._setEndings(0===this.repetitions,!0,d));if(b>=c||0>b){var f=Math.floor(b/c),b=b-c*f,e=e+Math.abs(f),g=this.repetitions-e;0>g?(this.clampWhenFinished?this.paused=!0:this.enabled=!1,b=0<a?c:0,this._mixer.dispatchEvent({type:"finished",action:this,direction:0<a?1:-1})):(0===g?(a=0>a,this._setEndings(a,!a,d)):this._setEndings(!1,!1,d),this._loopCount=e,this._mixer.dispatchEvent({type:"loop",action:this,loopDelta:f}))}if(d&&1===(e&1))return this.time=b,c-b}return this.time=b},_setEndings:function(a,
b,c){var d=this._interpolantSettings;c?(d.endingStart=THREE.ZeroSlopeEnding,d.endingEnd=THREE.ZeroSlopeEnding):(d.endingStart=a?this.zeroSlopeAtStart?THREE.ZeroSlopeEnding:THREE.ZeroCurvatureEnding:THREE.WrapAroundEnding,d.endingEnd=b?this.zeroSlopeAtEnd?THREE.ZeroSlopeEnding:THREE.ZeroCurvatureEnding:THREE.WrapAroundEnding)},_scheduleFading:function(a,b,c){var d=this._mixer,e=d.time,f=this._weightInterpolant;null===f&&(this._weightInterpolant=f=d._lendControlInterpolant());d=f.parameterPositions;
f=f.sampleValues;d[0]=e;f[0]=b;d[1]=e+a;f[1]=c;return this}};THREE.AnimationClip=function(a,b,c){this.name=a;this.tracks=c;this.duration=void 0!==b?b:-1;this.uuid=THREE.Math.generateUUID();0>this.duration&&this.resetDuration();this.trim();this.optimize()};
THREE.AnimationClip.prototype={constructor:THREE.AnimationClip,resetDuration:function(){for(var a=0,b=0,c=this.tracks.length;b!==c;++b)var d=this.tracks[b],a=Math.max(a,d.times[d.times.length-1]);this.duration=a},trim:function(){for(var a=0;a<this.tracks.length;a++)this.tracks[a].trim(0,this.duration);return this},optimize:function(){for(var a=0;a<this.tracks.length;a++)this.tracks[a].optimize();return this}};
Object.assign(THREE.AnimationClip,{parse:function(a){for(var b=[],c=a.tracks,d=1/(a.fps||1),e=0,f=c.length;e!==f;++e)b.push(THREE.KeyframeTrack.parse(c[e]).scale(d));return new THREE.AnimationClip(a.name,a.duration,b)},toJSON:function(a){var b=[],c=a.tracks;a={name:a.name,duration:a.duration,tracks:b};for(var d=0,e=c.length;d!==e;++d)b.push(THREE.KeyframeTrack.toJSON(c[d]));return a},CreateFromMorphTargetSequence:function(a,b,c,d){for(var e=b.length,f=[],g=0;g<e;g++){var h=[],k=[];h.push((g+e-1)%
e,g,(g+1)%e);k.push(0,1,0);var l=THREE.AnimationUtils.getKeyframeOrder(h),h=THREE.AnimationUtils.sortedArray(h,1,l),k=THREE.AnimationUtils.sortedArray(k,1,l);d||0!==h[0]||(h.push(e),k.push(k[0]));f.push((new THREE.NumberKeyframeTrack(".morphTargetInfluences["+b[g].name+"]",h,k)).scale(1/c))}return new THREE.AnimationClip(a,-1,f)},findByName:function(a,b){var c=a;Array.isArray(a)||(c=a.geometry&&a.geometry.animations||a.animations);for(var d=0;d<c.length;d++)if(c[d].name===b)return c[d];return null},
CreateClipsFromMorphTargetSequences:function(a,b,c){for(var d={},e=/^([\w-]*?)([\d]+)$/,f=0,g=a.length;f<g;f++){var h=a[f],k=h.name.match(e);if(k&&1<k.length){var l=k[1];(k=d[l])||(d[l]=k=[]);k.push(h)}}a=[];for(l in d)a.push(THREE.AnimationClip.CreateFromMorphTargetSequence(l,d[l],b,c));return a},parseAnimation:function(a,b,c){if(!a)return console.error("  no animation in JSONLoader data"),null;c=function(a,b,c,d,e){if(0!==c.length){var f=[],g=[];THREE.AnimationUtils.flattenJSON(c,f,g,d);0!==f.length&&
e.push(new a(b,f,g))}};var d=[],e=a.name||"default",f=a.length||-1,g=a.fps||30;a=a.hierarchy||[];for(var h=0;h<a.length;h++){var k=a[h].keys;if(k&&0!==k.length)if(k[0].morphTargets){for(var f={},l=0;l<k.length;l++)if(k[l].morphTargets)for(var m=0;m<k[l].morphTargets.length;m++)f[k[l].morphTargets[m]]=-1;for(var p in f){for(var n=[],q=[],m=0;m!==k[l].morphTargets.length;++m){var r=k[l];n.push(r.time);q.push(r.morphTarget===p?1:0)}d.push(new THREE.NumberKeyframeTrack(".morphTargetInfluence["+p+"]",
n,q))}f=f.length*(g||1)}else l=".bones["+b[h].name+"]",c(THREE.VectorKeyframeTrack,l+".position",k,"pos",d),c(THREE.QuaternionKeyframeTrack,l+".quaternion",k,"rot",d),c(THREE.VectorKeyframeTrack,l+".scale",k,"scl",d)}return 0===d.length?null:new THREE.AnimationClip(e,f,d)}});THREE.AnimationMixer=function(a){this._root=a;this._initMemoryManager();this.time=this._accuIndex=0;this.timeScale=1};
Object.assign(THREE.AnimationMixer.prototype,THREE.EventDispatcher.prototype,{clipAction:function(a,b){var c=b||this._root,d=c.uuid,e="string"===typeof a?THREE.AnimationClip.findByName(c,a):a,c=null!==e?e.uuid:a,f=this._actionsByClip[c],g=null;if(void 0!==f){g=f.actionByRoot[d];if(void 0!==g)return g;g=f.knownActions[0];null===e&&(e=g._clip)}if(null===e)return null;e=new THREE.AnimationMixer._Action(this,e,b);this._bindAction(e,g);this._addInactiveAction(e,c,d);return e},existingAction:function(a,
b){var c=b||this._root,d=c.uuid,c="string"===typeof a?THREE.AnimationClip.findByName(c,a):a,c=this._actionsByClip[c?c.uuid:a];return void 0!==c?c.actionByRoot[d]||null:null},stopAllAction:function(){for(var a=this._actions,b=this._nActiveActions,c=this._bindings,d=this._nActiveBindings,e=this._nActiveBindings=this._nActiveActions=0;e!==b;++e)a[e].reset();for(e=0;e!==d;++e)c[e].useCount=0;return this},update:function(a){a*=this.timeScale;for(var b=this._actions,c=this._nActiveActions,d=this.time+=
a,e=Math.sign(a),f=this._accuIndex^=1,g=0;g!==c;++g){var h=b[g];h.enabled&&h._update(d,a,e,f)}a=this._bindings;b=this._nActiveBindings;for(g=0;g!==b;++g)a[g].apply(f);return this},getRoot:function(){return this._root},uncacheClip:function(a){var b=this._actions;a=a.uuid;var c=this._actionsByClip,d=c[a];if(void 0!==d){for(var d=d.knownActions,e=0,f=d.length;e!==f;++e){var g=d[e];this._deactivateAction(g);var h=g._cacheIndex,k=b[b.length-1];g._cacheIndex=null;g._byClipCacheIndex=null;k._cacheIndex=
h;b[h]=k;b.pop();this._removeInactiveBindingsForAction(g)}delete c[a]}},uncacheRoot:function(a){a=a.uuid;var b=this._actionsByClip,c;for(c in b){var d=b[c].actionByRoot[a];void 0!==d&&(this._deactivateAction(d),this._removeInactiveAction(d))}c=this._bindingsByRootAndName[a];if(void 0!==c)for(var e in c)a=c[e],a.restoreOriginalState(),this._removeInactiveBinding(a)},uncacheAction:function(a,b){var c=this.existingAction(a,b);null!==c&&(this._deactivateAction(c),this._removeInactiveAction(c))}});
THREE.AnimationMixer._Action=THREE.AnimationAction._new;
Object.assign(THREE.AnimationMixer.prototype,{_bindAction:function(a,b){var c=a._localRoot||this._root,d=a._clip.tracks,e=d.length,f=a._propertyBindings,g=a._interpolants,h=c.uuid,k=this._bindingsByRootAndName,l=k[h];void 0===l&&(l={},k[h]=l);for(k=0;k!==e;++k){var m=d[k],p=m.name,n=l[p];if(void 0===n){n=f[k];if(void 0!==n){null===n._cacheIndex&&(++n.referenceCount,this._addInactiveBinding(n,h,p));continue}n=new THREE.PropertyMixer(THREE.PropertyBinding.create(c,p,b&&b._propertyBindings[k].binding.parsedPath),
m.ValueTypeName,m.getValueSize());++n.referenceCount;this._addInactiveBinding(n,h,p)}f[k]=n;g[k].resultBuffer=n.buffer}},_activateAction:function(a){if(!this._isActiveAction(a)){if(null===a._cacheIndex){var b=(a._localRoot||this._root).uuid,c=a._clip.uuid,d=this._actionsByClip[c];this._bindAction(a,d&&d.knownActions[0]);this._addInactiveAction(a,c,b)}b=a._propertyBindings;c=0;for(d=b.length;c!==d;++c){var e=b[c];0===e.useCount++&&(this._lendBinding(e),e.saveOriginalState())}this._lendAction(a)}},
_deactivateAction:function(a){if(this._isActiveAction(a)){for(var b=a._propertyBindings,c=0,d=b.length;c!==d;++c){var e=b[c];0===--e.useCount&&(e.restoreOriginalState(),this._takeBackBinding(e))}this._takeBackAction(a)}},_initMemoryManager:function(){this._actions=[];this._nActiveActions=0;this._actionsByClip={};this._bindings=[];this._nActiveBindings=0;this._bindingsByRootAndName={};this._controlInterpolants=[];this._nActiveControlInterpolants=0;var a=this;this.stats={actions:{get total(){return a._actions.length},
get inUse(){return a._nActiveActions}},bindings:{get total(){return a._bindings.length},get inUse(){return a._nActiveBindings}},controlInterpolants:{get total(){return a._controlInterpolants.length},get inUse(){return a._nActiveControlInterpolants}}}},_isActiveAction:function(a){a=a._cacheIndex;return null!==a&&a<this._nActiveActions},_addInactiveAction:function(a,b,c){var d=this._actions,e=this._actionsByClip,f=e[b];void 0===f?(f={knownActions:[a],actionByRoot:{}},a._byClipCacheIndex=0,e[b]=f):(b=
f.knownActions,a._byClipCacheIndex=b.length,b.push(a));a._cacheIndex=d.length;d.push(a);f.actionByRoot[c]=a},_removeInactiveAction:function(a){var b=this._actions,c=b[b.length-1],d=a._cacheIndex;c._cacheIndex=d;b[d]=c;b.pop();a._cacheIndex=null;var c=a._clip.uuid,d=this._actionsByClip,e=d[c],f=e.knownActions,g=f[f.length-1],h=a._byClipCacheIndex;g._byClipCacheIndex=h;f[h]=g;f.pop();a._byClipCacheIndex=null;delete e.actionByRoot[(b._localRoot||this._root).uuid];0===f.length&&delete d[c];this._removeInactiveBindingsForAction(a)},
_removeInactiveBindingsForAction:function(a){a=a._propertyBindings;for(var b=0,c=a.length;b!==c;++b){var d=a[b];0===--d.referenceCount&&this._removeInactiveBinding(d)}},_lendAction:function(a){var b=this._actions,c=a._cacheIndex,d=this._nActiveActions++,e=b[d];a._cacheIndex=d;b[d]=a;e._cacheIndex=c;b[c]=e},_takeBackAction:function(a){var b=this._actions,c=a._cacheIndex,d=--this._nActiveActions,e=b[d];a._cacheIndex=d;b[d]=a;e._cacheIndex=c;b[c]=e},_addInactiveBinding:function(a,b,c){var d=this._bindingsByRootAndName,
e=d[b],f=this._bindings;void 0===e&&(e={},d[b]=e);e[c]=a;a._cacheIndex=f.length;f.push(a)},_removeInactiveBinding:function(a){var b=this._bindings,c=a.binding,d=c.rootNode.uuid,c=c.path,e=this._bindingsByRootAndName,f=e[d],g=b[b.length-1];a=a._cacheIndex;g._cacheIndex=a;b[a]=g;b.pop();delete f[c];a:{for(var h in f)break a;delete e[d]}},_lendBinding:function(a){var b=this._bindings,c=a._cacheIndex,d=this._nActiveBindings++,e=b[d];a._cacheIndex=d;b[d]=a;e._cacheIndex=c;b[c]=e},_takeBackBinding:function(a){var b=
this._bindings,c=a._cacheIndex,d=--this._nActiveBindings,e=b[d];a._cacheIndex=d;b[d]=a;e._cacheIndex=c;b[c]=e},_lendControlInterpolant:function(){var a=this._controlInterpolants,b=this._nActiveControlInterpolants++,c=a[b];void 0===c&&(c=new THREE.LinearInterpolant(new Float32Array(2),new Float32Array(2),1,this._controlInterpolantsResultBuffer),c.__cacheIndex=b,a[b]=c);return c},_takeBackControlInterpolant:function(a){var b=this._controlInterpolants,c=a.__cacheIndex,d=--this._nActiveControlInterpolants,
e=b[d];a.__cacheIndex=d;b[d]=a;e.__cacheIndex=c;b[c]=e},_controlInterpolantsResultBuffer:new Float32Array(1)});
THREE.AnimationObjectGroup=function(a){this.uuid=THREE.Math.generateUUID();this._objects=Array.prototype.slice.call(arguments);this.nCachedObjects_=0;var b={};this._indicesByUUID=b;for(var c=0,d=arguments.length;c!==d;++c)b[arguments[c].uuid]=c;this._paths=[];this._parsedPaths=[];this._bindings=[];this._bindingsIndicesByPath={};var e=this;this.stats={objects:{get total(){return e._objects.length},get inUse(){return this.total-e.nCachedObjects_}},get bindingsPerObject(){return e._bindings.length}}};
THREE.AnimationObjectGroup.prototype={constructor:THREE.AnimationObjectGroup,add:function(a){for(var b=this._objects,c=b.length,d=this.nCachedObjects_,e=this._indicesByUUID,f=this._paths,g=this._parsedPaths,h=this._bindings,k=h.length,l=0,m=arguments.length;l!==m;++l){var p=arguments[l],n=p.uuid,q=e[n];if(void 0===q){q=c++;e[n]=q;b.push(p);for(var n=0,r=k;n!==r;++n)h[n].push(new THREE.PropertyBinding(p,f[n],g[n]))}else if(q<d){var s=b[q],v=--d,r=b[v];e[r.uuid]=q;b[q]=r;e[n]=v;b[v]=p;n=0;for(r=k;n!==
r;++n){var t=h[n],u=t[q];t[q]=t[v];void 0===u&&(u=new THREE.PropertyBinding(p,f[n],g[n]));t[v]=u}}else b[q]!==s&&console.error("Different objects with the same UUID detected. Clean the caches or recreate your infrastructure when reloading scenes...")}this.nCachedObjects_=d},remove:function(a){for(var b=this._objects,c=this.nCachedObjects_,d=this._indicesByUUID,e=this._bindings,f=e.length,g=0,h=arguments.length;g!==h;++g){var k=arguments[g],l=k.uuid,m=d[l];if(void 0!==m&&m>=c){var p=c++,n=b[p];d[n.uuid]=
m;b[m]=n;d[l]=p;b[p]=k;k=0;for(l=f;k!==l;++k){var n=e[k],q=n[m];n[m]=n[p];n[p]=q}}}this.nCachedObjects_=c},uncache:function(a){for(var b=this._objects,c=b.length,d=this.nCachedObjects_,e=this._indicesByUUID,f=this._bindings,g=f.length,h=0,k=arguments.length;h!==k;++h){var l=arguments[h].uuid,m=e[l];if(void 0!==m)if(delete e[l],m<d){var l=--d,p=b[l],n=--c,q=b[n];e[p.uuid]=m;b[m]=p;e[q.uuid]=l;b[l]=q;b.pop();p=0;for(q=g;p!==q;++p){var r=f[p],s=r[n];r[m]=r[l];r[l]=s;r.pop()}}else for(n=--c,q=b[n],e[q.uuid]=
m,b[m]=q,b.pop(),p=0,q=g;p!==q;++p)r=f[p],r[m]=r[n],r.pop()}this.nCachedObjects_=d},subscribe_:function(a,b){var c=this._bindingsIndicesByPath,d=c[a],e=this._bindings;if(void 0!==d)return e[d];var f=this._paths,g=this._parsedPaths,h=this._objects,k=this.nCachedObjects_,l=Array(h.length),d=e.length;c[a]=d;f.push(a);g.push(b);e.push(l);c=k;for(d=h.length;c!==d;++c)l[c]=new THREE.PropertyBinding(h[c],a,b);return l},unsubscribe_:function(a){var b=this._bindingsIndicesByPath,c=b[a];if(void 0!==c){var d=
this._paths,e=this._parsedPaths,f=this._bindings,g=f.length-1,h=f[g];b[a[g]]=c;f[c]=h;f.pop();e[c]=e[g];e.pop();d[c]=d[g];d.pop()}}};
THREE.AnimationUtils={arraySlice:function(a,b,c){return THREE.AnimationUtils.isTypedArray(a)?new a.constructor(a.subarray(b,c)):a.slice(b,c)},convertArray:function(a,b,c){return!a||!c&&a.constructor===b?a:"number"===typeof b.BYTES_PER_ELEMENT?new b(a):Array.prototype.slice.call(a)},isTypedArray:function(a){return ArrayBuffer.isView(a)&&!(a instanceof DataView)},getKeyframeOrder:function(a){for(var b=a.length,c=Array(b),d=0;d!==b;++d)c[d]=d;c.sort(function(b,c){return a[b]-a[c]});return c},sortedArray:function(a,
b,c){for(var d=a.length,e=new a.constructor(d),f=0,g=0;g!==d;++f)for(var h=c[f]*b,k=0;k!==b;++k)e[g++]=a[h+k];return e},flattenJSON:function(a,b,c,d){for(var e=1,f=a[0];void 0!==f&&void 0===f[d];)f=a[e++];if(void 0!==f){var g=f[d];if(void 0!==g)if(Array.isArray(g)){do g=f[d],void 0!==g&&(b.push(f.time),c.push.apply(c,g)),f=a[e++];while(void 0!==f)}else if(void 0!==g.toArray){do g=f[d],void 0!==g&&(b.push(f.time),g.toArray(c,c.length)),f=a[e++];while(void 0!==f)}else{do g=f[d],void 0!==g&&(b.push(f.time),
c.push(g)),f=a[e++];while(void 0!==f)}}}};THREE.KeyframeTrack=function(a,b,c,d){if(void 0===a)throw Error("track name is undefined");if(void 0===b||0===b.length)throw Error("no keyframes in track named "+a);this.name=a;this.times=THREE.AnimationUtils.convertArray(b,this.TimeBufferType);this.values=THREE.AnimationUtils.convertArray(c,this.ValueBufferType);this.setInterpolation(d||this.DefaultInterpolation);this.validate();this.optimize()};
THREE.KeyframeTrack.prototype={constructor:THREE.KeyframeTrack,TimeBufferType:Float32Array,ValueBufferType:Float32Array,DefaultInterpolation:THREE.InterpolateLinear,InterpolantFactoryMethodDiscrete:function(a){return new THREE.DiscreteInterpolant(this.times,this.values,this.getValueSize(),a)},InterpolantFactoryMethodLinear:function(a){return new THREE.LinearInterpolant(this.times,this.values,this.getValueSize(),a)},InterpolantFactoryMethodSmooth:function(a){return new THREE.CubicInterpolant(this.times,
this.values,this.getValueSize(),a)},setInterpolation:function(a){var b;switch(a){case THREE.InterpolateDiscrete:b=this.InterpolantFactoryMethodDiscrete;break;case THREE.InterpolateLinear:b=this.InterpolantFactoryMethodLinear;break;case THREE.InterpolateSmooth:b=this.InterpolantFactoryMethodSmooth}if(void 0===b){b="unsupported interpolation for "+this.ValueTypeName+" keyframe track named "+this.name;if(void 0===this.createInterpolant)if(a!==this.DefaultInterpolation)this.setInterpolation(this.DefaultInterpolation);
else throw Error(b);console.warn(b)}else this.createInterpolant=b},getInterpolation:function(){switch(this.createInterpolant){case this.InterpolantFactoryMethodDiscrete:return THREE.InterpolateDiscrete;case this.InterpolantFactoryMethodLinear:return THREE.InterpolateLinear;case this.InterpolantFactoryMethodSmooth:return THREE.InterpolateSmooth}},getValueSize:function(){return this.values.length/this.times.length},shift:function(a){if(0!==a)for(var b=this.times,c=0,d=b.length;c!==d;++c)b[c]+=a;return this},
scale:function(a){if(1!==a)for(var b=this.times,c=0,d=b.length;c!==d;++c)b[c]*=a;return this},trim:function(a,b){for(var c=this.times,d=c.length,e=0,f=d-1;e!==d&&c[e]<a;)++e;for(;-1!==f&&c[f]>b;)--f;++f;if(0!==e||f!==d)e>=f&&(f=Math.max(f,1),e=f-1),d=this.getValueSize(),this.times=THREE.AnimationUtils.arraySlice(c,e,f),this.values=THREE.AnimationUtils.arraySlice(this.values,e*d,f*d);return this},validate:function(){var a=!0,b=this.getValueSize();0!==b-Math.floor(b)&&(console.error("invalid value size in track",
this),a=!1);var c=this.times,b=this.values,d=c.length;0===d&&(console.error("track is empty",this),a=!1);for(var e=null,f=0;f!==d;f++){var g=c[f];if("number"===typeof g&&isNaN(g)){console.error("time is not a valid number",this,f,g);a=!1;break}if(null!==e&&e>g){console.error("out of order keys",this,f,g,e);a=!1;break}e=g}if(void 0!==b&&THREE.AnimationUtils.isTypedArray(b))for(f=0,c=b.length;f!==c;++f)if(d=b[f],isNaN(d)){console.error("value is not a valid number",this,f,d);a=!1;break}return a},optimize:function(){for(var a=
this.times,b=this.values,c=this.getValueSize(),d=1,e=1,f=a.length-1;e<=f;++e){var g=!1,h=a[e];if(h!==a[e+1]&&(1!==e||h!==h[0]))for(var k=e*c,l=k-c,m=k+c,h=0;h!==c;++h){var p=b[k+h];if(p!==b[l+h]||p!==b[m+h]){g=!0;break}}if(g){if(e!==d)for(a[d]=a[e],g=e*c,k=d*c,h=0;h!==c;++h)b[k+h]=b[g+h];++d}}d!==a.length&&(this.times=THREE.AnimationUtils.arraySlice(a,0,d),this.values=THREE.AnimationUtils.arraySlice(b,0,d*c));return this}};
Object.assign(THREE.KeyframeTrack,{parse:function(a){if(void 0===a.type)throw Error("track type undefined, can not parse");var b=THREE.KeyframeTrack._getTrackTypeForValueTypeName(a.type);if(void 0===a.times){var c=[],d=[];THREE.AnimationUtils.flattenJSON(a.keys,c,d,"value");a.times=c;a.values=d}return void 0!==b.parse?b.parse(a):new b(a.name,a.times,a.values,a.interpolation)},toJSON:function(a){var b=a.constructor;if(void 0!==b.toJSON)b=b.toJSON(a);else{var b={name:a.name,times:THREE.AnimationUtils.convertArray(a.times,
Array),values:THREE.AnimationUtils.convertArray(a.values,Array)},c=a.getInterpolation();c!==a.DefaultInterpolation&&(b.interpolation=c)}b.type=a.ValueTypeName;return b},_getTrackTypeForValueTypeName:function(a){switch(a.toLowerCase()){case "scalar":case "double":case "float":case "number":case "integer":return THREE.NumberKeyframeTrack;case "vector":case "vector2":case "vector3":case "vector4":return THREE.VectorKeyframeTrack;case "color":return THREE.ColorKeyframeTrack;case "quaternion":return THREE.QuaternionKeyframeTrack;
case "bool":case "boolean":return THREE.BooleanKeyframeTrack;case "string":return THREE.StringKeyframeTrack}throw Error("Unsupported typeName: "+a);}});THREE.PropertyBinding=function(a,b,c){this.path=b;this.parsedPath=c||THREE.PropertyBinding.parseTrackName(b);this.node=THREE.PropertyBinding.findNode(a,this.parsedPath.nodeName)||a;this.rootNode=a};
THREE.PropertyBinding.prototype={constructor:THREE.PropertyBinding,getValue:function(a,b){this.bind();this.getValue(a,b)},setValue:function(a,b){this.bind();this.setValue(a,b)},bind:function(){var a=this.node,b=this.parsedPath,c=b.objectName,d=b.propertyName,e=b.propertyIndex;a||(this.node=a=THREE.PropertyBinding.findNode(this.rootNode,b.nodeName)||this.rootNode);this.getValue=this._getValue_unavailable;this.setValue=this._setValue_unavailable;if(a){if(c){var f=b.objectIndex;switch(c){case "materials":if(!a.material){console.error("  can not bind to material as node does not have a material",
this);return}if(!a.material.materials){console.error("  can not bind to material.materials as node.material does not have a materials array",this);return}a=a.material.materials;break;case "bones":if(!a.skeleton){console.error("  can not bind to bones as node does not have a skeleton",this);return}a=a.skeleton.bones;for(c=0;c<a.length;c++)if(a[c].name===f){f=c;break}break;default:if(void 0===a[c]){console.error("  can not bind to objectName of node, undefined",this);return}a=a[c]}if(void 0!==f){if(void 0===
a[f]){console.error("  trying to bind to objectIndex of objectName, but is undefined:",this,a);return}a=a[f]}}f=a[d];if(void 0===f)console.error("  trying to update property for track: "+b.nodeName+"."+d+" but it wasn't found.",a);else{b=this.Versioning.None;void 0!==a.needsUpdate?(b=this.Versioning.NeedsUpdate,this.targetObject=a):void 0!==a.matrixWorldNeedsUpdate&&(b=this.Versioning.MatrixWorldNeedsUpdate,this.targetObject=a);c=this.BindingType.Direct;if(void 0!==e){if("morphTargetInfluences"===
d){if(!a.geometry){console.error("  can not bind to morphTargetInfluences becasuse node does not have a geometry",this);return}if(!a.geometry.morphTargets){console.error("  can not bind to morphTargetInfluences becasuse node does not have a geometry.morphTargets",this);return}for(c=0;c<this.node.geometry.morphTargets.length;c++)if(a.geometry.morphTargets[c].name===e){e=c;break}}c=this.BindingType.ArrayElement;this.resolvedProperty=f;this.propertyIndex=e}else void 0!==f.fromArray&&void 0!==f.toArray?
(c=this.BindingType.HasFromToArray,this.resolvedProperty=f):void 0!==f.length?(c=this.BindingType.EntireArray,this.resolvedProperty=f):this.propertyName=d;this.getValue=this.GetterByBindingType[c];this.setValue=this.SetterByBindingTypeAndVersioning[c][b]}}else console.error("  trying to update node for track: "+this.path+" but it wasn't found.")},unbind:function(){this.node=null;this.getValue=this._getValue_unbound;this.setValue=this._setValue_unbound}};
Object.assign(THREE.PropertyBinding.prototype,{_getValue_unavailable:function(){},_setValue_unavailable:function(){},_getValue_unbound:THREE.PropertyBinding.prototype.getValue,_setValue_unbound:THREE.PropertyBinding.prototype.setValue,BindingType:{Direct:0,EntireArray:1,ArrayElement:2,HasFromToArray:3},Versioning:{None:0,NeedsUpdate:1,MatrixWorldNeedsUpdate:2},GetterByBindingType:[function(a,b){a[b]=this.node[this.propertyName]},function(a,b){for(var c=this.resolvedProperty,d=0,e=c.length;d!==e;++d)a[b++]=
c[d]},function(a,b){a[b]=this.resolvedProperty[this.propertyIndex]},function(a,b){this.resolvedProperty.toArray(a,b)}],SetterByBindingTypeAndVersioning:[[function(a,b){this.node[this.propertyName]=a[b]},function(a,b){this.node[this.propertyName]=a[b];this.targetObject.needsUpdate=!0},function(a,b){this.node[this.propertyName]=a[b];this.targetObject.matrixWorldNeedsUpdate=!0}],[function(a,b){for(var c=this.resolvedProperty,d=0,e=c.length;d!==e;++d)c[d]=a[b++]},function(a,b){for(var c=this.resolvedProperty,
d=0,e=c.length;d!==e;++d)c[d]=a[b++];this.targetObject.needsUpdate=!0},function(a,b){for(var c=this.resolvedProperty,d=0,e=c.length;d!==e;++d)c[d]=a[b++];this.targetObject.matrixWorldNeedsUpdate=!0}],[function(a,b){this.resolvedProperty[this.propertyIndex]=a[b]},function(a,b){this.resolvedProperty[this.propertyIndex]=a[b];this.targetObject.needsUpdate=!0},function(a,b){this.resolvedProperty[this.propertyIndex]=a[b];this.targetObject.matrixWorldNeedsUpdate=!0}],[function(a,b){this.resolvedProperty.fromArray(a,
b)},function(a,b){this.resolvedProperty.fromArray(a,b);this.targetObject.needsUpdate=!0},function(a,b){this.resolvedProperty.fromArray(a,b);this.targetObject.matrixWorldNeedsUpdate=!0}]]});THREE.PropertyBinding.Composite=function(a,b,c){c=c||THREE.PropertyBinding.parseTrackName(b);this._targetGroup=a;this._bindings=a.subscribe_(b,c)};
THREE.PropertyBinding.Composite.prototype={constructor:THREE.PropertyBinding.Composite,getValue:function(a,b){this.bind();var c=this._bindings[this._targetGroup.nCachedObjects_];void 0!==c&&c.getValue(a,b)},setValue:function(a,b){for(var c=this._bindings,d=this._targetGroup.nCachedObjects_,e=c.length;d!==e;++d)c[d].setValue(a,b)},bind:function(){for(var a=this._bindings,b=this._targetGroup.nCachedObjects_,c=a.length;b!==c;++b)a[b].bind()},unbind:function(){for(var a=this._bindings,b=this._targetGroup.nCachedObjects_,
c=a.length;b!==c;++b)a[b].unbind()}};THREE.PropertyBinding.create=function(a,b,c){return a instanceof THREE.AnimationObjectGroup?new THREE.PropertyBinding.Composite(a,b,c):new THREE.PropertyBinding(a,b,c)};
THREE.PropertyBinding.parseTrackName=function(a){var b=/^(([\w]+\/)*)([\w-\d]+)?(\.([\w]+)(\[([\w\d\[\]\_.:\- ]+)\])?)?(\.([\w.]+)(\[([\w\d\[\]\_. ]+)\])?)$/,c=b.exec(a);if(!c)throw Error("cannot parse trackName at all: "+a);c.index===b.lastIndex&&b.lastIndex++;b={nodeName:c[3],objectName:c[5],objectIndex:c[7],propertyName:c[9],propertyIndex:c[11]};if(null===b.propertyName||0===b.propertyName.length)throw Error("can not parse propertyName from trackName: "+a);return b};
THREE.PropertyBinding.findNode=function(a,b){if(!b||""===b||"root"===b||"."===b||-1===b||b===a.name||b===a.uuid)return a;if(a.skeleton){var c=function(a){for(var c=0;c<a.bones.length;c++){var d=a.bones[c];if(d.name===b)return d}return null}(a.skeleton);if(c)return c}if(a.children){var d=function(a){for(var c=0;c<a.length;c++){var g=a[c];if(g.name===b||g.uuid===b||(g=d(g.children)))return g}return null};if(c=d(a.children))return c}return null};
THREE.PropertyMixer=function(a,b,c){this.binding=a;this.valueSize=c;a=Float64Array;switch(b){case "quaternion":b=this._slerp;break;case "string":case "bool":a=Array;b=this._select;break;default:b=this._lerp}this.buffer=new a(4*c);this._mixBufferRegion=b;this.referenceCount=this.useCount=this.cumulativeWeight=0};
THREE.PropertyMixer.prototype={constructor:THREE.PropertyMixer,accumulate:function(a,b){var c=this.buffer,d=this.valueSize,e=a*d+d,f=this.cumulativeWeight;if(0===f){for(f=0;f!==d;++f)c[e+f]=c[f];f=b}else f+=b,this._mixBufferRegion(c,e,0,b/f,d);this.cumulativeWeight=f},apply:function(a){var b=this.valueSize,c=this.buffer;a=a*b+b;var d=this.cumulativeWeight,e=this.binding;this.cumulativeWeight=0;1>d&&this._mixBufferRegion(c,a,3*b,1-d,b);for(var d=b,f=b+b;d!==f;++d)if(c[d]!==c[d+b]){e.setValue(c,a);
break}},saveOriginalState:function(){var a=this.buffer,b=this.valueSize,c=3*b;this.binding.getValue(a,c);for(var d=b;d!==c;++d)a[d]=a[c+d%b];this.cumulativeWeight=0},restoreOriginalState:function(){this.binding.setValue(this.buffer,3*this.valueSize)},_select:function(a,b,c,d,e){if(.5<=d)for(d=0;d!==e;++d)a[b+d]=a[c+d]},_slerp:function(a,b,c,d,e){THREE.Quaternion.slerpFlat(a,b,a,b,a,c,d)},_lerp:function(a,b,c,d,e){for(var f=1-d,g=0;g!==e;++g){var h=b+g;a[h]=a[h]*f+a[c+g]*d}}};
THREE.BooleanKeyframeTrack=function(a,b,c){THREE.KeyframeTrack.call(this,a,b,c)};THREE.BooleanKeyframeTrack.prototype=Object.assign(Object.create(THREE.KeyframeTrack.prototype),{constructor:THREE.BooleanKeyframeTrack,ValueTypeName:"bool",ValueBufferType:Array,DefaultInterpolation:THREE.InterpolateDiscrete,InterpolantFactoryMethodLinear:void 0,InterpolantFactoryMethodSmooth:void 0});THREE.ColorKeyframeTrack=function(a,b,c,d){THREE.KeyframeTrack.call(this,a,b,c,d)};
THREE.ColorKeyframeTrack.prototype=Object.assign(Object.create(THREE.KeyframeTrack.prototype),{constructor:THREE.ColorKeyframeTrack,ValueTypeName:"color"});THREE.NumberKeyframeTrack=function(a,b,c,d){THREE.KeyframeTrack.call(this,a,b,c,d)};THREE.NumberKeyframeTrack.prototype=Object.assign(Object.create(THREE.KeyframeTrack.prototype),{constructor:THREE.NumberKeyframeTrack,ValueTypeName:"number"});THREE.QuaternionKeyframeTrack=function(a,b,c,d){THREE.KeyframeTrack.call(this,a,b,c,d)};
THREE.QuaternionKeyframeTrack.prototype=Object.assign(Object.create(THREE.KeyframeTrack.prototype),{constructor:THREE.QuaternionKeyframeTrack,ValueTypeName:"quaternion",DefaultInterpolation:THREE.InterpolateLinear,InterpolantFactoryMethodLinear:function(a){return new THREE.QuaternionLinearInterpolant(this.times,this.values,this.getValueSize(),a)},InterpolantFactoryMethodSmooth:void 0});THREE.StringKeyframeTrack=function(a,b,c,d){THREE.KeyframeTrack.call(this,a,b,c,d)};
THREE.StringKeyframeTrack.prototype=Object.assign(Object.create(THREE.KeyframeTrack.prototype),{constructor:THREE.StringKeyframeTrack,ValueTypeName:"string",ValueBufferType:Array,DefaultInterpolation:THREE.InterpolateDiscrete,InterpolantFactoryMethodLinear:void 0,InterpolantFactoryMethodSmooth:void 0});THREE.VectorKeyframeTrack=function(a,b,c,d){THREE.KeyframeTrack.call(this,a,b,c,d)};
THREE.VectorKeyframeTrack.prototype=Object.assign(Object.create(THREE.KeyframeTrack.prototype),{constructor:THREE.VectorKeyframeTrack,ValueTypeName:"vector"});
THREE.Audio=function(a){THREE.Object3D.call(this);this.type="Audio";this.context=a.context;this.source=this.context.createBufferSource();this.source.onended=this.onEnded.bind(this);this.gain=this.context.createGain();this.gain.connect(a.getInput());this.autoplay=!1;this.startTime=0;this.playbackRate=1;this.isPlaying=!1;this.hasPlaybackControl=!0;this.sourceType="empty";this.filters=[]};
THREE.Audio.prototype=Object.assign(Object.create(THREE.Object3D.prototype),{constructor:THREE.Audio,getOutput:function(){return this.gain},setNodeSource:function(a){this.hasPlaybackControl=!1;this.sourceType="audioNode";this.source=a;this.connect();return this},setBuffer:function(a){this.source.buffer=a;this.sourceType="buffer";this.autoplay&&this.play();return this},play:function(){if(!0===this.isPlaying)console.warn("THREE.Audio: Audio is already playing.");else if(!1===this.hasPlaybackControl)console.warn("THREE.Audio: this Audio has no playback control.");
else{var a=this.context.createBufferSource();a.buffer=this.source.buffer;a.loop=this.source.loop;a.onended=this.source.onended;a.start(0,this.startTime);a.playbackRate.value=this.playbackRate;this.isPlaying=!0;this.source=a;return this.connect()}},pause:function(){if(!1===this.hasPlaybackControl)console.warn("THREE.Audio: this Audio has no playback control.");else return this.source.stop(),this.startTime=this.context.currentTime,this.isPlaying=!1,this},stop:function(){if(!1===this.hasPlaybackControl)console.warn("THREE.Audio: this Audio has no playback control.");
else return this.source.stop(),this.startTime=0,this.isPlaying=!1,this},connect:function(){if(0<this.filters.length){this.source.connect(this.filters[0]);for(var a=1,b=this.filters.length;a<b;a++)this.filters[a-1].connect(this.filters[a]);this.filters[this.filters.length-1].connect(this.getOutput())}else this.source.connect(this.getOutput());return this},disconnect:function(){if(0<this.filters.length){this.source.disconnect(this.filters[0]);for(var a=1,b=this.filters.length;a<b;a++)this.filters[a-
1].disconnect(this.filters[a]);this.filters[this.filters.length-1].disconnect(this.getOutput())}else this.source.disconnect(this.getOutput());return this},getFilters:function(){return this.filters},setFilters:function(a){a||(a=[]);!0===this.isPlaying?(this.disconnect(),this.filters=a,this.connect()):this.filters=a;return this},getFilter:function(){return this.getFilters()[0]},setFilter:function(a){return this.setFilters(a?[a]:[])},setPlaybackRate:function(a){if(!1===this.hasPlaybackControl)console.warn("THREE.Audio: this Audio has no playback control.");
else return this.playbackRate=a,!0===this.isPlaying&&(this.source.playbackRate.value=this.playbackRate),this},getPlaybackRate:function(){return this.playbackRate},onEnded:function(){this.isPlaying=!1},getLoop:function(){return!1===this.hasPlaybackControl?(console.warn("THREE.Audio: this Audio has no playback control."),!1):this.source.loop},setLoop:function(a){!1===this.hasPlaybackControl?console.warn("THREE.Audio: this Audio has no playback control."):this.source.loop=a},getVolume:function(){return this.gain.gain.value},
setVolume:function(a){this.gain.gain.value=a;return this}});THREE.AudioAnalyser=function(a,b){this.analyser=a.context.createAnalyser();this.analyser.fftSize=void 0!==b?b:2048;this.data=new Uint8Array(this.analyser.frequencyBinCount);a.getOutput().connect(this.analyser)};
Object.assign(THREE.AudioAnalyser.prototype,{getFrequencyData:function(){this.analyser.getByteFrequencyData(this.data);return this.data},getAverageFrequency:function(){for(var a=0,b=this.getFrequencyData(),c=0;c<b.length;c++)a+=b[c];return a/b.length}});Object.defineProperty(THREE,"AudioContext",{get:function(){var a;return function(){void 0===a&&(a=new (window.AudioContext||window.webkitAudioContext));return a}}()});
THREE.PositionalAudio=function(a){THREE.Audio.call(this,a);this.panner=this.context.createPanner();this.panner.connect(this.gain)};
THREE.PositionalAudio.prototype=Object.assign(Object.create(THREE.Audio.prototype),{constructor:THREE.PositionalAudio,getOutput:function(){return this.panner},getRefDistance:function(){return this.panner.refDistance},setRefDistance:function(a){this.panner.refDistance=a},getRolloffFactor:function(){return this.panner.rolloffFactor},setRolloffFactor:function(a){this.panner.rolloffFactor=a},getDistanceModel:function(){return this.panner.distanceModel},setDistanceModel:function(a){this.panner.distanceModel=
a},getMaxDistance:function(){return this.panner.maxDistance},setMaxDistance:function(a){this.panner.maxDistance=a},updateMatrixWorld:function(){var a=new THREE.Vector3;return function(b){THREE.Object3D.prototype.updateMatrixWorld.call(this,b);a.setFromMatrixPosition(this.matrixWorld);this.panner.setPosition(a.x,a.y,a.z)}}()});
THREE.AudioListener=function(){THREE.Object3D.call(this);this.type="AudioListener";this.context=THREE.AudioContext;this.gain=this.context.createGain();this.gain.connect(this.context.destination);this.filter=null};
THREE.AudioListener.prototype=Object.assign(Object.create(THREE.Object3D.prototype),{constructor:THREE.AudioListener,getInput:function(){return this.gain},removeFilter:function(){null!==this.filter&&(this.gain.disconnect(this.filter),this.filter.disconnect(this.context.destination),this.gain.connect(this.context.destination),this.filter=null)},getFilter:function(){return this.filter},setFilter:function(a){null!==this.filter?(this.gain.disconnect(this.filter),this.filter.disconnect(this.context.destination)):
this.gain.disconnect(this.context.destination);this.filter=a;this.gain.connect(this.filter);this.filter.connect(this.context.destination)},getMasterVolume:function(){return this.gain.gain.value},setMasterVolume:function(a){this.gain.gain.value=a},updateMatrixWorld:function(){var a=new THREE.Vector3,b=new THREE.Quaternion,c=new THREE.Vector3,d=new THREE.Vector3;return function(e){THREE.Object3D.prototype.updateMatrixWorld.call(this,e);e=this.context.listener;var f=this.up;this.matrixWorld.decompose(a,
b,c);d.set(0,0,-1).applyQuaternion(b);e.setPosition(a.x,a.y,a.z);e.setOrientation(d.x,d.y,d.z,f.x,f.y,f.z)}}()});THREE.Camera=function(){THREE.Object3D.call(this);this.type="Camera";this.matrixWorldInverse=new THREE.Matrix4;this.projectionMatrix=new THREE.Matrix4};THREE.Camera.prototype=Object.create(THREE.Object3D.prototype);THREE.Camera.prototype.constructor=THREE.Camera;
THREE.Camera.prototype.getWorldDirection=function(){var a=new THREE.Quaternion;return function(b){b=b||new THREE.Vector3;this.getWorldQuaternion(a);return b.set(0,0,-1).applyQuaternion(a)}}();THREE.Camera.prototype.lookAt=function(){var a=new THREE.Matrix4;return function(b){a.lookAt(this.position,b,this.up);this.quaternion.setFromRotationMatrix(a)}}();THREE.Camera.prototype.clone=function(){return(new this.constructor).copy(this)};
THREE.Camera.prototype.copy=function(a){THREE.Object3D.prototype.copy.call(this,a);this.matrixWorldInverse.copy(a.matrixWorldInverse);this.projectionMatrix.copy(a.projectionMatrix);return this};
THREE.CubeCamera=function(a,b,c){THREE.Object3D.call(this);this.type="CubeCamera";var d=new THREE.PerspectiveCamera(90,1,a,b);d.up.set(0,-1,0);d.lookAt(new THREE.Vector3(1,0,0));this.add(d);var e=new THREE.PerspectiveCamera(90,1,a,b);e.up.set(0,-1,0);e.lookAt(new THREE.Vector3(-1,0,0));this.add(e);var f=new THREE.PerspectiveCamera(90,1,a,b);f.up.set(0,0,1);f.lookAt(new THREE.Vector3(0,1,0));this.add(f);var g=new THREE.PerspectiveCamera(90,1,a,b);g.up.set(0,0,-1);g.lookAt(new THREE.Vector3(0,-1,0));
this.add(g);var h=new THREE.PerspectiveCamera(90,1,a,b);h.up.set(0,-1,0);h.lookAt(new THREE.Vector3(0,0,1));this.add(h);var k=new THREE.PerspectiveCamera(90,1,a,b);k.up.set(0,-1,0);k.lookAt(new THREE.Vector3(0,0,-1));this.add(k);this.renderTarget=new THREE.WebGLRenderTargetCube(c,c,{format:THREE.RGBFormat,magFilter:THREE.LinearFilter,minFilter:THREE.LinearFilter});this.updateCubeMap=function(a,b){null===this.parent&&this.updateMatrixWorld();var c=this.renderTarget,n=c.texture.generateMipmaps;c.texture.generateMipmaps=
!1;c.activeCubeFace=0;a.render(b,d,c);c.activeCubeFace=1;a.render(b,e,c);c.activeCubeFace=2;a.render(b,f,c);c.activeCubeFace=3;a.render(b,g,c);c.activeCubeFace=4;a.render(b,h,c);c.texture.generateMipmaps=n;c.activeCubeFace=5;a.render(b,k,c);a.setRenderTarget(null)}};THREE.CubeCamera.prototype=Object.create(THREE.Object3D.prototype);THREE.CubeCamera.prototype.constructor=THREE.CubeCamera;
THREE.OrthographicCamera=function(a,b,c,d,e,f){THREE.Camera.call(this);this.type="OrthographicCamera";this.zoom=1;this.view=null;this.left=a;this.right=b;this.top=c;this.bottom=d;this.near=void 0!==e?e:.1;this.far=void 0!==f?f:2E3;this.updateProjectionMatrix()};
THREE.OrthographicCamera.prototype=Object.assign(Object.create(THREE.Camera.prototype),{constructor:THREE.OrthographicCamera,copy:function(a){THREE.Camera.prototype.copy.call(this,a);this.left=a.left;this.right=a.right;this.top=a.top;this.bottom=a.bottom;this.near=a.near;this.far=a.far;this.zoom=a.zoom;this.view=null===a.view?null:Object.assign({},a.view);return this},setViewOffset:function(a,b,c,d,e,f){this.view={fullWidth:a,fullHeight:b,offsetX:c,offsetY:d,width:e,height:f};this.updateProjectionMatrix()},
clearViewOffset:function(){this.view=null;this.updateProjectionMatrix()},updateProjectionMatrix:function(){var a=(this.right-this.left)/(2*this.zoom),b=(this.top-this.bottom)/(2*this.zoom),c=(this.right+this.left)/2,d=(this.top+this.bottom)/2,e=c-a,c=c+a,a=d+b,b=d-b;if(null!==this.view)var c=this.zoom/(this.view.width/this.view.fullWidth),b=this.zoom/(this.view.height/this.view.fullHeight),f=(this.right-this.left)/this.view.width,d=(this.top-this.bottom)/this.view.height,e=e+this.view.offsetX/c*f,
c=e+this.view.width/c*f,a=a-this.view.offsetY/b*d,b=a-this.view.height/b*d;this.projectionMatrix.makeOrthographic(e,c,a,b,this.near,this.far)},toJSON:function(a){a=THREE.Object3D.prototype.toJSON.call(this,a);a.object.zoom=this.zoom;a.object.left=this.left;a.object.right=this.right;a.object.top=this.top;a.object.bottom=this.bottom;a.object.near=this.near;a.object.far=this.far;null!==this.view&&(a.object.view=Object.assign({},this.view));return a}});
THREE.PerspectiveCamera=function(a,b,c,d){THREE.Camera.call(this);this.type="PerspectiveCamera";this.fov=void 0!==a?a:50;this.zoom=1;this.near=void 0!==c?c:.1;this.far=void 0!==d?d:2E3;this.focus=10;this.aspect=void 0!==b?b:1;this.view=null;this.filmGauge=35;this.filmOffset=0;this.updateProjectionMatrix()};
THREE.PerspectiveCamera.prototype=Object.assign(Object.create(THREE.Camera.prototype),{constructor:THREE.PerspectiveCamera,copy:function(a){THREE.Camera.prototype.copy.call(this,a);this.fov=a.fov;this.zoom=a.zoom;this.near=a.near;this.far=a.far;this.focus=a.focus;this.aspect=a.aspect;this.view=null===a.view?null:Object.assign({},a.view);this.filmGauge=a.filmGauge;this.filmOffset=a.filmOffset;return this},setFocalLength:function(a){a=.5*this.getFilmHeight()/a;this.fov=2*THREE.Math.RAD2DEG*Math.atan(a);
this.updateProjectionMatrix()},getFocalLength:function(){var a=Math.tan(.5*THREE.Math.DEG2RAD*this.fov);return.5*this.getFilmHeight()/a},getEffectiveFOV:function(){return 2*THREE.Math.RAD2DEG*Math.atan(Math.tan(.5*THREE.Math.DEG2RAD*this.fov)/this.zoom)},getFilmWidth:function(){return this.filmGauge*Math.min(this.aspect,1)},getFilmHeight:function(){return this.filmGauge/Math.max(this.aspect,1)},setViewOffset:function(a,b,c,d,e,f){this.aspect=a/b;this.view={fullWidth:a,fullHeight:b,offsetX:c,offsetY:d,
width:e,height:f};this.updateProjectionMatrix()},clearViewOffset:function(){this.view=null;this.updateProjectionMatrix()},updateProjectionMatrix:function(){var a=this.near,b=a*Math.tan(.5*THREE.Math.DEG2RAD*this.fov)/this.zoom,c=2*b,d=this.aspect*c,e=-.5*d,f=this.view;if(null!==f)var g=f.fullWidth,h=f.fullHeight,e=e+f.offsetX*d/g,b=b-f.offsetY*c/h,d=f.width/g*d,c=f.height/h*c;f=this.filmOffset;0!==f&&(e+=a*f/this.getFilmWidth());this.projectionMatrix.makeFrustum(e,e+d,b-c,b,a,this.far)},toJSON:function(a){a=
THREE.Object3D.prototype.toJSON.call(this,a);a.object.fov=this.fov;a.object.zoom=this.zoom;a.object.near=this.near;a.object.far=this.far;a.object.focus=this.focus;a.object.aspect=this.aspect;null!==this.view&&(a.object.view=Object.assign({},this.view));a.object.filmGauge=this.filmGauge;a.object.filmOffset=this.filmOffset;return a}});
THREE.StereoCamera=function(){this.type="StereoCamera";this.aspect=1;this.cameraL=new THREE.PerspectiveCamera;this.cameraL.layers.enable(1);this.cameraL.matrixAutoUpdate=!1;this.cameraR=new THREE.PerspectiveCamera;this.cameraR.layers.enable(2);this.cameraR.matrixAutoUpdate=!1};
Object.assign(THREE.StereoCamera.prototype,{update:function(){var a,b,c,d,e,f=new THREE.Matrix4,g=new THREE.Matrix4;return function(h){if(a!==h.focus||b!==h.fov||c!==h.aspect*this.aspect||d!==h.near||e!==h.far){a=h.focus;b=h.fov;c=h.aspect*this.aspect;d=h.near;e=h.far;var k=h.projectionMatrix.clone(),l=.032*d/a,m=d*Math.tan(THREE.Math.DEG2RAD*b*.5),p,n;g.elements[12]=-.032;f.elements[12]=.032;p=-m*c+l;n=m*c+l;k.elements[0]=2*d/(n-p);k.elements[8]=(n+p)/(n-p);this.cameraL.projectionMatrix.copy(k);
p=-m*c-l;n=m*c-l;k.elements[0]=2*d/(n-p);k.elements[8]=(n+p)/(n-p);this.cameraR.projectionMatrix.copy(k)}this.cameraL.matrixWorld.copy(h.matrixWorld).multiply(g);this.cameraR.matrixWorld.copy(h.matrixWorld).multiply(f)}}()});THREE.Light=function(a,b){THREE.Object3D.call(this);this.type="Light";this.color=new THREE.Color(a);this.intensity=void 0!==b?b:1;this.receiveShadow=void 0};
THREE.Light.prototype=Object.assign(Object.create(THREE.Object3D.prototype),{constructor:THREE.Light,copy:function(a){THREE.Object3D.prototype.copy.call(this,a);this.color.copy(a.color);this.intensity=a.intensity;return this},toJSON:function(a){a=THREE.Object3D.prototype.toJSON.call(this,a);a.object.color=this.color.getHex();a.object.intensity=this.intensity;void 0!==this.groundColor&&(a.object.groundColor=this.groundColor.getHex());void 0!==this.distance&&(a.object.distance=this.distance);void 0!==
this.angle&&(a.object.angle=this.angle);void 0!==this.decay&&(a.object.decay=this.decay);void 0!==this.penumbra&&(a.object.penumbra=this.penumbra);return a}});THREE.LightShadow=function(a){this.camera=a;this.bias=0;this.radius=1;this.mapSize=new THREE.Vector2(512,512);this.map=null;this.matrix=new THREE.Matrix4};Object.assign(THREE.LightShadow.prototype,{copy:function(a){this.camera=a.camera.clone();this.bias=a.bias;this.radius=a.radius;this.mapSize.copy(a.mapSize);return this},clone:function(){return(new this.constructor).copy(this)}});
THREE.AmbientLight=function(a,b){THREE.Light.call(this,a,b);this.type="AmbientLight";this.castShadow=void 0};THREE.AmbientLight.prototype=Object.assign(Object.create(THREE.Light.prototype),{constructor:THREE.AmbientLight});THREE.DirectionalLight=function(a,b){THREE.Light.call(this,a,b);this.type="DirectionalLight";this.position.copy(THREE.Object3D.DefaultUp);this.updateMatrix();this.target=new THREE.Object3D;this.shadow=new THREE.DirectionalLightShadow};
THREE.DirectionalLight.prototype=Object.assign(Object.create(THREE.Light.prototype),{constructor:THREE.DirectionalLight,copy:function(a){THREE.Light.prototype.copy.call(this,a);this.target=a.target.clone();this.shadow=a.shadow.clone();return this}});THREE.DirectionalLightShadow=function(a){THREE.LightShadow.call(this,new THREE.OrthographicCamera(-5,5,5,-5,.5,500))};THREE.DirectionalLightShadow.prototype=Object.assign(Object.create(THREE.LightShadow.prototype),{constructor:THREE.DirectionalLightShadow});
THREE.HemisphereLight=function(a,b,c){THREE.Light.call(this,a,c);this.type="HemisphereLight";this.castShadow=void 0;this.position.copy(THREE.Object3D.DefaultUp);this.updateMatrix();this.groundColor=new THREE.Color(b)};THREE.HemisphereLight.prototype=Object.assign(Object.create(THREE.Light.prototype),{constructor:THREE.HemisphereLight,copy:function(a){THREE.Light.prototype.copy.call(this,a);this.groundColor.copy(a.groundColor);return this}});
THREE.PointLight=function(a,b,c,d){THREE.Light.call(this,a,b);this.type="PointLight";Object.defineProperty(this,"power",{get:function(){return 4*this.intensity*Math.PI},set:function(a){this.intensity=a/(4*Math.PI)}});this.distance=void 0!==c?c:0;this.decay=void 0!==d?d:1;this.shadow=new THREE.LightShadow(new THREE.PerspectiveCamera(90,1,.5,500))};
THREE.PointLight.prototype=Object.assign(Object.create(THREE.Light.prototype),{constructor:THREE.PointLight,copy:function(a){THREE.Light.prototype.copy.call(this,a);this.distance=a.distance;this.decay=a.decay;this.shadow=a.shadow.clone();return this}});
THREE.SpotLight=function(a,b,c,d,e,f){THREE.Light.call(this,a,b);this.type="SpotLight";this.position.copy(THREE.Object3D.DefaultUp);this.updateMatrix();this.target=new THREE.Object3D;Object.defineProperty(this,"power",{get:function(){return this.intensity*Math.PI},set:function(a){this.intensity=a/Math.PI}});this.distance=void 0!==c?c:0;this.angle=void 0!==d?d:Math.PI/3;this.penumbra=void 0!==e?e:0;this.decay=void 0!==f?f:1;this.shadow=new THREE.SpotLightShadow};
THREE.SpotLight.prototype=Object.assign(Object.create(THREE.Light.prototype),{constructor:THREE.SpotLight,copy:function(a){THREE.Light.prototype.copy.call(this,a);this.distance=a.distance;this.angle=a.angle;this.penumbra=a.penumbra;this.decay=a.decay;this.target=a.target.clone();this.shadow=a.shadow.clone();return this}});THREE.SpotLightShadow=function(){THREE.LightShadow.call(this,new THREE.PerspectiveCamera(50,1,.5,500))};
THREE.SpotLightShadow.prototype=Object.assign(Object.create(THREE.LightShadow.prototype),{constructor:THREE.SpotLightShadow,update:function(a){var b=2*THREE.Math.RAD2DEG*a.angle,c=this.mapSize.width/this.mapSize.height;a=a.distance||500;var d=this.camera;if(b!==d.fov||c!==d.aspect||a!==d.far)d.fov=b,d.aspect=c,d.far=a,d.updateProjectionMatrix()}});THREE.AudioLoader=function(a){this.manager=void 0!==a?a:THREE.DefaultLoadingManager};
Object.assign(THREE.AudioLoader.prototype,{load:function(a,b,c,d){var e=new THREE.XHRLoader(this.manager);e.setResponseType("arraybuffer");e.load(a,function(a){THREE.AudioContext.decodeAudioData(a,function(a){b(a)})},c,d)}});THREE.Cache={enabled:!1,files:{},add:function(a,b){!1!==this.enabled&&(this.files[a]=b)},get:function(a){if(!1!==this.enabled)return this.files[a]},remove:function(a){delete this.files[a]},clear:function(){this.files={}}};
THREE.Loader=function(){this.onLoadStart=function(){};this.onLoadProgress=function(){};this.onLoadComplete=function(){}};
THREE.Loader.prototype={constructor:THREE.Loader,crossOrigin:void 0,extractUrlBase:function(a){a=a.split("/");if(1===a.length)return"./";a.pop();return a.join("/")+"/"},initMaterials:function(a,b,c){for(var d=[],e=0;e<a.length;++e)d[e]=this.createMaterial(a[e],b,c);return d},createMaterial:function(){var a,b,c;return function(d,e,f){function g(a,c,d,g,k){a=e+a;var l=THREE.Loader.Handlers.get(a);null!==l?a=l.load(a):(b.setCrossOrigin(f),a=b.load(a));void 0!==c&&(a.repeat.fromArray(c),1!==c[0]&&(a.wrapS=
THREE.RepeatWrapping),1!==c[1]&&(a.wrapT=THREE.RepeatWrapping));void 0!==d&&a.offset.fromArray(d);void 0!==g&&("repeat"===g[0]&&(a.wrapS=THREE.RepeatWrapping),"mirror"===g[0]&&(a.wrapS=THREE.MirroredRepeatWrapping),"repeat"===g[1]&&(a.wrapT=THREE.RepeatWrapping),"mirror"===g[1]&&(a.wrapT=THREE.MirroredRepeatWrapping));void 0!==k&&(a.anisotropy=k);c=THREE.Math.generateUUID();h[c]=a;return c}void 0===a&&(a=new THREE.Color);void 0===b&&(b=new THREE.TextureLoader);void 0===c&&(c=new THREE.MaterialLoader);
var h={},k={uuid:THREE.Math.generateUUID(),type:"MeshLambertMaterial"},l;for(l in d){var m=d[l];switch(l){case "DbgColor":case "DbgIndex":case "opticalDensity":case "illumination":break;case "DbgName":k.name=m;break;case "blending":k.blending=THREE[m];break;case "colorAmbient":case "mapAmbient":console.warn("THREE.Loader.createMaterial:",l,"is no longer supported.");break;case "colorDiffuse":k.color=a.fromArray(m).getHex();break;case "colorSpecular":k.specular=a.fromArray(m).getHex();break;case "colorEmissive":k.emissive=
a.fromArray(m).getHex();break;case "specularCoef":k.shininess=m;break;case "shading":"basic"===m.toLowerCase()&&(k.type="MeshBasicMaterial");"phong"===m.toLowerCase()&&(k.type="MeshPhongMaterial");"standard"===m.toLowerCase()&&(k.type="MeshStandardMaterial");break;case "mapDiffuse":k.map=g(m,d.mapDiffuseRepeat,d.mapDiffuseOffset,d.mapDiffuseWrap,d.mapDiffuseAnisotropy);break;case "mapDiffuseRepeat":case "mapDiffuseOffset":case "mapDiffuseWrap":case "mapDiffuseAnisotropy":break;case "mapEmissive":k.emissiveMap=
g(m,d.mapEmissiveRepeat,d.mapEmissiveOffset,d.mapEmissiveWrap,d.mapEmissiveAnisotropy);break;case "mapEmissiveRepeat":case "mapEmissiveOffset":case "mapEmissiveWrap":case "mapEmissiveAnisotropy":break;case "mapLight":k.lightMap=g(m,d.mapLightRepeat,d.mapLightOffset,d.mapLightWrap,d.mapLightAnisotropy);break;case "mapLightRepeat":case "mapLightOffset":case "mapLightWrap":case "mapLightAnisotropy":break;case "mapAO":k.aoMap=g(m,d.mapAORepeat,d.mapAOOffset,d.mapAOWrap,d.mapAOAnisotropy);break;case "mapAORepeat":case "mapAOOffset":case "mapAOWrap":case "mapAOAnisotropy":break;
case "mapBump":k.bumpMap=g(m,d.mapBumpRepeat,d.mapBumpOffset,d.mapBumpWrap,d.mapBumpAnisotropy);break;case "mapBumpScale":k.bumpScale=m;break;case "mapBumpRepeat":case "mapBumpOffset":case "mapBumpWrap":case "mapBumpAnisotropy":break;case "mapNormal":k.normalMap=g(m,d.mapNormalRepeat,d.mapNormalOffset,d.mapNormalWrap,d.mapNormalAnisotropy);break;case "mapNormalFactor":k.normalScale=[m,m];break;case "mapNormalRepeat":case "mapNormalOffset":case "mapNormalWrap":case "mapNormalAnisotropy":break;case "mapSpecular":k.specularMap=
g(m,d.mapSpecularRepeat,d.mapSpecularOffset,d.mapSpecularWrap,d.mapSpecularAnisotropy);break;case "mapSpecularRepeat":case "mapSpecularOffset":case "mapSpecularWrap":case "mapSpecularAnisotropy":break;case "mapMetalness":k.metalnessMap=g(m,d.mapMetalnessRepeat,d.mapMetalnessOffset,d.mapMetalnessWrap,d.mapMetalnessAnisotropy);break;case "mapMetalnessRepeat":case "mapMetalnessOffset":case "mapMetalnessWrap":case "mapMetalnessAnisotropy":break;case "mapRoughness":k.roughnessMap=g(m,d.mapRoughnessRepeat,
d.mapRoughnessOffset,d.mapRoughnessWrap,d.mapRoughnessAnisotropy);break;case "mapRoughnessRepeat":case "mapRoughnessOffset":case "mapRoughnessWrap":case "mapRoughnessAnisotropy":break;case "mapAlpha":k.alphaMap=g(m,d.mapAlphaRepeat,d.mapAlphaOffset,d.mapAlphaWrap,d.mapAlphaAnisotropy);break;case "mapAlphaRepeat":case "mapAlphaOffset":case "mapAlphaWrap":case "mapAlphaAnisotropy":break;case "flipSided":k.side=THREE.BackSide;break;case "doubleSided":k.side=THREE.DoubleSide;break;case "transparency":console.warn("THREE.Loader.createMaterial: transparency has been renamed to opacity");
k.opacity=m;break;case "depthTest":case "depthWrite":case "colorWrite":case "opacity":case "reflectivity":case "transparent":case "visible":case "wireframe":k[l]=m;break;case "vertexColors":!0===m&&(k.vertexColors=THREE.VertexColors);"face"===m&&(k.vertexColors=THREE.FaceColors);break;default:console.error("THREE.Loader.createMaterial: Unsupported",l,m)}}"MeshBasicMaterial"===k.type&&delete k.emissive;"MeshPhongMaterial"!==k.type&&delete k.specular;1>k.opacity&&(k.transparent=!0);c.setTextures(h);
return c.parse(k)}}()};THREE.Loader.Handlers={handlers:[],add:function(a,b){this.handlers.push(a,b)},get:function(a){for(var b=this.handlers,c=0,d=b.length;c<d;c+=2){var e=b[c+1];if(b[c].test(a))return e}return null}};THREE.XHRLoader=function(a){this.manager=void 0!==a?a:THREE.DefaultLoadingManager};
Object.assign(THREE.XHRLoader.prototype,{load:function(a,b,c,d){void 0!==this.path&&(a=this.path+a);var e=this,f=THREE.Cache.get(a);if(void 0!==f)return e.manager.itemStart(a),setTimeout(function(){b&&b(f);e.manager.itemEnd(a)},0),f;var g=new XMLHttpRequest;g.overrideMimeType("text/plain");g.open("GET",a,!0);g.addEventListener("load",function(c){var f=c.target.response;THREE.Cache.add(a,f);200===this.status?(b&&b(f),e.manager.itemEnd(a)):0===this.status?(console.warn("THREE.XHRLoader: HTTP Status 0 received."),
b&&b(f),e.manager.itemEnd(a)):(d&&d(c),e.manager.itemError(a))},!1);void 0!==c&&g.addEventListener("progress",function(a){c(a)},!1);g.addEventListener("error",function(b){d&&d(b);e.manager.itemError(a)},!1);void 0!==this.responseType&&(g.responseType=this.responseType);void 0!==this.withCredentials&&(g.withCredentials=this.withCredentials);g.send(null);e.manager.itemStart(a);return g},setPath:function(a){this.path=a;return this},setResponseType:function(a){this.responseType=a;return this},setWithCredentials:function(a){this.withCredentials=
a;return this}});THREE.FontLoader=function(a){this.manager=void 0!==a?a:THREE.DefaultLoadingManager};Object.assign(THREE.FontLoader.prototype,{load:function(a,b,c,d){var e=this;(new THREE.XHRLoader(this.manager)).load(a,function(a){var c;try{c=JSON.parse(a)}catch(d){console.warn("THREE.FontLoader: typeface.js support is being deprecated. Use typeface.json instead."),c=JSON.parse(a.substring(65,a.length-2))}a=e.parse(c);b&&b(a)},c,d)},parse:function(a){return new THREE.Font(a)}});
THREE.ImageLoader=function(a){this.manager=void 0!==a?a:THREE.DefaultLoadingManager};
Object.assign(THREE.ImageLoader.prototype,{load:function(a,b,c,d){var e=this,f=document.createElementNS("http://www.w3.org/1999/xhtml","img");f.onload=function(){URL.revokeObjectURL(f.src);b&&b(f);e.manager.itemEnd(a)};if(0===a.indexOf("data:"))f.src=a;else{var g=new THREE.XHRLoader;g.setPath(this.path);g.setResponseType("blob");g.load(a,function(a){f.src=URL.createObjectURL(a)},c,d)}e.manager.itemStart(a);return f},setCrossOrigin:function(a){this.crossOrigin=a;return this},setPath:function(a){this.path=
a;return this}});THREE.JSONLoader=function(a){"boolean"===typeof a&&(console.warn("THREE.JSONLoader: showStatus parameter has been removed from constructor."),a=void 0);this.manager=void 0!==a?a:THREE.DefaultLoadingManager;this.withCredentials=!1};
Object.assign(THREE.JSONLoader.prototype,{load:function(a,b,c,d){var e=this,f=this.texturePath&&"string"===typeof this.texturePath?this.texturePath:THREE.Loader.prototype.extractUrlBase(a),g=new THREE.XHRLoader(this.manager);g.setWithCredentials(this.withCredentials);g.load(a,function(c){c=JSON.parse(c);var d=c.metadata;if(void 0!==d&&(d=d.type,void 0!==d)){if("object"===d.toLowerCase()){console.error("THREE.JSONLoader: "+a+" should be loaded with THREE.ObjectLoader instead.");return}if("scene"===
d.toLowerCase()){console.error("THREE.JSONLoader: "+a+" should be loaded with THREE.SceneLoader instead.");return}}c=e.parse(c,f);b(c.geometry,c.materials)},c,d)},setTexturePath:function(a){this.texturePath=a},parse:function(a,b){var c=new THREE.Geometry,d=void 0!==a.scale?1/a.scale:1;(function(b){var d,g,h,k,l,m,p,n,q,r,s,v,t,u=a.faces;m=a.vertices;var D=a.normals,w=a.colors,I=0;if(void 0!==a.uvs){for(d=0;d<a.uvs.length;d++)a.uvs[d].length&&I++;for(d=0;d<I;d++)c.faceVertexUvs[d]=[]}k=0;for(l=m.length;k<
l;)d=new THREE.Vector3,d.x=m[k++]*b,d.y=m[k++]*b,d.z=m[k++]*b,c.vertices.push(d);k=0;for(l=u.length;k<l;)if(b=u[k++],q=b&1,h=b&2,d=b&8,p=b&16,r=b&32,m=b&64,b&=128,q){q=new THREE.Face3;q.a=u[k];q.b=u[k+1];q.c=u[k+3];s=new THREE.Face3;s.a=u[k+1];s.b=u[k+2];s.c=u[k+3];k+=4;h&&(h=u[k++],q.materialIndex=h,s.materialIndex=h);h=c.faces.length;if(d)for(d=0;d<I;d++)for(v=a.uvs[d],c.faceVertexUvs[d][h]=[],c.faceVertexUvs[d][h+1]=[],g=0;4>g;g++)n=u[k++],t=v[2*n],n=v[2*n+1],t=new THREE.Vector2(t,n),2!==g&&c.faceVertexUvs[d][h].push(t),
0!==g&&c.faceVertexUvs[d][h+1].push(t);p&&(p=3*u[k++],q.normal.set(D[p++],D[p++],D[p]),s.normal.copy(q.normal));if(r)for(d=0;4>d;d++)p=3*u[k++],r=new THREE.Vector3(D[p++],D[p++],D[p]),2!==d&&q.vertexNormals.push(r),0!==d&&s.vertexNormals.push(r);m&&(m=u[k++],m=w[m],q.color.setHex(m),s.color.setHex(m));if(b)for(d=0;4>d;d++)m=u[k++],m=w[m],2!==d&&q.vertexColors.push(new THREE.Color(m)),0!==d&&s.vertexColors.push(new THREE.Color(m));c.faces.push(q);c.faces.push(s)}else{q=new THREE.Face3;q.a=u[k++];q.b=
u[k++];q.c=u[k++];h&&(h=u[k++],q.materialIndex=h);h=c.faces.length;if(d)for(d=0;d<I;d++)for(v=a.uvs[d],c.faceVertexUvs[d][h]=[],g=0;3>g;g++)n=u[k++],t=v[2*n],n=v[2*n+1],t=new THREE.Vector2(t,n),c.faceVertexUvs[d][h].push(t);p&&(p=3*u[k++],q.normal.set(D[p++],D[p++],D[p]));if(r)for(d=0;3>d;d++)p=3*u[k++],r=new THREE.Vector3(D[p++],D[p++],D[p]),q.vertexNormals.push(r);m&&(m=u[k++],q.color.setHex(w[m]));if(b)for(d=0;3>d;d++)m=u[k++],q.vertexColors.push(new THREE.Color(w[m]));c.faces.push(q)}})(d);(function(){var b=
void 0!==a.influencesPerVertex?a.influencesPerVertex:2;if(a.skinWeights)for(var d=0,g=a.skinWeights.length;d<g;d+=b)c.skinWeights.push(new THREE.Vector4(a.skinWeights[d],1<b?a.skinWeights[d+1]:0,2<b?a.skinWeights[d+2]:0,3<b?a.skinWeights[d+3]:0));if(a.skinIndices)for(d=0,g=a.skinIndices.length;d<g;d+=b)c.skinIndices.push(new THREE.Vector4(a.skinIndices[d],1<b?a.skinIndices[d+1]:0,2<b?a.skinIndices[d+2]:0,3<b?a.skinIndices[d+3]:0));c.bones=a.bones;c.bones&&0<c.bones.length&&(c.skinWeights.length!==
c.skinIndices.length||c.skinIndices.length!==c.vertices.length)&&console.warn("When skinning, number of vertices ("+c.vertices.length+"), skinIndices ("+c.skinIndices.length+"), and skinWeights ("+c.skinWeights.length+") should match.")})();(function(b){if(void 0!==a.morphTargets)for(var d=0,g=a.morphTargets.length;d<g;d++){c.morphTargets[d]={};c.morphTargets[d].name=a.morphTargets[d].name;c.morphTargets[d].vertices=[];for(var h=c.morphTargets[d].vertices,k=a.morphTargets[d].vertices,l=0,m=k.length;l<
m;l+=3){var p=new THREE.Vector3;p.x=k[l]*b;p.y=k[l+1]*b;p.z=k[l+2]*b;h.push(p)}}if(void 0!==a.morphColors&&0<a.morphColors.length)for(console.warn('THREE.JSONLoader: "morphColors" no longer supported. Using them as face colors.'),b=c.faces,h=a.morphColors[0].colors,d=0,g=b.length;d<g;d++)b[d].color.fromArray(h,3*d)})(d);(function(){var b=[],d=[];void 0!==a.animation&&d.push(a.animation);void 0!==a.animations&&(a.animations.length?d=d.concat(a.animations):d.push(a.animations));for(var g=0;g<d.length;g++){var h=
THREE.AnimationClip.parseAnimation(d[g],c.bones);h&&b.push(h)}c.morphTargets&&(d=THREE.AnimationClip.CreateClipsFromMorphTargetSequences(c.morphTargets,10),b=b.concat(d));0<b.length&&(c.animations=b)})();c.computeFaceNormals();c.computeBoundingSphere();if(void 0===a.materials||0===a.materials.length)return{geometry:c};d=THREE.Loader.prototype.initMaterials(a.materials,b,this.crossOrigin);return{geometry:c,materials:d}}});
THREE.LoadingManager=function(a,b,c){var d=this,e=!1,f=0,g=0;this.onStart=void 0;this.onLoad=a;this.onProgress=b;this.onError=c;this.itemStart=function(a){g++;if(!1===e&&void 0!==d.onStart)d.onStart(a,f,g);e=!0};this.itemEnd=function(a){f++;if(void 0!==d.onProgress)d.onProgress(a,f,g);if(f===g&&(e=!1,void 0!==d.onLoad))d.onLoad()};this.itemError=function(a){if(void 0!==d.onError)d.onError(a)}};THREE.DefaultLoadingManager=new THREE.LoadingManager;
THREE.BufferGeometryLoader=function(a){this.manager=void 0!==a?a:THREE.DefaultLoadingManager};
Object.assign(THREE.BufferGeometryLoader.prototype,{load:function(a,b,c,d){var e=this;(new THREE.XHRLoader(e.manager)).load(a,function(a){b(e.parse(JSON.parse(a)))},c,d)},parse:function(a){var b=new THREE.BufferGeometry,c=a.data.index,d={Int8Array:Int8Array,Uint8Array:Uint8Array,Uint8ClampedArray:Uint8ClampedArray,Int16Array:Int16Array,Uint16Array:Uint16Array,Int32Array:Int32Array,Uint32Array:Uint32Array,Float32Array:Float32Array,Float64Array:Float64Array};void 0!==c&&(c=new d[c.type](c.array),b.setIndex(new THREE.BufferAttribute(c,
1)));var e=a.data.attributes,f;for(f in e){var g=e[f],c=new d[g.type](g.array);b.addAttribute(f,new THREE.BufferAttribute(c,g.itemSize,g.normalized))}d=a.data.groups||a.data.drawcalls||a.data.offsets;if(void 0!==d)for(f=0,c=d.length;f!==c;++f)e=d[f],b.addGroup(e.start,e.count,e.materialIndex);a=a.data.boundingSphere;void 0!==a&&(d=new THREE.Vector3,void 0!==a.center&&d.fromArray(a.center),b.boundingSphere=new THREE.Sphere(d,a.radius));return b}});
THREE.MaterialLoader=function(a){this.manager=void 0!==a?a:THREE.DefaultLoadingManager;this.textures={}};
Object.assign(THREE.MaterialLoader.prototype,{load:function(a,b,c,d){var e=this;(new THREE.XHRLoader(e.manager)).load(a,function(a){b(e.parse(JSON.parse(a)))},c,d)},setTextures:function(a){this.textures=a},getTexture:function(a){var b=this.textures;void 0===b[a]&&console.warn("THREE.MaterialLoader: Undefined texture",a);return b[a]},parse:function(a){var b=new THREE[a.type];void 0!==a.uuid&&(b.uuid=a.uuid);void 0!==a.name&&(b.name=a.name);void 0!==a.color&&b.color.setHex(a.color);void 0!==a.roughness&&
(b.roughness=a.roughness);void 0!==a.metalness&&(b.metalness=a.metalness);void 0!==a.emissive&&b.emissive.setHex(a.emissive);void 0!==a.specular&&b.specular.setHex(a.specular);void 0!==a.shininess&&(b.shininess=a.shininess);void 0!==a.uniforms&&(b.uniforms=a.uniforms);void 0!==a.vertexShader&&(b.vertexShader=a.vertexShader);void 0!==a.fragmentShader&&(b.fragmentShader=a.fragmentShader);void 0!==a.vertexColors&&(b.vertexColors=a.vertexColors);void 0!==a.shading&&(b.shading=a.shading);void 0!==a.blending&&
(b.blending=a.blending);void 0!==a.side&&(b.side=a.side);void 0!==a.opacity&&(b.opacity=a.opacity);void 0!==a.transparent&&(b.transparent=a.transparent);void 0!==a.alphaTest&&(b.alphaTest=a.alphaTest);void 0!==a.depthTest&&(b.depthTest=a.depthTest);void 0!==a.depthWrite&&(b.depthWrite=a.depthWrite);void 0!==a.colorWrite&&(b.colorWrite=a.colorWrite);void 0!==a.wireframe&&(b.wireframe=a.wireframe);void 0!==a.wireframeLinewidth&&(b.wireframeLinewidth=a.wireframeLinewidth);void 0!==a.size&&(b.size=a.size);
void 0!==a.sizeAttenuation&&(b.sizeAttenuation=a.sizeAttenuation);void 0!==a.map&&(b.map=this.getTexture(a.map));void 0!==a.alphaMap&&(b.alphaMap=this.getTexture(a.alphaMap),b.transparent=!0);void 0!==a.bumpMap&&(b.bumpMap=this.getTexture(a.bumpMap));void 0!==a.bumpScale&&(b.bumpScale=a.bumpScale);void 0!==a.normalMap&&(b.normalMap=this.getTexture(a.normalMap));if(void 0!==a.normalScale){var c=a.normalScale;!1===Array.isArray(c)&&(c=[c,c]);b.normalScale=(new THREE.Vector2).fromArray(c)}void 0!==a.displacementMap&&
(b.displacementMap=this.getTexture(a.displacementMap));void 0!==a.displacementScale&&(b.displacementScale=a.displacementScale);void 0!==a.displacementBias&&(b.displacementBias=a.displacementBias);void 0!==a.roughnessMap&&(b.roughnessMap=this.getTexture(a.roughnessMap));void 0!==a.metalnessMap&&(b.metalnessMap=this.getTexture(a.metalnessMap));void 0!==a.emissiveMap&&(b.emissiveMap=this.getTexture(a.emissiveMap));void 0!==a.emissiveIntensity&&(b.emissiveIntensity=a.emissiveIntensity);void 0!==a.specularMap&&
(b.specularMap=this.getTexture(a.specularMap));void 0!==a.envMap&&(b.envMap=this.getTexture(a.envMap),b.combine=THREE.MultiplyOperation);void 0!==a.reflectivity&&(b.reflectivity=a.reflectivity);void 0!==a.lightMap&&(b.lightMap=this.getTexture(a.lightMap));void 0!==a.lightMapIntensity&&(b.lightMapIntensity=a.lightMapIntensity);void 0!==a.aoMap&&(b.aoMap=this.getTexture(a.aoMap));void 0!==a.aoMapIntensity&&(b.aoMapIntensity=a.aoMapIntensity);if(void 0!==a.materials)for(var c=0,d=a.materials.length;c<
d;c++)b.materials.push(this.parse(a.materials[c]));return b}});THREE.ObjectLoader=function(a){this.manager=void 0!==a?a:THREE.DefaultLoadingManager;this.texturePath=""};
Object.assign(THREE.ObjectLoader.prototype,{load:function(a,b,c,d){""===this.texturePath&&(this.texturePath=a.substring(0,a.lastIndexOf("/")+1));var e=this;(new THREE.XHRLoader(e.manager)).load(a,function(a){e.parse(JSON.parse(a),b)},c,d)},setTexturePath:function(a){this.texturePath=a},setCrossOrigin:function(a){this.crossOrigin=a},parse:function(a,b){var c=this.parseGeometries(a.geometries),d=this.parseImages(a.images,function(){void 0!==b&&b(e)}),d=this.parseTextures(a.textures,d),d=this.parseMaterials(a.materials,
d),e=this.parseObject(a.object,c,d);a.animations&&(e.animations=this.parseAnimations(a.animations));void 0!==a.images&&0!==a.images.length||void 0===b||b(e);return e},parseGeometries:function(a){var b={};if(void 0!==a)for(var c=new THREE.JSONLoader,d=new THREE.BufferGeometryLoader,e=0,f=a.length;e<f;e++){var g,h=a[e];switch(h.type){case "PlaneGeometry":case "PlaneBufferGeometry":g=new THREE[h.type](h.width,h.height,h.widthSegments,h.heightSegments);break;case "BoxGeometry":case "BoxBufferGeometry":case "CubeGeometry":g=
new THREE[h.type](h.width,h.height,h.depth,h.widthSegments,h.heightSegments,h.depthSegments);break;case "CircleGeometry":case "CircleBufferGeometry":g=new THREE[h.type](h.radius,h.segments,h.thetaStart,h.thetaLength);break;case "CylinderGeometry":case "CylinderBufferGeometry":g=new THREE[h.type](h.radiusTop,h.radiusBottom,h.height,h.radialSegments,h.heightSegments,h.openEnded,h.thetaStart,h.thetaLength);break;case "ConeGeometry":case "ConeBufferGeometry":g=new THREE[h.type](h.radius,h.height,h.radialSegments,
h.heightSegments,h.openEnded,h.thetaStart,h.thetaLength);break;case "SphereGeometry":case "SphereBufferGeometry":g=new THREE[h.type](h.radius,h.widthSegments,h.heightSegments,h.phiStart,h.phiLength,h.thetaStart,h.thetaLength);break;case "DodecahedronGeometry":case "IcosahedronGeometry":case "OctahedronGeometry":case "TetrahedronGeometry":g=new THREE[h.type](h.radius,h.detail);break;case "RingGeometry":case "RingBufferGeometry":g=new THREE[h.type](h.innerRadius,h.outerRadius,h.thetaSegments,h.phiSegments,
h.thetaStart,h.thetaLength);break;case "TorusGeometry":case "TorusBufferGeometry":g=new THREE[h.type](h.radius,h.tube,h.radialSegments,h.tubularSegments,h.arc);break;case "TorusKnotGeometry":case "TorusKnotBufferGeometry":g=new THREE[h.type](h.radius,h.tube,h.tubularSegments,h.radialSegments,h.p,h.q);break;case "LatheGeometry":case "LatheBufferGeometry":g=new THREE[h.type](h.points,h.segments,h.phiStart,h.phiLength);break;case "BufferGeometry":g=d.parse(h);break;case "Geometry":g=c.parse(h.data,this.texturePath).geometry;
break;default:console.warn('THREE.ObjectLoader: Unsupported geometry type "'+h.type+'"');continue}g.uuid=h.uuid;void 0!==h.name&&(g.name=h.name);b[h.uuid]=g}return b},parseMaterials:function(a,b){var c={};if(void 0!==a){var d=new THREE.MaterialLoader;d.setTextures(b);for(var e=0,f=a.length;e<f;e++){var g=d.parse(a[e]);c[g.uuid]=g}}return c},parseAnimations:function(a){for(var b=[],c=0;c<a.length;c++){var d=THREE.AnimationClip.parse(a[c]);b.push(d)}return b},parseImages:function(a,b){function c(a){d.manager.itemStart(a);
return g.load(a,function(){d.manager.itemEnd(a)})}var d=this,e={};if(void 0!==a&&0<a.length){var f=new THREE.LoadingManager(b),g=new THREE.ImageLoader(f);g.setCrossOrigin(this.crossOrigin);for(var f=0,h=a.length;f<h;f++){var k=a[f],l=/^(\/\/)|([a-z]+:(\/\/)?)/i.test(k.url)?k.url:d.texturePath+k.url;e[k.uuid]=c(l)}}return e},parseTextures:function(a,b){function c(a){if("number"===typeof a)return a;console.warn("THREE.ObjectLoader.parseTexture: Constant should be in numeric form.",a);return THREE[a]}
var d={};if(void 0!==a)for(var e=0,f=a.length;e<f;e++){var g=a[e];void 0===g.image&&console.warn('THREE.ObjectLoader: No "image" specified for',g.uuid);void 0===b[g.image]&&console.warn("THREE.ObjectLoader: Undefined image",g.image);var h=new THREE.Texture(b[g.image]);h.needsUpdate=!0;h.uuid=g.uuid;void 0!==g.name&&(h.name=g.name);void 0!==g.mapping&&(h.mapping=c(g.mapping));void 0!==g.offset&&h.offset.fromArray(g.offset);void 0!==g.repeat&&h.repeat.fromArray(g.repeat);void 0!==g.wrap&&(h.wrapS=c(g.wrap[0]),
h.wrapT=c(g.wrap[1]));void 0!==g.minFilter&&(h.minFilter=c(g.minFilter));void 0!==g.magFilter&&(h.magFilter=c(g.magFilter));void 0!==g.anisotropy&&(h.anisotropy=g.anisotropy);void 0!==g.flipY&&(h.flipY=g.flipY);d[g.uuid]=h}return d},parseObject:function(){var a=new THREE.Matrix4;return function(b,c,d){function e(a){void 0===c[a]&&console.warn("THREE.ObjectLoader: Undefined geometry",a);return c[a]}function f(a){if(void 0!==a)return void 0===d[a]&&console.warn("THREE.ObjectLoader: Undefined material",
a),d[a]}var g;switch(b.type){case "Scene":g=new THREE.Scene;break;case "PerspectiveCamera":g=new THREE.PerspectiveCamera(b.fov,b.aspect,b.near,b.far);void 0!==b.focus&&(g.focus=b.focus);void 0!==b.zoom&&(g.zoom=b.zoom);void 0!==b.filmGauge&&(g.filmGauge=b.filmGauge);void 0!==b.filmOffset&&(g.filmOffset=b.filmOffset);void 0!==b.view&&(g.view=Object.assign({},b.view));break;case "OrthographicCamera":g=new THREE.OrthographicCamera(b.left,b.right,b.top,b.bottom,b.near,b.far);break;case "AmbientLight":g=
new THREE.AmbientLight(b.color,b.intensity);break;case "DirectionalLight":g=new THREE.DirectionalLight(b.color,b.intensity);break;case "PointLight":g=new THREE.PointLight(b.color,b.intensity,b.distance,b.decay);break;case "SpotLight":g=new THREE.SpotLight(b.color,b.intensity,b.distance,b.angle,b.penumbra,b.decay);break;case "HemisphereLight":g=new THREE.HemisphereLight(b.color,b.groundColor,b.intensity);break;case "Mesh":g=e(b.geometry);var h=f(b.material);g=g.bones&&0<g.bones.length?new THREE.SkinnedMesh(g,
h):new THREE.Mesh(g,h);break;case "LOD":g=new THREE.LOD;break;case "Line":g=new THREE.Line(e(b.geometry),f(b.material),b.mode);break;case "PointCloud":case "Points":g=new THREE.Points(e(b.geometry),f(b.material));break;case "Sprite":g=new THREE.Sprite(f(b.material));break;case "Group":g=new THREE.Group;break;default:g=new THREE.Object3D}g.uuid=b.uuid;void 0!==b.name&&(g.name=b.name);void 0!==b.matrix?(a.fromArray(b.matrix),a.decompose(g.position,g.quaternion,g.scale)):(void 0!==b.position&&g.position.fromArray(b.position),
void 0!==b.rotation&&g.rotation.fromArray(b.rotation),void 0!==b.scale&&g.scale.fromArray(b.scale));void 0!==b.castShadow&&(g.castShadow=b.castShadow);void 0!==b.receiveShadow&&(g.receiveShadow=b.receiveShadow);void 0!==b.visible&&(g.visible=b.visible);void 0!==b.userData&&(g.userData=b.userData);if(void 0!==b.children)for(var k in b.children)g.add(this.parseObject(b.children[k],c,d));if("LOD"===b.type)for(b=b.levels,h=0;h<b.length;h++){var l=b[h];k=g.getObjectByProperty("uuid",l.object);void 0!==
k&&g.addLevel(k,l.distance)}return g}}()});THREE.TextureLoader=function(a){this.manager=void 0!==a?a:THREE.DefaultLoadingManager};
Object.assign(THREE.TextureLoader.prototype,{load:function(a,b,c,d){var e=new THREE.Texture,f=new THREE.ImageLoader(this.manager);f.setCrossOrigin(this.crossOrigin);f.setPath(this.path);f.load(a,function(c){var d=0<a.search(/\.(jpg|jpeg)$/)||0===a.search(/^data\:image\/jpeg/);e.format=d?THREE.RGBFormat:THREE.RGBAFormat;e.image=c;e.needsUpdate=!0;void 0!==b&&b(e)},c,d);return e},setCrossOrigin:function(a){this.crossOrigin=a;return this},setPath:function(a){this.path=a;return this}});
THREE.CubeTextureLoader=function(a){this.manager=void 0!==a?a:THREE.DefaultLoadingManager};
Object.assign(THREE.CubeTextureLoader.prototype,{load:function(a,b,c,d){function e(c){g.load(a[c],function(a){f.images[c]=a;h++;6===h&&(f.needsUpdate=!0,b&&b(f))},void 0,d)}var f=new THREE.CubeTexture,g=new THREE.ImageLoader(this.manager);g.setCrossOrigin(this.crossOrigin);g.setPath(this.path);var h=0;for(c=0;c<a.length;++c)e(c);return f},setCrossOrigin:function(a){this.crossOrigin=a;return this},setPath:function(a){this.path=a;return this}});
THREE.DataTextureLoader=THREE.BinaryTextureLoader=function(a){this.manager=void 0!==a?a:THREE.DefaultLoadingManager;this._parser=null};
Object.assign(THREE.BinaryTextureLoader.prototype,{load:function(a,b,c,d){var e=this,f=new THREE.DataTexture,g=new THREE.XHRLoader(this.manager);g.setResponseType("arraybuffer");g.load(a,function(a){if(a=e._parser(a))void 0!==a.image?f.image=a.image:void 0!==a.data&&(f.image.width=a.width,f.image.height=a.height,f.image.data=a.data),f.wrapS=void 0!==a.wrapS?a.wrapS:THREE.ClampToEdgeWrapping,f.wrapT=void 0!==a.wrapT?a.wrapT:THREE.ClampToEdgeWrapping,f.magFilter=void 0!==a.magFilter?a.magFilter:THREE.LinearFilter,
f.minFilter=void 0!==a.minFilter?a.minFilter:THREE.LinearMipMapLinearFilter,f.anisotropy=void 0!==a.anisotropy?a.anisotropy:1,void 0!==a.format&&(f.format=a.format),void 0!==a.type&&(f.type=a.type),void 0!==a.mipmaps&&(f.mipmaps=a.mipmaps),1===a.mipmapCount&&(f.minFilter=THREE.LinearFilter),f.needsUpdate=!0,b&&b(f,a)},c,d);return f}});THREE.CompressedTextureLoader=function(a){this.manager=void 0!==a?a:THREE.DefaultLoadingManager;this._parser=null};
Object.assign(THREE.CompressedTextureLoader.prototype,{load:function(a,b,c,d){function e(e){k.load(a[e],function(a){a=f._parser(a,!0);g[e]={width:a.width,height:a.height,format:a.format,mipmaps:a.mipmaps};l+=1;6===l&&(1===a.mipmapCount&&(h.minFilter=THREE.LinearFilter),h.format=a.format,h.needsUpdate=!0,b&&b(h))},c,d)}var f=this,g=[],h=new THREE.CompressedTexture;h.image=g;var k=new THREE.XHRLoader(this.manager);k.setPath(this.path);k.setResponseType("arraybuffer");if(Array.isArray(a))for(var l=0,
m=0,p=a.length;m<p;++m)e(m);else k.load(a,function(a){a=f._parser(a,!0);if(a.isCubemap)for(var c=a.mipmaps.length/a.mipmapCount,d=0;d<c;d++){g[d]={mipmaps:[]};for(var e=0;e<a.mipmapCount;e++)g[d].mipmaps.push(a.mipmaps[d*a.mipmapCount+e]),g[d].format=a.format,g[d].width=a.width,g[d].height=a.height}else h.image.width=a.width,h.image.height=a.height,h.mipmaps=a.mipmaps;1===a.mipmapCount&&(h.minFilter=THREE.LinearFilter);h.format=a.format;h.needsUpdate=!0;b&&b(h)},c,d);return h},setPath:function(a){this.path=
a;return this}});
THREE.Material=function(){Object.defineProperty(this,"id",{value:THREE.MaterialIdCount++});this.uuid=THREE.Math.generateUUID();this.name="";this.type="Material";this.lights=this.fog=!0;this.blending=THREE.NormalBlending;this.side=THREE.FrontSide;this.shading=THREE.SmoothShading;this.vertexColors=THREE.NoColors;this.opacity=1;this.transparent=!1;this.blendSrc=THREE.SrcAlphaFactor;this.blendDst=THREE.OneMinusSrcAlphaFactor;this.blendEquation=THREE.AddEquation;this.blendEquationAlpha=this.blendDstAlpha=
this.blendSrcAlpha=null;this.depthFunc=THREE.LessEqualDepth;this.depthWrite=this.depthTest=!0;this.clippingPlanes=null;this.clipShadows=!1;this.colorWrite=!0;this.precision=null;this.polygonOffset=!1;this.alphaTest=this.polygonOffsetUnits=this.polygonOffsetFactor=0;this.premultipliedAlpha=!1;this.overdraw=0;this._needsUpdate=this.visible=!0};
THREE.Material.prototype={constructor:THREE.Material,get needsUpdate(){return this._needsUpdate},set needsUpdate(a){!0===a&&this.update();this._needsUpdate=a},setValues:function(a){if(void 0!==a)for(var b in a){var c=a[b];if(void 0===c)console.warn("THREE.Material: '"+b+"' parameter is undefined.");else{var d=this[b];void 0===d?console.warn("THREE."+this.type+": '"+b+"' is not a property of this material."):d instanceof THREE.Color?d.set(c):d instanceof THREE.Vector3&&c instanceof THREE.Vector3?d.copy(c):
this[b]="overdraw"===b?Number(c):c}}},toJSON:function(a){function b(a){var b=[],c;for(c in a){var d=a[c];delete d.metadata;b.push(d)}return b}var c=void 0===a;c&&(a={textures:{},images:{}});var d={metadata:{version:4.4,type:"Material",generator:"Material.toJSON"}};d.uuid=this.uuid;d.type=this.type;""!==this.name&&(d.name=this.name);this.color instanceof THREE.Color&&(d.color=this.color.getHex());void 0!==this.roughness&&(d.roughness=this.roughness);void 0!==this.metalness&&(d.metalness=this.metalness);
this.emissive instanceof THREE.Color&&(d.emissive=this.emissive.getHex());this.specular instanceof THREE.Color&&(d.specular=this.specular.getHex());void 0!==this.shininess&&(d.shininess=this.shininess);this.map instanceof THREE.Texture&&(d.map=this.map.toJSON(a).uuid);this.alphaMap instanceof THREE.Texture&&(d.alphaMap=this.alphaMap.toJSON(a).uuid);this.lightMap instanceof THREE.Texture&&(d.lightMap=this.lightMap.toJSON(a).uuid);this.bumpMap instanceof THREE.Texture&&(d.bumpMap=this.bumpMap.toJSON(a).uuid,
d.bumpScale=this.bumpScale);this.normalMap instanceof THREE.Texture&&(d.normalMap=this.normalMap.toJSON(a).uuid,d.normalScale=this.normalScale.toArray());this.displacementMap instanceof THREE.Texture&&(d.displacementMap=this.displacementMap.toJSON(a).uuid,d.displacementScale=this.displacementScale,d.displacementBias=this.displacementBias);this.roughnessMap instanceof THREE.Texture&&(d.roughnessMap=this.roughnessMap.toJSON(a).uuid);this.metalnessMap instanceof THREE.Texture&&(d.metalnessMap=this.metalnessMap.toJSON(a).uuid);
this.emissiveMap instanceof THREE.Texture&&(d.emissiveMap=this.emissiveMap.toJSON(a).uuid);this.specularMap instanceof THREE.Texture&&(d.specularMap=this.specularMap.toJSON(a).uuid);this.envMap instanceof THREE.Texture&&(d.envMap=this.envMap.toJSON(a).uuid,d.reflectivity=this.reflectivity);void 0!==this.size&&(d.size=this.size);void 0!==this.sizeAttenuation&&(d.sizeAttenuation=this.sizeAttenuation);this.blending!==THREE.NormalBlending&&(d.blending=this.blending);this.shading!==THREE.SmoothShading&&
(d.shading=this.shading);this.side!==THREE.FrontSide&&(d.side=this.side);this.vertexColors!==THREE.NoColors&&(d.vertexColors=this.vertexColors);1>this.opacity&&(d.opacity=this.opacity);!0===this.transparent&&(d.transparent=this.transparent);0<this.alphaTest&&(d.alphaTest=this.alphaTest);!0===this.premultipliedAlpha&&(d.premultipliedAlpha=this.premultipliedAlpha);!0===this.wireframe&&(d.wireframe=this.wireframe);1<this.wireframeLinewidth&&(d.wireframeLinewidth=this.wireframeLinewidth);c&&(c=b(a.textures),
a=b(a.images),0<c.length&&(d.textures=c),0<a.length&&(d.images=a));return d},clone:function(){return(new this.constructor).copy(this)},copy:function(a){this.name=a.name;this.fog=a.fog;this.lights=a.lights;this.blending=a.blending;this.side=a.side;this.shading=a.shading;this.vertexColors=a.vertexColors;this.opacity=a.opacity;this.transparent=a.transparent;this.blendSrc=a.blendSrc;this.blendDst=a.blendDst;this.blendEquation=a.blendEquation;this.blendSrcAlpha=a.blendSrcAlpha;this.blendDstAlpha=a.blendDstAlpha;
this.blendEquationAlpha=a.blendEquationAlpha;this.depthFunc=a.depthFunc;this.depthTest=a.depthTest;this.depthWrite=a.depthWrite;this.colorWrite=a.colorWrite;this.precision=a.precision;this.polygonOffset=a.polygonOffset;this.polygonOffsetFactor=a.polygonOffsetFactor;this.polygonOffsetUnits=a.polygonOffsetUnits;this.alphaTest=a.alphaTest;this.premultipliedAlpha=a.premultipliedAlpha;this.overdraw=a.overdraw;this.visible=a.visible;this.clipShadows=a.clipShadows;a=a.clippingPlanes;var b=null;if(null!==
a)for(var c=a.length,b=Array(c),d=0;d!==c;++d)b[d]=a[d].clone();this.clippingPlanes=b;return this},update:function(){this.dispatchEvent({type:"update"})},dispose:function(){this.dispatchEvent({type:"dispose"})}};Object.assign(THREE.Material.prototype,THREE.EventDispatcher.prototype);THREE.MaterialIdCount=0;
THREE.LineBasicMaterial=function(a){THREE.Material.call(this);this.type="LineBasicMaterial";this.color=new THREE.Color(16777215);this.linewidth=1;this.linejoin=this.linecap="round";this.lights=!1;this.setValues(a)};THREE.LineBasicMaterial.prototype=Object.create(THREE.Material.prototype);THREE.LineBasicMaterial.prototype.constructor=THREE.LineBasicMaterial;
THREE.LineBasicMaterial.prototype.copy=function(a){THREE.Material.prototype.copy.call(this,a);this.color.copy(a.color);this.linewidth=a.linewidth;this.linecap=a.linecap;this.linejoin=a.linejoin;return this};THREE.LineDashedMaterial=function(a){THREE.Material.call(this);this.type="LineDashedMaterial";this.color=new THREE.Color(16777215);this.scale=this.linewidth=1;this.dashSize=3;this.gapSize=1;this.lights=!1;this.setValues(a)};THREE.LineDashedMaterial.prototype=Object.create(THREE.Material.prototype);
THREE.LineDashedMaterial.prototype.constructor=THREE.LineDashedMaterial;THREE.LineDashedMaterial.prototype.copy=function(a){THREE.Material.prototype.copy.call(this,a);this.color.copy(a.color);this.linewidth=a.linewidth;this.scale=a.scale;this.dashSize=a.dashSize;this.gapSize=a.gapSize;return this};
THREE.MeshBasicMaterial=function(a){THREE.Material.call(this);this.type="MeshBasicMaterial";this.color=new THREE.Color(16777215);this.aoMap=this.map=null;this.aoMapIntensity=1;this.envMap=this.alphaMap=this.specularMap=null;this.combine=THREE.MultiplyOperation;this.reflectivity=1;this.refractionRatio=.98;this.wireframe=!1;this.wireframeLinewidth=1;this.wireframeLinejoin=this.wireframeLinecap="round";this.lights=this.morphTargets=this.skinning=!1;this.setValues(a)};
THREE.MeshBasicMaterial.prototype=Object.create(THREE.Material.prototype);THREE.MeshBasicMaterial.prototype.constructor=THREE.MeshBasicMaterial;
THREE.MeshBasicMaterial.prototype.copy=function(a){THREE.Material.prototype.copy.call(this,a);this.color.copy(a.color);this.map=a.map;this.aoMap=a.aoMap;this.aoMapIntensity=a.aoMapIntensity;this.specularMap=a.specularMap;this.alphaMap=a.alphaMap;this.envMap=a.envMap;this.combine=a.combine;this.reflectivity=a.reflectivity;this.refractionRatio=a.refractionRatio;this.wireframe=a.wireframe;this.wireframeLinewidth=a.wireframeLinewidth;this.wireframeLinecap=a.wireframeLinecap;this.wireframeLinejoin=a.wireframeLinejoin;
this.skinning=a.skinning;this.morphTargets=a.morphTargets;return this};THREE.MeshDepthMaterial=function(a){THREE.Material.call(this);this.type="MeshDepthMaterial";this.depthPacking=THREE.BasicDepthPacking;this.morphTargets=this.skinning=!1;this.displacementMap=this.alphaMap=this.map=null;this.displacementScale=1;this.displacementBias=0;this.wireframe=!1;this.wireframeLinewidth=1;this.lights=this.fog=!1;this.setValues(a)};THREE.MeshDepthMaterial.prototype=Object.create(THREE.Material.prototype);
THREE.MeshDepthMaterial.prototype.constructor=THREE.MeshDepthMaterial;THREE.MeshDepthMaterial.prototype.copy=function(a){THREE.Material.prototype.copy.call(this,a);this.depthPacking=a.depthPacking;this.skinning=a.skinning;this.morphTargets=a.morphTargets;this.map=a.map;this.alphaMap=a.alphaMap;this.displacementMap=a.displacementMap;this.displacementScale=a.displacementScale;this.displacementBias=a.displacementBias;this.wireframe=a.wireframe;this.wireframeLinewidth=a.wireframeLinewidth;return this};
THREE.MeshLambertMaterial=function(a){THREE.Material.call(this);this.type="MeshLambertMaterial";this.color=new THREE.Color(16777215);this.lightMap=this.map=null;this.lightMapIntensity=1;this.aoMap=null;this.aoMapIntensity=1;this.emissive=new THREE.Color(0);this.emissiveIntensity=1;this.envMap=this.alphaMap=this.specularMap=this.emissiveMap=null;this.combine=THREE.MultiplyOperation;this.reflectivity=1;this.refractionRatio=.98;this.wireframe=!1;this.wireframeLinewidth=1;this.wireframeLinejoin=this.wireframeLinecap=
"round";this.morphNormals=this.morphTargets=this.skinning=!1;this.setValues(a)};THREE.MeshLambertMaterial.prototype=Object.create(THREE.Material.prototype);THREE.MeshLambertMaterial.prototype.constructor=THREE.MeshLambertMaterial;
THREE.MeshLambertMaterial.prototype.copy=function(a){THREE.Material.prototype.copy.call(this,a);this.color.copy(a.color);this.map=a.map;this.lightMap=a.lightMap;this.lightMapIntensity=a.lightMapIntensity;this.aoMap=a.aoMap;this.aoMapIntensity=a.aoMapIntensity;this.emissive.copy(a.emissive);this.emissiveMap=a.emissiveMap;this.emissiveIntensity=a.emissiveIntensity;this.specularMap=a.specularMap;this.alphaMap=a.alphaMap;this.envMap=a.envMap;this.combine=a.combine;this.reflectivity=a.reflectivity;this.refractionRatio=
a.refractionRatio;this.wireframe=a.wireframe;this.wireframeLinewidth=a.wireframeLinewidth;this.wireframeLinecap=a.wireframeLinecap;this.wireframeLinejoin=a.wireframeLinejoin;this.skinning=a.skinning;this.morphTargets=a.morphTargets;this.morphNormals=a.morphNormals;return this};THREE.MeshNormalMaterial=function(a){THREE.Material.call(this,a);this.type="MeshNormalMaterial";this.wireframe=!1;this.wireframeLinewidth=1;this.morphTargets=this.lights=this.fog=!1;this.setValues(a)};
THREE.MeshNormalMaterial.prototype=Object.create(THREE.Material.prototype);THREE.MeshNormalMaterial.prototype.constructor=THREE.MeshNormalMaterial;THREE.MeshNormalMaterial.prototype.copy=function(a){THREE.Material.prototype.copy.call(this,a);this.wireframe=a.wireframe;this.wireframeLinewidth=a.wireframeLinewidth;return this};
THREE.MeshPhongMaterial=function(a){THREE.Material.call(this);this.type="MeshPhongMaterial";this.color=new THREE.Color(16777215);this.specular=new THREE.Color(1118481);this.shininess=30;this.lightMap=this.map=null;this.lightMapIntensity=1;this.aoMap=null;this.aoMapIntensity=1;this.emissive=new THREE.Color(0);this.emissiveIntensity=1;this.bumpMap=this.emissiveMap=null;this.bumpScale=1;this.normalMap=null;this.normalScale=new THREE.Vector2(1,1);this.displacementMap=null;this.displacementScale=1;this.displacementBias=
0;this.envMap=this.alphaMap=this.specularMap=null;this.combine=THREE.MultiplyOperation;this.reflectivity=1;this.refractionRatio=.98;this.wireframe=!1;this.wireframeLinewidth=1;this.wireframeLinejoin=this.wireframeLinecap="round";this.morphNormals=this.morphTargets=this.skinning=!1;this.setValues(a)};THREE.MeshPhongMaterial.prototype=Object.create(THREE.Material.prototype);THREE.MeshPhongMaterial.prototype.constructor=THREE.MeshPhongMaterial;
THREE.MeshPhongMaterial.prototype.copy=function(a){THREE.Material.prototype.copy.call(this,a);this.color.copy(a.color);this.specular.copy(a.specular);this.shininess=a.shininess;this.map=a.map;this.lightMap=a.lightMap;this.lightMapIntensity=a.lightMapIntensity;this.aoMap=a.aoMap;this.aoMapIntensity=a.aoMapIntensity;this.emissive.copy(a.emissive);this.emissiveMap=a.emissiveMap;this.emissiveIntensity=a.emissiveIntensity;this.bumpMap=a.bumpMap;this.bumpScale=a.bumpScale;this.normalMap=a.normalMap;this.normalScale.copy(a.normalScale);
this.displacementMap=a.displacementMap;this.displacementScale=a.displacementScale;this.displacementBias=a.displacementBias;this.specularMap=a.specularMap;this.alphaMap=a.alphaMap;this.envMap=a.envMap;this.combine=a.combine;this.reflectivity=a.reflectivity;this.refractionRatio=a.refractionRatio;this.wireframe=a.wireframe;this.wireframeLinewidth=a.wireframeLinewidth;this.wireframeLinecap=a.wireframeLinecap;this.wireframeLinejoin=a.wireframeLinejoin;this.skinning=a.skinning;this.morphTargets=a.morphTargets;
this.morphNormals=a.morphNormals;return this};
THREE.MeshStandardMaterial=function(a){THREE.Material.call(this);this.defines={STANDARD:""};this.type="MeshStandardMaterial";this.color=new THREE.Color(16777215);this.metalness=this.roughness=.5;this.lightMap=this.map=null;this.lightMapIntensity=1;this.aoMap=null;this.aoMapIntensity=1;this.emissive=new THREE.Color(0);this.emissiveIntensity=1;this.bumpMap=this.emissiveMap=null;this.bumpScale=1;this.normalMap=null;this.normalScale=new THREE.Vector2(1,1);this.displacementMap=null;this.displacementScale=
1;this.displacementBias=0;this.envMap=this.alphaMap=this.metalnessMap=this.roughnessMap=null;this.envMapIntensity=1;this.refractionRatio=.98;this.wireframe=!1;this.wireframeLinewidth=1;this.wireframeLinejoin=this.wireframeLinecap="round";this.morphNormals=this.morphTargets=this.skinning=!1;this.setValues(a)};THREE.MeshStandardMaterial.prototype=Object.create(THREE.Material.prototype);THREE.MeshStandardMaterial.prototype.constructor=THREE.MeshStandardMaterial;
THREE.MeshStandardMaterial.prototype.copy=function(a){THREE.Material.prototype.copy.call(this,a);this.defines={STANDARD:""};this.color.copy(a.color);this.roughness=a.roughness;this.metalness=a.metalness;this.map=a.map;this.lightMap=a.lightMap;this.lightMapIntensity=a.lightMapIntensity;this.aoMap=a.aoMap;this.aoMapIntensity=a.aoMapIntensity;this.emissive.copy(a.emissive);this.emissiveMap=a.emissiveMap;this.emissiveIntensity=a.emissiveIntensity;this.bumpMap=a.bumpMap;this.bumpScale=a.bumpScale;this.normalMap=
a.normalMap;this.normalScale.copy(a.normalScale);this.displacementMap=a.displacementMap;this.displacementScale=a.displacementScale;this.displacementBias=a.displacementBias;this.roughnessMap=a.roughnessMap;this.metalnessMap=a.metalnessMap;this.alphaMap=a.alphaMap;this.envMap=a.envMap;this.envMapIntensity=a.envMapIntensity;this.refractionRatio=a.refractionRatio;this.wireframe=a.wireframe;this.wireframeLinewidth=a.wireframeLinewidth;this.wireframeLinecap=a.wireframeLinecap;this.wireframeLinejoin=a.wireframeLinejoin;
this.skinning=a.skinning;this.morphTargets=a.morphTargets;this.morphNormals=a.morphNormals;return this};THREE.MeshPhysicalMaterial=function(a){THREE.MeshStandardMaterial.call(this);this.defines={PHYSICAL:""};this.type="MeshPhysicalMaterial";this.reflectivity=.5;this.clearCoatRoughness=this.clearCoat=0;this.setValues(a)};THREE.MeshPhysicalMaterial.prototype=Object.create(THREE.MeshStandardMaterial.prototype);THREE.MeshPhysicalMaterial.prototype.constructor=THREE.MeshPhysicalMaterial;
THREE.MeshPhysicalMaterial.prototype.copy=function(a){THREE.MeshStandardMaterial.prototype.copy.call(this,a);this.defines={PHYSICAL:""};this.reflectivity=a.reflectivity;this.clearCoat=a.clearCoat;this.clearCoatRoughness=a.clearCoatRoughness;return this};THREE.MultiMaterial=function(a){this.uuid=THREE.Math.generateUUID();this.type="MultiMaterial";this.materials=a instanceof Array?a:[];this.visible=!0};
THREE.MultiMaterial.prototype={constructor:THREE.MultiMaterial,toJSON:function(a){for(var b={metadata:{version:4.2,type:"material",generator:"MaterialExporter"},uuid:this.uuid,type:this.type,materials:[]},c=this.materials,d=0,e=c.length;d<e;d++){var f=c[d].toJSON(a);delete f.metadata;b.materials.push(f)}b.visible=this.visible;return b},clone:function(){for(var a=new this.constructor,b=0;b<this.materials.length;b++)a.materials.push(this.materials[b].clone());a.visible=this.visible;return a}};
THREE.PointsMaterial=function(a){THREE.Material.call(this);this.type="PointsMaterial";this.color=new THREE.Color(16777215);this.map=null;this.size=1;this.sizeAttenuation=!0;this.lights=!1;this.setValues(a)};THREE.PointsMaterial.prototype=Object.create(THREE.Material.prototype);THREE.PointsMaterial.prototype.constructor=THREE.PointsMaterial;
THREE.PointsMaterial.prototype.copy=function(a){THREE.Material.prototype.copy.call(this,a);this.color.copy(a.color);this.map=a.map;this.size=a.size;this.sizeAttenuation=a.sizeAttenuation;return this};
THREE.ShaderMaterial=function(a){THREE.Material.call(this);this.type="ShaderMaterial";this.defines={};this.uniforms={};this.vertexShader="void main() {\n\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n}";this.fragmentShader="void main() {\n\tgl_FragColor = vec4( 1.0, 0.0, 0.0, 1.0 );\n}";this.linewidth=1;this.wireframe=!1;this.wireframeLinewidth=1;this.morphNormals=this.morphTargets=this.skinning=this.clipping=this.lights=this.fog=!1;this.extensions={derivatives:!1,fragDepth:!1,
drawBuffers:!1,shaderTextureLOD:!1};this.defaultAttributeValues={color:[1,1,1],uv:[0,0],uv2:[0,0]};this.index0AttributeName=void 0;void 0!==a&&(void 0!==a.attributes&&console.error("THREE.ShaderMaterial: attributes should now be defined in THREE.BufferGeometry instead."),this.setValues(a))};THREE.ShaderMaterial.prototype=Object.create(THREE.Material.prototype);THREE.ShaderMaterial.prototype.constructor=THREE.ShaderMaterial;
THREE.ShaderMaterial.prototype.copy=function(a){THREE.Material.prototype.copy.call(this,a);this.fragmentShader=a.fragmentShader;this.vertexShader=a.vertexShader;this.uniforms=THREE.UniformsUtils.clone(a.uniforms);this.defines=a.defines;this.wireframe=a.wireframe;this.wireframeLinewidth=a.wireframeLinewidth;this.lights=a.lights;this.clipping=a.clipping;this.skinning=a.skinning;this.morphTargets=a.morphTargets;this.morphNormals=a.morphNormals;this.extensions=a.extensions;return this};
THREE.ShaderMaterial.prototype.toJSON=function(a){a=THREE.Material.prototype.toJSON.call(this,a);a.uniforms=this.uniforms;a.vertexShader=this.vertexShader;a.fragmentShader=this.fragmentShader;return a};THREE.RawShaderMaterial=function(a){THREE.ShaderMaterial.call(this,a);this.type="RawShaderMaterial"};THREE.RawShaderMaterial.prototype=Object.create(THREE.ShaderMaterial.prototype);THREE.RawShaderMaterial.prototype.constructor=THREE.RawShaderMaterial;
THREE.SpriteMaterial=function(a){THREE.Material.call(this);this.type="SpriteMaterial";this.color=new THREE.Color(16777215);this.map=null;this.rotation=0;this.lights=this.fog=!1;this.setValues(a)};THREE.SpriteMaterial.prototype=Object.create(THREE.Material.prototype);THREE.SpriteMaterial.prototype.constructor=THREE.SpriteMaterial;THREE.SpriteMaterial.prototype.copy=function(a){THREE.Material.prototype.copy.call(this,a);this.color.copy(a.color);this.map=a.map;this.rotation=a.rotation;return this};
THREE.ShadowMaterial=function(){THREE.ShaderMaterial.call(this,{uniforms:THREE.UniformsUtils.merge([THREE.UniformsLib.lights,{opacity:{value:1}}]),vertexShader:THREE.ShaderChunk.shadow_vert,fragmentShader:THREE.ShaderChunk.shadow_frag});this.transparent=this.lights=!0;Object.defineProperties(this,{opacity:{enumerable:!0,get:function(){return this.uniforms.opacity.value},set:function(a){this.uniforms.opacity.value=a}}})};THREE.ShadowMaterial.prototype=Object.create(THREE.ShaderMaterial.prototype);
THREE.ShadowMaterial.prototype.constructor=THREE.ShadowMaterial;
THREE.Texture=function(a,b,c,d,e,f,g,h,k,l){Object.defineProperty(this,"id",{value:THREE.TextureIdCount++});this.uuid=THREE.Math.generateUUID();this.sourceFile=this.name="";this.image=void 0!==a?a:THREE.Texture.DEFAULT_IMAGE;this.mipmaps=[];this.mapping=void 0!==b?b:THREE.Texture.DEFAULT_MAPPING;this.wrapS=void 0!==c?c:THREE.ClampToEdgeWrapping;this.wrapT=void 0!==d?d:THREE.ClampToEdgeWrapping;this.magFilter=void 0!==e?e:THREE.LinearFilter;this.minFilter=void 0!==f?f:THREE.LinearMipMapLinearFilter;
this.anisotropy=void 0!==k?k:1;this.format=void 0!==g?g:THREE.RGBAFormat;this.type=void 0!==h?h:THREE.UnsignedByteType;this.offset=new THREE.Vector2(0,0);this.repeat=new THREE.Vector2(1,1);this.generateMipmaps=!0;this.premultiplyAlpha=!1;this.flipY=!0;this.unpackAlignment=4;this.encoding=void 0!==l?l:THREE.LinearEncoding;this.version=0;this.onUpdate=null};THREE.Texture.DEFAULT_IMAGE=void 0;THREE.Texture.DEFAULT_MAPPING=THREE.UVMapping;
THREE.Texture.prototype={constructor:THREE.Texture,set needsUpdate(a){!0===a&&this.version++},clone:function(){return(new this.constructor).copy(this)},copy:function(a){this.image=a.image;this.mipmaps=a.mipmaps.slice(0);this.mapping=a.mapping;this.wrapS=a.wrapS;this.wrapT=a.wrapT;this.magFilter=a.magFilter;this.minFilter=a.minFilter;this.anisotropy=a.anisotropy;this.format=a.format;this.type=a.type;this.offset.copy(a.offset);this.repeat.copy(a.repeat);this.generateMipmaps=a.generateMipmaps;this.premultiplyAlpha=
a.premultiplyAlpha;this.flipY=a.flipY;this.unpackAlignment=a.unpackAlignment;this.encoding=a.encoding;return this},toJSON:function(a){if(void 0!==a.textures[this.uuid])return a.textures[this.uuid];var b={metadata:{version:4.4,type:"Texture",generator:"Texture.toJSON"},uuid:this.uuid,name:this.name,mapping:this.mapping,repeat:[this.repeat.x,this.repeat.y],offset:[this.offset.x,this.offset.y],wrap:[this.wrapS,this.wrapT],minFilter:this.minFilter,magFilter:this.magFilter,anisotropy:this.anisotropy,flipY:this.flipY};
if(void 0!==this.image){var c=this.image;void 0===c.uuid&&(c.uuid=THREE.Math.generateUUID());if(void 0===a.images[c.uuid]){var d=a.images,e=c.uuid,f=c.uuid,g;void 0!==c.toDataURL?g=c:(g=document.createElementNS("http://www.w3.org/1999/xhtml","canvas"),g.width=c.width,g.height=c.height,g.getContext("2d").drawImage(c,0,0,c.width,c.height));g=2048<g.width||2048<g.height?g.toDataURL("image/jpeg",.6):g.toDataURL("image/png");d[e]={uuid:f,url:g}}b.image=c.uuid}return a.textures[this.uuid]=b},dispose:function(){this.dispatchEvent({type:"dispose"})},
transformUv:function(a){if(this.mapping===THREE.UVMapping){a.multiply(this.repeat);a.add(this.offset);if(0>a.x||1<a.x)switch(this.wrapS){case THREE.RepeatWrapping:a.x-=Math.floor(a.x);break;case THREE.ClampToEdgeWrapping:a.x=0>a.x?0:1;break;case THREE.MirroredRepeatWrapping:1===Math.abs(Math.floor(a.x)%2)?a.x=Math.ceil(a.x)-a.x:a.x-=Math.floor(a.x)}if(0>a.y||1<a.y)switch(this.wrapT){case THREE.RepeatWrapping:a.y-=Math.floor(a.y);break;case THREE.ClampToEdgeWrapping:a.y=0>a.y?0:1;break;case THREE.MirroredRepeatWrapping:1===
Math.abs(Math.floor(a.y)%2)?a.y=Math.ceil(a.y)-a.y:a.y-=Math.floor(a.y)}this.flipY&&(a.y=1-a.y)}}};Object.assign(THREE.Texture.prototype,THREE.EventDispatcher.prototype);THREE.TextureIdCount=0;
THREE.DepthTexture=function(a,b,c,d,e,f,g,h,k){THREE.Texture.call(this,null,d,e,f,g,h,THREE.DepthFormat,c,k);this.image={width:a,height:b};this.type=void 0!==c?c:THREE.UnsignedShortType;this.magFilter=void 0!==g?g:THREE.NearestFilter;this.minFilter=void 0!==h?h:THREE.NearestFilter;this.generateMipmaps=this.flipY=!1};THREE.DepthTexture.prototype=Object.create(THREE.Texture.prototype);THREE.DepthTexture.prototype.constructor=THREE.DepthTexture;
THREE.CanvasTexture=function(a,b,c,d,e,f,g,h,k){THREE.Texture.call(this,a,b,c,d,e,f,g,h,k);this.needsUpdate=!0};THREE.CanvasTexture.prototype=Object.create(THREE.Texture.prototype);THREE.CanvasTexture.prototype.constructor=THREE.CanvasTexture;THREE.CubeTexture=function(a,b,c,d,e,f,g,h,k,l){a=void 0!==a?a:[];b=void 0!==b?b:THREE.CubeReflectionMapping;THREE.Texture.call(this,a,b,c,d,e,f,g,h,k,l);this.flipY=!1};THREE.CubeTexture.prototype=Object.create(THREE.Texture.prototype);
THREE.CubeTexture.prototype.constructor=THREE.CubeTexture;Object.defineProperty(THREE.CubeTexture.prototype,"images",{get:function(){return this.image},set:function(a){this.image=a}});THREE.CompressedTexture=function(a,b,c,d,e,f,g,h,k,l,m,p){THREE.Texture.call(this,null,f,g,h,k,l,d,e,m,p);this.image={width:b,height:c};this.mipmaps=a;this.generateMipmaps=this.flipY=!1};THREE.CompressedTexture.prototype=Object.create(THREE.Texture.prototype);THREE.CompressedTexture.prototype.constructor=THREE.CompressedTexture;
THREE.DataTexture=function(a,b,c,d,e,f,g,h,k,l,m,p){THREE.Texture.call(this,null,f,g,h,k,l,d,e,m,p);this.image={data:a,width:b,height:c};this.magFilter=void 0!==k?k:THREE.NearestFilter;this.minFilter=void 0!==l?l:THREE.NearestFilter;this.generateMipmaps=this.flipY=!1};THREE.DataTexture.prototype=Object.create(THREE.Texture.prototype);THREE.DataTexture.prototype.constructor=THREE.DataTexture;
THREE.VideoTexture=function(a,b,c,d,e,f,g,h,k){function l(){requestAnimationFrame(l);a.readyState>=a.HAVE_CURRENT_DATA&&(m.needsUpdate=!0)}THREE.Texture.call(this,a,b,c,d,e,f,g,h,k);this.generateMipmaps=!1;var m=this;l()};THREE.VideoTexture.prototype=Object.create(THREE.Texture.prototype);THREE.VideoTexture.prototype.constructor=THREE.VideoTexture;THREE.Group=function(){THREE.Object3D.call(this);this.type="Group"};THREE.Group.prototype=Object.assign(Object.create(THREE.Object3D.prototype),{constructor:THREE.Group});
THREE.Points=function(a,b){THREE.Object3D.call(this);this.type="Points";this.geometry=void 0!==a?a:new THREE.BufferGeometry;this.material=void 0!==b?b:new THREE.PointsMaterial({color:16777215*Math.random()})};
THREE.Points.prototype=Object.assign(Object.create(THREE.Object3D.prototype),{constructor:THREE.Points,raycast:function(){var a=new THREE.Matrix4,b=new THREE.Ray,c=new THREE.Sphere;return function(d,e){function f(a,c){var f=b.distanceSqToPoint(a);if(f<m){var h=b.closestPointToPoint(a);h.applyMatrix4(k);var l=d.ray.origin.distanceTo(h);l<d.near||l>d.far||e.push({distance:l,distanceToRay:Math.sqrt(f),point:h.clone(),index:c,face:null,object:g})}}var g=this,h=this.geometry,k=this.matrixWorld,l=d.params.Points.threshold;
null===h.boundingSphere&&h.computeBoundingSphere();c.copy(h.boundingSphere);c.applyMatrix4(k);if(!1!==d.ray.intersectsSphere(c)){a.getInverse(k);b.copy(d.ray).applyMatrix4(a);var l=l/((this.scale.x+this.scale.y+this.scale.z)/3),m=l*l,l=new THREE.Vector3;if(h instanceof THREE.BufferGeometry){var p=h.index,h=h.attributes.position.array;if(null!==p)for(var n=p.array,p=0,q=n.length;p<q;p++){var r=n[p];l.fromArray(h,3*r);f(l,r)}else for(p=0,n=h.length/3;p<n;p++)l.fromArray(h,3*p),f(l,p)}else for(l=h.vertices,
p=0,n=l.length;p<n;p++)f(l[p],p)}}}(),clone:function(){return(new this.constructor(this.geometry,this.material)).copy(this)}});THREE.Line=function(a,b,c){if(1===c)return console.warn("THREE.Line: parameter THREE.LinePieces no longer supported. Created THREE.LineSegments instead."),new THREE.LineSegments(a,b);THREE.Object3D.call(this);this.type="Line";this.geometry=void 0!==a?a:new THREE.BufferGeometry;this.material=void 0!==b?b:new THREE.LineBasicMaterial({color:16777215*Math.random()})};
THREE.Line.prototype=Object.assign(Object.create(THREE.Object3D.prototype),{constructor:THREE.Line,raycast:function(){var a=new THREE.Matrix4,b=new THREE.Ray,c=new THREE.Sphere;return function(d,e){var f=d.linePrecision,f=f*f,g=this.geometry,h=this.matrixWorld;null===g.boundingSphere&&g.computeBoundingSphere();c.copy(g.boundingSphere);c.applyMatrix4(h);if(!1!==d.ray.intersectsSphere(c)){a.getInverse(h);b.copy(d.ray).applyMatrix4(a);var k=new THREE.Vector3,l=new THREE.Vector3,h=new THREE.Vector3,m=
new THREE.Vector3,p=this instanceof THREE.LineSegments?2:1;if(g instanceof THREE.BufferGeometry){var n=g.index,q=g.attributes.position.array;if(null!==n)for(var n=n.array,g=0,r=n.length-1;g<r;g+=p){var s=n[g+1];k.fromArray(q,3*n[g]);l.fromArray(q,3*s);s=b.distanceSqToSegment(k,l,m,h);s>f||(m.applyMatrix4(this.matrixWorld),s=d.ray.origin.distanceTo(m),s<d.near||s>d.far||e.push({distance:s,point:h.clone().applyMatrix4(this.matrixWorld),index:g,face:null,faceIndex:null,object:this}))}else for(g=0,r=
q.length/3-1;g<r;g+=p)k.fromArray(q,3*g),l.fromArray(q,3*g+3),s=b.distanceSqToSegment(k,l,m,h),s>f||(m.applyMatrix4(this.matrixWorld),s=d.ray.origin.distanceTo(m),s<d.near||s>d.far||e.push({distance:s,point:h.clone().applyMatrix4(this.matrixWorld),index:g,face:null,faceIndex:null,object:this}))}else if(g instanceof THREE.Geometry)for(k=g.vertices,l=k.length,g=0;g<l-1;g+=p)s=b.distanceSqToSegment(k[g],k[g+1],m,h),s>f||(m.applyMatrix4(this.matrixWorld),s=d.ray.origin.distanceTo(m),s<d.near||s>d.far||
e.push({distance:s,point:h.clone().applyMatrix4(this.matrixWorld),index:g,face:null,faceIndex:null,object:this}))}}}(),clone:function(){return(new this.constructor(this.geometry,this.material)).copy(this)}});THREE.LineSegments=function(a,b){THREE.Line.call(this,a,b);this.type="LineSegments"};THREE.LineSegments.prototype=Object.assign(Object.create(THREE.Line.prototype),{constructor:THREE.LineSegments});
THREE.Mesh=function(a,b){THREE.Object3D.call(this);this.type="Mesh";this.geometry=void 0!==a?a:new THREE.BufferGeometry;this.material=void 0!==b?b:new THREE.MeshBasicMaterial({color:16777215*Math.random()});this.drawMode=THREE.TrianglesDrawMode;this.updateMorphTargets()};
THREE.Mesh.prototype=Object.assign(Object.create(THREE.Object3D.prototype),{constructor:THREE.Mesh,setDrawMode:function(a){this.drawMode=a},copy:function(a){THREE.Object3D.prototype.copy.call(this,a);this.drawMode=a.drawMode;return this},updateMorphTargets:function(){if(void 0!==this.geometry.morphTargets&&0<this.geometry.morphTargets.length){this.morphTargetBase=-1;this.morphTargetInfluences=[];this.morphTargetDictionary={};for(var a=0,b=this.geometry.morphTargets.length;a<b;a++)this.morphTargetInfluences.push(0),
this.morphTargetDictionary[this.geometry.morphTargets[a].name]=a}},getMorphTargetIndexByName:function(a){if(void 0!==this.morphTargetDictionary[a])return this.morphTargetDictionary[a];console.warn("THREE.Mesh.getMorphTargetIndexByName: morph target "+a+" does not exist. Returning 0.");return 0},raycast:function(){function a(a,b,c,d,e,g,f){THREE.Triangle.barycoordFromPoint(a,b,c,d,s);e.multiplyScalar(s.x);g.multiplyScalar(s.y);f.multiplyScalar(s.z);e.add(g).add(f);return e.clone()}function b(a,b,c,
d,e,g,f){var h=a.material;if(null===(h.side===THREE.BackSide?c.intersectTriangle(g,e,d,!0,f):c.intersectTriangle(d,e,g,h.side!==THREE.DoubleSide,f)))return null;t.copy(f);t.applyMatrix4(a.matrixWorld);c=b.ray.origin.distanceTo(t);return c<b.near||c>b.far?null:{distance:c,point:t.clone(),object:a}}function c(c,d,e,f,l,p,m,s){g.fromArray(f,3*p);h.fromArray(f,3*m);k.fromArray(f,3*s);if(c=b(c,d,e,g,h,k,v))l&&(n.fromArray(l,2*p),q.fromArray(l,2*m),r.fromArray(l,2*s),c.uv=a(v,g,h,k,n,q,r)),c.face=new THREE.Face3(p,
m,s,THREE.Triangle.normal(g,h,k)),c.faceIndex=p;return c}var d=new THREE.Matrix4,e=new THREE.Ray,f=new THREE.Sphere,g=new THREE.Vector3,h=new THREE.Vector3,k=new THREE.Vector3,l=new THREE.Vector3,m=new THREE.Vector3,p=new THREE.Vector3,n=new THREE.Vector2,q=new THREE.Vector2,r=new THREE.Vector2,s=new THREE.Vector3,v=new THREE.Vector3,t=new THREE.Vector3;return function(u,s){var w=this.geometry,t=this.material,z=this.matrixWorld;if(void 0!==t&&(null===w.boundingSphere&&w.computeBoundingSphere(),f.copy(w.boundingSphere),
f.applyMatrix4(z),!1!==u.ray.intersectsSphere(f)&&(d.getInverse(z),e.copy(u.ray).applyMatrix4(d),null===w.boundingBox||!1!==e.intersectsBox(w.boundingBox)))){var y,A;if(w instanceof THREE.BufferGeometry){var G,B,t=w.index,z=w.attributes,w=z.position.array;void 0!==z.uv&&(y=z.uv.array);if(null!==t)for(var z=t.array,F=0,J=z.length;F<J;F+=3){if(t=z[F],G=z[F+1],B=z[F+2],A=c(this,u,e,w,y,t,G,B))A.faceIndex=Math.floor(F/3),s.push(A)}else for(F=0,J=w.length;F<J;F+=9)if(t=F/3,G=t+1,B=t+2,A=c(this,u,e,w,y,
t,G,B))A.index=t,s.push(A)}else if(w instanceof THREE.Geometry){var P,K,z=t instanceof THREE.MultiMaterial,F=!0===z?t.materials:null,J=w.vertices;G=w.faces;B=w.faceVertexUvs[0];0<B.length&&(y=B);for(var H=0,M=G.length;H<M;H++){var O=G[H];A=!0===z?F[O.materialIndex]:t;if(void 0!==A){B=J[O.a];P=J[O.b];K=J[O.c];if(!0===A.morphTargets){A=w.morphTargets;var N=this.morphTargetInfluences;g.set(0,0,0);h.set(0,0,0);k.set(0,0,0);for(var Q=0,C=A.length;Q<C;Q++){var L=N[Q];if(0!==L){var E=A[Q].vertices;g.addScaledVector(l.subVectors(E[O.a],
B),L);h.addScaledVector(m.subVectors(E[O.b],P),L);k.addScaledVector(p.subVectors(E[O.c],K),L)}}g.add(B);h.add(P);k.add(K);B=g;P=h;K=k}if(A=b(this,u,e,B,P,K,v))y&&(N=y[H],n.copy(N[0]),q.copy(N[1]),r.copy(N[2]),A.uv=a(v,B,P,K,n,q,r)),A.face=O,A.faceIndex=H,s.push(A)}}}}}}(),clone:function(){return(new this.constructor(this.geometry,this.material)).copy(this)}});THREE.Bone=function(a){THREE.Object3D.call(this);this.type="Bone";this.skin=a};
THREE.Bone.prototype=Object.assign(Object.create(THREE.Object3D.prototype),{constructor:THREE.Bone,copy:function(a){THREE.Object3D.prototype.copy.call(this,a);this.skin=a.skin;return this}});
THREE.Skeleton=function(a,b,c){this.useVertexTexture=void 0!==c?c:!0;this.identityMatrix=new THREE.Matrix4;a=a||[];this.bones=a.slice(0);this.useVertexTexture?(a=Math.sqrt(4*this.bones.length),a=THREE.Math.nextPowerOfTwo(Math.ceil(a)),this.boneTextureHeight=this.boneTextureWidth=a=Math.max(a,4),this.boneMatrices=new Float32Array(this.boneTextureWidth*this.boneTextureHeight*4),this.boneTexture=new THREE.DataTexture(this.boneMatrices,this.boneTextureWidth,this.boneTextureHeight,THREE.RGBAFormat,THREE.FloatType)):
this.boneMatrices=new Float32Array(16*this.bones.length);if(void 0===b)this.calculateInverses();else if(this.bones.length===b.length)this.boneInverses=b.slice(0);else for(console.warn("THREE.Skeleton bonInverses is the wrong length."),this.boneInverses=[],b=0,a=this.bones.length;b<a;b++)this.boneInverses.push(new THREE.Matrix4)};
Object.assign(THREE.Skeleton.prototype,{calculateInverses:function(){this.boneInverses=[];for(var a=0,b=this.bones.length;a<b;a++){var c=new THREE.Matrix4;this.bones[a]&&c.getInverse(this.bones[a].matrixWorld);this.boneInverses.push(c)}},pose:function(){for(var a,b=0,c=this.bones.length;b<c;b++)(a=this.bones[b])&&a.matrixWorld.getInverse(this.boneInverses[b]);b=0;for(c=this.bones.length;b<c;b++)if(a=this.bones[b])a.parent instanceof THREE.Bone?(a.matrix.getInverse(a.parent.matrixWorld),a.matrix.multiply(a.matrixWorld)):
a.matrix.copy(a.matrixWorld),a.matrix.decompose(a.position,a.quaternion,a.scale)},update:function(){var a=new THREE.Matrix4;return function(){for(var b=0,c=this.bones.length;b<c;b++)a.multiplyMatrices(this.bones[b]?this.bones[b].matrixWorld:this.identityMatrix,this.boneInverses[b]),a.toArray(this.boneMatrices,16*b);this.useVertexTexture&&(this.boneTexture.needsUpdate=!0)}}(),clone:function(){return new THREE.Skeleton(this.bones,this.boneInverses,this.useVertexTexture)}});
THREE.SkinnedMesh=function(a,b,c){THREE.Mesh.call(this,a,b);this.type="SkinnedMesh";this.bindMode="attached";this.bindMatrix=new THREE.Matrix4;this.bindMatrixInverse=new THREE.Matrix4;a=[];if(this.geometry&&void 0!==this.geometry.bones){for(var d,e=0,f=this.geometry.bones.length;e<f;++e)d=this.geometry.bones[e],b=new THREE.Bone(this),a.push(b),b.name=d.name,b.position.fromArray(d.pos),b.quaternion.fromArray(d.rotq),void 0!==d.scl&&b.scale.fromArray(d.scl);e=0;for(f=this.geometry.bones.length;e<f;++e)d=
this.geometry.bones[e],-1!==d.parent&&null!==d.parent&&void 0!==a[d.parent]?a[d.parent].add(a[e]):this.add(a[e])}this.normalizeSkinWeights();this.updateMatrixWorld(!0);this.bind(new THREE.Skeleton(a,void 0,c),this.matrixWorld)};
THREE.SkinnedMesh.prototype=Object.assign(Object.create(THREE.Mesh.prototype),{constructor:THREE.SkinnedMesh,bind:function(a,b){this.skeleton=a;void 0===b&&(this.updateMatrixWorld(!0),this.skeleton.calculateInverses(),b=this.matrixWorld);this.bindMatrix.copy(b);this.bindMatrixInverse.getInverse(b)},pose:function(){this.skeleton.pose()},normalizeSkinWeights:function(){if(this.geometry instanceof THREE.Geometry)for(var a=0;a<this.geometry.skinWeights.length;a++){var b=this.geometry.skinWeights[a],c=
1/b.lengthManhattan();Infinity!==c?b.multiplyScalar(c):b.set(1,0,0,0)}else if(this.geometry instanceof THREE.BufferGeometry)for(var b=new THREE.Vector4,d=this.geometry.attributes.skinWeight,a=0;a<d.count;a++)b.x=d.getX(a),b.y=d.getY(a),b.z=d.getZ(a),b.w=d.getW(a),c=1/b.lengthManhattan(),Infinity!==c?b.multiplyScalar(c):b.set(1,0,0,0),d.setXYZW(a,b.x,b.y,b.z,b.w)},updateMatrixWorld:function(a){THREE.Mesh.prototype.updateMatrixWorld.call(this,!0);"attached"===this.bindMode?this.bindMatrixInverse.getInverse(this.matrixWorld):
"detached"===this.bindMode?this.bindMatrixInverse.getInverse(this.bindMatrix):console.warn("THREE.SkinnedMesh unrecognized bindMode: "+this.bindMode)},clone:function(){return(new this.constructor(this.geometry,this.material,this.skeleton.useVertexTexture)).copy(this)}});THREE.LOD=function(){THREE.Object3D.call(this);this.type="LOD";Object.defineProperties(this,{levels:{enumerable:!0,value:[]}})};
THREE.LOD.prototype=Object.assign(Object.create(THREE.Object3D.prototype),{constructor:THREE.LOD,copy:function(a){THREE.Object3D.prototype.copy.call(this,a,!1);a=a.levels;for(var b=0,c=a.length;b<c;b++){var d=a[b];this.addLevel(d.object.clone(),d.distance)}return this},addLevel:function(a,b){void 0===b&&(b=0);b=Math.abs(b);for(var c=this.levels,d=0;d<c.length&&!(b<c[d].distance);d++);c.splice(d,0,{distance:b,object:a});this.add(a)},getObjectForDistance:function(a){for(var b=this.levels,c=1,d=b.length;c<
d&&!(a<b[c].distance);c++);return b[c-1].object},raycast:function(){var a=new THREE.Vector3;return function(b,c){a.setFromMatrixPosition(this.matrixWorld);var d=b.ray.origin.distanceTo(a);this.getObjectForDistance(d).raycast(b,c)}}(),update:function(){var a=new THREE.Vector3,b=new THREE.Vector3;return function(c){var d=this.levels;if(1<d.length){a.setFromMatrixPosition(c.matrixWorld);b.setFromMatrixPosition(this.matrixWorld);c=a.distanceTo(b);d[0].object.visible=!0;for(var e=1,f=d.length;e<f;e++)if(c>=
d[e].distance)d[e-1].object.visible=!1,d[e].object.visible=!0;else break;for(;e<f;e++)d[e].object.visible=!1}}}(),toJSON:function(a){a=THREE.Object3D.prototype.toJSON.call(this,a);a.object.levels=[];for(var b=this.levels,c=0,d=b.length;c<d;c++){var e=b[c];a.object.levels.push({object:e.object.uuid,distance:e.distance})}return a}});THREE.Sprite=function(a){THREE.Object3D.call(this);this.type="Sprite";this.material=void 0!==a?a:new THREE.SpriteMaterial};
THREE.Sprite.prototype=Object.assign(Object.create(THREE.Object3D.prototype),{constructor:THREE.Sprite,raycast:function(){var a=new THREE.Vector3;return function(b,c){a.setFromMatrixPosition(this.matrixWorld);var d=b.ray.distanceSqToPoint(a);d>this.scale.x*this.scale.y/4||c.push({distance:Math.sqrt(d),point:this.position,face:null,object:this})}}(),clone:function(){return(new this.constructor(this.material)).copy(this)}});
THREE.LensFlare=function(a,b,c,d,e){THREE.Object3D.call(this);this.lensFlares=[];this.positionScreen=new THREE.Vector3;this.customUpdateCallback=void 0;void 0!==a&&this.add(a,b,c,d,e)};
THREE.LensFlare.prototype=Object.assign(Object.create(THREE.Object3D.prototype),{constructor:THREE.LensFlare,copy:function(a){THREE.Object3D.prototype.copy.call(this,a);this.positionScreen.copy(a.positionScreen);this.customUpdateCallback=a.customUpdateCallback;for(var b=0,c=a.lensFlares.length;b<c;b++)this.lensFlares.push(a.lensFlares[b]);return this},add:function(a,b,c,d,e,f){void 0===b&&(b=-1);void 0===c&&(c=0);void 0===f&&(f=1);void 0===e&&(e=new THREE.Color(16777215));void 0===d&&(d=THREE.NormalBlending);
c=Math.min(c,Math.max(0,c));this.lensFlares.push({texture:a,size:b,distance:c,x:0,y:0,z:0,scale:1,rotation:0,opacity:f,color:e,blending:d})},updateLensFlares:function(){var a,b=this.lensFlares.length,c,d=2*-this.positionScreen.x,e=2*-this.positionScreen.y;for(a=0;a<b;a++)c=this.lensFlares[a],c.x=this.positionScreen.x+d*c.distance,c.y=this.positionScreen.y+e*c.distance,c.wantedRotation=c.x*Math.PI*.25,c.rotation+=.25*(c.wantedRotation-c.rotation)}});
THREE.Scene=function(){THREE.Object3D.call(this);this.type="Scene";this.overrideMaterial=this.fog=this.background=null;this.autoUpdate=!0};THREE.Scene.prototype=Object.create(THREE.Object3D.prototype);THREE.Scene.prototype.constructor=THREE.Scene;
THREE.Scene.prototype.copy=function(a,b){THREE.Object3D.prototype.copy.call(this,a,b);null!==a.background&&(this.background=a.background.clone());null!==a.fog&&(this.fog=a.fog.clone());null!==a.overrideMaterial&&(this.overrideMaterial=a.overrideMaterial.clone());this.autoUpdate=a.autoUpdate;this.matrixAutoUpdate=a.matrixAutoUpdate;return this};THREE.Fog=function(a,b,c){this.name="";this.color=new THREE.Color(a);this.near=void 0!==b?b:1;this.far=void 0!==c?c:1E3};
THREE.Fog.prototype.clone=function(){return new THREE.Fog(this.color.getHex(),this.near,this.far)};THREE.FogExp2=function(a,b){this.name="";this.color=new THREE.Color(a);this.density=void 0!==b?b:2.5E-4};THREE.FogExp2.prototype.clone=function(){return new THREE.FogExp2(this.color.getHex(),this.density)};THREE.ShaderChunk={};THREE.ShaderChunk.alphamap_fragment="#ifdef USE_ALPHAMAP\n\tdiffuseColor.a *= texture2D( alphaMap, vUv ).g;\n#endif\n";THREE.ShaderChunk.alphamap_pars_fragment="#ifdef USE_ALPHAMAP\n\tuniform sampler2D alphaMap;\n#endif\n";
THREE.ShaderChunk.alphatest_fragment="#ifdef ALPHATEST\n\tif ( diffuseColor.a < ALPHATEST ) discard;\n#endif\n";THREE.ShaderChunk.aomap_fragment="#ifdef USE_AOMAP\n\tfloat ambientOcclusion = ( texture2D( aoMap, vUv2 ).r - 1.0 ) * aoMapIntensity + 1.0;\n\treflectedLight.indirectDiffuse *= ambientOcclusion;\n\t#if defined( USE_ENVMAP ) && defined( PHYSICAL )\n\t\tfloat dotNV = saturate( dot( geometry.normal, geometry.viewDir ) );\n\t\treflectedLight.indirectSpecular *= computeSpecularOcclusion( dotNV, ambientOcclusion, material.specularRoughness );\n\t#endif\n#endif\n";
THREE.ShaderChunk.aomap_pars_fragment="#ifdef USE_AOMAP\n\tuniform sampler2D aoMap;\n\tuniform float aoMapIntensity;\n#endif";THREE.ShaderChunk.begin_vertex="\nvec3 transformed = vec3( position );\n";THREE.ShaderChunk.beginnormal_vertex="\nvec3 objectNormal = vec3( normal );\n";THREE.ShaderChunk.bsdfs="bool testLightInRange( const in float lightDistance, const in float cutoffDistance ) {\n\treturn any( bvec2( cutoffDistance == 0.0, lightDistance < cutoffDistance ) );\n}\nfloat punctualLightIntensityToIrradianceFactor( const in float lightDistance, const in float cutoffDistance, const in float decayExponent ) {\n\t\tif( decayExponent > 0.0 ) {\n#if defined ( PHYSICALLY_CORRECT_LIGHTS )\n\t\t\tfloat distanceFalloff = 1.0 / max( pow( lightDistance, decayExponent ), 0.01 );\n\t\t\tfloat maxDistanceCutoffFactor = pow2( saturate( 1.0 - pow4( lightDistance / cutoffDistance ) ) );\n\t\t\treturn distanceFalloff * maxDistanceCutoffFactor;\n#else\n\t\t\treturn pow( saturate( -lightDistance / cutoffDistance + 1.0 ), decayExponent );\n#endif\n\t\t}\n\t\treturn 1.0;\n}\nvec3 BRDF_Diffuse_Lambert( const in vec3 diffuseColor ) {\n\treturn RECIPROCAL_PI * diffuseColor;\n}\nvec3 F_Schlick( const in vec3 specularColor, const in float dotLH ) {\n\tfloat fresnel = exp2( ( -5.55473 * dotLH - 6.98316 ) * dotLH );\n\treturn ( 1.0 - specularColor ) * fresnel + specularColor;\n}\nfloat G_GGX_Smith( const in float alpha, const in float dotNL, const in float dotNV ) {\n\tfloat a2 = pow2( alpha );\n\tfloat gl = dotNL + sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNL ) );\n\tfloat gv = dotNV + sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNV ) );\n\treturn 1.0 / ( gl * gv );\n}\nfloat G_GGX_SmithCorrelated( const in float alpha, const in float dotNL, const in float dotNV ) {\n\tfloat a2 = pow2( alpha );\n\tfloat gv = dotNL * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNV ) );\n\tfloat gl = dotNV * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNL ) );\n\treturn 0.5 / max( gv + gl, EPSILON );\n}\nfloat D_GGX( const in float alpha, const in float dotNH ) {\n\tfloat a2 = pow2( alpha );\n\tfloat denom = pow2( dotNH ) * ( a2 - 1.0 ) + 1.0;\n\treturn RECIPROCAL_PI * a2 / pow2( denom );\n}\nvec3 BRDF_Specular_GGX( const in IncidentLight incidentLight, const in GeometricContext geometry, const in vec3 specularColor, const in float roughness ) {\n\tfloat alpha = pow2( roughness );\n\tvec3 halfDir = normalize( incidentLight.direction + geometry.viewDir );\n\tfloat dotNL = saturate( dot( geometry.normal, incidentLight.direction ) );\n\tfloat dotNV = saturate( dot( geometry.normal, geometry.viewDir ) );\n\tfloat dotNH = saturate( dot( geometry.normal, halfDir ) );\n\tfloat dotLH = saturate( dot( incidentLight.direction, halfDir ) );\n\tvec3 F = F_Schlick( specularColor, dotLH );\n\tfloat G = G_GGX_SmithCorrelated( alpha, dotNL, dotNV );\n\tfloat D = D_GGX( alpha, dotNH );\n\treturn F * ( G * D );\n}\nvec3 BRDF_Specular_GGX_Environment( const in GeometricContext geometry, const in vec3 specularColor, const in float roughness ) {\n\tfloat dotNV = saturate( dot( geometry.normal, geometry.viewDir ) );\n\tconst vec4 c0 = vec4( - 1, - 0.0275, - 0.572, 0.022 );\n\tconst vec4 c1 = vec4( 1, 0.0425, 1.04, - 0.04 );\n\tvec4 r = roughness * c0 + c1;\n\tfloat a004 = min( r.x * r.x, exp2( - 9.28 * dotNV ) ) * r.x + r.y;\n\tvec2 AB = vec2( -1.04, 1.04 ) * a004 + r.zw;\n\treturn specularColor * AB.x + AB.y;\n}\nfloat G_BlinnPhong_Implicit( ) {\n\treturn 0.25;\n}\nfloat D_BlinnPhong( const in float shininess, const in float dotNH ) {\n\treturn RECIPROCAL_PI * ( shininess * 0.5 + 1.0 ) * pow( dotNH, shininess );\n}\nvec3 BRDF_Specular_BlinnPhong( const in IncidentLight incidentLight, const in GeometricContext geometry, const in vec3 specularColor, const in float shininess ) {\n\tvec3 halfDir = normalize( incidentLight.direction + geometry.viewDir );\n\tfloat dotNH = saturate( dot( geometry.normal, halfDir ) );\n\tfloat dotLH = saturate( dot( incidentLight.direction, halfDir ) );\n\tvec3 F = F_Schlick( specularColor, dotLH );\n\tfloat G = G_BlinnPhong_Implicit( );\n\tfloat D = D_BlinnPhong( shininess, dotNH );\n\treturn F * ( G * D );\n}\nfloat GGXRoughnessToBlinnExponent( const in float ggxRoughness ) {\n\treturn ( 2.0 / pow2( ggxRoughness + 0.0001 ) - 2.0 );\n}\nfloat BlinnExponentToGGXRoughness( const in float blinnExponent ) {\n\treturn sqrt( 2.0 / ( blinnExponent + 2.0 ) );\n}\n";
THREE.ShaderChunk.bumpmap_pars_fragment="#ifdef USE_BUMPMAP\n\tuniform sampler2D bumpMap;\n\tuniform float bumpScale;\n\tvec2 dHdxy_fwd() {\n\t\tvec2 dSTdx = dFdx( vUv );\n\t\tvec2 dSTdy = dFdy( vUv );\n\t\tfloat Hll = bumpScale * texture2D( bumpMap, vUv ).x;\n\t\tfloat dBx = bumpScale * texture2D( bumpMap, vUv + dSTdx ).x - Hll;\n\t\tfloat dBy = bumpScale * texture2D( bumpMap, vUv + dSTdy ).x - Hll;\n\t\treturn vec2( dBx, dBy );\n\t}\n\tvec3 perturbNormalArb( vec3 surf_pos, vec3 surf_norm, vec2 dHdxy ) {\n\t\tvec3 vSigmaX = dFdx( surf_pos );\n\t\tvec3 vSigmaY = dFdy( surf_pos );\n\t\tvec3 vN = surf_norm;\n\t\tvec3 R1 = cross( vSigmaY, vN );\n\t\tvec3 R2 = cross( vN, vSigmaX );\n\t\tfloat fDet = dot( vSigmaX, R1 );\n\t\tvec3 vGrad = sign( fDet ) * ( dHdxy.x * R1 + dHdxy.y * R2 );\n\t\treturn normalize( abs( fDet ) * surf_norm - vGrad );\n\t}\n#endif\n";
THREE.ShaderChunk.clipping_planes_fragment="#if NUM_CLIPPING_PLANES > 0\n\tfor ( int i = 0; i < NUM_CLIPPING_PLANES; ++ i ) {\n\t\tvec4 plane = clippingPlanes[ i ];\n\t\tif ( dot( vViewPosition, plane.xyz ) > plane.w ) discard;\n\t}\n#endif\n";THREE.ShaderChunk.clipping_planes_pars_fragment="#if NUM_CLIPPING_PLANES > 0\n\t#if ! defined( PHYSICAL ) && ! defined( PHONG )\n\t\tvarying vec3 vViewPosition;\n\t#endif\n\tuniform vec4 clippingPlanes[ NUM_CLIPPING_PLANES ];\n#endif\n";
THREE.ShaderChunk.clipping_planes_pars_vertex="#if NUM_CLIPPING_PLANES > 0 && ! defined( PHYSICAL ) && ! defined( PHONG )\n\tvarying vec3 vViewPosition;\n#endif\n";THREE.ShaderChunk.clipping_planes_vertex="#if NUM_CLIPPING_PLANES > 0 && ! defined( PHYSICAL ) && ! defined( PHONG )\n\tvViewPosition = - mvPosition.xyz;\n#endif\n";THREE.ShaderChunk.color_fragment="#ifdef USE_COLOR\n\tdiffuseColor.rgb *= vColor;\n#endif";THREE.ShaderChunk.color_pars_fragment="#ifdef USE_COLOR\n\tvarying vec3 vColor;\n#endif\n";
THREE.ShaderChunk.color_pars_vertex="#ifdef USE_COLOR\n\tvarying vec3 vColor;\n#endif";THREE.ShaderChunk.color_vertex="#ifdef USE_COLOR\n\tvColor.xyz = color.xyz;\n#endif";THREE.ShaderChunk.common="#define PI 3.14159265359\n#define PI2 6.28318530718\n#define RECIPROCAL_PI 0.31830988618\n#define RECIPROCAL_PI2 0.15915494\n#define LOG2 1.442695\n#define EPSILON 1e-6\n#define saturate(a) clamp( a, 0.0, 1.0 )\n#define whiteCompliment(a) ( 1.0 - saturate( a ) )\nfloat pow2( const in float x ) { return x*x; }\nfloat pow3( const in float x ) { return x*x*x; }\nfloat pow4( const in float x ) { float x2 = x*x; return x2*x2; }\nfloat average( const in vec3 color ) { return dot( color, vec3( 0.3333 ) ); }\nhighp float rand( const in vec2 uv ) {\n\tconst highp float a = 12.9898, b = 78.233, c = 43758.5453;\n\thighp float dt = dot( uv.xy, vec2( a,b ) ), sn = mod( dt, PI );\n\treturn fract(sin(sn) * c);\n}\nstruct IncidentLight {\n\tvec3 color;\n\tvec3 direction;\n\tbool visible;\n};\nstruct ReflectedLight {\n\tvec3 directDiffuse;\n\tvec3 directSpecular;\n\tvec3 indirectDiffuse;\n\tvec3 indirectSpecular;\n};\nstruct GeometricContext {\n\tvec3 position;\n\tvec3 normal;\n\tvec3 viewDir;\n};\nvec3 transformDirection( in vec3 dir, in mat4 matrix ) {\n\treturn normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );\n}\nvec3 inverseTransformDirection( in vec3 dir, in mat4 matrix ) {\n\treturn normalize( ( vec4( dir, 0.0 ) * matrix ).xyz );\n}\nvec3 projectOnPlane(in vec3 point, in vec3 pointOnPlane, in vec3 planeNormal ) {\n\tfloat distance = dot( planeNormal, point - pointOnPlane );\n\treturn - distance * planeNormal + point;\n}\nfloat sideOfPlane( in vec3 point, in vec3 pointOnPlane, in vec3 planeNormal ) {\n\treturn sign( dot( point - pointOnPlane, planeNormal ) );\n}\nvec3 linePlaneIntersect( in vec3 pointOnLine, in vec3 lineDirection, in vec3 pointOnPlane, in vec3 planeNormal ) {\n\treturn lineDirection * ( dot( planeNormal, pointOnPlane - pointOnLine ) / dot( planeNormal, lineDirection ) ) + pointOnLine;\n}\n";
THREE.ShaderChunk.cube_uv_reflection_fragment="#ifdef ENVMAP_TYPE_CUBE_UV\n#define cubeUV_textureSize (1024.0)\nint getFaceFromDirection(vec3 direction) {\n\tvec3 absDirection = abs(direction);\n\tint face = -1;\n\tif( absDirection.x > absDirection.z ) {\n\t\tif(absDirection.x > absDirection.y )\n\t\t\tface = direction.x > 0.0 ? 0 : 3;\n\t\telse\n\t\t\tface = direction.y > 0.0 ? 1 : 4;\n\t}\n\telse {\n\t\tif(absDirection.z > absDirection.y )\n\t\t\tface = direction.z > 0.0 ? 2 : 5;\n\t\telse\n\t\t\tface = direction.y > 0.0 ? 1 : 4;\n\t}\n\treturn face;\n}\n#define cubeUV_maxLods1  (log2(cubeUV_textureSize*0.25) - 1.0)\n#define cubeUV_rangeClamp (exp2((6.0 - 1.0) * 2.0))\nvec2 MipLevelInfo( vec3 vec, float roughnessLevel, float roughness ) {\n\tfloat scale = exp2(cubeUV_maxLods1 - roughnessLevel);\n\tfloat dxRoughness = dFdx(roughness);\n\tfloat dyRoughness = dFdy(roughness);\n\tvec3 dx = dFdx( vec * scale * dxRoughness );\n\tvec3 dy = dFdy( vec * scale * dyRoughness );\n\tfloat d = max( dot( dx, dx ), dot( dy, dy ) );\n\td = clamp(d, 1.0, cubeUV_rangeClamp);\n\tfloat mipLevel = 0.5 * log2(d);\n\treturn vec2(floor(mipLevel), fract(mipLevel));\n}\n#define cubeUV_maxLods2 (log2(cubeUV_textureSize*0.25) - 2.0)\n#define cubeUV_rcpTextureSize (1.0 / cubeUV_textureSize)\nvec2 getCubeUV(vec3 direction, float roughnessLevel, float mipLevel) {\n\tmipLevel = roughnessLevel > cubeUV_maxLods2 - 3.0 ? 0.0 : mipLevel;\n\tfloat a = 16.0 * cubeUV_rcpTextureSize;\n\tvec2 exp2_packed = exp2( vec2( roughnessLevel, mipLevel ) );\n\tvec2 rcp_exp2_packed = vec2( 1.0 ) / exp2_packed;\n\tfloat powScale = exp2_packed.x * exp2_packed.y;\n\tfloat scale = rcp_exp2_packed.x * rcp_exp2_packed.y * 0.25;\n\tfloat mipOffset = 0.75*(1.0 - rcp_exp2_packed.y) * rcp_exp2_packed.x;\n\tbool bRes = mipLevel == 0.0;\n\tscale =  bRes && (scale < a) ? a : scale;\n\tvec3 r;\n\tvec2 offset;\n\tint face = getFaceFromDirection(direction);\n\tfloat rcpPowScale = 1.0 / powScale;\n\tif( face == 0) {\n\t\tr = vec3(direction.x, -direction.z, direction.y);\n\t\toffset = vec2(0.0+mipOffset,0.75 * rcpPowScale);\n\t\toffset.y = bRes && (offset.y < 2.0*a) ?  a : offset.y;\n\t}\n\telse if( face == 1) {\n\t\tr = vec3(direction.y, direction.x, direction.z);\n\t\toffset = vec2(scale+mipOffset, 0.75 * rcpPowScale);\n\t\toffset.y = bRes && (offset.y < 2.0*a) ?  a : offset.y;\n\t}\n\telse if( face == 2) {\n\t\tr = vec3(direction.z, direction.x, direction.y);\n\t\toffset = vec2(2.0*scale+mipOffset, 0.75 * rcpPowScale);\n\t\toffset.y = bRes && (offset.y < 2.0*a) ?  a : offset.y;\n\t}\n\telse if( face == 3) {\n\t\tr = vec3(direction.x, direction.z, direction.y);\n\t\toffset = vec2(0.0+mipOffset,0.5 * rcpPowScale);\n\t\toffset.y = bRes && (offset.y < 2.0*a) ?  0.0 : offset.y;\n\t}\n\telse if( face == 4) {\n\t\tr = vec3(direction.y, direction.x, -direction.z);\n\t\toffset = vec2(scale+mipOffset, 0.5 * rcpPowScale);\n\t\toffset.y = bRes && (offset.y < 2.0*a) ?  0.0 : offset.y;\n\t}\n\telse {\n\t\tr = vec3(direction.z, -direction.x, direction.y);\n\t\toffset = vec2(2.0*scale+mipOffset, 0.5 * rcpPowScale);\n\t\toffset.y = bRes && (offset.y < 2.0*a) ?  0.0 : offset.y;\n\t}\n\tr = normalize(r);\n\tfloat texelOffset = 0.5 * cubeUV_rcpTextureSize;\n\tvec2 s = ( r.yz / abs( r.x ) + vec2( 1.0 ) ) * 0.5;\n\tvec2 base = offset + vec2( texelOffset );\n\treturn base + s * ( scale - 2.0 * texelOffset );\n}\n#define cubeUV_maxLods3 (log2(cubeUV_textureSize*0.25) - 3.0)\nvec4 textureCubeUV(vec3 reflectedDirection, float roughness ) {\n\tfloat roughnessVal = roughness* cubeUV_maxLods3;\n\tfloat r1 = floor(roughnessVal);\n\tfloat r2 = r1 + 1.0;\n\tfloat t = fract(roughnessVal);\n\tvec2 mipInfo = MipLevelInfo(reflectedDirection, r1, roughness);\n\tfloat s = mipInfo.y;\n\tfloat level0 = mipInfo.x;\n\tfloat level1 = level0 + 1.0;\n\tlevel1 = level1 > 5.0 ? 5.0 : level1;\n\tlevel0 += min( floor( s + 0.5 ), 5.0 );\n\tvec2 uv_10 = getCubeUV(reflectedDirection, r1, level0);\n\tvec4 color10 = envMapTexelToLinear(texture2D(envMap, uv_10));\n\tvec2 uv_20 = getCubeUV(reflectedDirection, r2, level0);\n\tvec4 color20 = envMapTexelToLinear(texture2D(envMap, uv_20));\n\tvec4 result = mix(color10, color20, t);\n\treturn vec4(result.rgb, 1.0);\n}\n#endif\n";
THREE.ShaderChunk.defaultnormal_vertex="#ifdef FLIP_SIDED\n\tobjectNormal = -objectNormal;\n#endif\nvec3 transformedNormal = normalMatrix * objectNormal;\n";THREE.ShaderChunk.displacementmap_vertex="#ifdef USE_DISPLACEMENTMAP\n\ttransformed += normal * ( texture2D( displacementMap, uv ).x * displacementScale + displacementBias );\n#endif\n";THREE.ShaderChunk.displacementmap_pars_vertex="#ifdef USE_DISPLACEMENTMAP\n\tuniform sampler2D displacementMap;\n\tuniform float displacementScale;\n\tuniform float displacementBias;\n#endif\n";
THREE.ShaderChunk.emissivemap_fragment="#ifdef USE_EMISSIVEMAP\n\tvec4 emissiveColor = texture2D( emissiveMap, vUv );\n\temissiveColor.rgb = emissiveMapTexelToLinear( emissiveColor ).rgb;\n\ttotalEmissiveRadiance *= emissiveColor.rgb;\n#endif\n";THREE.ShaderChunk.emissivemap_pars_fragment="#ifdef USE_EMISSIVEMAP\n\tuniform sampler2D emissiveMap;\n#endif\n";THREE.ShaderChunk.encodings_pars_fragment="\nvec4 LinearToLinear( in vec4 value ) {\n  return value;\n}\nvec4 GammaToLinear( in vec4 value, in float gammaFactor ) {\n  return vec4( pow( value.xyz, vec3( gammaFactor ) ), value.w );\n}\nvec4 LinearToGamma( in vec4 value, in float gammaFactor ) {\n  return vec4( pow( value.xyz, vec3( 1.0 / gammaFactor ) ), value.w );\n}\nvec4 sRGBToLinear( in vec4 value ) {\n  return vec4( mix( pow( value.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), value.rgb * 0.0773993808, vec3( lessThanEqual( value.rgb, vec3( 0.04045 ) ) ) ), value.w );\n}\nvec4 LinearTosRGB( in vec4 value ) {\n  return vec4( mix( pow( value.rgb, vec3( 0.41666 ) ) * 1.055 - vec3( 0.055 ), value.rgb * 12.92, vec3( lessThanEqual( value.rgb, vec3( 0.0031308 ) ) ) ), value.w );\n}\nvec4 RGBEToLinear( in vec4 value ) {\n  return vec4( value.rgb * exp2( value.a * 255.0 - 128.0 ), 1.0 );\n}\nvec4 LinearToRGBE( in vec4 value ) {\n  float maxComponent = max( max( value.r, value.g ), value.b );\n  float fExp = clamp( ceil( log2( maxComponent ) ), -128.0, 127.0 );\n  return vec4( value.rgb / exp2( fExp ), ( fExp + 128.0 ) / 255.0 );\n}\nvec4 RGBMToLinear( in vec4 value, in float maxRange ) {\n  return vec4( value.xyz * value.w * maxRange, 1.0 );\n}\nvec4 LinearToRGBM( in vec4 value, in float maxRange ) {\n  float maxRGB = max( value.x, max( value.g, value.b ) );\n  float M      = clamp( maxRGB / maxRange, 0.0, 1.0 );\n  M            = ceil( M * 255.0 ) / 255.0;\n  return vec4( value.rgb / ( M * maxRange ), M );\n}\nvec4 RGBDToLinear( in vec4 value, in float maxRange ) {\n    return vec4( value.rgb * ( ( maxRange / 255.0 ) / value.a ), 1.0 );\n}\nvec4 LinearToRGBD( in vec4 value, in float maxRange ) {\n    float maxRGB = max( value.x, max( value.g, value.b ) );\n    float D      = max( maxRange / maxRGB, 1.0 );\n    D            = min( floor( D ) / 255.0, 1.0 );\n    return vec4( value.rgb * ( D * ( 255.0 / maxRange ) ), D );\n}\nconst mat3 cLogLuvM = mat3( 0.2209, 0.3390, 0.4184, 0.1138, 0.6780, 0.7319, 0.0102, 0.1130, 0.2969 );\nvec4 LinearToLogLuv( in vec4 value )  {\n  vec3 Xp_Y_XYZp = value.rgb * cLogLuvM;\n  Xp_Y_XYZp = max(Xp_Y_XYZp, vec3(1e-6, 1e-6, 1e-6));\n  vec4 vResult;\n  vResult.xy = Xp_Y_XYZp.xy / Xp_Y_XYZp.z;\n  float Le = 2.0 * log2(Xp_Y_XYZp.y) + 127.0;\n  vResult.w = fract(Le);\n  vResult.z = (Le - (floor(vResult.w*255.0))/255.0)/255.0;\n  return vResult;\n}\nconst mat3 cLogLuvInverseM = mat3( 6.0014, -2.7008, -1.7996, -1.3320, 3.1029, -5.7721, 0.3008, -1.0882, 5.6268 );\nvec4 LogLuvToLinear( in vec4 value ) {\n  float Le = value.z * 255.0 + value.w;\n  vec3 Xp_Y_XYZp;\n  Xp_Y_XYZp.y = exp2((Le - 127.0) / 2.0);\n  Xp_Y_XYZp.z = Xp_Y_XYZp.y / value.y;\n  Xp_Y_XYZp.x = value.x * Xp_Y_XYZp.z;\n  vec3 vRGB = Xp_Y_XYZp.rgb * cLogLuvInverseM;\n  return vec4( max(vRGB, 0.0), 1.0 );\n}\n";
THREE.ShaderChunk.encodings_fragment="  gl_FragColor = linearToOutputTexel( gl_FragColor );\n";THREE.ShaderChunk.envmap_fragment="#ifdef USE_ENVMAP\n\t#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG )\n\t\tvec3 cameraToVertex = normalize( vWorldPosition - cameraPosition );\n\t\tvec3 worldNormal = inverseTransformDirection( normal, viewMatrix );\n\t\t#ifdef ENVMAP_MODE_REFLECTION\n\t\t\tvec3 reflectVec = reflect( cameraToVertex, worldNormal );\n\t\t#else\n\t\t\tvec3 reflectVec = refract( cameraToVertex, worldNormal, refractionRatio );\n\t\t#endif\n\t#else\n\t\tvec3 reflectVec = vReflect;\n\t#endif\n\t#ifdef ENVMAP_TYPE_CUBE\n\t\tvec4 envColor = textureCube( envMap, flipNormal * vec3( flipEnvMap * reflectVec.x, reflectVec.yz ) );\n\t#elif defined( ENVMAP_TYPE_EQUIREC )\n\t\tvec2 sampleUV;\n\t\tsampleUV.y = saturate( flipNormal * reflectVec.y * 0.5 + 0.5 );\n\t\tsampleUV.x = atan( flipNormal * reflectVec.z, flipNormal * reflectVec.x ) * RECIPROCAL_PI2 + 0.5;\n\t\tvec4 envColor = texture2D( envMap, sampleUV );\n\t#elif defined( ENVMAP_TYPE_SPHERE )\n\t\tvec3 reflectView = flipNormal * normalize( ( viewMatrix * vec4( reflectVec, 0.0 ) ).xyz + vec3( 0.0, 0.0, 1.0 ) );\n\t\tvec4 envColor = texture2D( envMap, reflectView.xy * 0.5 + 0.5 );\n\t#endif\n\tenvColor = envMapTexelToLinear( envColor );\n\t#ifdef ENVMAP_BLENDING_MULTIPLY\n\t\toutgoingLight = mix( outgoingLight, outgoingLight * envColor.xyz, specularStrength * reflectivity );\n\t#elif defined( ENVMAP_BLENDING_MIX )\n\t\toutgoingLight = mix( outgoingLight, envColor.xyz, specularStrength * reflectivity );\n\t#elif defined( ENVMAP_BLENDING_ADD )\n\t\toutgoingLight += envColor.xyz * specularStrength * reflectivity;\n\t#endif\n#endif\n";
THREE.ShaderChunk.envmap_pars_fragment="#if defined( USE_ENVMAP ) || defined( PHYSICAL )\n\tuniform float reflectivity;\n\tuniform float envMapIntenstiy;\n#endif\n#ifdef USE_ENVMAP\n\t#if ! defined( PHYSICAL ) && ( defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) )\n\t\tvarying vec3 vWorldPosition;\n\t#endif\n\t#ifdef ENVMAP_TYPE_CUBE\n\t\tuniform samplerCube envMap;\n\t#else\n\t\tuniform sampler2D envMap;\n\t#endif\n\tuniform float flipEnvMap;\n\t#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( PHYSICAL )\n\t\tuniform float refractionRatio;\n\t#else\n\t\tvarying vec3 vReflect;\n\t#endif\n#endif\n";
THREE.ShaderChunk.envmap_pars_vertex="#ifdef USE_ENVMAP\n\t#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG )\n\t\tvarying vec3 vWorldPosition;\n\t#else\n\t\tvarying vec3 vReflect;\n\t\tuniform float refractionRatio;\n\t#endif\n#endif\n";THREE.ShaderChunk.envmap_vertex="#ifdef USE_ENVMAP\n\t#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG )\n\t\tvWorldPosition = worldPosition.xyz;\n\t#else\n\t\tvec3 cameraToVertex = normalize( worldPosition.xyz - cameraPosition );\n\t\tvec3 worldNormal = inverseTransformDirection( transformedNormal, viewMatrix );\n\t\t#ifdef ENVMAP_MODE_REFLECTION\n\t\t\tvReflect = reflect( cameraToVertex, worldNormal );\n\t\t#else\n\t\t\tvReflect = refract( cameraToVertex, worldNormal, refractionRatio );\n\t\t#endif\n\t#endif\n#endif\n";
THREE.ShaderChunk.fog_fragment="#ifdef USE_FOG\n\t#ifdef USE_LOGDEPTHBUF_EXT\n\t\tfloat depth = gl_FragDepthEXT / gl_FragCoord.w;\n\t#else\n\t\tfloat depth = gl_FragCoord.z / gl_FragCoord.w;\n\t#endif\n\t#ifdef FOG_EXP2\n\t\tfloat fogFactor = whiteCompliment( exp2( - fogDensity * fogDensity * depth * depth * LOG2 ) );\n\t#else\n\t\tfloat fogFactor = smoothstep( fogNear, fogFar, depth );\n\t#endif\n\tgl_FragColor.rgb = mix( gl_FragColor.rgb, fogColor, fogFactor );\n#endif\n";
THREE.ShaderChunk.fog_pars_fragment="#ifdef USE_FOG\n\tuniform vec3 fogColor;\n\t#ifdef FOG_EXP2\n\t\tuniform float fogDensity;\n\t#else\n\t\tuniform float fogNear;\n\t\tuniform float fogFar;\n\t#endif\n#endif";THREE.ShaderChunk.lightmap_fragment="#ifdef USE_LIGHTMAP\n\treflectedLight.indirectDiffuse += PI * texture2D( lightMap, vUv2 ).xyz * lightMapIntensity;\n#endif\n";THREE.ShaderChunk.lightmap_pars_fragment="#ifdef USE_LIGHTMAP\n\tuniform sampler2D lightMap;\n\tuniform float lightMapIntensity;\n#endif";
THREE.ShaderChunk.lights_lambert_vertex="vec3 diffuse = vec3( 1.0 );\nGeometricContext geometry;\ngeometry.position = mvPosition.xyz;\ngeometry.normal = normalize( transformedNormal );\ngeometry.viewDir = normalize( -mvPosition.xyz );\nGeometricContext backGeometry;\nbackGeometry.position = geometry.position;\nbackGeometry.normal = -geometry.normal;\nbackGeometry.viewDir = geometry.viewDir;\nvLightFront = vec3( 0.0 );\n#ifdef DOUBLE_SIDED\n\tvLightBack = vec3( 0.0 );\n#endif\nIncidentLight directLight;\nfloat dotNL;\nvec3 directLightColor_Diffuse;\n#if NUM_POINT_LIGHTS > 0\n\tfor ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {\n\t\tgetPointDirectLightIrradiance( pointLights[ i ], geometry, directLight );\n\t\tdotNL = dot( geometry.normal, directLight.direction );\n\t\tdirectLightColor_Diffuse = PI * directLight.color;\n\t\tvLightFront += saturate( dotNL ) * directLightColor_Diffuse;\n\t\t#ifdef DOUBLE_SIDED\n\t\t\tvLightBack += saturate( -dotNL ) * directLightColor_Diffuse;\n\t\t#endif\n\t}\n#endif\n#if NUM_SPOT_LIGHTS > 0\n\tfor ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {\n\t\tgetSpotDirectLightIrradiance( spotLights[ i ], geometry, directLight );\n\t\tdotNL = dot( geometry.normal, directLight.direction );\n\t\tdirectLightColor_Diffuse = PI * directLight.color;\n\t\tvLightFront += saturate( dotNL ) * directLightColor_Diffuse;\n\t\t#ifdef DOUBLE_SIDED\n\t\t\tvLightBack += saturate( -dotNL ) * directLightColor_Diffuse;\n\t\t#endif\n\t}\n#endif\n#if NUM_DIR_LIGHTS > 0\n\tfor ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {\n\t\tgetDirectionalDirectLightIrradiance( directionalLights[ i ], geometry, directLight );\n\t\tdotNL = dot( geometry.normal, directLight.direction );\n\t\tdirectLightColor_Diffuse = PI * directLight.color;\n\t\tvLightFront += saturate( dotNL ) * directLightColor_Diffuse;\n\t\t#ifdef DOUBLE_SIDED\n\t\t\tvLightBack += saturate( -dotNL ) * directLightColor_Diffuse;\n\t\t#endif\n\t}\n#endif\n#if NUM_HEMI_LIGHTS > 0\n\tfor ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {\n\t\tvLightFront += getHemisphereLightIrradiance( hemisphereLights[ i ], geometry );\n\t\t#ifdef DOUBLE_SIDED\n\t\t\tvLightBack += getHemisphereLightIrradiance( hemisphereLights[ i ], backGeometry );\n\t\t#endif\n\t}\n#endif\n";
THREE.ShaderChunk.lights_pars="uniform vec3 ambientLightColor;\nvec3 getAmbientLightIrradiance( const in vec3 ambientLightColor ) {\n\tvec3 irradiance = ambientLightColor;\n\t#ifndef PHYSICALLY_CORRECT_LIGHTS\n\t\tirradiance *= PI;\n\t#endif\n\treturn irradiance;\n}\n#if NUM_DIR_LIGHTS > 0\n\tstruct DirectionalLight {\n\t\tvec3 direction;\n\t\tvec3 color;\n\t\tint shadow;\n\t\tfloat shadowBias;\n\t\tfloat shadowRadius;\n\t\tvec2 shadowMapSize;\n\t};\n\tuniform DirectionalLight directionalLights[ NUM_DIR_LIGHTS ];\n\tvoid getDirectionalDirectLightIrradiance( const in DirectionalLight directionalLight, const in GeometricContext geometry, out IncidentLight directLight ) {\n\t\tdirectLight.color = directionalLight.color;\n\t\tdirectLight.direction = directionalLight.direction;\n\t\tdirectLight.visible = true;\n\t}\n#endif\n#if NUM_POINT_LIGHTS > 0\n\tstruct PointLight {\n\t\tvec3 position;\n\t\tvec3 color;\n\t\tfloat distance;\n\t\tfloat decay;\n\t\tint shadow;\n\t\tfloat shadowBias;\n\t\tfloat shadowRadius;\n\t\tvec2 shadowMapSize;\n\t};\n\tuniform PointLight pointLights[ NUM_POINT_LIGHTS ];\n\tvoid getPointDirectLightIrradiance( const in PointLight pointLight, const in GeometricContext geometry, out IncidentLight directLight ) {\n\t\tvec3 lVector = pointLight.position - geometry.position;\n\t\tdirectLight.direction = normalize( lVector );\n\t\tfloat lightDistance = length( lVector );\n\t\tif ( testLightInRange( lightDistance, pointLight.distance ) ) {\n\t\t\tdirectLight.color = pointLight.color;\n\t\t\tdirectLight.color *= punctualLightIntensityToIrradianceFactor( lightDistance, pointLight.distance, pointLight.decay );\n\t\t\tdirectLight.visible = true;\n\t\t} else {\n\t\t\tdirectLight.color = vec3( 0.0 );\n\t\t\tdirectLight.visible = false;\n\t\t}\n\t}\n#endif\n#if NUM_SPOT_LIGHTS > 0\n\tstruct SpotLight {\n\t\tvec3 position;\n\t\tvec3 direction;\n\t\tvec3 color;\n\t\tfloat distance;\n\t\tfloat decay;\n\t\tfloat coneCos;\n\t\tfloat penumbraCos;\n\t\tint shadow;\n\t\tfloat shadowBias;\n\t\tfloat shadowRadius;\n\t\tvec2 shadowMapSize;\n\t};\n\tuniform SpotLight spotLights[ NUM_SPOT_LIGHTS ];\n\tvoid getSpotDirectLightIrradiance( const in SpotLight spotLight, const in GeometricContext geometry, out IncidentLight directLight  ) {\n\t\tvec3 lVector = spotLight.position - geometry.position;\n\t\tdirectLight.direction = normalize( lVector );\n\t\tfloat lightDistance = length( lVector );\n\t\tfloat angleCos = dot( directLight.direction, spotLight.direction );\n\t\tif ( all( bvec2( angleCos > spotLight.coneCos, testLightInRange( lightDistance, spotLight.distance ) ) ) ) {\n\t\t\tfloat spotEffect = smoothstep( spotLight.coneCos, spotLight.penumbraCos, angleCos );\n\t\t\tdirectLight.color = spotLight.color;\n\t\t\tdirectLight.color *= spotEffect * punctualLightIntensityToIrradianceFactor( lightDistance, spotLight.distance, spotLight.decay );\n\t\t\tdirectLight.visible = true;\n\t\t} else {\n\t\t\tdirectLight.color = vec3( 0.0 );\n\t\t\tdirectLight.visible = false;\n\t\t}\n\t}\n#endif\n#if NUM_HEMI_LIGHTS > 0\n\tstruct HemisphereLight {\n\t\tvec3 direction;\n\t\tvec3 skyColor;\n\t\tvec3 groundColor;\n\t};\n\tuniform HemisphereLight hemisphereLights[ NUM_HEMI_LIGHTS ];\n\tvec3 getHemisphereLightIrradiance( const in HemisphereLight hemiLight, const in GeometricContext geometry ) {\n\t\tfloat dotNL = dot( geometry.normal, hemiLight.direction );\n\t\tfloat hemiDiffuseWeight = 0.5 * dotNL + 0.5;\n\t\tvec3 irradiance = mix( hemiLight.groundColor, hemiLight.skyColor, hemiDiffuseWeight );\n\t\t#ifndef PHYSICALLY_CORRECT_LIGHTS\n\t\t\tirradiance *= PI;\n\t\t#endif\n\t\treturn irradiance;\n\t}\n#endif\n#if defined( USE_ENVMAP ) && defined( PHYSICAL )\n\tvec3 getLightProbeIndirectIrradiance( const in GeometricContext geometry, const in int maxMIPLevel ) {\n\t\t#include <normal_flip>\n\t\tvec3 worldNormal = inverseTransformDirection( geometry.normal, viewMatrix );\n\t\t#ifdef ENVMAP_TYPE_CUBE\n\t\t\tvec3 queryVec = flipNormal * vec3( flipEnvMap * worldNormal.x, worldNormal.yz );\n\t\t\t#ifdef TEXTURE_LOD_EXT\n\t\t\t\tvec4 envMapColor = textureCubeLodEXT( envMap, queryVec, float( maxMIPLevel ) );\n\t\t\t#else\n\t\t\t\tvec4 envMapColor = textureCube( envMap, queryVec, float( maxMIPLevel ) );\n\t\t\t#endif\n\t\t\tenvMapColor.rgb = envMapTexelToLinear( envMapColor ).rgb;\n\t\t#elif defined( ENVMAP_TYPE_CUBE_UV )\n\t\t\tvec3 queryVec = flipNormal * vec3( flipEnvMap * worldNormal.x, worldNormal.yz );\n\t\t\tvec4 envMapColor = textureCubeUV( queryVec, 1.0 );\n\t\t#else\n\t\t\tvec4 envMapColor = vec4( 0.0 );\n\t\t#endif\n\t\treturn PI * envMapColor.rgb * envMapIntensity;\n\t}\n\tfloat getSpecularMIPLevel( const in float blinnShininessExponent, const in int maxMIPLevel ) {\n\t\tfloat maxMIPLevelScalar = float( maxMIPLevel );\n\t\tfloat desiredMIPLevel = maxMIPLevelScalar - 0.79248 - 0.5 * log2( pow2( blinnShininessExponent ) + 1.0 );\n\t\treturn clamp( desiredMIPLevel, 0.0, maxMIPLevelScalar );\n\t}\n\tvec3 getLightProbeIndirectRadiance( const in GeometricContext geometry, const in float blinnShininessExponent, const in int maxMIPLevel ) {\n\t\t#ifdef ENVMAP_MODE_REFLECTION\n\t\t\tvec3 reflectVec = reflect( -geometry.viewDir, geometry.normal );\n\t\t#else\n\t\t\tvec3 reflectVec = refract( -geometry.viewDir, geometry.normal, refractionRatio );\n\t\t#endif\n\t\t#include <normal_flip>\n\t\treflectVec = inverseTransformDirection( reflectVec, viewMatrix );\n\t\tfloat specularMIPLevel = getSpecularMIPLevel( blinnShininessExponent, maxMIPLevel );\n\t\t#ifdef ENVMAP_TYPE_CUBE\n\t\t\tvec3 queryReflectVec = flipNormal * vec3( flipEnvMap * reflectVec.x, reflectVec.yz );\n\t\t\t#ifdef TEXTURE_LOD_EXT\n\t\t\t\tvec4 envMapColor = textureCubeLodEXT( envMap, queryReflectVec, specularMIPLevel );\n\t\t\t#else\n\t\t\t\tvec4 envMapColor = textureCube( envMap, queryReflectVec, specularMIPLevel );\n\t\t\t#endif\n\t\t\tenvMapColor.rgb = envMapTexelToLinear( envMapColor ).rgb;\n\t\t#elif defined( ENVMAP_TYPE_CUBE_UV )\n\t\t\tvec3 queryReflectVec = flipNormal * vec3( flipEnvMap * reflectVec.x, reflectVec.yz );\n\t\t\tvec4 envMapColor = textureCubeUV(queryReflectVec, BlinnExponentToGGXRoughness(blinnShininessExponent));\n\t\t#elif defined( ENVMAP_TYPE_EQUIREC )\n\t\t\tvec2 sampleUV;\n\t\t\tsampleUV.y = saturate( flipNormal * reflectVec.y * 0.5 + 0.5 );\n\t\t\tsampleUV.x = atan( flipNormal * reflectVec.z, flipNormal * reflectVec.x ) * RECIPROCAL_PI2 + 0.5;\n\t\t\t#ifdef TEXTURE_LOD_EXT\n\t\t\t\tvec4 envMapColor = texture2DLodEXT( envMap, sampleUV, specularMIPLevel );\n\t\t\t#else\n\t\t\t\tvec4 envMapColor = texture2D( envMap, sampleUV, specularMIPLevel );\n\t\t\t#endif\n\t\t\tenvMapColor.rgb = envMapTexelToLinear( envMapColor ).rgb;\n\t\t#elif defined( ENVMAP_TYPE_SPHERE )\n\t\t\tvec3 reflectView = flipNormal * normalize( ( viewMatrix * vec4( reflectVec, 0.0 ) ).xyz + vec3( 0.0,0.0,1.0 ) );\n\t\t\t#ifdef TEXTURE_LOD_EXT\n\t\t\t\tvec4 envMapColor = texture2DLodEXT( envMap, reflectView.xy * 0.5 + 0.5, specularMIPLevel );\n\t\t\t#else\n\t\t\t\tvec4 envMapColor = texture2D( envMap, reflectView.xy * 0.5 + 0.5, specularMIPLevel );\n\t\t\t#endif\n\t\t\tenvMapColor.rgb = envMapTexelToLinear( envMapColor ).rgb;\n\t\t#endif\n\t\treturn envMapColor.rgb * envMapIntensity;\n\t}\n#endif\n";
THREE.ShaderChunk.lights_phong_fragment="BlinnPhongMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb;\nmaterial.specularColor = specular;\nmaterial.specularShininess = shininess;\nmaterial.specularStrength = specularStrength;\n";THREE.ShaderChunk.lights_phong_pars_fragment="varying vec3 vViewPosition;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\nstruct BlinnPhongMaterial {\n\tvec3\tdiffuseColor;\n\tvec3\tspecularColor;\n\tfloat\tspecularShininess;\n\tfloat\tspecularStrength;\n};\nvoid RE_Direct_BlinnPhong( const in IncidentLight directLight, const in GeometricContext geometry, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {\n\tfloat dotNL = saturate( dot( geometry.normal, directLight.direction ) );\n\tvec3 irradiance = dotNL * directLight.color;\n\t#ifndef PHYSICALLY_CORRECT_LIGHTS\n\t\tirradiance *= PI;\n\t#endif\n\treflectedLight.directDiffuse += irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );\n\treflectedLight.directSpecular += irradiance * BRDF_Specular_BlinnPhong( directLight, geometry, material.specularColor, material.specularShininess ) * material.specularStrength;\n}\nvoid RE_IndirectDiffuse_BlinnPhong( const in vec3 irradiance, const in GeometricContext geometry, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );\n}\n#define RE_Direct\t\t\t\tRE_Direct_BlinnPhong\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_BlinnPhong\n#define Material_LightProbeLOD( material )\t(0)\n";
THREE.ShaderChunk.lights_physical_fragment="PhysicalMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb * ( 1.0 - metalnessFactor );\nmaterial.specularRoughness = clamp( roughnessFactor, 0.04, 1.0 );\n#ifdef STANDARD\n\tmaterial.specularColor = mix( vec3( DEFAULT_SPECULAR_COEFFICIENT ), diffuseColor.rgb, metalnessFactor );\n#else\n\tmaterial.specularColor = mix( vec3( MAXIMUM_SPECULAR_COEFFICIENT * pow2( reflectivity ) ), diffuseColor.rgb, metalnessFactor );\n\tmaterial.clearCoat = saturate( clearCoat );\tmaterial.clearCoatRoughness = clamp( clearCoatRoughness, 0.04, 1.0 );\n#endif\n";
THREE.ShaderChunk.lights_physical_pars_fragment="struct PhysicalMaterial {\n\tvec3\tdiffuseColor;\n\tfloat\tspecularRoughness;\n\tvec3\tspecularColor;\n\t#ifndef STANDARD\n\t\tfloat clearCoat;\n\t\tfloat clearCoatRoughness;\n\t#endif\n};\n#define MAXIMUM_SPECULAR_COEFFICIENT 0.16\n#define DEFAULT_SPECULAR_COEFFICIENT 0.04\nfloat clearCoatDHRApprox( const in float roughness, const in float dotNL ) {\n\treturn DEFAULT_SPECULAR_COEFFICIENT + ( 1.0 - DEFAULT_SPECULAR_COEFFICIENT ) * ( pow( 1.0 - dotNL, 5.0 ) * pow( 1.0 - roughness, 2.0 ) );\n}\nvoid RE_Direct_Physical( const in IncidentLight directLight, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\tfloat dotNL = saturate( dot( geometry.normal, directLight.direction ) );\n\tvec3 irradiance = dotNL * directLight.color;\n\t#ifndef PHYSICALLY_CORRECT_LIGHTS\n\t\tirradiance *= PI;\n\t#endif\n\t#ifndef STANDARD\n\t\tfloat clearCoatDHR = material.clearCoat * clearCoatDHRApprox( material.clearCoatRoughness, dotNL );\n\t#else\n\t\tfloat clearCoatDHR = 0.0;\n\t#endif\n\treflectedLight.directSpecular += ( 1.0 - clearCoatDHR ) * irradiance * BRDF_Specular_GGX( directLight, geometry, material.specularColor, material.specularRoughness );\n\treflectedLight.directDiffuse += ( 1.0 - clearCoatDHR ) * irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );\n\t#ifndef STANDARD\n\t\treflectedLight.directSpecular += irradiance * material.clearCoat * BRDF_Specular_GGX( directLight, geometry, vec3( DEFAULT_SPECULAR_COEFFICIENT ), material.clearCoatRoughness );\n\t#endif\n}\nvoid RE_IndirectDiffuse_Physical( const in vec3 irradiance, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );\n}\nvoid RE_IndirectSpecular_Physical( const in vec3 radiance, const in vec3 clearCoatRadiance, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\t#ifndef STANDARD\n\t\tfloat dotNV = saturate( dot( geometry.normal, geometry.viewDir ) );\n\t\tfloat dotNL = dotNV;\n\t\tfloat clearCoatDHR = material.clearCoat * clearCoatDHRApprox( material.clearCoatRoughness, dotNL );\n\t#else\n\t\tfloat clearCoatDHR = 0.0;\n\t#endif\n\treflectedLight.indirectSpecular += ( 1.0 - clearCoatDHR ) * radiance * BRDF_Specular_GGX_Environment( geometry, material.specularColor, material.specularRoughness );\n\t#ifndef STANDARD\n\t\treflectedLight.indirectSpecular += clearCoatRadiance * material.clearCoat * BRDF_Specular_GGX_Environment( geometry, vec3( DEFAULT_SPECULAR_COEFFICIENT ), material.clearCoatRoughness );\n\t#endif\n}\n#define RE_Direct\t\t\t\tRE_Direct_Physical\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_Physical\n#define RE_IndirectSpecular\t\tRE_IndirectSpecular_Physical\n#define Material_BlinnShininessExponent( material )   GGXRoughnessToBlinnExponent( material.specularRoughness )\n#define Material_ClearCoat_BlinnShininessExponent( material )   GGXRoughnessToBlinnExponent( material.clearCoatRoughness )\nfloat computeSpecularOcclusion( const in float dotNV, const in float ambientOcclusion, const in float roughness ) {\n\treturn saturate( pow( dotNV + ambientOcclusion, exp2( - 16.0 * roughness - 1.0 ) ) - 1.0 + ambientOcclusion );\n}\n";
THREE.ShaderChunk.lights_template="\nGeometricContext geometry;\ngeometry.position = - vViewPosition;\ngeometry.normal = normal;\ngeometry.viewDir = normalize( vViewPosition );\nIncidentLight directLight;\n#if ( NUM_POINT_LIGHTS > 0 ) && defined( RE_Direct )\n\tPointLight pointLight;\n\tfor ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {\n\t\tpointLight = pointLights[ i ];\n\t\tgetPointDirectLightIrradiance( pointLight, geometry, directLight );\n\t\t#ifdef USE_SHADOWMAP\n\t\tdirectLight.color *= all( bvec2( pointLight.shadow, directLight.visible ) ) ? getPointShadow( pointShadowMap[ i ], pointLight.shadowMapSize, pointLight.shadowBias, pointLight.shadowRadius, vPointShadowCoord[ i ] ) : 1.0;\n\t\t#endif\n\t\tRE_Direct( directLight, geometry, material, reflectedLight );\n\t}\n#endif\n#if ( NUM_SPOT_LIGHTS > 0 ) && defined( RE_Direct )\n\tSpotLight spotLight;\n\tfor ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {\n\t\tspotLight = spotLights[ i ];\n\t\tgetSpotDirectLightIrradiance( spotLight, geometry, directLight );\n\t\t#ifdef USE_SHADOWMAP\n\t\tdirectLight.color *= all( bvec2( spotLight.shadow, directLight.visible ) ) ? getShadow( spotShadowMap[ i ], spotLight.shadowMapSize, spotLight.shadowBias, spotLight.shadowRadius, vSpotShadowCoord[ i ] ) : 1.0;\n\t\t#endif\n\t\tRE_Direct( directLight, geometry, material, reflectedLight );\n\t}\n#endif\n#if ( NUM_DIR_LIGHTS > 0 ) && defined( RE_Direct )\n\tDirectionalLight directionalLight;\n\tfor ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {\n\t\tdirectionalLight = directionalLights[ i ];\n\t\tgetDirectionalDirectLightIrradiance( directionalLight, geometry, directLight );\n\t\t#ifdef USE_SHADOWMAP\n\t\tdirectLight.color *= all( bvec2( directionalLight.shadow, directLight.visible ) ) ? getShadow( directionalShadowMap[ i ], directionalLight.shadowMapSize, directionalLight.shadowBias, directionalLight.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;\n\t\t#endif\n\t\tRE_Direct( directLight, geometry, material, reflectedLight );\n\t}\n#endif\n#if defined( RE_IndirectDiffuse )\n\tvec3 irradiance = getAmbientLightIrradiance( ambientLightColor );\n\t#ifdef USE_LIGHTMAP\n\t\tvec3 lightMapIrradiance = texture2D( lightMap, vUv2 ).xyz * lightMapIntensity;\n\t\t#ifndef PHYSICALLY_CORRECT_LIGHTS\n\t\t\tlightMapIrradiance *= PI;\n\t\t#endif\n\t\tirradiance += lightMapIrradiance;\n\t#endif\n\t#if ( NUM_HEMI_LIGHTS > 0 )\n\t\tfor ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {\n\t\t\tirradiance += getHemisphereLightIrradiance( hemisphereLights[ i ], geometry );\n\t\t}\n\t#endif\n\t#if defined( USE_ENVMAP ) && defined( PHYSICAL ) && defined( ENVMAP_TYPE_CUBE_UV )\n\t \tirradiance += getLightProbeIndirectIrradiance( geometry, 8 );\n\t#endif\n\tRE_IndirectDiffuse( irradiance, geometry, material, reflectedLight );\n#endif\n#if defined( USE_ENVMAP ) && defined( RE_IndirectSpecular )\n\tvec3 radiance = getLightProbeIndirectRadiance( geometry, Material_BlinnShininessExponent( material ), 8 );\n\t#ifndef STANDARD\n\t\tvec3 clearCoatRadiance = getLightProbeIndirectRadiance( geometry, Material_ClearCoat_BlinnShininessExponent( material ), 8 );\n\t#else\n\t\tvec3 clearCoatRadiance = vec3( 0.0 );\n\t#endif\n\t\t\n\tRE_IndirectSpecular( radiance, clearCoatRadiance, geometry, material, reflectedLight );\n#endif\n";
THREE.ShaderChunk.logdepthbuf_fragment="#if defined(USE_LOGDEPTHBUF) && defined(USE_LOGDEPTHBUF_EXT)\n\tgl_FragDepthEXT = log2(vFragDepth) * logDepthBufFC * 0.5;\n#endif";THREE.ShaderChunk.logdepthbuf_pars_fragment="#ifdef USE_LOGDEPTHBUF\n\tuniform float logDepthBufFC;\n\t#ifdef USE_LOGDEPTHBUF_EXT\n\t\tvarying float vFragDepth;\n\t#endif\n#endif\n";THREE.ShaderChunk.logdepthbuf_pars_vertex="#ifdef USE_LOGDEPTHBUF\n\t#ifdef USE_LOGDEPTHBUF_EXT\n\t\tvarying float vFragDepth;\n\t#endif\n\tuniform float logDepthBufFC;\n#endif";
THREE.ShaderChunk.logdepthbuf_vertex="#ifdef USE_LOGDEPTHBUF\n\tgl_Position.z = log2(max( EPSILON, gl_Position.w + 1.0 )) * logDepthBufFC;\n\t#ifdef USE_LOGDEPTHBUF_EXT\n\t\tvFragDepth = 1.0 + gl_Position.w;\n\t#else\n\t\tgl_Position.z = (gl_Position.z - 1.0) * gl_Position.w;\n\t#endif\n#endif\n";THREE.ShaderChunk.map_fragment="#ifdef USE_MAP\n\tvec4 texelColor = texture2D( map, vUv );\n\ttexelColor = mapTexelToLinear( texelColor );\n\tdiffuseColor *= texelColor;\n#endif\n";
THREE.ShaderChunk.map_pars_fragment="#ifdef USE_MAP\n\tuniform sampler2D map;\n#endif\n";THREE.ShaderChunk.map_particle_fragment="#ifdef USE_MAP\n\tvec4 mapTexel = texture2D( map, vec2( gl_PointCoord.x, 1.0 - gl_PointCoord.y ) * offsetRepeat.zw + offsetRepeat.xy );\n\tdiffuseColor *= mapTexelToLinear( mapTexel );\n#endif\n";THREE.ShaderChunk.map_particle_pars_fragment="#ifdef USE_MAP\n\tuniform vec4 offsetRepeat;\n\tuniform sampler2D map;\n#endif\n";THREE.ShaderChunk.metalnessmap_fragment="float metalnessFactor = metalness;\n#ifdef USE_METALNESSMAP\n\tvec4 texelMetalness = texture2D( metalnessMap, vUv );\n\tmetalnessFactor *= texelMetalness.r;\n#endif\n";
THREE.ShaderChunk.metalnessmap_pars_fragment="#ifdef USE_METALNESSMAP\n\tuniform sampler2D metalnessMap;\n#endif";THREE.ShaderChunk.morphnormal_vertex="#ifdef USE_MORPHNORMALS\n\tobjectNormal += ( morphNormal0 - normal ) * morphTargetInfluences[ 0 ];\n\tobjectNormal += ( morphNormal1 - normal ) * morphTargetInfluences[ 1 ];\n\tobjectNormal += ( morphNormal2 - normal ) * morphTargetInfluences[ 2 ];\n\tobjectNormal += ( morphNormal3 - normal ) * morphTargetInfluences[ 3 ];\n#endif\n";
THREE.ShaderChunk.morphtarget_pars_vertex="#ifdef USE_MORPHTARGETS\n\t#ifndef USE_MORPHNORMALS\n\tuniform float morphTargetInfluences[ 8 ];\n\t#else\n\tuniform float morphTargetInfluences[ 4 ];\n\t#endif\n#endif";THREE.ShaderChunk.morphtarget_vertex="#ifdef USE_MORPHTARGETS\n\ttransformed += ( morphTarget0 - position ) * morphTargetInfluences[ 0 ];\n\ttransformed += ( morphTarget1 - position ) * morphTargetInfluences[ 1 ];\n\ttransformed += ( morphTarget2 - position ) * morphTargetInfluences[ 2 ];\n\ttransformed += ( morphTarget3 - position ) * morphTargetInfluences[ 3 ];\n\t#ifndef USE_MORPHNORMALS\n\ttransformed += ( morphTarget4 - position ) * morphTargetInfluences[ 4 ];\n\ttransformed += ( morphTarget5 - position ) * morphTargetInfluences[ 5 ];\n\ttransformed += ( morphTarget6 - position ) * morphTargetInfluences[ 6 ];\n\ttransformed += ( morphTarget7 - position ) * morphTargetInfluences[ 7 ];\n\t#endif\n#endif\n";
THREE.ShaderChunk.normal_flip="#ifdef DOUBLE_SIDED\n\tfloat flipNormal = ( float( gl_FrontFacing ) * 2.0 - 1.0 );\n#else\n\tfloat flipNormal = 1.0;\n#endif\n";THREE.ShaderChunk.normal_fragment="#ifdef FLAT_SHADED\n\tvec3 fdx = vec3( dFdx( vViewPosition.x ), dFdx( vViewPosition.y ), dFdx( vViewPosition.z ) );\n\tvec3 fdy = vec3( dFdy( vViewPosition.x ), dFdy( vViewPosition.y ), dFdy( vViewPosition.z ) );\n\tvec3 normal = normalize( cross( fdx, fdy ) );\n#else\n\tvec3 normal = normalize( vNormal ) * flipNormal;\n#endif\n#ifdef USE_NORMALMAP\n\tnormal = perturbNormal2Arb( -vViewPosition, normal );\n#elif defined( USE_BUMPMAP )\n\tnormal = perturbNormalArb( -vViewPosition, normal, dHdxy_fwd() );\n#endif\n";
THREE.ShaderChunk.normalmap_pars_fragment="#ifdef USE_NORMALMAP\n\tuniform sampler2D normalMap;\n\tuniform vec2 normalScale;\n\tvec3 perturbNormal2Arb( vec3 eye_pos, vec3 surf_norm ) {\n\t\tvec3 q0 = dFdx( eye_pos.xyz );\n\t\tvec3 q1 = dFdy( eye_pos.xyz );\n\t\tvec2 st0 = dFdx( vUv.st );\n\t\tvec2 st1 = dFdy( vUv.st );\n\t\tvec3 S = normalize( q0 * st1.t - q1 * st0.t );\n\t\tvec3 T = normalize( -q0 * st1.s + q1 * st0.s );\n\t\tvec3 N = normalize( surf_norm );\n\t\tvec3 mapN = texture2D( normalMap, vUv ).xyz * 2.0 - 1.0;\n\t\tmapN.xy = normalScale * mapN.xy;\n\t\tmat3 tsn = mat3( S, T, N );\n\t\treturn normalize( tsn * mapN );\n\t}\n#endif\n";
THREE.ShaderChunk.packing="vec3 packNormalToRGB( const in vec3 normal ) {\n  return normalize( normal ) * 0.5 + 0.5;\n}\nvec3 unpackRGBToNormal( const in vec3 rgb ) {\n  return 1.0 - 2.0 * rgb.xyz;\n}\nconst float PackUpscale = 256. / 255.;const float UnpackDownscale = 255. / 256.;\nconst vec3 PackFactors = vec3( 256. * 256. * 256., 256. * 256.,  256. );\nconst vec4 UnpackFactors = UnpackDownscale / vec4( PackFactors, 1. );\nconst float ShiftRight8 = 1. / 256.;\nvec4 packDepthToRGBA( const in float v ) {\n\tvec4 r = vec4( fract( v * PackFactors ), v );\n\tr.yzw -= r.xyz * ShiftRight8;\treturn r * PackUpscale;\n}\nfloat unpackRGBAToDepth( const in vec4 v ) {\n\treturn dot( v, UnpackFactors );\n}\nfloat viewZToOrthographicDepth( const in float viewZ, const in float near, const in float far ) {\n  return ( viewZ + near ) / ( near - far );\n}\nfloat orthographicDepthToViewZ( const in float linearClipZ, const in float near, const in float far ) {\n  return linearClipZ * ( near - far ) - near;\n}\nfloat viewZToPerspectiveDepth( const in float viewZ, const in float near, const in float far ) {\n  return (( near + viewZ ) * far ) / (( far - near ) * viewZ );\n}\nfloat perspectiveDepthToViewZ( const in float invClipZ, const in float near, const in float far ) {\n  return ( near * far ) / ( ( far - near ) * invClipZ - far );\n}\n";
THREE.ShaderChunk.premultiplied_alpha_fragment="#ifdef PREMULTIPLIED_ALPHA\n\tgl_FragColor.rgb *= gl_FragColor.a;\n#endif\n";THREE.ShaderChunk.project_vertex="#ifdef USE_SKINNING\n\tvec4 mvPosition = modelViewMatrix * skinned;\n#else\n\tvec4 mvPosition = modelViewMatrix * vec4( transformed, 1.0 );\n#endif\ngl_Position = projectionMatrix * mvPosition;\n";THREE.ShaderChunk.roughnessmap_fragment="float roughnessFactor = roughness;\n#ifdef USE_ROUGHNESSMAP\n\tvec4 texelRoughness = texture2D( roughnessMap, vUv );\n\troughnessFactor *= texelRoughness.r;\n#endif\n";
THREE.ShaderChunk.roughnessmap_pars_fragment="#ifdef USE_ROUGHNESSMAP\n\tuniform sampler2D roughnessMap;\n#endif";THREE.ShaderChunk.shadowmap_pars_fragment="#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHTS > 0\n\t\tuniform sampler2D directionalShadowMap[ NUM_DIR_LIGHTS ];\n\t\tvarying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHTS ];\n\t#endif\n\t#if NUM_SPOT_LIGHTS > 0\n\t\tuniform sampler2D spotShadowMap[ NUM_SPOT_LIGHTS ];\n\t\tvarying vec4 vSpotShadowCoord[ NUM_SPOT_LIGHTS ];\n\t#endif\n\t#if NUM_POINT_LIGHTS > 0\n\t\tuniform sampler2D pointShadowMap[ NUM_POINT_LIGHTS ];\n\t\tvarying vec4 vPointShadowCoord[ NUM_POINT_LIGHTS ];\n\t#endif\n\tfloat texture2DCompare( sampler2D depths, vec2 uv, float compare ) {\n\t\treturn step( compare, unpackRGBAToDepth( texture2D( depths, uv ) ) );\n\t}\n\tfloat texture2DShadowLerp( sampler2D depths, vec2 size, vec2 uv, float compare ) {\n\t\tconst vec2 offset = vec2( 0.0, 1.0 );\n\t\tvec2 texelSize = vec2( 1.0 ) / size;\n\t\tvec2 centroidUV = floor( uv * size + 0.5 ) / size;\n\t\tfloat lb = texture2DCompare( depths, centroidUV + texelSize * offset.xx, compare );\n\t\tfloat lt = texture2DCompare( depths, centroidUV + texelSize * offset.xy, compare );\n\t\tfloat rb = texture2DCompare( depths, centroidUV + texelSize * offset.yx, compare );\n\t\tfloat rt = texture2DCompare( depths, centroidUV + texelSize * offset.yy, compare );\n\t\tvec2 f = fract( uv * size + 0.5 );\n\t\tfloat a = mix( lb, lt, f.y );\n\t\tfloat b = mix( rb, rt, f.y );\n\t\tfloat c = mix( a, b, f.x );\n\t\treturn c;\n\t}\n\tfloat getShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord ) {\n\t\tshadowCoord.xyz /= shadowCoord.w;\n\t\tshadowCoord.z += shadowBias;\n\t\tbvec4 inFrustumVec = bvec4 ( shadowCoord.x >= 0.0, shadowCoord.x <= 1.0, shadowCoord.y >= 0.0, shadowCoord.y <= 1.0 );\n\t\tbool inFrustum = all( inFrustumVec );\n\t\tbvec2 frustumTestVec = bvec2( inFrustum, shadowCoord.z <= 1.0 );\n\t\tbool frustumTest = all( frustumTestVec );\n\t\tif ( frustumTest ) {\n\t\t#if defined( SHADOWMAP_TYPE_PCF )\n\t\t\tvec2 texelSize = vec2( 1.0 ) / shadowMapSize;\n\t\t\tfloat dx0 = - texelSize.x * shadowRadius;\n\t\t\tfloat dy0 = - texelSize.y * shadowRadius;\n\t\t\tfloat dx1 = + texelSize.x * shadowRadius;\n\t\t\tfloat dy1 = + texelSize.y * shadowRadius;\n\t\t\treturn (\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy1 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy1 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy1 ), shadowCoord.z )\n\t\t\t) * ( 1.0 / 9.0 );\n\t\t#elif defined( SHADOWMAP_TYPE_PCF_SOFT )\n\t\t\tvec2 texelSize = vec2( 1.0 ) / shadowMapSize;\n\t\t\tfloat dx0 = - texelSize.x * shadowRadius;\n\t\t\tfloat dy0 = - texelSize.y * shadowRadius;\n\t\t\tfloat dx1 = + texelSize.x * shadowRadius;\n\t\t\tfloat dy1 = + texelSize.y * shadowRadius;\n\t\t\treturn (\n\t\t\t\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( dx0, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( 0.0, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( dx1, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( dx0, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy, shadowCoord.z ) +\n\t\t\t\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( dx1, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( dx0, dy1 ), shadowCoord.z ) +\n\t\t\t\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( 0.0, dy1 ), shadowCoord.z ) +\n\t\t\t\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( dx1, dy1 ), shadowCoord.z )\n\t\t\t) * ( 1.0 / 9.0 );\n\t\t#else\n\t\t\treturn texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z );\n\t\t#endif\n\t\t}\n\t\treturn 1.0;\n\t}\n\tvec2 cubeToUV( vec3 v, float texelSizeY ) {\n\t\tvec3 absV = abs( v );\n\t\tfloat scaleToCube = 1.0 / max( absV.x, max( absV.y, absV.z ) );\n\t\tabsV *= scaleToCube;\n\t\tv *= scaleToCube * ( 1.0 - 2.0 * texelSizeY );\n\t\tvec2 planar = v.xy;\n\t\tfloat almostATexel = 1.5 * texelSizeY;\n\t\tfloat almostOne = 1.0 - almostATexel;\n\t\tif ( absV.z >= almostOne ) {\n\t\t\tif ( v.z > 0.0 )\n\t\t\t\tplanar.x = 4.0 - v.x;\n\t\t} else if ( absV.x >= almostOne ) {\n\t\t\tfloat signX = sign( v.x );\n\t\t\tplanar.x = v.z * signX + 2.0 * signX;\n\t\t} else if ( absV.y >= almostOne ) {\n\t\t\tfloat signY = sign( v.y );\n\t\t\tplanar.x = v.x + 2.0 * signY + 2.0;\n\t\t\tplanar.y = v.z * signY - 2.0;\n\t\t}\n\t\treturn vec2( 0.125, 0.25 ) * planar + vec2( 0.375, 0.75 );\n\t}\n\tfloat getPointShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord ) {\n\t\tvec2 texelSize = vec2( 1.0 ) / ( shadowMapSize * vec2( 4.0, 2.0 ) );\n\t\tvec3 lightToPosition = shadowCoord.xyz;\n\t\tvec3 bd3D = normalize( lightToPosition );\n\t\tfloat dp = ( length( lightToPosition ) - shadowBias ) / 1000.0;\n\t\t#if defined( SHADOWMAP_TYPE_PCF ) || defined( SHADOWMAP_TYPE_PCF_SOFT )\n\t\t\tvec2 offset = vec2( - 1, 1 ) * shadowRadius * texelSize.y;\n\t\t\treturn (\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyx, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyx, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxx, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxx, texelSize.y ), dp )\n\t\t\t) * ( 1.0 / 9.0 );\n\t\t#else\n\t\t\treturn texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp );\n\t\t#endif\n\t}\n#endif\n";
THREE.ShaderChunk.shadowmap_pars_vertex="#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHTS > 0\n\t\tuniform mat4 directionalShadowMatrix[ NUM_DIR_LIGHTS ];\n\t\tvarying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHTS ];\n\t#endif\n\t#if NUM_SPOT_LIGHTS > 0\n\t\tuniform mat4 spotShadowMatrix[ NUM_SPOT_LIGHTS ];\n\t\tvarying vec4 vSpotShadowCoord[ NUM_SPOT_LIGHTS ];\n\t#endif\n\t#if NUM_POINT_LIGHTS > 0\n\t\tuniform mat4 pointShadowMatrix[ NUM_POINT_LIGHTS ];\n\t\tvarying vec4 vPointShadowCoord[ NUM_POINT_LIGHTS ];\n\t#endif\n#endif\n";
THREE.ShaderChunk.shadowmap_vertex="#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHTS > 0\n\tfor ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {\n\t\tvDirectionalShadowCoord[ i ] = directionalShadowMatrix[ i ] * worldPosition;\n\t}\n\t#endif\n\t#if NUM_SPOT_LIGHTS > 0\n\tfor ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {\n\t\tvSpotShadowCoord[ i ] = spotShadowMatrix[ i ] * worldPosition;\n\t}\n\t#endif\n\t#if NUM_POINT_LIGHTS > 0\n\tfor ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {\n\t\tvPointShadowCoord[ i ] = pointShadowMatrix[ i ] * worldPosition;\n\t}\n\t#endif\n#endif\n";
THREE.ShaderChunk.shadowmask_pars_fragment="float getShadowMask() {\n\tfloat shadow = 1.0;\n\t#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHTS > 0\n\tDirectionalLight directionalLight;\n\tfor ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {\n\t\tdirectionalLight = directionalLights[ i ];\n\t\tshadow *= bool( directionalLight.shadow ) ? getShadow( directionalShadowMap[ i ], directionalLight.shadowMapSize, directionalLight.shadowBias, directionalLight.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;\n\t}\n\t#endif\n\t#if NUM_SPOT_LIGHTS > 0\n\tSpotLight spotLight;\n\tfor ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {\n\t\tspotLight = spotLights[ i ];\n\t\tshadow *= bool( spotLight.shadow ) ? getShadow( spotShadowMap[ i ], spotLight.shadowMapSize, spotLight.shadowBias, spotLight.shadowRadius, vSpotShadowCoord[ i ] ) : 1.0;\n\t}\n\t#endif\n\t#if NUM_POINT_LIGHTS > 0\n\tPointLight pointLight;\n\tfor ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {\n\t\tpointLight = pointLights[ i ];\n\t\tshadow *= bool( pointLight.shadow ) ? getPointShadow( pointShadowMap[ i ], pointLight.shadowMapSize, pointLight.shadowBias, pointLight.shadowRadius, vPointShadowCoord[ i ] ) : 1.0;\n\t}\n\t#endif\n\t#endif\n\treturn shadow;\n}\n";
THREE.ShaderChunk.skinbase_vertex="#ifdef USE_SKINNING\n\tmat4 boneMatX = getBoneMatrix( skinIndex.x );\n\tmat4 boneMatY = getBoneMatrix( skinIndex.y );\n\tmat4 boneMatZ = getBoneMatrix( skinIndex.z );\n\tmat4 boneMatW = getBoneMatrix( skinIndex.w );\n#endif";THREE.ShaderChunk.skinning_pars_vertex="#ifdef USE_SKINNING\n\tuniform mat4 bindMatrix;\n\tuniform mat4 bindMatrixInverse;\n\t#ifdef BONE_TEXTURE\n\t\tuniform sampler2D boneTexture;\n\t\tuniform int boneTextureWidth;\n\t\tuniform int boneTextureHeight;\n\t\tmat4 getBoneMatrix( const in float i ) {\n\t\t\tfloat j = i * 4.0;\n\t\t\tfloat x = mod( j, float( boneTextureWidth ) );\n\t\t\tfloat y = floor( j / float( boneTextureWidth ) );\n\t\t\tfloat dx = 1.0 / float( boneTextureWidth );\n\t\t\tfloat dy = 1.0 / float( boneTextureHeight );\n\t\t\ty = dy * ( y + 0.5 );\n\t\t\tvec4 v1 = texture2D( boneTexture, vec2( dx * ( x + 0.5 ), y ) );\n\t\t\tvec4 v2 = texture2D( boneTexture, vec2( dx * ( x + 1.5 ), y ) );\n\t\t\tvec4 v3 = texture2D( boneTexture, vec2( dx * ( x + 2.5 ), y ) );\n\t\t\tvec4 v4 = texture2D( boneTexture, vec2( dx * ( x + 3.5 ), y ) );\n\t\t\tmat4 bone = mat4( v1, v2, v3, v4 );\n\t\t\treturn bone;\n\t\t}\n\t#else\n\t\tuniform mat4 boneMatrices[ MAX_BONES ];\n\t\tmat4 getBoneMatrix( const in float i ) {\n\t\t\tmat4 bone = boneMatrices[ int(i) ];\n\t\t\treturn bone;\n\t\t}\n\t#endif\n#endif\n";
THREE.ShaderChunk.skinning_vertex="#ifdef USE_SKINNING\n\tvec4 skinVertex = bindMatrix * vec4( transformed, 1.0 );\n\tvec4 skinned = vec4( 0.0 );\n\tskinned += boneMatX * skinVertex * skinWeight.x;\n\tskinned += boneMatY * skinVertex * skinWeight.y;\n\tskinned += boneMatZ * skinVertex * skinWeight.z;\n\tskinned += boneMatW * skinVertex * skinWeight.w;\n\tskinned  = bindMatrixInverse * skinned;\n#endif\n";THREE.ShaderChunk.skinnormal_vertex="#ifdef USE_SKINNING\n\tmat4 skinMatrix = mat4( 0.0 );\n\tskinMatrix += skinWeight.x * boneMatX;\n\tskinMatrix += skinWeight.y * boneMatY;\n\tskinMatrix += skinWeight.z * boneMatZ;\n\tskinMatrix += skinWeight.w * boneMatW;\n\tskinMatrix  = bindMatrixInverse * skinMatrix * bindMatrix;\n\tobjectNormal = vec4( skinMatrix * vec4( objectNormal, 0.0 ) ).xyz;\n#endif\n";
THREE.ShaderChunk.specularmap_fragment="float specularStrength;\n#ifdef USE_SPECULARMAP\n\tvec4 texelSpecular = texture2D( specularMap, vUv );\n\tspecularStrength = texelSpecular.r;\n#else\n\tspecularStrength = 1.0;\n#endif";THREE.ShaderChunk.specularmap_pars_fragment="#ifdef USE_SPECULARMAP\n\tuniform sampler2D specularMap;\n#endif";THREE.ShaderChunk.tonemapping_fragment="#if defined( TONE_MAPPING )\n  gl_FragColor.rgb = toneMapping( gl_FragColor.rgb );\n#endif\n";
THREE.ShaderChunk.tonemapping_pars_fragment="#define saturate(a) clamp( a, 0.0, 1.0 )\nuniform float toneMappingExposure;\nuniform float toneMappingWhitePoint;\nvec3 LinearToneMapping( vec3 color ) {\n  return toneMappingExposure * color;\n}\nvec3 ReinhardToneMapping( vec3 color ) {\n  color *= toneMappingExposure;\n  return saturate( color / ( vec3( 1.0 ) + color ) );\n}\n#define Uncharted2Helper( x ) max( ( ( x * ( 0.15 * x + 0.10 * 0.50 ) + 0.20 * 0.02 ) / ( x * ( 0.15 * x + 0.50 ) + 0.20 * 0.30 ) ) - 0.02 / 0.30, vec3( 0.0 ) )\nvec3 Uncharted2ToneMapping( vec3 color ) {\n  color *= toneMappingExposure;\n  return saturate( Uncharted2Helper( color ) / Uncharted2Helper( vec3( toneMappingWhitePoint ) ) );\n}\nvec3 OptimizedCineonToneMapping( vec3 color ) {\n  color *= toneMappingExposure;\n  color = max( vec3( 0.0 ), color - 0.004 );\n  return pow( ( color * ( 6.2 * color + 0.5 ) ) / ( color * ( 6.2 * color + 1.7 ) + 0.06 ), vec3( 2.2 ) );\n}\n";
THREE.ShaderChunk.uv2_pars_fragment="#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )\n\tvarying vec2 vUv2;\n#endif";THREE.ShaderChunk.uv2_pars_vertex="#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )\n\tattribute vec2 uv2;\n\tvarying vec2 vUv2;\n#endif";THREE.ShaderChunk.uv2_vertex="#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )\n\tvUv2 = uv2;\n#endif";THREE.ShaderChunk.uv_pars_fragment="#if defined( USE_MAP ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( USE_SPECULARMAP ) || defined( USE_ALPHAMAP ) || defined( USE_EMISSIVEMAP ) || defined( USE_ROUGHNESSMAP ) || defined( USE_METALNESSMAP )\n\tvarying vec2 vUv;\n#endif";
THREE.ShaderChunk.uv_pars_vertex="#if defined( USE_MAP ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( USE_SPECULARMAP ) || defined( USE_ALPHAMAP ) || defined( USE_EMISSIVEMAP ) || defined( USE_ROUGHNESSMAP ) || defined( USE_METALNESSMAP )\n\tvarying vec2 vUv;\n\tuniform vec4 offsetRepeat;\n#endif\n";THREE.ShaderChunk.uv_vertex="#if defined( USE_MAP ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( USE_SPECULARMAP ) || defined( USE_ALPHAMAP ) || defined( USE_EMISSIVEMAP ) || defined( USE_ROUGHNESSMAP ) || defined( USE_METALNESSMAP )\n\tvUv = uv * offsetRepeat.zw + offsetRepeat.xy;\n#endif";
THREE.ShaderChunk.worldpos_vertex="#if defined( USE_ENVMAP ) || defined( PHONG ) || defined( PHYSICAL ) || defined( LAMBERT ) || defined ( USE_SHADOWMAP )\n\t#ifdef USE_SKINNING\n\t\tvec4 worldPosition = modelMatrix * skinned;\n\t#else\n\t\tvec4 worldPosition = modelMatrix * vec4( transformed, 1.0 );\n\t#endif\n#endif\n";
THREE.UniformsUtils={merge:function(a){for(var b={},c=0;c<a.length;c++){var d=this.clone(a[c]),e;for(e in d)b[e]=d[e]}return b},clone:function(a){var b={},c;for(c in a){b[c]={};for(var d in a[c]){var e=a[c][d];e instanceof THREE.Color||e instanceof THREE.Vector2||e instanceof THREE.Vector3||e instanceof THREE.Vector4||e instanceof THREE.Matrix3||e instanceof THREE.Matrix4||e instanceof THREE.Texture?b[c][d]=e.clone():Array.isArray(e)?b[c][d]=e.slice():b[c][d]=e}}return b}};
THREE.UniformsLib={common:{diffuse:{value:new THREE.Color(15658734)},opacity:{value:1},map:{value:null},offsetRepeat:{value:new THREE.Vector4(0,0,1,1)},specularMap:{value:null},alphaMap:{value:null},envMap:{value:null},flipEnvMap:{value:-1},reflectivity:{value:1},refractionRatio:{value:.98}},aomap:{aoMap:{value:null},aoMapIntensity:{value:1}},lightmap:{lightMap:{value:null},lightMapIntensity:{value:1}},emissivemap:{emissiveMap:{value:null}},bumpmap:{bumpMap:{value:null},bumpScale:{value:1}},normalmap:{normalMap:{value:null},
normalScale:{value:new THREE.Vector2(1,1)}},displacementmap:{displacementMap:{value:null},displacementScale:{value:1},displacementBias:{value:0}},roughnessmap:{roughnessMap:{value:null}},metalnessmap:{metalnessMap:{value:null}},fog:{fogDensity:{value:2.5E-4},fogNear:{value:1},fogFar:{value:2E3},fogColor:{value:new THREE.Color(16777215)}},lights:{ambientLightColor:{value:[]},directionalLights:{value:[],properties:{direction:{},color:{},shadow:{},shadowBias:{},shadowRadius:{},shadowMapSize:{}}},directionalShadowMap:{value:[]},
directionalShadowMatrix:{value:[]},spotLights:{value:[],properties:{color:{},position:{},direction:{},distance:{},coneCos:{},penumbraCos:{},decay:{},shadow:{},shadowBias:{},shadowRadius:{},shadowMapSize:{}}},spotShadowMap:{value:[]},spotShadowMatrix:{value:[]},pointLights:{value:[],properties:{color:{},position:{},decay:{},distance:{},shadow:{},shadowBias:{},shadowRadius:{},shadowMapSize:{}}},pointShadowMap:{value:[]},pointShadowMatrix:{value:[]},hemisphereLights:{value:[],properties:{direction:{},
skyColor:{},groundColor:{}}}},points:{diffuse:{value:new THREE.Color(15658734)},opacity:{value:1},size:{value:1},scale:{value:1},map:{value:null},offsetRepeat:{value:new THREE.Vector4(0,0,1,1)}}};THREE.ShaderChunk.cube_frag="uniform samplerCube tCube;\nuniform float tFlip;\nuniform float opacity;\nvarying vec3 vWorldPosition;\n#include <common>\nvoid main() {\n\tgl_FragColor = textureCube( tCube, vec3( tFlip * vWorldPosition.x, vWorldPosition.yz ) );\n\tgl_FragColor.a *= opacity;\n}\n";
THREE.ShaderChunk.cube_vert="varying vec3 vWorldPosition;\n#include <common>\nvoid main() {\n\tvWorldPosition = transformDirection( position, modelMatrix );\n\t#include <begin_vertex>\n\t#include <project_vertex>\n}\n";THREE.ShaderChunk.depth_frag="#if DEPTH_PACKING == 3200\n\tuniform float opacity;\n#endif\n#include <common>\n#include <packing>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( 1.0 );\n\t#if DEPTH_PACKING == 3200\n\t\tdiffuseColor.a = opacity;\n\t#endif\n\t#include <map_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <logdepthbuf_fragment>\n\t#if DEPTH_PACKING == 3200\n\t\tgl_FragColor = vec4( vec3( gl_FragCoord.z ), opacity );\n\t#elif DEPTH_PACKING == 3201\n\t\tgl_FragColor = packDepthToRGBA( gl_FragCoord.z );\n\t#endif\n}\n";
THREE.ShaderChunk.depth_vert="#include <common>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <skinbase_vertex>\n\t#include <begin_vertex>\n\t#include <displacementmap_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n}\n";
THREE.ShaderChunk.distanceRGBA_frag="uniform vec3 lightPos;\nvarying vec4 vWorldPosition;\n#include <common>\n#include <packing>\n#include <clipping_planes_pars_fragment>\nvoid main () {\n\t#include <clipping_planes_fragment>\n\tgl_FragColor = packDepthToRGBA( length( vWorldPosition.xyz - lightPos.xyz ) / 1000.0 );\n}\n";THREE.ShaderChunk.distanceRGBA_vert="varying vec4 vWorldPosition;\n#include <common>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <skinbase_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <project_vertex>\n\t#include <worldpos_vertex>\n\t#include <clipping_planes_vertex>\n\tvWorldPosition = worldPosition;\n}\n";
THREE.ShaderChunk.equirect_frag="uniform sampler2D tEquirect;\nuniform float tFlip;\nvarying vec3 vWorldPosition;\n#include <common>\nvoid main() {\n\tvec3 direction = normalize( vWorldPosition );\n\tvec2 sampleUV;\n\tsampleUV.y = saturate( tFlip * direction.y * -0.5 + 0.5 );\n\tsampleUV.x = atan( direction.z, direction.x ) * RECIPROCAL_PI2 + 0.5;\n\tgl_FragColor = texture2D( tEquirect, sampleUV );\n}\n";THREE.ShaderChunk.equirect_vert="varying vec3 vWorldPosition;\n#include <common>\nvoid main() {\n\tvWorldPosition = transformDirection( position, modelMatrix );\n\t#include <begin_vertex>\n\t#include <project_vertex>\n}\n";
THREE.ShaderChunk.linedashed_frag="uniform vec3 diffuse;\nuniform float opacity;\nuniform float dashSize;\nuniform float totalSize;\nvarying float vLineDistance;\n#include <common>\n#include <color_pars_fragment>\n#include <fog_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tif ( mod( vLineDistance, totalSize ) > dashSize ) {\n\t\tdiscard;\n\t}\n\tvec3 outgoingLight = vec3( 0.0 );\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <color_fragment>\n\toutgoingLight = diffuseColor.rgb;\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <premultiplied_alpha_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n}\n";
THREE.ShaderChunk.linedashed_vert="uniform float scale;\nattribute float lineDistance;\nvarying float vLineDistance;\n#include <common>\n#include <color_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <color_vertex>\n\tvLineDistance = scale * lineDistance;\n\tvec4 mvPosition = modelViewMatrix * vec4( position, 1.0 );\n\tgl_Position = projectionMatrix * mvPosition;\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n}\n";
THREE.ShaderChunk.meshbasic_frag="uniform vec3 diffuse;\nuniform float opacity;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\n#include <common>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <aomap_pars_fragment>\n#include <envmap_pars_fragment>\n#include <fog_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <specularmap_fragment>\n\tReflectedLight reflectedLight;\n\treflectedLight.directDiffuse = vec3( 0.0 );\n\treflectedLight.directSpecular = vec3( 0.0 );\n\treflectedLight.indirectDiffuse = diffuseColor.rgb;\n\treflectedLight.indirectSpecular = vec3( 0.0 );\n\t#include <aomap_fragment>\n\tvec3 outgoingLight = reflectedLight.indirectDiffuse;\n\t#include <normal_flip>\n\t#include <envmap_fragment>\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <premultiplied_alpha_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n}\n";
THREE.ShaderChunk.meshbasic_vert="#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <envmap_pars_vertex>\n#include <color_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <skinbase_vertex>\n\t#ifdef USE_ENVMAP\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <worldpos_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <envmap_vertex>\n}\n";
THREE.ShaderChunk.meshlambert_frag="uniform vec3 diffuse;\nuniform vec3 emissive;\nuniform float opacity;\nvarying vec3 vLightFront;\n#ifdef DOUBLE_SIDED\n\tvarying vec3 vLightBack;\n#endif\n#include <common>\n#include <packing>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <envmap_pars_fragment>\n#include <bsdfs>\n#include <lights_pars>\n#include <fog_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <shadowmask_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <specularmap_fragment>\n\t#include <emissivemap_fragment>\n\treflectedLight.indirectDiffuse = getAmbientLightIrradiance( ambientLightColor );\n\t#include <lightmap_fragment>\n\treflectedLight.indirectDiffuse *= BRDF_Diffuse_Lambert( diffuseColor.rgb );\n\t#ifdef DOUBLE_SIDED\n\t\treflectedLight.directDiffuse = ( gl_FrontFacing ) ? vLightFront : vLightBack;\n\t#else\n\t\treflectedLight.directDiffuse = vLightFront;\n\t#endif\n\treflectedLight.directDiffuse *= BRDF_Diffuse_Lambert( diffuseColor.rgb ) * getShadowMask();\n\t#include <aomap_fragment>\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;\n\t#include <normal_flip>\n\t#include <envmap_fragment>\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <premultiplied_alpha_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n}\n";
THREE.ShaderChunk.meshlambert_vert="#define LAMBERT\nvarying vec3 vLightFront;\n#ifdef DOUBLE_SIDED\n\tvarying vec3 vLightBack;\n#endif\n#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <envmap_pars_vertex>\n#include <bsdfs>\n#include <lights_pars>\n#include <color_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <worldpos_vertex>\n\t#include <envmap_vertex>\n\t#include <lights_lambert_vertex>\n\t#include <shadowmap_vertex>\n}\n";
THREE.ShaderChunk.meshphong_frag="#define PHONG\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform vec3 specular;\nuniform float shininess;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <envmap_pars_fragment>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars>\n#include <lights_phong_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <specularmap_fragment>\n\t#include <normal_flip>\n\t#include <normal_fragment>\n\t#include <emissivemap_fragment>\n\t#include <lights_phong_fragment>\n\t#include <lights_template>\n\t#include <aomap_fragment>\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;\n\t#include <envmap_fragment>\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <premultiplied_alpha_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n}\n";
THREE.ShaderChunk.meshphong_vert="#define PHONG\nvarying vec3 vViewPosition;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\n#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <envmap_pars_vertex>\n#include <color_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n#ifndef FLAT_SHADED\n\tvNormal = normalize( transformedNormal );\n#endif\n\t#include <begin_vertex>\n\t#include <displacementmap_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvViewPosition = - mvPosition.xyz;\n\t#include <worldpos_vertex>\n\t#include <envmap_vertex>\n\t#include <shadowmap_vertex>\n}\n";
THREE.ShaderChunk.meshphysical_frag="#define PHYSICAL\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform float roughness;\nuniform float metalness;\nuniform float opacity;\n#ifndef STANDARD\n\tuniform float clearCoat;\n\tuniform float clearCoatRoughness;\n#endif\nuniform float envMapIntensity;\nvarying vec3 vViewPosition;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\n#include <common>\n#include <packing>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <envmap_pars_fragment>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <cube_uv_reflection_fragment>\n#include <lights_pars>\n#include <lights_physical_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <roughnessmap_pars_fragment>\n#include <metalnessmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <specularmap_fragment>\n\t#include <roughnessmap_fragment>\n\t#include <metalnessmap_fragment>\n\t#include <normal_flip>\n\t#include <normal_fragment>\n\t#include <emissivemap_fragment>\n\t#include <lights_physical_fragment>\n\t#include <lights_template>\n\t#include <aomap_fragment>\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <premultiplied_alpha_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n}\n";
THREE.ShaderChunk.meshphysical_vert="#define PHYSICAL\nvarying vec3 vViewPosition;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\n#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <color_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n#ifndef FLAT_SHADED\n\tvNormal = normalize( transformedNormal );\n#endif\n\t#include <begin_vertex>\n\t#include <displacementmap_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvViewPosition = - mvPosition.xyz;\n\t#include <worldpos_vertex>\n\t#include <shadowmap_vertex>\n}\n";
THREE.ShaderChunk.normal_frag="uniform float opacity;\nvarying vec3 vNormal;\n#include <common>\n#include <packing>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tgl_FragColor = vec4( packNormalToRGB( vNormal ), opacity );\n\t#include <logdepthbuf_fragment>\n}\n";THREE.ShaderChunk.normal_vert="varying vec3 vNormal;\n#include <common>\n#include <morphtarget_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\tvNormal = normalize( normalMatrix * normal );\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n}\n";
THREE.ShaderChunk.points_frag="uniform vec3 diffuse;\nuniform float opacity;\n#include <common>\n#include <color_pars_fragment>\n#include <map_particle_pars_fragment>\n#include <fog_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec3 outgoingLight = vec3( 0.0 );\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_particle_fragment>\n\t#include <color_fragment>\n\t#include <alphatest_fragment>\n\toutgoingLight = diffuseColor.rgb;\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <premultiplied_alpha_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n}\n";
THREE.ShaderChunk.points_vert="uniform float size;\nuniform float scale;\n#include <common>\n#include <color_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <color_vertex>\n\t#include <begin_vertex>\n\t#include <project_vertex>\n\t#ifdef USE_SIZEATTENUATION\n\t\tgl_PointSize = size * ( scale / - mvPosition.z );\n\t#else\n\t\tgl_PointSize = size;\n\t#endif\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <worldpos_vertex>\n\t#include <shadowmap_vertex>\n}\n";
THREE.ShaderChunk.shadow_frag="uniform float opacity;\n#include <common>\n#include <packing>\n#include <bsdfs>\n#include <lights_pars>\n#include <shadowmap_pars_fragment>\n#include <shadowmask_pars_fragment>\nvoid main() {\n\tgl_FragColor = vec4( 0.0, 0.0, 0.0, opacity * ( 1.0  - getShadowMask() ) );\n}\n";THREE.ShaderChunk.shadow_vert="#include <shadowmap_pars_vertex>\nvoid main() {\n\t#include <begin_vertex>\n\t#include <project_vertex>\n\t#include <worldpos_vertex>\n\t#include <shadowmap_vertex>\n}\n";
THREE.ShaderLib={basic:{uniforms:THREE.UniformsUtils.merge([THREE.UniformsLib.common,THREE.UniformsLib.aomap,THREE.UniformsLib.fog]),vertexShader:THREE.ShaderChunk.meshbasic_vert,fragmentShader:THREE.ShaderChunk.meshbasic_frag},lambert:{uniforms:THREE.UniformsUtils.merge([THREE.UniformsLib.common,THREE.UniformsLib.aomap,THREE.UniformsLib.lightmap,THREE.UniformsLib.emissivemap,THREE.UniformsLib.fog,THREE.UniformsLib.lights,{emissive:{value:new THREE.Color(0)}}]),vertexShader:THREE.ShaderChunk.meshlambert_vert,
fragmentShader:THREE.ShaderChunk.meshlambert_frag},phong:{uniforms:THREE.UniformsUtils.merge([THREE.UniformsLib.common,THREE.UniformsLib.aomap,THREE.UniformsLib.lightmap,THREE.UniformsLib.emissivemap,THREE.UniformsLib.bumpmap,THREE.UniformsLib.normalmap,THREE.UniformsLib.displacementmap,THREE.UniformsLib.fog,THREE.UniformsLib.lights,{emissive:{value:new THREE.Color(0)},specular:{value:new THREE.Color(1118481)},shininess:{value:30}}]),vertexShader:THREE.ShaderChunk.meshphong_vert,fragmentShader:THREE.ShaderChunk.meshphong_frag},
standard:{uniforms:THREE.UniformsUtils.merge([THREE.UniformsLib.common,THREE.UniformsLib.aomap,THREE.UniformsLib.lightmap,THREE.UniformsLib.emissivemap,THREE.UniformsLib.bumpmap,THREE.UniformsLib.normalmap,THREE.UniformsLib.displacementmap,THREE.UniformsLib.roughnessmap,THREE.UniformsLib.metalnessmap,THREE.UniformsLib.fog,THREE.UniformsLib.lights,{emissive:{value:new THREE.Color(0)},roughness:{value:.5},metalness:{value:0},envMapIntensity:{value:1}}]),vertexShader:THREE.ShaderChunk.meshphysical_vert,
fragmentShader:THREE.ShaderChunk.meshphysical_frag},points:{uniforms:THREE.UniformsUtils.merge([THREE.UniformsLib.points,THREE.UniformsLib.fog]),vertexShader:THREE.ShaderChunk.points_vert,fragmentShader:THREE.ShaderChunk.points_frag},dashed:{uniforms:THREE.UniformsUtils.merge([THREE.UniformsLib.common,THREE.UniformsLib.fog,{scale:{value:1},dashSize:{value:1},totalSize:{value:2}}]),vertexShader:THREE.ShaderChunk.linedashed_vert,fragmentShader:THREE.ShaderChunk.linedashed_frag},depth:{uniforms:THREE.UniformsUtils.merge([THREE.UniformsLib.common,
THREE.UniformsLib.displacementmap]),vertexShader:THREE.ShaderChunk.depth_vert,fragmentShader:THREE.ShaderChunk.depth_frag},normal:{uniforms:{opacity:{value:1}},vertexShader:THREE.ShaderChunk.normal_vert,fragmentShader:THREE.ShaderChunk.normal_frag},cube:{uniforms:{tCube:{value:null},tFlip:{value:-1},opacity:{value:1}},vertexShader:THREE.ShaderChunk.cube_vert,fragmentShader:THREE.ShaderChunk.cube_frag},equirect:{uniforms:{tEquirect:{value:null},tFlip:{value:-1}},vertexShader:THREE.ShaderChunk.equirect_vert,
fragmentShader:THREE.ShaderChunk.equirect_frag},distanceRGBA:{uniforms:{lightPos:{value:new THREE.Vector3}},vertexShader:THREE.ShaderChunk.distanceRGBA_vert,fragmentShader:THREE.ShaderChunk.distanceRGBA_frag}};THREE.ShaderLib.physical={uniforms:THREE.UniformsUtils.merge([THREE.ShaderLib.standard.uniforms,{clearCoat:{value:0},clearCoatRoughness:{value:0}}]),vertexShader:THREE.ShaderChunk.meshphysical_vert,fragmentShader:THREE.ShaderChunk.meshphysical_frag};
THREE.WebGLRenderer=function(a){function b(a,b,c,d){!0===A&&(a*=d,b*=d,c*=d);R.clearColor(a,b,c,d)}function c(){R.init();R.scissor(X.copy(ua).multiplyScalar(Z));R.viewport(fa.copy(na).multiplyScalar(Z));b(V.r,V.g,V.b,ba)}function d(){T=Q=null;$="";E=-1;R.reset()}function e(a){a.preventDefault();d();c();Y.clear()}function f(a){a=a.target;a.removeEventListener("dispose",f);g(a);Y.delete(a)}function g(a){var b=Y.get(a).program;a.program=void 0;void 0!==b&&oa.releaseProgram(b)}function h(a,b){return Math.abs(b[0])-
Math.abs(a[0])}function k(a,b){return a.object.renderOrder!==b.object.renderOrder?a.object.renderOrder-b.object.renderOrder:a.material.program&&b.material.program&&a.material.program!==b.material.program?a.material.program.id-b.material.program.id:a.material.id!==b.material.id?a.material.id-b.material.id:a.z!==b.z?a.z-b.z:a.id-b.id}function l(a,b){return a.object.renderOrder!==b.object.renderOrder?a.object.renderOrder-b.object.renderOrder:a.z!==b.z?b.z-a.z:a.id-b.id}function m(a,b,c,d,e){var g;c.transparent?
(d=P,g=++K):(d=F,g=++J);g=d[g];void 0!==g?(g.id=a.id,g.object=a,g.geometry=b,g.material=c,g.z=W.z,g.group=e):(g={id:a.id,object:a,geometry:b,material:c,z:W.z,group:e},d.push(g))}function p(a){if(!wa.intersectsSphere(a))return!1;var b=da.numPlanes;if(0===b)return!0;var c=N.clippingPlanes,d=a.center;a=-a.radius;var e=0;do if(c[e].distanceToPoint(d)<a)return!1;while(++e!==b);return!0}function n(a,b){if(!1!==a.visible){if(a.layers.test(b.layers))if(a instanceof THREE.Light)B.push(a);else if(a instanceof
THREE.Sprite){var c;(c=!1===a.frustumCulled)||(ka.center.set(0,0,0),ka.radius=.7071067811865476,ka.applyMatrix4(a.matrixWorld),c=!0===p(ka));c&&M.push(a)}else if(a instanceof THREE.LensFlare)O.push(a);else if(a instanceof THREE.ImmediateRenderObject)!0===N.sortObjects&&(W.setFromMatrixPosition(a.matrixWorld),W.applyProjection(qa)),m(a,null,a.material,W.z,null);else if(a instanceof THREE.Mesh||a instanceof THREE.Line||a instanceof THREE.Points)if(a instanceof THREE.SkinnedMesh&&a.skeleton.update(),
(c=!1===a.frustumCulled)||(c=a.geometry,null===c.boundingSphere&&c.computeBoundingSphere(),ka.copy(c.boundingSphere).applyMatrix4(a.matrixWorld),c=!0===p(ka)),c){var d=a.material;if(!0===d.visible)if(!0===N.sortObjects&&(W.setFromMatrixPosition(a.matrixWorld),W.applyProjection(qa)),c=ha.update(a),d instanceof THREE.MultiMaterial)for(var e=c.groups,g=d.materials,d=0,f=e.length;d<f;d++){var h=e[d],k=g[h.materialIndex];!0===k.visible&&m(a,c,k,W.z,h)}else m(a,c,d,W.z,null)}c=a.children;d=0;for(f=c.length;d<
f;d++)n(c[d],b)}}function q(a,b,c,d){for(var e=0,g=a.length;e<g;e++){var f=a[e],h=f.object,k=f.geometry,l=void 0===d?f.material:d,f=f.group;h.modelViewMatrix.multiplyMatrices(b.matrixWorldInverse,h.matrixWorld);h.normalMatrix.getNormalMatrix(h.modelViewMatrix);if(h instanceof THREE.ImmediateRenderObject){r(l);var n=s(b,c,l,h);$="";h.render(function(a){N.renderBufferImmediate(a,n,l)})}else N.renderBufferDirect(b,c,k,l,h,f)}}function r(a){a.side!==THREE.DoubleSide?R.enable(x.CULL_FACE):R.disable(x.CULL_FACE);
R.setFlipSided(a.side===THREE.BackSide);!0===a.transparent?R.setBlending(a.blending,a.blendEquation,a.blendSrc,a.blendDst,a.blendEquationAlpha,a.blendSrcAlpha,a.blendDstAlpha,a.premultipliedAlpha):R.setBlending(THREE.NoBlending);R.setDepthFunc(a.depthFunc);R.setDepthTest(a.depthTest);R.setDepthWrite(a.depthWrite);R.setColorWrite(a.colorWrite);R.setPolygonOffset(a.polygonOffset,a.polygonOffsetFactor,a.polygonOffsetUnits)}function s(a,b,c,d){ga=0;var e=Y.get(c);ra&&((va||a!==T)&&da.setState(c.clippingPlanes,
c.clipShadows,a,e,a===T&&c.id===E),void 0!==e.numClippingPlanes&&e.numClippingPlanes!==da.numPlanes&&(c.needsUpdate=!0));void 0===e.program&&(c.needsUpdate=!0);void 0!==e.lightsHash&&e.lightsHash!==S.hash&&(c.needsUpdate=!0);if(c.needsUpdate){a:{var h=Y.get(c),k=oa.getParameters(c,S,b,da.numPlanes,d),l=oa.getProgramCode(c,k),n=h.program,p=!0;if(void 0===n)c.addEventListener("dispose",f);else if(n.code!==l)g(c);else if(void 0!==k.shaderID)break a;else p=!1;p&&(k.shaderID?(n=THREE.ShaderLib[k.shaderID],
h.__webglShader={name:c.type,uniforms:THREE.UniformsUtils.clone(n.uniforms),vertexShader:n.vertexShader,fragmentShader:n.fragmentShader}):h.__webglShader={name:c.type,uniforms:c.uniforms,vertexShader:c.vertexShader,fragmentShader:c.fragmentShader},c.__webglShader=h.__webglShader,n=oa.acquireProgram(c,k,l),h.program=n,c.program=n);k=n.getAttributes();if(c.morphTargets)for(l=c.numSupportedMorphTargets=0;l<N.maxMorphTargets;l++)0<=k["morphTarget"+l]&&c.numSupportedMorphTargets++;if(c.morphNormals)for(l=
c.numSupportedMorphNormals=0;l<N.maxMorphNormals;l++)0<=k["morphNormal"+l]&&c.numSupportedMorphNormals++;k=h.__webglShader.uniforms;(c instanceof THREE.ShaderMaterial||c instanceof THREE.RawShaderMaterial)&&!0!==c.clipping||(h.numClippingPlanes=da.numPlanes,k.clippingPlanes=da.uniform);c.lights&&(h.lightsHash=S.hash,k.ambientLightColor.value=S.ambient,k.directionalLights.value=S.directional,k.spotLights.value=S.spot,k.pointLights.value=S.point,k.hemisphereLights.value=S.hemi,k.directionalShadowMap.value=
S.directionalShadowMap,k.directionalShadowMatrix.value=S.directionalShadowMatrix,k.spotShadowMap.value=S.spotShadowMap,k.spotShadowMatrix.value=S.spotShadowMatrix,k.pointShadowMap.value=S.pointShadowMap,k.pointShadowMatrix.value=S.pointShadowMatrix);l=h.program.getUniforms();l=THREE.WebGLUniforms.seqWithValue(l.seq,k);h.uniformsList=l;h.dynamicUniforms=THREE.WebGLUniforms.splitDynamic(l,k)}c.needsUpdate=!1}var m=!1,p=n=!1,h=e.program,l=h.getUniforms(),k=e.__webglShader.uniforms;h.id!==Q&&(x.useProgram(h.program),
Q=h.id,p=n=m=!0);c.id!==E&&(E=c.id,n=!0);if(m||a!==T){l.set(x,a,"projectionMatrix");ca.logarithmicDepthBuffer&&l.setValue(x,"logDepthBufFC",2/(Math.log(a.far+1)/Math.LN2));a!==T&&(T=a,p=n=!0);if(c instanceof THREE.ShaderMaterial||c instanceof THREE.MeshPhongMaterial||c instanceof THREE.MeshStandardMaterial||c.envMap)m=l.map.cameraPosition,void 0!==m&&m.setValue(x,W.setFromMatrixPosition(a.matrixWorld));(c instanceof THREE.MeshPhongMaterial||c instanceof THREE.MeshLambertMaterial||c instanceof THREE.MeshBasicMaterial||
c instanceof THREE.MeshStandardMaterial||c instanceof THREE.ShaderMaterial||c.skinning)&&l.setValue(x,"viewMatrix",a.matrixWorldInverse);l.set(x,N,"toneMappingExposure");l.set(x,N,"toneMappingWhitePoint")}c.skinning&&(l.setOptional(x,d,"bindMatrix"),l.setOptional(x,d,"bindMatrixInverse"),m=d.skeleton)&&(ca.floatVertexTextures&&m.useVertexTexture?(l.set(x,m,"boneTexture"),l.set(x,m,"boneTextureWidth"),l.set(x,m,"boneTextureHeight")):l.setOptional(x,m,"boneMatrices"));if(n){c.lights&&(n=p,k.ambientLightColor.needsUpdate=
n,k.directionalLights.needsUpdate=n,k.pointLights.needsUpdate=n,k.spotLights.needsUpdate=n,k.hemisphereLights.needsUpdate=n);b&&c.fog&&(k.fogColor.value=b.color,b instanceof THREE.Fog?(k.fogNear.value=b.near,k.fogFar.value=b.far):b instanceof THREE.FogExp2&&(k.fogDensity.value=b.density));if(c instanceof THREE.MeshBasicMaterial||c instanceof THREE.MeshLambertMaterial||c instanceof THREE.MeshPhongMaterial||c instanceof THREE.MeshStandardMaterial||c instanceof THREE.MeshDepthMaterial){k.opacity.value=
c.opacity;k.diffuse.value=c.color;c.emissive&&k.emissive.value.copy(c.emissive).multiplyScalar(c.emissiveIntensity);k.map.value=c.map;k.specularMap.value=c.specularMap;k.alphaMap.value=c.alphaMap;c.aoMap&&(k.aoMap.value=c.aoMap,k.aoMapIntensity.value=c.aoMapIntensity);var q;c.map?q=c.map:c.specularMap?q=c.specularMap:c.displacementMap?q=c.displacementMap:c.normalMap?q=c.normalMap:c.bumpMap?q=c.bumpMap:c.roughnessMap?q=c.roughnessMap:c.metalnessMap?q=c.metalnessMap:c.alphaMap?q=c.alphaMap:c.emissiveMap&&
(q=c.emissiveMap);void 0!==q&&(q instanceof THREE.WebGLRenderTarget&&(q=q.texture),b=q.offset,q=q.repeat,k.offsetRepeat.value.set(b.x,b.y,q.x,q.y));k.envMap.value=c.envMap;k.flipEnvMap.value=c.envMap instanceof THREE.CubeTexture?-1:1;k.reflectivity.value=c.reflectivity;k.refractionRatio.value=c.refractionRatio}c instanceof THREE.LineBasicMaterial?(k.diffuse.value=c.color,k.opacity.value=c.opacity):c instanceof THREE.LineDashedMaterial?(k.diffuse.value=c.color,k.opacity.value=c.opacity,k.dashSize.value=
c.dashSize,k.totalSize.value=c.dashSize+c.gapSize,k.scale.value=c.scale):c instanceof THREE.PointsMaterial?(k.diffuse.value=c.color,k.opacity.value=c.opacity,k.size.value=c.size*Z,k.scale.value=.5*u.clientHeight,k.map.value=c.map,null!==c.map&&(q=c.map.offset,c=c.map.repeat,k.offsetRepeat.value.set(q.x,q.y,c.x,c.y))):c instanceof THREE.MeshLambertMaterial?(c.lightMap&&(k.lightMap.value=c.lightMap,k.lightMapIntensity.value=c.lightMapIntensity),c.emissiveMap&&(k.emissiveMap.value=c.emissiveMap)):c instanceof
THREE.MeshPhongMaterial?(k.specular.value=c.specular,k.shininess.value=Math.max(c.shininess,1E-4),c.lightMap&&(k.lightMap.value=c.lightMap,k.lightMapIntensity.value=c.lightMapIntensity),c.emissiveMap&&(k.emissiveMap.value=c.emissiveMap),c.bumpMap&&(k.bumpMap.value=c.bumpMap,k.bumpScale.value=c.bumpScale),c.normalMap&&(k.normalMap.value=c.normalMap,k.normalScale.value.copy(c.normalScale)),c.displacementMap&&(k.displacementMap.value=c.displacementMap,k.displacementScale.value=c.displacementScale,k.displacementBias.value=
c.displacementBias)):c instanceof THREE.MeshPhysicalMaterial?(k.clearCoat.value=c.clearCoat,k.clearCoatRoughness.value=c.clearCoatRoughness,v(k,c)):c instanceof THREE.MeshStandardMaterial?v(k,c):c instanceof THREE.MeshDepthMaterial?c.displacementMap&&(k.displacementMap.value=c.displacementMap,k.displacementScale.value=c.displacementScale,k.displacementBias.value=c.displacementBias):c instanceof THREE.MeshNormalMaterial&&(k.opacity.value=c.opacity);THREE.WebGLUniforms.upload(x,e.uniformsList,k,N)}l.set(x,
d,"modelViewMatrix");l.set(x,d,"normalMatrix");l.setValue(x,"modelMatrix",d.matrixWorld);e=e.dynamicUniforms;null!==e&&(THREE.WebGLUniforms.evalDynamic(e,k,d,a),THREE.WebGLUniforms.upload(x,e,k,N));return h}function v(a,b){a.roughness.value=b.roughness;a.metalness.value=b.metalness;b.roughnessMap&&(a.roughnessMap.value=b.roughnessMap);b.metalnessMap&&(a.metalnessMap.value=b.metalnessMap);b.lightMap&&(a.lightMap.value=b.lightMap,a.lightMapIntensity.value=b.lightMapIntensity);b.emissiveMap&&(a.emissiveMap.value=
b.emissiveMap);b.bumpMap&&(a.bumpMap.value=b.bumpMap,a.bumpScale.value=b.bumpScale);b.normalMap&&(a.normalMap.value=b.normalMap,a.normalScale.value.copy(b.normalScale));b.displacementMap&&(a.displacementMap.value=b.displacementMap,a.displacementScale.value=b.displacementScale,a.displacementBias.value=b.displacementBias);b.envMap&&(a.envMapIntensity.value=b.envMapIntensity)}function t(a){var b;if(a===THREE.RepeatWrapping)return x.REPEAT;if(a===THREE.ClampToEdgeWrapping)return x.CLAMP_TO_EDGE;if(a===
THREE.MirroredRepeatWrapping)return x.MIRRORED_REPEAT;if(a===THREE.NearestFilter)return x.NEAREST;if(a===THREE.NearestMipMapNearestFilter)return x.NEAREST_MIPMAP_NEAREST;if(a===THREE.NearestMipMapLinearFilter)return x.NEAREST_MIPMAP_LINEAR;if(a===THREE.LinearFilter)return x.LINEAR;if(a===THREE.LinearMipMapNearestFilter)return x.LINEAR_MIPMAP_NEAREST;if(a===THREE.LinearMipMapLinearFilter)return x.LINEAR_MIPMAP_LINEAR;if(a===THREE.UnsignedByteType)return x.UNSIGNED_BYTE;if(a===THREE.UnsignedShort4444Type)return x.UNSIGNED_SHORT_4_4_4_4;
if(a===THREE.UnsignedShort5551Type)return x.UNSIGNED_SHORT_5_5_5_1;if(a===THREE.UnsignedShort565Type)return x.UNSIGNED_SHORT_5_6_5;if(a===THREE.ByteType)return x.BYTE;if(a===THREE.ShortType)return x.SHORT;if(a===THREE.UnsignedShortType)return x.UNSIGNED_SHORT;if(a===THREE.IntType)return x.INT;if(a===THREE.UnsignedIntType)return x.UNSIGNED_INT;if(a===THREE.FloatType)return x.FLOAT;b=U.get("OES_texture_half_float");if(null!==b&&a===THREE.HalfFloatType)return b.HALF_FLOAT_OES;if(a===THREE.AlphaFormat)return x.ALPHA;
if(a===THREE.RGBFormat)return x.RGB;if(a===THREE.RGBAFormat)return x.RGBA;if(a===THREE.LuminanceFormat)return x.LUMINANCE;if(a===THREE.LuminanceAlphaFormat)return x.LUMINANCE_ALPHA;if(a===THREE.DepthFormat)return x.DEPTH_COMPONENT;if(a===THREE.AddEquation)return x.FUNC_ADD;if(a===THREE.SubtractEquation)return x.FUNC_SUBTRACT;if(a===THREE.ReverseSubtractEquation)return x.FUNC_REVERSE_SUBTRACT;if(a===THREE.ZeroFactor)return x.ZERO;if(a===THREE.OneFactor)return x.ONE;if(a===THREE.SrcColorFactor)return x.SRC_COLOR;
if(a===THREE.OneMinusSrcColorFactor)return x.ONE_MINUS_SRC_COLOR;if(a===THREE.SrcAlphaFactor)return x.SRC_ALPHA;if(a===THREE.OneMinusSrcAlphaFactor)return x.ONE_MINUS_SRC_ALPHA;if(a===THREE.DstAlphaFactor)return x.DST_ALPHA;if(a===THREE.OneMinusDstAlphaFactor)return x.ONE_MINUS_DST_ALPHA;if(a===THREE.DstColorFactor)return x.DST_COLOR;if(a===THREE.OneMinusDstColorFactor)return x.ONE_MINUS_DST_COLOR;if(a===THREE.SrcAlphaSaturateFactor)return x.SRC_ALPHA_SATURATE;b=U.get("WEBGL_compressed_texture_s3tc");
if(null!==b){if(a===THREE.RGB_S3TC_DXT1_Format)return b.COMPRESSED_RGB_S3TC_DXT1_EXT;if(a===THREE.RGBA_S3TC_DXT1_Format)return b.COMPRESSED_RGBA_S3TC_DXT1_EXT;if(a===THREE.RGBA_S3TC_DXT3_Format)return b.COMPRESSED_RGBA_S3TC_DXT3_EXT;if(a===THREE.RGBA_S3TC_DXT5_Format)return b.COMPRESSED_RGBA_S3TC_DXT5_EXT}b=U.get("WEBGL_compressed_texture_pvrtc");if(null!==b){if(a===THREE.RGB_PVRTC_4BPPV1_Format)return b.COMPRESSED_RGB_PVRTC_4BPPV1_IMG;if(a===THREE.RGB_PVRTC_2BPPV1_Format)return b.COMPRESSED_RGB_PVRTC_2BPPV1_IMG;
if(a===THREE.RGBA_PVRTC_4BPPV1_Format)return b.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG;if(a===THREE.RGBA_PVRTC_2BPPV1_Format)return b.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG}b=U.get("WEBGL_compressed_texture_etc1");if(null!==b&&a===THREE.RGB_ETC1_Format)return b.COMPRESSED_RGB_ETC1_WEBGL;b=U.get("EXT_blend_minmax");if(null!==b){if(a===THREE.MinEquation)return b.MIN_EXT;if(a===THREE.MaxEquation)return b.MAX_EXT}return 0}console.log("THREE.WebGLRenderer",THREE.REVISION);a=a||{};var u=void 0!==a.canvas?a.canvas:document.createElementNS("http://www.w3.org/1999/xhtml",
"canvas"),D=void 0!==a.context?a.context:null,w=void 0!==a.alpha?a.alpha:!1,I=void 0!==a.depth?a.depth:!0,z=void 0!==a.stencil?a.stencil:!0,y=void 0!==a.antialias?a.antialias:!1,A=void 0!==a.premultipliedAlpha?a.premultipliedAlpha:!0,G=void 0!==a.preserveDrawingBuffer?a.preserveDrawingBuffer:!1,B=[],F=[],J=-1,P=[],K=-1,H=new Float32Array(8),M=[],O=[];this.domElement=u;this.context=null;this.sortObjects=this.autoClearStencil=this.autoClearDepth=this.autoClearColor=this.autoClear=!0;this.clippingPlanes=
[];this.localClippingEnabled=!1;this.gammaFactor=2;this.physicallyCorrectLights=this.gammaOutput=this.gammaInput=!1;this.toneMapping=THREE.LinearToneMapping;this.toneMappingWhitePoint=this.toneMappingExposure=1;this.maxMorphTargets=8;this.maxMorphNormals=4;var N=this,Q=null,C=null,L=null,E=-1,$="",T=null,X=new THREE.Vector4,ea=null,fa=new THREE.Vector4,ga=0,V=new THREE.Color(0),ba=0,aa=u.width,sa=u.height,Z=1,ua=new THREE.Vector4(0,0,aa,sa),xa=!1,na=new THREE.Vector4(0,0,aa,sa),wa=new THREE.Frustum,
da=new THREE.WebGLClipping,ra=!1,va=!1,ka=new THREE.Sphere,qa=new THREE.Matrix4,W=new THREE.Vector3,S={hash:"",ambient:[0,0,0],directional:[],directionalShadowMap:[],directionalShadowMatrix:[],spot:[],spotShadowMap:[],spotShadowMatrix:[],point:[],pointShadowMap:[],pointShadowMatrix:[],hemi:[],shadows:[]},ia={calls:0,vertices:0,faces:0,points:0};this.info={render:ia,memory:{geometries:0,textures:0},programs:null};var x;try{w={alpha:w,depth:I,stencil:z,antialias:y,premultipliedAlpha:A,preserveDrawingBuffer:G};
x=D||u.getContext("webgl",w)||u.getContext("experimental-webgl",w);if(null===x){if(null!==u.getContext("webgl"))throw"Error creating WebGL context with your selected attributes.";throw"Error creating WebGL context.";}void 0===x.getShaderPrecisionFormat&&(x.getShaderPrecisionFormat=function(){return{rangeMin:1,rangeMax:1,precision:1}});u.addEventListener("webglcontextlost",e,!1)}catch(za){console.error("THREE.WebGLRenderer: "+za)}var U=new THREE.WebGLExtensions(x);U.get("WEBGL_depth_texture");U.get("OES_texture_float");
U.get("OES_texture_float_linear");U.get("OES_texture_half_float");U.get("OES_texture_half_float_linear");U.get("OES_standard_derivatives");U.get("ANGLE_instanced_arrays");U.get("OES_element_index_uint")&&(THREE.BufferGeometry.MaxIndex=4294967296);var ca=new THREE.WebGLCapabilities(x,U,a),R=new THREE.WebGLState(x,U,t),Y=new THREE.WebGLProperties,la=new THREE.WebGLTextures(x,U,R,Y,ca,t,this.info),ha=new THREE.WebGLObjects(x,Y,this.info),oa=new THREE.WebGLPrograms(this,ca),ta=new THREE.WebGLLights;this.info.programs=
oa.programs;var Aa=new THREE.WebGLBufferRenderer(x,U,ia),Ba=new THREE.WebGLIndexedBufferRenderer(x,U,ia),Ca=new THREE.OrthographicCamera(-1,1,1,-1,0,1),ma=new THREE.PerspectiveCamera,pa=new THREE.Mesh(new THREE.PlaneBufferGeometry(2,2),new THREE.MeshBasicMaterial({depthTest:!1,depthWrite:!1,fog:!1}));a=THREE.ShaderLib.cube;var ja=new THREE.Mesh(new THREE.BoxBufferGeometry(5,5,5),new THREE.ShaderMaterial({uniforms:a.uniforms,vertexShader:a.vertexShader,fragmentShader:a.fragmentShader,side:THREE.BackSide,
depthTest:!1,depthWrite:!1,fog:!1}));c();this.context=x;this.capabilities=ca;this.extensions=U;this.properties=Y;this.state=R;var ya=new THREE.WebGLShadowMap(this,S,ha,ca);this.shadowMap=ya;var Da=new THREE.SpritePlugin(this,M),Ea=new THREE.LensFlarePlugin(this,O);this.getContext=function(){return x};this.getContextAttributes=function(){return x.getContextAttributes()};this.forceContextLoss=function(){U.get("WEBGL_lose_context").loseContext()};this.getMaxAnisotropy=function(){return ca.getMaxAnisotropy()};
this.getPrecision=function(){return ca.precision};this.getPixelRatio=function(){return Z};this.setPixelRatio=function(a){void 0!==a&&(Z=a,this.setSize(na.z,na.w,!1))};this.getSize=function(){return{width:aa,height:sa}};this.setSize=function(a,b,c){aa=a;sa=b;u.width=a*Z;u.height=b*Z;!1!==c&&(u.style.width=a+"px",u.style.height=b+"px");this.setViewport(0,0,a,b)};this.setViewport=function(a,b,c,d){R.viewport(na.set(a,b,c,d))};this.setScissor=function(a,b,c,d){R.scissor(ua.set(a,b,c,d))};this.setScissorTest=
function(a){R.setScissorTest(xa=a)};this.getClearColor=function(){return V};this.setClearColor=function(a,c){V.set(a);ba=void 0!==c?c:1;b(V.r,V.g,V.b,ba)};this.getClearAlpha=function(){return ba};this.setClearAlpha=function(a){ba=a;b(V.r,V.g,V.b,ba)};this.clear=function(a,b,c){var d=0;if(void 0===a||a)d|=x.COLOR_BUFFER_BIT;if(void 0===b||b)d|=x.DEPTH_BUFFER_BIT;if(void 0===c||c)d|=x.STENCIL_BUFFER_BIT;x.clear(d)};this.clearColor=function(){this.clear(!0,!1,!1)};this.clearDepth=function(){this.clear(!1,
!0,!1)};this.clearStencil=function(){this.clear(!1,!1,!0)};this.clearTarget=function(a,b,c,d){this.setRenderTarget(a);this.clear(b,c,d)};this.resetGLState=d;this.dispose=function(){P=[];K=-1;F=[];J=-1;u.removeEventListener("webglcontextlost",e,!1)};this.renderBufferImmediate=function(a,b,c){R.initAttributes();var d=Y.get(a);a.hasPositions&&!d.position&&(d.position=x.createBuffer());a.hasNormals&&!d.normal&&(d.normal=x.createBuffer());a.hasUvs&&!d.uv&&(d.uv=x.createBuffer());a.hasColors&&!d.color&&
(d.color=x.createBuffer());b=b.getAttributes();a.hasPositions&&(x.bindBuffer(x.ARRAY_BUFFER,d.position),x.bufferData(x.ARRAY_BUFFER,a.positionArray,x.DYNAMIC_DRAW),R.enableAttribute(b.position),x.vertexAttribPointer(b.position,3,x.FLOAT,!1,0,0));if(a.hasNormals){x.bindBuffer(x.ARRAY_BUFFER,d.normal);if("MeshPhongMaterial"!==c.type&&"MeshStandardMaterial"!==c.type&&"MeshPhysicalMaterial"!==c.type&&c.shading===THREE.FlatShading)for(var e=0,g=3*a.count;e<g;e+=9){var f=a.normalArray,h=(f[e+0]+f[e+3]+
f[e+6])/3,k=(f[e+1]+f[e+4]+f[e+7])/3,l=(f[e+2]+f[e+5]+f[e+8])/3;f[e+0]=h;f[e+1]=k;f[e+2]=l;f[e+3]=h;f[e+4]=k;f[e+5]=l;f[e+6]=h;f[e+7]=k;f[e+8]=l}x.bufferData(x.ARRAY_BUFFER,a.normalArray,x.DYNAMIC_DRAW);R.enableAttribute(b.normal);x.vertexAttribPointer(b.normal,3,x.FLOAT,!1,0,0)}a.hasUvs&&c.map&&(x.bindBuffer(x.ARRAY_BUFFER,d.uv),x.bufferData(x.ARRAY_BUFFER,a.uvArray,x.DYNAMIC_DRAW),R.enableAttribute(b.uv),x.vertexAttribPointer(b.uv,2,x.FLOAT,!1,0,0));a.hasColors&&c.vertexColors!==THREE.NoColors&&
(x.bindBuffer(x.ARRAY_BUFFER,d.color),x.bufferData(x.ARRAY_BUFFER,a.colorArray,x.DYNAMIC_DRAW),R.enableAttribute(b.color),x.vertexAttribPointer(b.color,3,x.FLOAT,!1,0,0));R.disableUnusedAttributes();x.drawArrays(x.TRIANGLES,0,a.count);a.count=0};this.renderBufferDirect=function(a,b,c,d,e,f){r(d);var g=s(a,b,d,e),k=!1;a=c.id+"_"+g.id+"_"+d.wireframe;a!==$&&($=a,k=!0);b=e.morphTargetInfluences;if(void 0!==b){a=[];for(var l=0,k=b.length;l<k;l++){var n=b[l];a.push([n,l])}a.sort(h);8<a.length&&(a.length=
8);for(var m=c.morphAttributes,l=0,k=a.length;l<k;l++)n=a[l],H[l]=n[0],0!==n[0]?(b=n[1],!0===d.morphTargets&&m.position&&c.addAttribute("morphTarget"+l,m.position[b]),!0===d.morphNormals&&m.normal&&c.addAttribute("morphNormal"+l,m.normal[b])):(!0===d.morphTargets&&c.removeAttribute("morphTarget"+l),!0===d.morphNormals&&c.removeAttribute("morphNormal"+l));g.getUniforms().setValue(x,"morphTargetInfluences",H);k=!0}b=c.index;l=c.attributes.position;!0===d.wireframe&&(b=ha.getWireframeAttribute(c));null!==
b?(a=Ba,a.setIndex(b)):a=Aa;if(k){a:{var k=void 0,p;if(c instanceof THREE.InstancedBufferGeometry&&(p=U.get("ANGLE_instanced_arrays"),null===p)){console.error("THREE.WebGLRenderer.setupVertexAttributes: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.");break a}void 0===k&&(k=0);R.initAttributes();var n=c.attributes,g=g.getAttributes(),m=d.defaultAttributeValues,q;for(q in g){var u=g[q];if(0<=u){var w=n[q];if(void 0!==w){var t=x.FLOAT,D=w.array,v=
w.normalized;D instanceof Float32Array?t=x.FLOAT:D instanceof Float64Array?console.warn("Unsupported data buffer format: Float64Array"):D instanceof Uint16Array?t=x.UNSIGNED_SHORT:D instanceof Int16Array?t=x.SHORT:D instanceof Uint32Array?t=x.UNSIGNED_INT:D instanceof Int32Array?t=x.INT:D instanceof Int8Array?t=x.BYTE:D instanceof Uint8Array&&(t=x.UNSIGNED_BYTE);var D=w.itemSize,y=ha.getAttributeBuffer(w);if(w instanceof THREE.InterleavedBufferAttribute){var z=w.data,A=z.stride,w=w.offset;z instanceof
THREE.InstancedInterleavedBuffer?(R.enableAttributeAndDivisor(u,z.meshPerAttribute,p),void 0===c.maxInstancedCount&&(c.maxInstancedCount=z.meshPerAttribute*z.count)):R.enableAttribute(u);x.bindBuffer(x.ARRAY_BUFFER,y);x.vertexAttribPointer(u,D,t,v,A*z.array.BYTES_PER_ELEMENT,(k*A+w)*z.array.BYTES_PER_ELEMENT)}else w instanceof THREE.InstancedBufferAttribute?(R.enableAttributeAndDivisor(u,w.meshPerAttribute,p),void 0===c.maxInstancedCount&&(c.maxInstancedCount=w.meshPerAttribute*w.count)):R.enableAttribute(u),
x.bindBuffer(x.ARRAY_BUFFER,y),x.vertexAttribPointer(u,D,t,v,0,k*D*w.array.BYTES_PER_ELEMENT)}else if(void 0!==m&&(t=m[q],void 0!==t))switch(t.length){case 2:x.vertexAttrib2fv(u,t);break;case 3:x.vertexAttrib3fv(u,t);break;case 4:x.vertexAttrib4fv(u,t);break;default:x.vertexAttrib1fv(u,t)}}}R.disableUnusedAttributes()}null!==b&&x.bindBuffer(x.ELEMENT_ARRAY_BUFFER,ha.getAttributeBuffer(b))}p=Infinity;null!==b?p=b.count:void 0!==l&&(p=l.count);q=c.drawRange.start;b=c.drawRange.count;l=null!==f?f.start:
0;k=null!==f?f.count:Infinity;f=Math.max(0,q,l);p=Math.min(0+p,q+b,l+k)-1;p=Math.max(0,p-f+1);if(e instanceof THREE.Mesh)if(!0===d.wireframe)R.setLineWidth(d.wireframeLinewidth*(null===C?Z:1)),a.setMode(x.LINES);else switch(e.drawMode){case THREE.TrianglesDrawMode:a.setMode(x.TRIANGLES);break;case THREE.TriangleStripDrawMode:a.setMode(x.TRIANGLE_STRIP);break;case THREE.TriangleFanDrawMode:a.setMode(x.TRIANGLE_FAN)}else e instanceof THREE.Line?(d=d.linewidth,void 0===d&&(d=1),R.setLineWidth(d*(null===
C?Z:1)),e instanceof THREE.LineSegments?a.setMode(x.LINES):a.setMode(x.LINE_STRIP)):e instanceof THREE.Points&&a.setMode(x.POINTS);c instanceof THREE.InstancedBufferGeometry?0<c.maxInstancedCount&&a.renderInstances(c,f,p):a.render(f,p)};this.render=function(a,c,d,e){if(!1===c instanceof THREE.Camera)console.error("THREE.WebGLRenderer.render: camera is not an instance of THREE.Camera.");else{var f=a.fog;$="";E=-1;T=null;!0===a.autoUpdate&&a.updateMatrixWorld();null===c.parent&&c.updateMatrixWorld();
c.matrixWorldInverse.getInverse(c.matrixWorld);qa.multiplyMatrices(c.projectionMatrix,c.matrixWorldInverse);wa.setFromMatrix(qa);B.length=0;K=J=-1;M.length=0;O.length=0;va=this.localClippingEnabled;ra=da.init(this.clippingPlanes,va,c);n(a,c);F.length=J+1;P.length=K+1;!0===N.sortObjects&&(F.sort(k),P.sort(l));ra&&da.beginShadows();for(var g=B,h=0,p=0,m=g.length;p<m;p++){var u=g[p];u.castShadow&&(S.shadows[h++]=u)}S.shadows.length=h;ya.render(a,c);for(var g=B,r=u=0,s=0,w,t,D,H,v=c.matrixWorldInverse,
y=0,z=0,A=0,L=0,h=0,p=g.length;h<p;h++)if(m=g[h],w=m.color,t=m.intensity,D=m.distance,H=m.shadow&&m.shadow.map?m.shadow.map.texture:null,m instanceof THREE.AmbientLight)u+=w.r*t,r+=w.g*t,s+=w.b*t;else if(m instanceof THREE.DirectionalLight){var C=ta.get(m);C.color.copy(m.color).multiplyScalar(m.intensity);C.direction.setFromMatrixPosition(m.matrixWorld);W.setFromMatrixPosition(m.target.matrixWorld);C.direction.sub(W);C.direction.transformDirection(v);if(C.shadow=m.castShadow)C.shadowBias=m.shadow.bias,
C.shadowRadius=m.shadow.radius,C.shadowMapSize=m.shadow.mapSize;S.directionalShadowMap[y]=H;S.directionalShadowMatrix[y]=m.shadow.matrix;S.directional[y++]=C}else if(m instanceof THREE.SpotLight){C=ta.get(m);C.position.setFromMatrixPosition(m.matrixWorld);C.position.applyMatrix4(v);C.color.copy(w).multiplyScalar(t);C.distance=D;C.direction.setFromMatrixPosition(m.matrixWorld);W.setFromMatrixPosition(m.target.matrixWorld);C.direction.sub(W);C.direction.transformDirection(v);C.coneCos=Math.cos(m.angle);
C.penumbraCos=Math.cos(m.angle*(1-m.penumbra));C.decay=0===m.distance?0:m.decay;if(C.shadow=m.castShadow)C.shadowBias=m.shadow.bias,C.shadowRadius=m.shadow.radius,C.shadowMapSize=m.shadow.mapSize;S.spotShadowMap[A]=H;S.spotShadowMatrix[A]=m.shadow.matrix;S.spot[A++]=C}else if(m instanceof THREE.PointLight){C=ta.get(m);C.position.setFromMatrixPosition(m.matrixWorld);C.position.applyMatrix4(v);C.color.copy(m.color).multiplyScalar(m.intensity);C.distance=m.distance;C.decay=0===m.distance?0:m.decay;if(C.shadow=
m.castShadow)C.shadowBias=m.shadow.bias,C.shadowRadius=m.shadow.radius,C.shadowMapSize=m.shadow.mapSize;S.pointShadowMap[z]=H;void 0===S.pointShadowMatrix[z]&&(S.pointShadowMatrix[z]=new THREE.Matrix4);W.setFromMatrixPosition(m.matrixWorld).negate();S.pointShadowMatrix[z].identity().setPosition(W);S.point[z++]=C}else m instanceof THREE.HemisphereLight&&(C=ta.get(m),C.direction.setFromMatrixPosition(m.matrixWorld),C.direction.transformDirection(v),C.direction.normalize(),C.skyColor.copy(m.color).multiplyScalar(t),
C.groundColor.copy(m.groundColor).multiplyScalar(t),S.hemi[L++]=C);S.ambient[0]=u;S.ambient[1]=r;S.ambient[2]=s;S.directional.length=y;S.spot.length=A;S.point.length=z;S.hemi.length=L;S.hash=y+","+z+","+A+","+L+","+S.shadows.length;ra&&da.endShadows();ia.calls=0;ia.vertices=0;ia.faces=0;ia.points=0;void 0===d&&(d=null);this.setRenderTarget(d);g=a.background;null===g?b(V.r,V.g,V.b,ba):g instanceof THREE.Color&&b(g.r,g.g,g.b,1);(this.autoClear||e)&&this.clear(this.autoClearColor,this.autoClearDepth,
this.autoClearStencil);g instanceof THREE.CubeTexture?(ma.projectionMatrix.copy(c.projectionMatrix),ma.matrixWorld.extractRotation(c.matrixWorld),ma.matrixWorldInverse.getInverse(ma.matrixWorld),ja.material.uniforms.tCube.value=g,ja.modelViewMatrix.multiplyMatrices(ma.matrixWorldInverse,ja.matrixWorld),ha.update(ja),N.renderBufferDirect(ma,null,ja.geometry,ja.material,ja,null)):g instanceof THREE.Texture&&(pa.material.map=g,ha.update(pa),N.renderBufferDirect(Ca,null,pa.geometry,pa.material,pa,null));
a.overrideMaterial?(e=a.overrideMaterial,q(F,c,f,e),q(P,c,f,e)):(R.setBlending(THREE.NoBlending),q(F,c,f),q(P,c,f));Da.render(a,c);Ea.render(a,c,fa);d&&la.updateRenderTargetMipmap(d);R.setDepthTest(!0);R.setDepthWrite(!0);R.setColorWrite(!0)}};this.setFaceCulling=function(a,b){R.setCullFace(a);R.setFlipSided(b===THREE.FrontFaceDirectionCW)};this.allocTextureUnit=function(){var a=ga;a>=ca.maxTextures&&console.warn("WebGLRenderer: trying to use "+a+" texture units while this GPU supports only "+ca.maxTextures);
ga+=1;return a};this.setTexture2D=function(){var a=!1;return function(b,c){b instanceof THREE.WebGLRenderTarget&&(a||(console.warn("THREE.WebGLRenderer.setTexture2D: don't use render targets as textures. Use their .texture property instead."),a=!0),b=b.texture);la.setTexture2D(b,c)}}();this.setTexture=function(){var a=!1;return function(b,c){a||(console.warn("THREE.WebGLRenderer: .setTexture is deprecated, use setTexture2D instead."),a=!0);la.setTexture2D(b,c)}}();this.setTextureCube=function(){var a=
!1;return function(b,c){b instanceof THREE.WebGLRenderTargetCube&&(a||(console.warn("THREE.WebGLRenderer.setTextureCube: don't use cube render targets as textures. Use their .texture property instead."),a=!0),b=b.texture);b instanceof THREE.CubeTexture||Array.isArray(b.image)&&6===b.image.length?la.setTextureCube(b,c):la.setTextureCubeDynamic(b,c)}}();this.getCurrentRenderTarget=function(){return C};this.setRenderTarget=function(a){(C=a)&&void 0===Y.get(a).__webglFramebuffer&&la.setupRenderTarget(a);
var b=a instanceof THREE.WebGLRenderTargetCube,c;a?(c=Y.get(a),c=b?c.__webglFramebuffer[a.activeCubeFace]:c.__webglFramebuffer,X.copy(a.scissor),ea=a.scissorTest,fa.copy(a.viewport)):(c=null,X.copy(ua).multiplyScalar(Z),ea=xa,fa.copy(na).multiplyScalar(Z));L!==c&&(x.bindFramebuffer(x.FRAMEBUFFER,c),L=c);R.scissor(X);R.setScissorTest(ea);R.viewport(fa);b&&(b=Y.get(a.texture),x.framebufferTexture2D(x.FRAMEBUFFER,x.COLOR_ATTACHMENT0,x.TEXTURE_CUBE_MAP_POSITIVE_X+a.activeCubeFace,b.__webglTexture,a.activeMipMapLevel))};
this.readRenderTargetPixels=function(a,b,c,d,e,g){if(!1===a instanceof THREE.WebGLRenderTarget)console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not THREE.WebGLRenderTarget.");else{var f=Y.get(a).__webglFramebuffer;if(f){var h=!1;f!==L&&(x.bindFramebuffer(x.FRAMEBUFFER,f),h=!0);try{var k=a.texture;k.format!==THREE.RGBAFormat&&t(k.format)!==x.getParameter(x.IMPLEMENTATION_COLOR_READ_FORMAT)?console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in RGBA or implementation defined format."):
k.type===THREE.UnsignedByteType||t(k.type)===x.getParameter(x.IMPLEMENTATION_COLOR_READ_TYPE)||k.type===THREE.FloatType&&U.get("WEBGL_color_buffer_float")||k.type===THREE.HalfFloatType&&U.get("EXT_color_buffer_half_float")?x.checkFramebufferStatus(x.FRAMEBUFFER)===x.FRAMEBUFFER_COMPLETE?0<=b&&b<=a.width-d&&0<=c&&c<=a.height-e&&x.readPixels(b,c,d,e,t(k.format),t(k.type),g):console.error("THREE.WebGLRenderer.readRenderTargetPixels: readPixels from renderTarget failed. Framebuffer not complete."):console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in UnsignedByteType or implementation defined type.")}finally{h&&
x.bindFramebuffer(x.FRAMEBUFFER,L)}}}}};
THREE.WebGLRenderTarget=function(a,b,c){this.uuid=THREE.Math.generateUUID();this.width=a;this.height=b;this.scissor=new THREE.Vector4(0,0,a,b);this.scissorTest=!1;this.viewport=new THREE.Vector4(0,0,a,b);c=c||{};void 0===c.minFilter&&(c.minFilter=THREE.LinearFilter);this.texture=new THREE.Texture(void 0,void 0,c.wrapS,c.wrapT,c.magFilter,c.minFilter,c.format,c.type,c.anisotropy,c.encoding);this.depthBuffer=void 0!==c.depthBuffer?c.depthBuffer:!0;this.stencilBuffer=void 0!==c.stencilBuffer?c.stencilBuffer:
!0;this.depthTexture=null};
Object.assign(THREE.WebGLRenderTarget.prototype,THREE.EventDispatcher.prototype,{setSize:function(a,b){if(this.width!==a||this.height!==b)this.width=a,this.height=b,this.dispose();this.viewport.set(0,0,a,b);this.scissor.set(0,0,a,b)},clone:function(){return(new this.constructor).copy(this)},copy:function(a){this.width=a.width;this.height=a.height;this.viewport.copy(a.viewport);this.texture=a.texture.clone();this.depthBuffer=a.depthBuffer;this.stencilBuffer=a.stencilBuffer;this.depthTexture=a.depthTexture;
return this},dispose:function(){this.dispatchEvent({type:"dispose"})}});THREE.WebGLRenderTargetCube=function(a,b,c){THREE.WebGLRenderTarget.call(this,a,b,c);this.activeMipMapLevel=this.activeCubeFace=0};THREE.WebGLRenderTargetCube.prototype=Object.create(THREE.WebGLRenderTarget.prototype);THREE.WebGLRenderTargetCube.prototype.constructor=THREE.WebGLRenderTargetCube;
THREE.WebGLBufferRenderer=function(a,b,c){var d;this.setMode=function(a){d=a};this.render=function(b,f){a.drawArrays(d,b,f);c.calls++;c.vertices+=f;d===a.TRIANGLES&&(c.faces+=f/3)};this.renderInstances=function(e){var f=b.get("ANGLE_instanced_arrays");if(null===f)console.error("THREE.WebGLBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.");else{var g=e.attributes.position,h=0,h=g instanceof THREE.InterleavedBufferAttribute?g.data.count:
g.count;f.drawArraysInstancedANGLE(d,0,h,e.maxInstancedCount);c.calls++;c.vertices+=h*e.maxInstancedCount;d===a.TRIANGLES&&(c.faces+=e.maxInstancedCount*h/3)}}};
THREE.WebGLClipping=function(){function a(){l.value!==d&&(l.value=d,l.needsUpdate=0<e);c.numPlanes=e}function b(a,b,d,e){var g=null!==a?a.length:0,f=null;if(0!==g){f=l.value;if(!0!==e||null===f){e=d+4*g;b=b.matrixWorldInverse;k.getNormalMatrix(b);if(null===f||f.length<e)f=new Float32Array(e);for(e=0;e!==g;++e,d+=4)h.copy(a[e]).applyMatrix4(b,k),h.normal.toArray(f,d),f[d+3]=h.constant}l.value=f;l.needsUpdate=!0}c.numPlanes=g;return f}var c=this,d=null,e=0,f=!1,g=!1,h=new THREE.Plane,k=new THREE.Matrix3,
l={value:null,needsUpdate:!1};this.uniform=l;this.numPlanes=0;this.init=function(a,c,g){var h=0!==a.length||c||0!==e||f;f=c;d=b(a,g,0);e=a.length;return h};this.beginShadows=function(){g=!0;b(null)};this.endShadows=function(){g=!1;a()};this.setState=function(c,h,k,q,r){if(!f||null===c||0===c.length||g&&!h)g?b(null):a();else{h=g?0:e;var s=4*h,v=q.clippingState||null;l.value=v;v=b(c,k,s,r);for(c=0;c!==s;++c)v[c]=d[c];q.clippingState=v;this.numPlanes+=h}}};
THREE.WebGLIndexedBufferRenderer=function(a,b,c){var d,e,f;this.setMode=function(a){d=a};this.setIndex=function(c){c.array instanceof Uint32Array&&b.get("OES_element_index_uint")?(e=a.UNSIGNED_INT,f=4):(e=a.UNSIGNED_SHORT,f=2)};this.render=function(b,h){a.drawElements(d,h,e,b*f);c.calls++;c.vertices+=h;d===a.TRIANGLES&&(c.faces+=h/3)};this.renderInstances=function(g,h,k){var l=b.get("ANGLE_instanced_arrays");null===l?console.error("THREE.WebGLBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays."):
(l.drawElementsInstancedANGLE(d,k,e,h*f,g.maxInstancedCount),c.calls++,c.vertices+=k*g.maxInstancedCount,d===a.TRIANGLES&&(c.faces+=g.maxInstancedCount*k/3))}};
THREE.WebGLExtensions=function(a){var b={};this.get=function(c){if(void 0!==b[c])return b[c];var d;switch(c){case "WEBGL_depth_texture":d=a.getExtension("WEBGL_depth_texture")||a.getExtension("MOZ_WEBGL_depth_texture")||a.getExtension("WEBKIT_WEBGL_depth_texture");break;case "EXT_texture_filter_anisotropic":d=a.getExtension("EXT_texture_filter_anisotropic")||a.getExtension("MOZ_EXT_texture_filter_anisotropic")||a.getExtension("WEBKIT_EXT_texture_filter_anisotropic");break;case "WEBGL_compressed_texture_s3tc":d=
a.getExtension("WEBGL_compressed_texture_s3tc")||a.getExtension("MOZ_WEBGL_compressed_texture_s3tc")||a.getExtension("WEBKIT_WEBGL_compressed_texture_s3tc");break;case "WEBGL_compressed_texture_pvrtc":d=a.getExtension("WEBGL_compressed_texture_pvrtc")||a.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc");break;case "WEBGL_compressed_texture_etc1":d=a.getExtension("WEBGL_compressed_texture_etc1");break;default:d=a.getExtension(c)}null===d&&console.warn("THREE.WebGLRenderer: "+c+" extension not supported.");
return b[c]=d}};
THREE.WebGLCapabilities=function(a,b,c){function d(b){if("highp"===b){if(0<a.getShaderPrecisionFormat(a.VERTEX_SHADER,a.HIGH_FLOAT).precision&&0<a.getShaderPrecisionFormat(a.FRAGMENT_SHADER,a.HIGH_FLOAT).precision)return"highp";b="mediump"}return"mediump"===b&&0<a.getShaderPrecisionFormat(a.VERTEX_SHADER,a.MEDIUM_FLOAT).precision&&0<a.getShaderPrecisionFormat(a.FRAGMENT_SHADER,a.MEDIUM_FLOAT).precision?"mediump":"lowp"}var e;this.getMaxAnisotropy=function(){if(void 0!==e)return e;var c=b.get("EXT_texture_filter_anisotropic");
return e=null!==c?a.getParameter(c.MAX_TEXTURE_MAX_ANISOTROPY_EXT):0};this.getMaxPrecision=d;this.precision=void 0!==c.precision?c.precision:"highp";this.logarithmicDepthBuffer=void 0!==c.logarithmicDepthBuffer?c.logarithmicDepthBuffer:!1;this.maxTextures=a.getParameter(a.MAX_TEXTURE_IMAGE_UNITS);this.maxVertexTextures=a.getParameter(a.MAX_VERTEX_TEXTURE_IMAGE_UNITS);this.maxTextureSize=a.getParameter(a.MAX_TEXTURE_SIZE);this.maxCubemapSize=a.getParameter(a.MAX_CUBE_MAP_TEXTURE_SIZE);this.maxAttributes=
a.getParameter(a.MAX_VERTEX_ATTRIBS);this.maxVertexUniforms=a.getParameter(a.MAX_VERTEX_UNIFORM_VECTORS);this.maxVaryings=a.getParameter(a.MAX_VARYING_VECTORS);this.maxFragmentUniforms=a.getParameter(a.MAX_FRAGMENT_UNIFORM_VECTORS);this.vertexTextures=0<this.maxVertexTextures;this.floatFragmentTextures=!!b.get("OES_texture_float");this.floatVertexTextures=this.vertexTextures&&this.floatFragmentTextures;c=d(this.precision);c!==this.precision&&(console.warn("THREE.WebGLRenderer:",this.precision,"not supported, using",
c,"instead."),this.precision=c);this.logarithmicDepthBuffer&&(this.logarithmicDepthBuffer=!!b.get("EXT_frag_depth"))};
THREE.WebGLGeometries=function(a,b,c){function d(a){var h=a.target;a=f[h.id];null!==a.index&&e(a.index);var k=a.attributes,l;for(l in k)e(k[l]);h.removeEventListener("dispose",d);delete f[h.id];l=b.get(h);l.wireframe&&e(l.wireframe);b.delete(h);h=b.get(a);h.wireframe&&e(h.wireframe);b.delete(a);c.memory.geometries--}function e(c){var d;d=c instanceof THREE.InterleavedBufferAttribute?b.get(c.data).__webglBuffer:b.get(c).__webglBuffer;void 0!==d&&(a.deleteBuffer(d),c instanceof THREE.InterleavedBufferAttribute?
b.delete(c.data):b.delete(c))}var f={};this.get=function(a){var b=a.geometry;if(void 0!==f[b.id])return f[b.id];b.addEventListener("dispose",d);var e;b instanceof THREE.BufferGeometry?e=b:b instanceof THREE.Geometry&&(void 0===b._bufferGeometry&&(b._bufferGeometry=(new THREE.BufferGeometry).setFromObject(a)),e=b._bufferGeometry);f[b.id]=e;c.memory.geometries++;return e}};
THREE.WebGLLights=function(){var a={};this.get=function(b){if(void 0!==a[b.id])return a[b.id];var c;switch(b.type){case "DirectionalLight":c={direction:new THREE.Vector3,color:new THREE.Color,shadow:!1,shadowBias:0,shadowRadius:1,shadowMapSize:new THREE.Vector2};break;case "SpotLight":c={position:new THREE.Vector3,direction:new THREE.Vector3,color:new THREE.Color,distance:0,coneCos:0,penumbraCos:0,decay:0,shadow:!1,shadowBias:0,shadowRadius:1,shadowMapSize:new THREE.Vector2};break;case "PointLight":c=
{position:new THREE.Vector3,color:new THREE.Color,distance:0,decay:0,shadow:!1,shadowBias:0,shadowRadius:1,shadowMapSize:new THREE.Vector2};break;case "HemisphereLight":c={direction:new THREE.Vector3,skyColor:new THREE.Color,groundColor:new THREE.Color}}return a[b.id]=c}};
THREE.WebGLObjects=function(a,b,c){function d(c,d){var e=c instanceof THREE.InterleavedBufferAttribute?c.data:c,f=b.get(e);void 0===f.__webglBuffer?(f.__webglBuffer=a.createBuffer(),a.bindBuffer(d,f.__webglBuffer),a.bufferData(d,e.array,e.dynamic?a.DYNAMIC_DRAW:a.STATIC_DRAW),f.version=e.version):f.version!==e.version&&(a.bindBuffer(d,f.__webglBuffer),!1===e.dynamic||-1===e.updateRange.count?a.bufferSubData(d,0,e.array):0===e.updateRange.count?console.error("THREE.WebGLObjects.updateBuffer: dynamic THREE.BufferAttribute marked as needsUpdate but updateRange.count is 0, ensure you are using set methods or updating manually."):
(a.bufferSubData(d,e.updateRange.offset*e.array.BYTES_PER_ELEMENT,e.array.subarray(e.updateRange.offset,e.updateRange.offset+e.updateRange.count)),e.updateRange.count=0),f.version=e.version)}function e(a,b,c){if(b>c){var d=b;b=c;c=d}d=a[b];return void 0===d?(a[b]=[c],!0):-1===d.indexOf(c)?(d.push(c),!0):!1}var f=new THREE.WebGLGeometries(a,b,c);this.getAttributeBuffer=function(a){return a instanceof THREE.InterleavedBufferAttribute?b.get(a.data).__webglBuffer:b.get(a).__webglBuffer};this.getWireframeAttribute=
function(c){var f=b.get(c);if(void 0!==f.wireframe)return f.wireframe;var k=[],l=c.index,m=c.attributes;c=m.position;if(null!==l)for(var m={},l=l.array,p=0,n=l.length;p<n;p+=3){var q=l[p+0],r=l[p+1],s=l[p+2];e(m,q,r)&&k.push(q,r);e(m,r,s)&&k.push(r,s);e(m,s,q)&&k.push(s,q)}else for(l=m.position.array,p=0,n=l.length/3-1;p<n;p+=3)q=p+0,r=p+1,s=p+2,k.push(q,r,r,s,s,q);k=new THREE.BufferAttribute(new (65535<c.count?Uint32Array:Uint16Array)(k),1);d(k,a.ELEMENT_ARRAY_BUFFER);return f.wireframe=k};this.update=
function(b){var c=f.get(b);b.geometry instanceof THREE.Geometry&&c.updateFromObject(b);b=c.index;var e=c.attributes;null!==b&&d(b,a.ELEMENT_ARRAY_BUFFER);for(var l in e)d(e[l],a.ARRAY_BUFFER);b=c.morphAttributes;for(l in b)for(var e=b[l],m=0,p=e.length;m<p;m++)d(e[m],a.ARRAY_BUFFER);return c}};
THREE.WebGLProgram=function(){function a(a){switch(a){case THREE.LinearEncoding:return["Linear","( value )"];case THREE.sRGBEncoding:return["sRGB","( value )"];case THREE.RGBEEncoding:return["RGBE","( value )"];case THREE.RGBM7Encoding:return["RGBM","( value, 7.0 )"];case THREE.RGBM16Encoding:return["RGBM","( value, 16.0 )"];case THREE.RGBDEncoding:return["RGBD","( value, 256.0 )"];case THREE.GammaEncoding:return["Gamma","( value, float( GAMMA_FACTOR ) )"];default:throw Error("unsupported encoding: "+
a);}}function b(b,c){var d=a(c);return"vec4 "+b+"( vec4 value ) { return "+d[0]+"ToLinear"+d[1]+"; }"}function c(b,c){var d=a(c);return"vec4 "+b+"( vec4 value ) { return LinearTo"+d[0]+d[1]+"; }"}function d(a,b){var c;switch(b){case THREE.LinearToneMapping:c="Linear";break;case THREE.ReinhardToneMapping:c="Reinhard";break;case THREE.Uncharted2ToneMapping:c="Uncharted2";break;case THREE.CineonToneMapping:c="OptimizedCineon";break;default:throw Error("unsupported toneMapping: "+b);}return"vec3 "+a+
"( vec3 color ) { return "+c+"ToneMapping( color ); }"}function e(a,b,c){a=a||{};return[a.derivatives||b.envMapCubeUV||b.bumpMap||b.normalMap||b.flatShading?"#extension GL_OES_standard_derivatives : enable":"",(a.fragDepth||b.logarithmicDepthBuffer)&&c.get("EXT_frag_depth")?"#extension GL_EXT_frag_depth : enable":"",a.drawBuffers&&c.get("WEBGL_draw_buffers")?"#extension GL_EXT_draw_buffers : require":"",(a.shaderTextureLOD||b.envMap)&&c.get("EXT_shader_texture_lod")?"#extension GL_EXT_shader_texture_lod : enable":
""].filter(g).join("\n")}function f(a){var b=[],c;for(c in a){var d=a[c];!1!==d&&b.push("#define "+c+" "+d)}return b.join("\n")}function g(a){return""!==a}function h(a,b){return a.replace(/NUM_DIR_LIGHTS/g,b.numDirLights).replace(/NUM_SPOT_LIGHTS/g,b.numSpotLights).replace(/NUM_POINT_LIGHTS/g,b.numPointLights).replace(/NUM_HEMI_LIGHTS/g,b.numHemiLights)}function k(a){return a.replace(/#include +<([\w\d.]+)>/g,function(a,b){var c=THREE.ShaderChunk[b];if(void 0===c)throw Error("Can not resolve #include <"+
b+">");return k(c)})}function l(a){return a.replace(/for \( int i \= (\d+)\; i < (\d+)\; i \+\+ \) \{([\s\S]+?)(?=\})\}/g,function(a,b,c,d){a="";for(b=parseInt(b);b<parseInt(c);b++)a+=d.replace(/\[ i \]/g,"[ "+b+" ]");return a})}var m=0;return function(a,n,q,r){var s=a.context,v=q.extensions,t=q.defines,u=q.__webglShader.vertexShader,D=q.__webglShader.fragmentShader,w="SHADOWMAP_TYPE_BASIC";r.shadowMapType===THREE.PCFShadowMap?w="SHADOWMAP_TYPE_PCF":r.shadowMapType===THREE.PCFSoftShadowMap&&(w="SHADOWMAP_TYPE_PCF_SOFT");
var I="ENVMAP_TYPE_CUBE",z="ENVMAP_MODE_REFLECTION",y="ENVMAP_BLENDING_MULTIPLY";if(r.envMap){switch(q.envMap.mapping){case THREE.CubeReflectionMapping:case THREE.CubeRefractionMapping:I="ENVMAP_TYPE_CUBE";break;case THREE.CubeUVReflectionMapping:case THREE.CubeUVRefractionMapping:I="ENVMAP_TYPE_CUBE_UV";break;case THREE.EquirectangularReflectionMapping:case THREE.EquirectangularRefractionMapping:I="ENVMAP_TYPE_EQUIREC";break;case THREE.SphericalReflectionMapping:I="ENVMAP_TYPE_SPHERE"}switch(q.envMap.mapping){case THREE.CubeRefractionMapping:case THREE.EquirectangularRefractionMapping:z=
"ENVMAP_MODE_REFRACTION"}switch(q.combine){case THREE.MultiplyOperation:y="ENVMAP_BLENDING_MULTIPLY";break;case THREE.MixOperation:y="ENVMAP_BLENDING_MIX";break;case THREE.AddOperation:y="ENVMAP_BLENDING_ADD"}}var A=0<a.gammaFactor?a.gammaFactor:1,v=e(v,r,a.extensions),G=f(t),B=s.createProgram();q instanceof THREE.RawShaderMaterial?(t=[G].filter(g).join("\n"),w=[G].filter(g).join("\n")):(t=["precision "+r.precision+" float;","precision "+r.precision+" int;","#define SHADER_NAME "+q.__webglShader.name,
G,r.supportsVertexTextures?"#define VERTEX_TEXTURES":"","#define GAMMA_FACTOR "+A,"#define MAX_BONES "+r.maxBones,r.map?"#define USE_MAP":"",r.envMap?"#define USE_ENVMAP":"",r.envMap?"#define "+z:"",r.lightMap?"#define USE_LIGHTMAP":"",r.aoMap?"#define USE_AOMAP":"",r.emissiveMap?"#define USE_EMISSIVEMAP":"",r.bumpMap?"#define USE_BUMPMAP":"",r.normalMap?"#define USE_NORMALMAP":"",r.displacementMap&&r.supportsVertexTextures?"#define USE_DISPLACEMENTMAP":"",r.specularMap?"#define USE_SPECULARMAP":
"",r.roughnessMap?"#define USE_ROUGHNESSMAP":"",r.metalnessMap?"#define USE_METALNESSMAP":"",r.alphaMap?"#define USE_ALPHAMAP":"",r.vertexColors?"#define USE_COLOR":"",r.flatShading?"#define FLAT_SHADED":"",r.skinning?"#define USE_SKINNING":"",r.useVertexTexture?"#define BONE_TEXTURE":"",r.morphTargets?"#define USE_MORPHTARGETS":"",r.morphNormals&&!1===r.flatShading?"#define USE_MORPHNORMALS":"",r.doubleSided?"#define DOUBLE_SIDED":"",r.flipSided?"#define FLIP_SIDED":"","#define NUM_CLIPPING_PLANES "+
r.numClippingPlanes,r.shadowMapEnabled?"#define USE_SHADOWMAP":"",r.shadowMapEnabled?"#define "+w:"",r.sizeAttenuation?"#define USE_SIZEATTENUATION":"",r.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",r.logarithmicDepthBuffer&&a.extensions.get("EXT_frag_depth")?"#define USE_LOGDEPTHBUF_EXT":"","uniform mat4 modelMatrix;","uniform mat4 modelViewMatrix;","uniform mat4 projectionMatrix;","uniform mat4 viewMatrix;","uniform mat3 normalMatrix;","uniform vec3 cameraPosition;","attribute vec3 position;",
"attribute vec3 normal;","attribute vec2 uv;","#ifdef USE_COLOR","\tattribute vec3 color;","#endif","#ifdef USE_MORPHTARGETS","\tattribute vec3 morphTarget0;","\tattribute vec3 morphTarget1;","\tattribute vec3 morphTarget2;","\tattribute vec3 morphTarget3;","\t#ifdef USE_MORPHNORMALS","\t\tattribute vec3 morphNormal0;","\t\tattribute vec3 morphNormal1;","\t\tattribute vec3 morphNormal2;","\t\tattribute vec3 morphNormal3;","\t#else","\t\tattribute vec3 morphTarget4;","\t\tattribute vec3 morphTarget5;",
"\t\tattribute vec3 morphTarget6;","\t\tattribute vec3 morphTarget7;","\t#endif","#endif","#ifdef USE_SKINNING","\tattribute vec4 skinIndex;","\tattribute vec4 skinWeight;","#endif","\n"].filter(g).join("\n"),w=[v,"precision "+r.precision+" float;","precision "+r.precision+" int;","#define SHADER_NAME "+q.__webglShader.name,G,r.alphaTest?"#define ALPHATEST "+r.alphaTest:"","#define GAMMA_FACTOR "+A,r.useFog&&r.fog?"#define USE_FOG":"",r.useFog&&r.fogExp?"#define FOG_EXP2":"",r.map?"#define USE_MAP":
"",r.envMap?"#define USE_ENVMAP":"",r.envMap?"#define "+I:"",r.envMap?"#define "+z:"",r.envMap?"#define "+y:"",r.lightMap?"#define USE_LIGHTMAP":"",r.aoMap?"#define USE_AOMAP":"",r.emissiveMap?"#define USE_EMISSIVEMAP":"",r.bumpMap?"#define USE_BUMPMAP":"",r.normalMap?"#define USE_NORMALMAP":"",r.specularMap?"#define USE_SPECULARMAP":"",r.roughnessMap?"#define USE_ROUGHNESSMAP":"",r.metalnessMap?"#define USE_METALNESSMAP":"",r.alphaMap?"#define USE_ALPHAMAP":"",r.vertexColors?"#define USE_COLOR":
"",r.flatShading?"#define FLAT_SHADED":"",r.doubleSided?"#define DOUBLE_SIDED":"",r.flipSided?"#define FLIP_SIDED":"","#define NUM_CLIPPING_PLANES "+r.numClippingPlanes,r.shadowMapEnabled?"#define USE_SHADOWMAP":"",r.shadowMapEnabled?"#define "+w:"",r.premultipliedAlpha?"#define PREMULTIPLIED_ALPHA":"",r.physicallyCorrectLights?"#define PHYSICALLY_CORRECT_LIGHTS":"",r.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",r.logarithmicDepthBuffer&&a.extensions.get("EXT_frag_depth")?"#define USE_LOGDEPTHBUF_EXT":
"",r.envMap&&a.extensions.get("EXT_shader_texture_lod")?"#define TEXTURE_LOD_EXT":"","uniform mat4 viewMatrix;","uniform vec3 cameraPosition;",r.toneMapping!==THREE.NoToneMapping?"#define TONE_MAPPING":"",r.toneMapping!==THREE.NoToneMapping?THREE.ShaderChunk.tonemapping_pars_fragment:"",r.toneMapping!==THREE.NoToneMapping?d("toneMapping",r.toneMapping):"",r.outputEncoding||r.mapEncoding||r.envMapEncoding||r.emissiveMapEncoding?THREE.ShaderChunk.encodings_pars_fragment:"",r.mapEncoding?b("mapTexelToLinear",
r.mapEncoding):"",r.envMapEncoding?b("envMapTexelToLinear",r.envMapEncoding):"",r.emissiveMapEncoding?b("emissiveMapTexelToLinear",r.emissiveMapEncoding):"",r.outputEncoding?c("linearToOutputTexel",r.outputEncoding):"",r.depthPacking?"#define DEPTH_PACKING "+q.depthPacking:"","\n"].filter(g).join("\n"));u=k(u,r);u=h(u,r);D=k(D,r);D=h(D,r);!1===q instanceof THREE.ShaderMaterial&&(u=l(u),D=l(D));D=w+D;u=THREE.WebGLShader(s,s.VERTEX_SHADER,t+u);D=THREE.WebGLShader(s,s.FRAGMENT_SHADER,D);s.attachShader(B,
u);s.attachShader(B,D);void 0!==q.index0AttributeName?s.bindAttribLocation(B,0,q.index0AttributeName):!0===r.morphTargets&&s.bindAttribLocation(B,0,"position");s.linkProgram(B);r=s.getProgramInfoLog(B);I=s.getShaderInfoLog(u);z=s.getShaderInfoLog(D);A=y=!0;if(!1===s.getProgramParameter(B,s.LINK_STATUS))y=!1,console.error("THREE.WebGLProgram: shader error: ",s.getError(),"gl.VALIDATE_STATUS",s.getProgramParameter(B,s.VALIDATE_STATUS),"gl.getProgramInfoLog",r,I,z);else if(""!==r)console.warn("THREE.WebGLProgram: gl.getProgramInfoLog()",
r);else if(""===I||""===z)A=!1;A&&(this.diagnostics={runnable:y,material:q,programLog:r,vertexShader:{log:I,prefix:t},fragmentShader:{log:z,prefix:w}});s.deleteShader(u);s.deleteShader(D);var F;this.getUniforms=function(){void 0===F&&(F=new THREE.WebGLUniforms(s,B,a));return F};var J;this.getAttributes=function(){if(void 0===J){for(var a={},b=s.getProgramParameter(B,s.ACTIVE_ATTRIBUTES),c=0;c<b;c++){var d=s.getActiveAttrib(B,c).name;a[d]=s.getAttribLocation(B,d)}J=a}return J};this.destroy=function(){s.deleteProgram(B);
this.program=void 0};Object.defineProperties(this,{uniforms:{get:function(){console.warn("THREE.WebGLProgram: .uniforms is now .getUniforms().");return this.getUniforms()}},attributes:{get:function(){console.warn("THREE.WebGLProgram: .attributes is now .getAttributes().");return this.getAttributes()}}});this.id=m++;this.code=n;this.usedTimes=1;this.program=B;this.vertexShader=u;this.fragmentShader=D;return this}}();
THREE.WebGLPrograms=function(a,b){function c(a,b){var c;a?a instanceof THREE.Texture?c=a.encoding:a instanceof THREE.WebGLRenderTarget&&(console.warn("THREE.WebGLPrograms.getTextureEncodingFromMap: don't use render targets as textures. Use their .texture property instead."),c=a.texture.encoding):c=THREE.LinearEncoding;c===THREE.LinearEncoding&&b&&(c=THREE.GammaEncoding);return c}var d=[],e={MeshDepthMaterial:"depth",MeshNormalMaterial:"normal",MeshBasicMaterial:"basic",MeshLambertMaterial:"lambert",
MeshPhongMaterial:"phong",MeshStandardMaterial:"physical",MeshPhysicalMaterial:"physical",LineBasicMaterial:"basic",LineDashedMaterial:"dashed",PointsMaterial:"points"},f="precision supportsVertexTextures map mapEncoding envMap envMapMode envMapEncoding lightMap aoMap emissiveMap emissiveMapEncoding bumpMap normalMap displacementMap specularMap roughnessMap metalnessMap alphaMap combine vertexColors fog useFog fogExp flatShading sizeAttenuation logarithmicDepthBuffer skinning maxBones useVertexTexture morphTargets morphNormals maxMorphTargets maxMorphNormals premultipliedAlpha numDirLights numPointLights numSpotLights numHemiLights shadowMapEnabled shadowMapType toneMapping physicallyCorrectLights alphaTest doubleSided flipSided numClippingPlanes depthPacking".split(" ");
this.getParameters=function(d,f,k,l,m){var p=e[d.type],n;b.floatVertexTextures&&m&&m.skeleton&&m.skeleton.useVertexTexture?n=1024:(n=Math.floor((b.maxVertexUniforms-20)/4),void 0!==m&&m instanceof THREE.SkinnedMesh&&(n=Math.min(m.skeleton.bones.length,n),n<m.skeleton.bones.length&&console.warn("WebGLRenderer: too many bones - "+m.skeleton.bones.length+", this GPU supports just "+n+" (try OpenGL instead of ANGLE)")));var q=a.getPrecision();null!==d.precision&&(q=b.getMaxPrecision(d.precision),q!==
d.precision&&console.warn("THREE.WebGLProgram.getParameters:",d.precision,"not supported, using",q,"instead."));var r=a.getCurrentRenderTarget();return{shaderID:p,precision:q,supportsVertexTextures:b.vertexTextures,outputEncoding:c(r?r.texture:null,a.gammaOutput),map:!!d.map,mapEncoding:c(d.map,a.gammaInput),envMap:!!d.envMap,envMapMode:d.envMap&&d.envMap.mapping,envMapEncoding:c(d.envMap,a.gammaInput),envMapCubeUV:!!d.envMap&&(d.envMap.mapping===THREE.CubeUVReflectionMapping||d.envMap.mapping===
THREE.CubeUVRefractionMapping),lightMap:!!d.lightMap,aoMap:!!d.aoMap,emissiveMap:!!d.emissiveMap,emissiveMapEncoding:c(d.emissiveMap,a.gammaInput),bumpMap:!!d.bumpMap,normalMap:!!d.normalMap,displacementMap:!!d.displacementMap,roughnessMap:!!d.roughnessMap,metalnessMap:!!d.metalnessMap,specularMap:!!d.specularMap,alphaMap:!!d.alphaMap,combine:d.combine,vertexColors:d.vertexColors,fog:!!k,useFog:d.fog,fogExp:k instanceof THREE.FogExp2,flatShading:d.shading===THREE.FlatShading,sizeAttenuation:d.sizeAttenuation,
logarithmicDepthBuffer:b.logarithmicDepthBuffer,skinning:d.skinning,maxBones:n,useVertexTexture:b.floatVertexTextures&&m&&m.skeleton&&m.skeleton.useVertexTexture,morphTargets:d.morphTargets,morphNormals:d.morphNormals,maxMorphTargets:a.maxMorphTargets,maxMorphNormals:a.maxMorphNormals,numDirLights:f.directional.length,numPointLights:f.point.length,numSpotLights:f.spot.length,numHemiLights:f.hemi.length,numClippingPlanes:l,shadowMapEnabled:a.shadowMap.enabled&&m.receiveShadow&&0<f.shadows.length,shadowMapType:a.shadowMap.type,
toneMapping:a.toneMapping,physicallyCorrectLights:a.physicallyCorrectLights,premultipliedAlpha:d.premultipliedAlpha,alphaTest:d.alphaTest,doubleSided:d.side===THREE.DoubleSide,flipSided:d.side===THREE.BackSide,depthPacking:void 0!==d.depthPacking?d.depthPacking:!1}};this.getProgramCode=function(a,b){var c=[];b.shaderID?c.push(b.shaderID):(c.push(a.fragmentShader),c.push(a.vertexShader));if(void 0!==a.defines)for(var d in a.defines)c.push(d),c.push(a.defines[d]);for(d=0;d<f.length;d++)c.push(b[f[d]]);
return c.join()};this.acquireProgram=function(b,c,e){for(var f,m=0,p=d.length;m<p;m++){var n=d[m];if(n.code===e){f=n;++f.usedTimes;break}}void 0===f&&(f=new THREE.WebGLProgram(a,e,b,c),d.push(f));return f};this.releaseProgram=function(a){if(0===--a.usedTimes){var b=d.indexOf(a);d[b]=d[d.length-1];d.pop();a.destroy()}};this.programs=d};
THREE.WebGLProperties=function(){var a={};this.get=function(b){b=b.uuid;var c=a[b];void 0===c&&(c={},a[b]=c);return c};this.delete=function(b){delete a[b.uuid]};this.clear=function(){a={}}};
THREE.WebGLShader=function(){function a(a){a=a.split("\n");for(var c=0;c<a.length;c++)a[c]=c+1+": "+a[c];return a.join("\n")}return function(b,c,d){var e=b.createShader(c);b.shaderSource(e,d);b.compileShader(e);!1===b.getShaderParameter(e,b.COMPILE_STATUS)&&console.error("THREE.WebGLShader: Shader couldn't compile.");""!==b.getShaderInfoLog(e)&&console.warn("THREE.WebGLShader: gl.getShaderInfoLog()",c===b.VERTEX_SHADER?"vertex":"fragment",b.getShaderInfoLog(e),a(d));return e}}();
THREE.WebGLShadowMap=function(a,b,c,d){function e(b,c,d,e){var f=b.geometry,g=null,g=v,h=b.customDepthMaterial;d&&(g=t,h=b.customDistanceMaterial);h?g=h:(h=!1,c.morphTargets&&(f instanceof THREE.BufferGeometry?h=f.morphAttributes&&f.morphAttributes.position&&0<f.morphAttributes.position.length:f instanceof THREE.Geometry&&(h=f.morphTargets&&0<f.morphTargets.length)),b=b instanceof THREE.SkinnedMesh&&c.skinning,f=0,h&&(f|=1),b&&(f|=2),g=g[f]);a.localClippingEnabled&&!0===c.clipShadows&&0!==c.clippingPlanes.length&&
(h=g.uuid,b=c.uuid,f=u[h],void 0===f&&(f={},u[h]=f),h=f[b],void 0===h&&(h=g.clone(),f[b]=h),g=h);g.visible=c.visible;g.wireframe=c.wireframe;b=c.side;F.renderSingleSided&&b==THREE.DoubleSide&&(b=THREE.FrontSide);F.renderReverseSided&&(b===THREE.FrontSide?b=THREE.BackSide:b===THREE.BackSide&&(b=THREE.FrontSide));g.side=b;g.clipShadows=c.clipShadows;g.clippingPlanes=c.clippingPlanes;g.wireframeLinewidth=c.wireframeLinewidth;g.linewidth=c.linewidth;d&&void 0!==g.uniforms.lightPos&&g.uniforms.lightPos.value.copy(e);
return g}function f(a,b,c){if(!1!==a.visible){a.layers.test(b.layers)&&(a instanceof THREE.Mesh||a instanceof THREE.Line||a instanceof THREE.Points)&&a.castShadow&&(!1===a.frustumCulled||!0===k.intersectsObject(a))&&!0===a.material.visible&&(a.modelViewMatrix.multiplyMatrices(c.matrixWorldInverse,a.matrixWorld),s.push(a));a=a.children;for(var d=0,e=a.length;d<e;d++)f(a[d],b,c)}}var g=a.context,h=a.state,k=new THREE.Frustum,l=new THREE.Matrix4,m=b.shadows,p=new THREE.Vector2,n=new THREE.Vector2(d.maxTextureSize,
d.maxTextureSize),q=new THREE.Vector3,r=new THREE.Vector3,s=[],v=Array(4),t=Array(4),u={},D=[new THREE.Vector3(1,0,0),new THREE.Vector3(-1,0,0),new THREE.Vector3(0,0,1),new THREE.Vector3(0,0,-1),new THREE.Vector3(0,1,0),new THREE.Vector3(0,-1,0)],w=[new THREE.Vector3(0,1,0),new THREE.Vector3(0,1,0),new THREE.Vector3(0,1,0),new THREE.Vector3(0,1,0),new THREE.Vector3(0,0,1),new THREE.Vector3(0,0,-1)],I=[new THREE.Vector4,new THREE.Vector4,new THREE.Vector4,new THREE.Vector4,new THREE.Vector4,new THREE.Vector4];
b=new THREE.MeshDepthMaterial;b.depthPacking=THREE.RGBADepthPacking;b.clipping=!0;d=THREE.ShaderLib.distanceRGBA;for(var z=THREE.UniformsUtils.clone(d.uniforms),y=0;4!==y;++y){var A=0!==(y&1),G=0!==(y&2),B=b.clone();B.morphTargets=A;B.skinning=G;v[y]=B;A=new THREE.ShaderMaterial({defines:{USE_SHADOWMAP:""},uniforms:z,vertexShader:d.vertexShader,fragmentShader:d.fragmentShader,morphTargets:A,skinning:G,clipping:!0});t[y]=A}var F=this;this.enabled=!1;this.autoUpdate=!0;this.needsUpdate=!1;this.type=
THREE.PCFShadowMap;this.renderSingleSided=this.renderReverseSided=!0;this.render=function(b,d){if(!1!==F.enabled&&(!1!==F.autoUpdate||!1!==F.needsUpdate)&&0!==m.length){h.clearColor(1,1,1,1);h.disable(g.BLEND);h.setDepthTest(!0);h.setScissorTest(!1);for(var u,t,v=0,y=m.length;v<y;v++){var z=m[v],A=z.shadow;if(void 0===A)console.warn("THREE.WebGLShadowMap:",z,"has no shadow.");else{var C=A.camera;p.copy(A.mapSize);p.min(n);if(z instanceof THREE.PointLight){u=6;t=!0;var L=p.x,E=p.y;I[0].set(2*L,E,L,
E);I[1].set(0,E,L,E);I[2].set(3*L,E,L,E);I[3].set(L,E,L,E);I[4].set(3*L,0,L,E);I[5].set(L,0,L,E);p.x*=4;p.y*=2}else u=1,t=!1;null===A.map&&(A.map=new THREE.WebGLRenderTarget(p.x,p.y,{minFilter:THREE.NearestFilter,magFilter:THREE.NearestFilter,format:THREE.RGBAFormat}),C.updateProjectionMatrix());A instanceof THREE.SpotLightShadow&&A.update(z);L=A.map;A=A.matrix;r.setFromMatrixPosition(z.matrixWorld);C.position.copy(r);a.setRenderTarget(L);a.clear();for(L=0;L<u;L++){t?(q.copy(C.position),q.add(D[L]),
C.up.copy(w[L]),C.lookAt(q),h.viewport(I[L])):(q.setFromMatrixPosition(z.target.matrixWorld),C.lookAt(q));C.updateMatrixWorld();C.matrixWorldInverse.getInverse(C.matrixWorld);A.set(.5,0,0,.5,0,.5,0,.5,0,0,.5,.5,0,0,0,1);A.multiply(C.projectionMatrix);A.multiply(C.matrixWorldInverse);l.multiplyMatrices(C.projectionMatrix,C.matrixWorldInverse);k.setFromMatrix(l);s.length=0;f(b,d,C);for(var E=0,B=s.length;E<B;E++){var G=s[E],X=c.update(G),ea=G.material;if(ea instanceof THREE.MultiMaterial)for(var fa=
X.groups,ea=ea.materials,ga=0,V=fa.length;ga<V;ga++){var ba=fa[ga],aa=ea[ba.materialIndex];!0===aa.visible&&(aa=e(G,aa,t,r),a.renderBufferDirect(C,null,X,aa,G,ba))}else aa=e(G,ea,t,r),a.renderBufferDirect(C,null,X,aa,G,null)}}}}u=a.getClearColor();t=a.getClearAlpha();a.setClearColor(u,t);F.needsUpdate=!1}}};
THREE.WebGLState=function(a,b,c){function d(b,c,d){var e=new Uint8Array(4),f=a.createTexture();a.bindTexture(b,f);a.texParameteri(b,a.TEXTURE_MIN_FILTER,a.NEAREST);a.texParameteri(b,a.TEXTURE_MAG_FILTER,a.NEAREST);for(b=0;b<d;b++)a.texImage2D(c+b,0,a.RGBA,1,1,0,a.RGBA,a.UNSIGNED_BYTE,e);return f}var e=this;this.buffers={color:new THREE.WebGLColorBuffer(a,this),depth:new THREE.WebGLDepthBuffer(a,this),stencil:new THREE.WebGLStencilBuffer(a,this)};var f=a.getParameter(a.MAX_VERTEX_ATTRIBS),g=new Uint8Array(f),
h=new Uint8Array(f),k=new Uint8Array(f),l={},m=null,p=null,n=null,q=null,r=null,s=null,v=null,t=null,u=!1,D=null,w=null,I=null,z=null,y=null,A=null,G=a.getParameter(a.MAX_TEXTURE_IMAGE_UNITS),B=null,F={},J=new THREE.Vector4,P=new THREE.Vector4,K={};K[a.TEXTURE_2D]=d(a.TEXTURE_2D,a.TEXTURE_2D,1);K[a.TEXTURE_CUBE_MAP]=d(a.TEXTURE_CUBE_MAP,a.TEXTURE_CUBE_MAP_POSITIVE_X,6);this.init=function(){this.clearColor(0,0,0,1);this.clearDepth(1);this.clearStencil(0);this.enable(a.DEPTH_TEST);this.setDepthFunc(THREE.LessEqualDepth);
this.setFlipSided(!1);this.setCullFace(THREE.CullFaceBack);this.enable(a.CULL_FACE);this.enable(a.BLEND);this.setBlending(THREE.NormalBlending)};this.initAttributes=function(){for(var a=0,b=g.length;a<b;a++)g[a]=0};this.enableAttribute=function(c){g[c]=1;0===h[c]&&(a.enableVertexAttribArray(c),h[c]=1);0!==k[c]&&(b.get("ANGLE_instanced_arrays").vertexAttribDivisorANGLE(c,0),k[c]=0)};this.enableAttributeAndDivisor=function(b,c,d){g[b]=1;0===h[b]&&(a.enableVertexAttribArray(b),h[b]=1);k[b]!==c&&(d.vertexAttribDivisorANGLE(b,
c),k[b]=c)};this.disableUnusedAttributes=function(){for(var b=0,c=h.length;b!==c;++b)h[b]!==g[b]&&(a.disableVertexAttribArray(b),h[b]=0)};this.enable=function(b){!0!==l[b]&&(a.enable(b),l[b]=!0)};this.disable=function(b){!1!==l[b]&&(a.disable(b),l[b]=!1)};this.getCompressedTextureFormats=function(){if(null===m&&(m=[],b.get("WEBGL_compressed_texture_pvrtc")||b.get("WEBGL_compressed_texture_s3tc")||b.get("WEBGL_compressed_texture_etc1")))for(var c=a.getParameter(a.COMPRESSED_TEXTURE_FORMATS),d=0;d<
c.length;d++)m.push(c[d]);return m};this.setBlending=function(b,d,e,f,g,h,k,l){if(b!==THREE.NoBlending){this.enable(a.BLEND);if(b!==p||l!==u)b===THREE.AdditiveBlending?l?(a.blendEquationSeparate(a.FUNC_ADD,a.FUNC_ADD),a.blendFuncSeparate(a.ONE,a.ONE,a.ONE,a.ONE)):(a.blendEquation(a.FUNC_ADD),a.blendFunc(a.SRC_ALPHA,a.ONE)):b===THREE.SubtractiveBlending?l?(a.blendEquationSeparate(a.FUNC_ADD,a.FUNC_ADD),a.blendFuncSeparate(a.ZERO,a.ZERO,a.ONE_MINUS_SRC_COLOR,a.ONE_MINUS_SRC_ALPHA)):(a.blendEquation(a.FUNC_ADD),
a.blendFunc(a.ZERO,a.ONE_MINUS_SRC_COLOR)):b===THREE.MultiplyBlending?l?(a.blendEquationSeparate(a.FUNC_ADD,a.FUNC_ADD),a.blendFuncSeparate(a.ZERO,a.SRC_COLOR,a.ZERO,a.SRC_ALPHA)):(a.blendEquation(a.FUNC_ADD),a.blendFunc(a.ZERO,a.SRC_COLOR)):l?(a.blendEquationSeparate(a.FUNC_ADD,a.FUNC_ADD),a.blendFuncSeparate(a.ONE,a.ONE_MINUS_SRC_ALPHA,a.ONE,a.ONE_MINUS_SRC_ALPHA)):(a.blendEquationSeparate(a.FUNC_ADD,a.FUNC_ADD),a.blendFuncSeparate(a.SRC_ALPHA,a.ONE_MINUS_SRC_ALPHA,a.ONE,a.ONE_MINUS_SRC_ALPHA)),
p=b,u=l;if(b===THREE.CustomBlending){g=g||d;h=h||e;k=k||f;if(d!==n||g!==s)a.blendEquationSeparate(c(d),c(g)),n=d,s=g;if(e!==q||f!==r||h!==v||k!==t)a.blendFuncSeparate(c(e),c(f),c(h),c(k)),q=e,r=f,v=h,t=k}else t=v=s=r=q=n=null}else this.disable(a.BLEND),p=b};this.setColorWrite=function(a){this.buffers.color.setMask(a)};this.setDepthTest=function(a){this.buffers.depth.setTest(a)};this.setDepthWrite=function(a){this.buffers.depth.setMask(a)};this.setDepthFunc=function(a){this.buffers.depth.setFunc(a)};
this.setStencilTest=function(a){this.buffers.stencil.setTest(a)};this.setStencilWrite=function(a){this.buffers.stencil.setMask(a)};this.setStencilFunc=function(a,b,c){this.buffers.stencil.setFunc(a,b,c)};this.setStencilOp=function(a,b,c){this.buffers.stencil.setOp(a,b,c)};this.setFlipSided=function(b){D!==b&&(b?a.frontFace(a.CW):a.frontFace(a.CCW),D=b)};this.setCullFace=function(b){b!==THREE.CullFaceNone?(this.enable(a.CULL_FACE),b!==w&&(b===THREE.CullFaceBack?a.cullFace(a.BACK):b===THREE.CullFaceFront?
a.cullFace(a.FRONT):a.cullFace(a.FRONT_AND_BACK))):this.disable(a.CULL_FACE);w=b};this.setLineWidth=function(b){b!==I&&(a.lineWidth(b),I=b)};this.setPolygonOffset=function(b,c,d){if(b){if(this.enable(a.POLYGON_OFFSET_FILL),z!==c||y!==d)a.polygonOffset(c,d),z=c,y=d}else this.disable(a.POLYGON_OFFSET_FILL)};this.getScissorTest=function(){return A};this.setScissorTest=function(b){(A=b)?this.enable(a.SCISSOR_TEST):this.disable(a.SCISSOR_TEST)};this.activeTexture=function(b){void 0===b&&(b=a.TEXTURE0+
G-1);B!==b&&(a.activeTexture(b),B=b)};this.bindTexture=function(b,c){null===B&&e.activeTexture();var d=F[B];void 0===d&&(d={type:void 0,texture:void 0},F[B]=d);if(d.type!==b||d.texture!==c)a.bindTexture(b,c||K[b]),d.type=b,d.texture=c};this.compressedTexImage2D=function(){try{a.compressedTexImage2D.apply(a,arguments)}catch(b){console.error(b)}};this.texImage2D=function(){try{a.texImage2D.apply(a,arguments)}catch(b){console.error(b)}};this.clearColor=function(a,b,c,d){this.buffers.color.setClear(a,
b,c,d)};this.clearDepth=function(a){this.buffers.depth.setClear(a)};this.clearStencil=function(a){this.buffers.stencil.setClear(a)};this.scissor=function(b){!1===J.equals(b)&&(a.scissor(b.x,b.y,b.z,b.w),J.copy(b))};this.viewport=function(b){!1===P.equals(b)&&(a.viewport(b.x,b.y,b.z,b.w),P.copy(b))};this.reset=function(){for(var b=0;b<h.length;b++)1===h[b]&&(a.disableVertexAttribArray(b),h[b]=0);l={};B=m=null;F={};w=D=p=null;this.buffers.color.reset();this.buffers.depth.reset();this.buffers.stencil.reset()}};
THREE.WebGLColorBuffer=function(a,b){var c=!1,d=new THREE.Vector4,e=null,f=new THREE.Vector4;this.setMask=function(b){e===b||c||(a.colorMask(b,b,b,b),e=b)};this.setLocked=function(a){c=a};this.setClear=function(b,c,e,l){d.set(b,c,e,l);!1===f.equals(d)&&(a.clearColor(b,c,e,l),f.copy(d))};this.reset=function(){c=!1;e=null;f=new THREE.Vector4}};
THREE.WebGLDepthBuffer=function(a,b){var c=!1,d=null,e=null,f=null;this.setTest=function(c){c?b.enable(a.DEPTH_TEST):b.disable(a.DEPTH_TEST)};this.setMask=function(b){d===b||c||(a.depthMask(b),d=b)};this.setFunc=function(b){if(e!==b){if(b)switch(b){case THREE.NeverDepth:a.depthFunc(a.NEVER);break;case THREE.AlwaysDepth:a.depthFunc(a.ALWAYS);break;case THREE.LessDepth:a.depthFunc(a.LESS);break;case THREE.LessEqualDepth:a.depthFunc(a.LEQUAL);break;case THREE.EqualDepth:a.depthFunc(a.EQUAL);break;case THREE.GreaterEqualDepth:a.depthFunc(a.GEQUAL);
break;case THREE.GreaterDepth:a.depthFunc(a.GREATER);break;case THREE.NotEqualDepth:a.depthFunc(a.NOTEQUAL);break;default:a.depthFunc(a.LEQUAL)}else a.depthFunc(a.LEQUAL);e=b}};this.setLocked=function(a){c=a};this.setClear=function(b){f!==b&&(a.clearDepth(b),f=b)};this.reset=function(){c=!1;f=e=d=null}};
THREE.WebGLStencilBuffer=function(a,b){var c=!1,d=null,e=null,f=null,g=null,h=null,k=null,l=null,m=null;this.setTest=function(c){c?b.enable(a.STENCIL_TEST):b.disable(a.STENCIL_TEST)};this.setMask=function(b){d===b||c||(a.stencilMask(b),d=b)};this.setFunc=function(b,c,d){if(e!==b||f!==c||g!==d)a.stencilFunc(b,c,d),e=b,f=c,g=d};this.setOp=function(b,c,d){if(h!==b||k!==c||l!==d)a.stencilOp(b,c,d),h=b,k=c,l=d};this.setLocked=function(a){c=a};this.setClear=function(b){m!==b&&(a.clearStencil(b),m=b)};this.reset=
function(){c=!1;m=l=k=h=g=f=e=d=null}};
THREE.WebGLTextures=function(a,b,c,d,e,f,g){function h(a,b){if(a.width>b||a.height>b){var c=b/Math.max(a.width,a.height),d=document.createElementNS("http://www.w3.org/1999/xhtml","canvas");d.width=Math.floor(a.width*c);d.height=Math.floor(a.height*c);d.getContext("2d").drawImage(a,0,0,a.width,a.height,0,0,d.width,d.height);console.warn("THREE.WebGLRenderer: image is too big ("+a.width+"x"+a.height+"). Resized to "+d.width+"x"+d.height,a);return d}return a}function k(a){return THREE.Math.isPowerOfTwo(a.width)&&THREE.Math.isPowerOfTwo(a.height)}
function l(b){return b===THREE.NearestFilter||b===THREE.NearestMipMapNearestFilter||b===THREE.NearestMipMapLinearFilter?a.NEAREST:a.LINEAR}function m(b){b=b.target;b.removeEventListener("dispose",m);a:{var c=d.get(b);if(b.image&&c.__image__webglTextureCube)a.deleteTexture(c.__image__webglTextureCube);else{if(void 0===c.__webglInit)break a;a.deleteTexture(c.__webglTexture)}d.delete(b)}v.textures--}function p(b){b=b.target;b.removeEventListener("dispose",p);var c=d.get(b),e=d.get(b.texture);if(b){void 0!==
e.__webglTexture&&a.deleteTexture(e.__webglTexture);b.depthTexture&&b.depthTexture.dispose();if(b instanceof THREE.WebGLRenderTargetCube)for(e=0;6>e;e++)a.deleteFramebuffer(c.__webglFramebuffer[e]),c.__webglDepthbuffer&&a.deleteRenderbuffer(c.__webglDepthbuffer[e]);else a.deleteFramebuffer(c.__webglFramebuffer),c.__webglDepthbuffer&&a.deleteRenderbuffer(c.__webglDepthbuffer);d.delete(b.texture);d.delete(b)}v.textures--}function n(b,g){var l=d.get(b);if(0<b.version&&l.__version!==b.version){var n=
b.image;if(void 0===n)console.warn("THREE.WebGLRenderer: Texture marked for update but image is undefined",b);else if(!1===n.complete)console.warn("THREE.WebGLRenderer: Texture marked for update but image is incomplete",b);else{void 0===l.__webglInit&&(l.__webglInit=!0,b.addEventListener("dispose",m),l.__webglTexture=a.createTexture(),v.textures++);c.activeTexture(a.TEXTURE0+g);c.bindTexture(a.TEXTURE_2D,l.__webglTexture);a.pixelStorei(a.UNPACK_FLIP_Y_WEBGL,b.flipY);a.pixelStorei(a.UNPACK_PREMULTIPLY_ALPHA_WEBGL,
b.premultiplyAlpha);a.pixelStorei(a.UNPACK_ALIGNMENT,b.unpackAlignment);var p=h(b.image,e.maxTextureSize);if((b.wrapS!==THREE.ClampToEdgeWrapping||b.wrapT!==THREE.ClampToEdgeWrapping||b.minFilter!==THREE.NearestFilter&&b.minFilter!==THREE.LinearFilter)&&!1===k(p))if(n=p,n instanceof HTMLImageElement||n instanceof HTMLCanvasElement){var r=document.createElementNS("http://www.w3.org/1999/xhtml","canvas");r.width=THREE.Math.nearestPowerOfTwo(n.width);r.height=THREE.Math.nearestPowerOfTwo(n.height);r.getContext("2d").drawImage(n,
0,0,r.width,r.height);console.warn("THREE.WebGLRenderer: image is not power of two ("+n.width+"x"+n.height+"). Resized to "+r.width+"x"+r.height,n);p=r}else p=n;var n=k(p),r=f(b.format),s=f(b.type);q(a.TEXTURE_2D,b,n);var G=b.mipmaps;if(b instanceof THREE.DepthTexture){G=a.DEPTH_COMPONENT;if(b.type===THREE.FloatType){if(!t)throw Error("Float Depth Texture only supported in WebGL2.0");G=a.DEPTH_COMPONENT32F}else t&&(G=a.DEPTH_COMPONENT16);c.texImage2D(a.TEXTURE_2D,0,G,p.width,p.height,0,r,s,null)}else if(b instanceof
THREE.DataTexture)if(0<G.length&&n){for(var B=0,F=G.length;B<F;B++)p=G[B],c.texImage2D(a.TEXTURE_2D,B,r,p.width,p.height,0,r,s,p.data);b.generateMipmaps=!1}else c.texImage2D(a.TEXTURE_2D,0,r,p.width,p.height,0,r,s,p.data);else if(b instanceof THREE.CompressedTexture)for(B=0,F=G.length;B<F;B++)p=G[B],b.format!==THREE.RGBAFormat&&b.format!==THREE.RGBFormat?-1<c.getCompressedTextureFormats().indexOf(r)?c.compressedTexImage2D(a.TEXTURE_2D,B,r,p.width,p.height,0,p.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()"):
c.texImage2D(a.TEXTURE_2D,B,r,p.width,p.height,0,r,s,p.data);else if(0<G.length&&n){B=0;for(F=G.length;B<F;B++)p=G[B],c.texImage2D(a.TEXTURE_2D,B,r,r,s,p);b.generateMipmaps=!1}else c.texImage2D(a.TEXTURE_2D,0,r,r,s,p);b.generateMipmaps&&n&&a.generateMipmap(a.TEXTURE_2D);l.__version=b.version;if(b.onUpdate)b.onUpdate(b);return}}c.activeTexture(a.TEXTURE0+g);c.bindTexture(a.TEXTURE_2D,l.__webglTexture)}function q(c,g,h){h?(a.texParameteri(c,a.TEXTURE_WRAP_S,f(g.wrapS)),a.texParameteri(c,a.TEXTURE_WRAP_T,
f(g.wrapT)),a.texParameteri(c,a.TEXTURE_MAG_FILTER,f(g.magFilter)),a.texParameteri(c,a.TEXTURE_MIN_FILTER,f(g.minFilter))):(a.texParameteri(c,a.TEXTURE_WRAP_S,a.CLAMP_TO_EDGE),a.texParameteri(c,a.TEXTURE_WRAP_T,a.CLAMP_TO_EDGE),g.wrapS===THREE.ClampToEdgeWrapping&&g.wrapT===THREE.ClampToEdgeWrapping||console.warn("THREE.WebGLRenderer: Texture is not power of two. Texture.wrapS and Texture.wrapT should be set to THREE.ClampToEdgeWrapping.",g),a.texParameteri(c,a.TEXTURE_MAG_FILTER,l(g.magFilter)),
a.texParameteri(c,a.TEXTURE_MIN_FILTER,l(g.minFilter)),g.minFilter!==THREE.NearestFilter&&g.minFilter!==THREE.LinearFilter&&console.warn("THREE.WebGLRenderer: Texture is not power of two. Texture.minFilter should be set to THREE.NearestFilter or THREE.LinearFilter.",g));!(h=b.get("EXT_texture_filter_anisotropic"))||g.type===THREE.FloatType&&null===b.get("OES_texture_float_linear")||g.type===THREE.HalfFloatType&&null===b.get("OES_texture_half_float_linear")||!(1<g.anisotropy||d.get(g).__currentAnisotropy)||
(a.texParameterf(c,h.TEXTURE_MAX_ANISOTROPY_EXT,Math.min(g.anisotropy,e.getMaxAnisotropy())),d.get(g).__currentAnisotropy=g.anisotropy)}function r(b,e,g,h){var k=f(e.texture.format),l=f(e.texture.type);c.texImage2D(h,0,k,e.width,e.height,0,k,l,null);a.bindFramebuffer(a.FRAMEBUFFER,b);a.framebufferTexture2D(a.FRAMEBUFFER,g,h,d.get(e.texture).__webglTexture,0);a.bindFramebuffer(a.FRAMEBUFFER,null)}function s(b,c){a.bindRenderbuffer(a.RENDERBUFFER,b);c.depthBuffer&&!c.stencilBuffer?(a.renderbufferStorage(a.RENDERBUFFER,
a.DEPTH_COMPONENT16,c.width,c.height),a.framebufferRenderbuffer(a.FRAMEBUFFER,a.DEPTH_ATTACHMENT,a.RENDERBUFFER,b)):c.depthBuffer&&c.stencilBuffer?(a.renderbufferStorage(a.RENDERBUFFER,a.DEPTH_STENCIL,c.width,c.height),a.framebufferRenderbuffer(a.FRAMEBUFFER,a.DEPTH_STENCIL_ATTACHMENT,a.RENDERBUFFER,b)):a.renderbufferStorage(a.RENDERBUFFER,a.RGBA4,c.width,c.height);a.bindRenderbuffer(a.RENDERBUFFER,null)}var v=g.memory,t="undefined"!==typeof WebGL2RenderingContext&&a instanceof WebGL2RenderingContext;
this.setTexture2D=n;this.setTextureCube=function(b,g){var l=d.get(b);if(6===b.image.length)if(0<b.version&&l.__version!==b.version){l.__image__webglTextureCube||(b.addEventListener("dispose",m),l.__image__webglTextureCube=a.createTexture(),v.textures++);c.activeTexture(a.TEXTURE0+g);c.bindTexture(a.TEXTURE_CUBE_MAP,l.__image__webglTextureCube);a.pixelStorei(a.UNPACK_FLIP_Y_WEBGL,b.flipY);for(var n=b instanceof THREE.CompressedTexture,p=b.image[0]instanceof THREE.DataTexture,r=[],s=0;6>s;s++)r[s]=
n||p?p?b.image[s].image:b.image[s]:h(b.image[s],e.maxCubemapSize);var t=k(r[0]),B=f(b.format),F=f(b.type);q(a.TEXTURE_CUBE_MAP,b,t);for(s=0;6>s;s++)if(n)for(var J,P=r[s].mipmaps,K=0,H=P.length;K<H;K++)J=P[K],b.format!==THREE.RGBAFormat&&b.format!==THREE.RGBFormat?-1<c.getCompressedTextureFormats().indexOf(B)?c.compressedTexImage2D(a.TEXTURE_CUBE_MAP_POSITIVE_X+s,K,B,J.width,J.height,0,J.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .setTextureCube()"):
c.texImage2D(a.TEXTURE_CUBE_MAP_POSITIVE_X+s,K,B,J.width,J.height,0,B,F,J.data);else p?c.texImage2D(a.TEXTURE_CUBE_MAP_POSITIVE_X+s,0,B,r[s].width,r[s].height,0,B,F,r[s].data):c.texImage2D(a.TEXTURE_CUBE_MAP_POSITIVE_X+s,0,B,B,F,r[s]);b.generateMipmaps&&t&&a.generateMipmap(a.TEXTURE_CUBE_MAP);l.__version=b.version;if(b.onUpdate)b.onUpdate(b)}else c.activeTexture(a.TEXTURE0+g),c.bindTexture(a.TEXTURE_CUBE_MAP,l.__image__webglTextureCube)};this.setTextureCubeDynamic=function(b,e){c.activeTexture(a.TEXTURE0+
e);c.bindTexture(a.TEXTURE_CUBE_MAP,d.get(b).__webglTexture)};this.setupRenderTarget=function(b){var e=d.get(b),f=d.get(b.texture);b.addEventListener("dispose",p);f.__webglTexture=a.createTexture();v.textures++;var g=b instanceof THREE.WebGLRenderTargetCube,h=k(b);if(g){e.__webglFramebuffer=[];for(var l=0;6>l;l++)e.__webglFramebuffer[l]=a.createFramebuffer()}else e.__webglFramebuffer=a.createFramebuffer();if(g){c.bindTexture(a.TEXTURE_CUBE_MAP,f.__webglTexture);q(a.TEXTURE_CUBE_MAP,b.texture,h);for(l=
0;6>l;l++)r(e.__webglFramebuffer[l],b,a.COLOR_ATTACHMENT0,a.TEXTURE_CUBE_MAP_POSITIVE_X+l);b.texture.generateMipmaps&&h&&a.generateMipmap(a.TEXTURE_CUBE_MAP);c.bindTexture(a.TEXTURE_CUBE_MAP,null)}else c.bindTexture(a.TEXTURE_2D,f.__webglTexture),q(a.TEXTURE_2D,b.texture,h),r(e.__webglFramebuffer,b,a.COLOR_ATTACHMENT0,a.TEXTURE_2D),b.texture.generateMipmaps&&h&&a.generateMipmap(a.TEXTURE_2D),c.bindTexture(a.TEXTURE_2D,null);if(b.depthBuffer){e=d.get(b);f=b instanceof THREE.WebGLRenderTargetCube;if(b.depthTexture){if(f)throw Error("target.depthTexture not supported in Cube render targets");
if(b instanceof THREE.WebGLRenderTargetCube)throw Error("Depth Texture with cube render targets is not supported!");a.bindFramebuffer(a.FRAMEBUFFER,e.__webglFramebuffer);if(!(b.depthTexture instanceof THREE.DepthTexture))throw Error("renderTarget.depthTexture must be an instance of THREE.DepthTexture");d.get(b.depthTexture).__webglTexture&&b.depthTexture.image.width===b.width&&b.depthTexture.image.height===b.height||(b.depthTexture.image.width=b.width,b.depthTexture.image.height=b.height,b.depthTexture.needsUpdate=
!0);n(b.depthTexture,0);b=d.get(b.depthTexture).__webglTexture;a.framebufferTexture2D(a.FRAMEBUFFER,a.DEPTH_ATTACHMENT,a.TEXTURE_2D,b,0)}else if(f)for(e.__webglDepthbuffer=[],f=0;6>f;f++)a.bindFramebuffer(a.FRAMEBUFFER,e.__webglFramebuffer[f]),e.__webglDepthbuffer[f]=a.createRenderbuffer(),s(e.__webglDepthbuffer[f],b);else a.bindFramebuffer(a.FRAMEBUFFER,e.__webglFramebuffer),e.__webglDepthbuffer=a.createRenderbuffer(),s(e.__webglDepthbuffer,b);a.bindFramebuffer(a.FRAMEBUFFER,null)}};this.updateRenderTargetMipmap=
function(b){var e=b.texture;e.generateMipmaps&&k(b)&&e.minFilter!==THREE.NearestFilter&&e.minFilter!==THREE.LinearFilter&&(b=b instanceof THREE.WebGLRenderTargetCube?a.TEXTURE_CUBE_MAP:a.TEXTURE_2D,e=d.get(e).__webglTexture,c.bindTexture(b,e),a.generateMipmap(b),c.bindTexture(b,null))}};
THREE.WebGLUniforms=function(){var a=new THREE.Texture,b=new THREE.CubeTexture,c=[],d=[],e=function(a,b,d){var e=a[0];if(0>=e||0<e)return a;var f=b*d,g=c[f];void 0===g&&(g=new Float32Array(f),c[f]=g);if(0!==b)for(e.toArray(g,0),e=1,f=0;e!==b;++e)f+=d,a[e].toArray(g,f);return g},f=function(a,b){var c=d[b];void 0===c&&(c=new Int32Array(b),d[b]=c);for(var e=0;e!==b;++e)c[e]=a.allocTextureUnit();return c},g=function(a,b){a.uniform1f(this.addr,b)},h=function(a,b){a.uniform1i(this.addr,b)},k=function(a,
b){void 0===b.x?a.uniform2fv(this.addr,b):a.uniform2f(this.addr,b.x,b.y)},l=function(a,b){void 0!==b.x?a.uniform3f(this.addr,b.x,b.y,b.z):void 0!==b.r?a.uniform3f(this.addr,b.r,b.g,b.b):a.uniform3fv(this.addr,b)},m=function(a,b){void 0===b.x?a.uniform4fv(this.addr,b):a.uniform4f(this.addr,b.x,b.y,b.z,b.w)},p=function(a,b){a.uniformMatrix2fv(this.addr,!1,b.elements||b)},n=function(a,b){a.uniformMatrix3fv(this.addr,!1,b.elements||b)},q=function(a,b){a.uniformMatrix4fv(this.addr,!1,b.elements||b)},r=
function(b,c,d){var e=d.allocTextureUnit();b.uniform1i(this.addr,e);d.setTexture2D(c||a,e)},s=function(a,c,d){var e=d.allocTextureUnit();a.uniform1i(this.addr,e);d.setTextureCube(c||b,e)},v=function(a,b){a.uniform2iv(this.addr,b)},t=function(a,b){a.uniform3iv(this.addr,b)},u=function(a,b){a.uniform4iv(this.addr,b)},D=function(a){switch(a){case 5126:return g;case 35664:return k;case 35665:return l;case 35666:return m;case 35674:return p;case 35675:return n;case 35676:return q;case 35678:return r;case 35680:return s;
case 5124:case 35670:return h;case 35667:case 35671:return v;case 35668:case 35672:return t;case 35669:case 35673:return u}},w=function(a,b){a.uniform1fv(this.addr,b)},I=function(a,b){a.uniform1iv(this.addr,b)},z=function(a,b){a.uniform2fv(this.addr,e(b,this.size,2))},y=function(a,b){a.uniform3fv(this.addr,e(b,this.size,3))},A=function(a,b){a.uniform4fv(this.addr,e(b,this.size,4))},G=function(a,b){a.uniformMatrix2fv(this.addr,!1,e(b,this.size,4))},B=function(a,b){a.uniformMatrix3fv(this.addr,!1,e(b,
this.size,9))},F=function(a,b){a.uniformMatrix4fv(this.addr,!1,e(b,this.size,16))},J=function(b,c,d){var e=c.length,g=f(d,e);b.uniform1iv(this.addr,g);for(b=0;b!==e;++b)d.setTexture2D(c[b]||a,g[b])},P=function(a,c,d){var e=c.length,g=f(d,e);a.uniform1iv(this.addr,g);for(a=0;a!==e;++a)d.setTextureCube(c[a]||b,g[a])},K=function(a){switch(a){case 5126:return w;case 35664:return z;case 35665:return y;case 35666:return A;case 35674:return G;case 35675:return B;case 35676:return F;case 35678:return J;case 35680:return P;
case 5124:case 35670:return I;case 35667:case 35671:return v;case 35668:case 35672:return t;case 35669:case 35673:return u}},H=function(a,b,c){this.id=a;this.addr=c;this.setValue=D(b.type)},M=function(a,b,c){this.id=a;this.addr=c;this.size=b.size;this.setValue=K(b.type)},O=function(a){this.id=a;this.seq=[];this.map={}};O.prototype.setValue=function(a,b){for(var c=this.seq,d=0,e=c.length;d!==e;++d){var f=c[d];f.setValue(a,b[f.id])}};var N=/([\w\d_]+)(\])?(\[|\.)?/g,Q=function(a,b,c){this.seq=[];this.map=
{};this.renderer=c;c=a.getProgramParameter(b,a.ACTIVE_UNIFORMS);for(var d=0;d!==c;++d){var e=a.getActiveUniform(b,d),f=a.getUniformLocation(b,e.name),g=this,h=e.name,k=h.length;for(N.lastIndex=0;;){var l=N.exec(h),m=N.lastIndex,n=l[1],p=l[3];"]"===l[2]&&(n|=0);if(void 0===p||"["===p&&m+2===k){h=g;e=void 0===p?new H(n,e,f):new M(n,e,f);h.seq.push(e);h.map[e.id]=e;break}else p=g.map[n],void 0===p&&(p=new O(n),n=g,g=p,n.seq.push(g),n.map[g.id]=g),g=p}}};Q.prototype.setValue=function(a,b,c){b=this.map[b];
void 0!==b&&b.setValue(a,c,this.renderer)};Q.prototype.set=function(a,b,c){var d=this.map[c];void 0!==d&&d.setValue(a,b[c],this.renderer)};Q.prototype.setOptional=function(a,b,c){b=b[c];void 0!==b&&this.setValue(a,c,b)};Q.upload=function(a,b,c,d){for(var e=0,f=b.length;e!==f;++e){var g=b[e],h=c[g.id];!1!==h.needsUpdate&&g.setValue(a,h.value,d)}};Q.seqWithValue=function(a,b){for(var c=[],d=0,e=a.length;d!==e;++d){var f=a[d];f.id in b&&c.push(f)}return c};Q.splitDynamic=function(a,b){for(var c=null,
d=a.length,e=0,f=0;f!==d;++f){var g=a[f],h=b[g.id];h&&!0===h.dynamic?(null===c&&(c=[]),c.push(g)):(e<f&&(a[e]=g),++e)}e<d&&(a.length=e);return c};Q.evalDynamic=function(a,b,c,d){for(var e=0,f=a.length;e!==f;++e){var g=b[a[e].id],h=g.onUpdateCallback;void 0!==h&&h.call(g,c,d)}};return Q}();
THREE.LensFlarePlugin=function(a,b){var c,d,e,f,g,h,k,l,m,p,n=a.context,q=a.state,r,s,v,t,u,D;this.render=function(w,I,z){if(0!==b.length){w=new THREE.Vector3;var y=z.w/z.z,A=.5*z.z,G=.5*z.w,B=16/z.w,F=new THREE.Vector2(B*y,B),J=new THREE.Vector3(1,1,0),P=new THREE.Vector2(1,1),K=new THREE.Box2;K.min.set(0,0);K.max.set(z.z-16,z.w-16);if(void 0===t){var B=new Float32Array([-1,-1,0,0,1,-1,1,0,1,1,1,1,-1,1,0,1]),H=new Uint16Array([0,1,2,0,2,3]);r=n.createBuffer();s=n.createBuffer();n.bindBuffer(n.ARRAY_BUFFER,
r);n.bufferData(n.ARRAY_BUFFER,B,n.STATIC_DRAW);n.bindBuffer(n.ELEMENT_ARRAY_BUFFER,s);n.bufferData(n.ELEMENT_ARRAY_BUFFER,H,n.STATIC_DRAW);u=n.createTexture();D=n.createTexture();q.bindTexture(n.TEXTURE_2D,u);n.texImage2D(n.TEXTURE_2D,0,n.RGB,16,16,0,n.RGB,n.UNSIGNED_BYTE,null);n.texParameteri(n.TEXTURE_2D,n.TEXTURE_WRAP_S,n.CLAMP_TO_EDGE);n.texParameteri(n.TEXTURE_2D,n.TEXTURE_WRAP_T,n.CLAMP_TO_EDGE);n.texParameteri(n.TEXTURE_2D,n.TEXTURE_MAG_FILTER,n.NEAREST);n.texParameteri(n.TEXTURE_2D,n.TEXTURE_MIN_FILTER,
n.NEAREST);q.bindTexture(n.TEXTURE_2D,D);n.texImage2D(n.TEXTURE_2D,0,n.RGBA,16,16,0,n.RGBA,n.UNSIGNED_BYTE,null);n.texParameteri(n.TEXTURE_2D,n.TEXTURE_WRAP_S,n.CLAMP_TO_EDGE);n.texParameteri(n.TEXTURE_2D,n.TEXTURE_WRAP_T,n.CLAMP_TO_EDGE);n.texParameteri(n.TEXTURE_2D,n.TEXTURE_MAG_FILTER,n.NEAREST);n.texParameteri(n.TEXTURE_2D,n.TEXTURE_MIN_FILTER,n.NEAREST);var B=v={vertexShader:"uniform lowp int renderType;\nuniform vec3 screenPosition;\nuniform vec2 scale;\nuniform float rotation;\nuniform sampler2D occlusionMap;\nattribute vec2 position;\nattribute vec2 uv;\nvarying vec2 vUV;\nvarying float vVisibility;\nvoid main() {\nvUV = uv;\nvec2 pos = position;\nif ( renderType == 2 ) {\nvec4 visibility = texture2D( occlusionMap, vec2( 0.1, 0.1 ) );\nvisibility += texture2D( occlusionMap, vec2( 0.5, 0.1 ) );\nvisibility += texture2D( occlusionMap, vec2( 0.9, 0.1 ) );\nvisibility += texture2D( occlusionMap, vec2( 0.9, 0.5 ) );\nvisibility += texture2D( occlusionMap, vec2( 0.9, 0.9 ) );\nvisibility += texture2D( occlusionMap, vec2( 0.5, 0.9 ) );\nvisibility += texture2D( occlusionMap, vec2( 0.1, 0.9 ) );\nvisibility += texture2D( occlusionMap, vec2( 0.1, 0.5 ) );\nvisibility += texture2D( occlusionMap, vec2( 0.5, 0.5 ) );\nvVisibility =        visibility.r / 9.0;\nvVisibility *= 1.0 - visibility.g / 9.0;\nvVisibility *=       visibility.b / 9.0;\nvVisibility *= 1.0 - visibility.a / 9.0;\npos.x = cos( rotation ) * position.x - sin( rotation ) * position.y;\npos.y = sin( rotation ) * position.x + cos( rotation ) * position.y;\n}\ngl_Position = vec4( ( pos * scale + screenPosition.xy ).xy, screenPosition.z, 1.0 );\n}",
fragmentShader:"uniform lowp int renderType;\nuniform sampler2D map;\nuniform float opacity;\nuniform vec3 color;\nvarying vec2 vUV;\nvarying float vVisibility;\nvoid main() {\nif ( renderType == 0 ) {\ngl_FragColor = vec4( 1.0, 0.0, 1.0, 0.0 );\n} else if ( renderType == 1 ) {\ngl_FragColor = texture2D( map, vUV );\n} else {\nvec4 texture = texture2D( map, vUV );\ntexture.a *= opacity * vVisibility;\ngl_FragColor = texture;\ngl_FragColor.rgb *= color;\n}\n}"},H=n.createProgram(),M=n.createShader(n.FRAGMENT_SHADER),
O=n.createShader(n.VERTEX_SHADER),N="precision "+a.getPrecision()+" float;\n";n.shaderSource(M,N+B.fragmentShader);n.shaderSource(O,N+B.vertexShader);n.compileShader(M);n.compileShader(O);n.attachShader(H,M);n.attachShader(H,O);n.linkProgram(H);t=H;m=n.getAttribLocation(t,"position");p=n.getAttribLocation(t,"uv");c=n.getUniformLocation(t,"renderType");d=n.getUniformLocation(t,"map");e=n.getUniformLocation(t,"occlusionMap");f=n.getUniformLocation(t,"opacity");g=n.getUniformLocation(t,"color");h=n.getUniformLocation(t,
"scale");k=n.getUniformLocation(t,"rotation");l=n.getUniformLocation(t,"screenPosition")}n.useProgram(t);q.initAttributes();q.enableAttribute(m);q.enableAttribute(p);q.disableUnusedAttributes();n.uniform1i(e,0);n.uniform1i(d,1);n.bindBuffer(n.ARRAY_BUFFER,r);n.vertexAttribPointer(m,2,n.FLOAT,!1,16,0);n.vertexAttribPointer(p,2,n.FLOAT,!1,16,8);n.bindBuffer(n.ELEMENT_ARRAY_BUFFER,s);q.disable(n.CULL_FACE);q.setDepthWrite(!1);H=0;for(M=b.length;H<M;H++)if(B=16/z.w,F.set(B*y,B),O=b[H],w.set(O.matrixWorld.elements[12],
O.matrixWorld.elements[13],O.matrixWorld.elements[14]),w.applyMatrix4(I.matrixWorldInverse),w.applyProjection(I.projectionMatrix),J.copy(w),P.x=z.x+J.x*A+A-8,P.y=z.y+J.y*G+G-8,!0===K.containsPoint(P)){q.activeTexture(n.TEXTURE0);q.bindTexture(n.TEXTURE_2D,null);q.activeTexture(n.TEXTURE1);q.bindTexture(n.TEXTURE_2D,u);n.copyTexImage2D(n.TEXTURE_2D,0,n.RGB,P.x,P.y,16,16,0);n.uniform1i(c,0);n.uniform2f(h,F.x,F.y);n.uniform3f(l,J.x,J.y,J.z);q.disable(n.BLEND);q.enable(n.DEPTH_TEST);n.drawElements(n.TRIANGLES,
6,n.UNSIGNED_SHORT,0);q.activeTexture(n.TEXTURE0);q.bindTexture(n.TEXTURE_2D,D);n.copyTexImage2D(n.TEXTURE_2D,0,n.RGBA,P.x,P.y,16,16,0);n.uniform1i(c,1);q.disable(n.DEPTH_TEST);q.activeTexture(n.TEXTURE1);q.bindTexture(n.TEXTURE_2D,u);n.drawElements(n.TRIANGLES,6,n.UNSIGNED_SHORT,0);O.positionScreen.copy(J);O.customUpdateCallback?O.customUpdateCallback(O):O.updateLensFlares();n.uniform1i(c,2);q.enable(n.BLEND);for(var N=0,Q=O.lensFlares.length;N<Q;N++){var C=O.lensFlares[N];.001<C.opacity&&.001<C.scale&&
(J.x=C.x,J.y=C.y,J.z=C.z,B=C.size*C.scale/z.w,F.x=B*y,F.y=B,n.uniform3f(l,J.x,J.y,J.z),n.uniform2f(h,F.x,F.y),n.uniform1f(k,C.rotation),n.uniform1f(f,C.opacity),n.uniform3f(g,C.color.r,C.color.g,C.color.b),q.setBlending(C.blending,C.blendEquation,C.blendSrc,C.blendDst),a.setTexture2D(C.texture,1),n.drawElements(n.TRIANGLES,6,n.UNSIGNED_SHORT,0))}}q.enable(n.CULL_FACE);q.enable(n.DEPTH_TEST);q.setDepthWrite(!0);a.resetGLState()}}};
THREE.SpritePlugin=function(a,b){var c,d,e,f,g,h,k,l,m,p,n,q,r,s,v,t,u;function D(a,b){return a.renderOrder!==b.renderOrder?a.renderOrder-b.renderOrder:a.z!==b.z?b.z-a.z:b.id-a.id}var w=a.context,I=a.state,z,y,A,G,B=new THREE.Vector3,F=new THREE.Quaternion,J=new THREE.Vector3;this.render=function(P,K){if(0!==b.length){if(void 0===A){var H=new Float32Array([-.5,-.5,0,0,.5,-.5,1,0,.5,.5,1,1,-.5,.5,0,1]),M=new Uint16Array([0,1,2,0,2,3]);z=w.createBuffer();y=w.createBuffer();w.bindBuffer(w.ARRAY_BUFFER,
z);w.bufferData(w.ARRAY_BUFFER,H,w.STATIC_DRAW);w.bindBuffer(w.ELEMENT_ARRAY_BUFFER,y);w.bufferData(w.ELEMENT_ARRAY_BUFFER,M,w.STATIC_DRAW);var H=w.createProgram(),M=w.createShader(w.VERTEX_SHADER),O=w.createShader(w.FRAGMENT_SHADER);w.shaderSource(M,["precision "+a.getPrecision()+" float;","uniform mat4 modelViewMatrix;\nuniform mat4 projectionMatrix;\nuniform float rotation;\nuniform vec2 scale;\nuniform vec2 uvOffset;\nuniform vec2 uvScale;\nattribute vec2 position;\nattribute vec2 uv;\nvarying vec2 vUV;\nvoid main() {\nvUV = uvOffset + uv * uvScale;\nvec2 alignedPosition = position * scale;\nvec2 rotatedPosition;\nrotatedPosition.x = cos( rotation ) * alignedPosition.x - sin( rotation ) * alignedPosition.y;\nrotatedPosition.y = sin( rotation ) * alignedPosition.x + cos( rotation ) * alignedPosition.y;\nvec4 finalPosition;\nfinalPosition = modelViewMatrix * vec4( 0.0, 0.0, 0.0, 1.0 );\nfinalPosition.xy += rotatedPosition;\nfinalPosition = projectionMatrix * finalPosition;\ngl_Position = finalPosition;\n}"].join("\n"));
w.shaderSource(O,["precision "+a.getPrecision()+" float;","uniform vec3 color;\nuniform sampler2D map;\nuniform float opacity;\nuniform int fogType;\nuniform vec3 fogColor;\nuniform float fogDensity;\nuniform float fogNear;\nuniform float fogFar;\nuniform float alphaTest;\nvarying vec2 vUV;\nvoid main() {\nvec4 texture = texture2D( map, vUV );\nif ( texture.a < alphaTest ) discard;\ngl_FragColor = vec4( color * texture.xyz, texture.a * opacity );\nif ( fogType > 0 ) {\nfloat depth = gl_FragCoord.z / gl_FragCoord.w;\nfloat fogFactor = 0.0;\nif ( fogType == 1 ) {\nfogFactor = smoothstep( fogNear, fogFar, depth );\n} else {\nconst float LOG2 = 1.442695;\nfogFactor = exp2( - fogDensity * fogDensity * depth * depth * LOG2 );\nfogFactor = 1.0 - clamp( fogFactor, 0.0, 1.0 );\n}\ngl_FragColor = mix( gl_FragColor, vec4( fogColor, gl_FragColor.w ), fogFactor );\n}\n}"].join("\n"));
w.compileShader(M);w.compileShader(O);w.attachShader(H,M);w.attachShader(H,O);w.linkProgram(H);A=H;t=w.getAttribLocation(A,"position");u=w.getAttribLocation(A,"uv");c=w.getUniformLocation(A,"uvOffset");d=w.getUniformLocation(A,"uvScale");e=w.getUniformLocation(A,"rotation");f=w.getUniformLocation(A,"scale");g=w.getUniformLocation(A,"color");h=w.getUniformLocation(A,"map");k=w.getUniformLocation(A,"opacity");l=w.getUniformLocation(A,"modelViewMatrix");m=w.getUniformLocation(A,"projectionMatrix");p=
w.getUniformLocation(A,"fogType");n=w.getUniformLocation(A,"fogDensity");q=w.getUniformLocation(A,"fogNear");r=w.getUniformLocation(A,"fogFar");s=w.getUniformLocation(A,"fogColor");v=w.getUniformLocation(A,"alphaTest");H=document.createElementNS("http://www.w3.org/1999/xhtml","canvas");H.width=8;H.height=8;M=H.getContext("2d");M.fillStyle="white";M.fillRect(0,0,8,8);G=new THREE.Texture(H);G.needsUpdate=!0}w.useProgram(A);I.initAttributes();I.enableAttribute(t);I.enableAttribute(u);I.disableUnusedAttributes();
I.disable(w.CULL_FACE);I.enable(w.BLEND);w.bindBuffer(w.ARRAY_BUFFER,z);w.vertexAttribPointer(t,2,w.FLOAT,!1,16,0);w.vertexAttribPointer(u,2,w.FLOAT,!1,16,8);w.bindBuffer(w.ELEMENT_ARRAY_BUFFER,y);w.uniformMatrix4fv(m,!1,K.projectionMatrix.elements);I.activeTexture(w.TEXTURE0);w.uniform1i(h,0);M=H=0;(O=P.fog)?(w.uniform3f(s,O.color.r,O.color.g,O.color.b),O instanceof THREE.Fog?(w.uniform1f(q,O.near),w.uniform1f(r,O.far),w.uniform1i(p,1),M=H=1):O instanceof THREE.FogExp2&&(w.uniform1f(n,O.density),
w.uniform1i(p,2),M=H=2)):(w.uniform1i(p,0),M=H=0);for(var O=0,N=b.length;O<N;O++){var Q=b[O];Q.modelViewMatrix.multiplyMatrices(K.matrixWorldInverse,Q.matrixWorld);Q.z=-Q.modelViewMatrix.elements[14]}b.sort(D);for(var C=[],O=0,N=b.length;O<N;O++){var Q=b[O],L=Q.material;!1!==L.visible&&(w.uniform1f(v,L.alphaTest),w.uniformMatrix4fv(l,!1,Q.modelViewMatrix.elements),Q.matrixWorld.decompose(B,F,J),C[0]=J.x,C[1]=J.y,Q=0,P.fog&&L.fog&&(Q=M),H!==Q&&(w.uniform1i(p,Q),H=Q),null!==L.map?(w.uniform2f(c,L.map.offset.x,
L.map.offset.y),w.uniform2f(d,L.map.repeat.x,L.map.repeat.y)):(w.uniform2f(c,0,0),w.uniform2f(d,1,1)),w.uniform1f(k,L.opacity),w.uniform3f(g,L.color.r,L.color.g,L.color.b),w.uniform1f(e,L.rotation),w.uniform2fv(f,C),I.setBlending(L.blending,L.blendEquation,L.blendSrc,L.blendDst),I.setDepthTest(L.depthTest),I.setDepthWrite(L.depthWrite),L.map?a.setTexture2D(L.map,0):a.setTexture2D(G,0),w.drawElements(w.TRIANGLES,6,w.UNSIGNED_SHORT,0))}I.enable(w.CULL_FACE);a.resetGLState()}}};
Object.assign(THREE,{Face4:function(a,b,c,d,e,f,g){console.warn("THREE.Face4 has been removed. A THREE.Face3 will be created instead.");return new THREE.Face3(a,b,c,e,f,g)},LineStrip:0,LinePieces:1,MeshFaceMaterial:THREE.MultiMaterial,PointCloud:function(a,b){console.warn("THREE.PointCloud has been renamed to THREE.Points.");return new THREE.Points(a,b)},Particle:THREE.Sprite,ParticleSystem:function(a,b){console.warn("THREE.ParticleSystem has been renamed to THREE.Points.");return new THREE.Points(a,
b)},PointCloudMaterial:function(a){console.warn("THREE.PointCloudMaterial has been renamed to THREE.PointsMaterial.");return new THREE.PointsMaterial(a)},ParticleBasicMaterial:function(a){console.warn("THREE.ParticleBasicMaterial has been renamed to THREE.PointsMaterial.");return new THREE.PointsMaterial(a)},ParticleSystemMaterial:function(a){console.warn("THREE.ParticleSystemMaterial has been renamed to THREE.PointsMaterial.");return new THREE.PointsMaterial(a)},Vertex:function(a,b,c){console.warn("THREE.Vertex has been removed. Use THREE.Vector3 instead.");
return new THREE.Vector3(a,b,c)}});Object.assign(THREE.Box2.prototype,{empty:function(){console.warn("THREE.Box2: .empty() has been renamed to .isEmpty().");return this.isEmpty()},isIntersectionBox:function(a){console.warn("THREE.Box2: .isIntersectionBox() has been renamed to .intersectsBox().");return this.intersectsBox(a)}});
Object.assign(THREE.Box3.prototype,{empty:function(){console.warn("THREE.Box3: .empty() has been renamed to .isEmpty().");return this.isEmpty()},isIntersectionBox:function(a){console.warn("THREE.Box3: .isIntersectionBox() has been renamed to .intersectsBox().");return this.intersectsBox(a)},isIntersectionSphere:function(a){console.warn("THREE.Box3: .isIntersectionSphere() has been renamed to .intersectsSphere().");return this.intersectsSphere(a)}});
Object.assign(THREE.Matrix3.prototype,{multiplyVector3:function(a){console.warn("THREE.Matrix3: .multiplyVector3() has been removed. Use vector.applyMatrix3( matrix ) instead.");return a.applyMatrix3(this)},multiplyVector3Array:function(a){console.warn("THREE.Matrix3: .multiplyVector3Array() has been renamed. Use matrix.applyToVector3Array( array ) instead.");return this.applyToVector3Array(a)}});
Object.assign(THREE.Matrix4.prototype,{extractPosition:function(a){console.warn("THREE.Matrix4: .extractPosition() has been renamed to .copyPosition().");return this.copyPosition(a)},setRotationFromQuaternion:function(a){console.warn("THREE.Matrix4: .setRotationFromQuaternion() has been renamed to .makeRotationFromQuaternion().");return this.makeRotationFromQuaternion(a)},multiplyVector3:function(a){console.warn("THREE.Matrix4: .multiplyVector3() has been removed. Use vector.applyMatrix4( matrix ) or vector.applyProjection( matrix ) instead.");
return a.applyProjection(this)},multiplyVector4:function(a){console.warn("THREE.Matrix4: .multiplyVector4() has been removed. Use vector.applyMatrix4( matrix ) instead.");return a.applyMatrix4(this)},multiplyVector3Array:function(a){console.warn("THREE.Matrix4: .multiplyVector3Array() has been renamed. Use matrix.applyToVector3Array( array ) instead.");return this.applyToVector3Array(a)},rotateAxis:function(a){console.warn("THREE.Matrix4: .rotateAxis() has been removed. Use Vector3.transformDirection( matrix ) instead.");
a.transformDirection(this)},crossVector:function(a){console.warn("THREE.Matrix4: .crossVector() has been removed. Use vector.applyMatrix4( matrix ) instead.");return a.applyMatrix4(this)},translate:function(a){console.error("THREE.Matrix4: .translate() has been removed.")},rotateX:function(a){console.error("THREE.Matrix4: .rotateX() has been removed.")},rotateY:function(a){console.error("THREE.Matrix4: .rotateY() has been removed.")},rotateZ:function(a){console.error("THREE.Matrix4: .rotateZ() has been removed.")},
rotateByAxis:function(a,b){console.error("THREE.Matrix4: .rotateByAxis() has been removed.")}});Object.assign(THREE.Plane.prototype,{isIntersectionLine:function(a){console.warn("THREE.Plane: .isIntersectionLine() has been renamed to .intersectsLine().");return this.intersectsLine(a)}});Object.assign(THREE.Quaternion.prototype,{multiplyVector3:function(a){console.warn("THREE.Quaternion: .multiplyVector3() has been removed. Use is now vector.applyQuaternion( quaternion ) instead.");return a.applyQuaternion(this)}});
Object.assign(THREE.Ray.prototype,{isIntersectionBox:function(a){console.warn("THREE.Ray: .isIntersectionBox() has been renamed to .intersectsBox().");return this.intersectsBox(a)},isIntersectionPlane:function(a){console.warn("THREE.Ray: .isIntersectionPlane() has been renamed to .intersectsPlane().");return this.intersectsPlane(a)},isIntersectionSphere:function(a){console.warn("THREE.Ray: .isIntersectionSphere() has been renamed to .intersectsSphere().");return this.intersectsSphere(a)}});
Object.assign(THREE.Vector3.prototype,{setEulerFromRotationMatrix:function(){console.error("THREE.Vector3: .setEulerFromRotationMatrix() has been removed. Use Euler.setFromRotationMatrix() instead.")},setEulerFromQuaternion:function(){console.error("THREE.Vector3: .setEulerFromQuaternion() has been removed. Use Euler.setFromQuaternion() instead.")},getPositionFromMatrix:function(a){console.warn("THREE.Vector3: .getPositionFromMatrix() has been renamed to .setFromMatrixPosition().");return this.setFromMatrixPosition(a)},
getScaleFromMatrix:function(a){console.warn("THREE.Vector3: .getScaleFromMatrix() has been renamed to .setFromMatrixScale().");return this.setFromMatrixScale(a)},getColumnFromMatrix:function(a,b){console.warn("THREE.Vector3: .getColumnFromMatrix() has been renamed to .setFromMatrixColumn().");return this.setFromMatrixColumn(b,a)}});
Object.assign(THREE.Object3D.prototype,{getChildByName:function(a){console.warn("THREE.Object3D: .getChildByName() has been renamed to .getObjectByName().");return this.getObjectByName(a)},renderDepth:function(a){console.warn("THREE.Object3D: .renderDepth has been removed. Use .renderOrder, instead.")},translate:function(a,b){console.warn("THREE.Object3D: .translate() has been removed. Use .translateOnAxis( axis, distance ) instead.");return this.translateOnAxis(b,a)}});
Object.defineProperties(THREE.Object3D.prototype,{eulerOrder:{get:function(){console.warn("THREE.Object3D: .eulerOrder is now .rotation.order.");return this.rotation.order},set:function(a){console.warn("THREE.Object3D: .eulerOrder is now .rotation.order.");this.rotation.order=a}},useQuaternion:{get:function(){console.warn("THREE.Object3D: .useQuaternion has been removed. The library now uses quaternions by default.")},set:function(a){console.warn("THREE.Object3D: .useQuaternion has been removed. The library now uses quaternions by default.")}}});
Object.defineProperties(THREE.LOD.prototype,{objects:{get:function(){console.warn("THREE.LOD: .objects has been renamed to .levels.");return this.levels}}});THREE.PerspectiveCamera.prototype.setLens=function(a,b){console.warn("THREE.PerspectiveCamera.setLens is deprecated. Use .setFocalLength and .filmGauge for a photographic setup.");void 0!==b&&(this.filmGauge=b);this.setFocalLength(a)};
Object.defineProperties(THREE.Light.prototype,{onlyShadow:{set:function(a){console.warn("THREE.Light: .onlyShadow has been removed.")}},shadowCameraFov:{set:function(a){console.warn("THREE.Light: .shadowCameraFov is now .shadow.camera.fov.");this.shadow.camera.fov=a}},shadowCameraLeft:{set:function(a){console.warn("THREE.Light: .shadowCameraLeft is now .shadow.camera.left.");this.shadow.camera.left=a}},shadowCameraRight:{set:function(a){console.warn("THREE.Light: .shadowCameraRight is now .shadow.camera.right.");
this.shadow.camera.right=a}},shadowCameraTop:{set:function(a){console.warn("THREE.Light: .shadowCameraTop is now .shadow.camera.top.");this.shadow.camera.top=a}},shadowCameraBottom:{set:function(a){console.warn("THREE.Light: .shadowCameraBottom is now .shadow.camera.bottom.");this.shadow.camera.bottom=a}},shadowCameraNear:{set:function(a){console.warn("THREE.Light: .shadowCameraNear is now .shadow.camera.near.");this.shadow.camera.near=a}},shadowCameraFar:{set:function(a){console.warn("THREE.Light: .shadowCameraFar is now .shadow.camera.far.");
this.shadow.camera.far=a}},shadowCameraVisible:{set:function(a){console.warn("THREE.Light: .shadowCameraVisible has been removed. Use new THREE.CameraHelper( light.shadow.camera ) instead.")}},shadowBias:{set:function(a){console.warn("THREE.Light: .shadowBias is now .shadow.bias.");this.shadow.bias=a}},shadowDarkness:{set:function(a){console.warn("THREE.Light: .shadowDarkness has been removed.")}},shadowMapWidth:{set:function(a){console.warn("THREE.Light: .shadowMapWidth is now .shadow.mapSize.width.");
this.shadow.mapSize.width=a}},shadowMapHeight:{set:function(a){console.warn("THREE.Light: .shadowMapHeight is now .shadow.mapSize.height.");this.shadow.mapSize.height=a}}});Object.defineProperties(THREE.BufferAttribute.prototype,{length:{get:function(){console.warn("THREE.BufferAttribute: .length has been deprecated. Please use .count.");return this.array.length}}});
Object.assign(THREE.BufferGeometry.prototype,{addIndex:function(a){console.warn("THREE.BufferGeometry: .addIndex() has been renamed to .setIndex().");this.setIndex(a)},addDrawCall:function(a,b,c){void 0!==c&&console.warn("THREE.BufferGeometry: .addDrawCall() no longer supports indexOffset.");console.warn("THREE.BufferGeometry: .addDrawCall() is now .addGroup().");this.addGroup(a,b)},clearDrawCalls:function(){console.warn("THREE.BufferGeometry: .clearDrawCalls() is now .clearGroups().");this.clearGroups()},
computeTangents:function(){console.warn("THREE.BufferGeometry: .computeTangents() has been removed.")},computeOffsets:function(){console.warn("THREE.BufferGeometry: .computeOffsets() has been removed.")}});Object.defineProperties(THREE.BufferGeometry.prototype,{drawcalls:{get:function(){console.error("THREE.BufferGeometry: .drawcalls has been renamed to .groups.");return this.groups}},offsets:{get:function(){console.warn("THREE.BufferGeometry: .offsets has been renamed to .groups.");return this.groups}}});
Object.defineProperties(THREE.Material.prototype,{wrapAround:{get:function(){console.warn("THREE."+this.type+": .wrapAround has been removed.")},set:function(a){console.warn("THREE."+this.type+": .wrapAround has been removed.")}},wrapRGB:{get:function(){console.warn("THREE."+this.type+": .wrapRGB has been removed.");return new THREE.Color}}});
Object.defineProperties(THREE.MeshPhongMaterial.prototype,{metal:{get:function(){console.warn("THREE.MeshPhongMaterial: .metal has been removed. Use THREE.MeshStandardMaterial instead.");return!1},set:function(a){console.warn("THREE.MeshPhongMaterial: .metal has been removed. Use THREE.MeshStandardMaterial instead")}}});
Object.defineProperties(THREE.ShaderMaterial.prototype,{derivatives:{get:function(){console.warn("THREE.ShaderMaterial: .derivatives has been moved to .extensions.derivatives.");return this.extensions.derivatives},set:function(a){console.warn("THREE. ShaderMaterial: .derivatives has been moved to .extensions.derivatives.");this.extensions.derivatives=a}}});
THREE.EventDispatcher.prototype=Object.assign(Object.create({constructor:THREE.EventDispatcher,apply:function(a){console.warn("THREE.EventDispatcher: .apply is deprecated, just inherit or Object.assign the prototype to mix-in.");Object.assign(a,this)}}),THREE.EventDispatcher.prototype);
Object.assign(THREE.WebGLRenderer.prototype,{supportsFloatTextures:function(){console.warn("THREE.WebGLRenderer: .supportsFloatTextures() is now .extensions.get( 'OES_texture_float' ).");return this.extensions.get("OES_texture_float")},supportsHalfFloatTextures:function(){console.warn("THREE.WebGLRenderer: .supportsHalfFloatTextures() is now .extensions.get( 'OES_texture_half_float' ).");return this.extensions.get("OES_texture_half_float")},supportsStandardDerivatives:function(){console.warn("THREE.WebGLRenderer: .supportsStandardDerivatives() is now .extensions.get( 'OES_standard_derivatives' ).");
return this.extensions.get("OES_standard_derivatives")},supportsCompressedTextureS3TC:function(){console.warn("THREE.WebGLRenderer: .supportsCompressedTextureS3TC() is now .extensions.get( 'WEBGL_compressed_texture_s3tc' ).");return this.extensions.get("WEBGL_compressed_texture_s3tc")},supportsCompressedTexturePVRTC:function(){console.warn("THREE.WebGLRenderer: .supportsCompressedTexturePVRTC() is now .extensions.get( 'WEBGL_compressed_texture_pvrtc' ).");return this.extensions.get("WEBGL_compressed_texture_pvrtc")},
supportsBlendMinMax:function(){console.warn("THREE.WebGLRenderer: .supportsBlendMinMax() is now .extensions.get( 'EXT_blend_minmax' ).");return this.extensions.get("EXT_blend_minmax")},supportsVertexTextures:function(){return this.capabilities.vertexTextures},supportsInstancedArrays:function(){console.warn("THREE.WebGLRenderer: .supportsInstancedArrays() is now .extensions.get( 'ANGLE_instanced_arrays' ).");return this.extensions.get("ANGLE_instanced_arrays")},enableScissorTest:function(a){console.warn("THREE.WebGLRenderer: .enableScissorTest() is now .setScissorTest().");
this.setScissorTest(a)},initMaterial:function(){console.warn("THREE.WebGLRenderer: .initMaterial() has been removed.")},addPrePlugin:function(){console.warn("THREE.WebGLRenderer: .addPrePlugin() has been removed.")},addPostPlugin:function(){console.warn("THREE.WebGLRenderer: .addPostPlugin() has been removed.")},updateShadowMap:function(){console.warn("THREE.WebGLRenderer: .updateShadowMap() has been removed.")}});
Object.defineProperties(THREE.WebGLRenderer.prototype,{shadowMapEnabled:{get:function(){return this.shadowMap.enabled},set:function(a){console.warn("THREE.WebGLRenderer: .shadowMapEnabled is now .shadowMap.enabled.");this.shadowMap.enabled=a}},shadowMapType:{get:function(){return this.shadowMap.type},set:function(a){console.warn("THREE.WebGLRenderer: .shadowMapType is now .shadowMap.type.");this.shadowMap.type=a}},shadowMapCullFace:{get:function(){return this.shadowMap.cullFace},set:function(a){console.warn("THREE.WebGLRenderer: .shadowMapCullFace is now .shadowMap.cullFace.");
this.shadowMap.cullFace=a}}});Object.defineProperties(THREE.WebGLShadowMap.prototype,{cullFace:{get:function(){return this.renderReverseSided?THREE.CullFaceFront:THREE.CullFaceBack},set:function(a){a=a!==THREE.CullFaceBack;console.warn("WebGLRenderer: .shadowMap.cullFace is deprecated. Set .shadowMap.renderReverseSided to "+a+".");this.renderReverseSided=a}}});
Object.defineProperties(THREE.WebGLRenderTarget.prototype,{wrapS:{get:function(){console.warn("THREE.WebGLRenderTarget: .wrapS is now .texture.wrapS.");return this.texture.wrapS},set:function(a){console.warn("THREE.WebGLRenderTarget: .wrapS is now .texture.wrapS.");this.texture.wrapS=a}},wrapT:{get:function(){console.warn("THREE.WebGLRenderTarget: .wrapT is now .texture.wrapT.");return this.texture.wrapT},set:function(a){console.warn("THREE.WebGLRenderTarget: .wrapT is now .texture.wrapT.");this.texture.wrapT=
a}},magFilter:{get:function(){console.warn("THREE.WebGLRenderTarget: .magFilter is now .texture.magFilter.");return this.texture.magFilter},set:function(a){console.warn("THREE.WebGLRenderTarget: .magFilter is now .texture.magFilter.");this.texture.magFilter=a}},minFilter:{get:function(){console.warn("THREE.WebGLRenderTarget: .minFilter is now .texture.minFilter.");return this.texture.minFilter},set:function(a){console.warn("THREE.WebGLRenderTarget: .minFilter is now .texture.minFilter.");this.texture.minFilter=
a}},anisotropy:{get:function(){console.warn("THREE.WebGLRenderTarget: .anisotropy is now .texture.anisotropy.");return this.texture.anisotropy},set:function(a){console.warn("THREE.WebGLRenderTarget: .anisotropy is now .texture.anisotropy.");this.texture.anisotropy=a}},offset:{get:function(){console.warn("THREE.WebGLRenderTarget: .offset is now .texture.offset.");return this.texture.offset},set:function(a){console.warn("THREE.WebGLRenderTarget: .offset is now .texture.offset.");this.texture.offset=
a}},repeat:{get:function(){console.warn("THREE.WebGLRenderTarget: .repeat is now .texture.repeat.");return this.texture.repeat},set:function(a){console.warn("THREE.WebGLRenderTarget: .repeat is now .texture.repeat.");this.texture.repeat=a}},format:{get:function(){console.warn("THREE.WebGLRenderTarget: .format is now .texture.format.");return this.texture.format},set:function(a){console.warn("THREE.WebGLRenderTarget: .format is now .texture.format.");this.texture.format=a}},type:{get:function(){console.warn("THREE.WebGLRenderTarget: .type is now .texture.type.");
return this.texture.type},set:function(a){console.warn("THREE.WebGLRenderTarget: .type is now .texture.type.");this.texture.type=a}},generateMipmaps:{get:function(){console.warn("THREE.WebGLRenderTarget: .generateMipmaps is now .texture.generateMipmaps.");return this.texture.generateMipmaps},set:function(a){console.warn("THREE.WebGLRenderTarget: .generateMipmaps is now .texture.generateMipmaps.");this.texture.generateMipmaps=a}}});
Object.assign(THREE.Audio.prototype,{load:function(a){console.warn("THREE.Audio: .load has been deprecated. Please use THREE.AudioLoader.");var b=this;(new THREE.AudioLoader).load(a,function(a){b.setBuffer(a)});return this}});Object.assign(THREE.AudioAnalyser.prototype,{getData:function(a){console.warn("THREE.AudioAnalyser: .getData() is now .getFrequencyData().");return this.getFrequencyData()}});
THREE.GeometryUtils={merge:function(a,b,c){console.warn("THREE.GeometryUtils: .merge() has been moved to Geometry. Use geometry.merge( geometry2, matrix, materialIndexOffset ) instead.");var d;b instanceof THREE.Mesh&&(b.matrixAutoUpdate&&b.updateMatrix(),d=b.matrix,b=b.geometry);a.merge(b,d,c)},center:function(a){console.warn("THREE.GeometryUtils: .center() has been moved to Geometry. Use geometry.center() instead.");return a.center()}};
THREE.ImageUtils={crossOrigin:void 0,loadTexture:function(a,b,c,d){console.warn("THREE.ImageUtils.loadTexture has been deprecated. Use THREE.TextureLoader() instead.");var e=new THREE.TextureLoader;e.setCrossOrigin(this.crossOrigin);a=e.load(a,c,void 0,d);b&&(a.mapping=b);return a},loadTextureCube:function(a,b,c,d){console.warn("THREE.ImageUtils.loadTextureCube has been deprecated. Use THREE.CubeTextureLoader() instead.");var e=new THREE.CubeTextureLoader;e.setCrossOrigin(this.crossOrigin);a=e.load(a,
c,void 0,d);b&&(a.mapping=b);return a},loadCompressedTexture:function(){console.error("THREE.ImageUtils.loadCompressedTexture has been removed. Use THREE.DDSLoader instead.")},loadCompressedTextureCube:function(){console.error("THREE.ImageUtils.loadCompressedTextureCube has been removed. Use THREE.DDSLoader instead.")}};
THREE.Projector=function(){console.error("THREE.Projector has been moved to /examples/js/renderers/Projector.js.");this.projectVector=function(a,b){console.warn("THREE.Projector: .projectVector() is now vector.project().");a.project(b)};this.unprojectVector=function(a,b){console.warn("THREE.Projector: .unprojectVector() is now vector.unproject().");a.unproject(b)};this.pickingRay=function(a,b){console.error("THREE.Projector: .pickingRay() is now raycaster.setFromCamera().")}};
THREE.CanvasRenderer=function(){console.error("THREE.CanvasRenderer has been moved to /examples/js/renderers/CanvasRenderer.js");this.domElement=document.createElementNS("http://www.w3.org/1999/xhtml","canvas");this.clear=function(){};this.render=function(){};this.setClearColor=function(){};this.setSize=function(){}};
THREE.CurveUtils={tangentQuadraticBezier:function(a,b,c,d){return 2*(1-a)*(c-b)+2*a*(d-c)},tangentCubicBezier:function(a,b,c,d,e){return-3*b*(1-a)*(1-a)+3*c*(1-a)*(1-a)-6*a*c*(1-a)+6*a*d*(1-a)-3*a*a*d+3*a*a*e},tangentSpline:function(a,b,c,d,e){return 6*a*a-6*a+(3*a*a-4*a+1)+(-6*a*a+6*a)+(3*a*a-2*a)},interpolate:function(a,b,c,d,e){a=.5*(c-a);d=.5*(d-b);var f=e*e;return(2*b-2*c+a+d)*e*f+(-3*b+3*c-2*a-d)*f+a*e+b}};
THREE.SceneUtils={createMultiMaterialObject:function(a,b){for(var c=new THREE.Group,d=0,e=b.length;d<e;d++)c.add(new THREE.Mesh(a,b[d]));return c},detach:function(a,b,c){a.applyMatrix(b.matrixWorld);b.remove(a);c.add(a)},attach:function(a,b,c){var d=new THREE.Matrix4;d.getInverse(c.matrixWorld);a.applyMatrix(d);b.remove(a);c.add(a)}};
THREE.ShapeUtils={area:function(a){for(var b=a.length,c=0,d=b-1,e=0;e<b;d=e++)c+=a[d].x*a[e].y-a[e].x*a[d].y;return.5*c},triangulate:function(){return function(a,b){var c=a.length;if(3>c)return null;var d=[],e=[],f=[],g,h,k;if(0<THREE.ShapeUtils.area(a))for(h=0;h<c;h++)e[h]=h;else for(h=0;h<c;h++)e[h]=c-1-h;var l=2*c;for(h=c-1;2<c;){if(0>=l--){console.warn("THREE.ShapeUtils: Unable to triangulate polygon! in triangulate()");break}g=h;c<=g&&(g=0);h=g+1;c<=h&&(h=0);k=h+1;c<=k&&(k=0);var m;a:{var p=
m=void 0,n=void 0,q=void 0,r=void 0,s=void 0,v=void 0,t=void 0,u=void 0,p=a[e[g]].x,n=a[e[g]].y,q=a[e[h]].x,r=a[e[h]].y,s=a[e[k]].x,v=a[e[k]].y;if(Number.EPSILON>(q-p)*(v-n)-(r-n)*(s-p))m=!1;else{var D=void 0,w=void 0,I=void 0,z=void 0,y=void 0,A=void 0,G=void 0,B=void 0,F=void 0,J=void 0,F=B=G=u=t=void 0,D=s-q,w=v-r,I=p-s,z=n-v,y=q-p,A=r-n;for(m=0;m<c;m++)if(t=a[e[m]].x,u=a[e[m]].y,!(t===p&&u===n||t===q&&u===r||t===s&&u===v)&&(G=t-p,B=u-n,F=t-q,J=u-r,t-=s,u-=v,F=D*J-w*F,G=y*B-A*G,B=I*u-z*t,F>=-Number.EPSILON&&
B>=-Number.EPSILON&&G>=-Number.EPSILON)){m=!1;break a}m=!0}}if(m){d.push([a[e[g]],a[e[h]],a[e[k]]]);f.push([e[g],e[h],e[k]]);g=h;for(k=h+1;k<c;g++,k++)e[g]=e[k];c--;l=2*c}}return b?f:d}}(),triangulateShape:function(a,b){function c(a){var b=a.length;2<b&&a[b-1].equals(a[0])&&a.pop()}function d(a,b,c){return a.x!==b.x?a.x<b.x?a.x<=c.x&&c.x<=b.x:b.x<=c.x&&c.x<=a.x:a.y<b.y?a.y<=c.y&&c.y<=b.y:b.y<=c.y&&c.y<=a.y}function e(a,b,c,e,f){var g=b.x-a.x,h=b.y-a.y,k=e.x-c.x,l=e.y-c.y,m=a.x-c.x,n=a.y-c.y,p=h*k-
g*l,G=h*m-g*n;if(Math.abs(p)>Number.EPSILON){if(0<p){if(0>G||G>p)return[];k=l*m-k*n;if(0>k||k>p)return[]}else{if(0<G||G<p)return[];k=l*m-k*n;if(0<k||k<p)return[]}if(0===k)return!f||0!==G&&G!==p?[a]:[];if(k===p)return!f||0!==G&&G!==p?[b]:[];if(0===G)return[c];if(G===p)return[e];f=k/p;return[{x:a.x+f*g,y:a.y+f*h}]}if(0!==G||l*m!==k*n)return[];h=0===g&&0===h;k=0===k&&0===l;if(h&&k)return a.x!==c.x||a.y!==c.y?[]:[a];if(h)return d(c,e,a)?[a]:[];if(k)return d(a,b,c)?[c]:[];0!==g?(a.x<b.x?(g=a,k=a.x,h=b,
a=b.x):(g=b,k=b.x,h=a,a=a.x),c.x<e.x?(b=c,p=c.x,l=e,c=e.x):(b=e,p=e.x,l=c,c=c.x)):(a.y<b.y?(g=a,k=a.y,h=b,a=b.y):(g=b,k=b.y,h=a,a=a.y),c.y<e.y?(b=c,p=c.y,l=e,c=e.y):(b=e,p=e.y,l=c,c=c.y));return k<=p?a<p?[]:a===p?f?[]:[b]:a<=c?[b,h]:[b,l]:k>c?[]:k===c?f?[]:[g]:a<=c?[g,h]:[g,l]}function f(a,b,c,d){var e=b.x-a.x,f=b.y-a.y;b=c.x-a.x;c=c.y-a.y;var g=d.x-a.x;d=d.y-a.y;a=e*c-f*b;e=e*d-f*g;return Math.abs(a)>Number.EPSILON?(b=g*c-d*b,0<a?0<=e&&0<=b:0<=e||0<=b):0<e}c(a);b.forEach(c);var g,h,k,l,m,p={};k=
a.concat();g=0;for(h=b.length;g<h;g++)Array.prototype.push.apply(k,b[g]);g=0;for(h=k.length;g<h;g++)m=k[g].x+":"+k[g].y,void 0!==p[m]&&console.warn("THREE.ShapeUtils: Duplicate point",m,g),p[m]=g;g=function(a,b){function c(a,b){var d=h.length-1,e=a-1;0>e&&(e=d);var g=a+1;g>d&&(g=0);d=f(h[a],h[e],h[g],k[b]);if(!d)return!1;d=k.length-1;e=b-1;0>e&&(e=d);g=b+1;g>d&&(g=0);return(d=f(k[b],k[e],k[g],h[a]))?!0:!1}function d(a,b){var c,f;for(c=0;c<h.length;c++)if(f=c+1,f%=h.length,f=e(a,b,h[c],h[f],!0),0<
f.length)return!0;return!1}function g(a,c){var d,f,h,k;for(d=0;d<l.length;d++)for(f=b[l[d]],h=0;h<f.length;h++)if(k=h+1,k%=f.length,k=e(a,c,f[h],f[k],!0),0<k.length)return!0;return!1}var h=a.concat(),k,l=[],m,n,p,A,G,B=[],F,J,P,K=0;for(m=b.length;K<m;K++)l.push(K);F=0;for(var H=2*l.length;0<l.length;){H--;if(0>H){console.log("Infinite Loop! Holes left:"+l.length+", Probably Hole outside Shape!");break}for(n=F;n<h.length;n++){p=h[n];m=-1;for(K=0;K<l.length;K++)if(A=l[K],G=p.x+":"+p.y+":"+A,void 0===
B[G]){k=b[A];for(J=0;J<k.length;J++)if(A=k[J],c(n,J)&&!d(p,A)&&!g(p,A)){m=J;l.splice(K,1);F=h.slice(0,n+1);A=h.slice(n);J=k.slice(m);P=k.slice(0,m+1);h=F.concat(J).concat(P).concat(A);F=n;break}if(0<=m)break;B[G]=!0}if(0<=m)break}}return h}(a,b);var n=THREE.ShapeUtils.triangulate(g,!1);g=0;for(h=n.length;g<h;g++)for(l=n[g],k=0;3>k;k++)m=l[k].x+":"+l[k].y,m=p[m],void 0!==m&&(l[k]=m);return n.concat()},isClockWise:function(a){return 0>THREE.ShapeUtils.area(a)},b2:function(){return function(a,b,c,d){var e=
1-a;return e*e*b+2*(1-a)*a*c+a*a*d}}(),b3:function(){return function(a,b,c,d,e){var f=1-a,g=1-a;return f*f*f*b+3*g*g*a*c+3*(1-a)*a*a*d+a*a*a*e}}()};THREE.Curve=function(){};
THREE.Curve.prototype={constructor:THREE.Curve,getPoint:function(a){console.warn("THREE.Curve: Warning, getPoint() not implemented!");return null},getPointAt:function(a){a=this.getUtoTmapping(a);return this.getPoint(a)},getPoints:function(a){a||(a=5);for(var b=[],c=0;c<=a;c++)b.push(this.getPoint(c/a));return b},getSpacedPoints:function(a){a||(a=5);for(var b=[],c=0;c<=a;c++)b.push(this.getPointAt(c/a));return b},getLength:function(){var a=this.getLengths();return a[a.length-1]},getLengths:function(a){a||
(a=this.__arcLengthDivisions?this.__arcLengthDivisions:200);if(this.cacheArcLengths&&this.cacheArcLengths.length===a+1&&!this.needsUpdate)return this.cacheArcLengths;this.needsUpdate=!1;var b=[],c,d=this.getPoint(0),e,f=0;b.push(0);for(e=1;e<=a;e++)c=this.getPoint(e/a),f+=c.distanceTo(d),b.push(f),d=c;return this.cacheArcLengths=b},updateArcLengths:function(){this.needsUpdate=!0;this.getLengths()},getUtoTmapping:function(a,b){var c=this.getLengths(),d=0,e=c.length,f;f=b?b:a*c[e-1];for(var g=0,h=e-
1,k;g<=h;)if(d=Math.floor(g+(h-g)/2),k=c[d]-f,0>k)g=d+1;else if(0<k)h=d-1;else{h=d;break}d=h;if(c[d]===f)return d/(e-1);g=c[d];return c=(d+(f-g)/(c[d+1]-g))/(e-1)},getTangent:function(a){var b=a-1E-4;a+=1E-4;0>b&&(b=0);1<a&&(a=1);b=this.getPoint(b);return this.getPoint(a).clone().sub(b).normalize()},getTangentAt:function(a){a=this.getUtoTmapping(a);return this.getTangent(a)}};
THREE.Curve.create=function(a,b){a.prototype=Object.create(THREE.Curve.prototype);a.prototype.constructor=a;a.prototype.getPoint=b;return a};THREE.CurvePath=function(){this.curves=[];this.autoClose=!1};
THREE.CurvePath.prototype=Object.assign(Object.create(THREE.Curve.prototype),{constructor:THREE.CurvePath,add:function(a){this.curves.push(a)},closePath:function(){var a=this.curves[0].getPoint(0),b=this.curves[this.curves.length-1].getPoint(1);a.equals(b)||this.curves.push(new THREE.LineCurve(b,a))},getPoint:function(a){var b=a*this.getLength(),c=this.getCurveLengths();for(a=0;a<c.length;){if(c[a]>=b)return b=c[a]-b,a=this.curves[a],c=a.getLength(),a.getPointAt(0===c?0:1-b/c);a++}return null},getLength:function(){var a=
this.getCurveLengths();return a[a.length-1]},updateArcLengths:function(){this.needsUpdate=!0;this.cacheLengths=null;this.getLengths()},getCurveLengths:function(){if(this.cacheLengths&&this.cacheLengths.length===this.curves.length)return this.cacheLengths;for(var a=[],b=0,c=0,d=this.curves.length;c<d;c++)b+=this.curves[c].getLength(),a.push(b);return this.cacheLengths=a},getSpacedPoints:function(a){a||(a=40);for(var b=[],c=0;c<=a;c++)b.push(this.getPoint(c/a));this.autoClose&&b.push(b[0]);return b},
getPoints:function(a){a=a||12;for(var b=[],c,d=0,e=this.curves;d<e.length;d++)for(var f=e[d],f=f.getPoints(f instanceof THREE.EllipseCurve?2*a:f instanceof THREE.LineCurve?1:f instanceof THREE.SplineCurve?a*f.points.length:a),g=0;g<f.length;g++){var h=f[g];c&&c.equals(h)||(b.push(h),c=h)}this.autoClose&&1<b.length&&!b[b.length-1].equals(b[0])&&b.push(b[0]);return b},createPointsGeometry:function(a){a=this.getPoints(a);return this.createGeometry(a)},createSpacedPointsGeometry:function(a){a=this.getSpacedPoints(a);
return this.createGeometry(a)},createGeometry:function(a){for(var b=new THREE.Geometry,c=0,d=a.length;c<d;c++){var e=a[c];b.vertices.push(new THREE.Vector3(e.x,e.y,e.z||0))}return b}});THREE.Font=function(a){this.data=a};
Object.assign(THREE.Font.prototype,{generateShapes:function(a,b,c){void 0===b&&(b=100);void 0===c&&(c=4);var d=this.data;a=String(a).split("");var e=b/d.resolution,f=0;b=[];for(var g=0;g<a.length;g++){var h;h=e;var k=f,l=d.glyphs[a[g]]||d.glyphs["?"];if(l){var m=new THREE.ShapePath,p=[],n=THREE.ShapeUtils.b2,q=THREE.ShapeUtils.b3,r=void 0,s=void 0,v=s=r=void 0,t=void 0,u=void 0,D=void 0,w=void 0,I=void 0,t=void 0;if(l.o)for(var z=l._cachedOutline||(l._cachedOutline=l.o.split(" ")),y=0,A=z.length;y<
A;)switch(z[y++]){case "m":r=z[y++]*h+k;s=z[y++]*h;m.moveTo(r,s);break;case "l":r=z[y++]*h+k;s=z[y++]*h;m.lineTo(r,s);break;case "q":r=z[y++]*h+k;s=z[y++]*h;u=z[y++]*h+k;D=z[y++]*h;m.quadraticCurveTo(u,D,r,s);if(t=p[p.length-1])for(var v=t.x,t=t.y,G=1;G<=c;G++){var B=G/c;n(B,v,u,r);n(B,t,D,s)}break;case "b":if(r=z[y++]*h+k,s=z[y++]*h,u=z[y++]*h+k,D=z[y++]*h,w=z[y++]*h+k,I=z[y++]*h,m.bezierCurveTo(u,D,w,I,r,s),t=p[p.length-1])for(v=t.x,t=t.y,G=1;G<=c;G++)B=G/c,q(B,v,u,w,r),q(B,t,D,I,s)}h={offset:l.ha*
h,path:m}}else h=void 0;f+=h.offset;b.push(h.path)}c=[];d=0;for(a=b.length;d<a;d++)Array.prototype.push.apply(c,b[d].toShapes());return c}});THREE.Path=function(a){THREE.CurvePath.call(this);this.currentPoint=new THREE.Vector2;a&&this.fromPoints(a)};
THREE.Path.prototype=Object.assign(Object.create(THREE.CurvePath.prototype),{constructor:THREE.Path,fromPoints:function(a){this.moveTo(a[0].x,a[0].y);for(var b=1,c=a.length;b<c;b++)this.lineTo(a[b].x,a[b].y)},moveTo:function(a,b){this.currentPoint.set(a,b)},lineTo:function(a,b){var c=new THREE.LineCurve(this.currentPoint.clone(),new THREE.Vector2(a,b));this.curves.push(c);this.currentPoint.set(a,b)},quadraticCurveTo:function(a,b,c,d){a=new THREE.QuadraticBezierCurve(this.currentPoint.clone(),new THREE.Vector2(a,
b),new THREE.Vector2(c,d));this.curves.push(a);this.currentPoint.set(c,d)},bezierCurveTo:function(a,b,c,d,e,f){a=new THREE.CubicBezierCurve(this.currentPoint.clone(),new THREE.Vector2(a,b),new THREE.Vector2(c,d),new THREE.Vector2(e,f));this.curves.push(a);this.currentPoint.set(e,f)},splineThru:function(a){var b=[this.currentPoint.clone()].concat(a),b=new THREE.SplineCurve(b);this.curves.push(b);this.currentPoint.copy(a[a.length-1])},arc:function(a,b,c,d,e,f){this.absarc(a+this.currentPoint.x,b+this.currentPoint.y,
c,d,e,f)},absarc:function(a,b,c,d,e,f){this.absellipse(a,b,c,c,d,e,f)},ellipse:function(a,b,c,d,e,f,g,h){this.absellipse(a+this.currentPoint.x,b+this.currentPoint.y,c,d,e,f,g,h)},absellipse:function(a,b,c,d,e,f,g,h){a=new THREE.EllipseCurve(a,b,c,d,e,f,g,h);0<this.curves.length&&(b=a.getPoint(0),b.equals(this.currentPoint)||this.lineTo(b.x,b.y));this.curves.push(a);a=a.getPoint(1);this.currentPoint.copy(a)}});THREE.ShapePath=function(){this.subPaths=[];this.currentPath=null};
THREE.ShapePath.prototype={moveTo:function(a,b){this.currentPath=new THREE.Path;this.subPaths.push(this.currentPath);this.currentPath.moveTo(a,b)},lineTo:function(a,b){this.currentPath.lineTo(a,b)},quadraticCurveTo:function(a,b,c,d){this.currentPath.quadraticCurveTo(a,b,c,d)},bezierCurveTo:function(a,b,c,d,e,f){this.currentPath.bezierCurveTo(a,b,c,d,e,f)},splineThru:function(a){this.currentPath.splineThru(a)},toShapes:function(a,b){function c(a){for(var b=[],c=0,d=a.length;c<d;c++){var e=a[c],f=new THREE.Shape;
f.curves=e.curves;b.push(f)}return b}function d(a,b){for(var c=b.length,d=!1,e=c-1,f=0;f<c;e=f++){var g=b[e],h=b[f],k=h.x-g.x,l=h.y-g.y;if(Math.abs(l)>Number.EPSILON){if(0>l&&(g=b[f],k=-k,h=b[e],l=-l),!(a.y<g.y||a.y>h.y))if(a.y===g.y){if(a.x===g.x)return!0}else{e=l*(a.x-g.x)-k*(a.y-g.y);if(0===e)return!0;0>e||(d=!d)}}else if(a.y===g.y&&(h.x<=a.x&&a.x<=g.x||g.x<=a.x&&a.x<=h.x))return!0}return d}var e=THREE.ShapeUtils.isClockWise,f=this.subPaths;if(0===f.length)return[];if(!0===b)return c(f);var g,
h,k,l=[];if(1===f.length)return h=f[0],k=new THREE.Shape,k.curves=h.curves,l.push(k),l;var m=!e(f[0].getPoints()),m=a?!m:m;k=[];var p=[],n=[],q=0,r;p[q]=void 0;n[q]=[];for(var s=0,v=f.length;s<v;s++)h=f[s],r=h.getPoints(),g=e(r),(g=a?!g:g)?(!m&&p[q]&&q++,p[q]={s:new THREE.Shape,p:r},p[q].s.curves=h.curves,m&&q++,n[q]=[]):n[q].push({h:h,p:r[0]});if(!p[0])return c(f);if(1<p.length){s=!1;h=[];e=0;for(f=p.length;e<f;e++)k[e]=[];e=0;for(f=p.length;e<f;e++)for(g=n[e],m=0;m<g.length;m++){q=g[m];r=!0;for(v=
0;v<p.length;v++)d(q.p,p[v].p)&&(e!==v&&h.push({froms:e,tos:v,hole:m}),r?(r=!1,k[v].push(q)):s=!0);r&&k[e].push(q)}0<h.length&&(s||(n=k))}s=0;for(e=p.length;s<e;s++)for(k=p[s].s,l.push(k),h=n[s],f=0,g=h.length;f<g;f++)k.holes.push(h[f].h);return l}};THREE.Shape=function(){THREE.Path.apply(this,arguments);this.holes=[]};
THREE.Shape.prototype=Object.assign(Object.create(THREE.Path.prototype),{constructor:THREE.Shape,extrude:function(a){return new THREE.ExtrudeGeometry(this,a)},makeGeometry:function(a){return new THREE.ShapeGeometry(this,a)},getPointsHoles:function(a){for(var b=[],c=0,d=this.holes.length;c<d;c++)b[c]=this.holes[c].getPoints(a);return b},extractAllPoints:function(a){return{shape:this.getPoints(a),holes:this.getPointsHoles(a)}},extractPoints:function(a){return this.extractAllPoints(a)}});
THREE.LineCurve=function(a,b){this.v1=a;this.v2=b};THREE.LineCurve.prototype=Object.create(THREE.Curve.prototype);THREE.LineCurve.prototype.constructor=THREE.LineCurve;THREE.LineCurve.prototype.getPoint=function(a){if(1===a)return this.v2.clone();var b=this.v2.clone().sub(this.v1);b.multiplyScalar(a).add(this.v1);return b};THREE.LineCurve.prototype.getPointAt=function(a){return this.getPoint(a)};THREE.LineCurve.prototype.getTangent=function(a){return this.v2.clone().sub(this.v1).normalize()};
THREE.QuadraticBezierCurve=function(a,b,c){this.v0=a;this.v1=b;this.v2=c};THREE.QuadraticBezierCurve.prototype=Object.create(THREE.Curve.prototype);THREE.QuadraticBezierCurve.prototype.constructor=THREE.QuadraticBezierCurve;THREE.QuadraticBezierCurve.prototype.getPoint=function(a){var b=THREE.ShapeUtils.b2;return new THREE.Vector2(b(a,this.v0.x,this.v1.x,this.v2.x),b(a,this.v0.y,this.v1.y,this.v2.y))};
THREE.QuadraticBezierCurve.prototype.getTangent=function(a){var b=THREE.CurveUtils.tangentQuadraticBezier;return(new THREE.Vector2(b(a,this.v0.x,this.v1.x,this.v2.x),b(a,this.v0.y,this.v1.y,this.v2.y))).normalize()};THREE.CubicBezierCurve=function(a,b,c,d){this.v0=a;this.v1=b;this.v2=c;this.v3=d};THREE.CubicBezierCurve.prototype=Object.create(THREE.Curve.prototype);THREE.CubicBezierCurve.prototype.constructor=THREE.CubicBezierCurve;
THREE.CubicBezierCurve.prototype.getPoint=function(a){var b=THREE.ShapeUtils.b3;return new THREE.Vector2(b(a,this.v0.x,this.v1.x,this.v2.x,this.v3.x),b(a,this.v0.y,this.v1.y,this.v2.y,this.v3.y))};THREE.CubicBezierCurve.prototype.getTangent=function(a){var b=THREE.CurveUtils.tangentCubicBezier;return(new THREE.Vector2(b(a,this.v0.x,this.v1.x,this.v2.x,this.v3.x),b(a,this.v0.y,this.v1.y,this.v2.y,this.v3.y))).normalize()};THREE.SplineCurve=function(a){this.points=void 0==a?[]:a};
THREE.SplineCurve.prototype=Object.create(THREE.Curve.prototype);THREE.SplineCurve.prototype.constructor=THREE.SplineCurve;THREE.SplineCurve.prototype.getPoint=function(a){var b=this.points;a*=b.length-1;var c=Math.floor(a);a-=c;var d=b[0===c?c:c-1],e=b[c],f=b[c>b.length-2?b.length-1:c+1],b=b[c>b.length-3?b.length-1:c+2],c=THREE.CurveUtils.interpolate;return new THREE.Vector2(c(d.x,e.x,f.x,b.x,a),c(d.y,e.y,f.y,b.y,a))};
THREE.EllipseCurve=function(a,b,c,d,e,f,g,h){this.aX=a;this.aY=b;this.xRadius=c;this.yRadius=d;this.aStartAngle=e;this.aEndAngle=f;this.aClockwise=g;this.aRotation=h||0};THREE.EllipseCurve.prototype=Object.create(THREE.Curve.prototype);THREE.EllipseCurve.prototype.constructor=THREE.EllipseCurve;
THREE.EllipseCurve.prototype.getPoint=function(a){for(var b=2*Math.PI,c=this.aEndAngle-this.aStartAngle,d=Math.abs(c)<Number.EPSILON;0>c;)c+=b;for(;c>b;)c-=b;c<Number.EPSILON&&(c=d?0:b);!0!==this.aClockwise||d||(c=c===b?-b:c-b);b=this.aStartAngle+a*c;a=this.aX+this.xRadius*Math.cos(b);var e=this.aY+this.yRadius*Math.sin(b);0!==this.aRotation&&(b=Math.cos(this.aRotation),c=Math.sin(this.aRotation),d=a-this.aX,e-=this.aY,a=d*b-e*c+this.aX,e=d*c+e*b+this.aY);return new THREE.Vector2(a,e)};
THREE.ArcCurve=function(a,b,c,d,e,f){THREE.EllipseCurve.call(this,a,b,c,c,d,e,f)};THREE.ArcCurve.prototype=Object.create(THREE.EllipseCurve.prototype);THREE.ArcCurve.prototype.constructor=THREE.ArcCurve;THREE.LineCurve3=THREE.Curve.create(function(a,b){this.v1=a;this.v2=b},function(a){if(1===a)return this.v2.clone();var b=new THREE.Vector3;b.subVectors(this.v2,this.v1);b.multiplyScalar(a);b.add(this.v1);return b});
THREE.QuadraticBezierCurve3=THREE.Curve.create(function(a,b,c){this.v0=a;this.v1=b;this.v2=c},function(a){var b=THREE.ShapeUtils.b2;return new THREE.Vector3(b(a,this.v0.x,this.v1.x,this.v2.x),b(a,this.v0.y,this.v1.y,this.v2.y),b(a,this.v0.z,this.v1.z,this.v2.z))});
THREE.CubicBezierCurve3=THREE.Curve.create(function(a,b,c,d){this.v0=a;this.v1=b;this.v2=c;this.v3=d},function(a){var b=THREE.ShapeUtils.b3;return new THREE.Vector3(b(a,this.v0.x,this.v1.x,this.v2.x,this.v3.x),b(a,this.v0.y,this.v1.y,this.v2.y,this.v3.y),b(a,this.v0.z,this.v1.z,this.v2.z,this.v3.z))});
THREE.SplineCurve3=THREE.Curve.create(function(a){console.warn("THREE.SplineCurve3 will be deprecated. Please use THREE.CatmullRomCurve3");this.points=void 0==a?[]:a},function(a){var b=this.points;a*=b.length-1;var c=Math.floor(a);a-=c;var d=b[0==c?c:c-1],e=b[c],f=b[c>b.length-2?b.length-1:c+1],b=b[c>b.length-3?b.length-1:c+2],c=THREE.CurveUtils.interpolate;return new THREE.Vector3(c(d.x,e.x,f.x,b.x,a),c(d.y,e.y,f.y,b.y,a),c(d.z,e.z,f.z,b.z,a))});
THREE.CatmullRomCurve3=function(){function a(){}var b=new THREE.Vector3,c=new a,d=new a,e=new a;a.prototype.init=function(a,b,c,d){this.c0=a;this.c1=c;this.c2=-3*a+3*b-2*c-d;this.c3=2*a-2*b+c+d};a.prototype.initNonuniformCatmullRom=function(a,b,c,d,e,m,p){a=((b-a)/e-(c-a)/(e+m)+(c-b)/m)*m;d=((c-b)/m-(d-b)/(m+p)+(d-c)/p)*m;this.init(b,c,a,d)};a.prototype.initCatmullRom=function(a,b,c,d,e){this.init(b,c,e*(c-a),e*(d-b))};a.prototype.calc=function(a){var b=a*a;return this.c0+this.c1*a+this.c2*b+this.c3*
b*a};return THREE.Curve.create(function(a){this.points=a||[];this.closed=!1},function(a){var g=this.points,h,k;k=g.length;2>k&&console.log("duh, you need at least 2 points");a*=k-(this.closed?0:1);h=Math.floor(a);a-=h;this.closed?h+=0<h?0:(Math.floor(Math.abs(h)/g.length)+1)*g.length:0===a&&h===k-1&&(h=k-2,a=1);var l,m,p;this.closed||0<h?l=g[(h-1)%k]:(b.subVectors(g[0],g[1]).add(g[0]),l=b);m=g[h%k];p=g[(h+1)%k];this.closed||h+2<k?g=g[(h+2)%k]:(b.subVectors(g[k-1],g[k-2]).add(g[k-1]),g=b);if(void 0===
this.type||"centripetal"===this.type||"chordal"===this.type){var n="chordal"===this.type?.5:.25;k=Math.pow(l.distanceToSquared(m),n);h=Math.pow(m.distanceToSquared(p),n);n=Math.pow(p.distanceToSquared(g),n);1E-4>h&&(h=1);1E-4>k&&(k=h);1E-4>n&&(n=h);c.initNonuniformCatmullRom(l.x,m.x,p.x,g.x,k,h,n);d.initNonuniformCatmullRom(l.y,m.y,p.y,g.y,k,h,n);e.initNonuniformCatmullRom(l.z,m.z,p.z,g.z,k,h,n)}else"catmullrom"===this.type&&(k=void 0!==this.tension?this.tension:.5,c.initCatmullRom(l.x,m.x,p.x,g.x,
k),d.initCatmullRom(l.y,m.y,p.y,g.y,k),e.initCatmullRom(l.z,m.z,p.z,g.z,k));return new THREE.Vector3(c.calc(a),d.calc(a),e.calc(a))})}();THREE.ClosedSplineCurve3=function(a){console.warn("THREE.ClosedSplineCurve3 has been deprecated. Please use THREE.CatmullRomCurve3.");THREE.CatmullRomCurve3.call(this,a);this.type="catmullrom";this.closed=!0};THREE.ClosedSplineCurve3.prototype=Object.create(THREE.CatmullRomCurve3.prototype);
THREE.BoxGeometry=function(a,b,c,d,e,f){THREE.Geometry.call(this);this.type="BoxGeometry";this.parameters={width:a,height:b,depth:c,widthSegments:d,heightSegments:e,depthSegments:f};this.fromBufferGeometry(new THREE.BoxBufferGeometry(a,b,c,d,e,f));this.mergeVertices()};THREE.BoxGeometry.prototype=Object.create(THREE.Geometry.prototype);THREE.BoxGeometry.prototype.constructor=THREE.BoxGeometry;THREE.CubeGeometry=THREE.BoxGeometry;
THREE.BoxBufferGeometry=function(a,b,c,d,e,f){function g(a,b,c,d,e,f,g,k,l,J,P){var K=f/l,H=g/J,M=f/2,O=g/2,N=k/2;g=l+1;for(var Q=J+1,C=f=0,L=new THREE.Vector3,E=0;E<Q;E++)for(var $=E*H-O,T=0;T<g;T++)L[a]=(T*K-M)*d,L[b]=$*e,L[c]=N,p[r]=L.x,p[r+1]=L.y,p[r+2]=L.z,L[a]=0,L[b]=0,L[c]=0<k?1:-1,n[r]=L.x,n[r+1]=L.y,n[r+2]=L.z,q[s]=T/l,q[s+1]=1-E/J,r+=3,s+=2,f+=1;for(E=0;E<J;E++)for(T=0;T<l;T++)a=t+T+g*(E+1),b=t+(T+1)+g*(E+1),c=t+(T+1)+g*E,m[v]=t+T+g*E,m[v+1]=a,m[v+2]=c,m[v+3]=a,m[v+4]=b,m[v+5]=c,v+=6,C+=
6;h.addGroup(u,C,P);u+=C;t+=f}THREE.BufferGeometry.call(this);this.type="BoxBufferGeometry";this.parameters={width:a,height:b,depth:c,widthSegments:d,heightSegments:e,depthSegments:f};var h=this;d=Math.floor(d)||1;e=Math.floor(e)||1;f=Math.floor(f)||1;var k=function(a,b,c){a=0+(a+1)*(b+1)*2+(a+1)*(c+1)*2;return a+=(c+1)*(b+1)*2}(d,e,f),l=function(a,b,c){a=0+a*b*2+a*c*2;a+=c*b*2;return 6*a}(d,e,f),m=new (65535<l?Uint32Array:Uint16Array)(l),p=new Float32Array(3*k),n=new Float32Array(3*k),q=new Float32Array(2*
k),r=0,s=0,v=0,t=0,u=0;g("z","y","x",-1,-1,c,b,a,f,e,0);g("z","y","x",1,-1,c,b,-a,f,e,1);g("x","z","y",1,1,a,c,b,d,f,2);g("x","z","y",1,-1,a,c,-b,d,f,3);g("x","y","z",1,-1,a,b,c,d,e,4);g("x","y","z",-1,-1,a,b,-c,d,e,5);this.setIndex(new THREE.BufferAttribute(m,1));this.addAttribute("position",new THREE.BufferAttribute(p,3));this.addAttribute("normal",new THREE.BufferAttribute(n,3));this.addAttribute("uv",new THREE.BufferAttribute(q,2))};THREE.BoxBufferGeometry.prototype=Object.create(THREE.BufferGeometry.prototype);
THREE.BoxBufferGeometry.prototype.constructor=THREE.BoxBufferGeometry;THREE.CircleGeometry=function(a,b,c,d){THREE.Geometry.call(this);this.type="CircleGeometry";this.parameters={radius:a,segments:b,thetaStart:c,thetaLength:d};this.fromBufferGeometry(new THREE.CircleBufferGeometry(a,b,c,d))};THREE.CircleGeometry.prototype=Object.create(THREE.Geometry.prototype);THREE.CircleGeometry.prototype.constructor=THREE.CircleGeometry;
THREE.CircleBufferGeometry=function(a,b,c,d){THREE.BufferGeometry.call(this);this.type="CircleBufferGeometry";this.parameters={radius:a,segments:b,thetaStart:c,thetaLength:d};a=a||50;b=void 0!==b?Math.max(3,b):8;c=void 0!==c?c:0;d=void 0!==d?d:2*Math.PI;var e=b+2,f=new Float32Array(3*e),g=new Float32Array(3*e),e=new Float32Array(2*e);g[2]=1;e[0]=.5;e[1]=.5;for(var h=0,k=3,l=2;h<=b;h++,k+=3,l+=2){var m=c+h/b*d;f[k]=a*Math.cos(m);f[k+1]=a*Math.sin(m);g[k+2]=1;e[l]=(f[k]/a+1)/2;e[l+1]=(f[k+1]/a+1)/2}c=
[];for(k=1;k<=b;k++)c.push(k,k+1,0);this.setIndex(new THREE.BufferAttribute(new Uint16Array(c),1));this.addAttribute("position",new THREE.BufferAttribute(f,3));this.addAttribute("normal",new THREE.BufferAttribute(g,3));this.addAttribute("uv",new THREE.BufferAttribute(e,2));this.boundingSphere=new THREE.Sphere(new THREE.Vector3,a)};THREE.CircleBufferGeometry.prototype=Object.create(THREE.BufferGeometry.prototype);THREE.CircleBufferGeometry.prototype.constructor=THREE.CircleBufferGeometry;
THREE.CylinderBufferGeometry=function(a,b,c,d,e,f,g,h){function k(c){var e,f,k,m=new THREE.Vector2,n=new THREE.Vector3,p=0,D=!0===c?a:b,K=!0===c?1:-1;f=t;for(e=1;e<=d;e++)r.setXYZ(t,0,w*K,0),s.setXYZ(t,0,K,0),m.x=.5,m.y=.5,v.setXY(t,m.x,m.y),t++;k=t;for(e=0;e<=d;e++){var H=e/d*h+g,M=Math.cos(H),H=Math.sin(H);n.x=D*H;n.y=w*K;n.z=D*M;r.setXYZ(t,n.x,n.y,n.z);s.setXYZ(t,0,K,0);m.x=.5*M+.5;m.y=.5*H*K+.5;v.setXY(t,m.x,m.y);t++}for(e=0;e<d;e++)m=f+e,n=k+e,!0===c?(q.setX(u,n),u++,q.setX(u,n+1)):(q.setX(u,
n+1),u++,q.setX(u,n)),u++,q.setX(u,m),u++,p+=3;l.addGroup(I,p,!0===c?1:2);I+=p}THREE.BufferGeometry.call(this);this.type="CylinderBufferGeometry";this.parameters={radiusTop:a,radiusBottom:b,height:c,radialSegments:d,heightSegments:e,openEnded:f,thetaStart:g,thetaLength:h};var l=this;a=void 0!==a?a:20;b=void 0!==b?b:20;c=void 0!==c?c:100;d=Math.floor(d)||8;e=Math.floor(e)||1;f=void 0!==f?f:!1;g=void 0!==g?g:0;h=void 0!==h?h:2*Math.PI;var m=0;!1===f&&(0<a&&m++,0<b&&m++);var p=function(){var a=(d+1)*
(e+1);!1===f&&(a+=(d+1)*m+d*m);return a}(),n=function(){var a=d*e*6;!1===f&&(a+=d*m*3);return a}(),q=new THREE.BufferAttribute(new (65535<n?Uint32Array:Uint16Array)(n),1),r=new THREE.BufferAttribute(new Float32Array(3*p),3),s=new THREE.BufferAttribute(new Float32Array(3*p),3),v=new THREE.BufferAttribute(new Float32Array(2*p),2),t=0,u=0,D=[],w=c/2,I=0;(function(){var f,k,m=new THREE.Vector3,n=new THREE.Vector3,p=0,F=(b-a)/c;for(k=0;k<=e;k++){var J=[],P=k/e,K=P*(b-a)+a;for(f=0;f<=d;f++){var H=f/d;n.x=
K*Math.sin(H*h+g);n.y=-P*c+w;n.z=K*Math.cos(H*h+g);r.setXYZ(t,n.x,n.y,n.z);m.copy(n);if(0===a&&0===k||0===b&&k===e)m.x=Math.sin(H*h+g),m.z=Math.cos(H*h+g);m.setY(Math.sqrt(m.x*m.x+m.z*m.z)*F).normalize();s.setXYZ(t,m.x,m.y,m.z);v.setXY(t,H,1-P);J.push(t);t++}D.push(J)}for(f=0;f<d;f++)for(k=0;k<e;k++)m=D[k+1][f],n=D[k+1][f+1],F=D[k][f+1],q.setX(u,D[k][f]),u++,q.setX(u,m),u++,q.setX(u,F),u++,q.setX(u,m),u++,q.setX(u,n),u++,q.setX(u,F),u++,p+=6;l.addGroup(I,p,0);I+=p})();!1===f&&(0<a&&k(!0),0<b&&k(!1));
this.setIndex(q);this.addAttribute("position",r);this.addAttribute("normal",s);this.addAttribute("uv",v)};THREE.CylinderBufferGeometry.prototype=Object.create(THREE.BufferGeometry.prototype);THREE.CylinderBufferGeometry.prototype.constructor=THREE.CylinderBufferGeometry;
THREE.CylinderGeometry=function(a,b,c,d,e,f,g,h){THREE.Geometry.call(this);this.type="CylinderGeometry";this.parameters={radiusTop:a,radiusBottom:b,height:c,radialSegments:d,heightSegments:e,openEnded:f,thetaStart:g,thetaLength:h};this.fromBufferGeometry(new THREE.CylinderBufferGeometry(a,b,c,d,e,f,g,h));this.mergeVertices()};THREE.CylinderGeometry.prototype=Object.create(THREE.Geometry.prototype);THREE.CylinderGeometry.prototype.constructor=THREE.CylinderGeometry;
THREE.ConeBufferGeometry=function(a,b,c,d,e,f,g){THREE.CylinderBufferGeometry.call(this,0,a,b,c,d,e,f,g);this.type="ConeBufferGeometry";this.parameters={radius:a,height:b,radialSegments:c,heightSegments:d,thetaStart:f,thetaLength:g}};THREE.ConeBufferGeometry.prototype=Object.create(THREE.BufferGeometry.prototype);THREE.ConeBufferGeometry.prototype.constructor=THREE.ConeBufferGeometry;
THREE.ConeGeometry=function(a,b,c,d,e,f,g){THREE.CylinderGeometry.call(this,0,a,b,c,d,e,f,g);this.type="ConeGeometry";this.parameters={radius:a,height:b,radialSegments:c,heightSegments:d,openEnded:e,thetaStart:f,thetaLength:g}};THREE.ConeGeometry.prototype=Object.create(THREE.CylinderGeometry.prototype);THREE.ConeGeometry.prototype.constructor=THREE.ConeGeometry;
THREE.EdgesGeometry=function(a,b){function c(a,b){return a-b}THREE.BufferGeometry.call(this);var d=Math.cos(THREE.Math.DEG2RAD*(void 0!==b?b:1)),e=[0,0],f={},g=["a","b","c"],h;a instanceof THREE.BufferGeometry?(h=new THREE.Geometry,h.fromBufferGeometry(a)):h=a.clone();h.mergeVertices();h.computeFaceNormals();var k=h.vertices;h=h.faces;for(var l=0,m=h.length;l<m;l++)for(var p=h[l],n=0;3>n;n++){e[0]=p[g[n]];e[1]=p[g[(n+1)%3]];e.sort(c);var q=e.toString();void 0===f[q]?f[q]={vert1:e[0],vert2:e[1],face1:l,
face2:void 0}:f[q].face2=l}e=[];for(q in f)if(g=f[q],void 0===g.face2||h[g.face1].normal.dot(h[g.face2].normal)<=d)l=k[g.vert1],e.push(l.x),e.push(l.y),e.push(l.z),l=k[g.vert2],e.push(l.x),e.push(l.y),e.push(l.z);this.addAttribute("position",new THREE.BufferAttribute(new Float32Array(e),3))};THREE.EdgesGeometry.prototype=Object.create(THREE.BufferGeometry.prototype);THREE.EdgesGeometry.prototype.constructor=THREE.EdgesGeometry;
THREE.ExtrudeGeometry=function(a,b){"undefined"!==typeof a&&(THREE.Geometry.call(this),this.type="ExtrudeGeometry",a=Array.isArray(a)?a:[a],this.addShapeList(a,b),this.computeFaceNormals())};THREE.ExtrudeGeometry.prototype=Object.create(THREE.Geometry.prototype);THREE.ExtrudeGeometry.prototype.constructor=THREE.ExtrudeGeometry;THREE.ExtrudeGeometry.prototype.addShapeList=function(a,b){for(var c=a.length,d=0;d<c;d++)this.addShape(a[d],b)};
THREE.ExtrudeGeometry.prototype.addShape=function(a,b){function c(a,b,c){b||console.error("THREE.ExtrudeGeometry: vec does not exist");return b.clone().multiplyScalar(c).add(a)}function d(a,b,c){var d=1,d=a.x-b.x,e=a.y-b.y,f=c.x-a.x,g=c.y-a.y,h=d*d+e*e;if(Math.abs(d*g-e*f)>Number.EPSILON){var k=Math.sqrt(h),l=Math.sqrt(f*f+g*g),h=b.x-e/k;b=b.y+d/k;f=((c.x-g/l-h)*g-(c.y+f/l-b)*f)/(d*g-e*f);c=h+d*f-a.x;a=b+e*f-a.y;d=c*c+a*a;if(2>=d)return new THREE.Vector2(c,a);d=Math.sqrt(d/2)}else a=!1,d>Number.EPSILON?
f>Number.EPSILON&&(a=!0):d<-Number.EPSILON?f<-Number.EPSILON&&(a=!0):Math.sign(e)===Math.sign(g)&&(a=!0),a?(c=-e,a=d,d=Math.sqrt(h)):(c=d,a=e,d=Math.sqrt(h/2));return new THREE.Vector2(c/d,a/d)}function e(a,b){var c,d;for(E=a.length;0<=--E;){c=E;d=E-1;0>d&&(d=a.length-1);for(var e=0,f=q+2*m,e=0;e<f;e++){var g=Q*e,h=Q*(e+1),k=b+c+g,g=b+d+g,l=b+d+h,h=b+c+h,k=k+B,g=g+B,l=l+B,h=h+B;G.faces.push(new THREE.Face3(k,g,h,null,null,1));G.faces.push(new THREE.Face3(g,l,h,null,null,1));k=t.generateSideWallUV(G,
k,g,l,h);G.faceVertexUvs[0].push([k[0],k[1],k[3]]);G.faceVertexUvs[0].push([k[1],k[2],k[3]])}}}function f(a,b,c){G.vertices.push(new THREE.Vector3(a,b,c))}function g(a,b,c){a+=B;b+=B;c+=B;G.faces.push(new THREE.Face3(a,b,c,null,null,0));a=t.generateTopUV(G,a,b,c);G.faceVertexUvs[0].push(a)}var h=void 0!==b.amount?b.amount:100,k=void 0!==b.bevelThickness?b.bevelThickness:6,l=void 0!==b.bevelSize?b.bevelSize:k-2,m=void 0!==b.bevelSegments?b.bevelSegments:3,p=void 0!==b.bevelEnabled?b.bevelEnabled:!0,
n=void 0!==b.curveSegments?b.curveSegments:12,q=void 0!==b.steps?b.steps:1,r=b.extrudePath,s,v=!1,t=void 0!==b.UVGenerator?b.UVGenerator:THREE.ExtrudeGeometry.WorldUVGenerator,u,D,w,I;r&&(s=r.getSpacedPoints(q),v=!0,p=!1,u=void 0!==b.frames?b.frames:new THREE.TubeGeometry.FrenetFrames(r,q,!1),D=new THREE.Vector3,w=new THREE.Vector3,I=new THREE.Vector3);p||(l=k=m=0);var z,y,A,G=this,B=this.vertices.length,r=a.extractPoints(n),n=r.shape,F=r.holes;if(r=!THREE.ShapeUtils.isClockWise(n)){n=n.reverse();
y=0;for(A=F.length;y<A;y++)z=F[y],THREE.ShapeUtils.isClockWise(z)&&(F[y]=z.reverse());r=!1}var J=THREE.ShapeUtils.triangulateShape(n,F),P=n;y=0;for(A=F.length;y<A;y++)z=F[y],n=n.concat(z);var K,H,M,O,N,Q=n.length,C,L=J.length,r=[],E=0;M=P.length;K=M-1;for(H=E+1;E<M;E++,K++,H++)K===M&&(K=0),H===M&&(H=0),r[E]=d(P[E],P[K],P[H]);var $=[],T,X=r.concat();y=0;for(A=F.length;y<A;y++){z=F[y];T=[];E=0;M=z.length;K=M-1;for(H=E+1;E<M;E++,K++,H++)K===M&&(K=0),H===M&&(H=0),T[E]=d(z[E],z[K],z[H]);$.push(T);X=X.concat(T)}for(K=
0;K<m;K++){M=K/m;O=k*(1-M);H=l*Math.sin(M*Math.PI/2);E=0;for(M=P.length;E<M;E++)N=c(P[E],r[E],H),f(N.x,N.y,-O);y=0;for(A=F.length;y<A;y++)for(z=F[y],T=$[y],E=0,M=z.length;E<M;E++)N=c(z[E],T[E],H),f(N.x,N.y,-O)}H=l;for(E=0;E<Q;E++)N=p?c(n[E],X[E],H):n[E],v?(w.copy(u.normals[0]).multiplyScalar(N.x),D.copy(u.binormals[0]).multiplyScalar(N.y),I.copy(s[0]).add(w).add(D),f(I.x,I.y,I.z)):f(N.x,N.y,0);for(M=1;M<=q;M++)for(E=0;E<Q;E++)N=p?c(n[E],X[E],H):n[E],v?(w.copy(u.normals[M]).multiplyScalar(N.x),D.copy(u.binormals[M]).multiplyScalar(N.y),
I.copy(s[M]).add(w).add(D),f(I.x,I.y,I.z)):f(N.x,N.y,h/q*M);for(K=m-1;0<=K;K--){M=K/m;O=k*(1-M);H=l*Math.sin(M*Math.PI/2);E=0;for(M=P.length;E<M;E++)N=c(P[E],r[E],H),f(N.x,N.y,h+O);y=0;for(A=F.length;y<A;y++)for(z=F[y],T=$[y],E=0,M=z.length;E<M;E++)N=c(z[E],T[E],H),v?f(N.x,N.y+s[q-1].y,s[q-1].x+O):f(N.x,N.y,h+O)}(function(){if(p){var a;a=0*Q;for(E=0;E<L;E++)C=J[E],g(C[2]+a,C[1]+a,C[0]+a);a=q+2*m;a*=Q;for(E=0;E<L;E++)C=J[E],g(C[0]+a,C[1]+a,C[2]+a)}else{for(E=0;E<L;E++)C=J[E],g(C[2],C[1],C[0]);for(E=
0;E<L;E++)C=J[E],g(C[0]+Q*q,C[1]+Q*q,C[2]+Q*q)}})();(function(){var a=0;e(P,a);a+=P.length;y=0;for(A=F.length;y<A;y++)z=F[y],e(z,a),a+=z.length})()};
THREE.ExtrudeGeometry.WorldUVGenerator={generateTopUV:function(a,b,c,d){a=a.vertices;b=a[b];c=a[c];d=a[d];return[new THREE.Vector2(b.x,b.y),new THREE.Vector2(c.x,c.y),new THREE.Vector2(d.x,d.y)]},generateSideWallUV:function(a,b,c,d,e){a=a.vertices;b=a[b];c=a[c];d=a[d];e=a[e];return.01>Math.abs(b.y-c.y)?[new THREE.Vector2(b.x,1-b.z),new THREE.Vector2(c.x,1-c.z),new THREE.Vector2(d.x,1-d.z),new THREE.Vector2(e.x,1-e.z)]:[new THREE.Vector2(b.y,1-b.z),new THREE.Vector2(c.y,1-c.z),new THREE.Vector2(d.y,
1-d.z),new THREE.Vector2(e.y,1-e.z)]}};THREE.ShapeGeometry=function(a,b){THREE.Geometry.call(this);this.type="ShapeGeometry";!1===Array.isArray(a)&&(a=[a]);this.addShapeList(a,b);this.computeFaceNormals()};THREE.ShapeGeometry.prototype=Object.create(THREE.Geometry.prototype);THREE.ShapeGeometry.prototype.constructor=THREE.ShapeGeometry;THREE.ShapeGeometry.prototype.addShapeList=function(a,b){for(var c=0,d=a.length;c<d;c++)this.addShape(a[c],b);return this};
THREE.ShapeGeometry.prototype.addShape=function(a,b){void 0===b&&(b={});var c=b.material,d=void 0===b.UVGenerator?THREE.ExtrudeGeometry.WorldUVGenerator:b.UVGenerator,e,f,g,h=this.vertices.length;e=a.extractPoints(void 0!==b.curveSegments?b.curveSegments:12);var k=e.shape,l=e.holes;if(!THREE.ShapeUtils.isClockWise(k))for(k=k.reverse(),e=0,f=l.length;e<f;e++)g=l[e],THREE.ShapeUtils.isClockWise(g)&&(l[e]=g.reverse());var m=THREE.ShapeUtils.triangulateShape(k,l);e=0;for(f=l.length;e<f;e++)g=l[e],k=k.concat(g);
l=k.length;f=m.length;for(e=0;e<l;e++)g=k[e],this.vertices.push(new THREE.Vector3(g.x,g.y,0));for(e=0;e<f;e++)l=m[e],k=l[0]+h,g=l[1]+h,l=l[2]+h,this.faces.push(new THREE.Face3(k,g,l,null,null,c)),this.faceVertexUvs[0].push(d.generateTopUV(this,k,g,l))};
THREE.LatheBufferGeometry=function(a,b,c,d){THREE.BufferGeometry.call(this);this.type="LatheBufferGeometry";this.parameters={points:a,segments:b,phiStart:c,phiLength:d};b=Math.floor(b)||12;c=c||0;d=d||2*Math.PI;d=THREE.Math.clamp(d,0,2*Math.PI);for(var e=(b+1)*a.length,f=b*a.length*6,g=new THREE.BufferAttribute(new (65535<f?Uint32Array:Uint16Array)(f),1),h=new THREE.BufferAttribute(new Float32Array(3*e),3),k=new THREE.BufferAttribute(new Float32Array(2*e),2),l=0,m=0,p=1/b,n=new THREE.Vector3,q=new THREE.Vector2,
e=0;e<=b;e++)for(var f=c+e*p*d,r=Math.sin(f),s=Math.cos(f),f=0;f<=a.length-1;f++)n.x=a[f].x*r,n.y=a[f].y,n.z=a[f].x*s,h.setXYZ(l,n.x,n.y,n.z),q.x=e/b,q.y=f/(a.length-1),k.setXY(l,q.x,q.y),l++;for(e=0;e<b;e++)for(f=0;f<a.length-1;f++)c=f+e*a.length,l=c+a.length,p=c+a.length+1,n=c+1,g.setX(m,c),m++,g.setX(m,l),m++,g.setX(m,n),m++,g.setX(m,l),m++,g.setX(m,p),m++,g.setX(m,n),m++;this.setIndex(g);this.addAttribute("position",h);this.addAttribute("uv",k);this.computeVertexNormals();if(d===2*Math.PI)for(d=
this.attributes.normal.array,g=new THREE.Vector3,h=new THREE.Vector3,k=new THREE.Vector3,c=b*a.length*3,f=e=0;e<a.length;e++,f+=3)g.x=d[f+0],g.y=d[f+1],g.z=d[f+2],h.x=d[c+f+0],h.y=d[c+f+1],h.z=d[c+f+2],k.addVectors(g,h).normalize(),d[f+0]=d[c+f+0]=k.x,d[f+1]=d[c+f+1]=k.y,d[f+2]=d[c+f+2]=k.z};THREE.LatheBufferGeometry.prototype=Object.create(THREE.BufferGeometry.prototype);THREE.LatheBufferGeometry.prototype.constructor=THREE.LatheBufferGeometry;
THREE.LatheGeometry=function(a,b,c,d){THREE.Geometry.call(this);this.type="LatheGeometry";this.parameters={points:a,segments:b,phiStart:c,phiLength:d};this.fromBufferGeometry(new THREE.LatheBufferGeometry(a,b,c,d));this.mergeVertices()};THREE.LatheGeometry.prototype=Object.create(THREE.Geometry.prototype);THREE.LatheGeometry.prototype.constructor=THREE.LatheGeometry;
THREE.PlaneGeometry=function(a,b,c,d){THREE.Geometry.call(this);this.type="PlaneGeometry";this.parameters={width:a,height:b,widthSegments:c,heightSegments:d};this.fromBufferGeometry(new THREE.PlaneBufferGeometry(a,b,c,d))};THREE.PlaneGeometry.prototype=Object.create(THREE.Geometry.prototype);THREE.PlaneGeometry.prototype.constructor=THREE.PlaneGeometry;
THREE.PlaneBufferGeometry=function(a,b,c,d){THREE.BufferGeometry.call(this);this.type="PlaneBufferGeometry";this.parameters={width:a,height:b,widthSegments:c,heightSegments:d};var e=a/2,f=b/2;c=Math.floor(c)||1;d=Math.floor(d)||1;var g=c+1,h=d+1,k=a/c,l=b/d;b=new Float32Array(g*h*3);a=new Float32Array(g*h*3);for(var m=new Float32Array(g*h*2),p=0,n=0,q=0;q<h;q++)for(var r=q*l-f,s=0;s<g;s++)b[p]=s*k-e,b[p+1]=-r,a[p+2]=1,m[n]=s/c,m[n+1]=1-q/d,p+=3,n+=2;p=0;e=new (65535<b.length/3?Uint32Array:Uint16Array)(c*
d*6);for(q=0;q<d;q++)for(s=0;s<c;s++)f=s+g*(q+1),h=s+1+g*(q+1),k=s+1+g*q,e[p]=s+g*q,e[p+1]=f,e[p+2]=k,e[p+3]=f,e[p+4]=h,e[p+5]=k,p+=6;this.setIndex(new THREE.BufferAttribute(e,1));this.addAttribute("position",new THREE.BufferAttribute(b,3));this.addAttribute("normal",new THREE.BufferAttribute(a,3));this.addAttribute("uv",new THREE.BufferAttribute(m,2))};THREE.PlaneBufferGeometry.prototype=Object.create(THREE.BufferGeometry.prototype);THREE.PlaneBufferGeometry.prototype.constructor=THREE.PlaneBufferGeometry;
THREE.RingBufferGeometry=function(a,b,c,d,e,f){THREE.BufferGeometry.call(this);this.type="RingBufferGeometry";this.parameters={innerRadius:a,outerRadius:b,thetaSegments:c,phiSegments:d,thetaStart:e,thetaLength:f};a=a||20;b=b||50;e=void 0!==e?e:0;f=void 0!==f?f:2*Math.PI;c=void 0!==c?Math.max(3,c):8;d=void 0!==d?Math.max(1,d):1;var g=(c+1)*(d+1),h=c*d*6,h=new THREE.BufferAttribute(new (65535<h?Uint32Array:Uint16Array)(h),1),k=new THREE.BufferAttribute(new Float32Array(3*g),3),l=new THREE.BufferAttribute(new Float32Array(3*
g),3),g=new THREE.BufferAttribute(new Float32Array(2*g),2),m=0,p=0,n,q=a,r=(b-a)/d,s=new THREE.Vector3,v=new THREE.Vector2,t;for(a=0;a<=d;a++){for(t=0;t<=c;t++)n=e+t/c*f,s.x=q*Math.cos(n),s.y=q*Math.sin(n),k.setXYZ(m,s.x,s.y,s.z),l.setXYZ(m,0,0,1),v.x=(s.x/b+1)/2,v.y=(s.y/b+1)/2,g.setXY(m,v.x,v.y),m++;q+=r}for(a=0;a<d;a++)for(b=a*(c+1),t=0;t<c;t++)e=n=t+b,f=n+c+1,m=n+c+2,n+=1,h.setX(p,e),p++,h.setX(p,f),p++,h.setX(p,m),p++,h.setX(p,e),p++,h.setX(p,m),p++,h.setX(p,n),p++;this.setIndex(h);this.addAttribute("position",
k);this.addAttribute("normal",l);this.addAttribute("uv",g)};THREE.RingBufferGeometry.prototype=Object.create(THREE.BufferGeometry.prototype);THREE.RingBufferGeometry.prototype.constructor=THREE.RingBufferGeometry;THREE.RingGeometry=function(a,b,c,d,e,f){THREE.Geometry.call(this);this.type="RingGeometry";this.parameters={innerRadius:a,outerRadius:b,thetaSegments:c,phiSegments:d,thetaStart:e,thetaLength:f};this.fromBufferGeometry(new THREE.RingBufferGeometry(a,b,c,d,e,f))};
THREE.RingGeometry.prototype=Object.create(THREE.Geometry.prototype);THREE.RingGeometry.prototype.constructor=THREE.RingGeometry;THREE.SphereGeometry=function(a,b,c,d,e,f,g){THREE.Geometry.call(this);this.type="SphereGeometry";this.parameters={radius:a,widthSegments:b,heightSegments:c,phiStart:d,phiLength:e,thetaStart:f,thetaLength:g};this.fromBufferGeometry(new THREE.SphereBufferGeometry(a,b,c,d,e,f,g))};THREE.SphereGeometry.prototype=Object.create(THREE.Geometry.prototype);
THREE.SphereGeometry.prototype.constructor=THREE.SphereGeometry;
THREE.SphereBufferGeometry=function(a,b,c,d,e,f,g){THREE.BufferGeometry.call(this);this.type="SphereBufferGeometry";this.parameters={radius:a,widthSegments:b,heightSegments:c,phiStart:d,phiLength:e,thetaStart:f,thetaLength:g};a=a||50;b=Math.max(3,Math.floor(b)||8);c=Math.max(2,Math.floor(c)||6);d=void 0!==d?d:0;e=void 0!==e?e:2*Math.PI;f=void 0!==f?f:0;g=void 0!==g?g:Math.PI;for(var h=f+g,k=(b+1)*(c+1),l=new THREE.BufferAttribute(new Float32Array(3*k),3),m=new THREE.BufferAttribute(new Float32Array(3*
k),3),k=new THREE.BufferAttribute(new Float32Array(2*k),2),p=0,n=[],q=new THREE.Vector3,r=0;r<=c;r++){for(var s=[],v=r/c,t=0;t<=b;t++){var u=t/b,D=-a*Math.cos(d+u*e)*Math.sin(f+v*g),w=a*Math.cos(f+v*g),I=a*Math.sin(d+u*e)*Math.sin(f+v*g);q.set(D,w,I).normalize();l.setXYZ(p,D,w,I);m.setXYZ(p,q.x,q.y,q.z);k.setXY(p,u,1-v);s.push(p);p++}n.push(s)}d=[];for(r=0;r<c;r++)for(t=0;t<b;t++)e=n[r][t+1],g=n[r][t],p=n[r+1][t],q=n[r+1][t+1],(0!==r||0<f)&&d.push(e,g,q),(r!==c-1||h<Math.PI)&&d.push(g,p,q);this.setIndex(new (65535<
l.count?THREE.Uint32Attribute:THREE.Uint16Attribute)(d,1));this.addAttribute("position",l);this.addAttribute("normal",m);this.addAttribute("uv",k);this.boundingSphere=new THREE.Sphere(new THREE.Vector3,a)};THREE.SphereBufferGeometry.prototype=Object.create(THREE.BufferGeometry.prototype);THREE.SphereBufferGeometry.prototype.constructor=THREE.SphereBufferGeometry;
THREE.TextGeometry=function(a,b){b=b||{};var c=b.font;if(!1===c instanceof THREE.Font)return console.error("THREE.TextGeometry: font parameter is not an instance of THREE.Font."),new THREE.Geometry;c=c.generateShapes(a,b.size,b.curveSegments);b.amount=void 0!==b.height?b.height:50;void 0===b.bevelThickness&&(b.bevelThickness=10);void 0===b.bevelSize&&(b.bevelSize=8);void 0===b.bevelEnabled&&(b.bevelEnabled=!1);THREE.ExtrudeGeometry.call(this,c,b);this.type="TextGeometry"};
THREE.TextGeometry.prototype=Object.create(THREE.ExtrudeGeometry.prototype);THREE.TextGeometry.prototype.constructor=THREE.TextGeometry;
THREE.TorusBufferGeometry=function(a,b,c,d,e){THREE.BufferGeometry.call(this);this.type="TorusBufferGeometry";this.parameters={radius:a,tube:b,radialSegments:c,tubularSegments:d,arc:e};a=a||100;b=b||40;c=Math.floor(c)||8;d=Math.floor(d)||6;e=e||2*Math.PI;var f=(c+1)*(d+1),g=c*d*6,g=new (65535<g?Uint32Array:Uint16Array)(g),h=new Float32Array(3*f),k=new Float32Array(3*f),f=new Float32Array(2*f),l=0,m=0,p=0,n=new THREE.Vector3,q=new THREE.Vector3,r=new THREE.Vector3,s,v;for(s=0;s<=c;s++)for(v=0;v<=d;v++){var t=
v/d*e,u=s/c*Math.PI*2;q.x=(a+b*Math.cos(u))*Math.cos(t);q.y=(a+b*Math.cos(u))*Math.sin(t);q.z=b*Math.sin(u);h[l]=q.x;h[l+1]=q.y;h[l+2]=q.z;n.x=a*Math.cos(t);n.y=a*Math.sin(t);r.subVectors(q,n).normalize();k[l]=r.x;k[l+1]=r.y;k[l+2]=r.z;f[m]=v/d;f[m+1]=s/c;l+=3;m+=2}for(s=1;s<=c;s++)for(v=1;v<=d;v++)a=(d+1)*(s-1)+v-1,b=(d+1)*(s-1)+v,e=(d+1)*s+v,g[p]=(d+1)*s+v-1,g[p+1]=a,g[p+2]=e,g[p+3]=a,g[p+4]=b,g[p+5]=e,p+=6;this.setIndex(new THREE.BufferAttribute(g,1));this.addAttribute("position",new THREE.BufferAttribute(h,
3));this.addAttribute("normal",new THREE.BufferAttribute(k,3));this.addAttribute("uv",new THREE.BufferAttribute(f,2))};THREE.TorusBufferGeometry.prototype=Object.create(THREE.BufferGeometry.prototype);THREE.TorusBufferGeometry.prototype.constructor=THREE.TorusBufferGeometry;
THREE.TorusGeometry=function(a,b,c,d,e){THREE.Geometry.call(this);this.type="TorusGeometry";this.parameters={radius:a,tube:b,radialSegments:c,tubularSegments:d,arc:e};this.fromBufferGeometry(new THREE.TorusBufferGeometry(a,b,c,d,e))};THREE.TorusGeometry.prototype=Object.create(THREE.Geometry.prototype);THREE.TorusGeometry.prototype.constructor=THREE.TorusGeometry;
THREE.TorusKnotBufferGeometry=function(a,b,c,d,e,f){function g(a,b,c,d,e){var f=Math.cos(a),g=Math.sin(a);a*=c/b;b=Math.cos(a);e.x=d*(2+b)*.5*f;e.y=d*(2+b)*g*.5;e.z=d*Math.sin(a)*.5}THREE.BufferGeometry.call(this);this.type="TorusKnotBufferGeometry";this.parameters={radius:a,tube:b,tubularSegments:c,radialSegments:d,p:e,q:f};a=a||100;b=b||40;c=Math.floor(c)||64;d=Math.floor(d)||8;e=e||2;f=f||3;var h=(d+1)*(c+1),k=d*c*6,k=new THREE.BufferAttribute(new (65535<k?Uint32Array:Uint16Array)(k),1),l=new THREE.BufferAttribute(new Float32Array(3*
h),3),m=new THREE.BufferAttribute(new Float32Array(3*h),3),h=new THREE.BufferAttribute(new Float32Array(2*h),2),p,n,q=0,r=0,s=new THREE.Vector3,v=new THREE.Vector3,t=new THREE.Vector2,u=new THREE.Vector3,D=new THREE.Vector3,w=new THREE.Vector3,I=new THREE.Vector3,z=new THREE.Vector3;for(p=0;p<=c;++p)for(n=p/c*e*Math.PI*2,g(n,e,f,a,u),g(n+.01,e,f,a,D),I.subVectors(D,u),z.addVectors(D,u),w.crossVectors(I,z),z.crossVectors(w,I),w.normalize(),z.normalize(),n=0;n<=d;++n){var y=n/d*Math.PI*2,A=-b*Math.cos(y),
y=b*Math.sin(y);s.x=u.x+(A*z.x+y*w.x);s.y=u.y+(A*z.y+y*w.y);s.z=u.z+(A*z.z+y*w.z);l.setXYZ(q,s.x,s.y,s.z);v.subVectors(s,u).normalize();m.setXYZ(q,v.x,v.y,v.z);t.x=p/c;t.y=n/d;h.setXY(q,t.x,t.y);q++}for(n=1;n<=c;n++)for(p=1;p<=d;p++)a=(d+1)*n+(p-1),b=(d+1)*n+p,e=(d+1)*(n-1)+p,k.setX(r,(d+1)*(n-1)+(p-1)),r++,k.setX(r,a),r++,k.setX(r,e),r++,k.setX(r,a),r++,k.setX(r,b),r++,k.setX(r,e),r++;this.setIndex(k);this.addAttribute("position",l);this.addAttribute("normal",m);this.addAttribute("uv",h)};
THREE.TorusKnotBufferGeometry.prototype=Object.create(THREE.BufferGeometry.prototype);THREE.TorusKnotBufferGeometry.prototype.constructor=THREE.TorusKnotBufferGeometry;
THREE.TorusKnotGeometry=function(a,b,c,d,e,f,g){THREE.Geometry.call(this);this.type="TorusKnotGeometry";this.parameters={radius:a,tube:b,tubularSegments:c,radialSegments:d,p:e,q:f};void 0!==g&&console.warn("THREE.TorusKnotGeometry: heightScale has been deprecated. Use .scale( x, y, z ) instead.");this.fromBufferGeometry(new THREE.TorusKnotBufferGeometry(a,b,c,d,e,f));this.mergeVertices()};THREE.TorusKnotGeometry.prototype=Object.create(THREE.Geometry.prototype);
THREE.TorusKnotGeometry.prototype.constructor=THREE.TorusKnotGeometry;
THREE.TubeGeometry=function(a,b,c,d,e,f){THREE.Geometry.call(this);this.type="TubeGeometry";this.parameters={path:a,segments:b,radius:c,radialSegments:d,closed:e,taper:f};b=b||64;c=c||1;d=d||8;e=e||!1;f=f||THREE.TubeGeometry.NoTaper;var g=[],h,k,l=b+1,m,p,n,q,r,s=new THREE.Vector3,v,t,u;v=new THREE.TubeGeometry.FrenetFrames(a,b,e);t=v.normals;u=v.binormals;this.tangents=v.tangents;this.normals=t;this.binormals=u;for(v=0;v<l;v++)for(g[v]=[],m=v/(l-1),r=a.getPointAt(m),h=t[v],k=u[v],n=c*f(m),m=0;m<
d;m++)p=m/d*2*Math.PI,q=-n*Math.cos(p),p=n*Math.sin(p),s.copy(r),s.x+=q*h.x+p*k.x,s.y+=q*h.y+p*k.y,s.z+=q*h.z+p*k.z,g[v][m]=this.vertices.push(new THREE.Vector3(s.x,s.y,s.z))-1;for(v=0;v<b;v++)for(m=0;m<d;m++)f=e?(v+1)%b:v+1,l=(m+1)%d,a=g[v][m],c=g[f][m],f=g[f][l],l=g[v][l],s=new THREE.Vector2(v/b,m/d),t=new THREE.Vector2((v+1)/b,m/d),u=new THREE.Vector2((v+1)/b,(m+1)/d),h=new THREE.Vector2(v/b,(m+1)/d),this.faces.push(new THREE.Face3(a,c,l)),this.faceVertexUvs[0].push([s,t,h]),this.faces.push(new THREE.Face3(c,
f,l)),this.faceVertexUvs[0].push([t.clone(),u,h.clone()]);this.computeFaceNormals();this.computeVertexNormals()};THREE.TubeGeometry.prototype=Object.create(THREE.Geometry.prototype);THREE.TubeGeometry.prototype.constructor=THREE.TubeGeometry;THREE.TubeGeometry.NoTaper=function(a){return 1};THREE.TubeGeometry.SinusoidalTaper=function(a){return Math.sin(Math.PI*a)};
THREE.TubeGeometry.FrenetFrames=function(a,b,c){var d=new THREE.Vector3,e=[],f=[],g=[],h=new THREE.Vector3,k=new THREE.Matrix4;b+=1;var l,m,p;this.tangents=e;this.normals=f;this.binormals=g;for(l=0;l<b;l++)m=l/(b-1),e[l]=a.getTangentAt(m),e[l].normalize();f[0]=new THREE.Vector3;g[0]=new THREE.Vector3;a=Number.MAX_VALUE;l=Math.abs(e[0].x);m=Math.abs(e[0].y);p=Math.abs(e[0].z);l<=a&&(a=l,d.set(1,0,0));m<=a&&(a=m,d.set(0,1,0));p<=a&&d.set(0,0,1);h.crossVectors(e[0],d).normalize();f[0].crossVectors(e[0],
h);g[0].crossVectors(e[0],f[0]);for(l=1;l<b;l++)f[l]=f[l-1].clone(),g[l]=g[l-1].clone(),h.crossVectors(e[l-1],e[l]),h.length()>Number.EPSILON&&(h.normalize(),d=Math.acos(THREE.Math.clamp(e[l-1].dot(e[l]),-1,1)),f[l].applyMatrix4(k.makeRotationAxis(h,d))),g[l].crossVectors(e[l],f[l]);if(c)for(d=Math.acos(THREE.Math.clamp(f[0].dot(f[b-1]),-1,1)),d/=b-1,0<e[0].dot(h.crossVectors(f[0],f[b-1]))&&(d=-d),l=1;l<b;l++)f[l].applyMatrix4(k.makeRotationAxis(e[l],d*l)),g[l].crossVectors(e[l],f[l])};
THREE.PolyhedronGeometry=function(a,b,c,d){function e(a){var b=a.normalize().clone();b.index=k.vertices.push(b)-1;var c=Math.atan2(a.z,-a.x)/2/Math.PI+.5;a=Math.atan2(-a.y,Math.sqrt(a.x*a.x+a.z*a.z))/Math.PI+.5;b.uv=new THREE.Vector2(c,1-a);return b}function f(a,b,c){var d=new THREE.Face3(a.index,b.index,c.index,[a.clone(),b.clone(),c.clone()]);k.faces.push(d);v.copy(a).add(b).add(c).divideScalar(3);d=Math.atan2(v.z,-v.x);k.faceVertexUvs[0].push([h(a.uv,a,d),h(b.uv,b,d),h(c.uv,c,d)])}function g(a,
b){for(var c=Math.pow(2,b),d=e(k.vertices[a.a]),g=e(k.vertices[a.b]),h=e(k.vertices[a.c]),l=[],m=0;m<=c;m++){l[m]=[];for(var n=e(d.clone().lerp(h,m/c)),p=e(g.clone().lerp(h,m/c)),q=c-m,r=0;r<=q;r++)l[m][r]=0===r&&m===c?n:e(n.clone().lerp(p,r/q))}for(m=0;m<c;m++)for(r=0;r<2*(c-m)-1;r++)d=Math.floor(r/2),0===r%2?f(l[m][d+1],l[m+1][d],l[m][d]):f(l[m][d+1],l[m+1][d+1],l[m+1][d])}function h(a,b,c){0>c&&1===a.x&&(a=new THREE.Vector2(a.x-1,a.y));0===b.x&&0===b.z&&(a=new THREE.Vector2(c/2/Math.PI+.5,a.y));
return a.clone()}THREE.Geometry.call(this);this.type="PolyhedronGeometry";this.parameters={vertices:a,indices:b,radius:c,detail:d};c=c||1;d=d||0;for(var k=this,l=0,m=a.length;l<m;l+=3)e(new THREE.Vector3(a[l],a[l+1],a[l+2]));a=this.vertices;for(var p=[],n=l=0,m=b.length;l<m;l+=3,n++){var q=a[b[l]],r=a[b[l+1]],s=a[b[l+2]];p[n]=new THREE.Face3(q.index,r.index,s.index,[q.clone(),r.clone(),s.clone()])}for(var v=new THREE.Vector3,l=0,m=p.length;l<m;l++)g(p[l],d);l=0;for(m=this.faceVertexUvs[0].length;l<
m;l++)b=this.faceVertexUvs[0][l],d=b[0].x,a=b[1].x,p=b[2].x,n=Math.max(d,a,p),q=Math.min(d,a,p),.9<n&&.1>q&&(.2>d&&(b[0].x+=1),.2>a&&(b[1].x+=1),.2>p&&(b[2].x+=1));l=0;for(m=this.vertices.length;l<m;l++)this.vertices[l].multiplyScalar(c);this.mergeVertices();this.computeFaceNormals();this.boundingSphere=new THREE.Sphere(new THREE.Vector3,c)};THREE.PolyhedronGeometry.prototype=Object.create(THREE.Geometry.prototype);THREE.PolyhedronGeometry.prototype.constructor=THREE.PolyhedronGeometry;
THREE.DodecahedronGeometry=function(a,b){var c=(1+Math.sqrt(5))/2,d=1/c;THREE.PolyhedronGeometry.call(this,[-1,-1,-1,-1,-1,1,-1,1,-1,-1,1,1,1,-1,-1,1,-1,1,1,1,-1,1,1,1,0,-d,-c,0,-d,c,0,d,-c,0,d,c,-d,-c,0,-d,c,0,d,-c,0,d,c,0,-c,0,-d,c,0,-d,-c,0,d,c,0,d],[3,11,7,3,7,15,3,15,13,7,19,17,7,17,6,7,6,15,17,4,8,17,8,10,17,10,6,8,0,16,8,16,2,8,2,10,0,12,1,0,1,18,0,18,16,6,10,2,6,2,13,6,13,15,2,16,18,2,18,3,2,3,13,18,1,9,18,9,11,18,11,3,4,14,12,4,12,0,4,0,8,11,9,5,11,5,19,11,19,7,19,5,14,19,14,4,19,4,17,1,
12,14,1,14,5,1,5,9],a,b);this.type="DodecahedronGeometry";this.parameters={radius:a,detail:b}};THREE.DodecahedronGeometry.prototype=Object.create(THREE.PolyhedronGeometry.prototype);THREE.DodecahedronGeometry.prototype.constructor=THREE.DodecahedronGeometry;
THREE.IcosahedronGeometry=function(a,b){var c=(1+Math.sqrt(5))/2;THREE.PolyhedronGeometry.call(this,[-1,c,0,1,c,0,-1,-c,0,1,-c,0,0,-1,c,0,1,c,0,-1,-c,0,1,-c,c,0,-1,c,0,1,-c,0,-1,-c,0,1],[0,11,5,0,5,1,0,1,7,0,7,10,0,10,11,1,5,9,5,11,4,11,10,2,10,7,6,7,1,8,3,9,4,3,4,2,3,2,6,3,6,8,3,8,9,4,9,5,2,4,11,6,2,10,8,6,7,9,8,1],a,b);this.type="IcosahedronGeometry";this.parameters={radius:a,detail:b}};THREE.IcosahedronGeometry.prototype=Object.create(THREE.PolyhedronGeometry.prototype);
THREE.IcosahedronGeometry.prototype.constructor=THREE.IcosahedronGeometry;THREE.OctahedronGeometry=function(a,b){THREE.PolyhedronGeometry.call(this,[1,0,0,-1,0,0,0,1,0,0,-1,0,0,0,1,0,0,-1],[0,2,4,0,4,3,0,3,5,0,5,2,1,2,5,1,5,3,1,3,4,1,4,2],a,b);this.type="OctahedronGeometry";this.parameters={radius:a,detail:b}};THREE.OctahedronGeometry.prototype=Object.create(THREE.PolyhedronGeometry.prototype);THREE.OctahedronGeometry.prototype.constructor=THREE.OctahedronGeometry;
THREE.TetrahedronGeometry=function(a,b){THREE.PolyhedronGeometry.call(this,[1,1,1,-1,-1,1,-1,1,-1,1,-1,-1],[2,1,0,0,3,2,1,3,0,2,3,1],a,b);this.type="TetrahedronGeometry";this.parameters={radius:a,detail:b}};THREE.TetrahedronGeometry.prototype=Object.create(THREE.PolyhedronGeometry.prototype);THREE.TetrahedronGeometry.prototype.constructor=THREE.TetrahedronGeometry;
THREE.ParametricGeometry=function(a,b,c){THREE.Geometry.call(this);this.type="ParametricGeometry";this.parameters={func:a,slices:b,stacks:c};var d=this.vertices,e=this.faces,f=this.faceVertexUvs[0],g,h,k,l,m=b+1;for(g=0;g<=c;g++)for(l=g/c,h=0;h<=b;h++)k=h/b,k=a(k,l),d.push(k);var p,n,q,r;for(g=0;g<c;g++)for(h=0;h<b;h++)a=g*m+h,d=g*m+h+1,l=(g+1)*m+h+1,k=(g+1)*m+h,p=new THREE.Vector2(h/b,g/c),n=new THREE.Vector2((h+1)/b,g/c),q=new THREE.Vector2((h+1)/b,(g+1)/c),r=new THREE.Vector2(h/b,(g+1)/c),e.push(new THREE.Face3(a,
d,k)),f.push([p,n,r]),e.push(new THREE.Face3(d,l,k)),f.push([n.clone(),q,r.clone()]);this.computeFaceNormals();this.computeVertexNormals()};THREE.ParametricGeometry.prototype=Object.create(THREE.Geometry.prototype);THREE.ParametricGeometry.prototype.constructor=THREE.ParametricGeometry;
THREE.WireframeGeometry=function(a){function b(a,b){return a-b}THREE.BufferGeometry.call(this);var c=[0,0],d={},e=["a","b","c"];if(a instanceof THREE.Geometry){var f=a.vertices,g=a.faces,h=0,k=new Uint32Array(6*g.length);a=0;for(var l=g.length;a<l;a++)for(var m=g[a],p=0;3>p;p++){c[0]=m[e[p]];c[1]=m[e[(p+1)%3]];c.sort(b);var n=c.toString();void 0===d[n]&&(k[2*h]=c[0],k[2*h+1]=c[1],d[n]=!0,h++)}c=new Float32Array(6*h);a=0;for(l=h;a<l;a++)for(p=0;2>p;p++)d=f[k[2*a+p]],h=6*a+3*p,c[h+0]=d.x,c[h+1]=d.y,
c[h+2]=d.z;this.addAttribute("position",new THREE.BufferAttribute(c,3))}else if(a instanceof THREE.BufferGeometry){if(null!==a.index){l=a.index.array;f=a.attributes.position;e=a.groups;h=0;0===e.length&&a.addGroup(0,l.length);k=new Uint32Array(2*l.length);g=0;for(m=e.length;g<m;++g){a=e[g];p=a.start;n=a.count;a=p;for(var q=p+n;a<q;a+=3)for(p=0;3>p;p++)c[0]=l[a+p],c[1]=l[a+(p+1)%3],c.sort(b),n=c.toString(),void 0===d[n]&&(k[2*h]=c[0],k[2*h+1]=c[1],d[n]=!0,h++)}c=new Float32Array(6*h);a=0;for(l=h;a<
l;a++)for(p=0;2>p;p++)h=6*a+3*p,d=k[2*a+p],c[h+0]=f.getX(d),c[h+1]=f.getY(d),c[h+2]=f.getZ(d)}else for(f=a.attributes.position.array,h=f.length/3,k=h/3,c=new Float32Array(6*h),a=0,l=k;a<l;a++)for(p=0;3>p;p++)h=18*a+6*p,k=9*a+3*p,c[h+0]=f[k],c[h+1]=f[k+1],c[h+2]=f[k+2],d=9*a+(p+1)%3*3,c[h+3]=f[d],c[h+4]=f[d+1],c[h+5]=f[d+2];this.addAttribute("position",new THREE.BufferAttribute(c,3))}};THREE.WireframeGeometry.prototype=Object.create(THREE.BufferGeometry.prototype);
THREE.WireframeGeometry.prototype.constructor=THREE.WireframeGeometry;THREE.AxisHelper=function(a){a=a||1;var b=new Float32Array([0,0,0,a,0,0,0,0,0,0,a,0,0,0,0,0,0,a]),c=new Float32Array([1,0,0,1,.6,0,0,1,0,.6,1,0,0,0,1,0,.6,1]);a=new THREE.BufferGeometry;a.addAttribute("position",new THREE.BufferAttribute(b,3));a.addAttribute("color",new THREE.BufferAttribute(c,3));b=new THREE.LineBasicMaterial({vertexColors:THREE.VertexColors});THREE.LineSegments.call(this,a,b)};THREE.AxisHelper.prototype=Object.create(THREE.LineSegments.prototype);
THREE.AxisHelper.prototype.constructor=THREE.AxisHelper;
THREE.ArrowHelper=function(){var a=new THREE.BufferGeometry;a.addAttribute("position",new THREE.Float32Attribute([0,0,0,0,1,0],3));var b=new THREE.CylinderBufferGeometry(0,.5,1,5,1);b.translate(0,-.5,0);return function(c,d,e,f,g,h){THREE.Object3D.call(this);void 0===f&&(f=16776960);void 0===e&&(e=1);void 0===g&&(g=.2*e);void 0===h&&(h=.2*g);this.position.copy(d);this.line=new THREE.Line(a,new THREE.LineBasicMaterial({color:f}));this.line.matrixAutoUpdate=!1;this.add(this.line);this.cone=new THREE.Mesh(b,
new THREE.MeshBasicMaterial({color:f}));this.cone.matrixAutoUpdate=!1;this.add(this.cone);this.setDirection(c);this.setLength(e,g,h)}}();THREE.ArrowHelper.prototype=Object.create(THREE.Object3D.prototype);THREE.ArrowHelper.prototype.constructor=THREE.ArrowHelper;
THREE.ArrowHelper.prototype.setDirection=function(){var a=new THREE.Vector3,b;return function(c){.99999<c.y?this.quaternion.set(0,0,0,1):-.99999>c.y?this.quaternion.set(1,0,0,0):(a.set(c.z,0,-c.x).normalize(),b=Math.acos(c.y),this.quaternion.setFromAxisAngle(a,b))}}();THREE.ArrowHelper.prototype.setLength=function(a,b,c){void 0===b&&(b=.2*a);void 0===c&&(c=.2*b);this.line.scale.set(1,Math.max(0,a-b),1);this.line.updateMatrix();this.cone.scale.set(c,b,c);this.cone.position.y=a;this.cone.updateMatrix()};
THREE.ArrowHelper.prototype.setColor=function(a){this.line.material.color.copy(a);this.cone.material.color.copy(a)};THREE.BoxHelper=function(a,b){void 0===b&&(b=16776960);var c=new Uint16Array([0,1,1,2,2,3,3,0,4,5,5,6,6,7,7,4,0,4,1,5,2,6,3,7]),d=new Float32Array(24),e=new THREE.BufferGeometry;e.setIndex(new THREE.BufferAttribute(c,1));e.addAttribute("position",new THREE.BufferAttribute(d,3));THREE.LineSegments.call(this,e,new THREE.LineBasicMaterial({color:b}));void 0!==a&&this.update(a)};
THREE.BoxHelper.prototype=Object.create(THREE.LineSegments.prototype);THREE.BoxHelper.prototype.constructor=THREE.BoxHelper;
THREE.BoxHelper.prototype.update=function(){var a=new THREE.Box3;return function(b){b instanceof THREE.Box3?a.copy(b):a.setFromObject(b);if(!a.isEmpty()){b=a.min;var c=a.max,d=this.geometry.attributes.position,e=d.array;e[0]=c.x;e[1]=c.y;e[2]=c.z;e[3]=b.x;e[4]=c.y;e[5]=c.z;e[6]=b.x;e[7]=b.y;e[8]=c.z;e[9]=c.x;e[10]=b.y;e[11]=c.z;e[12]=c.x;e[13]=c.y;e[14]=b.z;e[15]=b.x;e[16]=c.y;e[17]=b.z;e[18]=b.x;e[19]=b.y;e[20]=b.z;e[21]=c.x;e[22]=b.y;e[23]=b.z;d.needsUpdate=!0;this.geometry.computeBoundingSphere()}}}();
THREE.BoundingBoxHelper=function(a,b){var c=void 0!==b?b:8947848;this.object=a;this.box=new THREE.Box3;THREE.Mesh.call(this,new THREE.BoxGeometry(1,1,1),new THREE.MeshBasicMaterial({color:c,wireframe:!0}))};THREE.BoundingBoxHelper.prototype=Object.create(THREE.Mesh.prototype);THREE.BoundingBoxHelper.prototype.constructor=THREE.BoundingBoxHelper;THREE.BoundingBoxHelper.prototype.update=function(){this.box.setFromObject(this.object);this.box.size(this.scale);this.box.center(this.position)};
THREE.CameraHelper=function(a){function b(a,b,d){c(a,d);c(b,d)}function c(a,b){d.vertices.push(new THREE.Vector3);d.colors.push(new THREE.Color(b));void 0===f[a]&&(f[a]=[]);f[a].push(d.vertices.length-1)}var d=new THREE.Geometry,e=new THREE.LineBasicMaterial({color:16777215,vertexColors:THREE.FaceColors}),f={};b("n1","n2",16755200);b("n2","n4",16755200);b("n4","n3",16755200);b("n3","n1",16755200);b("f1","f2",16755200);b("f2","f4",16755200);b("f4","f3",16755200);b("f3","f1",16755200);b("n1","f1",16755200);
b("n2","f2",16755200);b("n3","f3",16755200);b("n4","f4",16755200);b("p","n1",16711680);b("p","n2",16711680);b("p","n3",16711680);b("p","n4",16711680);b("u1","u2",43775);b("u2","u3",43775);b("u3","u1",43775);b("c","t",16777215);b("p","c",3355443);b("cn1","cn2",3355443);b("cn3","cn4",3355443);b("cf1","cf2",3355443);b("cf3","cf4",3355443);THREE.LineSegments.call(this,d,e);this.camera=a;this.camera.updateProjectionMatrix&&this.camera.updateProjectionMatrix();this.matrix=a.matrixWorld;this.matrixAutoUpdate=
!1;this.pointMap=f;this.update()};THREE.CameraHelper.prototype=Object.create(THREE.LineSegments.prototype);THREE.CameraHelper.prototype.constructor=THREE.CameraHelper;
THREE.CameraHelper.prototype.update=function(){function a(a,g,h,k){d.set(g,h,k).unproject(e);a=c[a];if(void 0!==a)for(g=0,h=a.length;g<h;g++)b.vertices[a[g]].copy(d)}var b,c,d=new THREE.Vector3,e=new THREE.Camera;return function(){b=this.geometry;c=this.pointMap;e.projectionMatrix.copy(this.camera.projectionMatrix);a("c",0,0,-1);a("t",0,0,1);a("n1",-1,-1,-1);a("n2",1,-1,-1);a("n3",-1,1,-1);a("n4",1,1,-1);a("f1",-1,-1,1);a("f2",1,-1,1);a("f3",-1,1,1);a("f4",1,1,1);a("u1",.7,1.1,-1);a("u2",-.7,1.1,
-1);a("u3",0,2,-1);a("cf1",-1,0,1);a("cf2",1,0,1);a("cf3",0,-1,1);a("cf4",0,1,1);a("cn1",-1,0,-1);a("cn2",1,0,-1);a("cn3",0,-1,-1);a("cn4",0,1,-1);b.verticesNeedUpdate=!0}}();
THREE.DirectionalLightHelper=function(a,b){THREE.Object3D.call(this);this.light=a;this.light.updateMatrixWorld();this.matrix=a.matrixWorld;this.matrixAutoUpdate=!1;void 0===b&&(b=1);var c=new THREE.BufferGeometry;c.addAttribute("position",new THREE.Float32Attribute([-b,b,0,b,b,0,b,-b,0,-b,-b,0,-b,b,0],3));var d=new THREE.LineBasicMaterial({fog:!1});this.add(new THREE.Line(c,d));c=new THREE.BufferGeometry;c.addAttribute("position",new THREE.Float32Attribute([0,0,0,0,0,1],3));this.add(new THREE.Line(c,
d));this.update()};THREE.DirectionalLightHelper.prototype=Object.create(THREE.Object3D.prototype);THREE.DirectionalLightHelper.prototype.constructor=THREE.DirectionalLightHelper;THREE.DirectionalLightHelper.prototype.dispose=function(){var a=this.children[0],b=this.children[1];a.geometry.dispose();a.material.dispose();b.geometry.dispose();b.material.dispose()};
THREE.DirectionalLightHelper.prototype.update=function(){var a=new THREE.Vector3,b=new THREE.Vector3,c=new THREE.Vector3;return function(){a.setFromMatrixPosition(this.light.matrixWorld);b.setFromMatrixPosition(this.light.target.matrixWorld);c.subVectors(b,a);var d=this.children[0],e=this.children[1];d.lookAt(c);d.material.color.copy(this.light.color).multiplyScalar(this.light.intensity);e.lookAt(c);e.scale.z=c.length()}}();
THREE.EdgesHelper=function(a,b,c){b=void 0!==b?b:16777215;THREE.LineSegments.call(this,new THREE.EdgesGeometry(a.geometry,c),new THREE.LineBasicMaterial({color:b}));this.matrix=a.matrixWorld;this.matrixAutoUpdate=!1};THREE.EdgesHelper.prototype=Object.create(THREE.LineSegments.prototype);THREE.EdgesHelper.prototype.constructor=THREE.EdgesHelper;
THREE.FaceNormalsHelper=function(a,b,c,d){this.object=a;this.size=void 0!==b?b:1;a=void 0!==c?c:16776960;d=void 0!==d?d:1;b=0;c=this.object.geometry;c instanceof THREE.Geometry?b=c.faces.length:console.warn("THREE.FaceNormalsHelper: only THREE.Geometry is supported. Use THREE.VertexNormalsHelper, instead.");c=new THREE.BufferGeometry;b=new THREE.Float32Attribute(6*b,3);c.addAttribute("position",b);THREE.LineSegments.call(this,c,new THREE.LineBasicMaterial({color:a,linewidth:d}));this.matrixAutoUpdate=
!1;this.update()};THREE.FaceNormalsHelper.prototype=Object.create(THREE.LineSegments.prototype);THREE.FaceNormalsHelper.prototype.constructor=THREE.FaceNormalsHelper;
THREE.FaceNormalsHelper.prototype.update=function(){var a=new THREE.Vector3,b=new THREE.Vector3,c=new THREE.Matrix3;return function(){this.object.updateMatrixWorld(!0);c.getNormalMatrix(this.object.matrixWorld);for(var d=this.object.matrixWorld,e=this.geometry.attributes.position,f=this.object.geometry,g=f.vertices,f=f.faces,h=0,k=0,l=f.length;k<l;k++){var m=f[k],p=m.normal;a.copy(g[m.a]).add(g[m.b]).add(g[m.c]).divideScalar(3).applyMatrix4(d);b.copy(p).applyMatrix3(c).normalize().multiplyScalar(this.size).add(a);
e.setXYZ(h,a.x,a.y,a.z);h+=1;e.setXYZ(h,b.x,b.y,b.z);h+=1}e.needsUpdate=!0;return this}}();
THREE.GridHelper=function(a,b,c,d){b=b||1;c=new THREE.Color(void 0!==c?c:4473924);d=new THREE.Color(void 0!==d?d:8947848);for(var e=b/2,f=2*a/b,g=[],h=[],k=0,l=0,m=-a;k<=b;k++,m+=f){g.push(-a,0,m,a,0,m);g.push(m,0,-a,m,0,a);var p=k===e?c:d;p.toArray(h,l);l+=3;p.toArray(h,l);l+=3;p.toArray(h,l);l+=3;p.toArray(h,l);l+=3}a=new THREE.BufferGeometry;a.addAttribute("position",new THREE.Float32Attribute(g,3));a.addAttribute("color",new THREE.Float32Attribute(h,3));g=new THREE.LineBasicMaterial({vertexColors:THREE.VertexColors});
THREE.LineSegments.call(this,a,g)};THREE.GridHelper.prototype=Object.create(THREE.LineSegments.prototype);THREE.GridHelper.prototype.constructor=THREE.GridHelper;THREE.GridHelper.prototype.setColors=function(){console.error("THREE.GridHelper: setColors() has been deprecated, pass them in the constructor instead.")};
THREE.HemisphereLightHelper=function(a,b){THREE.Object3D.call(this);this.light=a;this.light.updateMatrixWorld();this.matrix=a.matrixWorld;this.matrixAutoUpdate=!1;this.colors=[new THREE.Color,new THREE.Color];var c=new THREE.SphereGeometry(b,4,2);c.rotateX(-Math.PI/2);for(var d=0;8>d;d++)c.faces[d].color=this.colors[4>d?0:1];d=new THREE.MeshBasicMaterial({vertexColors:THREE.FaceColors,wireframe:!0});this.lightSphere=new THREE.Mesh(c,d);this.add(this.lightSphere);this.update()};
THREE.HemisphereLightHelper.prototype=Object.create(THREE.Object3D.prototype);THREE.HemisphereLightHelper.prototype.constructor=THREE.HemisphereLightHelper;THREE.HemisphereLightHelper.prototype.dispose=function(){this.lightSphere.geometry.dispose();this.lightSphere.material.dispose()};
THREE.HemisphereLightHelper.prototype.update=function(){var a=new THREE.Vector3;return function(){this.colors[0].copy(this.light.color).multiplyScalar(this.light.intensity);this.colors[1].copy(this.light.groundColor).multiplyScalar(this.light.intensity);this.lightSphere.lookAt(a.setFromMatrixPosition(this.light.matrixWorld).negate());this.lightSphere.geometry.colorsNeedUpdate=!0}}();
THREE.PointLightHelper=function(a,b){this.light=a;this.light.updateMatrixWorld();var c=new THREE.SphereBufferGeometry(b,4,2),d=new THREE.MeshBasicMaterial({wireframe:!0,fog:!1});d.color.copy(this.light.color).multiplyScalar(this.light.intensity);THREE.Mesh.call(this,c,d);this.matrix=this.light.matrixWorld;this.matrixAutoUpdate=!1};THREE.PointLightHelper.prototype=Object.create(THREE.Mesh.prototype);THREE.PointLightHelper.prototype.constructor=THREE.PointLightHelper;
THREE.PointLightHelper.prototype.dispose=function(){this.geometry.dispose();this.material.dispose()};THREE.PointLightHelper.prototype.update=function(){this.material.color.copy(this.light.color).multiplyScalar(this.light.intensity)};
THREE.SkeletonHelper=function(a){this.bones=this.getBoneList(a);for(var b=new THREE.Geometry,c=0;c<this.bones.length;c++)this.bones[c].parent instanceof THREE.Bone&&(b.vertices.push(new THREE.Vector3),b.vertices.push(new THREE.Vector3),b.colors.push(new THREE.Color(0,0,1)),b.colors.push(new THREE.Color(0,1,0)));b.dynamic=!0;c=new THREE.LineBasicMaterial({vertexColors:THREE.VertexColors,depthTest:!1,depthWrite:!1,transparent:!0});THREE.LineSegments.call(this,b,c);this.root=a;this.matrix=a.matrixWorld;
this.matrixAutoUpdate=!1;this.update()};THREE.SkeletonHelper.prototype=Object.create(THREE.LineSegments.prototype);THREE.SkeletonHelper.prototype.constructor=THREE.SkeletonHelper;THREE.SkeletonHelper.prototype.getBoneList=function(a){var b=[];a instanceof THREE.Bone&&b.push(a);for(var c=0;c<a.children.length;c++)b.push.apply(b,this.getBoneList(a.children[c]));return b};
THREE.SkeletonHelper.prototype.update=function(){for(var a=this.geometry,b=(new THREE.Matrix4).getInverse(this.root.matrixWorld),c=new THREE.Matrix4,d=0,e=0;e<this.bones.length;e++){var f=this.bones[e];f.parent instanceof THREE.Bone&&(c.multiplyMatrices(b,f.matrixWorld),a.vertices[d].setFromMatrixPosition(c),c.multiplyMatrices(b,f.parent.matrixWorld),a.vertices[d+1].setFromMatrixPosition(c),d+=2)}a.verticesNeedUpdate=!0;a.computeBoundingSphere()};
THREE.SpotLightHelper=function(a){THREE.Object3D.call(this);this.light=a;this.light.updateMatrixWorld();this.matrix=a.matrixWorld;this.matrixAutoUpdate=!1;a=new THREE.BufferGeometry;for(var b=[0,0,0,0,0,1,0,0,0,1,0,1,0,0,0,-1,0,1,0,0,0,0,1,1,0,0,0,0,-1,1],c=0,d=1;32>c;c++,d++){var e=c/32*Math.PI*2,f=d/32*Math.PI*2;b.push(Math.cos(e),Math.sin(e),1,Math.cos(f),Math.sin(f),1)}a.addAttribute("position",new THREE.Float32Attribute(b,3));b=new THREE.LineBasicMaterial({fog:!1});this.cone=new THREE.LineSegments(a,
b);this.add(this.cone);this.update()};THREE.SpotLightHelper.prototype=Object.create(THREE.Object3D.prototype);THREE.SpotLightHelper.prototype.constructor=THREE.SpotLightHelper;THREE.SpotLightHelper.prototype.dispose=function(){this.cone.geometry.dispose();this.cone.material.dispose()};
THREE.SpotLightHelper.prototype.update=function(){var a=new THREE.Vector3,b=new THREE.Vector3;return function(){var c=this.light.distance?this.light.distance:1E3,d=c*Math.tan(this.light.angle);this.cone.scale.set(d,d,c);a.setFromMatrixPosition(this.light.matrixWorld);b.setFromMatrixPosition(this.light.target.matrixWorld);this.cone.lookAt(b.sub(a));this.cone.material.color.copy(this.light.color).multiplyScalar(this.light.intensity)}}();
THREE.VertexNormalsHelper=function(a,b,c,d){this.object=a;this.size=void 0!==b?b:1;a=void 0!==c?c:16711680;d=void 0!==d?d:1;b=0;c=this.object.geometry;c instanceof THREE.Geometry?b=3*c.faces.length:c instanceof THREE.BufferGeometry&&(b=c.attributes.normal.count);c=new THREE.BufferGeometry;b=new THREE.Float32Attribute(6*b,3);c.addAttribute("position",b);THREE.LineSegments.call(this,c,new THREE.LineBasicMaterial({color:a,linewidth:d}));this.matrixAutoUpdate=!1;this.update()};
THREE.VertexNormalsHelper.prototype=Object.create(THREE.LineSegments.prototype);THREE.VertexNormalsHelper.prototype.constructor=THREE.VertexNormalsHelper;
THREE.VertexNormalsHelper.prototype.update=function(){var a=new THREE.Vector3,b=new THREE.Vector3,c=new THREE.Matrix3;return function(){var d=["a","b","c"];this.object.updateMatrixWorld(!0);c.getNormalMatrix(this.object.matrixWorld);var e=this.object.matrixWorld,f=this.geometry.attributes.position,g=this.object.geometry;if(g instanceof THREE.Geometry)for(var h=g.vertices,k=g.faces,l=g=0,m=k.length;l<m;l++)for(var p=k[l],n=0,q=p.vertexNormals.length;n<q;n++){var r=p.vertexNormals[n];a.copy(h[p[d[n]]]).applyMatrix4(e);
b.copy(r).applyMatrix3(c).normalize().multiplyScalar(this.size).add(a);f.setXYZ(g,a.x,a.y,a.z);g+=1;f.setXYZ(g,b.x,b.y,b.z);g+=1}else if(g instanceof THREE.BufferGeometry)for(d=g.attributes.position,h=g.attributes.normal,n=g=0,q=d.count;n<q;n++)a.set(d.getX(n),d.getY(n),d.getZ(n)).applyMatrix4(e),b.set(h.getX(n),h.getY(n),h.getZ(n)),b.applyMatrix3(c).normalize().multiplyScalar(this.size).add(a),f.setXYZ(g,a.x,a.y,a.z),g+=1,f.setXYZ(g,b.x,b.y,b.z),g+=1;f.needsUpdate=!0;return this}}();
THREE.WireframeHelper=function(a,b){var c=void 0!==b?b:16777215;THREE.LineSegments.call(this,new THREE.WireframeGeometry(a.geometry),new THREE.LineBasicMaterial({color:c}));this.matrix=a.matrixWorld;this.matrixAutoUpdate=!1};THREE.WireframeHelper.prototype=Object.create(THREE.LineSegments.prototype);THREE.WireframeHelper.prototype.constructor=THREE.WireframeHelper;THREE.ImmediateRenderObject=function(a){THREE.Object3D.call(this);this.material=a;this.render=function(a){}};
THREE.ImmediateRenderObject.prototype=Object.create(THREE.Object3D.prototype);THREE.ImmediateRenderObject.prototype.constructor=THREE.ImmediateRenderObject;THREE.MorphBlendMesh=function(a,b){THREE.Mesh.call(this,a,b);this.animationsMap={};this.animationsList=[];var c=this.geometry.morphTargets.length;this.createAnimation("__default",0,c-1,c/1);this.setAnimationWeight("__default",1)};THREE.MorphBlendMesh.prototype=Object.create(THREE.Mesh.prototype);THREE.MorphBlendMesh.prototype.constructor=THREE.MorphBlendMesh;
THREE.MorphBlendMesh.prototype.createAnimation=function(a,b,c,d){b={start:b,end:c,length:c-b+1,fps:d,duration:(c-b)/d,lastFrame:0,currentFrame:0,active:!1,time:0,direction:1,weight:1,directionBackwards:!1,mirroredLoop:!1};this.animationsMap[a]=b;this.animationsList.push(b)};
THREE.MorphBlendMesh.prototype.autoCreateAnimations=function(a){for(var b=/([a-z]+)_?(\d+)/i,c,d={},e=this.geometry,f=0,g=e.morphTargets.length;f<g;f++){var h=e.morphTargets[f].name.match(b);if(h&&1<h.length){var k=h[1];d[k]||(d[k]={start:Infinity,end:-Infinity});h=d[k];f<h.start&&(h.start=f);f>h.end&&(h.end=f);c||(c=k)}}for(k in d)h=d[k],this.createAnimation(k,h.start,h.end,a);this.firstAnimation=c};
THREE.MorphBlendMesh.prototype.setAnimationDirectionForward=function(a){if(a=this.animationsMap[a])a.direction=1,a.directionBackwards=!1};THREE.MorphBlendMesh.prototype.setAnimationDirectionBackward=function(a){if(a=this.animationsMap[a])a.direction=-1,a.directionBackwards=!0};THREE.MorphBlendMesh.prototype.setAnimationFPS=function(a,b){var c=this.animationsMap[a];c&&(c.fps=b,c.duration=(c.end-c.start)/c.fps)};
THREE.MorphBlendMesh.prototype.setAnimationDuration=function(a,b){var c=this.animationsMap[a];c&&(c.duration=b,c.fps=(c.end-c.start)/c.duration)};THREE.MorphBlendMesh.prototype.setAnimationWeight=function(a,b){var c=this.animationsMap[a];c&&(c.weight=b)};THREE.MorphBlendMesh.prototype.setAnimationTime=function(a,b){var c=this.animationsMap[a];c&&(c.time=b)};THREE.MorphBlendMesh.prototype.getAnimationTime=function(a){var b=0;if(a=this.animationsMap[a])b=a.time;return b};
THREE.MorphBlendMesh.prototype.getAnimationDuration=function(a){var b=-1;if(a=this.animationsMap[a])b=a.duration;return b};THREE.MorphBlendMesh.prototype.playAnimation=function(a){var b=this.animationsMap[a];b?(b.time=0,b.active=!0):console.warn("THREE.MorphBlendMesh: animation["+a+"] undefined in .playAnimation()")};THREE.MorphBlendMesh.prototype.stopAnimation=function(a){if(a=this.animationsMap[a])a.active=!1};
THREE.MorphBlendMesh.prototype.update=function(a){for(var b=0,c=this.animationsList.length;b<c;b++){var d=this.animationsList[b];if(d.active){var e=d.duration/d.length;d.time+=d.direction*a;if(d.mirroredLoop){if(d.time>d.duration||0>d.time)d.direction*=-1,d.time>d.duration&&(d.time=d.duration,d.directionBackwards=!0),0>d.time&&(d.time=0,d.directionBackwards=!1)}else d.time%=d.duration,0>d.time&&(d.time+=d.duration);var f=d.start+THREE.Math.clamp(Math.floor(d.time/e),0,d.length-1),g=d.weight;f!==d.currentFrame&&
(this.morphTargetInfluences[d.lastFrame]=0,this.morphTargetInfluences[d.currentFrame]=1*g,this.morphTargetInfluences[f]=0,d.lastFrame=d.currentFrame,d.currentFrame=f);e=d.time%e/e;d.directionBackwards&&(e=1-e);d.currentFrame!==d.lastFrame?(this.morphTargetInfluences[d.currentFrame]=e*g,this.morphTargetInfluences[d.lastFrame]=(1-e)*g):this.morphTargetInfluences[d.currentFrame]=g}}};

/**
 * @author mrdoob / http://mrdoob.com/
 * @author supereggbert / http://www.paulbrunt.co.uk/
 * @author julianwa / https://github.com/julianwa
 */

THREE.RenderableObject = function () {

	this.id = 0;

	this.object = null;
	this.z = 0;
	this.renderOrder = 0;

};

//

THREE.RenderableFace = function () {

	this.id = 0;

	this.v1 = new THREE.RenderableVertex();
	this.v2 = new THREE.RenderableVertex();
	this.v3 = new THREE.RenderableVertex();

	this.normalModel = new THREE.Vector3();

	this.vertexNormalsModel = [ new THREE.Vector3(), new THREE.Vector3(), new THREE.Vector3() ];
	this.vertexNormalsLength = 0;

	this.color = new THREE.Color();
	this.material = null;
	this.uvs = [ new THREE.Vector2(), new THREE.Vector2(), new THREE.Vector2() ];

	this.z = 0;
	this.renderOrder = 0;

};

//

THREE.RenderableVertex = function () {

	this.position = new THREE.Vector3();
	this.positionWorld = new THREE.Vector3();
	this.positionScreen = new THREE.Vector4();

	this.visible = true;

};

THREE.RenderableVertex.prototype.copy = function ( vertex ) {

	this.positionWorld.copy( vertex.positionWorld );
	this.positionScreen.copy( vertex.positionScreen );

};

//

THREE.RenderableLine = function () {

	this.id = 0;

	this.v1 = new THREE.RenderableVertex();
	this.v2 = new THREE.RenderableVertex();

	this.vertexColors = [ new THREE.Color(), new THREE.Color() ];
	this.material = null;

	this.z = 0;
	this.renderOrder = 0;

};

//

THREE.RenderableSprite = function () {

	this.id = 0;

	this.object = null;

	this.x = 0;
	this.y = 0;
	this.z = 0;

	this.rotation = 0;
	this.scale = new THREE.Vector2();

	this.material = null;
	this.renderOrder = 0;

};

//

THREE.Projector = function () {

	var _object, _objectCount, _objectPool = [], _objectPoolLength = 0,
	_vertex, _vertexCount, _vertexPool = [], _vertexPoolLength = 0,
	_face, _faceCount, _facePool = [], _facePoolLength = 0,
	_line, _lineCount, _linePool = [], _linePoolLength = 0,
	_sprite, _spriteCount, _spritePool = [], _spritePoolLength = 0,

	_renderData = { objects: [], lights: [], elements: [] },

	_vector3 = new THREE.Vector3(),
	_vector4 = new THREE.Vector4(),

	_clipBox = new THREE.Box3( new THREE.Vector3( - 1, - 1, - 1 ), new THREE.Vector3( 1, 1, 1 ) ),
	_boundingBox = new THREE.Box3(),
	_points3 = new Array( 3 ),
	_points4 = new Array( 4 ),

	_viewMatrix = new THREE.Matrix4(),
	_viewProjectionMatrix = new THREE.Matrix4(),

	_modelMatrix,
	_modelViewProjectionMatrix = new THREE.Matrix4(),

	_normalMatrix = new THREE.Matrix3(),

	_frustum = new THREE.Frustum(),

	_clippedVertex1PositionScreen = new THREE.Vector4(),
	_clippedVertex2PositionScreen = new THREE.Vector4();

	//

	this.projectVector = function ( vector, camera ) {

		console.warn( 'THREE.Projector: .projectVector() is now vector.project().' );
		vector.project( camera );

	};

	this.unprojectVector = function ( vector, camera ) {

		console.warn( 'THREE.Projector: .unprojectVector() is now vector.unproject().' );
		vector.unproject( camera );

	};

	this.pickingRay = function ( vector, camera ) {

		console.error( 'THREE.Projector: .pickingRay() is now raycaster.setFromCamera().' );

	};

	//

	var RenderList = function () {

		var normals = [];
		var uvs = [];

		var object = null;
		var material = null;

		var normalMatrix = new THREE.Matrix3();

		function setObject( value ) {

			object = value;
			material = object.material;

			normalMatrix.getNormalMatrix( object.matrixWorld );

			normals.length = 0;
			uvs.length = 0;

		}

		function projectVertex( vertex ) {

			var position = vertex.position;
			var positionWorld = vertex.positionWorld;
			var positionScreen = vertex.positionScreen;

			positionWorld.copy( position ).applyMatrix4( _modelMatrix );
			positionScreen.copy( positionWorld ).applyMatrix4( _viewProjectionMatrix );

			var invW = 1 / positionScreen.w;

			positionScreen.x *= invW;
			positionScreen.y *= invW;
			positionScreen.z *= invW;

			vertex.visible = positionScreen.x >= - 1 && positionScreen.x <= 1 &&
					 positionScreen.y >= - 1 && positionScreen.y <= 1 &&
					 positionScreen.z >= - 1 && positionScreen.z <= 1;

		}

		function pushVertex( x, y, z ) {

			_vertex = getNextVertexInPool();
			_vertex.position.set( x, y, z );

			projectVertex( _vertex );

		}

		function pushNormal( x, y, z ) {

			normals.push( x, y, z );

		}

		function pushUv( x, y ) {

			uvs.push( x, y );

		}

		function checkTriangleVisibility( v1, v2, v3 ) {

			if ( v1.visible === true || v2.visible === true || v3.visible === true ) return true;

			_points3[ 0 ] = v1.positionScreen;
			_points3[ 1 ] = v2.positionScreen;
			_points3[ 2 ] = v3.positionScreen;

			return _clipBox.intersectsBox( _boundingBox.setFromPoints( _points3 ) );

		}

		function checkBackfaceCulling( v1, v2, v3 ) {

			return ( ( v3.positionScreen.x - v1.positionScreen.x ) *
				    ( v2.positionScreen.y - v1.positionScreen.y ) -
				    ( v3.positionScreen.y - v1.positionScreen.y ) *
				    ( v2.positionScreen.x - v1.positionScreen.x ) ) < 0;

		}

		function pushLine( a, b ) {

			var v1 = _vertexPool[ a ];
			var v2 = _vertexPool[ b ];

			_line = getNextLineInPool();

			_line.id = object.id;
			_line.v1.copy( v1 );
			_line.v2.copy( v2 );
			_line.z = ( v1.positionScreen.z + v2.positionScreen.z ) / 2;
			_line.renderOrder = object.renderOrder;

			_line.material = object.material;

			_renderData.elements.push( _line );

		}

		function pushTriangle( a, b, c ) {

			var v1 = _vertexPool[ a ];
			var v2 = _vertexPool[ b ];
			var v3 = _vertexPool[ c ];

			if ( checkTriangleVisibility( v1, v2, v3 ) === false ) return;

			if ( material.side === THREE.DoubleSide || checkBackfaceCulling( v1, v2, v3 ) === true ) {

				_face = getNextFaceInPool();

				_face.id = object.id;
				_face.v1.copy( v1 );
				_face.v2.copy( v2 );
				_face.v3.copy( v3 );
				_face.z = ( v1.positionScreen.z + v2.positionScreen.z + v3.positionScreen.z ) / 3;
				_face.renderOrder = object.renderOrder;

				// use first vertex normal as face normal

				_face.normalModel.fromArray( normals, a * 3 );
				_face.normalModel.applyMatrix3( normalMatrix ).normalize();

				for ( var i = 0; i < 3; i ++ ) {

					var normal = _face.vertexNormalsModel[ i ];
					normal.fromArray( normals, arguments[ i ] * 3 );
					normal.applyMatrix3( normalMatrix ).normalize();

					var uv = _face.uvs[ i ];
					uv.fromArray( uvs, arguments[ i ] * 2 );

				}

				_face.vertexNormalsLength = 3;

				_face.material = object.material;

				_renderData.elements.push( _face );

			}

		}

		return {
			setObject: setObject,
			projectVertex: projectVertex,
			checkTriangleVisibility: checkTriangleVisibility,
			checkBackfaceCulling: checkBackfaceCulling,
			pushVertex: pushVertex,
			pushNormal: pushNormal,
			pushUv: pushUv,
			pushLine: pushLine,
			pushTriangle: pushTriangle
		}

	};

	var renderList = new RenderList();

	this.projectScene = function ( scene, camera, sortObjects, sortElements ) {

		_faceCount = 0;
		_lineCount = 0;
		_spriteCount = 0;

		_renderData.elements.length = 0;

		if ( scene.autoUpdate === true ) scene.updateMatrixWorld();
		if ( camera.parent === null ) camera.updateMatrixWorld();

		_viewMatrix.copy( camera.matrixWorldInverse.getInverse( camera.matrixWorld ) );
		_viewProjectionMatrix.multiplyMatrices( camera.projectionMatrix, _viewMatrix );

		_frustum.setFromMatrix( _viewProjectionMatrix );

		//

		_objectCount = 0;

		_renderData.objects.length = 0;
		_renderData.lights.length = 0;

		function addObject( object ) {

			_object = getNextObjectInPool();
			_object.id = object.id;
			_object.object = object;

			_vector3.setFromMatrixPosition( object.matrixWorld );
			_vector3.applyProjection( _viewProjectionMatrix );
			_object.z = _vector3.z;
			_object.renderOrder = object.renderOrder;

			_renderData.objects.push( _object );

		}

		scene.traverseVisible( function ( object ) {

			if ( object instanceof THREE.Light ) {

				_renderData.lights.push( object );

			} else if ( object instanceof THREE.Mesh || object instanceof THREE.Line ) {

				if ( object.material.visible === false ) return;
				if ( object.frustumCulled === true && _frustum.intersectsObject( object ) === false ) return;

				addObject( object );

			} else if ( object instanceof THREE.Sprite ) {

				if ( object.material.visible === false ) return;
				if ( object.frustumCulled === true && _frustum.intersectsSprite( object ) === false ) return;

				addObject( object );

			}

		} );

		if ( sortObjects === true ) {

			_renderData.objects.sort( painterSort );

		}

		//

		for ( var o = 0, ol = _renderData.objects.length; o < ol; o ++ ) {

			var object = _renderData.objects[ o ].object;
			var geometry = object.geometry;

			renderList.setObject( object );

			_modelMatrix = object.matrixWorld;

			_vertexCount = 0;

			if ( object instanceof THREE.Mesh ) {

				if ( geometry instanceof THREE.BufferGeometry ) {

					var attributes = geometry.attributes;
					var groups = geometry.groups;

					if ( attributes.position === undefined ) continue;

					var positions = attributes.position.array;

					for ( var i = 0, l = positions.length; i < l; i += 3 ) {

						renderList.pushVertex( positions[ i ], positions[ i + 1 ], positions[ i + 2 ] );

					}

					if ( attributes.normal !== undefined ) {

						var normals = attributes.normal.array;

						for ( var i = 0, l = normals.length; i < l; i += 3 ) {

							renderList.pushNormal( normals[ i ], normals[ i + 1 ], normals[ i + 2 ] );

						}

					}

					if ( attributes.uv !== undefined ) {

						var uvs = attributes.uv.array;

						for ( var i = 0, l = uvs.length; i < l; i += 2 ) {

							renderList.pushUv( uvs[ i ], uvs[ i + 1 ] );

						}

					}

					if ( geometry.index !== null ) {

						var indices = geometry.index.array;

						if ( groups.length > 0 ) {

							for ( var o = 0; o < groups.length; o ++ ) {

								var group = groups[ o ];

								for ( var i = group.start, l = group.start + group.count; i < l; i += 3 ) {

									renderList.pushTriangle( indices[ i ], indices[ i + 1 ], indices[ i + 2 ] );

								}

							}

						} else {

							for ( var i = 0, l = indices.length; i < l; i += 3 ) {

								renderList.pushTriangle( indices[ i ], indices[ i + 1 ], indices[ i + 2 ] );

							}

						}

					} else {

						for ( var i = 0, l = positions.length / 3; i < l; i += 3 ) {

							renderList.pushTriangle( i, i + 1, i + 2 );

						}

					}

				} else if ( geometry instanceof THREE.Geometry ) {

					var vertices = geometry.vertices;
					var faces = geometry.faces;
					var faceVertexUvs = geometry.faceVertexUvs[ 0 ];

					_normalMatrix.getNormalMatrix( _modelMatrix );

					var material = object.material;

					var isFaceMaterial = material instanceof THREE.MultiMaterial;
					var objectMaterials = isFaceMaterial === true ? object.material : null;

					for ( var v = 0, vl = vertices.length; v < vl; v ++ ) {

						var vertex = vertices[ v ];

						_vector3.copy( vertex );

						if ( material.morphTargets === true ) {

							var morphTargets = geometry.morphTargets;
							var morphInfluences = object.morphTargetInfluences;

							for ( var t = 0, tl = morphTargets.length; t < tl; t ++ ) {

								var influence = morphInfluences[ t ];

								if ( influence === 0 ) continue;

								var target = morphTargets[ t ];
								var targetVertex = target.vertices[ v ];

								_vector3.x += ( targetVertex.x - vertex.x ) * influence;
								_vector3.y += ( targetVertex.y - vertex.y ) * influence;
								_vector3.z += ( targetVertex.z - vertex.z ) * influence;

							}

						}

						renderList.pushVertex( _vector3.x, _vector3.y, _vector3.z );

					}

					for ( var f = 0, fl = faces.length; f < fl; f ++ ) {

						var face = faces[ f ];

						material = isFaceMaterial === true
							 ? objectMaterials.materials[ face.materialIndex ]
							 : object.material;

						if ( material === undefined ) continue;

						var side = material.side;

						var v1 = _vertexPool[ face.a ];
						var v2 = _vertexPool[ face.b ];
						var v3 = _vertexPool[ face.c ];

						if ( renderList.checkTriangleVisibility( v1, v2, v3 ) === false ) continue;

						var visible = renderList.checkBackfaceCulling( v1, v2, v3 );

						if ( side !== THREE.DoubleSide ) {

							if ( side === THREE.FrontSide && visible === false ) continue;
							if ( side === THREE.BackSide && visible === true ) continue;

						}

						_face = getNextFaceInPool();

						_face.id = object.id;
						_face.v1.copy( v1 );
						_face.v2.copy( v2 );
						_face.v3.copy( v3 );

						_face.normalModel.copy( face.normal );

						if ( visible === false && ( side === THREE.BackSide || side === THREE.DoubleSide ) ) {

							_face.normalModel.negate();

						}

						_face.normalModel.applyMatrix3( _normalMatrix ).normalize();

						var faceVertexNormals = face.vertexNormals;

						for ( var n = 0, nl = Math.min( faceVertexNormals.length, 3 ); n < nl; n ++ ) {

							var normalModel = _face.vertexNormalsModel[ n ];
							normalModel.copy( faceVertexNormals[ n ] );

							if ( visible === false && ( side === THREE.BackSide || side === THREE.DoubleSide ) ) {

								normalModel.negate();

							}

							normalModel.applyMatrix3( _normalMatrix ).normalize();

						}

						_face.vertexNormalsLength = faceVertexNormals.length;

						var vertexUvs = faceVertexUvs[ f ];

						if ( vertexUvs !== undefined ) {

							for ( var u = 0; u < 3; u ++ ) {

								_face.uvs[ u ].copy( vertexUvs[ u ] );

							}

						}

						_face.color = face.color;
						_face.material = material;

						_face.z = ( v1.positionScreen.z + v2.positionScreen.z + v3.positionScreen.z ) / 3;
						_face.renderOrder = object.renderOrder;

						_renderData.elements.push( _face );

					}

				}

			} else if ( object instanceof THREE.Line ) {

				if ( geometry instanceof THREE.BufferGeometry ) {

					var attributes = geometry.attributes;

					if ( attributes.position !== undefined ) {

						var positions = attributes.position.array;

						for ( var i = 0, l = positions.length; i < l; i += 3 ) {

							renderList.pushVertex( positions[ i ], positions[ i + 1 ], positions[ i + 2 ] );

						}

						if ( geometry.index !== null ) {

							var indices = geometry.index.array;

							for ( var i = 0, l = indices.length; i < l; i += 2 ) {

								renderList.pushLine( indices[ i ], indices[ i + 1 ] );

							}

						} else {

							var step = object instanceof THREE.LineSegments ? 2 : 1;

							for ( var i = 0, l = ( positions.length / 3 ) - 1; i < l; i += step ) {

								renderList.pushLine( i, i + 1 );

							}

						}

					}

				} else if ( geometry instanceof THREE.Geometry ) {

					_modelViewProjectionMatrix.multiplyMatrices( _viewProjectionMatrix, _modelMatrix );

					var vertices = object.geometry.vertices;

					if ( vertices.length === 0 ) continue;

					v1 = getNextVertexInPool();
					v1.positionScreen.copy( vertices[ 0 ] ).applyMatrix4( _modelViewProjectionMatrix );

					var step = object instanceof THREE.LineSegments ? 2 : 1;

					for ( var v = 1, vl = vertices.length; v < vl; v ++ ) {

						v1 = getNextVertexInPool();
						v1.positionScreen.copy( vertices[ v ] ).applyMatrix4( _modelViewProjectionMatrix );

						if ( ( v + 1 ) % step > 0 ) continue;

						v2 = _vertexPool[ _vertexCount - 2 ];

						_clippedVertex1PositionScreen.copy( v1.positionScreen );
						_clippedVertex2PositionScreen.copy( v2.positionScreen );

						if ( clipLine( _clippedVertex1PositionScreen, _clippedVertex2PositionScreen ) === true ) {

							// Perform the perspective divide
							_clippedVertex1PositionScreen.multiplyScalar( 1 / _clippedVertex1PositionScreen.w );
							_clippedVertex2PositionScreen.multiplyScalar( 1 / _clippedVertex2PositionScreen.w );

							_line = getNextLineInPool();

							_line.id = object.id;
							_line.v1.positionScreen.copy( _clippedVertex1PositionScreen );
							_line.v2.positionScreen.copy( _clippedVertex2PositionScreen );

							_line.z = Math.max( _clippedVertex1PositionScreen.z, _clippedVertex2PositionScreen.z );
							_line.renderOrder = object.renderOrder;

							_line.material = object.material;

							if ( object.material.vertexColors === THREE.VertexColors ) {

								_line.vertexColors[ 0 ].copy( object.geometry.colors[ v ] );
								_line.vertexColors[ 1 ].copy( object.geometry.colors[ v - 1 ] );

							}

							_renderData.elements.push( _line );

						}

					}

				}

			} else if ( object instanceof THREE.Sprite ) {

				_vector4.set( _modelMatrix.elements[ 12 ], _modelMatrix.elements[ 13 ], _modelMatrix.elements[ 14 ], 1 );
				_vector4.applyMatrix4( _viewProjectionMatrix );

				var invW = 1 / _vector4.w;

				_vector4.z *= invW;

				if ( _vector4.z >= - 1 && _vector4.z <= 1 ) {

					_sprite = getNextSpriteInPool();
					_sprite.id = object.id;
					_sprite.x = _vector4.x * invW;
					_sprite.y = _vector4.y * invW;
					_sprite.z = _vector4.z;
					_sprite.renderOrder = object.renderOrder;
					_sprite.object = object;

					_sprite.rotation = object.rotation;

					_sprite.scale.x = object.scale.x * Math.abs( _sprite.x - ( _vector4.x + camera.projectionMatrix.elements[ 0 ] ) / ( _vector4.w + camera.projectionMatrix.elements[ 12 ] ) );
					_sprite.scale.y = object.scale.y * Math.abs( _sprite.y - ( _vector4.y + camera.projectionMatrix.elements[ 5 ] ) / ( _vector4.w + camera.projectionMatrix.elements[ 13 ] ) );

					_sprite.material = object.material;

					_renderData.elements.push( _sprite );

				}

			}

		}

		if ( sortElements === true ) {

			_renderData.elements.sort( painterSort );

		}

		return _renderData;

	};

	// Pools

	function getNextObjectInPool() {

		if ( _objectCount === _objectPoolLength ) {

			var object = new THREE.RenderableObject();
			_objectPool.push( object );
			_objectPoolLength ++;
			_objectCount ++;
			return object;

		}

		return _objectPool[ _objectCount ++ ];

	}

	function getNextVertexInPool() {

		if ( _vertexCount === _vertexPoolLength ) {

			var vertex = new THREE.RenderableVertex();
			_vertexPool.push( vertex );
			_vertexPoolLength ++;
			_vertexCount ++;
			return vertex;

		}

		return _vertexPool[ _vertexCount ++ ];

	}

	function getNextFaceInPool() {

		if ( _faceCount === _facePoolLength ) {

			var face = new THREE.RenderableFace();
			_facePool.push( face );
			_facePoolLength ++;
			_faceCount ++;
			return face;

		}

		return _facePool[ _faceCount ++ ];


	}

	function getNextLineInPool() {

		if ( _lineCount === _linePoolLength ) {

			var line = new THREE.RenderableLine();
			_linePool.push( line );
			_linePoolLength ++;
			_lineCount ++;
			return line;

		}

		return _linePool[ _lineCount ++ ];

	}

	function getNextSpriteInPool() {

		if ( _spriteCount === _spritePoolLength ) {

			var sprite = new THREE.RenderableSprite();
			_spritePool.push( sprite );
			_spritePoolLength ++;
			_spriteCount ++;
			return sprite;

		}

		return _spritePool[ _spriteCount ++ ];

	}

	//

	function painterSort( a, b ) {

		if ( a.renderOrder !== b.renderOrder ) {

			return a.renderOrder - b.renderOrder;

		} else if ( a.z !== b.z ) {

			return b.z - a.z;

		} else if ( a.id !== b.id ) {

			return a.id - b.id;

		} else {

			return 0;

		}

	}

	function clipLine( s1, s2 ) {

		var alpha1 = 0, alpha2 = 1,

		// Calculate the boundary coordinate of each vertex for the near and far clip planes,
		// Z = -1 and Z = +1, respectively.
		bc1near =  s1.z + s1.w,
		bc2near =  s2.z + s2.w,
		bc1far =  - s1.z + s1.w,
		bc2far =  - s2.z + s2.w;

		if ( bc1near >= 0 && bc2near >= 0 && bc1far >= 0 && bc2far >= 0 ) {

			// Both vertices lie entirely within all clip planes.
			return true;

		} else if ( ( bc1near < 0 && bc2near < 0 ) || ( bc1far < 0 && bc2far < 0 ) ) {

			// Both vertices lie entirely outside one of the clip planes.
			return false;

		} else {

			// The line segment spans at least one clip plane.

			if ( bc1near < 0 ) {

				// v1 lies outside the near plane, v2 inside
				alpha1 = Math.max( alpha1, bc1near / ( bc1near - bc2near ) );

			} else if ( bc2near < 0 ) {

				// v2 lies outside the near plane, v1 inside
				alpha2 = Math.min( alpha2, bc1near / ( bc1near - bc2near ) );

			}

			if ( bc1far < 0 ) {

				// v1 lies outside the far plane, v2 inside
				alpha1 = Math.max( alpha1, bc1far / ( bc1far - bc2far ) );

			} else if ( bc2far < 0 ) {

				// v2 lies outside the far plane, v2 inside
				alpha2 = Math.min( alpha2, bc1far / ( bc1far - bc2far ) );

			}

			if ( alpha2 < alpha1 ) {

				// The line segment spans two boundaries, but is outside both of them.
				// (This can't happen when we're only clipping against just near/far but good
				//  to leave the check here for future usage if other clip planes are added.)
				return false;

			} else {

				// Update the s1 and s2 vertices to match the clipped line segment.
				s1.lerp( s2, alpha1 );
				s2.lerp( s1, 1 - alpha2 );

				return true;

			}

		}

	}

};

/*!art-template - Template Engine | http://aui.github.com/artTemplate/*/
!function(){function a(a){return a.replace(t,"").replace(u,",").replace(v,"").replace(w,"").replace(x,"").split(y)}function b(a){return"'"+a.replace(/('|\\)/g,"\\$1").replace(/\r/g,"\\r").replace(/\n/g,"\\n")+"'"}function c(c,d){function e(a){return m+=a.split(/\n/).length-1,k&&(a=a.replace(/\s+/g," ").replace(/<!--[\w\W]*?-->/g,"")),a&&(a=s[1]+b(a)+s[2]+"\n"),a}function f(b){var c=m;if(j?b=j(b,d):g&&(b=b.replace(/\n/g,function(){return m++,"$line="+m+";"})),0===b.indexOf("=")){var e=l&&!/^=[=#]/.test(b);if(b=b.replace(/^=[=#]?|[\s;]*$/g,""),e){var f=b.replace(/\s*\([^\)]+\)/,"");n[f]||/^(include|print)$/.test(f)||(b="$escape("+b+")")}else b="$string("+b+")";b=s[1]+b+s[2]}return g&&(b="$line="+c+";"+b),r(a(b),function(a){if(a&&!p[a]){var b;b="print"===a?u:"include"===a?v:n[a]?"$utils."+a:o[a]?"$helpers."+a:"$data."+a,w+=a+"="+b+",",p[a]=!0}}),b+"\n"}var g=d.debug,h=d.openTag,i=d.closeTag,j=d.parser,k=d.compress,l=d.escape,m=1,p={$data:1,$filename:1,$utils:1,$helpers:1,$out:1,$line:1},q="".trim,s=q?["$out='';","$out+=",";","$out"]:["$out=[];","$out.push(",");","$out.join('')"],t=q?"$out+=text;return $out;":"$out.push(text);",u="function(){var text=''.concat.apply('',arguments);"+t+"}",v="function(filename,data){data=data||$data;var text=$utils.$include(filename,data,$filename);"+t+"}",w="'use strict';var $utils=this,$helpers=$utils.$helpers,"+(g?"$line=0,":""),x=s[0],y="return new String("+s[3]+");";r(c.split(h),function(a){a=a.split(i);var b=a[0],c=a[1];1===a.length?x+=e(b):(x+=f(b),c&&(x+=e(c)))});var z=w+x+y;g&&(z="try{"+z+"}catch(e){throw {filename:$filename,name:'Render Error',message:e.message,line:$line,source:"+b(c)+".split(/\\n/)[$line-1].replace(/^\\s+/,'')};}");try{var A=new Function("$data","$filename",z);return A.prototype=n,A}catch(B){throw B.temp="function anonymous($data,$filename) {"+z+"}",B}}var d=function(a,b){return"string"==typeof b?q(b,{filename:a}):g(a,b)};d.version="3.0.0",d.config=function(a,b){e[a]=b};var e=d.defaults={openTag:"<%",closeTag:"%>",escape:!0,cache:!0,compress:!1,parser:null},f=d.cache={};d.render=function(a,b){return q(a,b)};var g=d.renderFile=function(a,b){var c=d.get(a)||p({filename:a,name:"Render Error",message:"Template not found"});return b?c(b):c};d.get=function(a){var b;if(f[a])b=f[a];else if("object"==typeof document){var c=document.getElementById(a);if(c){var d=(c.value||c.innerHTML).replace(/^\s*|\s*$/g,"");b=q(d,{filename:a})}}return b};var h=function(a,b){return"string"!=typeof a&&(b=typeof a,"number"===b?a+="":a="function"===b?h(a.call(a)):""),a},i={"<":"&#60;",">":"&#62;",'"':"&#34;","'":"&#39;","&":"&#38;"},j=function(a){return i[a]},k=function(a){return h(a).replace(/&(?![\w#]+;)|[<>"']/g,j)},l=Array.isArray||function(a){return"[object Array]"==={}.toString.call(a)},m=function(a,b){var c,d;if(l(a))for(c=0,d=a.length;d>c;c++)b.call(a,a[c],c,a);else for(c in a)b.call(a,a[c],c)},n=d.utils={$helpers:{},$include:g,$string:h,$escape:k,$each:m};d.helper=function(a,b){o[a]=b};var o=d.helpers=n.$helpers;d.onerror=function(a){var b="Template Error\n\n";for(var c in a)b+="<"+c+">\n"+a[c]+"\n\n";"object"==typeof console&&console.error(b)};var p=function(a){return d.onerror(a),function(){return"{Template Error}"}},q=d.compile=function(a,b){function d(c){try{return new i(c,h)+""}catch(d){return b.debug?p(d)():(b.debug=!0,q(a,b)(c))}}b=b||{};for(var g in e)void 0===b[g]&&(b[g]=e[g]);var h=b.filename;try{var i=c(a,b)}catch(j){return j.filename=h||"anonymous",j.name="Syntax Error",p(j)}return d.prototype=i.prototype,d.toString=function(){return i.toString()},h&&b.cache&&(f[h]=d),d},r=n.$each,s="break,case,catch,continue,debugger,default,delete,do,else,false,finally,for,function,if,in,instanceof,new,null,return,switch,this,throw,true,try,typeof,var,void,while,with,abstract,boolean,byte,char,class,const,double,enum,export,extends,final,float,goto,implements,import,int,interface,long,native,package,private,protected,public,short,static,super,synchronized,throws,transient,volatile,arguments,let,yield,undefined",t=/\/\*[\w\W]*?\*\/|\/\/[^\n]*\n|\/\/[^\n]*$|"(?:[^"\\]|\\[\w\W])*"|'(?:[^'\\]|\\[\w\W])*'|\s*\.\s*[$\w\.]+/g,u=/[^\w$]+/g,v=new RegExp(["\\b"+s.replace(/,/g,"\\b|\\b")+"\\b"].join("|"),"g"),w=/^\d[^,]*|,\d[^,]*/g,x=/^,+|,+$/g,y=/^$|,+/;"function"==typeof define?define(function(){return d}):"undefined"!=typeof exports?module.exports=d:this.template=d}();
!function(global) {

  if (global.template) {
    global.template.config('openTag','<#');
    global.template.config('closeTag','#>');
  }

  global.snot = {};

  global.snot.util = {
    left_pos: left_pos,
    top_pos: top_pos,
    standardlization: standardlization,
    is_mobile: is_mobile,
    is_wechat_login: is_wechat_login,
    get_window_width: get_window_width,
    get_window_height: get_window_height,
    position_to_rotation: position_to_rotation,
    distance2D: distance2D,
    distance3D: distance3D,
    epsilon: epsilon,
    css_text_to_matrix: css_text_to_matrix,
    matrix_to_css_text: matrix_to_css_text,
    webgl_detect: webgl_detect,
    webgl_enabled: webgl_detect(),
    load_js: load_js,
    rotation_to_position: rotation_to_position,

    v_set_from_matrix_position: v_set_from_matrix_position,
    m_make_rotation_axis: m_make_rotation_axis,
    m_multiply: m_multiply,
    m_set_position: m_set_position,
    m_make_rotation_from_quaternion: m_make_rotation_from_quaternion,

    merge_json: merge_json,
    octree_collision: octree_collision,

  };

  function top_pos(elem) {
    var curtop = 0;
    if (elem.offsetParent) {
      do { 
          curtop += elem.offsetTop; 
      } while (elem = elem.offsetParent);
    }
    return curtop;
  };

  function left_pos(elem) {
    var curleft = 0;
    if (elem.offsetParent) {
        do { 
            curleft += elem.offsetLeft; 
        } while (elem = elem.offsetParent);
    }
    return curleft;
  };
  
  function is_mobile() {
    return get_window_width() < 500;
  }
  
  function is_wechat_login() {
    return window.navigator.userAgent.indexOf('MicroMessenger') >= 0 ? true : false;
  }
  
  function get_window_width() {
    return document.documentElement.clientWidth;
  }
  
  function get_window_height() {
    return document.documentElement.clientHeight;
  }
  
  function position_to_rotation(x, y, z) {
    var r = distance3D(x, y, z, 0, 0, 0);
    var rx = Math.asin(z / r);
    var ry = Math.asin(y / r / Math.cos(rx));
    if (x < 0) {
        ry = ry > 0 ? Math.PI - ry : - Math.PI - ry;
    }
  
    return {
      rx: - rx * 180 / Math.PI,
      ry: (ry < 0 ? ry + Math.PI * 2 : ry) * 180 / Math.PI
    };
  }
  
  function distance2D(a, b, c, d) {
    return Math.pow((a - c) * (a - c) + (b - d) * (b - d), 0.5);
  }
  
  function distance3D(a, b, c, d, e, f) {
    return Math.pow((a - d) * (a - d) + (b - e) * (b - e) + (c - f) * (c - f), 0.5);
  }
  
  function epsilon(value) {
    return Math.abs(value) < 0.000001 ? 0 : value.toFixed(5);
  };
  
  function css_text_to_matrix(t) {
    var m = new WebKitCSSMatrix(t);
    return [
      epsilon(m.m11), epsilon(m.m12), epsilon(m.m13), epsilon(m.m14),
      epsilon(m.m21), epsilon(m.m22), epsilon(m.m23), epsilon(m.m24),
      epsilon(m.m31), epsilon(m.m32), epsilon(m.m33), epsilon(m.m34),
      epsilon(m.m41), epsilon(m.m42), epsilon(m.m43), epsilon(m.m44)
    ];
  }
  
  function matrix_to_css_text(a, b, c, d,
                              e, f, g, h,
                              i, j, k, l,
                              m, n, o, p) {
      if (typeof(a) == 'object') {
          return 'matrix3d(' + (a.join(',')) + ')';
      }
      return 'matrix3d(' + a + ',' + b + ',' + c + ',' + d+',' + e + ',' + f + ',' + g + ',' + h + ',' + i + ',' + j + ',' + k + ',' + l + ',' + m + ',' + n + ',' + o+ ',' + p + ')';
  }
  
  window.requestAnimationFrame= (function () { 
    return window.requestAnimationFrame || 
    window.webkitRequestAnimationFrame || 
    window.mozRequestAnimationFrame || 
    window.oRequestAnimationFrame || 
    // if all else fails, use setTimeout 
    function (callback) { 
      return window.setTimeout(callback, 1000 / 60); // shoot for 60 fps 
    }; 
  })(); 
  
  function webgl_detect(return_context) {
    if (!!window.WebGLRenderingContext) {
      var canvas = document.createElement("canvas");
      var names = ['webgl', 'experimental-webgl', 'moz-webgl', 'webkit-3d'];
      var context = false;
  
      for (var i = 0;i < 4; i++) {
        try {
          context = canvas.getContext(names[i]);
          if (context && typeof context.getParameter == 'function') {
            // WebGL is enabled
            if (return_context) {
              // return WebGL object if the function's argument is present
              return {
                name: names[i],
                gl: context
              };
            }
            // else, return just true
            return true;
          }
        } catch(e) {}
      }
  
      // WebGL is supported, but disabled
      return false;
    }
  
    // WebGL not supported
    return false;
  }
  
  function load_js(file, callback) {
    var _doc = document.getElementsByTagName('head')[0];
    var js = document.createElement('script');
    js.setAttribute('type', 'text/javascript');
    js.setAttribute('src', file);
    _doc.appendChild(js);
    if (!/*@cc_on!@*/0) { //if not ie
      //firefox2firefox3safari3.1+opera9.6+ support js.onload
      js.onload = function () {
        callback();
      }
    } else {
      //ie6ie7 support js.onreadystatechange
      js.onReadyStateChange = function () {
        if (js.readyState == 'loaded' || js.readyState == 'complete') {
          callback();
        }
      }
    }
  }
  
  function rotation_to_position(z, rx, ry, rz) {
    z = - z;
    rx = - rx;
  
    var x = snot.bg_size / 2;
    var y = snot.bg_size / 2;
  
    var transform = css_text_to_matrix('translate3d(' + x + 'px,' + y + 'px,0) rotateY(' + (0) + 'deg) rotateX(' + (0) + 'deg) rotateY(' + (ry ? - ry : 0) + 'deg) rotateX(' + (rx ? - rx : 0) + 'deg) rotateZ(' + (rz ? rz : 0) +'deg) translateZ(' + z + 'px)' );
    return [ - transform[12] + snot.bg_size / 2, transform[13] - snot.bg_size / 2, - transform[14]];
  }

  function m_make_rotation_axis(point, rotation) {
    return new THREE.Matrix4().makeRotationAxis(point, rotation);
  }

  function m_multiply() {
    var mats = arguments;

    var l = mats.length;
    while (l > 1) {
      var last2 = mats[l - 2];
      var last1 = mats[l - 1];
      mats[l - 2] = new THREE.Matrix4().multiplyMatrices(
        last2,
        last1
      );
      l--;
    }
    return mats[0];
  }

  function v_set_from_matrix_position(mat4) {
    return new THREE.Vector3().setFromMatrixPosition(mat4);
  }

  function m_set_position(p) {
    return new THREE.Matrix4().setPosition(p);
  }

  function m_make_rotation_from_quaternion(q) {
    return new THREE.Matrix4().makeRotationFromQuaternion(q);
  }

  function merge_json(obj, json) {
    for (var i in json) {
      if (obj[i] == undefined) {
        obj[i] = json[i];
      }
    }
  }

  function standardlization(point, r) {
    r = r || 1;
    var distance_to_origin = distance3D(0, 0, 0, point.x, point.y, point.z);
    point.x *= r / distance_to_origin;
    point.y *= r / distance_to_origin;
    point.z *= r / distance_to_origin;
  }

  function is_point_inside(point, a, b) {
    if (point.x >= b.x && point.y >= b.y && point.z >= b.z &&
        point.x < a.x && point.y < a.y && point.z < a.z) {
      return true;
    }
    return false;
  }
  function get_inside_points(points, a, b) {
    var candidates = [];
    for (var i in points) {
      if (is_point_inside(points[i], a, b)) {
        candidates.push(points[i]);
      }
    }
    return candidates;
  }
  /*
   * see ../images/octree.png
   *
   * a.x > b.x
   * a.y > b.y
   * a.z > b.z
   */
  function octree_collision(a, b, points_a, points_b, res, depth = 1) {
    if (!points_a.length || !points_b.length) {
      return false;
    }
    if (depth > 7) {
      res.push({
        points_a: points_a,
        points_b: points_b,
      });
      return true;
    }

    // random split
    var half = {
      x: (a.x - b.x) / (Math.random() * 0.2 - 0.1 + 2),
      y: (a.y - b.y) / (Math.random() * 0.2 - 0.1 + 2),
      z: (a.z - b.z) / (Math.random() * 0.2 - 0.1 + 2),
    };
    var b_xyz = {
      x: b.x + half.x,
      y: b.y + half.y,
      z: b.z + half.z,
    };
    var b_x = {
      x: b_xyz.x,
      y: b.y,
      z: b.z,
    };
    var b_y = {
      x: b.x,
      y: b_xyz.y,
      z: b.z,
    };
    var b_z = {
      x: b.x,
      y: b.y,
      z: b_xyz.z,
    };
    var b_xz = {
      x: b_xyz.x,
      y: b.y,
      z: b_xyz.z,
    };
    var b_xy = {
      x: b_xyz.x,
      y: b_xyz.y,
      z: b.z,
    };
    var b_yz = {
      x: b.x,
      y: b_xyz.y,
      z: b_xyz.z,
    };

    var a_z = {
      x: a.x,
      y: a.y,
      z: a.z - half.z,
    };
    var a_x = {
      x: a.x - half.x,
      y: a.y,
      z: a.z,
    };
    var a_y = {
      x: a.x,
      y: a.y - half.y,
      z: a.z,
    };
    var a_xy = {
      x: a_x.x,
      y: a_y.y,
      z: a.z,
    };
    var a_yz = {
      x: a.x,
      y: a_y.y,
      z: a_z.z,
    };
    var a_xz = {
      x: a_x.x,
      y: a.y,
      z: a_z.z,
    };

    function sub_collision(a, b) {
      var candidates_a = get_inside_points(points_a, a, b);
      var candidates_b = get_inside_points(points_b, a, b);
      return octree_collision(a, b, candidates_a, candidates_b, res, depth + 1);
    }

    var pairs = [
      [a_x, b_yz],
      [a, b_xyz],
      [a_xy, b_z],
      [a_y, b_xz],

      [a_xz, b_y],
      [a_z, b_xy],
      [b_xyz, b],
      [a_yz, b_x],
    ];

    var found = false;
    for (var i in pairs) {
      if (sub_collision(pairs[i][0], pairs[i][1])) {
        found = true;
      }
    }

    return found;
  }

}(window);

!function(global) {

  var PI = Math.PI;
  var sin = Math.sin;
  var cos = Math.cos;
  var tan = Math.tan;
  var acos = Math.acos;
  var atan = Math.atan;
  var pow = Math.pow;
  var floor = Math.floor;
  var sqrt = Math.sqrt;

  var snot = {
    debug: false,
    container: document.getElementById('snot-container'),
    dom: document.getElementById('snot-wrap'),

    camera_look_at: {
      x: 0,
      y: 0,
      z: 1,
    },
    controls: {
      screen_orientation: 0,
      gyro_data: {
        alpha: 0,
        beta: 90 * PI / 180,
        gamma: 0
      },
    },
    mouse_sensitivity: 0.3,
    auto_rotation: 0,
    frames: 0,
    bg_rotation: [0, 0, 0, 0, 0, 0],

    pause_animation: false,


    bg_size: 1024,

    generator: {},
    gyro: false,
    ry: 0,        // Rotate * degree around y axis
    rx: 0,        // Rotate * degree around x axis
    dest_rx: 0,
    dest_ry: 0,
    dest_rz: 0,

    max_fov: 120, // Max field of view (degree)
    min_fov: 60,   // Min field of view (degree)
    fov: 90,      // Default field of view
    smooth: 0.83,
    min_detect_distance: 20,
    on_click: function() {},
    on_sprite_click: function() {},
  };
  var camera_dom = document.getElementById('snot-camera');
  var prev_gyro;

  var camera_base_transform;
  var previous_quat = new THREE.Quaternion();

  function _pointStandardlization(x, y, z) {
    var ratio = 200 / distance3D(x, y, z, 0, 0, 0);
    return [x * ratio, y * ratio, z * ratio];
  }

  if (global.snot) {
    for (var i in snot) {
      global.snot[i] = snot[i];
    }
    snot = global.snot;
  } else {
    console.error('snot-utils.js is missing');
    return;
  }
  var m_make_rotation_axis = snot.util.m_make_rotation_axis;
  var m_multiply = snot.util.m_multiply;
  var m_set_position = snot.util.m_set_position;
  var m_make_rotation_from_quaternion = snot.util.m_make_rotation_from_quaternion;
  var v_set_from_matrix_position = snot.util.v_set_from_matrix_position;

  var util = global.snot.util;
  var epsilon = util.epsilon;
  var distance3D = util.distance3D;
  var distance2D = util.distance2D;

  var set_fov = function (degree) {
    if (degree < snot.min_fov || degree > snot.max_fov) {
      return;
    }
    snot.fov = degree;
    snot.container.style['-webkit-transform'] = 'scale(' + tan(snot.max_fov / 2 * PI / 180) / tan(snot.fov / 2 * PI / 180) + ')';
  }

  function reset() {
    var sprites = document.getElementsByClassName('sprite');
    for (var i = 0; i < sprites.length; ++ i) {
      sprites[i].remove();
    }
  }

  var init = function(config) {
    reset();

    cancelAnimationFrame(snot._animateId);

    for (var i in config) {
      if (i == 'generator') {
        util.merge_json(snot.generator, config.generator);
      }
      snot[i] = config[i];
    }
    prev_gyro = snot.gyro;

    snot.dest_rx = snot.rx;
    snot.dest_ry = snot.ry;

    snot.width = snot.dom.offsetWidth;
    snot.height = snot.dom.offsetHeight;

    //compute the max Horizontal Field of view
    //perspective= projectiveScreenWidth/2
    //           = width/2/tan(max_fov/2)
    snot.perspective = snot.width / 2 / tan(snot.max_fov / 2 * PI / 180);

    snot.container.style['-webkit-perspective'] = snot.perspective + 'px';

    //camera offset
    // Z is depth(front) Y is height X is right
    //
    // translateZ setFOV
    // rotateX rotate around X axis
    // rotateY rotate around Y axis
    // translateX translate the Camera to center
    // translateY
    camera_base_transform = 'translateX(' + epsilon(- (snot.bg_size - snot.width) / 2) + 'px) translateY(' + epsilon(- (snot.bg_size - snot.height) / 2) + 'px)';
    camera_dom.style['-webkit-transform'] = 'translateZ(-' + snot.perspective + 'px) rotateY(' + epsilon(snot.rx) + 'deg) rotateX(' + epsilon(snot.ry) + 'deg)' + camera_base_transform;

    set_fov(snot.fov);

    if (config.bg_imgs) {
      load_bg_imgs(config.bg_imgs, config.bg_rotation || snot.bg_rotation);
    }

    if (config) {
      load_sprites(config.sprites);
    }

    if (util.is_mobile()) {
    }

    if (config.callback) {
      config.callback();
    }
    snot.init_controls();
    update();
  }

  function load_bg_imgs(bg_imgs, bg_rotation) {
    var bg_config = {
      front : 'rotateY(90deg)' + '                rotateZ(' + bg_rotation[0] + 'deg)  translateZ(-' + (snot.bg_size / 2) + 'px)',
      bottom: 'rotateY(90deg)' + 'rotateX(90deg)  rotateZ(' + bg_rotation[1] + 'deg)  translateZ(-' + (snot.bg_size / 2) + 'px) rotateZ(90deg)',
      left  : 'rotateY(90deg)' + 'rotateY(90deg)  rotateZ(' + bg_rotation[2] + 'deg)  translateZ(-' + (snot.bg_size / 2) + 'px)',
      back  : 'rotateY(90deg)' + 'rotateY(180deg) rotateZ(' + bg_rotation[3] + 'deg)  translateZ(-' + (snot.bg_size / 2) + 'px)',
      top   : 'rotateY(90deg)' + 'rotateX(-90deg) rotateZ(' + bg_rotation[4] + 'deg)  translateZ(-' + (snot.bg_size / 2) + 'px) rotateZ(-90deg)',
      right : 'rotateY(90deg)' + 'rotateY(-90deg) rotateZ(' + bg_rotation[5] + 'deg)  translateZ(-' + (snot.bg_size / 2) + 'px)'
    };

    var bg_dom;
    var count = 0;
    for (var i in bg_config) {
      bg_dom = document.getElementsByClassName('snot-bg ' + i)[0];
      bg_dom.style['-webkit-transform'] = bg_config[i];
      bg_dom.style['width'] = snot.bg_size + 2 + 'px';        // 2 more pixels for overlapping gaps ( chrome's bug )
      bg_dom.style['height'] = snot.bg_size + 2 + 'px';       // 2 more pixels for overlapping gaps ( chrome's bug )

      bg_dom.setAttribute('src', bg_imgs[count]);
      bg_dom.setAttribute('data-index', count);
      ++count;
    }
  }

  var load_sprites = function(sprites) {
    for (var i in sprites) {
      var t = sprites[i];
      if (t.standardlization) {
        var standard = _pointStandardlization(t.x,t.y,t.z);
        t.x=standard[0];
        t.y=standard[1];
        t.z=standard[2];
      }

      var temp_wrapper = document.createElement('div');
      temp_wrapper.innerHTML = template(snot.generator[t.generator], t);
      var element = temp_wrapper.firstChild;
      element.data = sprites[i];
      add_sprite_by_position(element, t);
    }
  }

  function add_sprite_by_position(element, p) {

    var x = - p.x;
    var z = - p.z;
    var y = - p.y;

    var spriteContainer = document.createElement('div');
    spriteContainer.style.display = 'inline-block';
    spriteContainer.style.position = 'absolute';
    spriteContainer.className = 'sprite-container';
    spriteContainer.id = element.data.id;

    spriteContainer.style['-webkit-transform-origin-x'] = '0';
    spriteContainer.style['-webkit-transform-origin-y'] = '0';

    var arc = x == 0 && z == 0 ? 0 : acos( z / pow(x * x + z * z, 0.5));

    arc = x < 0 ? 2 * PI - arc : arc;
    arc = arc * 180 / PI;

    var r = distance3D(x, y, z, 0, 0, 0);
    x += snot.bg_size / 2;
    y += snot.bg_size / 2;

    spriteContainer.style['-webkit-transform'] = 'translate3d(' + epsilon(x) + 'px,' + epsilon(y) + 'px,' + epsilon(z) + 'px) rotateY(' + epsilon(arc) + 'deg) rotateX(' + epsilon(- (y - snot.bg_size / 2) / r * 90)+'deg) rotateY(180deg)';

    var spriteWrap = document.createElement('div');
    spriteWrap.className='sprite-wrap';
    spriteWrap.appendChild(element);
    spriteWrap.setAttribute('data-visible', element.data.visible == false ? false : true);

    spriteContainer.appendChild(spriteWrap);
    camera_dom.appendChild(spriteContainer);
  }

  var update_sprite_visibility = function(id) {
    var visible = snot.sprites[id].visible;
    var spriteContainer = document.getElementById(id);
    spriteContainer.firstChild.setAttribute('data-visible', visible ? true : false);
  }

  var update_sprite_position = function(id) {
    var x = snot.sprites[id].x;
    var y = snot.sprites[id].y;
    var z = snot.sprites[id].z;
    z=-z;
    y=-y;
    var arc = x == 0 && z == 0 ? 0 : acos( z / pow(x * x + z * z, 0.5));

    arc = x < 0 ? 2 * PI - arc : arc;
    arc = arc * 180/ PI;

    var r = distance3D(x, y, z, 0, 0, 0);
    x += snot.bg_size / 2;
    y += snot.bg_size / 2;

    var spriteContainer = document.getElementById(id);

    spriteContainer.style['-webkit-transform'] = 'translate3d(' + epsilon(x) + 'px,' + epsilon(y) + 'px,' + epsilon(z) + 'px) rotateY(' + epsilon(arc) + 'deg) rotateX(' + epsilon(- (y - snot.bg_size / 2) / r * 90) + 'deg) rotateY(180deg)';
  }

  function run() {
    snot._animateId = requestAnimationFrame(run);
    if (!snot.pause_animation) {
      update();
    }
  }

  var camera_euler = new THREE.Euler();
  var target_quat = new THREE.Quaternion();
  var rotate_90_quat = new THREE.Quaternion(- sqrt( 0.5 ), 0, 0, sqrt( 0.5 ))
  var adjust_screen_quats = {
    0: new THREE.Quaternion().setFromAxisAngle(new THREE.Vector3(0, 0, 1), 0),
    90: new THREE.Quaternion().setFromAxisAngle(new THREE.Vector3(0, 0, 1), - 90),
    180: new THREE.Quaternion().setFromAxisAngle(new THREE.Vector3(0, 0, 1), - 180),
    '-90': new THREE.Quaternion().setFromAxisAngle(new THREE.Vector3(0, 0, 1), 90),
  };
  var look_at_euler = new THREE.Euler();

  function update_camera(x, y, z) {

    camera_euler.set(y, x, z, 'YXZ'); // 'ZXY' for the device, but 'YXZ' for us

    target_quat.setFromEuler(camera_euler); // orient the device

    target_quat.multiply(rotate_90_quat); // camera looks out the back of the device, not the top
                                          // - PI/2 around the x-axis
    target_quat.multiply(adjust_screen_quats[snot.controls.screen_orientation]); // adjust for screen orientation

    var slerp_quat = new THREE.Quaternion();
    THREE.Quaternion.slerp(target_quat, previous_quat, slerp_quat, snot.smooth);
    previous_quat = slerp_quat;
    var look_at_quat = slerp_quat.clone();
    look_at_quat.x *= -1;
    look_at_quat.z *= -1;
    var look_at_mat = m_make_rotation_from_quaternion(look_at_quat.normalize()).transpose();
    for (var i = 0; i < look_at_mat.elements.length; ++i) {
      look_at_mat.elements[i] = epsilon(look_at_mat.elements[i]);
    }
    var look_at_rot = look_at_euler.setFromRotationMatrix(look_at_mat, 'XZY');

    snot.rx = look_at_rot._x * 180 / PI;
    snot.ry = - look_at_rot._y * 180 / PI;
    snot.rz = look_at_rot._z * 180 / PI;

    snot.camera_look_at = v_set_from_matrix_position(m_multiply(
      m_make_rotation_axis({x: 0, y: 1, z: 0}, look_at_rot._y),
      m_make_rotation_axis({x: 0, y: 0, z: 1}, look_at_rot._z),
      m_make_rotation_axis({x: 1, y: 0, z: 0}, - look_at_rot._x),
      m_set_position({x: 0, y: 0, z: 1})
    )); // bad performance here

    camera_dom.style.transform = 'translateZ(' + epsilon(snot.perspective) + 'px)' + " matrix3d(" + look_at_mat.elements + ")"+ camera_base_transform;
  }

  function update() {
    snot.frames++;

    if (snot.gyro) {
      if (snot.controls.gyro_data.alpha === -1 && snot.controls.gyro_data.beta === -1 && snot.controls.gyro_data.gamma === - 1) {
        return;
      }

      update_camera(snot.controls.gyro_data.alpha, snot.controls.gyro_data.beta, - snot.controls.gyro_data.gamma);
    } else {
      if (prev_gyro) {
        snot.dest_rx = 0;
        snot.dest_ry = 0;
      }
      snot.dest_ry -= snot.auto_rotation;
      update_camera(- snot.dest_ry * PI / 180, snot.dest_rx * PI / 180 + PI/2, 0);
    }
    prev_gyro = snot.gyro;

    for (var i in snot.sprites) {
      var sprite = snot.sprites[i];
      if (sprite.need_update_position) {
        sprite.need_update_position = false;
        update_sprite_position(sprite.id);
      }
      if (sprite.need_update_visibility) {
        sprite.need_update_visibility = false;
        update_sprite_visibility(sprite.id);
      }
    }
    if (snot.debug) {
      document.getElementById('logger').innerHTML = 'rx:' + parseInt(snot.rx) + ' ' +
                        'ry:' + parseInt(snot.ry) + ' ' +
                        'rz:' + parseInt(snot.rz);
    }
  }


  snot.controls.mouse_click = function(x, y) {
    var R = 100;
    var fov = snot.fov;
    var bg_size = snot.bg_size;
    var arcFactor = Math.PI / 180;
    var rz = snot.rz * arcFactor;
    var width = snot.width;
    var height = snot.height;

    var ry = (x / width - 0.5) * fov;
    var rx = (y / height-0.5) * fov * height / width;
    var r = cos(fov / 2 * arcFactor) * bg_size;
    var ratiox = (x - width / 2) / width * 2;
    var ratioy = (y - height / 2) / width * 2;
    var P = sin(fov / 2 * arcFactor) * bg_size;

    ry = atan(ratiox * P / r);
    rx = atan(ratioy * P / r);

    ry *= 180 / PI;
    rx *= 180 / PI;

    var xyz2 = util.rotation_to_position(R, rx, 0);

    var rr = distance3D(- tan(ry * arcFactor) * xyz2[2], - xyz2[1], xyz2[2], 0, 0, 0);
    var ratio = R / rr;

    var new_x = - tan(ry * PI / 180) * xyz2[2] * ratio;
    var new_y = - xyz2[1] * ratio;
    var new_z = xyz2[2] * ratio;

    var pos = v_set_from_matrix_position(m_multiply(
      m_make_rotation_axis({x: 0, y: 1, z: 0}, snot.ry * PI / 180),
      m_make_rotation_axis({x: 0, y: 0, z: 1}, - snot.rz * PI / 180),
      m_make_rotation_axis({x: 1, y: 0, z: 0}, - snot.rx * PI / 180),
      m_set_position({x: new_x, y: new_y, z: new_z})
    ));

    ax = pos.x;
    ay = pos.y;
    az = pos.z;

    var min_offset = 0.4;
    var min_distance = snot.min_detect_distance;
    var nearest;

    var spriteContainers = document.getElementsByClassName('sprite-container');
    for (var i = 0 ;i < spriteContainers.length; ++i) {
      var self = spriteContainers[i];
      var matrix = util.css_text_to_matrix(self.style.webkitTransform);
      var rate_ = 100 / distance3D(0, 0, 0, snot.bg_size / 2 - matrix[12], matrix[13] - snot.bg_size / 2, - matrix[14]);

      var distance = distance3D(ax, - ay, az, (snot.bg_size / 2 - matrix[12]) * rate_, rate_ * (matrix[13] - snot.bg_size / 2), rate_ * ( - matrix[14]));
      if (distance < min_distance) {
        min_distance = distance;
        nearest = self.children[0];
      }
    }

    var rotation = util.position_to_rotation(ax, az, ay);
    if (nearest) {
      snot.on_sprite_click(snot.sprites[nearest.parentElement.id], nearest);
    } else {
      snot.on_click({
        x: ax,
        y: ay,
        z: az,
      }, {
        rx: rotation[0],
        ry: rotation[1]
      });
    }
  }

  util.merge_json(snot, {
    set_fov: set_fov,
    init: init,
    run: run,
    update: update,
    load_sprites: load_sprites,
  });
}(window);

!function(global) {

  var PI = Math.PI;
  var snot = {

    camera_look_at: {
      x: 0,
      y: 0,
      z: 1,
    },
    controls: {
      screen_orientation: 0,
      gyro_data: {
        alpha: 0,
        beta: 90 * PI / 180,
        gamma: 0
      },
    },
    mouse_sensitivity: 0.3,
    auto_rotation: 0,
    frames:0,
    bg_rotation: [0, 0, 0, 0, 0, 0],

    pause_animation: false,
    generator: {},

    dom      : document.getElementById('snot-wrap'),
    camera   : document.getElementById('snot-camera'),
    container: document.getElementById('snot-container'),

    bg_size: 1024,

    gyro: false,

    smooth: 0.83,
    quaternion: {},

    rz: 0,
    ry: 0,       // Rotate * degree around y axis
    rx: 0,       // Rotate * degree around x axis

    dest_rx: 0,
    dest_ry: 0,
    dest_rz: 0,

    max_fov: 120, // Max field of view (degree)
    min_fov: 60,  // Min field of view (degree)
    fov: 90,     // Default field of view
  };

  var util = global.snot.util;
  util.merge_json(global.snot, snot);
  snot = global.snot;
  var epsilon = util.epsilon;
  var distance3D = util.distance3D;
  var distance2D = util.distance2D;

  var camera;
  var scene;
  var renderer;
  var bg_materials = [];
  var suspects = [];
  var sprites = {};
  var _overdraw = 1;
  THREE.ImageUtils.crossOrigin = '*';

  var mouse_down_x;
  var mouse_down_rx;
  var mouse_down_ry;
  var mouse_down_y;
  var is_mouse_down = false;

  //0     1    2    3    4   5
  //front down left back top right
  //front down left back top right
  var img_index_convert = [3, 0, 4, 1, 5, 2];
  function load_bg_imgs(imgs) {
    if (imgs.length == 1) {
      var SphereGeometry = new THREE.SphereGeometry(snot.bg_size, 32, 32);
      SphereGeometry.scale(- 1, 1, 1);
      var SphereMaterial = new THREE.MeshBasicMaterial({
        map: new THREE.TextureLoader().load(imgs[0])
      });
      var SphereMesh = new THREE.Mesh(SphereGeometry, SphereMaterial);
      scene.add(SphereMesh);
    } else if (img.length == 6) {
      var size = snot.bg_size;
      var precision = 1;
      var geometry = new THREE.BoxGeometry(size, size, size, precision, precision, precision);
      for (var index = 0;index < 6; ++index) {
        var img_url = imgs[img_index_convert[index]];
        bg_materials.push(new THREE.MeshBasicMaterial({
          map: THREE.ImageUtils.loadTexture(img_url, THREE.UVMapping),
          overdraw: _overdraw
        }));
      }
      var material= new THREE.MeshFaceMaterial(bg_materials);
      var mesh = new THREE.Mesh(geometry, material);
      mesh.scale.x = - 1;

      scene.add(mesh);
    }
  }
  function init(config) {
    for (var i in config) {
      if (i == 'generator') {
        for (var j in config.generator) {
          snot.generator[j] = config.generator[j];
        }
        continue;
      }
      snot[i] = config[i];
    }
    var smooth = snot.smooth;
    snot.smooth = 0;
    for (var i in sprites) {
      scene.remove(scene.getObjectByName(i));
    }
    sprites = {};

    var container = snot.container;
    camera = new THREE.PerspectiveCamera(snot.fov, window.innerWidth / window.innerHeight, 1, snot.bg_size);
    camera.target = new THREE.Vector3(0, 0, 0);
    snot.camera = camera;

    scene = new THREE.Scene();

    if (config.callback) {
      config.callback();
    }
    load_bg_imgs(config.bg_imgs);

    var SphereGeometry = new THREE.SphereGeometry(snot.bg_size * 2, 32, 32);
    var SphereMaterial = new THREE.MeshBasicMaterial({side: THREE.DoubleSide});
    var SphereMesh = new THREE.Mesh(SphereGeometry, SphereMaterial);
    scene.add(SphereMesh);
    suspects.push(SphereMesh);

    load_sprites(config.sprites);

    renderer = new THREE.WebGLRenderer();

    renderer.setPixelRatio(window.devicePixelRatio);
    renderer.setSize(window.innerWidth, window.innerHeight);
    container.appendChild(renderer.domElement);

    update();
    snot.smooth = smooth;
    snot.init_controls();
  }

  snot.controls.mouse_click = function(x, y) {
    var raycaster = new THREE.Raycaster();
    var mouse = new THREE.Vector2();
    mouse.set((x / window.innerWidth) * 2 - 1, - (y / window.innerHeight) * 2 + 1);
    raycaster.setFromCamera(mouse, camera);
    raycaster.far = snot.bg_size * 2;
    var intersects = raycaster.intersectObjects(suspects);
    if (intersects.length != 0) {
      var point = intersects[0].point;
      if (intersects[0].object.data) {
        snot.on_sprite_click(intersects[0].object.data);
      } else {
        var rotation = util.position_to_rotation(point.x, point.y, point.z);
        snot.on_click(point, rotation);
      }
    }
  };

  var sqrt = Math.sqrt;
  var camera_euler = new THREE.Euler();
  var target_quat = new THREE.Quaternion();
  var rotate_90_quat = new THREE.Quaternion(- sqrt( 0.5 ), 0, 0, sqrt( 0.5 ))
  var adjust_screen_quats = {
    0: new THREE.Quaternion().setFromAxisAngle(new THREE.Vector3(0, 0, 1), 0),
    90: new THREE.Quaternion().setFromAxisAngle(new THREE.Vector3(0, 0, 1), - 90),
    180: new THREE.Quaternion().setFromAxisAngle(new THREE.Vector3(0, 0, 1), - 180),
    '-90': new THREE.Quaternion().setFromAxisAngle(new THREE.Vector3(0, 0, 1), 90),
  };

  function update() {

    snot.ry += snot.auto_rotation;

    var ry = snot.dest_rx * Math.PI / 180 + Math.PI / 2;
    var rx = - snot.dest_ry * Math.PI / 180 + Math.PI;
    var rz = 0;

    if (snot.gyro) {
      ry = snot.controls.gyro_data.beta;
      rx = snot.controls.gyro_data.alpha;
      rz = - snot.controls.gyro_data.gamma;
    }

    camera.autoUpdateMatrix = false;

    camera_euler.set(ry, rx, rz, 'YXZ'); // 'ZXY' for the device, but 'YXZ' for us

    target_quat.setFromEuler(camera_euler); // orient the device
    target_quat.multiply(rotate_90_quat); // camera looks out the back of the device, not the top
                                          // - PI/2 around the x-axis
    target_quat.multiply(adjust_screen_quats[snot.controls.screen_orientation]); // adjust for screen orientation

    var new_quat = new THREE.Quaternion();
    THREE.Quaternion.slerp(camera.quaternion, target_quat, new_quat, 1 - snot.smooth);
    camera.quaternion.copy(new_quat);
    camera.quaternion.normalize();

    var euler = new THREE.Euler();
    euler.order = 'YXZ';
    euler.setFromQuaternion(camera.quaternion)
    snot.rx = euler.x * 180 / Math.PI;
    snot.ry = euler.y * 180 / Math.PI - 180;
    snot.rz = euler.z * 180 / Math.PI;

    camera.fov = snot.fov;
    camera.updateProjectionMatrix();
    renderer.render(scene, camera);

    if (snot.debug) {
      document.getElementById('logger').innerHTML = 'rx:' + parseInt(snot.rx) + ' ' +
                        'ry:' + parseInt(snot.ry) + ' ' +
                        'rz:' + parseInt(snot.rz);
    }
  }

  function set_fov(fov) {
    snot.fov = fov;
    snot.fov = snot.fov > snot.max_fov ? snot.max_fov : snot.fov;
    snot.fov = snot.fov < snot.min_fov ? snot.min_fov : snot.fov;
  }

  function set_rx(rx) {
    snot.dest_rx = rx;
  }

  function set_ry(ry) {
    snot.dest_ry = ry;
  }

  function load_sprites(sps) {
    for (var i in sps) {
      var functionName = sps[i].generator;
      var mesh = snot.generator[functionName](sps[i]);

      mesh.data = sps[i];
      sprites[mesh.name] = true;
      suspects.push(mesh);
      scene.add(mesh);

    }
  }

  function run() {
    snot._animateId = requestAnimationFrame(run);
    if (!snot.pause_animation) {
      update();
    }
  }

  util.merge_json(global.snot, {
    set_fov: set_fov,
    set_rx: set_rx,
    set_ry: set_ry,
    init: init,
    run: run,
    load_sprites: load_sprites
  });
}(window);

!function(global) {

  var dom_offset_top;
  var dom_offset_left;
  snot.init_controls = function() {

    dom_offset_left = util.left_pos(snot.dom);
    dom_offset_top = util.top_pos(snot.dom);
    snot.container.addEventListener('touchstart', mouse_down, false);
    snot.container.addEventListener('touchmove' , mouse_move, false);
    snot.container.addEventListener('touchend'  , mouse_up  , false);

    snot.container.addEventListener('mousedown' , mouse_down , false);
    snot.container.addEventListener('mousemove' , mouse_move , false);
    snot.container.addEventListener('mouseup'   , mouse_up   , false);
    snot.container.addEventListener('mousewheel', mouse_wheel, false);

    window.addEventListener('orientationchange', function(ev) {
      snot.controls.screen_orientation = window.orientation || 0;
    }, false);

    window.addEventListener('deviceorientation', function(ev) {
      if (ev.alpha !== null) {
        snot.controls.gyro_data.beta = ev.beta  * Math.PI / 180 ;
        snot.controls.gyro_data.gamma = ev.gamma  * Math.PI / 180;
        snot.controls.gyro_data.alpha = ev.alpha  * Math.PI / 180;
      } else {
        snot.controls.gyro_data.beta = snot.controls.gyro_data.gamma = snot.controls.gyro_data.alpha = -1;
      }
    }, true);
  }

  var util = snot.util;
  var distance3D = util.distance3D;
  var distance2D = util.distance2D;
  var floor = Math.floor;
  var cos = Math.cos;
  var sin = Math.sin;
  var atan = Math.atan;
  var tan = Math.tan;
  var PI = Math.PI;

  var m_make_rotation_axis = snot.util.m_make_rotation_axis;
  var m_multiply = snot.util.m_multiply;
  var m_set_position = snot.util.m_set_position;
  var m_make_rotation_from_quaternion = snot.util.m_make_rotation_from_quaternion;
  var v_set_from_matrix_position = snot.util.v_set_from_matrix_position;

  var touches = {
    fx: 0,   // First  finger x
    fy: 0,   // First  finger y
    sx: 0,   // Second finger x
    sy: 0    // Second finger y
  };

  var mouse_move = function(event) {

    event.preventDefault();
    event.stopPropagation();

    var x = Math.floor(event.clientX >= 0 ? event.clientX : event.touches[0].pageX);
    var y = Math.floor(event.clientY >= 0 ? event.clientY : event.touches[0].pageY);
    x -= dom_offset_left;
    y -= dom_offset_top;

    touches.click = false;

    if (!touches.is_touching) {
      return false;
    }

    if (event.touches && event.touches.length > 1) {

      var cfx = x;                          // Current frist  finger x
      var cfy = y;                          // Current first  finger y
      var csx = event.touches[1].pageX;     // Current second finger x
      var csy = event.touches[1].pageY;     // Current second finger y

      var dis = distance2D(touches.fx, touches.fy, touches.sx, touches.sy) - distance2D(cfx, cfy, csx, csy);

      var ratio = 0.12;
      snot.set_fov(snot.fov + dis * ratio);

      touches.fx = cfx;
      touches.fy = cfy;
      touches.sx = csx;
      touches.sy = csy;

      return false;
    }

    var ratio = snot.mouse_sensitivity;

    snot.dest_ry = snot.dest_ry + (touches.fx - x) * ratio;
    snot.dest_rx = snot.dest_rx - (touches.fy - y) * ratio;

    touches.fx = x;
    touches.fy = y;

    snot.dest_rx = snot.dest_rx > 90 ? 90 : snot.dest_rx;
    snot.dest_rx = snot.dest_rx < -90 ? -90 : snot.dest_rx;

  };

  var mouse_down = function (event) {

    event.preventDefault();
    event.stopPropagation();

    var x = floor(event.clientX >= 0 ? event.clientX : event.touches[0].clientX);
    var y = floor(event.clientY >= 0 ? event.clientY : event.touches[0].clientY);
    x -= dom_offset_left;
    y -= dom_offset_top;

    touches.mouse_down_x = x;
    touches.mouse_down_y = y;
    touches.fx = x;
    touches.fy = y;
    touches.click = true;

    if (event.touches && event.touches.length > 1) {

      touches.sx = event.touches[1].pageX;
      touches.sy = event.touches[1].pageY;

    }

    touches.is_touching = true;
  }

  var mouse_wheel = function (event) {

    event.preventDefault();
    event.stopPropagation();

    var offset = event.deltaY;
    snot.set_fov(snot.fov + offset * 0.06);

  }

  var mouse_up = function(event) {
    event.preventDefault();
    event.stopPropagation();

    var x = floor(event.clientX >= 0 ? event.clientX : event.changedTouches[0].pageX);
    var y = floor(event.clientY >= 0 ? event.clientY : event.changedTouches[0].pageY);
    x -= dom_offset_left;
    y -= dom_offset_top;

    //Screen coordinate to Sphere 3d coordinate
    if (distance2D(touches.mouse_down_x, touches.mouse_down_y, x, y) < 5) {
      snot.controls.mouse_click(x, y);
    }
    touches.is_touching = false;
  }

}(window);

//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInRocmVlLm1pbi5qcyIsIlByb2plY3Rvci5qcyIsInRlbXBsYXRlLW5hdGl2ZS5qcyIsInNub3RfdXRpbHMuanMiLCJzbm90X2Nzc19yZW5kZXJlci5qcyIsInNub3Rfd2ViZ2xfcmVuZGVyZXIuanMiLCJzbm90X2NvbnRyb2xzLmpzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FDaitCQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUNqNkJBO0FBQ0E7QUNEQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQzdYQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FDcGJBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQzdRQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBIiwiZmlsZSI6InNub3QubWluLmpzIiwic291cmNlc0NvbnRlbnQiOlsiLy8gdGhyZWVqcy5vcmcvbGljZW5zZVxuJ3VzZSBzdHJpY3QnO3ZhciBUSFJFRT17UkVWSVNJT046XCI3OVwifTtcImZ1bmN0aW9uXCI9PT10eXBlb2YgZGVmaW5lJiZkZWZpbmUuYW1kP2RlZmluZShcInRocmVlXCIsVEhSRUUpOlwidW5kZWZpbmVkXCIhPT10eXBlb2YgZXhwb3J0cyYmXCJ1bmRlZmluZWRcIiE9PXR5cGVvZiBtb2R1bGUmJihtb2R1bGUuZXhwb3J0cz1USFJFRSk7dm9pZCAwPT09TnVtYmVyLkVQU0lMT04mJihOdW1iZXIuRVBTSUxPTj1NYXRoLnBvdygyLC01MikpO3ZvaWQgMD09PU1hdGguc2lnbiYmKE1hdGguc2lnbj1mdW5jdGlvbihhKXtyZXR1cm4gMD5hPy0xOjA8YT8xOithfSk7dm9pZCAwPT09RnVuY3Rpb24ucHJvdG90eXBlLm5hbWUmJk9iamVjdC5kZWZpbmVQcm9wZXJ0eShGdW5jdGlvbi5wcm90b3R5cGUsXCJuYW1lXCIse2dldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLnRvU3RyaW5nKCkubWF0Y2goL15cXHMqZnVuY3Rpb25cXHMqKFxcUyopXFxzKlxcKC8pWzFdfX0pO1xudm9pZCAwPT09T2JqZWN0LmFzc2lnbiYmZnVuY3Rpb24oKXtPYmplY3QuYXNzaWduPWZ1bmN0aW9uKGEpe2lmKHZvaWQgMD09PWF8fG51bGw9PT1hKXRocm93IG5ldyBUeXBlRXJyb3IoXCJDYW5ub3QgY29udmVydCB1bmRlZmluZWQgb3IgbnVsbCB0byBvYmplY3RcIik7Zm9yKHZhciBiPU9iamVjdChhKSxjPTE7Yzxhcmd1bWVudHMubGVuZ3RoO2MrKyl7dmFyIGQ9YXJndW1lbnRzW2NdO2lmKHZvaWQgMCE9PWQmJm51bGwhPT1kKWZvcih2YXIgZSBpbiBkKU9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChkLGUpJiYoYltlXT1kW2VdKX1yZXR1cm4gYn19KCk7XG5PYmplY3QuYXNzaWduKFRIUkVFLHtNT1VTRTp7TEVGVDowLE1JRERMRToxLFJJR0hUOjJ9LEN1bGxGYWNlTm9uZTowLEN1bGxGYWNlQmFjazoxLEN1bGxGYWNlRnJvbnQ6MixDdWxsRmFjZUZyb250QmFjazozLEZyb250RmFjZURpcmVjdGlvbkNXOjAsRnJvbnRGYWNlRGlyZWN0aW9uQ0NXOjEsQmFzaWNTaGFkb3dNYXA6MCxQQ0ZTaGFkb3dNYXA6MSxQQ0ZTb2Z0U2hhZG93TWFwOjIsRnJvbnRTaWRlOjAsQmFja1NpZGU6MSxEb3VibGVTaWRlOjIsRmxhdFNoYWRpbmc6MSxTbW9vdGhTaGFkaW5nOjIsTm9Db2xvcnM6MCxGYWNlQ29sb3JzOjEsVmVydGV4Q29sb3JzOjIsTm9CbGVuZGluZzowLE5vcm1hbEJsZW5kaW5nOjEsQWRkaXRpdmVCbGVuZGluZzoyLFN1YnRyYWN0aXZlQmxlbmRpbmc6MyxNdWx0aXBseUJsZW5kaW5nOjQsQ3VzdG9tQmxlbmRpbmc6NSxBZGRFcXVhdGlvbjoxMDAsU3VidHJhY3RFcXVhdGlvbjoxMDEsUmV2ZXJzZVN1YnRyYWN0RXF1YXRpb246MTAyLE1pbkVxdWF0aW9uOjEwMyxcbk1heEVxdWF0aW9uOjEwNCxaZXJvRmFjdG9yOjIwMCxPbmVGYWN0b3I6MjAxLFNyY0NvbG9yRmFjdG9yOjIwMixPbmVNaW51c1NyY0NvbG9yRmFjdG9yOjIwMyxTcmNBbHBoYUZhY3RvcjoyMDQsT25lTWludXNTcmNBbHBoYUZhY3RvcjoyMDUsRHN0QWxwaGFGYWN0b3I6MjA2LE9uZU1pbnVzRHN0QWxwaGFGYWN0b3I6MjA3LERzdENvbG9yRmFjdG9yOjIwOCxPbmVNaW51c0RzdENvbG9yRmFjdG9yOjIwOSxTcmNBbHBoYVNhdHVyYXRlRmFjdG9yOjIxMCxOZXZlckRlcHRoOjAsQWx3YXlzRGVwdGg6MSxMZXNzRGVwdGg6MixMZXNzRXF1YWxEZXB0aDozLEVxdWFsRGVwdGg6NCxHcmVhdGVyRXF1YWxEZXB0aDo1LEdyZWF0ZXJEZXB0aDo2LE5vdEVxdWFsRGVwdGg6NyxNdWx0aXBseU9wZXJhdGlvbjowLE1peE9wZXJhdGlvbjoxLEFkZE9wZXJhdGlvbjoyLE5vVG9uZU1hcHBpbmc6MCxMaW5lYXJUb25lTWFwcGluZzoxLFJlaW5oYXJkVG9uZU1hcHBpbmc6MixVbmNoYXJ0ZWQyVG9uZU1hcHBpbmc6MyxcbkNpbmVvblRvbmVNYXBwaW5nOjQsVVZNYXBwaW5nOjMwMCxDdWJlUmVmbGVjdGlvbk1hcHBpbmc6MzAxLEN1YmVSZWZyYWN0aW9uTWFwcGluZzozMDIsRXF1aXJlY3Rhbmd1bGFyUmVmbGVjdGlvbk1hcHBpbmc6MzAzLEVxdWlyZWN0YW5ndWxhclJlZnJhY3Rpb25NYXBwaW5nOjMwNCxTcGhlcmljYWxSZWZsZWN0aW9uTWFwcGluZzozMDUsQ3ViZVVWUmVmbGVjdGlvbk1hcHBpbmc6MzA2LEN1YmVVVlJlZnJhY3Rpb25NYXBwaW5nOjMwNyxSZXBlYXRXcmFwcGluZzoxRTMsQ2xhbXBUb0VkZ2VXcmFwcGluZzoxMDAxLE1pcnJvcmVkUmVwZWF0V3JhcHBpbmc6MTAwMixOZWFyZXN0RmlsdGVyOjEwMDMsTmVhcmVzdE1pcE1hcE5lYXJlc3RGaWx0ZXI6MTAwNCxOZWFyZXN0TWlwTWFwTGluZWFyRmlsdGVyOjEwMDUsTGluZWFyRmlsdGVyOjEwMDYsTGluZWFyTWlwTWFwTmVhcmVzdEZpbHRlcjoxMDA3LExpbmVhck1pcE1hcExpbmVhckZpbHRlcjoxMDA4LFVuc2lnbmVkQnl0ZVR5cGU6MTAwOSxcbkJ5dGVUeXBlOjEwMTAsU2hvcnRUeXBlOjEwMTEsVW5zaWduZWRTaG9ydFR5cGU6MTAxMixJbnRUeXBlOjEwMTMsVW5zaWduZWRJbnRUeXBlOjEwMTQsRmxvYXRUeXBlOjEwMTUsSGFsZkZsb2F0VHlwZToxMDI1LFVuc2lnbmVkU2hvcnQ0NDQ0VHlwZToxMDE2LFVuc2lnbmVkU2hvcnQ1NTUxVHlwZToxMDE3LFVuc2lnbmVkU2hvcnQ1NjVUeXBlOjEwMTgsQWxwaGFGb3JtYXQ6MTAxOSxSR0JGb3JtYXQ6MTAyMCxSR0JBRm9ybWF0OjEwMjEsTHVtaW5hbmNlRm9ybWF0OjEwMjIsTHVtaW5hbmNlQWxwaGFGb3JtYXQ6MTAyMyxSR0JFRm9ybWF0OlRIUkVFLlJHQkFGb3JtYXQsRGVwdGhGb3JtYXQ6MTAyNixSR0JfUzNUQ19EWFQxX0Zvcm1hdDoyMDAxLFJHQkFfUzNUQ19EWFQxX0Zvcm1hdDoyMDAyLFJHQkFfUzNUQ19EWFQzX0Zvcm1hdDoyMDAzLFJHQkFfUzNUQ19EWFQ1X0Zvcm1hdDoyMDA0LFJHQl9QVlJUQ180QlBQVjFfRm9ybWF0OjIxMDAsUkdCX1BWUlRDXzJCUFBWMV9Gb3JtYXQ6MjEwMSxcblJHQkFfUFZSVENfNEJQUFYxX0Zvcm1hdDoyMTAyLFJHQkFfUFZSVENfMkJQUFYxX0Zvcm1hdDoyMTAzLFJHQl9FVEMxX0Zvcm1hdDoyMTUxLExvb3BPbmNlOjIyMDAsTG9vcFJlcGVhdDoyMjAxLExvb3BQaW5nUG9uZzoyMjAyLEludGVycG9sYXRlRGlzY3JldGU6MjMwMCxJbnRlcnBvbGF0ZUxpbmVhcjoyMzAxLEludGVycG9sYXRlU21vb3RoOjIzMDIsWmVyb0N1cnZhdHVyZUVuZGluZzoyNDAwLFplcm9TbG9wZUVuZGluZzoyNDAxLFdyYXBBcm91bmRFbmRpbmc6MjQwMixUcmlhbmdsZXNEcmF3TW9kZTowLFRyaWFuZ2xlU3RyaXBEcmF3TW9kZToxLFRyaWFuZ2xlRmFuRHJhd01vZGU6MixMaW5lYXJFbmNvZGluZzozRTMsc1JHQkVuY29kaW5nOjMwMDEsR2FtbWFFbmNvZGluZzozMDA3LFJHQkVFbmNvZGluZzozMDAyLExvZ0x1dkVuY29kaW5nOjMwMDMsUkdCTTdFbmNvZGluZzozMDA0LFJHQk0xNkVuY29kaW5nOjMwMDUsUkdCREVuY29kaW5nOjMwMDYsQmFzaWNEZXB0aFBhY2tpbmc6MzIwMCxcblJHQkFEZXB0aFBhY2tpbmc6MzIwMX0pO1RIUkVFLkNvbG9yPWZ1bmN0aW9uKGEsYixjKXtyZXR1cm4gdm9pZCAwPT09YiYmdm9pZCAwPT09Yz90aGlzLnNldChhKTp0aGlzLnNldFJHQihhLGIsYyl9O1xuVEhSRUUuQ29sb3IucHJvdG90eXBlPXtjb25zdHJ1Y3RvcjpUSFJFRS5Db2xvcixyOjEsZzoxLGI6MSxzZXQ6ZnVuY3Rpb24oYSl7YSBpbnN0YW5jZW9mIFRIUkVFLkNvbG9yP3RoaXMuY29weShhKTpcIm51bWJlclwiPT09dHlwZW9mIGE/dGhpcy5zZXRIZXgoYSk6XCJzdHJpbmdcIj09PXR5cGVvZiBhJiZ0aGlzLnNldFN0eWxlKGEpO3JldHVybiB0aGlzfSxzZXRTY2FsYXI6ZnVuY3Rpb24oYSl7dGhpcy5iPXRoaXMuZz10aGlzLnI9YX0sc2V0SGV4OmZ1bmN0aW9uKGEpe2E9TWF0aC5mbG9vcihhKTt0aGlzLnI9KGE+PjE2JjI1NSkvMjU1O3RoaXMuZz0oYT4+OCYyNTUpLzI1NTt0aGlzLmI9KGEmMjU1KS8yNTU7cmV0dXJuIHRoaXN9LHNldFJHQjpmdW5jdGlvbihhLGIsYyl7dGhpcy5yPWE7dGhpcy5nPWI7dGhpcy5iPWM7cmV0dXJuIHRoaXN9LHNldEhTTDpmdW5jdGlvbigpe2Z1bmN0aW9uIGEoYSxjLGQpezA+ZCYmKGQrPTEpOzE8ZCYmKGQtPTEpO3JldHVybiBkPDEvNj9hKzYqKGMtYSkqXG5kOi41PmQ/YzpkPDIvMz9hKzYqKGMtYSkqKDIvMy1kKTphfXJldHVybiBmdW5jdGlvbihiLGMsZCl7Yj1USFJFRS5NYXRoLmV1Y2xpZGVhbk1vZHVsbyhiLDEpO2M9VEhSRUUuTWF0aC5jbGFtcChjLDAsMSk7ZD1USFJFRS5NYXRoLmNsYW1wKGQsMCwxKTswPT09Yz90aGlzLnI9dGhpcy5nPXRoaXMuYj1kOihjPS41Pj1kP2QqKDErYyk6ZCtjLWQqYyxkPTIqZC1jLHRoaXMucj1hKGQsYyxiKzEvMyksdGhpcy5nPWEoZCxjLGIpLHRoaXMuYj1hKGQsYyxiLTEvMykpO3JldHVybiB0aGlzfX0oKSxzZXRTdHlsZTpmdW5jdGlvbihhKXtmdW5jdGlvbiBiKGIpe3ZvaWQgMCE9PWImJjE+cGFyc2VGbG9hdChiKSYmY29uc29sZS53YXJuKFwiVEhSRUUuQ29sb3I6IEFscGhhIGNvbXBvbmVudCBvZiBcIithK1wiIHdpbGwgYmUgaWdub3JlZC5cIil9dmFyIGM7aWYoYz0vXigoPzpyZ2J8aHNsKWE/KVxcKFxccyooW15cXCldKilcXCkvLmV4ZWMoYSkpe3ZhciBkPWNbMl07c3dpdGNoKGNbMV0pe2Nhc2UgXCJyZ2JcIjpjYXNlIFwicmdiYVwiOmlmKGM9XG4vXihcXGQrKVxccyosXFxzKihcXGQrKVxccyosXFxzKihcXGQrKVxccyooLFxccyooWzAtOV0qXFwuP1swLTldKylcXHMqKT8kLy5leGVjKGQpKXJldHVybiB0aGlzLnI9TWF0aC5taW4oMjU1LHBhcnNlSW50KGNbMV0sMTApKS8yNTUsdGhpcy5nPU1hdGgubWluKDI1NSxwYXJzZUludChjWzJdLDEwKSkvMjU1LHRoaXMuYj1NYXRoLm1pbigyNTUscGFyc2VJbnQoY1szXSwxMCkpLzI1NSxiKGNbNV0pLHRoaXM7aWYoYz0vXihcXGQrKVxcJVxccyosXFxzKihcXGQrKVxcJVxccyosXFxzKihcXGQrKVxcJVxccyooLFxccyooWzAtOV0qXFwuP1swLTldKylcXHMqKT8kLy5leGVjKGQpKXJldHVybiB0aGlzLnI9TWF0aC5taW4oMTAwLHBhcnNlSW50KGNbMV0sMTApKS8xMDAsdGhpcy5nPU1hdGgubWluKDEwMCxwYXJzZUludChjWzJdLDEwKSkvMTAwLHRoaXMuYj1NYXRoLm1pbigxMDAscGFyc2VJbnQoY1szXSwxMCkpLzEwMCxiKGNbNV0pLHRoaXM7YnJlYWs7Y2FzZSBcImhzbFwiOmNhc2UgXCJoc2xhXCI6aWYoYz0vXihbMC05XSpcXC4/WzAtOV0rKVxccyosXFxzKihcXGQrKVxcJVxccyosXFxzKihcXGQrKVxcJVxccyooLFxccyooWzAtOV0qXFwuP1swLTldKylcXHMqKT8kLy5leGVjKGQpKXt2YXIgZD1cbnBhcnNlRmxvYXQoY1sxXSkvMzYwLGU9cGFyc2VJbnQoY1syXSwxMCkvMTAwLGY9cGFyc2VJbnQoY1szXSwxMCkvMTAwO2IoY1s1XSk7cmV0dXJuIHRoaXMuc2V0SFNMKGQsZSxmKX19fWVsc2UgaWYoYz0vXlxcIyhbQS1GYS1mMC05XSspJC8uZXhlYyhhKSl7Yz1jWzFdO2Q9Yy5sZW5ndGg7aWYoMz09PWQpcmV0dXJuIHRoaXMucj1wYXJzZUludChjLmNoYXJBdCgwKStjLmNoYXJBdCgwKSwxNikvMjU1LHRoaXMuZz1wYXJzZUludChjLmNoYXJBdCgxKStjLmNoYXJBdCgxKSwxNikvMjU1LHRoaXMuYj1wYXJzZUludChjLmNoYXJBdCgyKStjLmNoYXJBdCgyKSwxNikvMjU1LHRoaXM7aWYoNj09PWQpcmV0dXJuIHRoaXMucj1wYXJzZUludChjLmNoYXJBdCgwKStjLmNoYXJBdCgxKSwxNikvMjU1LHRoaXMuZz1wYXJzZUludChjLmNoYXJBdCgyKStjLmNoYXJBdCgzKSwxNikvMjU1LHRoaXMuYj1wYXJzZUludChjLmNoYXJBdCg0KStjLmNoYXJBdCg1KSwxNikvMjU1LHRoaXN9YSYmMDxhLmxlbmd0aCYmXG4oYz1USFJFRS5Db2xvcktleXdvcmRzW2FdLHZvaWQgMCE9PWM/dGhpcy5zZXRIZXgoYyk6Y29uc29sZS53YXJuKFwiVEhSRUUuQ29sb3I6IFVua25vd24gY29sb3IgXCIrYSkpO3JldHVybiB0aGlzfSxjbG9uZTpmdW5jdGlvbigpe3JldHVybiBuZXcgdGhpcy5jb25zdHJ1Y3Rvcih0aGlzLnIsdGhpcy5nLHRoaXMuYil9LGNvcHk6ZnVuY3Rpb24oYSl7dGhpcy5yPWEucjt0aGlzLmc9YS5nO3RoaXMuYj1hLmI7cmV0dXJuIHRoaXN9LGNvcHlHYW1tYVRvTGluZWFyOmZ1bmN0aW9uKGEsYil7dm9pZCAwPT09YiYmKGI9Mik7dGhpcy5yPU1hdGgucG93KGEucixiKTt0aGlzLmc9TWF0aC5wb3coYS5nLGIpO3RoaXMuYj1NYXRoLnBvdyhhLmIsYik7cmV0dXJuIHRoaXN9LGNvcHlMaW5lYXJUb0dhbW1hOmZ1bmN0aW9uKGEsYil7dm9pZCAwPT09YiYmKGI9Mik7dmFyIGM9MDxiPzEvYjoxO3RoaXMucj1NYXRoLnBvdyhhLnIsYyk7dGhpcy5nPU1hdGgucG93KGEuZyxjKTt0aGlzLmI9TWF0aC5wb3coYS5iLFxuYyk7cmV0dXJuIHRoaXN9LGNvbnZlcnRHYW1tYVRvTGluZWFyOmZ1bmN0aW9uKCl7dmFyIGE9dGhpcy5yLGI9dGhpcy5nLGM9dGhpcy5iO3RoaXMucj1hKmE7dGhpcy5nPWIqYjt0aGlzLmI9YypjO3JldHVybiB0aGlzfSxjb252ZXJ0TGluZWFyVG9HYW1tYTpmdW5jdGlvbigpe3RoaXMucj1NYXRoLnNxcnQodGhpcy5yKTt0aGlzLmc9TWF0aC5zcXJ0KHRoaXMuZyk7dGhpcy5iPU1hdGguc3FydCh0aGlzLmIpO3JldHVybiB0aGlzfSxnZXRIZXg6ZnVuY3Rpb24oKXtyZXR1cm4gMjU1KnRoaXMucjw8MTZeMjU1KnRoaXMuZzw8OF4yNTUqdGhpcy5iPDwwfSxnZXRIZXhTdHJpbmc6ZnVuY3Rpb24oKXtyZXR1cm4oXCIwMDAwMDBcIit0aGlzLmdldEhleCgpLnRvU3RyaW5nKDE2KSkuc2xpY2UoLTYpfSxnZXRIU0w6ZnVuY3Rpb24oYSl7YT1hfHx7aDowLHM6MCxsOjB9O3ZhciBiPXRoaXMucixjPXRoaXMuZyxkPXRoaXMuYixlPU1hdGgubWF4KGIsYyxkKSxmPU1hdGgubWluKGIsYyxkKSxnLGg9XG4oZitlKS8yO2lmKGY9PT1lKWY9Zz0wO2Vsc2V7dmFyIGs9ZS1mLGY9LjU+PWg/ay8oZStmKTprLygyLWUtZik7c3dpdGNoKGUpe2Nhc2UgYjpnPShjLWQpL2srKGM8ZD82OjApO2JyZWFrO2Nhc2UgYzpnPShkLWIpL2srMjticmVhaztjYXNlIGQ6Zz0oYi1jKS9rKzR9Zy89Nn1hLmg9ZzthLnM9ZjthLmw9aDtyZXR1cm4gYX0sZ2V0U3R5bGU6ZnVuY3Rpb24oKXtyZXR1cm5cInJnYihcIisoMjU1KnRoaXMucnwwKStcIixcIisoMjU1KnRoaXMuZ3wwKStcIixcIisoMjU1KnRoaXMuYnwwKStcIilcIn0sb2Zmc2V0SFNMOmZ1bmN0aW9uKGEsYixjKXt2YXIgZD10aGlzLmdldEhTTCgpO2QuaCs9YTtkLnMrPWI7ZC5sKz1jO3RoaXMuc2V0SFNMKGQuaCxkLnMsZC5sKTtyZXR1cm4gdGhpc30sYWRkOmZ1bmN0aW9uKGEpe3RoaXMucis9YS5yO3RoaXMuZys9YS5nO3RoaXMuYis9YS5iO3JldHVybiB0aGlzfSxhZGRDb2xvcnM6ZnVuY3Rpb24oYSxiKXt0aGlzLnI9YS5yK2Iucjt0aGlzLmc9YS5nK2IuZzt0aGlzLmI9XG5hLmIrYi5iO3JldHVybiB0aGlzfSxhZGRTY2FsYXI6ZnVuY3Rpb24oYSl7dGhpcy5yKz1hO3RoaXMuZys9YTt0aGlzLmIrPWE7cmV0dXJuIHRoaXN9LHN1YjpmdW5jdGlvbihhKXt0aGlzLnI9TWF0aC5tYXgoMCx0aGlzLnItYS5yKTt0aGlzLmc9TWF0aC5tYXgoMCx0aGlzLmctYS5nKTt0aGlzLmI9TWF0aC5tYXgoMCx0aGlzLmItYS5iKTtyZXR1cm4gdGhpc30sbXVsdGlwbHk6ZnVuY3Rpb24oYSl7dGhpcy5yKj1hLnI7dGhpcy5nKj1hLmc7dGhpcy5iKj1hLmI7cmV0dXJuIHRoaXN9LG11bHRpcGx5U2NhbGFyOmZ1bmN0aW9uKGEpe3RoaXMucio9YTt0aGlzLmcqPWE7dGhpcy5iKj1hO3JldHVybiB0aGlzfSxsZXJwOmZ1bmN0aW9uKGEsYil7dGhpcy5yKz0oYS5yLXRoaXMucikqYjt0aGlzLmcrPShhLmctdGhpcy5nKSpiO3RoaXMuYis9KGEuYi10aGlzLmIpKmI7cmV0dXJuIHRoaXN9LGVxdWFsczpmdW5jdGlvbihhKXtyZXR1cm4gYS5yPT09dGhpcy5yJiZhLmc9PT10aGlzLmcmJmEuYj09PVxudGhpcy5ifSxmcm9tQXJyYXk6ZnVuY3Rpb24oYSxiKXt2b2lkIDA9PT1iJiYoYj0wKTt0aGlzLnI9YVtiXTt0aGlzLmc9YVtiKzFdO3RoaXMuYj1hW2IrMl07cmV0dXJuIHRoaXN9LHRvQXJyYXk6ZnVuY3Rpb24oYSxiKXt2b2lkIDA9PT1hJiYoYT1bXSk7dm9pZCAwPT09YiYmKGI9MCk7YVtiXT10aGlzLnI7YVtiKzFdPXRoaXMuZzthW2IrMl09dGhpcy5iO3JldHVybiBhfX07XG5USFJFRS5Db2xvcktleXdvcmRzPXthbGljZWJsdWU6MTU3OTIzODMsYW50aXF1ZXdoaXRlOjE2NDQ0Mzc1LGFxdWE6NjU1MzUsYXF1YW1hcmluZTo4Mzg4NTY0LGF6dXJlOjE1Nzk0MTc1LGJlaWdlOjE2MTE5MjYwLGJpc3F1ZToxNjc3MDI0NCxibGFjazowLGJsYW5jaGVkYWxtb25kOjE2NzcyMDQ1LGJsdWU6MjU1LGJsdWV2aW9sZXQ6OTA1NTIwMixicm93bjoxMDgyNDIzNCxidXJseXdvb2Q6MTQ1OTYyMzEsY2FkZXRibHVlOjYyNjY1MjgsY2hhcnRyZXVzZTo4Mzg4MzUyLGNob2NvbGF0ZToxMzc4OTQ3MCxjb3JhbDoxNjc0NDI3Mixjb3JuZmxvd2VyYmx1ZTo2NTkxOTgxLGNvcm5zaWxrOjE2Nzc1Mzg4LGNyaW1zb246MTQ0MjMxMDAsY3lhbjo2NTUzNSxkYXJrYmx1ZToxMzksZGFya2N5YW46MzU3MjMsZGFya2dvbGRlbnJvZDoxMjA5MjkzOSxkYXJrZ3JheToxMTExOTAxNyxkYXJrZ3JlZW46MjU2MDAsZGFya2dyZXk6MTExMTkwMTcsZGFya2toYWtpOjEyNDMzMjU5LGRhcmttYWdlbnRhOjkxMDk2NDMsXG5kYXJrb2xpdmVncmVlbjo1NTk3OTk5LGRhcmtvcmFuZ2U6MTY3NDc1MjAsZGFya29yY2hpZDoxMDA0MDAxMixkYXJrcmVkOjkxMDk1MDQsZGFya3NhbG1vbjoxNTMwODQxMCxkYXJrc2VhZ3JlZW46OTQxOTkxOSxkYXJrc2xhdGVibHVlOjQ3MzQzNDcsZGFya3NsYXRlZ3JheTozMTAwNDk1LGRhcmtzbGF0ZWdyZXk6MzEwMDQ5NSxkYXJrdHVycXVvaXNlOjUyOTQ1LGRhcmt2aW9sZXQ6OTY5OTUzOSxkZWVwcGluazoxNjcxNjk0NyxkZWVwc2t5Ymx1ZTo0OTE1MSxkaW1ncmF5OjY5MDgyNjUsZGltZ3JleTo2OTA4MjY1LGRvZGdlcmJsdWU6MjAwMzE5OSxmaXJlYnJpY2s6MTE2NzQxNDYsZmxvcmFsd2hpdGU6MTY3NzU5MjAsZm9yZXN0Z3JlZW46MjI2Mzg0MixmdWNoc2lhOjE2NzExOTM1LGdhaW5zYm9ybzoxNDQ3NDQ2MCxnaG9zdHdoaXRlOjE2MzE2NjcxLGdvbGQ6MTY3NjY3MjAsZ29sZGVucm9kOjE0MzI5MTIwLGdyYXk6ODQyMTUwNCxncmVlbjozMjc2OCxncmVlbnllbGxvdzoxMTQwMzA1NSxcbmdyZXk6ODQyMTUwNCxob25leWRldzoxNTc5NDE2MCxob3RwaW5rOjE2NzM4NzQwLGluZGlhbnJlZDoxMzQ1ODUyNCxpbmRpZ286NDkxNTMzMCxpdm9yeToxNjc3NzIwMCxraGFraToxNTc4NzY2MCxsYXZlbmRlcjoxNTEzMjQxMCxsYXZlbmRlcmJsdXNoOjE2NzczMzY1LGxhd25ncmVlbjo4MTkwOTc2LGxlbW9uY2hpZmZvbjoxNjc3NTg4NSxsaWdodGJsdWU6MTEzOTMyNTQsbGlnaHRjb3JhbDoxNTc2MTUzNixsaWdodGN5YW46MTQ3NDU1OTksbGlnaHRnb2xkZW5yb2R5ZWxsb3c6MTY0NDgyMTAsbGlnaHRncmF5OjEzODgyMzIzLGxpZ2h0Z3JlZW46OTQ5ODI1NixsaWdodGdyZXk6MTM4ODIzMjMsbGlnaHRwaW5rOjE2NzU4NDY1LGxpZ2h0c2FsbW9uOjE2NzUyNzYyLGxpZ2h0c2VhZ3JlZW46MjE0Mjg5MCxsaWdodHNreWJsdWU6ODkwMDM0NixsaWdodHNsYXRlZ3JheTo3ODMzNzUzLGxpZ2h0c2xhdGVncmV5Ojc4MzM3NTMsbGlnaHRzdGVlbGJsdWU6MTE1ODQ3MzQsbGlnaHR5ZWxsb3c6MTY3NzcxODQsXG5saW1lOjY1MjgwLGxpbWVncmVlbjozMzI5MzMwLGxpbmVuOjE2NDQ1NjcwLG1hZ2VudGE6MTY3MTE5MzUsbWFyb29uOjgzODg2MDgsbWVkaXVtYXF1YW1hcmluZTo2NzM3MzIyLG1lZGl1bWJsdWU6MjA1LG1lZGl1bW9yY2hpZDoxMjIxMTY2NyxtZWRpdW1wdXJwbGU6OTY2MjY4MyxtZWRpdW1zZWFncmVlbjozOTc4MDk3LG1lZGl1bXNsYXRlYmx1ZTo4MDg3NzkwLG1lZGl1bXNwcmluZ2dyZWVuOjY0MTU0LG1lZGl1bXR1cnF1b2lzZTo0NzcyMzAwLG1lZGl1bXZpb2xldHJlZDoxMzA0NzE3MyxtaWRuaWdodGJsdWU6MTY0NDkxMixtaW50Y3JlYW06MTYxMjE4NTAsbWlzdHlyb3NlOjE2NzcwMjczLG1vY2Nhc2luOjE2NzcwMjI5LG5hdmFqb3doaXRlOjE2NzY4Njg1LG5hdnk6MTI4LG9sZGxhY2U6MTY2NDM1NTgsb2xpdmU6ODQyMTM3NixvbGl2ZWRyYWI6NzA0ODczOSxvcmFuZ2U6MTY3NTM5MjAsb3JhbmdlcmVkOjE2NzI5MzQ0LG9yY2hpZDoxNDMxNTczNCxwYWxlZ29sZGVucm9kOjE1NjU3MTMwLFxucGFsZWdyZWVuOjEwMDI1ODgwLHBhbGV0dXJxdW9pc2U6MTE1Mjk5NjYscGFsZXZpb2xldHJlZDoxNDM4MTIwMyxwYXBheWF3aGlwOjE2NzczMDc3LHBlYWNocHVmZjoxNjc2NzY3MyxwZXJ1OjEzNDY4OTkxLHBpbms6MTY3NjEwMzUscGx1bToxNDUyNDYzNyxwb3dkZXJibHVlOjExNTkxOTEwLHB1cnBsZTo4Mzg4NzM2LHJlZDoxNjcxMTY4MCxyb3N5YnJvd246MTIzNTc1MTkscm95YWxibHVlOjQyODY5NDUsc2FkZGxlYnJvd246OTEyNzE4NyxzYWxtb246MTY0MTY4ODIsc2FuZHlicm93bjoxNjAzMjg2NCxzZWFncmVlbjozMDUwMzI3LHNlYXNoZWxsOjE2Nzc0NjM4LHNpZW5uYToxMDUwNjc5NyxzaWx2ZXI6MTI2MzIyNTYsc2t5Ymx1ZTo4OTAwMzMxLHNsYXRlYmx1ZTo2OTcwMDYxLHNsYXRlZ3JheTo3MzcyOTQ0LHNsYXRlZ3JleTo3MzcyOTQ0LHNub3c6MTY3NzU5MzAsc3ByaW5nZ3JlZW46NjU0MDcsc3RlZWxibHVlOjQ2MjA5ODAsdGFuOjEzODA4NzgwLHRlYWw6MzI4OTYsdGhpc3RsZToxNDIwNDg4OCxcbnRvbWF0bzoxNjczNzA5NSx0dXJxdW9pc2U6NDI1MTg1Nix2aW9sZXQ6MTU2MzEwODYsd2hlYXQ6MTYxMTMzMzEsd2hpdGU6MTY3NzcyMTUsd2hpdGVzbW9rZToxNjExOTI4NSx5ZWxsb3c6MTY3NzY5NjAseWVsbG93Z3JlZW46MTAxNDUwNzR9O1RIUkVFLlF1YXRlcm5pb249ZnVuY3Rpb24oYSxiLGMsZCl7dGhpcy5feD1hfHwwO3RoaXMuX3k9Ynx8MDt0aGlzLl96PWN8fDA7dGhpcy5fdz12b2lkIDAhPT1kP2Q6MX07XG5USFJFRS5RdWF0ZXJuaW9uLnByb3RvdHlwZT17Y29uc3RydWN0b3I6VEhSRUUuUXVhdGVybmlvbixnZXQgeCgpe3JldHVybiB0aGlzLl94fSxzZXQgeChhKXt0aGlzLl94PWE7dGhpcy5vbkNoYW5nZUNhbGxiYWNrKCl9LGdldCB5KCl7cmV0dXJuIHRoaXMuX3l9LHNldCB5KGEpe3RoaXMuX3k9YTt0aGlzLm9uQ2hhbmdlQ2FsbGJhY2soKX0sZ2V0IHooKXtyZXR1cm4gdGhpcy5fen0sc2V0IHooYSl7dGhpcy5fej1hO3RoaXMub25DaGFuZ2VDYWxsYmFjaygpfSxnZXQgdygpe3JldHVybiB0aGlzLl93fSxzZXQgdyhhKXt0aGlzLl93PWE7dGhpcy5vbkNoYW5nZUNhbGxiYWNrKCl9LHNldDpmdW5jdGlvbihhLGIsYyxkKXt0aGlzLl94PWE7dGhpcy5feT1iO3RoaXMuX3o9Yzt0aGlzLl93PWQ7dGhpcy5vbkNoYW5nZUNhbGxiYWNrKCk7cmV0dXJuIHRoaXN9LGNsb25lOmZ1bmN0aW9uKCl7cmV0dXJuIG5ldyB0aGlzLmNvbnN0cnVjdG9yKHRoaXMuX3gsdGhpcy5feSx0aGlzLl96LHRoaXMuX3cpfSxcbmNvcHk6ZnVuY3Rpb24oYSl7dGhpcy5feD1hLng7dGhpcy5feT1hLnk7dGhpcy5fej1hLno7dGhpcy5fdz1hLnc7dGhpcy5vbkNoYW5nZUNhbGxiYWNrKCk7cmV0dXJuIHRoaXN9LHNldEZyb21FdWxlcjpmdW5jdGlvbihhLGIpe2lmKCExPT09YSBpbnN0YW5jZW9mIFRIUkVFLkV1bGVyKXRocm93IEVycm9yKFwiVEhSRUUuUXVhdGVybmlvbjogLnNldEZyb21FdWxlcigpIG5vdyBleHBlY3RzIGEgRXVsZXIgcm90YXRpb24gcmF0aGVyIHRoYW4gYSBWZWN0b3IzIGFuZCBvcmRlci5cIik7dmFyIGM9TWF0aC5jb3MoYS5feC8yKSxkPU1hdGguY29zKGEuX3kvMiksZT1NYXRoLmNvcyhhLl96LzIpLGY9TWF0aC5zaW4oYS5feC8yKSxnPU1hdGguc2luKGEuX3kvMiksaD1NYXRoLnNpbihhLl96LzIpLGs9YS5vcmRlcjtcIlhZWlwiPT09az8odGhpcy5feD1mKmQqZStjKmcqaCx0aGlzLl95PWMqZyplLWYqZCpoLHRoaXMuX3o9YypkKmgrZipnKmUsdGhpcy5fdz1jKmQqZS1mKmcqaCk6XCJZWFpcIj09PVxuaz8odGhpcy5feD1mKmQqZStjKmcqaCx0aGlzLl95PWMqZyplLWYqZCpoLHRoaXMuX3o9YypkKmgtZipnKmUsdGhpcy5fdz1jKmQqZStmKmcqaCk6XCJaWFlcIj09PWs/KHRoaXMuX3g9ZipkKmUtYypnKmgsdGhpcy5feT1jKmcqZStmKmQqaCx0aGlzLl96PWMqZCpoK2YqZyplLHRoaXMuX3c9YypkKmUtZipnKmgpOlwiWllYXCI9PT1rPyh0aGlzLl94PWYqZCplLWMqZypoLHRoaXMuX3k9YypnKmUrZipkKmgsdGhpcy5fej1jKmQqaC1mKmcqZSx0aGlzLl93PWMqZCplK2YqZypoKTpcIllaWFwiPT09az8odGhpcy5feD1mKmQqZStjKmcqaCx0aGlzLl95PWMqZyplK2YqZCpoLHRoaXMuX3o9YypkKmgtZipnKmUsdGhpcy5fdz1jKmQqZS1mKmcqaCk6XCJYWllcIj09PWsmJih0aGlzLl94PWYqZCplLWMqZypoLHRoaXMuX3k9YypnKmUtZipkKmgsdGhpcy5fej1jKmQqaCtmKmcqZSx0aGlzLl93PWMqZCplK2YqZypoKTtpZighMSE9PWIpdGhpcy5vbkNoYW5nZUNhbGxiYWNrKCk7cmV0dXJuIHRoaXN9LHNldEZyb21BeGlzQW5nbGU6ZnVuY3Rpb24oYSxcbmIpe3ZhciBjPWIvMixkPU1hdGguc2luKGMpO3RoaXMuX3g9YS54KmQ7dGhpcy5feT1hLnkqZDt0aGlzLl96PWEueipkO3RoaXMuX3c9TWF0aC5jb3MoYyk7dGhpcy5vbkNoYW5nZUNhbGxiYWNrKCk7cmV0dXJuIHRoaXN9LHNldEZyb21Sb3RhdGlvbk1hdHJpeDpmdW5jdGlvbihhKXt2YXIgYj1hLmVsZW1lbnRzLGM9YlswXTthPWJbNF07dmFyIGQ9Yls4XSxlPWJbMV0sZj1iWzVdLGc9Yls5XSxoPWJbMl0saz1iWzZdLGI9YlsxMF0sbD1jK2YrYjswPGw/KGM9LjUvTWF0aC5zcXJ0KGwrMSksdGhpcy5fdz0uMjUvYyx0aGlzLl94PShrLWcpKmMsdGhpcy5feT0oZC1oKSpjLHRoaXMuX3o9KGUtYSkqYyk6Yz5mJiZjPmI/KGM9MipNYXRoLnNxcnQoMStjLWYtYiksdGhpcy5fdz0oay1nKS9jLHRoaXMuX3g9LjI1KmMsdGhpcy5feT0oYStlKS9jLHRoaXMuX3o9KGQraCkvYyk6Zj5iPyhjPTIqTWF0aC5zcXJ0KDErZi1jLWIpLHRoaXMuX3c9KGQtaCkvYyx0aGlzLl94PShhK2UpL2MsdGhpcy5feT1cbi4yNSpjLHRoaXMuX3o9KGcraykvYyk6KGM9MipNYXRoLnNxcnQoMStiLWMtZiksdGhpcy5fdz0oZS1hKS9jLHRoaXMuX3g9KGQraCkvYyx0aGlzLl95PShnK2spL2MsdGhpcy5fej0uMjUqYyk7dGhpcy5vbkNoYW5nZUNhbGxiYWNrKCk7cmV0dXJuIHRoaXN9LHNldEZyb21Vbml0VmVjdG9yczpmdW5jdGlvbigpe3ZhciBhLGI7cmV0dXJuIGZ1bmN0aW9uKGMsZCl7dm9pZCAwPT09YSYmKGE9bmV3IFRIUkVFLlZlY3RvcjMpO2I9Yy5kb3QoZCkrMTsxRS02PmI/KGI9MCxNYXRoLmFicyhjLngpPk1hdGguYWJzKGMueik/YS5zZXQoLWMueSxjLngsMCk6YS5zZXQoMCwtYy56LGMueSkpOmEuY3Jvc3NWZWN0b3JzKGMsZCk7dGhpcy5feD1hLng7dGhpcy5feT1hLnk7dGhpcy5fej1hLno7dGhpcy5fdz1iO3JldHVybiB0aGlzLm5vcm1hbGl6ZSgpfX0oKSxpbnZlcnNlOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuY29uanVnYXRlKCkubm9ybWFsaXplKCl9LGNvbmp1Z2F0ZTpmdW5jdGlvbigpe3RoaXMuX3gqPVxuLTE7dGhpcy5feSo9LTE7dGhpcy5feio9LTE7dGhpcy5vbkNoYW5nZUNhbGxiYWNrKCk7cmV0dXJuIHRoaXN9LGRvdDpmdW5jdGlvbihhKXtyZXR1cm4gdGhpcy5feCphLl94K3RoaXMuX3kqYS5feSt0aGlzLl96KmEuX3ordGhpcy5fdyphLl93fSxsZW5ndGhTcTpmdW5jdGlvbigpe3JldHVybiB0aGlzLl94KnRoaXMuX3grdGhpcy5feSp0aGlzLl95K3RoaXMuX3oqdGhpcy5feit0aGlzLl93KnRoaXMuX3d9LGxlbmd0aDpmdW5jdGlvbigpe3JldHVybiBNYXRoLnNxcnQodGhpcy5feCp0aGlzLl94K3RoaXMuX3kqdGhpcy5feSt0aGlzLl96KnRoaXMuX3ordGhpcy5fdyp0aGlzLl93KX0sbm9ybWFsaXplOmZ1bmN0aW9uKCl7dmFyIGE9dGhpcy5sZW5ndGgoKTswPT09YT8odGhpcy5fej10aGlzLl95PXRoaXMuX3g9MCx0aGlzLl93PTEpOihhPTEvYSx0aGlzLl94Kj1hLHRoaXMuX3kqPWEsdGhpcy5feio9YSx0aGlzLl93Kj1hKTt0aGlzLm9uQ2hhbmdlQ2FsbGJhY2soKTtyZXR1cm4gdGhpc30sXG5tdWx0aXBseTpmdW5jdGlvbihhLGIpe3JldHVybiB2b2lkIDAhPT1iPyhjb25zb2xlLndhcm4oXCJUSFJFRS5RdWF0ZXJuaW9uOiAubXVsdGlwbHkoKSBub3cgb25seSBhY2NlcHRzIG9uZSBhcmd1bWVudC4gVXNlIC5tdWx0aXBseVF1YXRlcm5pb25zKCBhLCBiICkgaW5zdGVhZC5cIiksdGhpcy5tdWx0aXBseVF1YXRlcm5pb25zKGEsYikpOnRoaXMubXVsdGlwbHlRdWF0ZXJuaW9ucyh0aGlzLGEpfSxwcmVtdWx0aXBseTpmdW5jdGlvbihhKXtyZXR1cm4gdGhpcy5tdWx0aXBseVF1YXRlcm5pb25zKGEsdGhpcyl9LG11bHRpcGx5UXVhdGVybmlvbnM6ZnVuY3Rpb24oYSxiKXt2YXIgYz1hLl94LGQ9YS5feSxlPWEuX3osZj1hLl93LGc9Yi5feCxoPWIuX3ksaz1iLl96LGw9Yi5fdzt0aGlzLl94PWMqbCtmKmcrZCprLWUqaDt0aGlzLl95PWQqbCtmKmgrZSpnLWMqazt0aGlzLl96PWUqbCtmKmsrYypoLWQqZzt0aGlzLl93PWYqbC1jKmctZCpoLWUqazt0aGlzLm9uQ2hhbmdlQ2FsbGJhY2soKTtcbnJldHVybiB0aGlzfSxzbGVycDpmdW5jdGlvbihhLGIpe2lmKDA9PT1iKXJldHVybiB0aGlzO2lmKDE9PT1iKXJldHVybiB0aGlzLmNvcHkoYSk7dmFyIGM9dGhpcy5feCxkPXRoaXMuX3ksZT10aGlzLl96LGY9dGhpcy5fdyxnPWYqYS5fdytjKmEuX3grZCphLl95K2UqYS5fejswPmc/KHRoaXMuX3c9LWEuX3csdGhpcy5feD0tYS5feCx0aGlzLl95PS1hLl95LHRoaXMuX3o9LWEuX3osZz0tZyk6dGhpcy5jb3B5KGEpO2lmKDE8PWcpcmV0dXJuIHRoaXMuX3c9Zix0aGlzLl94PWMsdGhpcy5feT1kLHRoaXMuX3o9ZSx0aGlzO3ZhciBoPU1hdGguc3FydCgxLWcqZyk7aWYoLjAwMT5NYXRoLmFicyhoKSlyZXR1cm4gdGhpcy5fdz0uNSooZit0aGlzLl93KSx0aGlzLl94PS41KihjK3RoaXMuX3gpLHRoaXMuX3k9LjUqKGQrdGhpcy5feSksdGhpcy5fej0uNSooZSt0aGlzLl96KSx0aGlzO3ZhciBrPU1hdGguYXRhbjIoaCxnKSxnPU1hdGguc2luKCgxLWIpKmspL2gsaD1NYXRoLnNpbihiKlxuaykvaDt0aGlzLl93PWYqZyt0aGlzLl93Kmg7dGhpcy5feD1jKmcrdGhpcy5feCpoO3RoaXMuX3k9ZCpnK3RoaXMuX3kqaDt0aGlzLl96PWUqZyt0aGlzLl96Kmg7dGhpcy5vbkNoYW5nZUNhbGxiYWNrKCk7cmV0dXJuIHRoaXN9LGVxdWFsczpmdW5jdGlvbihhKXtyZXR1cm4gYS5feD09PXRoaXMuX3gmJmEuX3k9PT10aGlzLl95JiZhLl96PT09dGhpcy5feiYmYS5fdz09PXRoaXMuX3d9LGZyb21BcnJheTpmdW5jdGlvbihhLGIpe3ZvaWQgMD09PWImJihiPTApO3RoaXMuX3g9YVtiXTt0aGlzLl95PWFbYisxXTt0aGlzLl96PWFbYisyXTt0aGlzLl93PWFbYiszXTt0aGlzLm9uQ2hhbmdlQ2FsbGJhY2soKTtyZXR1cm4gdGhpc30sdG9BcnJheTpmdW5jdGlvbihhLGIpe3ZvaWQgMD09PWEmJihhPVtdKTt2b2lkIDA9PT1iJiYoYj0wKTthW2JdPXRoaXMuX3g7YVtiKzFdPXRoaXMuX3k7YVtiKzJdPXRoaXMuX3o7YVtiKzNdPXRoaXMuX3c7cmV0dXJuIGF9LG9uQ2hhbmdlOmZ1bmN0aW9uKGEpe3RoaXMub25DaGFuZ2VDYWxsYmFjaz1cbmE7cmV0dXJuIHRoaXN9LG9uQ2hhbmdlQ2FsbGJhY2s6ZnVuY3Rpb24oKXt9fTtcbk9iamVjdC5hc3NpZ24oVEhSRUUuUXVhdGVybmlvbix7c2xlcnA6ZnVuY3Rpb24oYSxiLGMsZCl7cmV0dXJuIGMuY29weShhKS5zbGVycChiLGQpfSxzbGVycEZsYXQ6ZnVuY3Rpb24oYSxiLGMsZCxlLGYsZyl7dmFyIGg9Y1tkKzBdLGs9Y1tkKzFdLGw9Y1tkKzJdO2M9Y1tkKzNdO2Q9ZVtmKzBdO3ZhciBtPWVbZisxXSxwPWVbZisyXTtlPWVbZiszXTtpZihjIT09ZXx8aCE9PWR8fGshPT1tfHxsIT09cCl7Zj0xLWc7dmFyIG49aCpkK2sqbStsKnArYyplLHE9MDw9bj8xOi0xLHI9MS1uKm47cj5OdW1iZXIuRVBTSUxPTiYmKHI9TWF0aC5zcXJ0KHIpLG49TWF0aC5hdGFuMihyLG4qcSksZj1NYXRoLnNpbihmKm4pL3IsZz1NYXRoLnNpbihnKm4pL3IpO3EqPWc7aD1oKmYrZCpxO2s9aypmK20qcTtsPWwqZitwKnE7Yz1jKmYrZSpxO2Y9PT0xLWcmJihnPTEvTWF0aC5zcXJ0KGgqaCtrKmsrbCpsK2MqYyksaCo9ZyxrKj1nLGwqPWcsYyo9Zyl9YVtiXT1oO2FbYisxXT1rO2FbYisyXT1sO1xuYVtiKzNdPWN9fSk7VEhSRUUuVmVjdG9yMj1mdW5jdGlvbihhLGIpe3RoaXMueD1hfHwwO3RoaXMueT1ifHwwfTtcblRIUkVFLlZlY3RvcjIucHJvdG90eXBlPXtjb25zdHJ1Y3RvcjpUSFJFRS5WZWN0b3IyLGdldCB3aWR0aCgpe3JldHVybiB0aGlzLnh9LHNldCB3aWR0aChhKXt0aGlzLng9YX0sZ2V0IGhlaWdodCgpe3JldHVybiB0aGlzLnl9LHNldCBoZWlnaHQoYSl7dGhpcy55PWF9LHNldDpmdW5jdGlvbihhLGIpe3RoaXMueD1hO3RoaXMueT1iO3JldHVybiB0aGlzfSxzZXRTY2FsYXI6ZnVuY3Rpb24oYSl7dGhpcy55PXRoaXMueD1hO3JldHVybiB0aGlzfSxzZXRYOmZ1bmN0aW9uKGEpe3RoaXMueD1hO3JldHVybiB0aGlzfSxzZXRZOmZ1bmN0aW9uKGEpe3RoaXMueT1hO3JldHVybiB0aGlzfSxzZXRDb21wb25lbnQ6ZnVuY3Rpb24oYSxiKXtzd2l0Y2goYSl7Y2FzZSAwOnRoaXMueD1iO2JyZWFrO2Nhc2UgMTp0aGlzLnk9YjticmVhaztkZWZhdWx0OnRocm93IEVycm9yKFwiaW5kZXggaXMgb3V0IG9mIHJhbmdlOiBcIithKTt9fSxnZXRDb21wb25lbnQ6ZnVuY3Rpb24oYSl7c3dpdGNoKGEpe2Nhc2UgMDpyZXR1cm4gdGhpcy54O1xuY2FzZSAxOnJldHVybiB0aGlzLnk7ZGVmYXVsdDp0aHJvdyBFcnJvcihcImluZGV4IGlzIG91dCBvZiByYW5nZTogXCIrYSk7fX0sY2xvbmU6ZnVuY3Rpb24oKXtyZXR1cm4gbmV3IHRoaXMuY29uc3RydWN0b3IodGhpcy54LHRoaXMueSl9LGNvcHk6ZnVuY3Rpb24oYSl7dGhpcy54PWEueDt0aGlzLnk9YS55O3JldHVybiB0aGlzfSxhZGQ6ZnVuY3Rpb24oYSxiKXtpZih2b2lkIDAhPT1iKXJldHVybiBjb25zb2xlLndhcm4oXCJUSFJFRS5WZWN0b3IyOiAuYWRkKCkgbm93IG9ubHkgYWNjZXB0cyBvbmUgYXJndW1lbnQuIFVzZSAuYWRkVmVjdG9ycyggYSwgYiApIGluc3RlYWQuXCIpLHRoaXMuYWRkVmVjdG9ycyhhLGIpO3RoaXMueCs9YS54O3RoaXMueSs9YS55O3JldHVybiB0aGlzfSxhZGRTY2FsYXI6ZnVuY3Rpb24oYSl7dGhpcy54Kz1hO3RoaXMueSs9YTtyZXR1cm4gdGhpc30sYWRkVmVjdG9yczpmdW5jdGlvbihhLGIpe3RoaXMueD1hLngrYi54O3RoaXMueT1hLnkrYi55O3JldHVybiB0aGlzfSxcbmFkZFNjYWxlZFZlY3RvcjpmdW5jdGlvbihhLGIpe3RoaXMueCs9YS54KmI7dGhpcy55Kz1hLnkqYjtyZXR1cm4gdGhpc30sc3ViOmZ1bmN0aW9uKGEsYil7aWYodm9pZCAwIT09YilyZXR1cm4gY29uc29sZS53YXJuKFwiVEhSRUUuVmVjdG9yMjogLnN1YigpIG5vdyBvbmx5IGFjY2VwdHMgb25lIGFyZ3VtZW50LiBVc2UgLnN1YlZlY3RvcnMoIGEsIGIgKSBpbnN0ZWFkLlwiKSx0aGlzLnN1YlZlY3RvcnMoYSxiKTt0aGlzLngtPWEueDt0aGlzLnktPWEueTtyZXR1cm4gdGhpc30sc3ViU2NhbGFyOmZ1bmN0aW9uKGEpe3RoaXMueC09YTt0aGlzLnktPWE7cmV0dXJuIHRoaXN9LHN1YlZlY3RvcnM6ZnVuY3Rpb24oYSxiKXt0aGlzLng9YS54LWIueDt0aGlzLnk9YS55LWIueTtyZXR1cm4gdGhpc30sbXVsdGlwbHk6ZnVuY3Rpb24oYSl7dGhpcy54Kj1hLng7dGhpcy55Kj1hLnk7cmV0dXJuIHRoaXN9LG11bHRpcGx5U2NhbGFyOmZ1bmN0aW9uKGEpe2lzRmluaXRlKGEpPyh0aGlzLngqPWEsXG50aGlzLnkqPWEpOnRoaXMueT10aGlzLng9MDtyZXR1cm4gdGhpc30sZGl2aWRlOmZ1bmN0aW9uKGEpe3RoaXMueC89YS54O3RoaXMueS89YS55O3JldHVybiB0aGlzfSxkaXZpZGVTY2FsYXI6ZnVuY3Rpb24oYSl7cmV0dXJuIHRoaXMubXVsdGlwbHlTY2FsYXIoMS9hKX0sbWluOmZ1bmN0aW9uKGEpe3RoaXMueD1NYXRoLm1pbih0aGlzLngsYS54KTt0aGlzLnk9TWF0aC5taW4odGhpcy55LGEueSk7cmV0dXJuIHRoaXN9LG1heDpmdW5jdGlvbihhKXt0aGlzLng9TWF0aC5tYXgodGhpcy54LGEueCk7dGhpcy55PU1hdGgubWF4KHRoaXMueSxhLnkpO3JldHVybiB0aGlzfSxjbGFtcDpmdW5jdGlvbihhLGIpe3RoaXMueD1NYXRoLm1heChhLngsTWF0aC5taW4oYi54LHRoaXMueCkpO3RoaXMueT1NYXRoLm1heChhLnksTWF0aC5taW4oYi55LHRoaXMueSkpO3JldHVybiB0aGlzfSxjbGFtcFNjYWxhcjpmdW5jdGlvbigpe3ZhciBhLGI7cmV0dXJuIGZ1bmN0aW9uKGMsZCl7dm9pZCAwPT09XG5hJiYoYT1uZXcgVEhSRUUuVmVjdG9yMixiPW5ldyBUSFJFRS5WZWN0b3IyKTthLnNldChjLGMpO2Iuc2V0KGQsZCk7cmV0dXJuIHRoaXMuY2xhbXAoYSxiKX19KCksY2xhbXBMZW5ndGg6ZnVuY3Rpb24oYSxiKXt2YXIgYz10aGlzLmxlbmd0aCgpO3JldHVybiB0aGlzLm11bHRpcGx5U2NhbGFyKE1hdGgubWF4KGEsTWF0aC5taW4oYixjKSkvYyl9LGZsb29yOmZ1bmN0aW9uKCl7dGhpcy54PU1hdGguZmxvb3IodGhpcy54KTt0aGlzLnk9TWF0aC5mbG9vcih0aGlzLnkpO3JldHVybiB0aGlzfSxjZWlsOmZ1bmN0aW9uKCl7dGhpcy54PU1hdGguY2VpbCh0aGlzLngpO3RoaXMueT1NYXRoLmNlaWwodGhpcy55KTtyZXR1cm4gdGhpc30scm91bmQ6ZnVuY3Rpb24oKXt0aGlzLng9TWF0aC5yb3VuZCh0aGlzLngpO3RoaXMueT1NYXRoLnJvdW5kKHRoaXMueSk7cmV0dXJuIHRoaXN9LHJvdW5kVG9aZXJvOmZ1bmN0aW9uKCl7dGhpcy54PTA+dGhpcy54P01hdGguY2VpbCh0aGlzLngpOk1hdGguZmxvb3IodGhpcy54KTtcbnRoaXMueT0wPnRoaXMueT9NYXRoLmNlaWwodGhpcy55KTpNYXRoLmZsb29yKHRoaXMueSk7cmV0dXJuIHRoaXN9LG5lZ2F0ZTpmdW5jdGlvbigpe3RoaXMueD0tdGhpcy54O3RoaXMueT0tdGhpcy55O3JldHVybiB0aGlzfSxkb3Q6ZnVuY3Rpb24oYSl7cmV0dXJuIHRoaXMueCphLngrdGhpcy55KmEueX0sbGVuZ3RoU3E6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy54KnRoaXMueCt0aGlzLnkqdGhpcy55fSxsZW5ndGg6ZnVuY3Rpb24oKXtyZXR1cm4gTWF0aC5zcXJ0KHRoaXMueCp0aGlzLngrdGhpcy55KnRoaXMueSl9LGxlbmd0aE1hbmhhdHRhbjpmdW5jdGlvbigpe3JldHVybiBNYXRoLmFicyh0aGlzLngpK01hdGguYWJzKHRoaXMueSl9LG5vcm1hbGl6ZTpmdW5jdGlvbigpe3JldHVybiB0aGlzLmRpdmlkZVNjYWxhcih0aGlzLmxlbmd0aCgpKX0sYW5nbGU6ZnVuY3Rpb24oKXt2YXIgYT1NYXRoLmF0YW4yKHRoaXMueSx0aGlzLngpOzA+YSYmKGErPTIqTWF0aC5QSSk7cmV0dXJuIGF9LFxuZGlzdGFuY2VUbzpmdW5jdGlvbihhKXtyZXR1cm4gTWF0aC5zcXJ0KHRoaXMuZGlzdGFuY2VUb1NxdWFyZWQoYSkpfSxkaXN0YW5jZVRvU3F1YXJlZDpmdW5jdGlvbihhKXt2YXIgYj10aGlzLngtYS54O2E9dGhpcy55LWEueTtyZXR1cm4gYipiK2EqYX0sZGlzdGFuY2VUb01hbmhhdHRhbjpmdW5jdGlvbihhKXtyZXR1cm4gTWF0aC5hYnModGhpcy54LWEueCkrTWF0aC5hYnModGhpcy55LWEueSl9LHNldExlbmd0aDpmdW5jdGlvbihhKXtyZXR1cm4gdGhpcy5tdWx0aXBseVNjYWxhcihhL3RoaXMubGVuZ3RoKCkpfSxsZXJwOmZ1bmN0aW9uKGEsYil7dGhpcy54Kz0oYS54LXRoaXMueCkqYjt0aGlzLnkrPShhLnktdGhpcy55KSpiO3JldHVybiB0aGlzfSxsZXJwVmVjdG9yczpmdW5jdGlvbihhLGIsYyl7cmV0dXJuIHRoaXMuc3ViVmVjdG9ycyhiLGEpLm11bHRpcGx5U2NhbGFyKGMpLmFkZChhKX0sZXF1YWxzOmZ1bmN0aW9uKGEpe3JldHVybiBhLng9PT10aGlzLngmJmEueT09PXRoaXMueX0sXG5mcm9tQXJyYXk6ZnVuY3Rpb24oYSxiKXt2b2lkIDA9PT1iJiYoYj0wKTt0aGlzLng9YVtiXTt0aGlzLnk9YVtiKzFdO3JldHVybiB0aGlzfSx0b0FycmF5OmZ1bmN0aW9uKGEsYil7dm9pZCAwPT09YSYmKGE9W10pO3ZvaWQgMD09PWImJihiPTApO2FbYl09dGhpcy54O2FbYisxXT10aGlzLnk7cmV0dXJuIGF9LGZyb21BdHRyaWJ1dGU6ZnVuY3Rpb24oYSxiLGMpe3ZvaWQgMD09PWMmJihjPTApO2I9YiphLml0ZW1TaXplK2M7dGhpcy54PWEuYXJyYXlbYl07dGhpcy55PWEuYXJyYXlbYisxXTtyZXR1cm4gdGhpc30scm90YXRlQXJvdW5kOmZ1bmN0aW9uKGEsYil7dmFyIGM9TWF0aC5jb3MoYiksZD1NYXRoLnNpbihiKSxlPXRoaXMueC1hLngsZj10aGlzLnktYS55O3RoaXMueD1lKmMtZipkK2EueDt0aGlzLnk9ZSpkK2YqYythLnk7cmV0dXJuIHRoaXN9fTtUSFJFRS5WZWN0b3IzPWZ1bmN0aW9uKGEsYixjKXt0aGlzLng9YXx8MDt0aGlzLnk9Ynx8MDt0aGlzLno9Y3x8MH07XG5USFJFRS5WZWN0b3IzLnByb3RvdHlwZT17Y29uc3RydWN0b3I6VEhSRUUuVmVjdG9yMyxzZXQ6ZnVuY3Rpb24oYSxiLGMpe3RoaXMueD1hO3RoaXMueT1iO3RoaXMuej1jO3JldHVybiB0aGlzfSxzZXRTY2FsYXI6ZnVuY3Rpb24oYSl7dGhpcy56PXRoaXMueT10aGlzLng9YTtyZXR1cm4gdGhpc30sc2V0WDpmdW5jdGlvbihhKXt0aGlzLng9YTtyZXR1cm4gdGhpc30sc2V0WTpmdW5jdGlvbihhKXt0aGlzLnk9YTtyZXR1cm4gdGhpc30sc2V0WjpmdW5jdGlvbihhKXt0aGlzLno9YTtyZXR1cm4gdGhpc30sc2V0Q29tcG9uZW50OmZ1bmN0aW9uKGEsYil7c3dpdGNoKGEpe2Nhc2UgMDp0aGlzLng9YjticmVhaztjYXNlIDE6dGhpcy55PWI7YnJlYWs7Y2FzZSAyOnRoaXMuej1iO2JyZWFrO2RlZmF1bHQ6dGhyb3cgRXJyb3IoXCJpbmRleCBpcyBvdXQgb2YgcmFuZ2U6IFwiK2EpO319LGdldENvbXBvbmVudDpmdW5jdGlvbihhKXtzd2l0Y2goYSl7Y2FzZSAwOnJldHVybiB0aGlzLng7Y2FzZSAxOnJldHVybiB0aGlzLnk7XG5jYXNlIDI6cmV0dXJuIHRoaXMuejtkZWZhdWx0OnRocm93IEVycm9yKFwiaW5kZXggaXMgb3V0IG9mIHJhbmdlOiBcIithKTt9fSxjbG9uZTpmdW5jdGlvbigpe3JldHVybiBuZXcgdGhpcy5jb25zdHJ1Y3Rvcih0aGlzLngsdGhpcy55LHRoaXMueil9LGNvcHk6ZnVuY3Rpb24oYSl7dGhpcy54PWEueDt0aGlzLnk9YS55O3RoaXMuej1hLno7cmV0dXJuIHRoaXN9LGFkZDpmdW5jdGlvbihhLGIpe2lmKHZvaWQgMCE9PWIpcmV0dXJuIGNvbnNvbGUud2FybihcIlRIUkVFLlZlY3RvcjM6IC5hZGQoKSBub3cgb25seSBhY2NlcHRzIG9uZSBhcmd1bWVudC4gVXNlIC5hZGRWZWN0b3JzKCBhLCBiICkgaW5zdGVhZC5cIiksdGhpcy5hZGRWZWN0b3JzKGEsYik7dGhpcy54Kz1hLng7dGhpcy55Kz1hLnk7dGhpcy56Kz1hLno7cmV0dXJuIHRoaXN9LGFkZFNjYWxhcjpmdW5jdGlvbihhKXt0aGlzLngrPWE7dGhpcy55Kz1hO3RoaXMueis9YTtyZXR1cm4gdGhpc30sYWRkVmVjdG9yczpmdW5jdGlvbihhLFxuYil7dGhpcy54PWEueCtiLng7dGhpcy55PWEueStiLnk7dGhpcy56PWEueitiLno7cmV0dXJuIHRoaXN9LGFkZFNjYWxlZFZlY3RvcjpmdW5jdGlvbihhLGIpe3RoaXMueCs9YS54KmI7dGhpcy55Kz1hLnkqYjt0aGlzLnorPWEueipiO3JldHVybiB0aGlzfSxzdWI6ZnVuY3Rpb24oYSxiKXtpZih2b2lkIDAhPT1iKXJldHVybiBjb25zb2xlLndhcm4oXCJUSFJFRS5WZWN0b3IzOiAuc3ViKCkgbm93IG9ubHkgYWNjZXB0cyBvbmUgYXJndW1lbnQuIFVzZSAuc3ViVmVjdG9ycyggYSwgYiApIGluc3RlYWQuXCIpLHRoaXMuc3ViVmVjdG9ycyhhLGIpO3RoaXMueC09YS54O3RoaXMueS09YS55O3RoaXMuei09YS56O3JldHVybiB0aGlzfSxzdWJTY2FsYXI6ZnVuY3Rpb24oYSl7dGhpcy54LT1hO3RoaXMueS09YTt0aGlzLnotPWE7cmV0dXJuIHRoaXN9LHN1YlZlY3RvcnM6ZnVuY3Rpb24oYSxiKXt0aGlzLng9YS54LWIueDt0aGlzLnk9YS55LWIueTt0aGlzLno9YS56LWIuejtyZXR1cm4gdGhpc30sXG5tdWx0aXBseTpmdW5jdGlvbihhLGIpe2lmKHZvaWQgMCE9PWIpcmV0dXJuIGNvbnNvbGUud2FybihcIlRIUkVFLlZlY3RvcjM6IC5tdWx0aXBseSgpIG5vdyBvbmx5IGFjY2VwdHMgb25lIGFyZ3VtZW50LiBVc2UgLm11bHRpcGx5VmVjdG9ycyggYSwgYiApIGluc3RlYWQuXCIpLHRoaXMubXVsdGlwbHlWZWN0b3JzKGEsYik7dGhpcy54Kj1hLng7dGhpcy55Kj1hLnk7dGhpcy56Kj1hLno7cmV0dXJuIHRoaXN9LG11bHRpcGx5U2NhbGFyOmZ1bmN0aW9uKGEpe2lzRmluaXRlKGEpPyh0aGlzLngqPWEsdGhpcy55Kj1hLHRoaXMueio9YSk6dGhpcy56PXRoaXMueT10aGlzLng9MDtyZXR1cm4gdGhpc30sbXVsdGlwbHlWZWN0b3JzOmZ1bmN0aW9uKGEsYil7dGhpcy54PWEueCpiLng7dGhpcy55PWEueSpiLnk7dGhpcy56PWEueipiLno7cmV0dXJuIHRoaXN9LGFwcGx5RXVsZXI6ZnVuY3Rpb24oKXt2YXIgYTtyZXR1cm4gZnVuY3Rpb24oYil7ITE9PT1iIGluc3RhbmNlb2YgVEhSRUUuRXVsZXImJlxuY29uc29sZS5lcnJvcihcIlRIUkVFLlZlY3RvcjM6IC5hcHBseUV1bGVyKCkgbm93IGV4cGVjdHMgYW4gRXVsZXIgcm90YXRpb24gcmF0aGVyIHRoYW4gYSBWZWN0b3IzIGFuZCBvcmRlci5cIik7dm9pZCAwPT09YSYmKGE9bmV3IFRIUkVFLlF1YXRlcm5pb24pO3JldHVybiB0aGlzLmFwcGx5UXVhdGVybmlvbihhLnNldEZyb21FdWxlcihiKSl9fSgpLGFwcGx5QXhpc0FuZ2xlOmZ1bmN0aW9uKCl7dmFyIGE7cmV0dXJuIGZ1bmN0aW9uKGIsYyl7dm9pZCAwPT09YSYmKGE9bmV3IFRIUkVFLlF1YXRlcm5pb24pO3JldHVybiB0aGlzLmFwcGx5UXVhdGVybmlvbihhLnNldEZyb21BeGlzQW5nbGUoYixjKSl9fSgpLGFwcGx5TWF0cml4MzpmdW5jdGlvbihhKXt2YXIgYj10aGlzLngsYz10aGlzLnksZD10aGlzLno7YT1hLmVsZW1lbnRzO3RoaXMueD1hWzBdKmIrYVszXSpjK2FbNl0qZDt0aGlzLnk9YVsxXSpiK2FbNF0qYythWzddKmQ7dGhpcy56PWFbMl0qYithWzVdKmMrYVs4XSpkO3JldHVybiB0aGlzfSxcbmFwcGx5TWF0cml4NDpmdW5jdGlvbihhKXt2YXIgYj10aGlzLngsYz10aGlzLnksZD10aGlzLno7YT1hLmVsZW1lbnRzO3RoaXMueD1hWzBdKmIrYVs0XSpjK2FbOF0qZCthWzEyXTt0aGlzLnk9YVsxXSpiK2FbNV0qYythWzldKmQrYVsxM107dGhpcy56PWFbMl0qYithWzZdKmMrYVsxMF0qZCthWzE0XTtyZXR1cm4gdGhpc30sYXBwbHlQcm9qZWN0aW9uOmZ1bmN0aW9uKGEpe3ZhciBiPXRoaXMueCxjPXRoaXMueSxkPXRoaXMuejthPWEuZWxlbWVudHM7dmFyIGU9MS8oYVszXSpiK2FbN10qYythWzExXSpkK2FbMTVdKTt0aGlzLng9KGFbMF0qYithWzRdKmMrYVs4XSpkK2FbMTJdKSplO3RoaXMueT0oYVsxXSpiK2FbNV0qYythWzldKmQrYVsxM10pKmU7dGhpcy56PShhWzJdKmIrYVs2XSpjK2FbMTBdKmQrYVsxNF0pKmU7cmV0dXJuIHRoaXN9LGFwcGx5UXVhdGVybmlvbjpmdW5jdGlvbihhKXt2YXIgYj10aGlzLngsYz10aGlzLnksZD10aGlzLnosZT1hLngsZj1hLnksZz1hLno7YT1cbmEudzt2YXIgaD1hKmIrZipkLWcqYyxrPWEqYytnKmItZSpkLGw9YSpkK2UqYy1mKmIsYj0tZSpiLWYqYy1nKmQ7dGhpcy54PWgqYStiKi1lK2sqLWctbCotZjt0aGlzLnk9ayphK2IqLWYrbCotZS1oKi1nO3RoaXMuej1sKmErYiotZytoKi1mLWsqLWU7cmV0dXJuIHRoaXN9LHByb2plY3Q6ZnVuY3Rpb24oKXt2YXIgYTtyZXR1cm4gZnVuY3Rpb24oYil7dm9pZCAwPT09YSYmKGE9bmV3IFRIUkVFLk1hdHJpeDQpO2EubXVsdGlwbHlNYXRyaWNlcyhiLnByb2plY3Rpb25NYXRyaXgsYS5nZXRJbnZlcnNlKGIubWF0cml4V29ybGQpKTtyZXR1cm4gdGhpcy5hcHBseVByb2plY3Rpb24oYSl9fSgpLHVucHJvamVjdDpmdW5jdGlvbigpe3ZhciBhO3JldHVybiBmdW5jdGlvbihiKXt2b2lkIDA9PT1hJiYoYT1uZXcgVEhSRUUuTWF0cml4NCk7YS5tdWx0aXBseU1hdHJpY2VzKGIubWF0cml4V29ybGQsYS5nZXRJbnZlcnNlKGIucHJvamVjdGlvbk1hdHJpeCkpO3JldHVybiB0aGlzLmFwcGx5UHJvamVjdGlvbihhKX19KCksXG50cmFuc2Zvcm1EaXJlY3Rpb246ZnVuY3Rpb24oYSl7dmFyIGI9dGhpcy54LGM9dGhpcy55LGQ9dGhpcy56O2E9YS5lbGVtZW50czt0aGlzLng9YVswXSpiK2FbNF0qYythWzhdKmQ7dGhpcy55PWFbMV0qYithWzVdKmMrYVs5XSpkO3RoaXMuej1hWzJdKmIrYVs2XSpjK2FbMTBdKmQ7cmV0dXJuIHRoaXMubm9ybWFsaXplKCl9LGRpdmlkZTpmdW5jdGlvbihhKXt0aGlzLngvPWEueDt0aGlzLnkvPWEueTt0aGlzLnovPWEuejtyZXR1cm4gdGhpc30sZGl2aWRlU2NhbGFyOmZ1bmN0aW9uKGEpe3JldHVybiB0aGlzLm11bHRpcGx5U2NhbGFyKDEvYSl9LG1pbjpmdW5jdGlvbihhKXt0aGlzLng9TWF0aC5taW4odGhpcy54LGEueCk7dGhpcy55PU1hdGgubWluKHRoaXMueSxhLnkpO3RoaXMuej1NYXRoLm1pbih0aGlzLnosYS56KTtyZXR1cm4gdGhpc30sbWF4OmZ1bmN0aW9uKGEpe3RoaXMueD1NYXRoLm1heCh0aGlzLngsYS54KTt0aGlzLnk9TWF0aC5tYXgodGhpcy55LGEueSk7dGhpcy56PVxuTWF0aC5tYXgodGhpcy56LGEueik7cmV0dXJuIHRoaXN9LGNsYW1wOmZ1bmN0aW9uKGEsYil7dGhpcy54PU1hdGgubWF4KGEueCxNYXRoLm1pbihiLngsdGhpcy54KSk7dGhpcy55PU1hdGgubWF4KGEueSxNYXRoLm1pbihiLnksdGhpcy55KSk7dGhpcy56PU1hdGgubWF4KGEueixNYXRoLm1pbihiLnosdGhpcy56KSk7cmV0dXJuIHRoaXN9LGNsYW1wU2NhbGFyOmZ1bmN0aW9uKCl7dmFyIGEsYjtyZXR1cm4gZnVuY3Rpb24oYyxkKXt2b2lkIDA9PT1hJiYoYT1uZXcgVEhSRUUuVmVjdG9yMyxiPW5ldyBUSFJFRS5WZWN0b3IzKTthLnNldChjLGMsYyk7Yi5zZXQoZCxkLGQpO3JldHVybiB0aGlzLmNsYW1wKGEsYil9fSgpLGNsYW1wTGVuZ3RoOmZ1bmN0aW9uKGEsYil7dmFyIGM9dGhpcy5sZW5ndGgoKTtyZXR1cm4gdGhpcy5tdWx0aXBseVNjYWxhcihNYXRoLm1heChhLE1hdGgubWluKGIsYykpL2MpfSxmbG9vcjpmdW5jdGlvbigpe3RoaXMueD1NYXRoLmZsb29yKHRoaXMueCk7dGhpcy55PVxuTWF0aC5mbG9vcih0aGlzLnkpO3RoaXMuej1NYXRoLmZsb29yKHRoaXMueik7cmV0dXJuIHRoaXN9LGNlaWw6ZnVuY3Rpb24oKXt0aGlzLng9TWF0aC5jZWlsKHRoaXMueCk7dGhpcy55PU1hdGguY2VpbCh0aGlzLnkpO3RoaXMuej1NYXRoLmNlaWwodGhpcy56KTtyZXR1cm4gdGhpc30scm91bmQ6ZnVuY3Rpb24oKXt0aGlzLng9TWF0aC5yb3VuZCh0aGlzLngpO3RoaXMueT1NYXRoLnJvdW5kKHRoaXMueSk7dGhpcy56PU1hdGgucm91bmQodGhpcy56KTtyZXR1cm4gdGhpc30scm91bmRUb1plcm86ZnVuY3Rpb24oKXt0aGlzLng9MD50aGlzLng/TWF0aC5jZWlsKHRoaXMueCk6TWF0aC5mbG9vcih0aGlzLngpO3RoaXMueT0wPnRoaXMueT9NYXRoLmNlaWwodGhpcy55KTpNYXRoLmZsb29yKHRoaXMueSk7dGhpcy56PTA+dGhpcy56P01hdGguY2VpbCh0aGlzLnopOk1hdGguZmxvb3IodGhpcy56KTtyZXR1cm4gdGhpc30sbmVnYXRlOmZ1bmN0aW9uKCl7dGhpcy54PS10aGlzLng7dGhpcy55PVxuLXRoaXMueTt0aGlzLno9LXRoaXMuejtyZXR1cm4gdGhpc30sZG90OmZ1bmN0aW9uKGEpe3JldHVybiB0aGlzLngqYS54K3RoaXMueSphLnkrdGhpcy56KmEuen0sbGVuZ3RoU3E6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy54KnRoaXMueCt0aGlzLnkqdGhpcy55K3RoaXMueip0aGlzLnp9LGxlbmd0aDpmdW5jdGlvbigpe3JldHVybiBNYXRoLnNxcnQodGhpcy54KnRoaXMueCt0aGlzLnkqdGhpcy55K3RoaXMueip0aGlzLnopfSxsZW5ndGhNYW5oYXR0YW46ZnVuY3Rpb24oKXtyZXR1cm4gTWF0aC5hYnModGhpcy54KStNYXRoLmFicyh0aGlzLnkpK01hdGguYWJzKHRoaXMueil9LG5vcm1hbGl6ZTpmdW5jdGlvbigpe3JldHVybiB0aGlzLmRpdmlkZVNjYWxhcih0aGlzLmxlbmd0aCgpKX0sc2V0TGVuZ3RoOmZ1bmN0aW9uKGEpe3JldHVybiB0aGlzLm11bHRpcGx5U2NhbGFyKGEvdGhpcy5sZW5ndGgoKSl9LGxlcnA6ZnVuY3Rpb24oYSxiKXt0aGlzLngrPShhLngtdGhpcy54KSpiO3RoaXMueSs9XG4oYS55LXRoaXMueSkqYjt0aGlzLnorPShhLnotdGhpcy56KSpiO3JldHVybiB0aGlzfSxsZXJwVmVjdG9yczpmdW5jdGlvbihhLGIsYyl7cmV0dXJuIHRoaXMuc3ViVmVjdG9ycyhiLGEpLm11bHRpcGx5U2NhbGFyKGMpLmFkZChhKX0sY3Jvc3M6ZnVuY3Rpb24oYSxiKXtpZih2b2lkIDAhPT1iKXJldHVybiBjb25zb2xlLndhcm4oXCJUSFJFRS5WZWN0b3IzOiAuY3Jvc3MoKSBub3cgb25seSBhY2NlcHRzIG9uZSBhcmd1bWVudC4gVXNlIC5jcm9zc1ZlY3RvcnMoIGEsIGIgKSBpbnN0ZWFkLlwiKSx0aGlzLmNyb3NzVmVjdG9ycyhhLGIpO3ZhciBjPXRoaXMueCxkPXRoaXMueSxlPXRoaXMuejt0aGlzLng9ZCphLnotZSphLnk7dGhpcy55PWUqYS54LWMqYS56O3RoaXMuej1jKmEueS1kKmEueDtyZXR1cm4gdGhpc30sY3Jvc3NWZWN0b3JzOmZ1bmN0aW9uKGEsYil7dmFyIGM9YS54LGQ9YS55LGU9YS56LGY9Yi54LGc9Yi55LGg9Yi56O3RoaXMueD1kKmgtZSpnO3RoaXMueT1lKmYtYypoO1xudGhpcy56PWMqZy1kKmY7cmV0dXJuIHRoaXN9LHByb2plY3RPblZlY3RvcjpmdW5jdGlvbihhKXt2YXIgYj1hLmRvdCh0aGlzKS9hLmxlbmd0aFNxKCk7cmV0dXJuIHRoaXMuY29weShhKS5tdWx0aXBseVNjYWxhcihiKX0scHJvamVjdE9uUGxhbmU6ZnVuY3Rpb24oKXt2YXIgYTtyZXR1cm4gZnVuY3Rpb24oYil7dm9pZCAwPT09YSYmKGE9bmV3IFRIUkVFLlZlY3RvcjMpO2EuY29weSh0aGlzKS5wcm9qZWN0T25WZWN0b3IoYik7cmV0dXJuIHRoaXMuc3ViKGEpfX0oKSxyZWZsZWN0OmZ1bmN0aW9uKCl7dmFyIGE7cmV0dXJuIGZ1bmN0aW9uKGIpe3ZvaWQgMD09PWEmJihhPW5ldyBUSFJFRS5WZWN0b3IzKTtyZXR1cm4gdGhpcy5zdWIoYS5jb3B5KGIpLm11bHRpcGx5U2NhbGFyKDIqdGhpcy5kb3QoYikpKX19KCksYW5nbGVUbzpmdW5jdGlvbihhKXthPXRoaXMuZG90KGEpL01hdGguc3FydCh0aGlzLmxlbmd0aFNxKCkqYS5sZW5ndGhTcSgpKTtyZXR1cm4gTWF0aC5hY29zKFRIUkVFLk1hdGguY2xhbXAoYSxcbi0xLDEpKX0sZGlzdGFuY2VUbzpmdW5jdGlvbihhKXtyZXR1cm4gTWF0aC5zcXJ0KHRoaXMuZGlzdGFuY2VUb1NxdWFyZWQoYSkpfSxkaXN0YW5jZVRvU3F1YXJlZDpmdW5jdGlvbihhKXt2YXIgYj10aGlzLngtYS54LGM9dGhpcy55LWEueTthPXRoaXMuei1hLno7cmV0dXJuIGIqYitjKmMrYSphfSxkaXN0YW5jZVRvTWFuaGF0dGFuOmZ1bmN0aW9uKGEpe3JldHVybiBNYXRoLmFicyh0aGlzLngtYS54KStNYXRoLmFicyh0aGlzLnktYS55KStNYXRoLmFicyh0aGlzLnotYS56KX0sc2V0RnJvbVNwaGVyaWNhbDpmdW5jdGlvbihhKXt2YXIgYj1NYXRoLnNpbihhLnBoaSkqYS5yYWRpdXM7dGhpcy54PWIqTWF0aC5zaW4oYS50aGV0YSk7dGhpcy55PU1hdGguY29zKGEucGhpKSphLnJhZGl1czt0aGlzLno9YipNYXRoLmNvcyhhLnRoZXRhKTtyZXR1cm4gdGhpc30sc2V0RnJvbU1hdHJpeFBvc2l0aW9uOmZ1bmN0aW9uKGEpe3JldHVybiB0aGlzLnNldEZyb21NYXRyaXhDb2x1bW4oYSwzKX0sXG5zZXRGcm9tTWF0cml4U2NhbGU6ZnVuY3Rpb24oYSl7dmFyIGI9dGhpcy5zZXRGcm9tTWF0cml4Q29sdW1uKGEsMCkubGVuZ3RoKCksYz10aGlzLnNldEZyb21NYXRyaXhDb2x1bW4oYSwxKS5sZW5ndGgoKTthPXRoaXMuc2V0RnJvbU1hdHJpeENvbHVtbihhLDIpLmxlbmd0aCgpO3RoaXMueD1iO3RoaXMueT1jO3RoaXMuej1hO3JldHVybiB0aGlzfSxzZXRGcm9tTWF0cml4Q29sdW1uOmZ1bmN0aW9uKGEsYil7aWYoXCJudW1iZXJcIj09PXR5cGVvZiBhKXtjb25zb2xlLndhcm4oXCJUSFJFRS5WZWN0b3IzOiBzZXRGcm9tTWF0cml4Q29sdW1uIG5vdyBleHBlY3RzICggbWF0cml4LCBpbmRleCApLlwiKTt2YXIgYz1hO2E9YjtiPWN9cmV0dXJuIHRoaXMuZnJvbUFycmF5KGEuZWxlbWVudHMsNCpiKX0sZXF1YWxzOmZ1bmN0aW9uKGEpe3JldHVybiBhLng9PT10aGlzLngmJmEueT09PXRoaXMueSYmYS56PT09dGhpcy56fSxmcm9tQXJyYXk6ZnVuY3Rpb24oYSxiKXt2b2lkIDA9PT1iJiYoYj0wKTtcbnRoaXMueD1hW2JdO3RoaXMueT1hW2IrMV07dGhpcy56PWFbYisyXTtyZXR1cm4gdGhpc30sdG9BcnJheTpmdW5jdGlvbihhLGIpe3ZvaWQgMD09PWEmJihhPVtdKTt2b2lkIDA9PT1iJiYoYj0wKTthW2JdPXRoaXMueDthW2IrMV09dGhpcy55O2FbYisyXT10aGlzLno7cmV0dXJuIGF9LGZyb21BdHRyaWJ1dGU6ZnVuY3Rpb24oYSxiLGMpe3ZvaWQgMD09PWMmJihjPTApO2I9YiphLml0ZW1TaXplK2M7dGhpcy54PWEuYXJyYXlbYl07dGhpcy55PWEuYXJyYXlbYisxXTt0aGlzLno9YS5hcnJheVtiKzJdO3JldHVybiB0aGlzfX07VEhSRUUuVmVjdG9yND1mdW5jdGlvbihhLGIsYyxkKXt0aGlzLng9YXx8MDt0aGlzLnk9Ynx8MDt0aGlzLno9Y3x8MDt0aGlzLnc9dm9pZCAwIT09ZD9kOjF9O1xuVEhSRUUuVmVjdG9yNC5wcm90b3R5cGU9e2NvbnN0cnVjdG9yOlRIUkVFLlZlY3RvcjQsc2V0OmZ1bmN0aW9uKGEsYixjLGQpe3RoaXMueD1hO3RoaXMueT1iO3RoaXMuej1jO3RoaXMudz1kO3JldHVybiB0aGlzfSxzZXRTY2FsYXI6ZnVuY3Rpb24oYSl7dGhpcy53PXRoaXMuej10aGlzLnk9dGhpcy54PWE7cmV0dXJuIHRoaXN9LHNldFg6ZnVuY3Rpb24oYSl7dGhpcy54PWE7cmV0dXJuIHRoaXN9LHNldFk6ZnVuY3Rpb24oYSl7dGhpcy55PWE7cmV0dXJuIHRoaXN9LHNldFo6ZnVuY3Rpb24oYSl7dGhpcy56PWE7cmV0dXJuIHRoaXN9LHNldFc6ZnVuY3Rpb24oYSl7dGhpcy53PWE7cmV0dXJuIHRoaXN9LHNldENvbXBvbmVudDpmdW5jdGlvbihhLGIpe3N3aXRjaChhKXtjYXNlIDA6dGhpcy54PWI7YnJlYWs7Y2FzZSAxOnRoaXMueT1iO2JyZWFrO2Nhc2UgMjp0aGlzLno9YjticmVhaztjYXNlIDM6dGhpcy53PWI7YnJlYWs7ZGVmYXVsdDp0aHJvdyBFcnJvcihcImluZGV4IGlzIG91dCBvZiByYW5nZTogXCIrXG5hKTt9fSxnZXRDb21wb25lbnQ6ZnVuY3Rpb24oYSl7c3dpdGNoKGEpe2Nhc2UgMDpyZXR1cm4gdGhpcy54O2Nhc2UgMTpyZXR1cm4gdGhpcy55O2Nhc2UgMjpyZXR1cm4gdGhpcy56O2Nhc2UgMzpyZXR1cm4gdGhpcy53O2RlZmF1bHQ6dGhyb3cgRXJyb3IoXCJpbmRleCBpcyBvdXQgb2YgcmFuZ2U6IFwiK2EpO319LGNsb25lOmZ1bmN0aW9uKCl7cmV0dXJuIG5ldyB0aGlzLmNvbnN0cnVjdG9yKHRoaXMueCx0aGlzLnksdGhpcy56LHRoaXMudyl9LGNvcHk6ZnVuY3Rpb24oYSl7dGhpcy54PWEueDt0aGlzLnk9YS55O3RoaXMuej1hLno7dGhpcy53PXZvaWQgMCE9PWEudz9hLnc6MTtyZXR1cm4gdGhpc30sYWRkOmZ1bmN0aW9uKGEsYil7aWYodm9pZCAwIT09YilyZXR1cm4gY29uc29sZS53YXJuKFwiVEhSRUUuVmVjdG9yNDogLmFkZCgpIG5vdyBvbmx5IGFjY2VwdHMgb25lIGFyZ3VtZW50LiBVc2UgLmFkZFZlY3RvcnMoIGEsIGIgKSBpbnN0ZWFkLlwiKSx0aGlzLmFkZFZlY3RvcnMoYSxiKTtcbnRoaXMueCs9YS54O3RoaXMueSs9YS55O3RoaXMueis9YS56O3RoaXMudys9YS53O3JldHVybiB0aGlzfSxhZGRTY2FsYXI6ZnVuY3Rpb24oYSl7dGhpcy54Kz1hO3RoaXMueSs9YTt0aGlzLnorPWE7dGhpcy53Kz1hO3JldHVybiB0aGlzfSxhZGRWZWN0b3JzOmZ1bmN0aW9uKGEsYil7dGhpcy54PWEueCtiLng7dGhpcy55PWEueStiLnk7dGhpcy56PWEueitiLno7dGhpcy53PWEudytiLnc7cmV0dXJuIHRoaXN9LGFkZFNjYWxlZFZlY3RvcjpmdW5jdGlvbihhLGIpe3RoaXMueCs9YS54KmI7dGhpcy55Kz1hLnkqYjt0aGlzLnorPWEueipiO3RoaXMudys9YS53KmI7cmV0dXJuIHRoaXN9LHN1YjpmdW5jdGlvbihhLGIpe2lmKHZvaWQgMCE9PWIpcmV0dXJuIGNvbnNvbGUud2FybihcIlRIUkVFLlZlY3RvcjQ6IC5zdWIoKSBub3cgb25seSBhY2NlcHRzIG9uZSBhcmd1bWVudC4gVXNlIC5zdWJWZWN0b3JzKCBhLCBiICkgaW5zdGVhZC5cIiksdGhpcy5zdWJWZWN0b3JzKGEsYik7dGhpcy54LT1cbmEueDt0aGlzLnktPWEueTt0aGlzLnotPWEuejt0aGlzLnctPWEudztyZXR1cm4gdGhpc30sc3ViU2NhbGFyOmZ1bmN0aW9uKGEpe3RoaXMueC09YTt0aGlzLnktPWE7dGhpcy56LT1hO3RoaXMudy09YTtyZXR1cm4gdGhpc30sc3ViVmVjdG9yczpmdW5jdGlvbihhLGIpe3RoaXMueD1hLngtYi54O3RoaXMueT1hLnktYi55O3RoaXMuej1hLnotYi56O3RoaXMudz1hLnctYi53O3JldHVybiB0aGlzfSxtdWx0aXBseVNjYWxhcjpmdW5jdGlvbihhKXtpc0Zpbml0ZShhKT8odGhpcy54Kj1hLHRoaXMueSo9YSx0aGlzLnoqPWEsdGhpcy53Kj1hKTp0aGlzLnc9dGhpcy56PXRoaXMueT10aGlzLng9MDtyZXR1cm4gdGhpc30sYXBwbHlNYXRyaXg0OmZ1bmN0aW9uKGEpe3ZhciBiPXRoaXMueCxjPXRoaXMueSxkPXRoaXMueixlPXRoaXMudzthPWEuZWxlbWVudHM7dGhpcy54PWFbMF0qYithWzRdKmMrYVs4XSpkK2FbMTJdKmU7dGhpcy55PWFbMV0qYithWzVdKmMrYVs5XSpkK2FbMTNdKmU7dGhpcy56PVxuYVsyXSpiK2FbNl0qYythWzEwXSpkK2FbMTRdKmU7dGhpcy53PWFbM10qYithWzddKmMrYVsxMV0qZCthWzE1XSplO3JldHVybiB0aGlzfSxkaXZpZGVTY2FsYXI6ZnVuY3Rpb24oYSl7cmV0dXJuIHRoaXMubXVsdGlwbHlTY2FsYXIoMS9hKX0sc2V0QXhpc0FuZ2xlRnJvbVF1YXRlcm5pb246ZnVuY3Rpb24oYSl7dGhpcy53PTIqTWF0aC5hY29zKGEudyk7dmFyIGI9TWF0aC5zcXJ0KDEtYS53KmEudyk7MUUtND5iPyh0aGlzLng9MSx0aGlzLno9dGhpcy55PTApOih0aGlzLng9YS54L2IsdGhpcy55PWEueS9iLHRoaXMuej1hLnovYik7cmV0dXJuIHRoaXN9LHNldEF4aXNBbmdsZUZyb21Sb3RhdGlvbk1hdHJpeDpmdW5jdGlvbihhKXt2YXIgYixjLGQ7YT1hLmVsZW1lbnRzO3ZhciBlPWFbMF07ZD1hWzRdO3ZhciBmPWFbOF0sZz1hWzFdLGg9YVs1XSxrPWFbOV07Yz1hWzJdO2I9YVs2XTt2YXIgbD1hWzEwXTtpZiguMDE+TWF0aC5hYnMoZC1nKSYmLjAxPk1hdGguYWJzKGYtYykmJi4wMT5cbk1hdGguYWJzKGstYikpe2lmKC4xPk1hdGguYWJzKGQrZykmJi4xPk1hdGguYWJzKGYrYykmJi4xPk1hdGguYWJzKGsrYikmJi4xPk1hdGguYWJzKGUraCtsLTMpKXJldHVybiB0aGlzLnNldCgxLDAsMCwwKSx0aGlzO2E9TWF0aC5QSTtlPShlKzEpLzI7aD0oaCsxKS8yO2w9KGwrMSkvMjtkPShkK2cpLzQ7Zj0oZitjKS80O2s9KGsrYikvNDtlPmgmJmU+bD8uMDE+ZT8oYj0wLGQ9Yz0uNzA3MTA2NzgxKTooYj1NYXRoLnNxcnQoZSksYz1kL2IsZD1mL2IpOmg+bD8uMDE+aD8oYj0uNzA3MTA2NzgxLGM9MCxkPS43MDcxMDY3ODEpOihjPU1hdGguc3FydChoKSxiPWQvYyxkPWsvYyk6LjAxPmw/KGM9Yj0uNzA3MTA2NzgxLGQ9MCk6KGQ9TWF0aC5zcXJ0KGwpLGI9Zi9kLGM9ay9kKTt0aGlzLnNldChiLGMsZCxhKTtyZXR1cm4gdGhpc31hPU1hdGguc3FydCgoYi1rKSooYi1rKSsoZi1jKSooZi1jKSsoZy1kKSooZy1kKSk7LjAwMT5NYXRoLmFicyhhKSYmKGE9MSk7dGhpcy54PShiLWspL1xuYTt0aGlzLnk9KGYtYykvYTt0aGlzLno9KGctZCkvYTt0aGlzLnc9TWF0aC5hY29zKChlK2grbC0xKS8yKTtyZXR1cm4gdGhpc30sbWluOmZ1bmN0aW9uKGEpe3RoaXMueD1NYXRoLm1pbih0aGlzLngsYS54KTt0aGlzLnk9TWF0aC5taW4odGhpcy55LGEueSk7dGhpcy56PU1hdGgubWluKHRoaXMueixhLnopO3RoaXMudz1NYXRoLm1pbih0aGlzLncsYS53KTtyZXR1cm4gdGhpc30sbWF4OmZ1bmN0aW9uKGEpe3RoaXMueD1NYXRoLm1heCh0aGlzLngsYS54KTt0aGlzLnk9TWF0aC5tYXgodGhpcy55LGEueSk7dGhpcy56PU1hdGgubWF4KHRoaXMueixhLnopO3RoaXMudz1NYXRoLm1heCh0aGlzLncsYS53KTtyZXR1cm4gdGhpc30sY2xhbXA6ZnVuY3Rpb24oYSxiKXt0aGlzLng9TWF0aC5tYXgoYS54LE1hdGgubWluKGIueCx0aGlzLngpKTt0aGlzLnk9TWF0aC5tYXgoYS55LE1hdGgubWluKGIueSx0aGlzLnkpKTt0aGlzLno9TWF0aC5tYXgoYS56LE1hdGgubWluKGIueix0aGlzLnopKTtcbnRoaXMudz1NYXRoLm1heChhLncsTWF0aC5taW4oYi53LHRoaXMudykpO3JldHVybiB0aGlzfSxjbGFtcFNjYWxhcjpmdW5jdGlvbigpe3ZhciBhLGI7cmV0dXJuIGZ1bmN0aW9uKGMsZCl7dm9pZCAwPT09YSYmKGE9bmV3IFRIUkVFLlZlY3RvcjQsYj1uZXcgVEhSRUUuVmVjdG9yNCk7YS5zZXQoYyxjLGMsYyk7Yi5zZXQoZCxkLGQsZCk7cmV0dXJuIHRoaXMuY2xhbXAoYSxiKX19KCksZmxvb3I6ZnVuY3Rpb24oKXt0aGlzLng9TWF0aC5mbG9vcih0aGlzLngpO3RoaXMueT1NYXRoLmZsb29yKHRoaXMueSk7dGhpcy56PU1hdGguZmxvb3IodGhpcy56KTt0aGlzLnc9TWF0aC5mbG9vcih0aGlzLncpO3JldHVybiB0aGlzfSxjZWlsOmZ1bmN0aW9uKCl7dGhpcy54PU1hdGguY2VpbCh0aGlzLngpO3RoaXMueT1NYXRoLmNlaWwodGhpcy55KTt0aGlzLno9TWF0aC5jZWlsKHRoaXMueik7dGhpcy53PU1hdGguY2VpbCh0aGlzLncpO3JldHVybiB0aGlzfSxyb3VuZDpmdW5jdGlvbigpe3RoaXMueD1cbk1hdGgucm91bmQodGhpcy54KTt0aGlzLnk9TWF0aC5yb3VuZCh0aGlzLnkpO3RoaXMuej1NYXRoLnJvdW5kKHRoaXMueik7dGhpcy53PU1hdGgucm91bmQodGhpcy53KTtyZXR1cm4gdGhpc30scm91bmRUb1plcm86ZnVuY3Rpb24oKXt0aGlzLng9MD50aGlzLng/TWF0aC5jZWlsKHRoaXMueCk6TWF0aC5mbG9vcih0aGlzLngpO3RoaXMueT0wPnRoaXMueT9NYXRoLmNlaWwodGhpcy55KTpNYXRoLmZsb29yKHRoaXMueSk7dGhpcy56PTA+dGhpcy56P01hdGguY2VpbCh0aGlzLnopOk1hdGguZmxvb3IodGhpcy56KTt0aGlzLnc9MD50aGlzLnc/TWF0aC5jZWlsKHRoaXMudyk6TWF0aC5mbG9vcih0aGlzLncpO3JldHVybiB0aGlzfSxuZWdhdGU6ZnVuY3Rpb24oKXt0aGlzLng9LXRoaXMueDt0aGlzLnk9LXRoaXMueTt0aGlzLno9LXRoaXMuejt0aGlzLnc9LXRoaXMudztyZXR1cm4gdGhpc30sZG90OmZ1bmN0aW9uKGEpe3JldHVybiB0aGlzLngqYS54K3RoaXMueSphLnkrdGhpcy56KlxuYS56K3RoaXMudyphLnd9LGxlbmd0aFNxOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMueCp0aGlzLngrdGhpcy55KnRoaXMueSt0aGlzLnoqdGhpcy56K3RoaXMudyp0aGlzLnd9LGxlbmd0aDpmdW5jdGlvbigpe3JldHVybiBNYXRoLnNxcnQodGhpcy54KnRoaXMueCt0aGlzLnkqdGhpcy55K3RoaXMueip0aGlzLnordGhpcy53KnRoaXMudyl9LGxlbmd0aE1hbmhhdHRhbjpmdW5jdGlvbigpe3JldHVybiBNYXRoLmFicyh0aGlzLngpK01hdGguYWJzKHRoaXMueSkrTWF0aC5hYnModGhpcy56KStNYXRoLmFicyh0aGlzLncpfSxub3JtYWxpemU6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5kaXZpZGVTY2FsYXIodGhpcy5sZW5ndGgoKSl9LHNldExlbmd0aDpmdW5jdGlvbihhKXtyZXR1cm4gdGhpcy5tdWx0aXBseVNjYWxhcihhL3RoaXMubGVuZ3RoKCkpfSxsZXJwOmZ1bmN0aW9uKGEsYil7dGhpcy54Kz0oYS54LXRoaXMueCkqYjt0aGlzLnkrPShhLnktdGhpcy55KSpiO3RoaXMueis9KGEuei1cbnRoaXMueikqYjt0aGlzLncrPShhLnctdGhpcy53KSpiO3JldHVybiB0aGlzfSxsZXJwVmVjdG9yczpmdW5jdGlvbihhLGIsYyl7cmV0dXJuIHRoaXMuc3ViVmVjdG9ycyhiLGEpLm11bHRpcGx5U2NhbGFyKGMpLmFkZChhKX0sZXF1YWxzOmZ1bmN0aW9uKGEpe3JldHVybiBhLng9PT10aGlzLngmJmEueT09PXRoaXMueSYmYS56PT09dGhpcy56JiZhLnc9PT10aGlzLnd9LGZyb21BcnJheTpmdW5jdGlvbihhLGIpe3ZvaWQgMD09PWImJihiPTApO3RoaXMueD1hW2JdO3RoaXMueT1hW2IrMV07dGhpcy56PWFbYisyXTt0aGlzLnc9YVtiKzNdO3JldHVybiB0aGlzfSx0b0FycmF5OmZ1bmN0aW9uKGEsYil7dm9pZCAwPT09YSYmKGE9W10pO3ZvaWQgMD09PWImJihiPTApO2FbYl09dGhpcy54O2FbYisxXT10aGlzLnk7YVtiKzJdPXRoaXMuejthW2IrM109dGhpcy53O3JldHVybiBhfSxmcm9tQXR0cmlidXRlOmZ1bmN0aW9uKGEsYixjKXt2b2lkIDA9PT1jJiYoYz0wKTtiPWIqYS5pdGVtU2l6ZStcbmM7dGhpcy54PWEuYXJyYXlbYl07dGhpcy55PWEuYXJyYXlbYisxXTt0aGlzLno9YS5hcnJheVtiKzJdO3RoaXMudz1hLmFycmF5W2IrM107cmV0dXJuIHRoaXN9fTtUSFJFRS5FdWxlcj1mdW5jdGlvbihhLGIsYyxkKXt0aGlzLl94PWF8fDA7dGhpcy5feT1ifHwwO3RoaXMuX3o9Y3x8MDt0aGlzLl9vcmRlcj1kfHxUSFJFRS5FdWxlci5EZWZhdWx0T3JkZXJ9O1RIUkVFLkV1bGVyLlJvdGF0aW9uT3JkZXJzPVwiWFlaIFlaWCBaWFkgWFpZIFlYWiBaWVhcIi5zcGxpdChcIiBcIik7VEhSRUUuRXVsZXIuRGVmYXVsdE9yZGVyPVwiWFlaXCI7XG5USFJFRS5FdWxlci5wcm90b3R5cGU9e2NvbnN0cnVjdG9yOlRIUkVFLkV1bGVyLGdldCB4KCl7cmV0dXJuIHRoaXMuX3h9LHNldCB4KGEpe3RoaXMuX3g9YTt0aGlzLm9uQ2hhbmdlQ2FsbGJhY2soKX0sZ2V0IHkoKXtyZXR1cm4gdGhpcy5feX0sc2V0IHkoYSl7dGhpcy5feT1hO3RoaXMub25DaGFuZ2VDYWxsYmFjaygpfSxnZXQgeigpe3JldHVybiB0aGlzLl96fSxzZXQgeihhKXt0aGlzLl96PWE7dGhpcy5vbkNoYW5nZUNhbGxiYWNrKCl9LGdldCBvcmRlcigpe3JldHVybiB0aGlzLl9vcmRlcn0sc2V0IG9yZGVyKGEpe3RoaXMuX29yZGVyPWE7dGhpcy5vbkNoYW5nZUNhbGxiYWNrKCl9LHNldDpmdW5jdGlvbihhLGIsYyxkKXt0aGlzLl94PWE7dGhpcy5feT1iO3RoaXMuX3o9Yzt0aGlzLl9vcmRlcj1kfHx0aGlzLl9vcmRlcjt0aGlzLm9uQ2hhbmdlQ2FsbGJhY2soKTtyZXR1cm4gdGhpc30sY2xvbmU6ZnVuY3Rpb24oKXtyZXR1cm4gbmV3IHRoaXMuY29uc3RydWN0b3IodGhpcy5feCxcbnRoaXMuX3ksdGhpcy5feix0aGlzLl9vcmRlcil9LGNvcHk6ZnVuY3Rpb24oYSl7dGhpcy5feD1hLl94O3RoaXMuX3k9YS5feTt0aGlzLl96PWEuX3o7dGhpcy5fb3JkZXI9YS5fb3JkZXI7dGhpcy5vbkNoYW5nZUNhbGxiYWNrKCk7cmV0dXJuIHRoaXN9LHNldEZyb21Sb3RhdGlvbk1hdHJpeDpmdW5jdGlvbihhLGIsYyl7dmFyIGQ9VEhSRUUuTWF0aC5jbGFtcCxlPWEuZWxlbWVudHM7YT1lWzBdO3ZhciBmPWVbNF0sZz1lWzhdLGg9ZVsxXSxrPWVbNV0sbD1lWzldLG09ZVsyXSxwPWVbNl0sZT1lWzEwXTtiPWJ8fHRoaXMuX29yZGVyO1wiWFlaXCI9PT1iPyh0aGlzLl95PU1hdGguYXNpbihkKGcsLTEsMSkpLC45OTk5OT5NYXRoLmFicyhnKT8odGhpcy5feD1NYXRoLmF0YW4yKC1sLGUpLHRoaXMuX3o9TWF0aC5hdGFuMigtZixhKSk6KHRoaXMuX3g9TWF0aC5hdGFuMihwLGspLHRoaXMuX3o9MCkpOlwiWVhaXCI9PT1iPyh0aGlzLl94PU1hdGguYXNpbigtZChsLC0xLDEpKSwuOTk5OTk+TWF0aC5hYnMobCk/XG4odGhpcy5feT1NYXRoLmF0YW4yKGcsZSksdGhpcy5fej1NYXRoLmF0YW4yKGgsaykpOih0aGlzLl95PU1hdGguYXRhbjIoLW0sYSksdGhpcy5fej0wKSk6XCJaWFlcIj09PWI/KHRoaXMuX3g9TWF0aC5hc2luKGQocCwtMSwxKSksLjk5OTk5Pk1hdGguYWJzKHApPyh0aGlzLl95PU1hdGguYXRhbjIoLW0sZSksdGhpcy5fej1NYXRoLmF0YW4yKC1mLGspKToodGhpcy5feT0wLHRoaXMuX3o9TWF0aC5hdGFuMihoLGEpKSk6XCJaWVhcIj09PWI/KHRoaXMuX3k9TWF0aC5hc2luKC1kKG0sLTEsMSkpLC45OTk5OT5NYXRoLmFicyhtKT8odGhpcy5feD1NYXRoLmF0YW4yKHAsZSksdGhpcy5fej1NYXRoLmF0YW4yKGgsYSkpOih0aGlzLl94PTAsdGhpcy5fej1NYXRoLmF0YW4yKC1mLGspKSk6XCJZWlhcIj09PWI/KHRoaXMuX3o9TWF0aC5hc2luKGQoaCwtMSwxKSksLjk5OTk5Pk1hdGguYWJzKGgpPyh0aGlzLl94PU1hdGguYXRhbjIoLWwsayksdGhpcy5feT1NYXRoLmF0YW4yKC1tLGEpKToodGhpcy5feD1cbjAsdGhpcy5feT1NYXRoLmF0YW4yKGcsZSkpKTpcIlhaWVwiPT09Yj8odGhpcy5fej1NYXRoLmFzaW4oLWQoZiwtMSwxKSksLjk5OTk5Pk1hdGguYWJzKGYpPyh0aGlzLl94PU1hdGguYXRhbjIocCxrKSx0aGlzLl95PU1hdGguYXRhbjIoZyxhKSk6KHRoaXMuX3g9TWF0aC5hdGFuMigtbCxlKSx0aGlzLl95PTApKTpjb25zb2xlLndhcm4oXCJUSFJFRS5FdWxlcjogLnNldEZyb21Sb3RhdGlvbk1hdHJpeCgpIGdpdmVuIHVuc3VwcG9ydGVkIG9yZGVyOiBcIitiKTt0aGlzLl9vcmRlcj1iO2lmKCExIT09Yyl0aGlzLm9uQ2hhbmdlQ2FsbGJhY2soKTtyZXR1cm4gdGhpc30sc2V0RnJvbVF1YXRlcm5pb246ZnVuY3Rpb24oKXt2YXIgYTtyZXR1cm4gZnVuY3Rpb24oYixjLGQpe3ZvaWQgMD09PWEmJihhPW5ldyBUSFJFRS5NYXRyaXg0KTthLm1ha2VSb3RhdGlvbkZyb21RdWF0ZXJuaW9uKGIpO3JldHVybiB0aGlzLnNldEZyb21Sb3RhdGlvbk1hdHJpeChhLGMsZCl9fSgpLHNldEZyb21WZWN0b3IzOmZ1bmN0aW9uKGEsXG5iKXtyZXR1cm4gdGhpcy5zZXQoYS54LGEueSxhLnosYnx8dGhpcy5fb3JkZXIpfSxyZW9yZGVyOmZ1bmN0aW9uKCl7dmFyIGE9bmV3IFRIUkVFLlF1YXRlcm5pb247cmV0dXJuIGZ1bmN0aW9uKGIpe2Euc2V0RnJvbUV1bGVyKHRoaXMpO3JldHVybiB0aGlzLnNldEZyb21RdWF0ZXJuaW9uKGEsYil9fSgpLGVxdWFsczpmdW5jdGlvbihhKXtyZXR1cm4gYS5feD09PXRoaXMuX3gmJmEuX3k9PT10aGlzLl95JiZhLl96PT09dGhpcy5feiYmYS5fb3JkZXI9PT10aGlzLl9vcmRlcn0sZnJvbUFycmF5OmZ1bmN0aW9uKGEpe3RoaXMuX3g9YVswXTt0aGlzLl95PWFbMV07dGhpcy5fej1hWzJdO3ZvaWQgMCE9PWFbM10mJih0aGlzLl9vcmRlcj1hWzNdKTt0aGlzLm9uQ2hhbmdlQ2FsbGJhY2soKTtyZXR1cm4gdGhpc30sdG9BcnJheTpmdW5jdGlvbihhLGIpe3ZvaWQgMD09PWEmJihhPVtdKTt2b2lkIDA9PT1iJiYoYj0wKTthW2JdPXRoaXMuX3g7YVtiKzFdPXRoaXMuX3k7YVtiKzJdPXRoaXMuX3o7XG5hW2IrM109dGhpcy5fb3JkZXI7cmV0dXJuIGF9LHRvVmVjdG9yMzpmdW5jdGlvbihhKXtyZXR1cm4gYT9hLnNldCh0aGlzLl94LHRoaXMuX3ksdGhpcy5feik6bmV3IFRIUkVFLlZlY3RvcjModGhpcy5feCx0aGlzLl95LHRoaXMuX3opfSxvbkNoYW5nZTpmdW5jdGlvbihhKXt0aGlzLm9uQ2hhbmdlQ2FsbGJhY2s9YTtyZXR1cm4gdGhpc30sb25DaGFuZ2VDYWxsYmFjazpmdW5jdGlvbigpe319O1RIUkVFLkxpbmUzPWZ1bmN0aW9uKGEsYil7dGhpcy5zdGFydD12b2lkIDAhPT1hP2E6bmV3IFRIUkVFLlZlY3RvcjM7dGhpcy5lbmQ9dm9pZCAwIT09Yj9iOm5ldyBUSFJFRS5WZWN0b3IzfTtcblRIUkVFLkxpbmUzLnByb3RvdHlwZT17Y29uc3RydWN0b3I6VEhSRUUuTGluZTMsc2V0OmZ1bmN0aW9uKGEsYil7dGhpcy5zdGFydC5jb3B5KGEpO3RoaXMuZW5kLmNvcHkoYik7cmV0dXJuIHRoaXN9LGNsb25lOmZ1bmN0aW9uKCl7cmV0dXJuKG5ldyB0aGlzLmNvbnN0cnVjdG9yKS5jb3B5KHRoaXMpfSxjb3B5OmZ1bmN0aW9uKGEpe3RoaXMuc3RhcnQuY29weShhLnN0YXJ0KTt0aGlzLmVuZC5jb3B5KGEuZW5kKTtyZXR1cm4gdGhpc30sY2VudGVyOmZ1bmN0aW9uKGEpe3JldHVybihhfHxuZXcgVEhSRUUuVmVjdG9yMykuYWRkVmVjdG9ycyh0aGlzLnN0YXJ0LHRoaXMuZW5kKS5tdWx0aXBseVNjYWxhciguNSl9LGRlbHRhOmZ1bmN0aW9uKGEpe3JldHVybihhfHxuZXcgVEhSRUUuVmVjdG9yMykuc3ViVmVjdG9ycyh0aGlzLmVuZCx0aGlzLnN0YXJ0KX0sZGlzdGFuY2VTcTpmdW5jdGlvbigpe3JldHVybiB0aGlzLnN0YXJ0LmRpc3RhbmNlVG9TcXVhcmVkKHRoaXMuZW5kKX0sZGlzdGFuY2U6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5zdGFydC5kaXN0YW5jZVRvKHRoaXMuZW5kKX0sXG5hdDpmdW5jdGlvbihhLGIpe3ZhciBjPWJ8fG5ldyBUSFJFRS5WZWN0b3IzO3JldHVybiB0aGlzLmRlbHRhKGMpLm11bHRpcGx5U2NhbGFyKGEpLmFkZCh0aGlzLnN0YXJ0KX0sY2xvc2VzdFBvaW50VG9Qb2ludFBhcmFtZXRlcjpmdW5jdGlvbigpe3ZhciBhPW5ldyBUSFJFRS5WZWN0b3IzLGI9bmV3IFRIUkVFLlZlY3RvcjM7cmV0dXJuIGZ1bmN0aW9uKGMsZCl7YS5zdWJWZWN0b3JzKGMsdGhpcy5zdGFydCk7Yi5zdWJWZWN0b3JzKHRoaXMuZW5kLHRoaXMuc3RhcnQpO3ZhciBlPWIuZG90KGIpLGU9Yi5kb3QoYSkvZTtkJiYoZT1USFJFRS5NYXRoLmNsYW1wKGUsMCwxKSk7cmV0dXJuIGV9fSgpLGNsb3Nlc3RQb2ludFRvUG9pbnQ6ZnVuY3Rpb24oYSxiLGMpe2E9dGhpcy5jbG9zZXN0UG9pbnRUb1BvaW50UGFyYW1ldGVyKGEsYik7Yz1jfHxuZXcgVEhSRUUuVmVjdG9yMztyZXR1cm4gdGhpcy5kZWx0YShjKS5tdWx0aXBseVNjYWxhcihhKS5hZGQodGhpcy5zdGFydCl9LGFwcGx5TWF0cml4NDpmdW5jdGlvbihhKXt0aGlzLnN0YXJ0LmFwcGx5TWF0cml4NChhKTtcbnRoaXMuZW5kLmFwcGx5TWF0cml4NChhKTtyZXR1cm4gdGhpc30sZXF1YWxzOmZ1bmN0aW9uKGEpe3JldHVybiBhLnN0YXJ0LmVxdWFscyh0aGlzLnN0YXJ0KSYmYS5lbmQuZXF1YWxzKHRoaXMuZW5kKX19O1RIUkVFLkJveDI9ZnVuY3Rpb24oYSxiKXt0aGlzLm1pbj12b2lkIDAhPT1hP2E6bmV3IFRIUkVFLlZlY3RvcjIoSW5maW5pdHksSW5maW5pdHkpO3RoaXMubWF4PXZvaWQgMCE9PWI/YjpuZXcgVEhSRUUuVmVjdG9yMigtSW5maW5pdHksLUluZmluaXR5KX07XG5USFJFRS5Cb3gyLnByb3RvdHlwZT17Y29uc3RydWN0b3I6VEhSRUUuQm94MixzZXQ6ZnVuY3Rpb24oYSxiKXt0aGlzLm1pbi5jb3B5KGEpO3RoaXMubWF4LmNvcHkoYik7cmV0dXJuIHRoaXN9LHNldEZyb21Qb2ludHM6ZnVuY3Rpb24oYSl7dGhpcy5tYWtlRW1wdHkoKTtmb3IodmFyIGI9MCxjPWEubGVuZ3RoO2I8YztiKyspdGhpcy5leHBhbmRCeVBvaW50KGFbYl0pO3JldHVybiB0aGlzfSxzZXRGcm9tQ2VudGVyQW5kU2l6ZTpmdW5jdGlvbigpe3ZhciBhPW5ldyBUSFJFRS5WZWN0b3IyO3JldHVybiBmdW5jdGlvbihiLGMpe3ZhciBkPWEuY29weShjKS5tdWx0aXBseVNjYWxhciguNSk7dGhpcy5taW4uY29weShiKS5zdWIoZCk7dGhpcy5tYXguY29weShiKS5hZGQoZCk7cmV0dXJuIHRoaXN9fSgpLGNsb25lOmZ1bmN0aW9uKCl7cmV0dXJuKG5ldyB0aGlzLmNvbnN0cnVjdG9yKS5jb3B5KHRoaXMpfSxjb3B5OmZ1bmN0aW9uKGEpe3RoaXMubWluLmNvcHkoYS5taW4pO3RoaXMubWF4LmNvcHkoYS5tYXgpO1xucmV0dXJuIHRoaXN9LG1ha2VFbXB0eTpmdW5jdGlvbigpe3RoaXMubWluLng9dGhpcy5taW4ueT1JbmZpbml0eTt0aGlzLm1heC54PXRoaXMubWF4Lnk9LUluZmluaXR5O3JldHVybiB0aGlzfSxpc0VtcHR5OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMubWF4Lng8dGhpcy5taW4ueHx8dGhpcy5tYXgueTx0aGlzLm1pbi55fSxjZW50ZXI6ZnVuY3Rpb24oYSl7cmV0dXJuKGF8fG5ldyBUSFJFRS5WZWN0b3IyKS5hZGRWZWN0b3JzKHRoaXMubWluLHRoaXMubWF4KS5tdWx0aXBseVNjYWxhciguNSl9LHNpemU6ZnVuY3Rpb24oYSl7cmV0dXJuKGF8fG5ldyBUSFJFRS5WZWN0b3IyKS5zdWJWZWN0b3JzKHRoaXMubWF4LHRoaXMubWluKX0sZXhwYW5kQnlQb2ludDpmdW5jdGlvbihhKXt0aGlzLm1pbi5taW4oYSk7dGhpcy5tYXgubWF4KGEpO3JldHVybiB0aGlzfSxleHBhbmRCeVZlY3RvcjpmdW5jdGlvbihhKXt0aGlzLm1pbi5zdWIoYSk7dGhpcy5tYXguYWRkKGEpO3JldHVybiB0aGlzfSxleHBhbmRCeVNjYWxhcjpmdW5jdGlvbihhKXt0aGlzLm1pbi5hZGRTY2FsYXIoLWEpO1xudGhpcy5tYXguYWRkU2NhbGFyKGEpO3JldHVybiB0aGlzfSxjb250YWluc1BvaW50OmZ1bmN0aW9uKGEpe3JldHVybiBhLng8dGhpcy5taW4ueHx8YS54PnRoaXMubWF4Lnh8fGEueTx0aGlzLm1pbi55fHxhLnk+dGhpcy5tYXgueT8hMTohMH0sY29udGFpbnNCb3g6ZnVuY3Rpb24oYSl7cmV0dXJuIHRoaXMubWluLng8PWEubWluLngmJmEubWF4Lng8PXRoaXMubWF4LngmJnRoaXMubWluLnk8PWEubWluLnkmJmEubWF4Lnk8PXRoaXMubWF4Lnk/ITA6ITF9LGdldFBhcmFtZXRlcjpmdW5jdGlvbihhLGIpe3JldHVybihifHxuZXcgVEhSRUUuVmVjdG9yMikuc2V0KChhLngtdGhpcy5taW4ueCkvKHRoaXMubWF4LngtdGhpcy5taW4ueCksKGEueS10aGlzLm1pbi55KS8odGhpcy5tYXgueS10aGlzLm1pbi55KSl9LGludGVyc2VjdHNCb3g6ZnVuY3Rpb24oYSl7cmV0dXJuIGEubWF4Lng8dGhpcy5taW4ueHx8YS5taW4ueD50aGlzLm1heC54fHxhLm1heC55PHRoaXMubWluLnl8fGEubWluLnk+XG50aGlzLm1heC55PyExOiEwfSxjbGFtcFBvaW50OmZ1bmN0aW9uKGEsYil7cmV0dXJuKGJ8fG5ldyBUSFJFRS5WZWN0b3IyKS5jb3B5KGEpLmNsYW1wKHRoaXMubWluLHRoaXMubWF4KX0sZGlzdGFuY2VUb1BvaW50OmZ1bmN0aW9uKCl7dmFyIGE9bmV3IFRIUkVFLlZlY3RvcjI7cmV0dXJuIGZ1bmN0aW9uKGIpe3JldHVybiBhLmNvcHkoYikuY2xhbXAodGhpcy5taW4sdGhpcy5tYXgpLnN1YihiKS5sZW5ndGgoKX19KCksaW50ZXJzZWN0OmZ1bmN0aW9uKGEpe3RoaXMubWluLm1heChhLm1pbik7dGhpcy5tYXgubWluKGEubWF4KTtyZXR1cm4gdGhpc30sdW5pb246ZnVuY3Rpb24oYSl7dGhpcy5taW4ubWluKGEubWluKTt0aGlzLm1heC5tYXgoYS5tYXgpO3JldHVybiB0aGlzfSx0cmFuc2xhdGU6ZnVuY3Rpb24oYSl7dGhpcy5taW4uYWRkKGEpO3RoaXMubWF4LmFkZChhKTtyZXR1cm4gdGhpc30sZXF1YWxzOmZ1bmN0aW9uKGEpe3JldHVybiBhLm1pbi5lcXVhbHModGhpcy5taW4pJiZcbmEubWF4LmVxdWFscyh0aGlzLm1heCl9fTtUSFJFRS5Cb3gzPWZ1bmN0aW9uKGEsYil7dGhpcy5taW49dm9pZCAwIT09YT9hOm5ldyBUSFJFRS5WZWN0b3IzKEluZmluaXR5LEluZmluaXR5LEluZmluaXR5KTt0aGlzLm1heD12b2lkIDAhPT1iP2I6bmV3IFRIUkVFLlZlY3RvcjMoLUluZmluaXR5LC1JbmZpbml0eSwtSW5maW5pdHkpfTtcblRIUkVFLkJveDMucHJvdG90eXBlPXtjb25zdHJ1Y3RvcjpUSFJFRS5Cb3gzLHNldDpmdW5jdGlvbihhLGIpe3RoaXMubWluLmNvcHkoYSk7dGhpcy5tYXguY29weShiKTtyZXR1cm4gdGhpc30sc2V0RnJvbUFycmF5OmZ1bmN0aW9uKGEpe2Zvcih2YXIgYj1JbmZpbml0eSxjPUluZmluaXR5LGQ9SW5maW5pdHksZT0tSW5maW5pdHksZj0tSW5maW5pdHksZz0tSW5maW5pdHksaD0wLGs9YS5sZW5ndGg7aDxrO2grPTMpe3ZhciBsPWFbaF0sbT1hW2grMV0scD1hW2grMl07bDxiJiYoYj1sKTttPGMmJihjPW0pO3A8ZCYmKGQ9cCk7bD5lJiYoZT1sKTttPmYmJihmPW0pO3A+ZyYmKGc9cCl9dGhpcy5taW4uc2V0KGIsYyxkKTt0aGlzLm1heC5zZXQoZSxmLGcpfSxzZXRGcm9tUG9pbnRzOmZ1bmN0aW9uKGEpe3RoaXMubWFrZUVtcHR5KCk7Zm9yKHZhciBiPTAsYz1hLmxlbmd0aDtiPGM7YisrKXRoaXMuZXhwYW5kQnlQb2ludChhW2JdKTtyZXR1cm4gdGhpc30sc2V0RnJvbUNlbnRlckFuZFNpemU6ZnVuY3Rpb24oKXt2YXIgYT1cbm5ldyBUSFJFRS5WZWN0b3IzO3JldHVybiBmdW5jdGlvbihiLGMpe3ZhciBkPWEuY29weShjKS5tdWx0aXBseVNjYWxhciguNSk7dGhpcy5taW4uY29weShiKS5zdWIoZCk7dGhpcy5tYXguY29weShiKS5hZGQoZCk7cmV0dXJuIHRoaXN9fSgpLHNldEZyb21PYmplY3Q6ZnVuY3Rpb24oKXt2YXIgYT1uZXcgVEhSRUUuVmVjdG9yMztyZXR1cm4gZnVuY3Rpb24oYil7dmFyIGM9dGhpcztiLnVwZGF0ZU1hdHJpeFdvcmxkKCEwKTt0aGlzLm1ha2VFbXB0eSgpO2IudHJhdmVyc2UoZnVuY3Rpb24oYil7dmFyIGU9Yi5nZW9tZXRyeTtpZih2b2lkIDAhPT1lKWlmKGUgaW5zdGFuY2VvZiBUSFJFRS5HZW9tZXRyeSlmb3IodmFyIGU9ZS52ZXJ0aWNlcyxmPTAsZz1lLmxlbmd0aDtmPGc7ZisrKWEuY29weShlW2ZdKSxhLmFwcGx5TWF0cml4NChiLm1hdHJpeFdvcmxkKSxjLmV4cGFuZEJ5UG9pbnQoYSk7ZWxzZSBpZihlIGluc3RhbmNlb2YgVEhSRUUuQnVmZmVyR2VvbWV0cnkmJihnPWUuYXR0cmlidXRlcy5wb3NpdGlvbixcbnZvaWQgMCE9PWcpKXt2YXIgaDtnIGluc3RhbmNlb2YgVEhSRUUuSW50ZXJsZWF2ZWRCdWZmZXJBdHRyaWJ1dGU/KGU9Zy5kYXRhLmFycmF5LGY9Zy5vZmZzZXQsaD1nLmRhdGEuc3RyaWRlKTooZT1nLmFycmF5LGY9MCxoPTMpO2ZvcihnPWUubGVuZ3RoO2Y8ZztmKz1oKWEuZnJvbUFycmF5KGUsZiksYS5hcHBseU1hdHJpeDQoYi5tYXRyaXhXb3JsZCksYy5leHBhbmRCeVBvaW50KGEpfX0pO3JldHVybiB0aGlzfX0oKSxjbG9uZTpmdW5jdGlvbigpe3JldHVybihuZXcgdGhpcy5jb25zdHJ1Y3RvcikuY29weSh0aGlzKX0sY29weTpmdW5jdGlvbihhKXt0aGlzLm1pbi5jb3B5KGEubWluKTt0aGlzLm1heC5jb3B5KGEubWF4KTtyZXR1cm4gdGhpc30sbWFrZUVtcHR5OmZ1bmN0aW9uKCl7dGhpcy5taW4ueD10aGlzLm1pbi55PXRoaXMubWluLno9SW5maW5pdHk7dGhpcy5tYXgueD10aGlzLm1heC55PXRoaXMubWF4Lno9LUluZmluaXR5O3JldHVybiB0aGlzfSxpc0VtcHR5OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMubWF4Lng8XG50aGlzLm1pbi54fHx0aGlzLm1heC55PHRoaXMubWluLnl8fHRoaXMubWF4Lno8dGhpcy5taW4uen0sY2VudGVyOmZ1bmN0aW9uKGEpe3JldHVybihhfHxuZXcgVEhSRUUuVmVjdG9yMykuYWRkVmVjdG9ycyh0aGlzLm1pbix0aGlzLm1heCkubXVsdGlwbHlTY2FsYXIoLjUpfSxzaXplOmZ1bmN0aW9uKGEpe3JldHVybihhfHxuZXcgVEhSRUUuVmVjdG9yMykuc3ViVmVjdG9ycyh0aGlzLm1heCx0aGlzLm1pbil9LGV4cGFuZEJ5UG9pbnQ6ZnVuY3Rpb24oYSl7dGhpcy5taW4ubWluKGEpO3RoaXMubWF4Lm1heChhKTtyZXR1cm4gdGhpc30sZXhwYW5kQnlWZWN0b3I6ZnVuY3Rpb24oYSl7dGhpcy5taW4uc3ViKGEpO3RoaXMubWF4LmFkZChhKTtyZXR1cm4gdGhpc30sZXhwYW5kQnlTY2FsYXI6ZnVuY3Rpb24oYSl7dGhpcy5taW4uYWRkU2NhbGFyKC1hKTt0aGlzLm1heC5hZGRTY2FsYXIoYSk7cmV0dXJuIHRoaXN9LGNvbnRhaW5zUG9pbnQ6ZnVuY3Rpb24oYSl7cmV0dXJuIGEueDx0aGlzLm1pbi54fHxcbmEueD50aGlzLm1heC54fHxhLnk8dGhpcy5taW4ueXx8YS55PnRoaXMubWF4Lnl8fGEuejx0aGlzLm1pbi56fHxhLno+dGhpcy5tYXguej8hMTohMH0sY29udGFpbnNCb3g6ZnVuY3Rpb24oYSl7cmV0dXJuIHRoaXMubWluLng8PWEubWluLngmJmEubWF4Lng8PXRoaXMubWF4LngmJnRoaXMubWluLnk8PWEubWluLnkmJmEubWF4Lnk8PXRoaXMubWF4LnkmJnRoaXMubWluLno8PWEubWluLnomJmEubWF4Lno8PXRoaXMubWF4Lno/ITA6ITF9LGdldFBhcmFtZXRlcjpmdW5jdGlvbihhLGIpe3JldHVybihifHxuZXcgVEhSRUUuVmVjdG9yMykuc2V0KChhLngtdGhpcy5taW4ueCkvKHRoaXMubWF4LngtdGhpcy5taW4ueCksKGEueS10aGlzLm1pbi55KS8odGhpcy5tYXgueS10aGlzLm1pbi55KSwoYS56LXRoaXMubWluLnopLyh0aGlzLm1heC56LXRoaXMubWluLnopKX0saW50ZXJzZWN0c0JveDpmdW5jdGlvbihhKXtyZXR1cm4gYS5tYXgueDx0aGlzLm1pbi54fHxhLm1pbi54PnRoaXMubWF4Lnh8fFxuYS5tYXgueTx0aGlzLm1pbi55fHxhLm1pbi55PnRoaXMubWF4Lnl8fGEubWF4Lno8dGhpcy5taW4uenx8YS5taW4uej50aGlzLm1heC56PyExOiEwfSxpbnRlcnNlY3RzU3BoZXJlOmZ1bmN0aW9uKCl7dmFyIGE7cmV0dXJuIGZ1bmN0aW9uKGIpe3ZvaWQgMD09PWEmJihhPW5ldyBUSFJFRS5WZWN0b3IzKTt0aGlzLmNsYW1wUG9pbnQoYi5jZW50ZXIsYSk7cmV0dXJuIGEuZGlzdGFuY2VUb1NxdWFyZWQoYi5jZW50ZXIpPD1iLnJhZGl1cypiLnJhZGl1c319KCksaW50ZXJzZWN0c1BsYW5lOmZ1bmN0aW9uKGEpe3ZhciBiLGM7MDxhLm5vcm1hbC54PyhiPWEubm9ybWFsLngqdGhpcy5taW4ueCxjPWEubm9ybWFsLngqdGhpcy5tYXgueCk6KGI9YS5ub3JtYWwueCp0aGlzLm1heC54LGM9YS5ub3JtYWwueCp0aGlzLm1pbi54KTswPGEubm9ybWFsLnk/KGIrPWEubm9ybWFsLnkqdGhpcy5taW4ueSxjKz1hLm5vcm1hbC55KnRoaXMubWF4LnkpOihiKz1hLm5vcm1hbC55KnRoaXMubWF4LnksXG5jKz1hLm5vcm1hbC55KnRoaXMubWluLnkpOzA8YS5ub3JtYWwuej8oYis9YS5ub3JtYWwueip0aGlzLm1pbi56LGMrPWEubm9ybWFsLnoqdGhpcy5tYXgueik6KGIrPWEubm9ybWFsLnoqdGhpcy5tYXgueixjKz1hLm5vcm1hbC56KnRoaXMubWluLnopO3JldHVybiBiPD1hLmNvbnN0YW50JiZjPj1hLmNvbnN0YW50fSxjbGFtcFBvaW50OmZ1bmN0aW9uKGEsYil7cmV0dXJuKGJ8fG5ldyBUSFJFRS5WZWN0b3IzKS5jb3B5KGEpLmNsYW1wKHRoaXMubWluLHRoaXMubWF4KX0sZGlzdGFuY2VUb1BvaW50OmZ1bmN0aW9uKCl7dmFyIGE9bmV3IFRIUkVFLlZlY3RvcjM7cmV0dXJuIGZ1bmN0aW9uKGIpe3JldHVybiBhLmNvcHkoYikuY2xhbXAodGhpcy5taW4sdGhpcy5tYXgpLnN1YihiKS5sZW5ndGgoKX19KCksZ2V0Qm91bmRpbmdTcGhlcmU6ZnVuY3Rpb24oKXt2YXIgYT1uZXcgVEhSRUUuVmVjdG9yMztyZXR1cm4gZnVuY3Rpb24oYil7Yj1ifHxuZXcgVEhSRUUuU3BoZXJlO2IuY2VudGVyPVxudGhpcy5jZW50ZXIoKTtiLnJhZGl1cz0uNSp0aGlzLnNpemUoYSkubGVuZ3RoKCk7cmV0dXJuIGJ9fSgpLGludGVyc2VjdDpmdW5jdGlvbihhKXt0aGlzLm1pbi5tYXgoYS5taW4pO3RoaXMubWF4Lm1pbihhLm1heCk7dGhpcy5pc0VtcHR5KCkmJnRoaXMubWFrZUVtcHR5KCk7cmV0dXJuIHRoaXN9LHVuaW9uOmZ1bmN0aW9uKGEpe3RoaXMubWluLm1pbihhLm1pbik7dGhpcy5tYXgubWF4KGEubWF4KTtyZXR1cm4gdGhpc30sYXBwbHlNYXRyaXg0OmZ1bmN0aW9uKCl7dmFyIGE9W25ldyBUSFJFRS5WZWN0b3IzLG5ldyBUSFJFRS5WZWN0b3IzLG5ldyBUSFJFRS5WZWN0b3IzLG5ldyBUSFJFRS5WZWN0b3IzLG5ldyBUSFJFRS5WZWN0b3IzLG5ldyBUSFJFRS5WZWN0b3IzLG5ldyBUSFJFRS5WZWN0b3IzLG5ldyBUSFJFRS5WZWN0b3IzXTtyZXR1cm4gZnVuY3Rpb24oYil7aWYodGhpcy5pc0VtcHR5KCkpcmV0dXJuIHRoaXM7YVswXS5zZXQodGhpcy5taW4ueCx0aGlzLm1pbi55LHRoaXMubWluLnopLmFwcGx5TWF0cml4NChiKTtcbmFbMV0uc2V0KHRoaXMubWluLngsdGhpcy5taW4ueSx0aGlzLm1heC56KS5hcHBseU1hdHJpeDQoYik7YVsyXS5zZXQodGhpcy5taW4ueCx0aGlzLm1heC55LHRoaXMubWluLnopLmFwcGx5TWF0cml4NChiKTthWzNdLnNldCh0aGlzLm1pbi54LHRoaXMubWF4LnksdGhpcy5tYXgueikuYXBwbHlNYXRyaXg0KGIpO2FbNF0uc2V0KHRoaXMubWF4LngsdGhpcy5taW4ueSx0aGlzLm1pbi56KS5hcHBseU1hdHJpeDQoYik7YVs1XS5zZXQodGhpcy5tYXgueCx0aGlzLm1pbi55LHRoaXMubWF4LnopLmFwcGx5TWF0cml4NChiKTthWzZdLnNldCh0aGlzLm1heC54LHRoaXMubWF4LnksdGhpcy5taW4ueikuYXBwbHlNYXRyaXg0KGIpO2FbN10uc2V0KHRoaXMubWF4LngsdGhpcy5tYXgueSx0aGlzLm1heC56KS5hcHBseU1hdHJpeDQoYik7dGhpcy5zZXRGcm9tUG9pbnRzKGEpO3JldHVybiB0aGlzfX0oKSx0cmFuc2xhdGU6ZnVuY3Rpb24oYSl7dGhpcy5taW4uYWRkKGEpO3RoaXMubWF4LmFkZChhKTtcbnJldHVybiB0aGlzfSxlcXVhbHM6ZnVuY3Rpb24oYSl7cmV0dXJuIGEubWluLmVxdWFscyh0aGlzLm1pbikmJmEubWF4LmVxdWFscyh0aGlzLm1heCl9fTtUSFJFRS5NYXRyaXgzPWZ1bmN0aW9uKCl7dGhpcy5lbGVtZW50cz1uZXcgRmxvYXQzMkFycmF5KFsxLDAsMCwwLDEsMCwwLDAsMV0pOzA8YXJndW1lbnRzLmxlbmd0aCYmY29uc29sZS5lcnJvcihcIlRIUkVFLk1hdHJpeDM6IHRoZSBjb25zdHJ1Y3RvciBubyBsb25nZXIgcmVhZHMgYXJndW1lbnRzLiB1c2UgLnNldCgpIGluc3RlYWQuXCIpfTtcblRIUkVFLk1hdHJpeDMucHJvdG90eXBlPXtjb25zdHJ1Y3RvcjpUSFJFRS5NYXRyaXgzLHNldDpmdW5jdGlvbihhLGIsYyxkLGUsZixnLGgsayl7dmFyIGw9dGhpcy5lbGVtZW50cztsWzBdPWE7bFsxXT1kO2xbMl09ZztsWzNdPWI7bFs0XT1lO2xbNV09aDtsWzZdPWM7bFs3XT1mO2xbOF09aztyZXR1cm4gdGhpc30saWRlbnRpdHk6ZnVuY3Rpb24oKXt0aGlzLnNldCgxLDAsMCwwLDEsMCwwLDAsMSk7cmV0dXJuIHRoaXN9LGNsb25lOmZ1bmN0aW9uKCl7cmV0dXJuKG5ldyB0aGlzLmNvbnN0cnVjdG9yKS5mcm9tQXJyYXkodGhpcy5lbGVtZW50cyl9LGNvcHk6ZnVuY3Rpb24oYSl7YT1hLmVsZW1lbnRzO3RoaXMuc2V0KGFbMF0sYVszXSxhWzZdLGFbMV0sYVs0XSxhWzddLGFbMl0sYVs1XSxhWzhdKTtyZXR1cm4gdGhpc30sc2V0RnJvbU1hdHJpeDQ6ZnVuY3Rpb24oYSl7YT1hLmVsZW1lbnRzO3RoaXMuc2V0KGFbMF0sYVs0XSxhWzhdLGFbMV0sYVs1XSxhWzldLGFbMl0sYVs2XSxhWzEwXSk7XG5yZXR1cm4gdGhpc30sYXBwbHlUb1ZlY3RvcjNBcnJheTpmdW5jdGlvbigpe3ZhciBhO3JldHVybiBmdW5jdGlvbihiLGMsZCl7dm9pZCAwPT09YSYmKGE9bmV3IFRIUkVFLlZlY3RvcjMpO3ZvaWQgMD09PWMmJihjPTApO3ZvaWQgMD09PWQmJihkPWIubGVuZ3RoKTtmb3IodmFyIGU9MDtlPGQ7ZSs9MyxjKz0zKWEuZnJvbUFycmF5KGIsYyksYS5hcHBseU1hdHJpeDModGhpcyksYS50b0FycmF5KGIsYyk7cmV0dXJuIGJ9fSgpLGFwcGx5VG9CdWZmZXI6ZnVuY3Rpb24oKXt2YXIgYTtyZXR1cm4gZnVuY3Rpb24oYixjLGQpe3ZvaWQgMD09PWEmJihhPW5ldyBUSFJFRS5WZWN0b3IzKTt2b2lkIDA9PT1jJiYoYz0wKTt2b2lkIDA9PT1kJiYoZD1iLmxlbmd0aC9iLml0ZW1TaXplKTtmb3IodmFyIGU9MDtlPGQ7ZSsrLGMrKylhLng9Yi5nZXRYKGMpLGEueT1iLmdldFkoYyksYS56PWIuZ2V0WihjKSxhLmFwcGx5TWF0cml4Myh0aGlzKSxiLnNldFhZWihhLngsYS55LGEueik7cmV0dXJuIGJ9fSgpLFxubXVsdGlwbHlTY2FsYXI6ZnVuY3Rpb24oYSl7dmFyIGI9dGhpcy5lbGVtZW50cztiWzBdKj1hO2JbM10qPWE7Yls2XSo9YTtiWzFdKj1hO2JbNF0qPWE7Yls3XSo9YTtiWzJdKj1hO2JbNV0qPWE7Yls4XSo9YTtyZXR1cm4gdGhpc30sZGV0ZXJtaW5hbnQ6ZnVuY3Rpb24oKXt2YXIgYT10aGlzLmVsZW1lbnRzLGI9YVswXSxjPWFbMV0sZD1hWzJdLGU9YVszXSxmPWFbNF0sZz1hWzVdLGg9YVs2XSxrPWFbN10sYT1hWzhdO3JldHVybiBiKmYqYS1iKmcqay1jKmUqYStjKmcqaCtkKmUqay1kKmYqaH0sZ2V0SW52ZXJzZTpmdW5jdGlvbihhLGIpe2EgaW5zdGFuY2VvZiBUSFJFRS5NYXRyaXg0JiZjb25zb2xlLmVycm9yKFwiVEhSRUUuTWF0cml4My5nZXRJbnZlcnNlIG5vIGxvbmdlciB0YWtlcyBhIE1hdHJpeDQgYXJndW1lbnQuXCIpO3ZhciBjPWEuZWxlbWVudHMsZD10aGlzLmVsZW1lbnRzLGU9Y1swXSxmPWNbMV0sZz1jWzJdLGg9Y1szXSxrPWNbNF0sbD1jWzVdLG09Y1s2XSxwPWNbN10sXG5jPWNbOF0sbj1jKmstbCpwLHE9bCptLWMqaCxyPXAqaC1rKm0scz1lKm4rZipxK2cqcjtpZigwPT09cyl7aWYoYil0aHJvdyBFcnJvcihcIlRIUkVFLk1hdHJpeDMuZ2V0SW52ZXJzZSgpOiBjYW4ndCBpbnZlcnQgbWF0cml4LCBkZXRlcm1pbmFudCBpcyAwXCIpO2NvbnNvbGUud2FybihcIlRIUkVFLk1hdHJpeDMuZ2V0SW52ZXJzZSgpOiBjYW4ndCBpbnZlcnQgbWF0cml4LCBkZXRlcm1pbmFudCBpcyAwXCIpO3JldHVybiB0aGlzLmlkZW50aXR5KCl9cz0xL3M7ZFswXT1uKnM7ZFsxXT0oZypwLWMqZikqcztkWzJdPShsKmYtZyprKSpzO2RbM109cSpzO2RbNF09KGMqZS1nKm0pKnM7ZFs1XT0oZypoLWwqZSkqcztkWzZdPXIqcztkWzddPShmKm0tcCplKSpzO2RbOF09KGsqZS1mKmgpKnM7cmV0dXJuIHRoaXN9LHRyYW5zcG9zZTpmdW5jdGlvbigpe3ZhciBhLGI9dGhpcy5lbGVtZW50czthPWJbMV07YlsxXT1iWzNdO2JbM109YTthPWJbMl07YlsyXT1iWzZdO2JbNl09YTthPWJbNV07Yls1XT1cbmJbN107Yls3XT1hO3JldHVybiB0aGlzfSxmbGF0dGVuVG9BcnJheU9mZnNldDpmdW5jdGlvbihhLGIpe2NvbnNvbGUud2FybihcIlRIUkVFLk1hdHJpeDM6IC5mbGF0dGVuVG9BcnJheU9mZnNldCBpcyBkZXByZWNhdGVkIC0ganVzdCB1c2UgLnRvQXJyYXkgaW5zdGVhZC5cIik7cmV0dXJuIHRoaXMudG9BcnJheShhLGIpfSxnZXROb3JtYWxNYXRyaXg6ZnVuY3Rpb24oYSl7cmV0dXJuIHRoaXMuc2V0RnJvbU1hdHJpeDQoYSkuZ2V0SW52ZXJzZSh0aGlzKS50cmFuc3Bvc2UoKX0sdHJhbnNwb3NlSW50b0FycmF5OmZ1bmN0aW9uKGEpe3ZhciBiPXRoaXMuZWxlbWVudHM7YVswXT1iWzBdO2FbMV09YlszXTthWzJdPWJbNl07YVszXT1iWzFdO2FbNF09Yls0XTthWzVdPWJbN107YVs2XT1iWzJdO2FbN109Yls1XTthWzhdPWJbOF07cmV0dXJuIHRoaXN9LGZyb21BcnJheTpmdW5jdGlvbihhKXt0aGlzLmVsZW1lbnRzLnNldChhKTtyZXR1cm4gdGhpc30sdG9BcnJheTpmdW5jdGlvbihhLGIpe3ZvaWQgMD09PVxuYSYmKGE9W10pO3ZvaWQgMD09PWImJihiPTApO3ZhciBjPXRoaXMuZWxlbWVudHM7YVtiXT1jWzBdO2FbYisxXT1jWzFdO2FbYisyXT1jWzJdO2FbYiszXT1jWzNdO2FbYis0XT1jWzRdO2FbYis1XT1jWzVdO2FbYis2XT1jWzZdO2FbYis3XT1jWzddO2FbYis4XT1jWzhdO3JldHVybiBhfX07VEhSRUUuTWF0cml4ND1mdW5jdGlvbigpe3RoaXMuZWxlbWVudHM9bmV3IEZsb2F0MzJBcnJheShbMSwwLDAsMCwwLDEsMCwwLDAsMCwxLDAsMCwwLDAsMV0pOzA8YXJndW1lbnRzLmxlbmd0aCYmY29uc29sZS5lcnJvcihcIlRIUkVFLk1hdHJpeDQ6IHRoZSBjb25zdHJ1Y3RvciBubyBsb25nZXIgcmVhZHMgYXJndW1lbnRzLiB1c2UgLnNldCgpIGluc3RlYWQuXCIpfTtcblRIUkVFLk1hdHJpeDQucHJvdG90eXBlPXtjb25zdHJ1Y3RvcjpUSFJFRS5NYXRyaXg0LHNldDpmdW5jdGlvbihhLGIsYyxkLGUsZixnLGgsayxsLG0scCxuLHEscixzKXt2YXIgdj10aGlzLmVsZW1lbnRzO3ZbMF09YTt2WzRdPWI7dls4XT1jO3ZbMTJdPWQ7dlsxXT1lO3ZbNV09Zjt2WzldPWc7dlsxM109aDt2WzJdPWs7dls2XT1sO3ZbMTBdPW07dlsxNF09cDt2WzNdPW47dls3XT1xO3ZbMTFdPXI7dlsxNV09cztyZXR1cm4gdGhpc30saWRlbnRpdHk6ZnVuY3Rpb24oKXt0aGlzLnNldCgxLDAsMCwwLDAsMSwwLDAsMCwwLDEsMCwwLDAsMCwxKTtyZXR1cm4gdGhpc30sY2xvbmU6ZnVuY3Rpb24oKXtyZXR1cm4obmV3IFRIUkVFLk1hdHJpeDQpLmZyb21BcnJheSh0aGlzLmVsZW1lbnRzKX0sY29weTpmdW5jdGlvbihhKXt0aGlzLmVsZW1lbnRzLnNldChhLmVsZW1lbnRzKTtyZXR1cm4gdGhpc30sY29weVBvc2l0aW9uOmZ1bmN0aW9uKGEpe3ZhciBiPXRoaXMuZWxlbWVudHM7YT1hLmVsZW1lbnRzO1xuYlsxMl09YVsxMl07YlsxM109YVsxM107YlsxNF09YVsxNF07cmV0dXJuIHRoaXN9LGV4dHJhY3RCYXNpczpmdW5jdGlvbihhLGIsYyl7YS5zZXRGcm9tTWF0cml4Q29sdW1uKHRoaXMsMCk7Yi5zZXRGcm9tTWF0cml4Q29sdW1uKHRoaXMsMSk7Yy5zZXRGcm9tTWF0cml4Q29sdW1uKHRoaXMsMik7cmV0dXJuIHRoaXN9LG1ha2VCYXNpczpmdW5jdGlvbihhLGIsYyl7dGhpcy5zZXQoYS54LGIueCxjLngsMCxhLnksYi55LGMueSwwLGEueixiLnosYy56LDAsMCwwLDAsMSk7cmV0dXJuIHRoaXN9LGV4dHJhY3RSb3RhdGlvbjpmdW5jdGlvbigpe3ZhciBhO3JldHVybiBmdW5jdGlvbihiKXt2b2lkIDA9PT1hJiYoYT1uZXcgVEhSRUUuVmVjdG9yMyk7dmFyIGM9dGhpcy5lbGVtZW50cyxkPWIuZWxlbWVudHMsZT0xL2Euc2V0RnJvbU1hdHJpeENvbHVtbihiLDApLmxlbmd0aCgpLGY9MS9hLnNldEZyb21NYXRyaXhDb2x1bW4oYiwxKS5sZW5ndGgoKTtiPTEvYS5zZXRGcm9tTWF0cml4Q29sdW1uKGIsXG4yKS5sZW5ndGgoKTtjWzBdPWRbMF0qZTtjWzFdPWRbMV0qZTtjWzJdPWRbMl0qZTtjWzRdPWRbNF0qZjtjWzVdPWRbNV0qZjtjWzZdPWRbNl0qZjtjWzhdPWRbOF0qYjtjWzldPWRbOV0qYjtjWzEwXT1kWzEwXSpiO3JldHVybiB0aGlzfX0oKSxtYWtlUm90YXRpb25Gcm9tRXVsZXI6ZnVuY3Rpb24oYSl7ITE9PT1hIGluc3RhbmNlb2YgVEhSRUUuRXVsZXImJmNvbnNvbGUuZXJyb3IoXCJUSFJFRS5NYXRyaXg6IC5tYWtlUm90YXRpb25Gcm9tRXVsZXIoKSBub3cgZXhwZWN0cyBhIEV1bGVyIHJvdGF0aW9uIHJhdGhlciB0aGFuIGEgVmVjdG9yMyBhbmQgb3JkZXIuXCIpO3ZhciBiPXRoaXMuZWxlbWVudHMsYz1hLngsZD1hLnksZT1hLnosZj1NYXRoLmNvcyhjKSxjPU1hdGguc2luKGMpLGc9TWF0aC5jb3MoZCksZD1NYXRoLnNpbihkKSxoPU1hdGguY29zKGUpLGU9TWF0aC5zaW4oZSk7aWYoXCJYWVpcIj09PWEub3JkZXIpe2E9ZipoO3ZhciBrPWYqZSxsPWMqaCxtPWMqZTtiWzBdPWcqaDtiWzRdPVxuLWcqZTtiWzhdPWQ7YlsxXT1rK2wqZDtiWzVdPWEtbSpkO2JbOV09LWMqZztiWzJdPW0tYSpkO2JbNl09bCtrKmQ7YlsxMF09ZipnfWVsc2VcIllYWlwiPT09YS5vcmRlcj8oYT1nKmgsaz1nKmUsbD1kKmgsbT1kKmUsYlswXT1hK20qYyxiWzRdPWwqYy1rLGJbOF09ZipkLGJbMV09ZiplLGJbNV09ZipoLGJbOV09LWMsYlsyXT1rKmMtbCxiWzZdPW0rYSpjLGJbMTBdPWYqZyk6XCJaWFlcIj09PWEub3JkZXI/KGE9ZypoLGs9ZyplLGw9ZCpoLG09ZCplLGJbMF09YS1tKmMsYls0XT0tZiplLGJbOF09bCtrKmMsYlsxXT1rK2wqYyxiWzVdPWYqaCxiWzldPW0tYSpjLGJbMl09LWYqZCxiWzZdPWMsYlsxMF09ZipnKTpcIlpZWFwiPT09YS5vcmRlcj8oYT1mKmgsaz1mKmUsbD1jKmgsbT1jKmUsYlswXT1nKmgsYls0XT1sKmQtayxiWzhdPWEqZCttLGJbMV09ZyplLGJbNV09bSpkK2EsYls5XT1rKmQtbCxiWzJdPS1kLGJbNl09YypnLGJbMTBdPWYqZyk6XCJZWlhcIj09PWEub3JkZXI/KGE9ZipnLGs9ZipcbmQsbD1jKmcsbT1jKmQsYlswXT1nKmgsYls0XT1tLWEqZSxiWzhdPWwqZStrLGJbMV09ZSxiWzVdPWYqaCxiWzldPS1jKmgsYlsyXT0tZCpoLGJbNl09ayplK2wsYlsxMF09YS1tKmUpOlwiWFpZXCI9PT1hLm9yZGVyJiYoYT1mKmcsaz1mKmQsbD1jKmcsbT1jKmQsYlswXT1nKmgsYls0XT0tZSxiWzhdPWQqaCxiWzFdPWEqZSttLGJbNV09ZipoLGJbOV09ayplLWwsYlsyXT1sKmUtayxiWzZdPWMqaCxiWzEwXT1tKmUrYSk7YlszXT0wO2JbN109MDtiWzExXT0wO2JbMTJdPTA7YlsxM109MDtiWzE0XT0wO2JbMTVdPTE7cmV0dXJuIHRoaXN9LG1ha2VSb3RhdGlvbkZyb21RdWF0ZXJuaW9uOmZ1bmN0aW9uKGEpe3ZhciBiPXRoaXMuZWxlbWVudHMsYz1hLngsZD1hLnksZT1hLnosZj1hLncsZz1jK2MsaD1kK2Qsaz1lK2U7YT1jKmc7dmFyIGw9YypoLGM9YyprLG09ZCpoLGQ9ZCprLGU9ZSprLGc9ZipnLGg9ZipoLGY9ZiprO2JbMF09MS0obStlKTtiWzRdPWwtZjtiWzhdPWMraDtiWzFdPWwrXG5mO2JbNV09MS0oYStlKTtiWzldPWQtZztiWzJdPWMtaDtiWzZdPWQrZztiWzEwXT0xLShhK20pO2JbM109MDtiWzddPTA7YlsxMV09MDtiWzEyXT0wO2JbMTNdPTA7YlsxNF09MDtiWzE1XT0xO3JldHVybiB0aGlzfSxsb29rQXQ6ZnVuY3Rpb24oKXt2YXIgYSxiLGM7cmV0dXJuIGZ1bmN0aW9uKGQsZSxmKXt2b2lkIDA9PT1hJiYoYT1uZXcgVEhSRUUuVmVjdG9yMyxiPW5ldyBUSFJFRS5WZWN0b3IzLGM9bmV3IFRIUkVFLlZlY3RvcjMpO3ZhciBnPXRoaXMuZWxlbWVudHM7Yy5zdWJWZWN0b3JzKGQsZSkubm9ybWFsaXplKCk7MD09PWMubGVuZ3RoU3EoKSYmKGMuej0xKTthLmNyb3NzVmVjdG9ycyhmLGMpLm5vcm1hbGl6ZSgpOzA9PT1hLmxlbmd0aFNxKCkmJihjLnorPTFFLTQsYS5jcm9zc1ZlY3RvcnMoZixjKS5ub3JtYWxpemUoKSk7Yi5jcm9zc1ZlY3RvcnMoYyxhKTtnWzBdPWEueDtnWzRdPWIueDtnWzhdPWMueDtnWzFdPWEueTtnWzVdPWIueTtnWzldPWMueTtnWzJdPWEuejtcbmdbNl09Yi56O2dbMTBdPWMuejtyZXR1cm4gdGhpc319KCksbXVsdGlwbHk6ZnVuY3Rpb24oYSxiKXtyZXR1cm4gdm9pZCAwIT09Yj8oY29uc29sZS53YXJuKFwiVEhSRUUuTWF0cml4NDogLm11bHRpcGx5KCkgbm93IG9ubHkgYWNjZXB0cyBvbmUgYXJndW1lbnQuIFVzZSAubXVsdGlwbHlNYXRyaWNlcyggYSwgYiApIGluc3RlYWQuXCIpLHRoaXMubXVsdGlwbHlNYXRyaWNlcyhhLGIpKTp0aGlzLm11bHRpcGx5TWF0cmljZXModGhpcyxhKX0scHJlbXVsdGlwbHk6ZnVuY3Rpb24oYSl7cmV0dXJuIHRoaXMubXVsdGlwbHlNYXRyaWNlcyhhLHRoaXMpfSxtdWx0aXBseU1hdHJpY2VzOmZ1bmN0aW9uKGEsYil7dmFyIGM9YS5lbGVtZW50cyxkPWIuZWxlbWVudHMsZT10aGlzLmVsZW1lbnRzLGY9Y1swXSxnPWNbNF0saD1jWzhdLGs9Y1sxMl0sbD1jWzFdLG09Y1s1XSxwPWNbOV0sbj1jWzEzXSxxPWNbMl0scj1jWzZdLHM9Y1sxMF0sdj1jWzE0XSx0PWNbM10sdT1jWzddLEQ9Y1sxMV0sYz1jWzE1XSxcbnc9ZFswXSxJPWRbNF0sej1kWzhdLHk9ZFsxMl0sQT1kWzFdLEc9ZFs1XSxCPWRbOV0sRj1kWzEzXSxKPWRbMl0sUD1kWzZdLEs9ZFsxMF0sSD1kWzE0XSxNPWRbM10sTz1kWzddLE49ZFsxMV0sZD1kWzE1XTtlWzBdPWYqdytnKkEraCpKK2sqTTtlWzRdPWYqSStnKkcraCpQK2sqTztlWzhdPWYqeitnKkIraCpLK2sqTjtlWzEyXT1mKnkrZypGK2gqSCtrKmQ7ZVsxXT1sKncrbSpBK3AqSituKk07ZVs1XT1sKkkrbSpHK3AqUCtuKk87ZVs5XT1sKnorbSpCK3AqSytuKk47ZVsxM109bCp5K20qRitwKkgrbipkO2VbMl09cSp3K3IqQStzKkordipNO2VbNl09cSpJK3IqRytzKlArdipPO2VbMTBdPXEqeityKkIrcypLK3YqTjtlWzE0XT1xKnkrcipGK3MqSCt2KmQ7ZVszXT10KncrdSpBK0QqSitjKk07ZVs3XT10KkkrdSpHK0QqUCtjKk87ZVsxMV09dCp6K3UqQitEKksrYypOO2VbMTVdPXQqeSt1KkYrRCpIK2MqZDtyZXR1cm4gdGhpc30sbXVsdGlwbHlUb0FycmF5OmZ1bmN0aW9uKGEsYixcbmMpe3ZhciBkPXRoaXMuZWxlbWVudHM7dGhpcy5tdWx0aXBseU1hdHJpY2VzKGEsYik7Y1swXT1kWzBdO2NbMV09ZFsxXTtjWzJdPWRbMl07Y1szXT1kWzNdO2NbNF09ZFs0XTtjWzVdPWRbNV07Y1s2XT1kWzZdO2NbN109ZFs3XTtjWzhdPWRbOF07Y1s5XT1kWzldO2NbMTBdPWRbMTBdO2NbMTFdPWRbMTFdO2NbMTJdPWRbMTJdO2NbMTNdPWRbMTNdO2NbMTRdPWRbMTRdO2NbMTVdPWRbMTVdO3JldHVybiB0aGlzfSxtdWx0aXBseVNjYWxhcjpmdW5jdGlvbihhKXt2YXIgYj10aGlzLmVsZW1lbnRzO2JbMF0qPWE7Yls0XSo9YTtiWzhdKj1hO2JbMTJdKj1hO2JbMV0qPWE7Yls1XSo9YTtiWzldKj1hO2JbMTNdKj1hO2JbMl0qPWE7Yls2XSo9YTtiWzEwXSo9YTtiWzE0XSo9YTtiWzNdKj1hO2JbN10qPWE7YlsxMV0qPWE7YlsxNV0qPWE7cmV0dXJuIHRoaXN9LGFwcGx5VG9WZWN0b3IzQXJyYXk6ZnVuY3Rpb24oKXt2YXIgYTtyZXR1cm4gZnVuY3Rpb24oYixjLGQpe3ZvaWQgMD09PWEmJlxuKGE9bmV3IFRIUkVFLlZlY3RvcjMpO3ZvaWQgMD09PWMmJihjPTApO3ZvaWQgMD09PWQmJihkPWIubGVuZ3RoKTtmb3IodmFyIGU9MDtlPGQ7ZSs9MyxjKz0zKWEuZnJvbUFycmF5KGIsYyksYS5hcHBseU1hdHJpeDQodGhpcyksYS50b0FycmF5KGIsYyk7cmV0dXJuIGJ9fSgpLGFwcGx5VG9CdWZmZXI6ZnVuY3Rpb24oKXt2YXIgYTtyZXR1cm4gZnVuY3Rpb24oYixjLGQpe3ZvaWQgMD09PWEmJihhPW5ldyBUSFJFRS5WZWN0b3IzKTt2b2lkIDA9PT1jJiYoYz0wKTt2b2lkIDA9PT1kJiYoZD1iLmxlbmd0aC9iLml0ZW1TaXplKTtmb3IodmFyIGU9MDtlPGQ7ZSsrLGMrKylhLng9Yi5nZXRYKGMpLGEueT1iLmdldFkoYyksYS56PWIuZ2V0WihjKSxhLmFwcGx5TWF0cml4NCh0aGlzKSxiLnNldFhZWihhLngsYS55LGEueik7cmV0dXJuIGJ9fSgpLGRldGVybWluYW50OmZ1bmN0aW9uKCl7dmFyIGE9dGhpcy5lbGVtZW50cyxiPWFbMF0sYz1hWzRdLGQ9YVs4XSxlPWFbMTJdLGY9YVsxXSxnPVxuYVs1XSxoPWFbOV0saz1hWzEzXSxsPWFbMl0sbT1hWzZdLHA9YVsxMF0sbj1hWzE0XTtyZXR1cm4gYVszXSooK2UqaCptLWQqayptLWUqZypwK2MqaypwK2QqZypuLWMqaCpuKSthWzddKigrYipoKm4tYiprKnArZSpmKnAtZCpmKm4rZCprKmwtZSpoKmwpK2FbMTFdKigrYiprKm0tYipnKm4tZSpmKm0rYypmKm4rZSpnKmwtYyprKmwpK2FbMTVdKigtZCpnKmwtYipoKm0rYipnKnArZCpmKm0tYypmKnArYypoKmwpfSx0cmFuc3Bvc2U6ZnVuY3Rpb24oKXt2YXIgYT10aGlzLmVsZW1lbnRzLGI7Yj1hWzFdO2FbMV09YVs0XTthWzRdPWI7Yj1hWzJdO2FbMl09YVs4XTthWzhdPWI7Yj1hWzZdO2FbNl09YVs5XTthWzldPWI7Yj1hWzNdO2FbM109YVsxMl07YVsxMl09YjtiPWFbN107YVs3XT1hWzEzXTthWzEzXT1iO2I9YVsxMV07YVsxMV09YVsxNF07YVsxNF09YjtyZXR1cm4gdGhpc30sZmxhdHRlblRvQXJyYXlPZmZzZXQ6ZnVuY3Rpb24oYSxiKXtjb25zb2xlLndhcm4oXCJUSFJFRS5NYXRyaXgzOiAuZmxhdHRlblRvQXJyYXlPZmZzZXQgaXMgZGVwcmVjYXRlZCAtIGp1c3QgdXNlIC50b0FycmF5IGluc3RlYWQuXCIpO1xucmV0dXJuIHRoaXMudG9BcnJheShhLGIpfSxnZXRQb3NpdGlvbjpmdW5jdGlvbigpe3ZhciBhO3JldHVybiBmdW5jdGlvbigpe3ZvaWQgMD09PWEmJihhPW5ldyBUSFJFRS5WZWN0b3IzKTtjb25zb2xlLndhcm4oXCJUSFJFRS5NYXRyaXg0OiAuZ2V0UG9zaXRpb24oKSBoYXMgYmVlbiByZW1vdmVkLiBVc2UgVmVjdG9yMy5zZXRGcm9tTWF0cml4UG9zaXRpb24oIG1hdHJpeCApIGluc3RlYWQuXCIpO3JldHVybiBhLnNldEZyb21NYXRyaXhDb2x1bW4odGhpcywzKX19KCksc2V0UG9zaXRpb246ZnVuY3Rpb24oYSl7dmFyIGI9dGhpcy5lbGVtZW50cztiWzEyXT1hLng7YlsxM109YS55O2JbMTRdPWEuejtyZXR1cm4gdGhpc30sZ2V0SW52ZXJzZTpmdW5jdGlvbihhLGIpe3ZhciBjPXRoaXMuZWxlbWVudHMsZD1hLmVsZW1lbnRzLGU9ZFswXSxmPWRbMV0sZz1kWzJdLGg9ZFszXSxrPWRbNF0sbD1kWzVdLG09ZFs2XSxwPWRbN10sbj1kWzhdLHE9ZFs5XSxyPWRbMTBdLHM9ZFsxMV0sdj1kWzEyXSxcbnQ9ZFsxM10sdT1kWzE0XSxkPWRbMTVdLEQ9cSp1KnAtdCpyKnArdCptKnMtbCp1KnMtcSptKmQrbCpyKmQsdz12KnIqcC1uKnUqcC12Km0qcytrKnUqcytuKm0qZC1rKnIqZCxJPW4qdCpwLXYqcSpwK3YqbCpzLWsqdCpzLW4qbCpkK2sqcSpkLHo9dipxKm0tbip0Km0tdipsKnIrayp0KnIrbipsKnUtaypxKnUseT1lKkQrZip3K2cqSStoKno7aWYoMD09PXkpe2lmKGIpdGhyb3cgRXJyb3IoXCJUSFJFRS5NYXRyaXg0LmdldEludmVyc2UoKTogY2FuJ3QgaW52ZXJ0IG1hdHJpeCwgZGV0ZXJtaW5hbnQgaXMgMFwiKTtjb25zb2xlLndhcm4oXCJUSFJFRS5NYXRyaXg0LmdldEludmVyc2UoKTogY2FuJ3QgaW52ZXJ0IG1hdHJpeCwgZGV0ZXJtaW5hbnQgaXMgMFwiKTtyZXR1cm4gdGhpcy5pZGVudGl0eSgpfXk9MS95O2NbMF09RCp5O2NbMV09KHQqcipoLXEqdSpoLXQqZypzK2YqdSpzK3EqZypkLWYqcipkKSp5O2NbMl09KGwqdSpoLXQqbSpoK3QqZypwLWYqdSpwLWwqZypkK2YqbSpkKSp5O2NbM109XG4ocSptKmgtbCpyKmgtcSpnKnArZipyKnArbCpnKnMtZiptKnMpKnk7Y1s0XT13Knk7Y1s1XT0obip1KmgtdipyKmgrdipnKnMtZSp1KnMtbipnKmQrZSpyKmQpKnk7Y1s2XT0odiptKmgtayp1KmgtdipnKnArZSp1KnAraypnKmQtZSptKmQpKnk7Y1s3XT0oaypyKmgtbiptKmgrbipnKnAtZSpyKnAtaypnKnMrZSptKnMpKnk7Y1s4XT1JKnk7Y1s5XT0odipxKmgtbip0KmgtdipmKnMrZSp0KnMrbipmKmQtZSpxKmQpKnk7Y1sxMF09KGsqdCpoLXYqbCpoK3YqZipwLWUqdCpwLWsqZipkK2UqbCpkKSp5O2NbMTFdPShuKmwqaC1rKnEqaC1uKmYqcCtlKnEqcCtrKmYqcy1lKmwqcykqeTtjWzEyXT16Knk7Y1sxM109KG4qdCpnLXYqcSpnK3YqZipyLWUqdCpyLW4qZip1K2UqcSp1KSp5O2NbMTRdPSh2KmwqZy1rKnQqZy12KmYqbStlKnQqbStrKmYqdS1lKmwqdSkqeTtjWzE1XT0oaypxKmctbipsKmcrbipmKm0tZSpxKm0taypmKnIrZSpsKnIpKnk7cmV0dXJuIHRoaXN9LHNjYWxlOmZ1bmN0aW9uKGEpe3ZhciBiPVxudGhpcy5lbGVtZW50cyxjPWEueCxkPWEueTthPWEuejtiWzBdKj1jO2JbNF0qPWQ7Yls4XSo9YTtiWzFdKj1jO2JbNV0qPWQ7Yls5XSo9YTtiWzJdKj1jO2JbNl0qPWQ7YlsxMF0qPWE7YlszXSo9YztiWzddKj1kO2JbMTFdKj1hO3JldHVybiB0aGlzfSxnZXRNYXhTY2FsZU9uQXhpczpmdW5jdGlvbigpe3ZhciBhPXRoaXMuZWxlbWVudHM7cmV0dXJuIE1hdGguc3FydChNYXRoLm1heChhWzBdKmFbMF0rYVsxXSphWzFdK2FbMl0qYVsyXSxhWzRdKmFbNF0rYVs1XSphWzVdK2FbNl0qYVs2XSxhWzhdKmFbOF0rYVs5XSphWzldK2FbMTBdKmFbMTBdKSl9LG1ha2VUcmFuc2xhdGlvbjpmdW5jdGlvbihhLGIsYyl7dGhpcy5zZXQoMSwwLDAsYSwwLDEsMCxiLDAsMCwxLGMsMCwwLDAsMSk7cmV0dXJuIHRoaXN9LG1ha2VSb3RhdGlvblg6ZnVuY3Rpb24oYSl7dmFyIGI9TWF0aC5jb3MoYSk7YT1NYXRoLnNpbihhKTt0aGlzLnNldCgxLDAsMCwwLDAsYiwtYSwwLDAsYSxiLDAsMCwwLDAsMSk7XG5yZXR1cm4gdGhpc30sbWFrZVJvdGF0aW9uWTpmdW5jdGlvbihhKXt2YXIgYj1NYXRoLmNvcyhhKTthPU1hdGguc2luKGEpO3RoaXMuc2V0KGIsMCxhLDAsMCwxLDAsMCwtYSwwLGIsMCwwLDAsMCwxKTtyZXR1cm4gdGhpc30sbWFrZVJvdGF0aW9uWjpmdW5jdGlvbihhKXt2YXIgYj1NYXRoLmNvcyhhKTthPU1hdGguc2luKGEpO3RoaXMuc2V0KGIsLWEsMCwwLGEsYiwwLDAsMCwwLDEsMCwwLDAsMCwxKTtyZXR1cm4gdGhpc30sbWFrZVJvdGF0aW9uQXhpczpmdW5jdGlvbihhLGIpe3ZhciBjPU1hdGguY29zKGIpLGQ9TWF0aC5zaW4oYiksZT0xLWMsZj1hLngsZz1hLnksaD1hLnosaz1lKmYsbD1lKmc7dGhpcy5zZXQoaypmK2MsaypnLWQqaCxrKmgrZCpnLDAsaypnK2QqaCxsKmcrYyxsKmgtZCpmLDAsaypoLWQqZyxsKmgrZCpmLGUqaCpoK2MsMCwwLDAsMCwxKTtyZXR1cm4gdGhpc30sbWFrZVNjYWxlOmZ1bmN0aW9uKGEsYixjKXt0aGlzLnNldChhLDAsMCwwLDAsYiwwLDAsMCwwLGMsXG4wLDAsMCwwLDEpO3JldHVybiB0aGlzfSxjb21wb3NlOmZ1bmN0aW9uKGEsYixjKXt0aGlzLm1ha2VSb3RhdGlvbkZyb21RdWF0ZXJuaW9uKGIpO3RoaXMuc2NhbGUoYyk7dGhpcy5zZXRQb3NpdGlvbihhKTtyZXR1cm4gdGhpc30sZGVjb21wb3NlOmZ1bmN0aW9uKCl7dmFyIGEsYjtyZXR1cm4gZnVuY3Rpb24oYyxkLGUpe3ZvaWQgMD09PWEmJihhPW5ldyBUSFJFRS5WZWN0b3IzLGI9bmV3IFRIUkVFLk1hdHJpeDQpO3ZhciBmPXRoaXMuZWxlbWVudHMsZz1hLnNldChmWzBdLGZbMV0sZlsyXSkubGVuZ3RoKCksaD1hLnNldChmWzRdLGZbNV0sZls2XSkubGVuZ3RoKCksaz1hLnNldChmWzhdLGZbOV0sZlsxMF0pLmxlbmd0aCgpOzA+dGhpcy5kZXRlcm1pbmFudCgpJiYoZz0tZyk7Yy54PWZbMTJdO2MueT1mWzEzXTtjLno9ZlsxNF07Yi5lbGVtZW50cy5zZXQodGhpcy5lbGVtZW50cyk7Yz0xL2c7dmFyIGY9MS9oLGw9MS9rO2IuZWxlbWVudHNbMF0qPWM7Yi5lbGVtZW50c1sxXSo9YztcbmIuZWxlbWVudHNbMl0qPWM7Yi5lbGVtZW50c1s0XSo9ZjtiLmVsZW1lbnRzWzVdKj1mO2IuZWxlbWVudHNbNl0qPWY7Yi5lbGVtZW50c1s4XSo9bDtiLmVsZW1lbnRzWzldKj1sO2IuZWxlbWVudHNbMTBdKj1sO2Quc2V0RnJvbVJvdGF0aW9uTWF0cml4KGIpO2UueD1nO2UueT1oO2Uuej1rO3JldHVybiB0aGlzfX0oKSxtYWtlRnJ1c3R1bTpmdW5jdGlvbihhLGIsYyxkLGUsZil7dmFyIGc9dGhpcy5lbGVtZW50cztnWzBdPTIqZS8oYi1hKTtnWzRdPTA7Z1s4XT0oYithKS8oYi1hKTtnWzEyXT0wO2dbMV09MDtnWzVdPTIqZS8oZC1jKTtnWzldPShkK2MpLyhkLWMpO2dbMTNdPTA7Z1syXT0wO2dbNl09MDtnWzEwXT0tKGYrZSkvKGYtZSk7Z1sxNF09LTIqZiplLyhmLWUpO2dbM109MDtnWzddPTA7Z1sxMV09LTE7Z1sxNV09MDtyZXR1cm4gdGhpc30sbWFrZVBlcnNwZWN0aXZlOmZ1bmN0aW9uKGEsYixjLGQpe2E9YypNYXRoLnRhbihUSFJFRS5NYXRoLkRFRzJSQUQqYSouNSk7dmFyIGU9XG4tYTtyZXR1cm4gdGhpcy5tYWtlRnJ1c3R1bShlKmIsYSpiLGUsYSxjLGQpfSxtYWtlT3J0aG9ncmFwaGljOmZ1bmN0aW9uKGEsYixjLGQsZSxmKXt2YXIgZz10aGlzLmVsZW1lbnRzLGg9MS8oYi1hKSxrPTEvKGMtZCksbD0xLyhmLWUpO2dbMF09MipoO2dbNF09MDtnWzhdPTA7Z1sxMl09LSgoYithKSpoKTtnWzFdPTA7Z1s1XT0yKms7Z1s5XT0wO2dbMTNdPS0oKGMrZCkqayk7Z1syXT0wO2dbNl09MDtnWzEwXT0tMipsO2dbMTRdPS0oKGYrZSkqbCk7Z1szXT0wO2dbN109MDtnWzExXT0wO2dbMTVdPTE7cmV0dXJuIHRoaXN9LGVxdWFsczpmdW5jdGlvbihhKXt2YXIgYj10aGlzLmVsZW1lbnRzO2E9YS5lbGVtZW50cztmb3IodmFyIGM9MDsxNj5jO2MrKylpZihiW2NdIT09YVtjXSlyZXR1cm4hMTtyZXR1cm4hMH0sZnJvbUFycmF5OmZ1bmN0aW9uKGEpe3RoaXMuZWxlbWVudHMuc2V0KGEpO3JldHVybiB0aGlzfSx0b0FycmF5OmZ1bmN0aW9uKGEsYil7dm9pZCAwPT09YSYmKGE9W10pO1xudm9pZCAwPT09YiYmKGI9MCk7dmFyIGM9dGhpcy5lbGVtZW50czthW2JdPWNbMF07YVtiKzFdPWNbMV07YVtiKzJdPWNbMl07YVtiKzNdPWNbM107YVtiKzRdPWNbNF07YVtiKzVdPWNbNV07YVtiKzZdPWNbNl07YVtiKzddPWNbN107YVtiKzhdPWNbOF07YVtiKzldPWNbOV07YVtiKzEwXT1jWzEwXTthW2IrMTFdPWNbMTFdO2FbYisxMl09Y1sxMl07YVtiKzEzXT1jWzEzXTthW2IrMTRdPWNbMTRdO2FbYisxNV09Y1sxNV07cmV0dXJuIGF9fTtUSFJFRS5SYXk9ZnVuY3Rpb24oYSxiKXt0aGlzLm9yaWdpbj12b2lkIDAhPT1hP2E6bmV3IFRIUkVFLlZlY3RvcjM7dGhpcy5kaXJlY3Rpb249dm9pZCAwIT09Yj9iOm5ldyBUSFJFRS5WZWN0b3IzfTtcblRIUkVFLlJheS5wcm90b3R5cGU9e2NvbnN0cnVjdG9yOlRIUkVFLlJheSxzZXQ6ZnVuY3Rpb24oYSxiKXt0aGlzLm9yaWdpbi5jb3B5KGEpO3RoaXMuZGlyZWN0aW9uLmNvcHkoYik7cmV0dXJuIHRoaXN9LGNsb25lOmZ1bmN0aW9uKCl7cmV0dXJuKG5ldyB0aGlzLmNvbnN0cnVjdG9yKS5jb3B5KHRoaXMpfSxjb3B5OmZ1bmN0aW9uKGEpe3RoaXMub3JpZ2luLmNvcHkoYS5vcmlnaW4pO3RoaXMuZGlyZWN0aW9uLmNvcHkoYS5kaXJlY3Rpb24pO3JldHVybiB0aGlzfSxhdDpmdW5jdGlvbihhLGIpe3JldHVybihifHxuZXcgVEhSRUUuVmVjdG9yMykuY29weSh0aGlzLmRpcmVjdGlvbikubXVsdGlwbHlTY2FsYXIoYSkuYWRkKHRoaXMub3JpZ2luKX0sbG9va0F0OmZ1bmN0aW9uKGEpe3RoaXMuZGlyZWN0aW9uLmNvcHkoYSkuc3ViKHRoaXMub3JpZ2luKS5ub3JtYWxpemUoKTtyZXR1cm4gdGhpc30scmVjYXN0OmZ1bmN0aW9uKCl7dmFyIGE9bmV3IFRIUkVFLlZlY3RvcjM7cmV0dXJuIGZ1bmN0aW9uKGIpe3RoaXMub3JpZ2luLmNvcHkodGhpcy5hdChiLFxuYSkpO3JldHVybiB0aGlzfX0oKSxjbG9zZXN0UG9pbnRUb1BvaW50OmZ1bmN0aW9uKGEsYil7dmFyIGM9Ynx8bmV3IFRIUkVFLlZlY3RvcjM7Yy5zdWJWZWN0b3JzKGEsdGhpcy5vcmlnaW4pO3ZhciBkPWMuZG90KHRoaXMuZGlyZWN0aW9uKTtyZXR1cm4gMD5kP2MuY29weSh0aGlzLm9yaWdpbik6Yy5jb3B5KHRoaXMuZGlyZWN0aW9uKS5tdWx0aXBseVNjYWxhcihkKS5hZGQodGhpcy5vcmlnaW4pfSxkaXN0YW5jZVRvUG9pbnQ6ZnVuY3Rpb24oYSl7cmV0dXJuIE1hdGguc3FydCh0aGlzLmRpc3RhbmNlU3FUb1BvaW50KGEpKX0sZGlzdGFuY2VTcVRvUG9pbnQ6ZnVuY3Rpb24oKXt2YXIgYT1uZXcgVEhSRUUuVmVjdG9yMztyZXR1cm4gZnVuY3Rpb24oYil7dmFyIGM9YS5zdWJWZWN0b3JzKGIsdGhpcy5vcmlnaW4pLmRvdCh0aGlzLmRpcmVjdGlvbik7aWYoMD5jKXJldHVybiB0aGlzLm9yaWdpbi5kaXN0YW5jZVRvU3F1YXJlZChiKTthLmNvcHkodGhpcy5kaXJlY3Rpb24pLm11bHRpcGx5U2NhbGFyKGMpLmFkZCh0aGlzLm9yaWdpbik7XG5yZXR1cm4gYS5kaXN0YW5jZVRvU3F1YXJlZChiKX19KCksZGlzdGFuY2VTcVRvU2VnbWVudDpmdW5jdGlvbigpe3ZhciBhPW5ldyBUSFJFRS5WZWN0b3IzLGI9bmV3IFRIUkVFLlZlY3RvcjMsYz1uZXcgVEhSRUUuVmVjdG9yMztyZXR1cm4gZnVuY3Rpb24oZCxlLGYsZyl7YS5jb3B5KGQpLmFkZChlKS5tdWx0aXBseVNjYWxhciguNSk7Yi5jb3B5KGUpLnN1YihkKS5ub3JtYWxpemUoKTtjLmNvcHkodGhpcy5vcmlnaW4pLnN1YihhKTt2YXIgaD0uNSpkLmRpc3RhbmNlVG8oZSksaz0tdGhpcy5kaXJlY3Rpb24uZG90KGIpLGw9Yy5kb3QodGhpcy5kaXJlY3Rpb24pLG09LWMuZG90KGIpLHA9Yy5sZW5ndGhTcSgpLG49TWF0aC5hYnMoMS1rKmspLHE7MDxuPyhkPWsqbS1sLGU9aypsLW0scT1oKm4sMDw9ZD9lPj0tcT9lPD1xPyhoPTEvbixkKj1oLGUqPWgsaz1kKihkK2sqZSsyKmwpK2UqKGsqZCtlKzIqbSkrcCk6KGU9aCxkPU1hdGgubWF4KDAsLShrKmUrbCkpLGs9LWQqZCtlKihlKzIqXG5tKStwKTooZT0taCxkPU1hdGgubWF4KDAsLShrKmUrbCkpLGs9LWQqZCtlKihlKzIqbSkrcCk6ZTw9LXE/KGQ9TWF0aC5tYXgoMCwtKC1rKmgrbCkpLGU9MDxkPy1oOk1hdGgubWluKE1hdGgubWF4KC1oLC1tKSxoKSxrPS1kKmQrZSooZSsyKm0pK3ApOmU8PXE/KGQ9MCxlPU1hdGgubWluKE1hdGgubWF4KC1oLC1tKSxoKSxrPWUqKGUrMiptKStwKTooZD1NYXRoLm1heCgwLC0oaypoK2wpKSxlPTA8ZD9oOk1hdGgubWluKE1hdGgubWF4KC1oLC1tKSxoKSxrPS1kKmQrZSooZSsyKm0pK3ApKTooZT0wPGs/LWg6aCxkPU1hdGgubWF4KDAsLShrKmUrbCkpLGs9LWQqZCtlKihlKzIqbSkrcCk7ZiYmZi5jb3B5KHRoaXMuZGlyZWN0aW9uKS5tdWx0aXBseVNjYWxhcihkKS5hZGQodGhpcy5vcmlnaW4pO2cmJmcuY29weShiKS5tdWx0aXBseVNjYWxhcihlKS5hZGQoYSk7cmV0dXJuIGt9fSgpLGludGVyc2VjdFNwaGVyZTpmdW5jdGlvbigpe3ZhciBhPW5ldyBUSFJFRS5WZWN0b3IzO3JldHVybiBmdW5jdGlvbihiLFxuYyl7YS5zdWJWZWN0b3JzKGIuY2VudGVyLHRoaXMub3JpZ2luKTt2YXIgZD1hLmRvdCh0aGlzLmRpcmVjdGlvbiksZT1hLmRvdChhKS1kKmQsZj1iLnJhZGl1cypiLnJhZGl1cztpZihlPmYpcmV0dXJuIG51bGw7Zj1NYXRoLnNxcnQoZi1lKTtlPWQtZjtkKz1mO3JldHVybiAwPmUmJjA+ZD9udWxsOjA+ZT90aGlzLmF0KGQsYyk6dGhpcy5hdChlLGMpfX0oKSxpbnRlcnNlY3RzU3BoZXJlOmZ1bmN0aW9uKGEpe3JldHVybiB0aGlzLmRpc3RhbmNlVG9Qb2ludChhLmNlbnRlcik8PWEucmFkaXVzfSxkaXN0YW5jZVRvUGxhbmU6ZnVuY3Rpb24oYSl7dmFyIGI9YS5ub3JtYWwuZG90KHRoaXMuZGlyZWN0aW9uKTtpZigwPT09YilyZXR1cm4gMD09PWEuZGlzdGFuY2VUb1BvaW50KHRoaXMub3JpZ2luKT8wOm51bGw7YT0tKHRoaXMub3JpZ2luLmRvdChhLm5vcm1hbCkrYS5jb25zdGFudCkvYjtyZXR1cm4gMDw9YT9hOm51bGx9LGludGVyc2VjdFBsYW5lOmZ1bmN0aW9uKGEsYil7dmFyIGM9XG50aGlzLmRpc3RhbmNlVG9QbGFuZShhKTtyZXR1cm4gbnVsbD09PWM/bnVsbDp0aGlzLmF0KGMsYil9LGludGVyc2VjdHNQbGFuZTpmdW5jdGlvbihhKXt2YXIgYj1hLmRpc3RhbmNlVG9Qb2ludCh0aGlzLm9yaWdpbik7cmV0dXJuIDA9PT1ifHwwPmEubm9ybWFsLmRvdCh0aGlzLmRpcmVjdGlvbikqYj8hMDohMX0saW50ZXJzZWN0Qm94OmZ1bmN0aW9uKGEsYil7dmFyIGMsZCxlLGYsZztkPTEvdGhpcy5kaXJlY3Rpb24ueDtmPTEvdGhpcy5kaXJlY3Rpb24ueTtnPTEvdGhpcy5kaXJlY3Rpb24uejt2YXIgaD10aGlzLm9yaWdpbjswPD1kPyhjPShhLm1pbi54LWgueCkqZCxkKj1hLm1heC54LWgueCk6KGM9KGEubWF4LngtaC54KSpkLGQqPWEubWluLngtaC54KTswPD1mPyhlPShhLm1pbi55LWgueSkqZixmKj1hLm1heC55LWgueSk6KGU9KGEubWF4LnktaC55KSpmLGYqPWEubWluLnktaC55KTtpZihjPmZ8fGU+ZClyZXR1cm4gbnVsbDtpZihlPmN8fGMhPT1jKWM9ZTtpZihmPGR8fGQhPT1cbmQpZD1mOzA8PWc/KGU9KGEubWluLnotaC56KSpnLGcqPWEubWF4LnotaC56KTooZT0oYS5tYXguei1oLnopKmcsZyo9YS5taW4uei1oLnopO2lmKGM+Z3x8ZT5kKXJldHVybiBudWxsO2lmKGU+Y3x8YyE9PWMpYz1lO2lmKGc8ZHx8ZCE9PWQpZD1nO3JldHVybiAwPmQ/bnVsbDp0aGlzLmF0KDA8PWM/YzpkLGIpfSxpbnRlcnNlY3RzQm94OmZ1bmN0aW9uKCl7dmFyIGE9bmV3IFRIUkVFLlZlY3RvcjM7cmV0dXJuIGZ1bmN0aW9uKGIpe3JldHVybiBudWxsIT09dGhpcy5pbnRlcnNlY3RCb3goYixhKX19KCksaW50ZXJzZWN0VHJpYW5nbGU6ZnVuY3Rpb24oKXt2YXIgYT1uZXcgVEhSRUUuVmVjdG9yMyxiPW5ldyBUSFJFRS5WZWN0b3IzLGM9bmV3IFRIUkVFLlZlY3RvcjMsZD1uZXcgVEhSRUUuVmVjdG9yMztyZXR1cm4gZnVuY3Rpb24oZSxmLGcsaCxrKXtiLnN1YlZlY3RvcnMoZixlKTtjLnN1YlZlY3RvcnMoZyxlKTtkLmNyb3NzVmVjdG9ycyhiLGMpO2Y9dGhpcy5kaXJlY3Rpb24uZG90KGQpO1xuaWYoMDxmKXtpZihoKXJldHVybiBudWxsO2g9MX1lbHNlIGlmKDA+ZiloPS0xLGY9LWY7ZWxzZSByZXR1cm4gbnVsbDthLnN1YlZlY3RvcnModGhpcy5vcmlnaW4sZSk7ZT1oKnRoaXMuZGlyZWN0aW9uLmRvdChjLmNyb3NzVmVjdG9ycyhhLGMpKTtpZigwPmUpcmV0dXJuIG51bGw7Zz1oKnRoaXMuZGlyZWN0aW9uLmRvdChiLmNyb3NzKGEpKTtpZigwPmd8fGUrZz5mKXJldHVybiBudWxsO2U9LWgqYS5kb3QoZCk7cmV0dXJuIDA+ZT9udWxsOnRoaXMuYXQoZS9mLGspfX0oKSxhcHBseU1hdHJpeDQ6ZnVuY3Rpb24oYSl7dGhpcy5kaXJlY3Rpb24uYWRkKHRoaXMub3JpZ2luKS5hcHBseU1hdHJpeDQoYSk7dGhpcy5vcmlnaW4uYXBwbHlNYXRyaXg0KGEpO3RoaXMuZGlyZWN0aW9uLnN1Yih0aGlzLm9yaWdpbik7dGhpcy5kaXJlY3Rpb24ubm9ybWFsaXplKCk7cmV0dXJuIHRoaXN9LGVxdWFsczpmdW5jdGlvbihhKXtyZXR1cm4gYS5vcmlnaW4uZXF1YWxzKHRoaXMub3JpZ2luKSYmYS5kaXJlY3Rpb24uZXF1YWxzKHRoaXMuZGlyZWN0aW9uKX19O1xuVEhSRUUuU3BoZXJlPWZ1bmN0aW9uKGEsYil7dGhpcy5jZW50ZXI9dm9pZCAwIT09YT9hOm5ldyBUSFJFRS5WZWN0b3IzO3RoaXMucmFkaXVzPXZvaWQgMCE9PWI/YjowfTtcblRIUkVFLlNwaGVyZS5wcm90b3R5cGU9e2NvbnN0cnVjdG9yOlRIUkVFLlNwaGVyZSxzZXQ6ZnVuY3Rpb24oYSxiKXt0aGlzLmNlbnRlci5jb3B5KGEpO3RoaXMucmFkaXVzPWI7cmV0dXJuIHRoaXN9LHNldEZyb21Qb2ludHM6ZnVuY3Rpb24oKXt2YXIgYT1uZXcgVEhSRUUuQm94MztyZXR1cm4gZnVuY3Rpb24oYixjKXt2YXIgZD10aGlzLmNlbnRlcjt2b2lkIDAhPT1jP2QuY29weShjKTphLnNldEZyb21Qb2ludHMoYikuY2VudGVyKGQpO2Zvcih2YXIgZT0wLGY9MCxnPWIubGVuZ3RoO2Y8ZztmKyspZT1NYXRoLm1heChlLGQuZGlzdGFuY2VUb1NxdWFyZWQoYltmXSkpO3RoaXMucmFkaXVzPU1hdGguc3FydChlKTtyZXR1cm4gdGhpc319KCksY2xvbmU6ZnVuY3Rpb24oKXtyZXR1cm4obmV3IHRoaXMuY29uc3RydWN0b3IpLmNvcHkodGhpcyl9LGNvcHk6ZnVuY3Rpb24oYSl7dGhpcy5jZW50ZXIuY29weShhLmNlbnRlcik7dGhpcy5yYWRpdXM9YS5yYWRpdXM7cmV0dXJuIHRoaXN9LFxuZW1wdHk6ZnVuY3Rpb24oKXtyZXR1cm4gMD49dGhpcy5yYWRpdXN9LGNvbnRhaW5zUG9pbnQ6ZnVuY3Rpb24oYSl7cmV0dXJuIGEuZGlzdGFuY2VUb1NxdWFyZWQodGhpcy5jZW50ZXIpPD10aGlzLnJhZGl1cyp0aGlzLnJhZGl1c30sZGlzdGFuY2VUb1BvaW50OmZ1bmN0aW9uKGEpe3JldHVybiBhLmRpc3RhbmNlVG8odGhpcy5jZW50ZXIpLXRoaXMucmFkaXVzfSxpbnRlcnNlY3RzU3BoZXJlOmZ1bmN0aW9uKGEpe3ZhciBiPXRoaXMucmFkaXVzK2EucmFkaXVzO3JldHVybiBhLmNlbnRlci5kaXN0YW5jZVRvU3F1YXJlZCh0aGlzLmNlbnRlcik8PWIqYn0saW50ZXJzZWN0c0JveDpmdW5jdGlvbihhKXtyZXR1cm4gYS5pbnRlcnNlY3RzU3BoZXJlKHRoaXMpfSxpbnRlcnNlY3RzUGxhbmU6ZnVuY3Rpb24oYSl7cmV0dXJuIE1hdGguYWJzKHRoaXMuY2VudGVyLmRvdChhLm5vcm1hbCktYS5jb25zdGFudCk8PXRoaXMucmFkaXVzfSxjbGFtcFBvaW50OmZ1bmN0aW9uKGEsYil7dmFyIGM9XG50aGlzLmNlbnRlci5kaXN0YW5jZVRvU3F1YXJlZChhKSxkPWJ8fG5ldyBUSFJFRS5WZWN0b3IzO2QuY29weShhKTtjPnRoaXMucmFkaXVzKnRoaXMucmFkaXVzJiYoZC5zdWIodGhpcy5jZW50ZXIpLm5vcm1hbGl6ZSgpLGQubXVsdGlwbHlTY2FsYXIodGhpcy5yYWRpdXMpLmFkZCh0aGlzLmNlbnRlcikpO3JldHVybiBkfSxnZXRCb3VuZGluZ0JveDpmdW5jdGlvbihhKXthPWF8fG5ldyBUSFJFRS5Cb3gzO2Euc2V0KHRoaXMuY2VudGVyLHRoaXMuY2VudGVyKTthLmV4cGFuZEJ5U2NhbGFyKHRoaXMucmFkaXVzKTtyZXR1cm4gYX0sYXBwbHlNYXRyaXg0OmZ1bmN0aW9uKGEpe3RoaXMuY2VudGVyLmFwcGx5TWF0cml4NChhKTt0aGlzLnJhZGl1cyo9YS5nZXRNYXhTY2FsZU9uQXhpcygpO3JldHVybiB0aGlzfSx0cmFuc2xhdGU6ZnVuY3Rpb24oYSl7dGhpcy5jZW50ZXIuYWRkKGEpO3JldHVybiB0aGlzfSxlcXVhbHM6ZnVuY3Rpb24oYSl7cmV0dXJuIGEuY2VudGVyLmVxdWFscyh0aGlzLmNlbnRlcikmJlxuYS5yYWRpdXM9PT10aGlzLnJhZGl1c319O1RIUkVFLkZydXN0dW09ZnVuY3Rpb24oYSxiLGMsZCxlLGYpe3RoaXMucGxhbmVzPVt2b2lkIDAhPT1hP2E6bmV3IFRIUkVFLlBsYW5lLHZvaWQgMCE9PWI/YjpuZXcgVEhSRUUuUGxhbmUsdm9pZCAwIT09Yz9jOm5ldyBUSFJFRS5QbGFuZSx2b2lkIDAhPT1kP2Q6bmV3IFRIUkVFLlBsYW5lLHZvaWQgMCE9PWU/ZTpuZXcgVEhSRUUuUGxhbmUsdm9pZCAwIT09Zj9mOm5ldyBUSFJFRS5QbGFuZV19O1xuVEhSRUUuRnJ1c3R1bS5wcm90b3R5cGU9e2NvbnN0cnVjdG9yOlRIUkVFLkZydXN0dW0sc2V0OmZ1bmN0aW9uKGEsYixjLGQsZSxmKXt2YXIgZz10aGlzLnBsYW5lcztnWzBdLmNvcHkoYSk7Z1sxXS5jb3B5KGIpO2dbMl0uY29weShjKTtnWzNdLmNvcHkoZCk7Z1s0XS5jb3B5KGUpO2dbNV0uY29weShmKTtyZXR1cm4gdGhpc30sY2xvbmU6ZnVuY3Rpb24oKXtyZXR1cm4obmV3IHRoaXMuY29uc3RydWN0b3IpLmNvcHkodGhpcyl9LGNvcHk6ZnVuY3Rpb24oYSl7Zm9yKHZhciBiPXRoaXMucGxhbmVzLGM9MDs2PmM7YysrKWJbY10uY29weShhLnBsYW5lc1tjXSk7cmV0dXJuIHRoaXN9LHNldEZyb21NYXRyaXg6ZnVuY3Rpb24oYSl7dmFyIGI9dGhpcy5wbGFuZXMsYz1hLmVsZW1lbnRzO2E9Y1swXTt2YXIgZD1jWzFdLGU9Y1syXSxmPWNbM10sZz1jWzRdLGg9Y1s1XSxrPWNbNl0sbD1jWzddLG09Y1s4XSxwPWNbOV0sbj1jWzEwXSxxPWNbMTFdLHI9Y1sxMl0scz1jWzEzXSx2PWNbMTRdLFxuYz1jWzE1XTtiWzBdLnNldENvbXBvbmVudHMoZi1hLGwtZyxxLW0sYy1yKS5ub3JtYWxpemUoKTtiWzFdLnNldENvbXBvbmVudHMoZithLGwrZyxxK20sYytyKS5ub3JtYWxpemUoKTtiWzJdLnNldENvbXBvbmVudHMoZitkLGwraCxxK3AsYytzKS5ub3JtYWxpemUoKTtiWzNdLnNldENvbXBvbmVudHMoZi1kLGwtaCxxLXAsYy1zKS5ub3JtYWxpemUoKTtiWzRdLnNldENvbXBvbmVudHMoZi1lLGwtayxxLW4sYy12KS5ub3JtYWxpemUoKTtiWzVdLnNldENvbXBvbmVudHMoZitlLGwrayxxK24sYyt2KS5ub3JtYWxpemUoKTtyZXR1cm4gdGhpc30saW50ZXJzZWN0c09iamVjdDpmdW5jdGlvbigpe3ZhciBhPW5ldyBUSFJFRS5TcGhlcmU7cmV0dXJuIGZ1bmN0aW9uKGIpe3ZhciBjPWIuZ2VvbWV0cnk7bnVsbD09PWMuYm91bmRpbmdTcGhlcmUmJmMuY29tcHV0ZUJvdW5kaW5nU3BoZXJlKCk7YS5jb3B5KGMuYm91bmRpbmdTcGhlcmUpLmFwcGx5TWF0cml4NChiLm1hdHJpeFdvcmxkKTtyZXR1cm4gdGhpcy5pbnRlcnNlY3RzU3BoZXJlKGEpfX0oKSxcbmludGVyc2VjdHNTcHJpdGU6ZnVuY3Rpb24oKXt2YXIgYT1uZXcgVEhSRUUuU3BoZXJlO3JldHVybiBmdW5jdGlvbihiKXthLmNlbnRlci5zZXQoMCwwLDApO2EucmFkaXVzPS43MDcxMDY3ODExODY1NDc2O2EuYXBwbHlNYXRyaXg0KGIubWF0cml4V29ybGQpO3JldHVybiB0aGlzLmludGVyc2VjdHNTcGhlcmUoYSl9fSgpLGludGVyc2VjdHNTcGhlcmU6ZnVuY3Rpb24oYSl7dmFyIGI9dGhpcy5wbGFuZXMsYz1hLmNlbnRlcjthPS1hLnJhZGl1cztmb3IodmFyIGQ9MDs2PmQ7ZCsrKWlmKGJbZF0uZGlzdGFuY2VUb1BvaW50KGMpPGEpcmV0dXJuITE7cmV0dXJuITB9LGludGVyc2VjdHNCb3g6ZnVuY3Rpb24oKXt2YXIgYT1uZXcgVEhSRUUuVmVjdG9yMyxiPW5ldyBUSFJFRS5WZWN0b3IzO3JldHVybiBmdW5jdGlvbihjKXtmb3IodmFyIGQ9dGhpcy5wbGFuZXMsZT0wOzY+ZTtlKyspe3ZhciBmPWRbZV07YS54PTA8Zi5ub3JtYWwueD9jLm1pbi54OmMubWF4Lng7Yi54PTA8Zi5ub3JtYWwueD9cbmMubWF4Lng6Yy5taW4ueDthLnk9MDxmLm5vcm1hbC55P2MubWluLnk6Yy5tYXgueTtiLnk9MDxmLm5vcm1hbC55P2MubWF4Lnk6Yy5taW4ueTthLno9MDxmLm5vcm1hbC56P2MubWluLno6Yy5tYXguejtiLno9MDxmLm5vcm1hbC56P2MubWF4Lno6Yy5taW4uejt2YXIgZz1mLmRpc3RhbmNlVG9Qb2ludChhKSxmPWYuZGlzdGFuY2VUb1BvaW50KGIpO2lmKDA+ZyYmMD5mKXJldHVybiExfXJldHVybiEwfX0oKSxjb250YWluc1BvaW50OmZ1bmN0aW9uKGEpe2Zvcih2YXIgYj10aGlzLnBsYW5lcyxjPTA7Nj5jO2MrKylpZigwPmJbY10uZGlzdGFuY2VUb1BvaW50KGEpKXJldHVybiExO3JldHVybiEwfX07VEhSRUUuUGxhbmU9ZnVuY3Rpb24oYSxiKXt0aGlzLm5vcm1hbD12b2lkIDAhPT1hP2E6bmV3IFRIUkVFLlZlY3RvcjMoMSwwLDApO3RoaXMuY29uc3RhbnQ9dm9pZCAwIT09Yj9iOjB9O1xuVEhSRUUuUGxhbmUucHJvdG90eXBlPXtjb25zdHJ1Y3RvcjpUSFJFRS5QbGFuZSxzZXQ6ZnVuY3Rpb24oYSxiKXt0aGlzLm5vcm1hbC5jb3B5KGEpO3RoaXMuY29uc3RhbnQ9YjtyZXR1cm4gdGhpc30sc2V0Q29tcG9uZW50czpmdW5jdGlvbihhLGIsYyxkKXt0aGlzLm5vcm1hbC5zZXQoYSxiLGMpO3RoaXMuY29uc3RhbnQ9ZDtyZXR1cm4gdGhpc30sc2V0RnJvbU5vcm1hbEFuZENvcGxhbmFyUG9pbnQ6ZnVuY3Rpb24oYSxiKXt0aGlzLm5vcm1hbC5jb3B5KGEpO3RoaXMuY29uc3RhbnQ9LWIuZG90KHRoaXMubm9ybWFsKTtyZXR1cm4gdGhpc30sc2V0RnJvbUNvcGxhbmFyUG9pbnRzOmZ1bmN0aW9uKCl7dmFyIGE9bmV3IFRIUkVFLlZlY3RvcjMsYj1uZXcgVEhSRUUuVmVjdG9yMztyZXR1cm4gZnVuY3Rpb24oYyxkLGUpe2Q9YS5zdWJWZWN0b3JzKGUsZCkuY3Jvc3MoYi5zdWJWZWN0b3JzKGMsZCkpLm5vcm1hbGl6ZSgpO3RoaXMuc2V0RnJvbU5vcm1hbEFuZENvcGxhbmFyUG9pbnQoZCxcbmMpO3JldHVybiB0aGlzfX0oKSxjbG9uZTpmdW5jdGlvbigpe3JldHVybihuZXcgdGhpcy5jb25zdHJ1Y3RvcikuY29weSh0aGlzKX0sY29weTpmdW5jdGlvbihhKXt0aGlzLm5vcm1hbC5jb3B5KGEubm9ybWFsKTt0aGlzLmNvbnN0YW50PWEuY29uc3RhbnQ7cmV0dXJuIHRoaXN9LG5vcm1hbGl6ZTpmdW5jdGlvbigpe3ZhciBhPTEvdGhpcy5ub3JtYWwubGVuZ3RoKCk7dGhpcy5ub3JtYWwubXVsdGlwbHlTY2FsYXIoYSk7dGhpcy5jb25zdGFudCo9YTtyZXR1cm4gdGhpc30sbmVnYXRlOmZ1bmN0aW9uKCl7dGhpcy5jb25zdGFudCo9LTE7dGhpcy5ub3JtYWwubmVnYXRlKCk7cmV0dXJuIHRoaXN9LGRpc3RhbmNlVG9Qb2ludDpmdW5jdGlvbihhKXtyZXR1cm4gdGhpcy5ub3JtYWwuZG90KGEpK3RoaXMuY29uc3RhbnR9LGRpc3RhbmNlVG9TcGhlcmU6ZnVuY3Rpb24oYSl7cmV0dXJuIHRoaXMuZGlzdGFuY2VUb1BvaW50KGEuY2VudGVyKS1hLnJhZGl1c30scHJvamVjdFBvaW50OmZ1bmN0aW9uKGEsXG5iKXtyZXR1cm4gdGhpcy5vcnRob1BvaW50KGEsYikuc3ViKGEpLm5lZ2F0ZSgpfSxvcnRob1BvaW50OmZ1bmN0aW9uKGEsYil7dmFyIGM9dGhpcy5kaXN0YW5jZVRvUG9pbnQoYSk7cmV0dXJuKGJ8fG5ldyBUSFJFRS5WZWN0b3IzKS5jb3B5KHRoaXMubm9ybWFsKS5tdWx0aXBseVNjYWxhcihjKX0saW50ZXJzZWN0TGluZTpmdW5jdGlvbigpe3ZhciBhPW5ldyBUSFJFRS5WZWN0b3IzO3JldHVybiBmdW5jdGlvbihiLGMpe3ZhciBkPWN8fG5ldyBUSFJFRS5WZWN0b3IzLGU9Yi5kZWx0YShhKSxmPXRoaXMubm9ybWFsLmRvdChlKTtpZigwPT09Zil7aWYoMD09PXRoaXMuZGlzdGFuY2VUb1BvaW50KGIuc3RhcnQpKXJldHVybiBkLmNvcHkoYi5zdGFydCl9ZWxzZSByZXR1cm4gZj0tKGIuc3RhcnQuZG90KHRoaXMubm9ybWFsKSt0aGlzLmNvbnN0YW50KS9mLDA+Znx8MTxmP3ZvaWQgMDpkLmNvcHkoZSkubXVsdGlwbHlTY2FsYXIoZikuYWRkKGIuc3RhcnQpfX0oKSxpbnRlcnNlY3RzTGluZTpmdW5jdGlvbihhKXt2YXIgYj1cbnRoaXMuZGlzdGFuY2VUb1BvaW50KGEuc3RhcnQpO2E9dGhpcy5kaXN0YW5jZVRvUG9pbnQoYS5lbmQpO3JldHVybiAwPmImJjA8YXx8MD5hJiYwPGJ9LGludGVyc2VjdHNCb3g6ZnVuY3Rpb24oYSl7cmV0dXJuIGEuaW50ZXJzZWN0c1BsYW5lKHRoaXMpfSxpbnRlcnNlY3RzU3BoZXJlOmZ1bmN0aW9uKGEpe3JldHVybiBhLmludGVyc2VjdHNQbGFuZSh0aGlzKX0sY29wbGFuYXJQb2ludDpmdW5jdGlvbihhKXtyZXR1cm4oYXx8bmV3IFRIUkVFLlZlY3RvcjMpLmNvcHkodGhpcy5ub3JtYWwpLm11bHRpcGx5U2NhbGFyKC10aGlzLmNvbnN0YW50KX0sYXBwbHlNYXRyaXg0OmZ1bmN0aW9uKCl7dmFyIGE9bmV3IFRIUkVFLlZlY3RvcjMsYj1uZXcgVEhSRUUuTWF0cml4MztyZXR1cm4gZnVuY3Rpb24oYyxkKXt2YXIgZT10aGlzLmNvcGxhbmFyUG9pbnQoYSkuYXBwbHlNYXRyaXg0KGMpLGY9ZHx8Yi5nZXROb3JtYWxNYXRyaXgoYyksZj10aGlzLm5vcm1hbC5hcHBseU1hdHJpeDMoZikubm9ybWFsaXplKCk7XG50aGlzLmNvbnN0YW50PS1lLmRvdChmKTtyZXR1cm4gdGhpc319KCksdHJhbnNsYXRlOmZ1bmN0aW9uKGEpe3RoaXMuY29uc3RhbnQtPWEuZG90KHRoaXMubm9ybWFsKTtyZXR1cm4gdGhpc30sZXF1YWxzOmZ1bmN0aW9uKGEpe3JldHVybiBhLm5vcm1hbC5lcXVhbHModGhpcy5ub3JtYWwpJiZhLmNvbnN0YW50PT09dGhpcy5jb25zdGFudH19O1RIUkVFLlNwaGVyaWNhbD1mdW5jdGlvbihhLGIsYyl7dGhpcy5yYWRpdXM9dm9pZCAwIT09YT9hOjE7dGhpcy5waGk9dm9pZCAwIT09Yj9iOjA7dGhpcy50aGV0YT12b2lkIDAhPT1jP2M6MDtyZXR1cm4gdGhpc307XG5USFJFRS5TcGhlcmljYWwucHJvdG90eXBlPXtjb25zdHJ1Y3RvcjpUSFJFRS5TcGhlcmljYWwsc2V0OmZ1bmN0aW9uKGEsYixjKXt0aGlzLnJhZGl1cz1hO3RoaXMucGhpPWI7dGhpcy50aGV0YT1jO3JldHVybiB0aGlzfSxjbG9uZTpmdW5jdGlvbigpe3JldHVybihuZXcgdGhpcy5jb25zdHJ1Y3RvcikuY29weSh0aGlzKX0sY29weTpmdW5jdGlvbihhKXt0aGlzLnJhZGl1cy5jb3B5KGEucmFkaXVzKTt0aGlzLnBoaS5jb3B5KGEucGhpKTt0aGlzLnRoZXRhLmNvcHkoYS50aGV0YSk7cmV0dXJuIHRoaXN9LG1ha2VTYWZlOmZ1bmN0aW9uKCl7dGhpcy5waGk9TWF0aC5tYXgoMUUtNixNYXRoLm1pbihNYXRoLlBJLTFFLTYsdGhpcy5waGkpKTtyZXR1cm4gdGhpc30sc2V0RnJvbVZlY3RvcjM6ZnVuY3Rpb24oYSl7dGhpcy5yYWRpdXM9YS5sZW5ndGgoKTswPT09dGhpcy5yYWRpdXM/dGhpcy5waGk9dGhpcy50aGV0YT0wOih0aGlzLnRoZXRhPU1hdGguYXRhbjIoYS54LGEueiksdGhpcy5waGk9XG5NYXRoLmFjb3MoVEhSRUUuTWF0aC5jbGFtcChhLnkvdGhpcy5yYWRpdXMsLTEsMSkpKTtyZXR1cm4gdGhpc319O1xuVEhSRUUuTWF0aD17REVHMlJBRDpNYXRoLlBJLzE4MCxSQUQyREVHOjE4MC9NYXRoLlBJLGdlbmVyYXRlVVVJRDpmdW5jdGlvbigpe3ZhciBhPVwiMDEyMzQ1Njc4OUFCQ0RFRkdISUpLTE1OT1BRUlNUVVZXWFlaYWJjZGVmZ2hpamtsbW5vcHFyc3R1dnd4eXpcIi5zcGxpdChcIlwiKSxiPUFycmF5KDM2KSxjPTAsZDtyZXR1cm4gZnVuY3Rpb24oKXtmb3IodmFyIGU9MDszNj5lO2UrKyk4PT09ZXx8MTM9PT1lfHwxOD09PWV8fDIzPT09ZT9iW2VdPVwiLVwiOjE0PT09ZT9iW2VdPVwiNFwiOigyPj1jJiYoYz0zMzU1NDQzMisxNjc3NzIxNipNYXRoLnJhbmRvbSgpfDApLGQ9YyYxNSxjPj49NCxiW2VdPWFbMTk9PT1lP2QmM3w4OmRdKTtyZXR1cm4gYi5qb2luKFwiXCIpfX0oKSxjbGFtcDpmdW5jdGlvbihhLGIsYyl7cmV0dXJuIE1hdGgubWF4KGIsTWF0aC5taW4oYyxhKSl9LGV1Y2xpZGVhbk1vZHVsbzpmdW5jdGlvbihhLGIpe3JldHVybihhJWIrYiklYn0sbWFwTGluZWFyOmZ1bmN0aW9uKGEsYixjLFxuZCxlKXtyZXR1cm4gZCsoYS1iKSooZS1kKS8oYy1iKX0sc21vb3Roc3RlcDpmdW5jdGlvbihhLGIsYyl7aWYoYTw9YilyZXR1cm4gMDtpZihhPj1jKXJldHVybiAxO2E9KGEtYikvKGMtYik7cmV0dXJuIGEqYSooMy0yKmEpfSxzbW9vdGhlcnN0ZXA6ZnVuY3Rpb24oYSxiLGMpe2lmKGE8PWIpcmV0dXJuIDA7aWYoYT49YylyZXR1cm4gMTthPShhLWIpLyhjLWIpO3JldHVybiBhKmEqYSooYSooNiphLTE1KSsxMCl9LHJhbmRvbTE2OmZ1bmN0aW9uKCl7Y29uc29sZS53YXJuKFwiVEhSRUUuTWF0aC5yYW5kb20xNigpIGhhcyBiZWVuIGRlcHJlY2F0ZWQuIFVzZSBNYXRoLnJhbmRvbSgpIGluc3RlYWQuXCIpO3JldHVybiBNYXRoLnJhbmRvbSgpfSxyYW5kSW50OmZ1bmN0aW9uKGEsYil7cmV0dXJuIGErTWF0aC5mbG9vcihNYXRoLnJhbmRvbSgpKihiLWErMSkpfSxyYW5kRmxvYXQ6ZnVuY3Rpb24oYSxiKXtyZXR1cm4gYStNYXRoLnJhbmRvbSgpKihiLWEpfSxyYW5kRmxvYXRTcHJlYWQ6ZnVuY3Rpb24oYSl7cmV0dXJuIGEqXG4oLjUtTWF0aC5yYW5kb20oKSl9LGRlZ1RvUmFkOmZ1bmN0aW9uKGEpe3JldHVybiBhKlRIUkVFLk1hdGguREVHMlJBRH0scmFkVG9EZWc6ZnVuY3Rpb24oYSl7cmV0dXJuIGEqVEhSRUUuTWF0aC5SQUQyREVHfSxpc1Bvd2VyT2ZUd286ZnVuY3Rpb24oYSl7cmV0dXJuIDA9PT0oYSZhLTEpJiYwIT09YX0sbmVhcmVzdFBvd2VyT2ZUd286ZnVuY3Rpb24oYSl7cmV0dXJuIE1hdGgucG93KDIsTWF0aC5yb3VuZChNYXRoLmxvZyhhKS9NYXRoLkxOMikpfSxuZXh0UG93ZXJPZlR3bzpmdW5jdGlvbihhKXthLS07YXw9YT4+MTthfD1hPj4yO2F8PWE+PjQ7YXw9YT4+ODthfD1hPj4xNjthKys7cmV0dXJuIGF9fTtcblRIUkVFLlNwbGluZT1mdW5jdGlvbihhKXtmdW5jdGlvbiBiKGEsYixjLGQsZSxmLGcpe2E9LjUqKGMtYSk7ZD0uNSooZC1iKTtyZXR1cm4oMiooYi1jKSthK2QpKmcrKC0zKihiLWMpLTIqYS1kKSpmK2EqZStifXRoaXMucG9pbnRzPWE7dmFyIGM9W10sZD17eDowLHk6MCx6OjB9LGUsZixnLGgsayxsLG0scCxuO3RoaXMuaW5pdEZyb21BcnJheT1mdW5jdGlvbihhKXt0aGlzLnBvaW50cz1bXTtmb3IodmFyIGI9MDtiPGEubGVuZ3RoO2IrKyl0aGlzLnBvaW50c1tiXT17eDphW2JdWzBdLHk6YVtiXVsxXSx6OmFbYl1bMl19fTt0aGlzLmdldFBvaW50PWZ1bmN0aW9uKGEpe2U9KHRoaXMucG9pbnRzLmxlbmd0aC0xKSphO2Y9TWF0aC5mbG9vcihlKTtnPWUtZjtjWzBdPTA9PT1mP2Y6Zi0xO2NbMV09ZjtjWzJdPWY+dGhpcy5wb2ludHMubGVuZ3RoLTI/dGhpcy5wb2ludHMubGVuZ3RoLTE6ZisxO2NbM109Zj50aGlzLnBvaW50cy5sZW5ndGgtMz90aGlzLnBvaW50cy5sZW5ndGgtMTpmK1xuMjtsPXRoaXMucG9pbnRzW2NbMF1dO209dGhpcy5wb2ludHNbY1sxXV07cD10aGlzLnBvaW50c1tjWzJdXTtuPXRoaXMucG9pbnRzW2NbM11dO2g9ZypnO2s9ZypoO2QueD1iKGwueCxtLngscC54LG4ueCxnLGgsayk7ZC55PWIobC55LG0ueSxwLnksbi55LGcsaCxrKTtkLno9YihsLnosbS56LHAueixuLnosZyxoLGspO3JldHVybiBkfTt0aGlzLmdldENvbnRyb2xQb2ludHNBcnJheT1mdW5jdGlvbigpe3ZhciBhLGIsYz10aGlzLnBvaW50cy5sZW5ndGgsZD1bXTtmb3IoYT0wO2E8YzthKyspYj10aGlzLnBvaW50c1thXSxkW2FdPVtiLngsYi55LGIuel07cmV0dXJuIGR9O3RoaXMuZ2V0TGVuZ3RoPWZ1bmN0aW9uKGEpe3ZhciBiLGMsZCxlPWI9Yj0wLGY9bmV3IFRIUkVFLlZlY3RvcjMsZz1uZXcgVEhSRUUuVmVjdG9yMyxoPVtdLGs9MDtoWzBdPTA7YXx8KGE9MTAwKTtjPXRoaXMucG9pbnRzLmxlbmd0aCphO2YuY29weSh0aGlzLnBvaW50c1swXSk7Zm9yKGE9MTthPGM7YSsrKWI9XG5hL2MsZD10aGlzLmdldFBvaW50KGIpLGcuY29weShkKSxrKz1nLmRpc3RhbmNlVG8oZiksZi5jb3B5KGQpLGIqPXRoaXMucG9pbnRzLmxlbmd0aC0xLGI9TWF0aC5mbG9vcihiKSxiIT09ZSYmKGhbYl09ayxlPWIpO2hbaC5sZW5ndGhdPWs7cmV0dXJue2NodW5rczpoLHRvdGFsOmt9fTt0aGlzLnJlcGFyYW1ldHJpemVCeUFyY0xlbmd0aD1mdW5jdGlvbihhKXt2YXIgYixjLGQsZSxmLGcsaD1bXSxrPW5ldyBUSFJFRS5WZWN0b3IzLGw9dGhpcy5nZXRMZW5ndGgoKTtoLnB1c2goay5jb3B5KHRoaXMucG9pbnRzWzBdKS5jbG9uZSgpKTtmb3IoYj0xO2I8dGhpcy5wb2ludHMubGVuZ3RoO2IrKyl7Yz1sLmNodW5rc1tiXS1sLmNodW5rc1tiLTFdO2c9TWF0aC5jZWlsKGEqYy9sLnRvdGFsKTtlPShiLTEpLyh0aGlzLnBvaW50cy5sZW5ndGgtMSk7Zj1iLyh0aGlzLnBvaW50cy5sZW5ndGgtMSk7Zm9yKGM9MTtjPGctMTtjKyspZD1lKzEvZypjKihmLWUpLGQ9dGhpcy5nZXRQb2ludChkKSxcbmgucHVzaChrLmNvcHkoZCkuY2xvbmUoKSk7aC5wdXNoKGsuY29weSh0aGlzLnBvaW50c1tiXSkuY2xvbmUoKSl9dGhpcy5wb2ludHM9aH19O1RIUkVFLlRyaWFuZ2xlPWZ1bmN0aW9uKGEsYixjKXt0aGlzLmE9dm9pZCAwIT09YT9hOm5ldyBUSFJFRS5WZWN0b3IzO3RoaXMuYj12b2lkIDAhPT1iP2I6bmV3IFRIUkVFLlZlY3RvcjM7dGhpcy5jPXZvaWQgMCE9PWM/YzpuZXcgVEhSRUUuVmVjdG9yM307VEhSRUUuVHJpYW5nbGUubm9ybWFsPWZ1bmN0aW9uKCl7dmFyIGE9bmV3IFRIUkVFLlZlY3RvcjM7cmV0dXJuIGZ1bmN0aW9uKGIsYyxkLGUpe2U9ZXx8bmV3IFRIUkVFLlZlY3RvcjM7ZS5zdWJWZWN0b3JzKGQsYyk7YS5zdWJWZWN0b3JzKGIsYyk7ZS5jcm9zcyhhKTtiPWUubGVuZ3RoU3EoKTtyZXR1cm4gMDxiP2UubXVsdGlwbHlTY2FsYXIoMS9NYXRoLnNxcnQoYikpOmUuc2V0KDAsMCwwKX19KCk7XG5USFJFRS5UcmlhbmdsZS5iYXJ5Y29vcmRGcm9tUG9pbnQ9ZnVuY3Rpb24oKXt2YXIgYT1uZXcgVEhSRUUuVmVjdG9yMyxiPW5ldyBUSFJFRS5WZWN0b3IzLGM9bmV3IFRIUkVFLlZlY3RvcjM7cmV0dXJuIGZ1bmN0aW9uKGQsZSxmLGcsaCl7YS5zdWJWZWN0b3JzKGcsZSk7Yi5zdWJWZWN0b3JzKGYsZSk7Yy5zdWJWZWN0b3JzKGQsZSk7ZD1hLmRvdChhKTtlPWEuZG90KGIpO2Y9YS5kb3QoYyk7dmFyIGs9Yi5kb3QoYik7Zz1iLmRvdChjKTt2YXIgbD1kKmstZSplO2g9aHx8bmV3IFRIUkVFLlZlY3RvcjM7aWYoMD09PWwpcmV0dXJuIGguc2V0KC0yLC0xLC0xKTtsPTEvbDtrPShrKmYtZSpnKSpsO2Q9KGQqZy1lKmYpKmw7cmV0dXJuIGguc2V0KDEtay1kLGQsayl9fSgpO1xuVEhSRUUuVHJpYW5nbGUuY29udGFpbnNQb2ludD1mdW5jdGlvbigpe3ZhciBhPW5ldyBUSFJFRS5WZWN0b3IzO3JldHVybiBmdW5jdGlvbihiLGMsZCxlKXtiPVRIUkVFLlRyaWFuZ2xlLmJhcnljb29yZEZyb21Qb2ludChiLGMsZCxlLGEpO3JldHVybiAwPD1iLngmJjA8PWIueSYmMT49Yi54K2IueX19KCk7XG5USFJFRS5UcmlhbmdsZS5wcm90b3R5cGU9e2NvbnN0cnVjdG9yOlRIUkVFLlRyaWFuZ2xlLHNldDpmdW5jdGlvbihhLGIsYyl7dGhpcy5hLmNvcHkoYSk7dGhpcy5iLmNvcHkoYik7dGhpcy5jLmNvcHkoYyk7cmV0dXJuIHRoaXN9LHNldEZyb21Qb2ludHNBbmRJbmRpY2VzOmZ1bmN0aW9uKGEsYixjLGQpe3RoaXMuYS5jb3B5KGFbYl0pO3RoaXMuYi5jb3B5KGFbY10pO3RoaXMuYy5jb3B5KGFbZF0pO3JldHVybiB0aGlzfSxjbG9uZTpmdW5jdGlvbigpe3JldHVybihuZXcgdGhpcy5jb25zdHJ1Y3RvcikuY29weSh0aGlzKX0sY29weTpmdW5jdGlvbihhKXt0aGlzLmEuY29weShhLmEpO3RoaXMuYi5jb3B5KGEuYik7dGhpcy5jLmNvcHkoYS5jKTtyZXR1cm4gdGhpc30sYXJlYTpmdW5jdGlvbigpe3ZhciBhPW5ldyBUSFJFRS5WZWN0b3IzLGI9bmV3IFRIUkVFLlZlY3RvcjM7cmV0dXJuIGZ1bmN0aW9uKCl7YS5zdWJWZWN0b3JzKHRoaXMuYyx0aGlzLmIpO2Iuc3ViVmVjdG9ycyh0aGlzLmEsXG50aGlzLmIpO3JldHVybi41KmEuY3Jvc3MoYikubGVuZ3RoKCl9fSgpLG1pZHBvaW50OmZ1bmN0aW9uKGEpe3JldHVybihhfHxuZXcgVEhSRUUuVmVjdG9yMykuYWRkVmVjdG9ycyh0aGlzLmEsdGhpcy5iKS5hZGQodGhpcy5jKS5tdWx0aXBseVNjYWxhcigxLzMpfSxub3JtYWw6ZnVuY3Rpb24oYSl7cmV0dXJuIFRIUkVFLlRyaWFuZ2xlLm5vcm1hbCh0aGlzLmEsdGhpcy5iLHRoaXMuYyxhKX0scGxhbmU6ZnVuY3Rpb24oYSl7cmV0dXJuKGF8fG5ldyBUSFJFRS5QbGFuZSkuc2V0RnJvbUNvcGxhbmFyUG9pbnRzKHRoaXMuYSx0aGlzLmIsdGhpcy5jKX0sYmFyeWNvb3JkRnJvbVBvaW50OmZ1bmN0aW9uKGEsYil7cmV0dXJuIFRIUkVFLlRyaWFuZ2xlLmJhcnljb29yZEZyb21Qb2ludChhLHRoaXMuYSx0aGlzLmIsdGhpcy5jLGIpfSxjb250YWluc1BvaW50OmZ1bmN0aW9uKGEpe3JldHVybiBUSFJFRS5UcmlhbmdsZS5jb250YWluc1BvaW50KGEsdGhpcy5hLHRoaXMuYix0aGlzLmMpfSxcbmNsb3Nlc3RQb2ludFRvUG9pbnQ6ZnVuY3Rpb24oKXt2YXIgYSxiLGMsZDtyZXR1cm4gZnVuY3Rpb24oZSxmKXt2b2lkIDA9PT1hJiYoYT1uZXcgVEhSRUUuUGxhbmUsYj1bbmV3IFRIUkVFLkxpbmUzLG5ldyBUSFJFRS5MaW5lMyxuZXcgVEhSRUUuTGluZTNdLGM9bmV3IFRIUkVFLlZlY3RvcjMsZD1uZXcgVEhSRUUuVmVjdG9yMyk7dmFyIGc9Znx8bmV3IFRIUkVFLlZlY3RvcjMsaD1JbmZpbml0eTthLnNldEZyb21Db3BsYW5hclBvaW50cyh0aGlzLmEsdGhpcy5iLHRoaXMuYyk7YS5wcm9qZWN0UG9pbnQoZSxjKTtpZighMD09PXRoaXMuY29udGFpbnNQb2ludChjKSlnLmNvcHkoYyk7ZWxzZXtiWzBdLnNldCh0aGlzLmEsdGhpcy5iKTtiWzFdLnNldCh0aGlzLmIsdGhpcy5jKTtiWzJdLnNldCh0aGlzLmMsdGhpcy5hKTtmb3IodmFyIGs9MDtrPGIubGVuZ3RoO2srKyl7YltrXS5jbG9zZXN0UG9pbnRUb1BvaW50KGMsITAsZCk7dmFyIGw9Yy5kaXN0YW5jZVRvU3F1YXJlZChkKTtsPFxuaCYmKGg9bCxnLmNvcHkoZCkpfX1yZXR1cm4gZ319KCksZXF1YWxzOmZ1bmN0aW9uKGEpe3JldHVybiBhLmEuZXF1YWxzKHRoaXMuYSkmJmEuYi5lcXVhbHModGhpcy5iKSYmYS5jLmVxdWFscyh0aGlzLmMpfX07VEhSRUUuSW50ZXJwb2xhbnQ9ZnVuY3Rpb24oYSxiLGMsZCl7dGhpcy5wYXJhbWV0ZXJQb3NpdGlvbnM9YTt0aGlzLl9jYWNoZWRJbmRleD0wO3RoaXMucmVzdWx0QnVmZmVyPXZvaWQgMCE9PWQ/ZDpuZXcgYi5jb25zdHJ1Y3RvcihjKTt0aGlzLnNhbXBsZVZhbHVlcz1iO3RoaXMudmFsdWVTaXplPWN9O1xuVEhSRUUuSW50ZXJwb2xhbnQucHJvdG90eXBlPXtjb25zdHJ1Y3RvcjpUSFJFRS5JbnRlcnBvbGFudCxldmFsdWF0ZTpmdW5jdGlvbihhKXt2YXIgYj10aGlzLnBhcmFtZXRlclBvc2l0aW9ucyxjPXRoaXMuX2NhY2hlZEluZGV4LGQ9YltjXSxlPWJbYy0xXTthOntiOntjOntkOmlmKCEoYTxkKSl7Zm9yKHZhciBmPWMrMjs7KXtpZih2b2lkIDA9PT1kKXtpZihhPGUpYnJlYWsgZDt0aGlzLl9jYWNoZWRJbmRleD1jPWIubGVuZ3RoO3JldHVybiB0aGlzLmFmdGVyRW5kXyhjLTEsYSxlKX1pZihjPT09ZilicmVhaztlPWQ7ZD1iWysrY107aWYoYTxkKWJyZWFrIGJ9ZD1iLmxlbmd0aDticmVhayBjfWlmKGE+PWUpYnJlYWsgYTtlbHNle2Y9YlsxXTthPGYmJihjPTIsZT1mKTtmb3IoZj1jLTI7Oyl7aWYodm9pZCAwPT09ZSlyZXR1cm4gdGhpcy5fY2FjaGVkSW5kZXg9MCx0aGlzLmJlZm9yZVN0YXJ0XygwLGEsZCk7aWYoYz09PWYpYnJlYWs7ZD1lO2U9YlstLWMtMV07aWYoYT49ZSlicmVhayBifWQ9XG5jO2M9MH19Zm9yKDtjPGQ7KWU9YytkPj4+MSxhPGJbZV0/ZD1lOmM9ZSsxO2Q9YltjXTtlPWJbYy0xXTtpZih2b2lkIDA9PT1lKXJldHVybiB0aGlzLl9jYWNoZWRJbmRleD0wLHRoaXMuYmVmb3JlU3RhcnRfKDAsYSxkKTtpZih2b2lkIDA9PT1kKXJldHVybiB0aGlzLl9jYWNoZWRJbmRleD1jPWIubGVuZ3RoLHRoaXMuYWZ0ZXJFbmRfKGMtMSxlLGEpfXRoaXMuX2NhY2hlZEluZGV4PWM7dGhpcy5pbnRlcnZhbENoYW5nZWRfKGMsZSxkKX1yZXR1cm4gdGhpcy5pbnRlcnBvbGF0ZV8oYyxlLGEsZCl9LHNldHRpbmdzOm51bGwsRGVmYXVsdFNldHRpbmdzXzp7fSxnZXRTZXR0aW5nc186ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5zZXR0aW5nc3x8dGhpcy5EZWZhdWx0U2V0dGluZ3NffSxjb3B5U2FtcGxlVmFsdWVfOmZ1bmN0aW9uKGEpe3ZhciBiPXRoaXMucmVzdWx0QnVmZmVyLGM9dGhpcy5zYW1wbGVWYWx1ZXMsZD10aGlzLnZhbHVlU2l6ZTthKj1kO2Zvcih2YXIgZT0wO2UhPT1kOysrZSliW2VdPVxuY1thK2VdO3JldHVybiBifSxpbnRlcnBvbGF0ZV86ZnVuY3Rpb24oYSxiLGMsZCl7dGhyb3cgRXJyb3IoXCJjYWxsIHRvIGFic3RyYWN0IG1ldGhvZFwiKTt9LGludGVydmFsQ2hhbmdlZF86ZnVuY3Rpb24oYSxiLGMpe319O09iamVjdC5hc3NpZ24oVEhSRUUuSW50ZXJwb2xhbnQucHJvdG90eXBlLHtiZWZvcmVTdGFydF86VEhSRUUuSW50ZXJwb2xhbnQucHJvdG90eXBlLmNvcHlTYW1wbGVWYWx1ZV8sYWZ0ZXJFbmRfOlRIUkVFLkludGVycG9sYW50LnByb3RvdHlwZS5jb3B5U2FtcGxlVmFsdWVffSk7VEhSRUUuQ3ViaWNJbnRlcnBvbGFudD1mdW5jdGlvbihhLGIsYyxkKXtUSFJFRS5JbnRlcnBvbGFudC5jYWxsKHRoaXMsYSxiLGMsZCk7dGhpcy5fb2Zmc2V0TmV4dD10aGlzLl93ZWlnaHROZXh0PXRoaXMuX29mZnNldFByZXY9dGhpcy5fd2VpZ2h0UHJldj0tMH07XG5USFJFRS5DdWJpY0ludGVycG9sYW50LnByb3RvdHlwZT1PYmplY3QuYXNzaWduKE9iamVjdC5jcmVhdGUoVEhSRUUuSW50ZXJwb2xhbnQucHJvdG90eXBlKSx7Y29uc3RydWN0b3I6VEhSRUUuQ3ViaWNJbnRlcnBvbGFudCxEZWZhdWx0U2V0dGluZ3NfOntlbmRpbmdTdGFydDpUSFJFRS5aZXJvQ3VydmF0dXJlRW5kaW5nLGVuZGluZ0VuZDpUSFJFRS5aZXJvQ3VydmF0dXJlRW5kaW5nfSxpbnRlcnZhbENoYW5nZWRfOmZ1bmN0aW9uKGEsYixjKXt2YXIgZD10aGlzLnBhcmFtZXRlclBvc2l0aW9ucyxlPWEtMixmPWErMSxnPWRbZV0saD1kW2ZdO2lmKHZvaWQgMD09PWcpc3dpdGNoKHRoaXMuZ2V0U2V0dGluZ3NfKCkuZW5kaW5nU3RhcnQpe2Nhc2UgVEhSRUUuWmVyb1Nsb3BlRW5kaW5nOmU9YTtnPTIqYi1jO2JyZWFrO2Nhc2UgVEhSRUUuV3JhcEFyb3VuZEVuZGluZzplPWQubGVuZ3RoLTI7Zz1iK2RbZV0tZFtlKzFdO2JyZWFrO2RlZmF1bHQ6ZT1hLGc9Y31pZih2b2lkIDA9PT1oKXN3aXRjaCh0aGlzLmdldFNldHRpbmdzXygpLmVuZGluZ0VuZCl7Y2FzZSBUSFJFRS5aZXJvU2xvcGVFbmRpbmc6Zj1cbmE7aD0yKmMtYjticmVhaztjYXNlIFRIUkVFLldyYXBBcm91bmRFbmRpbmc6Zj0xO2g9YytkWzFdLWRbMF07YnJlYWs7ZGVmYXVsdDpmPWEtMSxoPWJ9YT0uNSooYy1iKTtkPXRoaXMudmFsdWVTaXplO3RoaXMuX3dlaWdodFByZXY9YS8oYi1nKTt0aGlzLl93ZWlnaHROZXh0PWEvKGgtYyk7dGhpcy5fb2Zmc2V0UHJldj1lKmQ7dGhpcy5fb2Zmc2V0TmV4dD1mKmR9LGludGVycG9sYXRlXzpmdW5jdGlvbihhLGIsYyxkKXt2YXIgZT10aGlzLnJlc3VsdEJ1ZmZlcixmPXRoaXMuc2FtcGxlVmFsdWVzLGc9dGhpcy52YWx1ZVNpemU7YSo9Zzt2YXIgaD1hLWcsaz10aGlzLl9vZmZzZXRQcmV2LGw9dGhpcy5fb2Zmc2V0TmV4dCxtPXRoaXMuX3dlaWdodFByZXYscD10aGlzLl93ZWlnaHROZXh0LG49KGMtYikvKGQtYik7Yz1uKm47ZD1jKm47Yj0tbSpkKzIqbSpjLW0qbjttPSgxK20pKmQrKC0xLjUtMiptKSpjKygtLjUrbSkqbisxO249KC0xLXApKmQrKDEuNStwKSpjKy41Km47cD1wKmQtcCpcbmM7Zm9yKGM9MDtjIT09ZzsrK2MpZVtjXT1iKmZbaytjXSttKmZbaCtjXStuKmZbYStjXStwKmZbbCtjXTtyZXR1cm4gZX19KTtUSFJFRS5EaXNjcmV0ZUludGVycG9sYW50PWZ1bmN0aW9uKGEsYixjLGQpe1RIUkVFLkludGVycG9sYW50LmNhbGwodGhpcyxhLGIsYyxkKX07VEhSRUUuRGlzY3JldGVJbnRlcnBvbGFudC5wcm90b3R5cGU9T2JqZWN0LmFzc2lnbihPYmplY3QuY3JlYXRlKFRIUkVFLkludGVycG9sYW50LnByb3RvdHlwZSkse2NvbnN0cnVjdG9yOlRIUkVFLkRpc2NyZXRlSW50ZXJwb2xhbnQsaW50ZXJwb2xhdGVfOmZ1bmN0aW9uKGEsYixjLGQpe3JldHVybiB0aGlzLmNvcHlTYW1wbGVWYWx1ZV8oYS0xKX19KTtUSFJFRS5MaW5lYXJJbnRlcnBvbGFudD1mdW5jdGlvbihhLGIsYyxkKXtUSFJFRS5JbnRlcnBvbGFudC5jYWxsKHRoaXMsYSxiLGMsZCl9O1xuVEhSRUUuTGluZWFySW50ZXJwb2xhbnQucHJvdG90eXBlPU9iamVjdC5hc3NpZ24oT2JqZWN0LmNyZWF0ZShUSFJFRS5JbnRlcnBvbGFudC5wcm90b3R5cGUpLHtjb25zdHJ1Y3RvcjpUSFJFRS5MaW5lYXJJbnRlcnBvbGFudCxpbnRlcnBvbGF0ZV86ZnVuY3Rpb24oYSxiLGMsZCl7dmFyIGU9dGhpcy5yZXN1bHRCdWZmZXIsZj10aGlzLnNhbXBsZVZhbHVlcyxnPXRoaXMudmFsdWVTaXplO2EqPWc7dmFyIGg9YS1nO2I9KGMtYikvKGQtYik7Yz0xLWI7Zm9yKGQ9MDtkIT09ZzsrK2QpZVtkXT1mW2grZF0qYytmW2ErZF0qYjtyZXR1cm4gZX19KTtUSFJFRS5RdWF0ZXJuaW9uTGluZWFySW50ZXJwb2xhbnQ9ZnVuY3Rpb24oYSxiLGMsZCl7VEhSRUUuSW50ZXJwb2xhbnQuY2FsbCh0aGlzLGEsYixjLGQpfTtcblRIUkVFLlF1YXRlcm5pb25MaW5lYXJJbnRlcnBvbGFudC5wcm90b3R5cGU9T2JqZWN0LmFzc2lnbihPYmplY3QuY3JlYXRlKFRIUkVFLkludGVycG9sYW50LnByb3RvdHlwZSkse2NvbnN0cnVjdG9yOlRIUkVFLlF1YXRlcm5pb25MaW5lYXJJbnRlcnBvbGFudCxpbnRlcnBvbGF0ZV86ZnVuY3Rpb24oYSxiLGMsZCl7dmFyIGU9dGhpcy5yZXN1bHRCdWZmZXIsZj10aGlzLnNhbXBsZVZhbHVlcyxnPXRoaXMudmFsdWVTaXplO2EqPWc7Yj0oYy1iKS8oZC1iKTtmb3IoYz1hK2c7YSE9PWM7YSs9NClUSFJFRS5RdWF0ZXJuaW9uLnNsZXJwRmxhdChlLDAsZixhLWcsZixhLGIpO3JldHVybiBlfX0pO1RIUkVFLkNsb2NrPWZ1bmN0aW9uKGEpe3RoaXMuYXV0b1N0YXJ0PXZvaWQgMCE9PWE/YTohMDt0aGlzLmVsYXBzZWRUaW1lPXRoaXMub2xkVGltZT10aGlzLnN0YXJ0VGltZT0wO3RoaXMucnVubmluZz0hMX07XG5USFJFRS5DbG9jay5wcm90b3R5cGU9e2NvbnN0cnVjdG9yOlRIUkVFLkNsb2NrLHN0YXJ0OmZ1bmN0aW9uKCl7dGhpcy5vbGRUaW1lPXRoaXMuc3RhcnRUaW1lPShwZXJmb3JtYW5jZXx8RGF0ZSkubm93KCk7dGhpcy5ydW5uaW5nPSEwfSxzdG9wOmZ1bmN0aW9uKCl7dGhpcy5nZXRFbGFwc2VkVGltZSgpO3RoaXMucnVubmluZz0hMX0sZ2V0RWxhcHNlZFRpbWU6ZnVuY3Rpb24oKXt0aGlzLmdldERlbHRhKCk7cmV0dXJuIHRoaXMuZWxhcHNlZFRpbWV9LGdldERlbHRhOmZ1bmN0aW9uKCl7dmFyIGE9MDt0aGlzLmF1dG9TdGFydCYmIXRoaXMucnVubmluZyYmdGhpcy5zdGFydCgpO2lmKHRoaXMucnVubmluZyl7dmFyIGI9KHBlcmZvcm1hbmNlfHxEYXRlKS5ub3coKSxhPShiLXRoaXMub2xkVGltZSkvMUUzO3RoaXMub2xkVGltZT1iO3RoaXMuZWxhcHNlZFRpbWUrPWF9cmV0dXJuIGF9fTtUSFJFRS5FdmVudERpc3BhdGNoZXI9ZnVuY3Rpb24oKXt9O1xuT2JqZWN0LmFzc2lnbihUSFJFRS5FdmVudERpc3BhdGNoZXIucHJvdG90eXBlLHthZGRFdmVudExpc3RlbmVyOmZ1bmN0aW9uKGEsYil7dm9pZCAwPT09dGhpcy5fbGlzdGVuZXJzJiYodGhpcy5fbGlzdGVuZXJzPXt9KTt2YXIgYz10aGlzLl9saXN0ZW5lcnM7dm9pZCAwPT09Y1thXSYmKGNbYV09W10pOy0xPT09Y1thXS5pbmRleE9mKGIpJiZjW2FdLnB1c2goYil9LGhhc0V2ZW50TGlzdGVuZXI6ZnVuY3Rpb24oYSxiKXtpZih2b2lkIDA9PT10aGlzLl9saXN0ZW5lcnMpcmV0dXJuITE7dmFyIGM9dGhpcy5fbGlzdGVuZXJzO3JldHVybiB2b2lkIDAhPT1jW2FdJiYtMSE9PWNbYV0uaW5kZXhPZihiKT8hMDohMX0scmVtb3ZlRXZlbnRMaXN0ZW5lcjpmdW5jdGlvbihhLGIpe2lmKHZvaWQgMCE9PXRoaXMuX2xpc3RlbmVycyl7dmFyIGM9dGhpcy5fbGlzdGVuZXJzW2FdO2lmKHZvaWQgMCE9PWMpe3ZhciBkPWMuaW5kZXhPZihiKTstMSE9PWQmJmMuc3BsaWNlKGQsMSl9fX0sZGlzcGF0Y2hFdmVudDpmdW5jdGlvbihhKXtpZih2b2lkIDAhPT1cbnRoaXMuX2xpc3RlbmVycyl7dmFyIGI9dGhpcy5fbGlzdGVuZXJzW2EudHlwZV07aWYodm9pZCAwIT09Yil7YS50YXJnZXQ9dGhpcztmb3IodmFyIGM9W10sZD0wLGU9Yi5sZW5ndGgsZD0wO2Q8ZTtkKyspY1tkXT1iW2RdO2ZvcihkPTA7ZDxlO2QrKyljW2RdLmNhbGwodGhpcyxhKX19fX0pO1RIUkVFLkxheWVycz1mdW5jdGlvbigpe3RoaXMubWFzaz0xfTtUSFJFRS5MYXllcnMucHJvdG90eXBlPXtjb25zdHJ1Y3RvcjpUSFJFRS5MYXllcnMsc2V0OmZ1bmN0aW9uKGEpe3RoaXMubWFzaz0xPDxhfSxlbmFibGU6ZnVuY3Rpb24oYSl7dGhpcy5tYXNrfD0xPDxhfSx0b2dnbGU6ZnVuY3Rpb24oYSl7dGhpcy5tYXNrXj0xPDxhfSxkaXNhYmxlOmZ1bmN0aW9uKGEpe3RoaXMubWFzayY9figxPDxhKX0sdGVzdDpmdW5jdGlvbihhKXtyZXR1cm4gMCE9PSh0aGlzLm1hc2smYS5tYXNrKX19O1xuKGZ1bmN0aW9uKGEpe2Z1bmN0aW9uIGIoYSxiKXtyZXR1cm4gYS5kaXN0YW5jZS1iLmRpc3RhbmNlfWZ1bmN0aW9uIGMoYSxiLGYsZyl7aWYoITEhPT1hLnZpc2libGUmJihhLnJheWNhc3QoYixmKSwhMD09PWcpKXthPWEuY2hpbGRyZW47Zz0wO2Zvcih2YXIgaD1hLmxlbmd0aDtnPGg7ZysrKWMoYVtnXSxiLGYsITApfX1hLlJheWNhc3Rlcj1mdW5jdGlvbihiLGMsZixnKXt0aGlzLnJheT1uZXcgYS5SYXkoYixjKTt0aGlzLm5lYXI9Znx8MDt0aGlzLmZhcj1nfHxJbmZpbml0eTt0aGlzLnBhcmFtcz17TWVzaDp7fSxMaW5lOnt9LExPRDp7fSxQb2ludHM6e3RocmVzaG9sZDoxfSxTcHJpdGU6e319O09iamVjdC5kZWZpbmVQcm9wZXJ0aWVzKHRoaXMucGFyYW1zLHtQb2ludENsb3VkOntnZXQ6ZnVuY3Rpb24oKXtjb25zb2xlLndhcm4oXCJUSFJFRS5SYXljYXN0ZXI6IHBhcmFtcy5Qb2ludENsb3VkIGhhcyBiZWVuIHJlbmFtZWQgdG8gcGFyYW1zLlBvaW50cy5cIik7cmV0dXJuIHRoaXMuUG9pbnRzfX19KX07XG5hLlJheWNhc3Rlci5wcm90b3R5cGU9e2NvbnN0cnVjdG9yOmEuUmF5Y2FzdGVyLGxpbmVQcmVjaXNpb246MSxzZXQ6ZnVuY3Rpb24oYSxiKXt0aGlzLnJheS5zZXQoYSxiKX0sc2V0RnJvbUNhbWVyYTpmdW5jdGlvbihiLGMpe2MgaW5zdGFuY2VvZiBhLlBlcnNwZWN0aXZlQ2FtZXJhPyh0aGlzLnJheS5vcmlnaW4uc2V0RnJvbU1hdHJpeFBvc2l0aW9uKGMubWF0cml4V29ybGQpLHRoaXMucmF5LmRpcmVjdGlvbi5zZXQoYi54LGIueSwuNSkudW5wcm9qZWN0KGMpLnN1Yih0aGlzLnJheS5vcmlnaW4pLm5vcm1hbGl6ZSgpKTpjIGluc3RhbmNlb2YgYS5PcnRob2dyYXBoaWNDYW1lcmE/KHRoaXMucmF5Lm9yaWdpbi5zZXQoYi54LGIueSwoYy5uZWFyK2MuZmFyKS8oYy5uZWFyLWMuZmFyKSkudW5wcm9qZWN0KGMpLHRoaXMucmF5LmRpcmVjdGlvbi5zZXQoMCwwLC0xKS50cmFuc2Zvcm1EaXJlY3Rpb24oYy5tYXRyaXhXb3JsZCkpOmNvbnNvbGUuZXJyb3IoXCJUSFJFRS5SYXljYXN0ZXI6IFVuc3VwcG9ydGVkIGNhbWVyYSB0eXBlLlwiKX0sXG5pbnRlcnNlY3RPYmplY3Q6ZnVuY3Rpb24oYSxlKXt2YXIgZj1bXTtjKGEsdGhpcyxmLGUpO2Yuc29ydChiKTtyZXR1cm4gZn0saW50ZXJzZWN0T2JqZWN0czpmdW5jdGlvbihhLGUpe3ZhciBmPVtdO2lmKCExPT09QXJyYXkuaXNBcnJheShhKSlyZXR1cm4gY29uc29sZS53YXJuKFwiVEhSRUUuUmF5Y2FzdGVyLmludGVyc2VjdE9iamVjdHM6IG9iamVjdHMgaXMgbm90IGFuIEFycmF5LlwiKSxmO2Zvcih2YXIgZz0wLGg9YS5sZW5ndGg7ZzxoO2crKyljKGFbZ10sdGhpcyxmLGUpO2Yuc29ydChiKTtyZXR1cm4gZn19fSkoVEhSRUUpO1xuVEhSRUUuT2JqZWN0M0Q9ZnVuY3Rpb24oKXtPYmplY3QuZGVmaW5lUHJvcGVydHkodGhpcyxcImlkXCIse3ZhbHVlOlRIUkVFLk9iamVjdDNESWRDb3VudCsrfSk7dGhpcy51dWlkPVRIUkVFLk1hdGguZ2VuZXJhdGVVVUlEKCk7dGhpcy5uYW1lPVwiXCI7dGhpcy50eXBlPVwiT2JqZWN0M0RcIjt0aGlzLnBhcmVudD1udWxsO3RoaXMuY2hpbGRyZW49W107dGhpcy51cD1USFJFRS5PYmplY3QzRC5EZWZhdWx0VXAuY2xvbmUoKTt2YXIgYT1uZXcgVEhSRUUuVmVjdG9yMyxiPW5ldyBUSFJFRS5FdWxlcixjPW5ldyBUSFJFRS5RdWF0ZXJuaW9uLGQ9bmV3IFRIUkVFLlZlY3RvcjMoMSwxLDEpO2Iub25DaGFuZ2UoZnVuY3Rpb24oKXtjLnNldEZyb21FdWxlcihiLCExKX0pO2Mub25DaGFuZ2UoZnVuY3Rpb24oKXtiLnNldEZyb21RdWF0ZXJuaW9uKGMsdm9pZCAwLCExKX0pO09iamVjdC5kZWZpbmVQcm9wZXJ0aWVzKHRoaXMse3Bvc2l0aW9uOntlbnVtZXJhYmxlOiEwLHZhbHVlOmF9LHJvdGF0aW9uOntlbnVtZXJhYmxlOiEwLFxudmFsdWU6Yn0scXVhdGVybmlvbjp7ZW51bWVyYWJsZTohMCx2YWx1ZTpjfSxzY2FsZTp7ZW51bWVyYWJsZTohMCx2YWx1ZTpkfSxtb2RlbFZpZXdNYXRyaXg6e3ZhbHVlOm5ldyBUSFJFRS5NYXRyaXg0fSxub3JtYWxNYXRyaXg6e3ZhbHVlOm5ldyBUSFJFRS5NYXRyaXgzfX0pO3RoaXMubWF0cml4PW5ldyBUSFJFRS5NYXRyaXg0O3RoaXMubWF0cml4V29ybGQ9bmV3IFRIUkVFLk1hdHJpeDQ7dGhpcy5tYXRyaXhBdXRvVXBkYXRlPVRIUkVFLk9iamVjdDNELkRlZmF1bHRNYXRyaXhBdXRvVXBkYXRlO3RoaXMubWF0cml4V29ybGROZWVkc1VwZGF0ZT0hMTt0aGlzLmxheWVycz1uZXcgVEhSRUUuTGF5ZXJzO3RoaXMudmlzaWJsZT0hMDt0aGlzLnJlY2VpdmVTaGFkb3c9dGhpcy5jYXN0U2hhZG93PSExO3RoaXMuZnJ1c3R1bUN1bGxlZD0hMDt0aGlzLnJlbmRlck9yZGVyPTA7dGhpcy51c2VyRGF0YT17fX07XG5USFJFRS5PYmplY3QzRC5EZWZhdWx0VXA9bmV3IFRIUkVFLlZlY3RvcjMoMCwxLDApO1RIUkVFLk9iamVjdDNELkRlZmF1bHRNYXRyaXhBdXRvVXBkYXRlPSEwO1xuT2JqZWN0LmFzc2lnbihUSFJFRS5PYmplY3QzRC5wcm90b3R5cGUsVEhSRUUuRXZlbnREaXNwYXRjaGVyLnByb3RvdHlwZSx7YXBwbHlNYXRyaXg6ZnVuY3Rpb24oYSl7dGhpcy5tYXRyaXgubXVsdGlwbHlNYXRyaWNlcyhhLHRoaXMubWF0cml4KTt0aGlzLm1hdHJpeC5kZWNvbXBvc2UodGhpcy5wb3NpdGlvbix0aGlzLnF1YXRlcm5pb24sdGhpcy5zY2FsZSl9LHNldFJvdGF0aW9uRnJvbUF4aXNBbmdsZTpmdW5jdGlvbihhLGIpe3RoaXMucXVhdGVybmlvbi5zZXRGcm9tQXhpc0FuZ2xlKGEsYil9LHNldFJvdGF0aW9uRnJvbUV1bGVyOmZ1bmN0aW9uKGEpe3RoaXMucXVhdGVybmlvbi5zZXRGcm9tRXVsZXIoYSwhMCl9LHNldFJvdGF0aW9uRnJvbU1hdHJpeDpmdW5jdGlvbihhKXt0aGlzLnF1YXRlcm5pb24uc2V0RnJvbVJvdGF0aW9uTWF0cml4KGEpfSxzZXRSb3RhdGlvbkZyb21RdWF0ZXJuaW9uOmZ1bmN0aW9uKGEpe3RoaXMucXVhdGVybmlvbi5jb3B5KGEpfSxyb3RhdGVPbkF4aXM6ZnVuY3Rpb24oKXt2YXIgYT1cbm5ldyBUSFJFRS5RdWF0ZXJuaW9uO3JldHVybiBmdW5jdGlvbihiLGMpe2Euc2V0RnJvbUF4aXNBbmdsZShiLGMpO3RoaXMucXVhdGVybmlvbi5tdWx0aXBseShhKTtyZXR1cm4gdGhpc319KCkscm90YXRlWDpmdW5jdGlvbigpe3ZhciBhPW5ldyBUSFJFRS5WZWN0b3IzKDEsMCwwKTtyZXR1cm4gZnVuY3Rpb24oYil7cmV0dXJuIHRoaXMucm90YXRlT25BeGlzKGEsYil9fSgpLHJvdGF0ZVk6ZnVuY3Rpb24oKXt2YXIgYT1uZXcgVEhSRUUuVmVjdG9yMygwLDEsMCk7cmV0dXJuIGZ1bmN0aW9uKGIpe3JldHVybiB0aGlzLnJvdGF0ZU9uQXhpcyhhLGIpfX0oKSxyb3RhdGVaOmZ1bmN0aW9uKCl7dmFyIGE9bmV3IFRIUkVFLlZlY3RvcjMoMCwwLDEpO3JldHVybiBmdW5jdGlvbihiKXtyZXR1cm4gdGhpcy5yb3RhdGVPbkF4aXMoYSxiKX19KCksdHJhbnNsYXRlT25BeGlzOmZ1bmN0aW9uKCl7dmFyIGE9bmV3IFRIUkVFLlZlY3RvcjM7cmV0dXJuIGZ1bmN0aW9uKGIsYyl7YS5jb3B5KGIpLmFwcGx5UXVhdGVybmlvbih0aGlzLnF1YXRlcm5pb24pO1xudGhpcy5wb3NpdGlvbi5hZGQoYS5tdWx0aXBseVNjYWxhcihjKSk7cmV0dXJuIHRoaXN9fSgpLHRyYW5zbGF0ZVg6ZnVuY3Rpb24oKXt2YXIgYT1uZXcgVEhSRUUuVmVjdG9yMygxLDAsMCk7cmV0dXJuIGZ1bmN0aW9uKGIpe3JldHVybiB0aGlzLnRyYW5zbGF0ZU9uQXhpcyhhLGIpfX0oKSx0cmFuc2xhdGVZOmZ1bmN0aW9uKCl7dmFyIGE9bmV3IFRIUkVFLlZlY3RvcjMoMCwxLDApO3JldHVybiBmdW5jdGlvbihiKXtyZXR1cm4gdGhpcy50cmFuc2xhdGVPbkF4aXMoYSxiKX19KCksdHJhbnNsYXRlWjpmdW5jdGlvbigpe3ZhciBhPW5ldyBUSFJFRS5WZWN0b3IzKDAsMCwxKTtyZXR1cm4gZnVuY3Rpb24oYil7cmV0dXJuIHRoaXMudHJhbnNsYXRlT25BeGlzKGEsYil9fSgpLGxvY2FsVG9Xb3JsZDpmdW5jdGlvbihhKXtyZXR1cm4gYS5hcHBseU1hdHJpeDQodGhpcy5tYXRyaXhXb3JsZCl9LHdvcmxkVG9Mb2NhbDpmdW5jdGlvbigpe3ZhciBhPW5ldyBUSFJFRS5NYXRyaXg0O3JldHVybiBmdW5jdGlvbihiKXtyZXR1cm4gYi5hcHBseU1hdHJpeDQoYS5nZXRJbnZlcnNlKHRoaXMubWF0cml4V29ybGQpKX19KCksXG5sb29rQXQ6ZnVuY3Rpb24oKXt2YXIgYT1uZXcgVEhSRUUuTWF0cml4NDtyZXR1cm4gZnVuY3Rpb24oYil7YS5sb29rQXQoYix0aGlzLnBvc2l0aW9uLHRoaXMudXApO3RoaXMucXVhdGVybmlvbi5zZXRGcm9tUm90YXRpb25NYXRyaXgoYSl9fSgpLGFkZDpmdW5jdGlvbihhKXtpZigxPGFyZ3VtZW50cy5sZW5ndGgpe2Zvcih2YXIgYj0wO2I8YXJndW1lbnRzLmxlbmd0aDtiKyspdGhpcy5hZGQoYXJndW1lbnRzW2JdKTtyZXR1cm4gdGhpc31pZihhPT09dGhpcylyZXR1cm4gY29uc29sZS5lcnJvcihcIlRIUkVFLk9iamVjdDNELmFkZDogb2JqZWN0IGNhbid0IGJlIGFkZGVkIGFzIGEgY2hpbGQgb2YgaXRzZWxmLlwiLGEpLHRoaXM7YSBpbnN0YW5jZW9mIFRIUkVFLk9iamVjdDNEPyhudWxsIT09YS5wYXJlbnQmJmEucGFyZW50LnJlbW92ZShhKSxhLnBhcmVudD10aGlzLGEuZGlzcGF0Y2hFdmVudCh7dHlwZTpcImFkZGVkXCJ9KSx0aGlzLmNoaWxkcmVuLnB1c2goYSkpOmNvbnNvbGUuZXJyb3IoXCJUSFJFRS5PYmplY3QzRC5hZGQ6IG9iamVjdCBub3QgYW4gaW5zdGFuY2Ugb2YgVEhSRUUuT2JqZWN0M0QuXCIsXG5hKTtyZXR1cm4gdGhpc30scmVtb3ZlOmZ1bmN0aW9uKGEpe2lmKDE8YXJndW1lbnRzLmxlbmd0aClmb3IodmFyIGI9MDtiPGFyZ3VtZW50cy5sZW5ndGg7YisrKXRoaXMucmVtb3ZlKGFyZ3VtZW50c1tiXSk7Yj10aGlzLmNoaWxkcmVuLmluZGV4T2YoYSk7LTEhPT1iJiYoYS5wYXJlbnQ9bnVsbCxhLmRpc3BhdGNoRXZlbnQoe3R5cGU6XCJyZW1vdmVkXCJ9KSx0aGlzLmNoaWxkcmVuLnNwbGljZShiLDEpKX0sZ2V0T2JqZWN0QnlJZDpmdW5jdGlvbihhKXtyZXR1cm4gdGhpcy5nZXRPYmplY3RCeVByb3BlcnR5KFwiaWRcIixhKX0sZ2V0T2JqZWN0QnlOYW1lOmZ1bmN0aW9uKGEpe3JldHVybiB0aGlzLmdldE9iamVjdEJ5UHJvcGVydHkoXCJuYW1lXCIsYSl9LGdldE9iamVjdEJ5UHJvcGVydHk6ZnVuY3Rpb24oYSxiKXtpZih0aGlzW2FdPT09YilyZXR1cm4gdGhpcztmb3IodmFyIGM9MCxkPXRoaXMuY2hpbGRyZW4ubGVuZ3RoO2M8ZDtjKyspe3ZhciBlPXRoaXMuY2hpbGRyZW5bY10uZ2V0T2JqZWN0QnlQcm9wZXJ0eShhLFxuYik7aWYodm9pZCAwIT09ZSlyZXR1cm4gZX19LGdldFdvcmxkUG9zaXRpb246ZnVuY3Rpb24oYSl7YT1hfHxuZXcgVEhSRUUuVmVjdG9yMzt0aGlzLnVwZGF0ZU1hdHJpeFdvcmxkKCEwKTtyZXR1cm4gYS5zZXRGcm9tTWF0cml4UG9zaXRpb24odGhpcy5tYXRyaXhXb3JsZCl9LGdldFdvcmxkUXVhdGVybmlvbjpmdW5jdGlvbigpe3ZhciBhPW5ldyBUSFJFRS5WZWN0b3IzLGI9bmV3IFRIUkVFLlZlY3RvcjM7cmV0dXJuIGZ1bmN0aW9uKGMpe2M9Y3x8bmV3IFRIUkVFLlF1YXRlcm5pb247dGhpcy51cGRhdGVNYXRyaXhXb3JsZCghMCk7dGhpcy5tYXRyaXhXb3JsZC5kZWNvbXBvc2UoYSxjLGIpO3JldHVybiBjfX0oKSxnZXRXb3JsZFJvdGF0aW9uOmZ1bmN0aW9uKCl7dmFyIGE9bmV3IFRIUkVFLlF1YXRlcm5pb247cmV0dXJuIGZ1bmN0aW9uKGIpe2I9Ynx8bmV3IFRIUkVFLkV1bGVyO3RoaXMuZ2V0V29ybGRRdWF0ZXJuaW9uKGEpO3JldHVybiBiLnNldEZyb21RdWF0ZXJuaW9uKGEsXG50aGlzLnJvdGF0aW9uLm9yZGVyLCExKX19KCksZ2V0V29ybGRTY2FsZTpmdW5jdGlvbigpe3ZhciBhPW5ldyBUSFJFRS5WZWN0b3IzLGI9bmV3IFRIUkVFLlF1YXRlcm5pb247cmV0dXJuIGZ1bmN0aW9uKGMpe2M9Y3x8bmV3IFRIUkVFLlZlY3RvcjM7dGhpcy51cGRhdGVNYXRyaXhXb3JsZCghMCk7dGhpcy5tYXRyaXhXb3JsZC5kZWNvbXBvc2UoYSxiLGMpO3JldHVybiBjfX0oKSxnZXRXb3JsZERpcmVjdGlvbjpmdW5jdGlvbigpe3ZhciBhPW5ldyBUSFJFRS5RdWF0ZXJuaW9uO3JldHVybiBmdW5jdGlvbihiKXtiPWJ8fG5ldyBUSFJFRS5WZWN0b3IzO3RoaXMuZ2V0V29ybGRRdWF0ZXJuaW9uKGEpO3JldHVybiBiLnNldCgwLDAsMSkuYXBwbHlRdWF0ZXJuaW9uKGEpfX0oKSxyYXljYXN0OmZ1bmN0aW9uKCl7fSx0cmF2ZXJzZTpmdW5jdGlvbihhKXthKHRoaXMpO2Zvcih2YXIgYj10aGlzLmNoaWxkcmVuLGM9MCxkPWIubGVuZ3RoO2M8ZDtjKyspYltjXS50cmF2ZXJzZShhKX0sdHJhdmVyc2VWaXNpYmxlOmZ1bmN0aW9uKGEpe2lmKCExIT09XG50aGlzLnZpc2libGUpe2EodGhpcyk7Zm9yKHZhciBiPXRoaXMuY2hpbGRyZW4sYz0wLGQ9Yi5sZW5ndGg7YzxkO2MrKyliW2NdLnRyYXZlcnNlVmlzaWJsZShhKX19LHRyYXZlcnNlQW5jZXN0b3JzOmZ1bmN0aW9uKGEpe3ZhciBiPXRoaXMucGFyZW50O251bGwhPT1iJiYoYShiKSxiLnRyYXZlcnNlQW5jZXN0b3JzKGEpKX0sdXBkYXRlTWF0cml4OmZ1bmN0aW9uKCl7dGhpcy5tYXRyaXguY29tcG9zZSh0aGlzLnBvc2l0aW9uLHRoaXMucXVhdGVybmlvbix0aGlzLnNjYWxlKTt0aGlzLm1hdHJpeFdvcmxkTmVlZHNVcGRhdGU9ITB9LHVwZGF0ZU1hdHJpeFdvcmxkOmZ1bmN0aW9uKGEpeyEwPT09dGhpcy5tYXRyaXhBdXRvVXBkYXRlJiZ0aGlzLnVwZGF0ZU1hdHJpeCgpO2lmKCEwPT09dGhpcy5tYXRyaXhXb3JsZE5lZWRzVXBkYXRlfHwhMD09PWEpbnVsbD09PXRoaXMucGFyZW50P3RoaXMubWF0cml4V29ybGQuY29weSh0aGlzLm1hdHJpeCk6dGhpcy5tYXRyaXhXb3JsZC5tdWx0aXBseU1hdHJpY2VzKHRoaXMucGFyZW50Lm1hdHJpeFdvcmxkLFxudGhpcy5tYXRyaXgpLHRoaXMubWF0cml4V29ybGROZWVkc1VwZGF0ZT0hMSxhPSEwO2Zvcih2YXIgYj0wLGM9dGhpcy5jaGlsZHJlbi5sZW5ndGg7YjxjO2IrKyl0aGlzLmNoaWxkcmVuW2JdLnVwZGF0ZU1hdHJpeFdvcmxkKGEpfSx0b0pTT046ZnVuY3Rpb24oYSl7ZnVuY3Rpb24gYihhKXt2YXIgYj1bXSxjO2ZvcihjIGluIGEpe3ZhciBkPWFbY107ZGVsZXRlIGQubWV0YWRhdGE7Yi5wdXNoKGQpfXJldHVybiBifXZhciBjPXZvaWQgMD09PWF8fFwiXCI9PT1hLGQ9e307YyYmKGE9e2dlb21ldHJpZXM6e30sbWF0ZXJpYWxzOnt9LHRleHR1cmVzOnt9LGltYWdlczp7fX0sZC5tZXRhZGF0YT17dmVyc2lvbjo0LjQsdHlwZTpcIk9iamVjdFwiLGdlbmVyYXRvcjpcIk9iamVjdDNELnRvSlNPTlwifSk7dmFyIGU9e307ZS51dWlkPXRoaXMudXVpZDtlLnR5cGU9dGhpcy50eXBlO1wiXCIhPT10aGlzLm5hbWUmJihlLm5hbWU9dGhpcy5uYW1lKTtcInt9XCIhPT1KU09OLnN0cmluZ2lmeSh0aGlzLnVzZXJEYXRhKSYmXG4oZS51c2VyRGF0YT10aGlzLnVzZXJEYXRhKTshMD09PXRoaXMuY2FzdFNoYWRvdyYmKGUuY2FzdFNoYWRvdz0hMCk7ITA9PT10aGlzLnJlY2VpdmVTaGFkb3cmJihlLnJlY2VpdmVTaGFkb3c9ITApOyExPT09dGhpcy52aXNpYmxlJiYoZS52aXNpYmxlPSExKTtlLm1hdHJpeD10aGlzLm1hdHJpeC50b0FycmF5KCk7dm9pZCAwIT09dGhpcy5nZW9tZXRyeSYmKHZvaWQgMD09PWEuZ2VvbWV0cmllc1t0aGlzLmdlb21ldHJ5LnV1aWRdJiYoYS5nZW9tZXRyaWVzW3RoaXMuZ2VvbWV0cnkudXVpZF09dGhpcy5nZW9tZXRyeS50b0pTT04oYSkpLGUuZ2VvbWV0cnk9dGhpcy5nZW9tZXRyeS51dWlkKTt2b2lkIDAhPT10aGlzLm1hdGVyaWFsJiYodm9pZCAwPT09YS5tYXRlcmlhbHNbdGhpcy5tYXRlcmlhbC51dWlkXSYmKGEubWF0ZXJpYWxzW3RoaXMubWF0ZXJpYWwudXVpZF09dGhpcy5tYXRlcmlhbC50b0pTT04oYSkpLGUubWF0ZXJpYWw9dGhpcy5tYXRlcmlhbC51dWlkKTtpZigwPHRoaXMuY2hpbGRyZW4ubGVuZ3RoKXtlLmNoaWxkcmVuPVxuW107Zm9yKHZhciBmPTA7Zjx0aGlzLmNoaWxkcmVuLmxlbmd0aDtmKyspZS5jaGlsZHJlbi5wdXNoKHRoaXMuY2hpbGRyZW5bZl0udG9KU09OKGEpLm9iamVjdCl9aWYoYyl7dmFyIGM9YihhLmdlb21ldHJpZXMpLGY9YihhLm1hdGVyaWFscyksZz1iKGEudGV4dHVyZXMpO2E9YihhLmltYWdlcyk7MDxjLmxlbmd0aCYmKGQuZ2VvbWV0cmllcz1jKTswPGYubGVuZ3RoJiYoZC5tYXRlcmlhbHM9Zik7MDxnLmxlbmd0aCYmKGQudGV4dHVyZXM9Zyk7MDxhLmxlbmd0aCYmKGQuaW1hZ2VzPWEpfWQub2JqZWN0PWU7cmV0dXJuIGR9LGNsb25lOmZ1bmN0aW9uKGEpe3JldHVybihuZXcgdGhpcy5jb25zdHJ1Y3RvcikuY29weSh0aGlzLGEpfSxjb3B5OmZ1bmN0aW9uKGEsYil7dm9pZCAwPT09YiYmKGI9ITApO3RoaXMubmFtZT1hLm5hbWU7dGhpcy51cC5jb3B5KGEudXApO3RoaXMucG9zaXRpb24uY29weShhLnBvc2l0aW9uKTt0aGlzLnF1YXRlcm5pb24uY29weShhLnF1YXRlcm5pb24pO3RoaXMuc2NhbGUuY29weShhLnNjYWxlKTtcbnRoaXMubWF0cml4LmNvcHkoYS5tYXRyaXgpO3RoaXMubWF0cml4V29ybGQuY29weShhLm1hdHJpeFdvcmxkKTt0aGlzLm1hdHJpeEF1dG9VcGRhdGU9YS5tYXRyaXhBdXRvVXBkYXRlO3RoaXMubWF0cml4V29ybGROZWVkc1VwZGF0ZT1hLm1hdHJpeFdvcmxkTmVlZHNVcGRhdGU7dGhpcy52aXNpYmxlPWEudmlzaWJsZTt0aGlzLmNhc3RTaGFkb3c9YS5jYXN0U2hhZG93O3RoaXMucmVjZWl2ZVNoYWRvdz1hLnJlY2VpdmVTaGFkb3c7dGhpcy5mcnVzdHVtQ3VsbGVkPWEuZnJ1c3R1bUN1bGxlZDt0aGlzLnJlbmRlck9yZGVyPWEucmVuZGVyT3JkZXI7dGhpcy51c2VyRGF0YT1KU09OLnBhcnNlKEpTT04uc3RyaW5naWZ5KGEudXNlckRhdGEpKTtpZighMD09PWIpZm9yKHZhciBjPTA7YzxhLmNoaWxkcmVuLmxlbmd0aDtjKyspdGhpcy5hZGQoYS5jaGlsZHJlbltjXS5jbG9uZSgpKTtyZXR1cm4gdGhpc319KTtUSFJFRS5PYmplY3QzRElkQ291bnQ9MDtcblRIUkVFLkZhY2UzPWZ1bmN0aW9uKGEsYixjLGQsZSxmKXt0aGlzLmE9YTt0aGlzLmI9Yjt0aGlzLmM9Yzt0aGlzLm5vcm1hbD1kIGluc3RhbmNlb2YgVEhSRUUuVmVjdG9yMz9kOm5ldyBUSFJFRS5WZWN0b3IzO3RoaXMudmVydGV4Tm9ybWFscz1BcnJheS5pc0FycmF5KGQpP2Q6W107dGhpcy5jb2xvcj1lIGluc3RhbmNlb2YgVEhSRUUuQ29sb3I/ZTpuZXcgVEhSRUUuQ29sb3I7dGhpcy52ZXJ0ZXhDb2xvcnM9QXJyYXkuaXNBcnJheShlKT9lOltdO3RoaXMubWF0ZXJpYWxJbmRleD12b2lkIDAhPT1mP2Y6MH07XG5USFJFRS5GYWNlMy5wcm90b3R5cGU9e2NvbnN0cnVjdG9yOlRIUkVFLkZhY2UzLGNsb25lOmZ1bmN0aW9uKCl7cmV0dXJuKG5ldyB0aGlzLmNvbnN0cnVjdG9yKS5jb3B5KHRoaXMpfSxjb3B5OmZ1bmN0aW9uKGEpe3RoaXMuYT1hLmE7dGhpcy5iPWEuYjt0aGlzLmM9YS5jO3RoaXMubm9ybWFsLmNvcHkoYS5ub3JtYWwpO3RoaXMuY29sb3IuY29weShhLmNvbG9yKTt0aGlzLm1hdGVyaWFsSW5kZXg9YS5tYXRlcmlhbEluZGV4O2Zvcih2YXIgYj0wLGM9YS52ZXJ0ZXhOb3JtYWxzLmxlbmd0aDtiPGM7YisrKXRoaXMudmVydGV4Tm9ybWFsc1tiXT1hLnZlcnRleE5vcm1hbHNbYl0uY2xvbmUoKTtiPTA7Zm9yKGM9YS52ZXJ0ZXhDb2xvcnMubGVuZ3RoO2I8YztiKyspdGhpcy52ZXJ0ZXhDb2xvcnNbYl09YS52ZXJ0ZXhDb2xvcnNbYl0uY2xvbmUoKTtyZXR1cm4gdGhpc319O1xuVEhSRUUuQnVmZmVyQXR0cmlidXRlPWZ1bmN0aW9uKGEsYixjKXt0aGlzLnV1aWQ9VEhSRUUuTWF0aC5nZW5lcmF0ZVVVSUQoKTt0aGlzLmFycmF5PWE7dGhpcy5pdGVtU2l6ZT1iO3RoaXMuZHluYW1pYz0hMTt0aGlzLnVwZGF0ZVJhbmdlPXtvZmZzZXQ6MCxjb3VudDotMX07dGhpcy52ZXJzaW9uPTA7dGhpcy5ub3JtYWxpemVkPSEwPT09Y307XG5USFJFRS5CdWZmZXJBdHRyaWJ1dGUucHJvdG90eXBlPXtjb25zdHJ1Y3RvcjpUSFJFRS5CdWZmZXJBdHRyaWJ1dGUsZ2V0IGNvdW50KCl7cmV0dXJuIHRoaXMuYXJyYXkubGVuZ3RoL3RoaXMuaXRlbVNpemV9LHNldCBuZWVkc1VwZGF0ZShhKXshMD09PWEmJnRoaXMudmVyc2lvbisrfSxzZXREeW5hbWljOmZ1bmN0aW9uKGEpe3RoaXMuZHluYW1pYz1hO3JldHVybiB0aGlzfSxjb3B5OmZ1bmN0aW9uKGEpe3RoaXMuYXJyYXk9bmV3IGEuYXJyYXkuY29uc3RydWN0b3IoYS5hcnJheSk7dGhpcy5pdGVtU2l6ZT1hLml0ZW1TaXplO3RoaXMuZHluYW1pYz1hLmR5bmFtaWM7cmV0dXJuIHRoaXN9LGNvcHlBdDpmdW5jdGlvbihhLGIsYyl7YSo9dGhpcy5pdGVtU2l6ZTtjKj1iLml0ZW1TaXplO2Zvcih2YXIgZD0wLGU9dGhpcy5pdGVtU2l6ZTtkPGU7ZCsrKXRoaXMuYXJyYXlbYStkXT1iLmFycmF5W2MrZF07cmV0dXJuIHRoaXN9LGNvcHlBcnJheTpmdW5jdGlvbihhKXt0aGlzLmFycmF5LnNldChhKTtcbnJldHVybiB0aGlzfSxjb3B5Q29sb3JzQXJyYXk6ZnVuY3Rpb24oYSl7Zm9yKHZhciBiPXRoaXMuYXJyYXksYz0wLGQ9MCxlPWEubGVuZ3RoO2Q8ZTtkKyspe3ZhciBmPWFbZF07dm9pZCAwPT09ZiYmKGNvbnNvbGUud2FybihcIlRIUkVFLkJ1ZmZlckF0dHJpYnV0ZS5jb3B5Q29sb3JzQXJyYXkoKTogY29sb3IgaXMgdW5kZWZpbmVkXCIsZCksZj1uZXcgVEhSRUUuQ29sb3IpO2JbYysrXT1mLnI7YltjKytdPWYuZztiW2MrK109Zi5ifXJldHVybiB0aGlzfSxjb3B5SW5kaWNlc0FycmF5OmZ1bmN0aW9uKGEpe2Zvcih2YXIgYj10aGlzLmFycmF5LGM9MCxkPTAsZT1hLmxlbmd0aDtkPGU7ZCsrKXt2YXIgZj1hW2RdO2JbYysrXT1mLmE7YltjKytdPWYuYjtiW2MrK109Zi5jfXJldHVybiB0aGlzfSxjb3B5VmVjdG9yMnNBcnJheTpmdW5jdGlvbihhKXtmb3IodmFyIGI9dGhpcy5hcnJheSxjPTAsZD0wLGU9YS5sZW5ndGg7ZDxlO2QrKyl7dmFyIGY9YVtkXTt2b2lkIDA9PT1mJiYoY29uc29sZS53YXJuKFwiVEhSRUUuQnVmZmVyQXR0cmlidXRlLmNvcHlWZWN0b3Iyc0FycmF5KCk6IHZlY3RvciBpcyB1bmRlZmluZWRcIixcbmQpLGY9bmV3IFRIUkVFLlZlY3RvcjIpO2JbYysrXT1mLng7YltjKytdPWYueX1yZXR1cm4gdGhpc30sY29weVZlY3RvcjNzQXJyYXk6ZnVuY3Rpb24oYSl7Zm9yKHZhciBiPXRoaXMuYXJyYXksYz0wLGQ9MCxlPWEubGVuZ3RoO2Q8ZTtkKyspe3ZhciBmPWFbZF07dm9pZCAwPT09ZiYmKGNvbnNvbGUud2FybihcIlRIUkVFLkJ1ZmZlckF0dHJpYnV0ZS5jb3B5VmVjdG9yM3NBcnJheSgpOiB2ZWN0b3IgaXMgdW5kZWZpbmVkXCIsZCksZj1uZXcgVEhSRUUuVmVjdG9yMyk7YltjKytdPWYueDtiW2MrK109Zi55O2JbYysrXT1mLnp9cmV0dXJuIHRoaXN9LGNvcHlWZWN0b3I0c0FycmF5OmZ1bmN0aW9uKGEpe2Zvcih2YXIgYj10aGlzLmFycmF5LGM9MCxkPTAsZT1hLmxlbmd0aDtkPGU7ZCsrKXt2YXIgZj1hW2RdO3ZvaWQgMD09PWYmJihjb25zb2xlLndhcm4oXCJUSFJFRS5CdWZmZXJBdHRyaWJ1dGUuY29weVZlY3RvcjRzQXJyYXkoKTogdmVjdG9yIGlzIHVuZGVmaW5lZFwiLGQpLGY9bmV3IFRIUkVFLlZlY3RvcjQpO1xuYltjKytdPWYueDtiW2MrK109Zi55O2JbYysrXT1mLno7YltjKytdPWYud31yZXR1cm4gdGhpc30sc2V0OmZ1bmN0aW9uKGEsYil7dm9pZCAwPT09YiYmKGI9MCk7dGhpcy5hcnJheS5zZXQoYSxiKTtyZXR1cm4gdGhpc30sZ2V0WDpmdW5jdGlvbihhKXtyZXR1cm4gdGhpcy5hcnJheVthKnRoaXMuaXRlbVNpemVdfSxzZXRYOmZ1bmN0aW9uKGEsYil7dGhpcy5hcnJheVthKnRoaXMuaXRlbVNpemVdPWI7cmV0dXJuIHRoaXN9LGdldFk6ZnVuY3Rpb24oYSl7cmV0dXJuIHRoaXMuYXJyYXlbYSp0aGlzLml0ZW1TaXplKzFdfSxzZXRZOmZ1bmN0aW9uKGEsYil7dGhpcy5hcnJheVthKnRoaXMuaXRlbVNpemUrMV09YjtyZXR1cm4gdGhpc30sZ2V0WjpmdW5jdGlvbihhKXtyZXR1cm4gdGhpcy5hcnJheVthKnRoaXMuaXRlbVNpemUrMl19LHNldFo6ZnVuY3Rpb24oYSxiKXt0aGlzLmFycmF5W2EqdGhpcy5pdGVtU2l6ZSsyXT1iO3JldHVybiB0aGlzfSxnZXRXOmZ1bmN0aW9uKGEpe3JldHVybiB0aGlzLmFycmF5W2EqXG50aGlzLml0ZW1TaXplKzNdfSxzZXRXOmZ1bmN0aW9uKGEsYil7dGhpcy5hcnJheVthKnRoaXMuaXRlbVNpemUrM109YjtyZXR1cm4gdGhpc30sc2V0WFk6ZnVuY3Rpb24oYSxiLGMpe2EqPXRoaXMuaXRlbVNpemU7dGhpcy5hcnJheVthKzBdPWI7dGhpcy5hcnJheVthKzFdPWM7cmV0dXJuIHRoaXN9LHNldFhZWjpmdW5jdGlvbihhLGIsYyxkKXthKj10aGlzLml0ZW1TaXplO3RoaXMuYXJyYXlbYSswXT1iO3RoaXMuYXJyYXlbYSsxXT1jO3RoaXMuYXJyYXlbYSsyXT1kO3JldHVybiB0aGlzfSxzZXRYWVpXOmZ1bmN0aW9uKGEsYixjLGQsZSl7YSo9dGhpcy5pdGVtU2l6ZTt0aGlzLmFycmF5W2ErMF09Yjt0aGlzLmFycmF5W2ErMV09Yzt0aGlzLmFycmF5W2ErMl09ZDt0aGlzLmFycmF5W2ErM109ZTtyZXR1cm4gdGhpc30sY2xvbmU6ZnVuY3Rpb24oKXtyZXR1cm4obmV3IHRoaXMuY29uc3RydWN0b3IpLmNvcHkodGhpcyl9fTtcblRIUkVFLkludDhBdHRyaWJ1dGU9ZnVuY3Rpb24oYSxiKXtyZXR1cm4gbmV3IFRIUkVFLkJ1ZmZlckF0dHJpYnV0ZShuZXcgSW50OEFycmF5KGEpLGIpfTtUSFJFRS5VaW50OEF0dHJpYnV0ZT1mdW5jdGlvbihhLGIpe3JldHVybiBuZXcgVEhSRUUuQnVmZmVyQXR0cmlidXRlKG5ldyBVaW50OEFycmF5KGEpLGIpfTtUSFJFRS5VaW50OENsYW1wZWRBdHRyaWJ1dGU9ZnVuY3Rpb24oYSxiKXtyZXR1cm4gbmV3IFRIUkVFLkJ1ZmZlckF0dHJpYnV0ZShuZXcgVWludDhDbGFtcGVkQXJyYXkoYSksYil9O1RIUkVFLkludDE2QXR0cmlidXRlPWZ1bmN0aW9uKGEsYil7cmV0dXJuIG5ldyBUSFJFRS5CdWZmZXJBdHRyaWJ1dGUobmV3IEludDE2QXJyYXkoYSksYil9O1RIUkVFLlVpbnQxNkF0dHJpYnV0ZT1mdW5jdGlvbihhLGIpe3JldHVybiBuZXcgVEhSRUUuQnVmZmVyQXR0cmlidXRlKG5ldyBVaW50MTZBcnJheShhKSxiKX07XG5USFJFRS5JbnQzMkF0dHJpYnV0ZT1mdW5jdGlvbihhLGIpe3JldHVybiBuZXcgVEhSRUUuQnVmZmVyQXR0cmlidXRlKG5ldyBJbnQzMkFycmF5KGEpLGIpfTtUSFJFRS5VaW50MzJBdHRyaWJ1dGU9ZnVuY3Rpb24oYSxiKXtyZXR1cm4gbmV3IFRIUkVFLkJ1ZmZlckF0dHJpYnV0ZShuZXcgVWludDMyQXJyYXkoYSksYil9O1RIUkVFLkZsb2F0MzJBdHRyaWJ1dGU9ZnVuY3Rpb24oYSxiKXtyZXR1cm4gbmV3IFRIUkVFLkJ1ZmZlckF0dHJpYnV0ZShuZXcgRmxvYXQzMkFycmF5KGEpLGIpfTtUSFJFRS5GbG9hdDY0QXR0cmlidXRlPWZ1bmN0aW9uKGEsYil7cmV0dXJuIG5ldyBUSFJFRS5CdWZmZXJBdHRyaWJ1dGUobmV3IEZsb2F0NjRBcnJheShhKSxiKX07XG5USFJFRS5EeW5hbWljQnVmZmVyQXR0cmlidXRlPWZ1bmN0aW9uKGEsYil7Y29uc29sZS53YXJuKFwiVEhSRUUuRHluYW1pY0J1ZmZlckF0dHJpYnV0ZSBoYXMgYmVlbiByZW1vdmVkLiBVc2UgbmV3IFRIUkVFLkJ1ZmZlckF0dHJpYnV0ZSgpLnNldER5bmFtaWMoIHRydWUgKSBpbnN0ZWFkLlwiKTtyZXR1cm4obmV3IFRIUkVFLkJ1ZmZlckF0dHJpYnV0ZShhLGIpKS5zZXREeW5hbWljKCEwKX07VEhSRUUuSW5zdGFuY2VkQnVmZmVyQXR0cmlidXRlPWZ1bmN0aW9uKGEsYixjKXtUSFJFRS5CdWZmZXJBdHRyaWJ1dGUuY2FsbCh0aGlzLGEsYik7dGhpcy5tZXNoUGVyQXR0cmlidXRlPWN8fDF9O1RIUkVFLkluc3RhbmNlZEJ1ZmZlckF0dHJpYnV0ZS5wcm90b3R5cGU9T2JqZWN0LmNyZWF0ZShUSFJFRS5CdWZmZXJBdHRyaWJ1dGUucHJvdG90eXBlKTtUSFJFRS5JbnN0YW5jZWRCdWZmZXJBdHRyaWJ1dGUucHJvdG90eXBlLmNvbnN0cnVjdG9yPVRIUkVFLkluc3RhbmNlZEJ1ZmZlckF0dHJpYnV0ZTtcblRIUkVFLkluc3RhbmNlZEJ1ZmZlckF0dHJpYnV0ZS5wcm90b3R5cGUuY29weT1mdW5jdGlvbihhKXtUSFJFRS5CdWZmZXJBdHRyaWJ1dGUucHJvdG90eXBlLmNvcHkuY2FsbCh0aGlzLGEpO3RoaXMubWVzaFBlckF0dHJpYnV0ZT1hLm1lc2hQZXJBdHRyaWJ1dGU7cmV0dXJuIHRoaXN9O1RIUkVFLkludGVybGVhdmVkQnVmZmVyPWZ1bmN0aW9uKGEsYil7dGhpcy51dWlkPVRIUkVFLk1hdGguZ2VuZXJhdGVVVUlEKCk7dGhpcy5hcnJheT1hO3RoaXMuc3RyaWRlPWI7dGhpcy5keW5hbWljPSExO3RoaXMudXBkYXRlUmFuZ2U9e29mZnNldDowLGNvdW50Oi0xfTt0aGlzLnZlcnNpb249MH07XG5USFJFRS5JbnRlcmxlYXZlZEJ1ZmZlci5wcm90b3R5cGU9e2NvbnN0cnVjdG9yOlRIUkVFLkludGVybGVhdmVkQnVmZmVyLGdldCBsZW5ndGgoKXtyZXR1cm4gdGhpcy5hcnJheS5sZW5ndGh9LGdldCBjb3VudCgpe3JldHVybiB0aGlzLmFycmF5Lmxlbmd0aC90aGlzLnN0cmlkZX0sc2V0IG5lZWRzVXBkYXRlKGEpeyEwPT09YSYmdGhpcy52ZXJzaW9uKyt9LHNldER5bmFtaWM6ZnVuY3Rpb24oYSl7dGhpcy5keW5hbWljPWE7cmV0dXJuIHRoaXN9LGNvcHk6ZnVuY3Rpb24oYSl7dGhpcy5hcnJheT1uZXcgYS5hcnJheS5jb25zdHJ1Y3RvcihhLmFycmF5KTt0aGlzLnN0cmlkZT1hLnN0cmlkZTt0aGlzLmR5bmFtaWM9YS5keW5hbWljO3JldHVybiB0aGlzfSxjb3B5QXQ6ZnVuY3Rpb24oYSxiLGMpe2EqPXRoaXMuc3RyaWRlO2MqPWIuc3RyaWRlO2Zvcih2YXIgZD0wLGU9dGhpcy5zdHJpZGU7ZDxlO2QrKyl0aGlzLmFycmF5W2ErZF09Yi5hcnJheVtjK2RdO3JldHVybiB0aGlzfSxzZXQ6ZnVuY3Rpb24oYSxcbmIpe3ZvaWQgMD09PWImJihiPTApO3RoaXMuYXJyYXkuc2V0KGEsYik7cmV0dXJuIHRoaXN9LGNsb25lOmZ1bmN0aW9uKCl7cmV0dXJuKG5ldyB0aGlzLmNvbnN0cnVjdG9yKS5jb3B5KHRoaXMpfX07VEhSRUUuSW5zdGFuY2VkSW50ZXJsZWF2ZWRCdWZmZXI9ZnVuY3Rpb24oYSxiLGMpe1RIUkVFLkludGVybGVhdmVkQnVmZmVyLmNhbGwodGhpcyxhLGIpO3RoaXMubWVzaFBlckF0dHJpYnV0ZT1jfHwxfTtUSFJFRS5JbnN0YW5jZWRJbnRlcmxlYXZlZEJ1ZmZlci5wcm90b3R5cGU9T2JqZWN0LmNyZWF0ZShUSFJFRS5JbnRlcmxlYXZlZEJ1ZmZlci5wcm90b3R5cGUpO1RIUkVFLkluc3RhbmNlZEludGVybGVhdmVkQnVmZmVyLnByb3RvdHlwZS5jb25zdHJ1Y3Rvcj1USFJFRS5JbnN0YW5jZWRJbnRlcmxlYXZlZEJ1ZmZlcjtcblRIUkVFLkluc3RhbmNlZEludGVybGVhdmVkQnVmZmVyLnByb3RvdHlwZS5jb3B5PWZ1bmN0aW9uKGEpe1RIUkVFLkludGVybGVhdmVkQnVmZmVyLnByb3RvdHlwZS5jb3B5LmNhbGwodGhpcyxhKTt0aGlzLm1lc2hQZXJBdHRyaWJ1dGU9YS5tZXNoUGVyQXR0cmlidXRlO3JldHVybiB0aGlzfTtUSFJFRS5JbnRlcmxlYXZlZEJ1ZmZlckF0dHJpYnV0ZT1mdW5jdGlvbihhLGIsYyxkKXt0aGlzLnV1aWQ9VEhSRUUuTWF0aC5nZW5lcmF0ZVVVSUQoKTt0aGlzLmRhdGE9YTt0aGlzLml0ZW1TaXplPWI7dGhpcy5vZmZzZXQ9Yzt0aGlzLm5vcm1hbGl6ZWQ9ITA9PT1kfTtcblRIUkVFLkludGVybGVhdmVkQnVmZmVyQXR0cmlidXRlLnByb3RvdHlwZT17Y29uc3RydWN0b3I6VEhSRUUuSW50ZXJsZWF2ZWRCdWZmZXJBdHRyaWJ1dGUsZ2V0IGxlbmd0aCgpe2NvbnNvbGUud2FybihcIlRIUkVFLkJ1ZmZlckF0dHJpYnV0ZTogLmxlbmd0aCBoYXMgYmVlbiBkZXByZWNhdGVkLiBQbGVhc2UgdXNlIC5jb3VudC5cIik7cmV0dXJuIHRoaXMuYXJyYXkubGVuZ3RofSxnZXQgY291bnQoKXtyZXR1cm4gdGhpcy5kYXRhLmNvdW50fSxnZXQgYXJyYXkoKXtyZXR1cm4gdGhpcy5kYXRhLmFycmF5fSxzZXRYOmZ1bmN0aW9uKGEsYil7dGhpcy5kYXRhLmFycmF5W2EqdGhpcy5kYXRhLnN0cmlkZSt0aGlzLm9mZnNldF09YjtyZXR1cm4gdGhpc30sc2V0WTpmdW5jdGlvbihhLGIpe3RoaXMuZGF0YS5hcnJheVthKnRoaXMuZGF0YS5zdHJpZGUrdGhpcy5vZmZzZXQrMV09YjtyZXR1cm4gdGhpc30sc2V0WjpmdW5jdGlvbihhLGIpe3RoaXMuZGF0YS5hcnJheVthKnRoaXMuZGF0YS5zdHJpZGUrXG50aGlzLm9mZnNldCsyXT1iO3JldHVybiB0aGlzfSxzZXRXOmZ1bmN0aW9uKGEsYil7dGhpcy5kYXRhLmFycmF5W2EqdGhpcy5kYXRhLnN0cmlkZSt0aGlzLm9mZnNldCszXT1iO3JldHVybiB0aGlzfSxnZXRYOmZ1bmN0aW9uKGEpe3JldHVybiB0aGlzLmRhdGEuYXJyYXlbYSp0aGlzLmRhdGEuc3RyaWRlK3RoaXMub2Zmc2V0XX0sZ2V0WTpmdW5jdGlvbihhKXtyZXR1cm4gdGhpcy5kYXRhLmFycmF5W2EqdGhpcy5kYXRhLnN0cmlkZSt0aGlzLm9mZnNldCsxXX0sZ2V0WjpmdW5jdGlvbihhKXtyZXR1cm4gdGhpcy5kYXRhLmFycmF5W2EqdGhpcy5kYXRhLnN0cmlkZSt0aGlzLm9mZnNldCsyXX0sZ2V0VzpmdW5jdGlvbihhKXtyZXR1cm4gdGhpcy5kYXRhLmFycmF5W2EqdGhpcy5kYXRhLnN0cmlkZSt0aGlzLm9mZnNldCszXX0sc2V0WFk6ZnVuY3Rpb24oYSxiLGMpe2E9YSp0aGlzLmRhdGEuc3RyaWRlK3RoaXMub2Zmc2V0O3RoaXMuZGF0YS5hcnJheVthKzBdPWI7dGhpcy5kYXRhLmFycmF5W2ErXG4xXT1jO3JldHVybiB0aGlzfSxzZXRYWVo6ZnVuY3Rpb24oYSxiLGMsZCl7YT1hKnRoaXMuZGF0YS5zdHJpZGUrdGhpcy5vZmZzZXQ7dGhpcy5kYXRhLmFycmF5W2ErMF09Yjt0aGlzLmRhdGEuYXJyYXlbYSsxXT1jO3RoaXMuZGF0YS5hcnJheVthKzJdPWQ7cmV0dXJuIHRoaXN9LHNldFhZWlc6ZnVuY3Rpb24oYSxiLGMsZCxlKXthPWEqdGhpcy5kYXRhLnN0cmlkZSt0aGlzLm9mZnNldDt0aGlzLmRhdGEuYXJyYXlbYSswXT1iO3RoaXMuZGF0YS5hcnJheVthKzFdPWM7dGhpcy5kYXRhLmFycmF5W2ErMl09ZDt0aGlzLmRhdGEuYXJyYXlbYSszXT1lO3JldHVybiB0aGlzfX07XG5USFJFRS5HZW9tZXRyeT1mdW5jdGlvbigpe09iamVjdC5kZWZpbmVQcm9wZXJ0eSh0aGlzLFwiaWRcIix7dmFsdWU6VEhSRUUuR2VvbWV0cnlJZENvdW50Kyt9KTt0aGlzLnV1aWQ9VEhSRUUuTWF0aC5nZW5lcmF0ZVVVSUQoKTt0aGlzLm5hbWU9XCJcIjt0aGlzLnR5cGU9XCJHZW9tZXRyeVwiO3RoaXMudmVydGljZXM9W107dGhpcy5jb2xvcnM9W107dGhpcy5mYWNlcz1bXTt0aGlzLmZhY2VWZXJ0ZXhVdnM9W1tdXTt0aGlzLm1vcnBoVGFyZ2V0cz1bXTt0aGlzLm1vcnBoTm9ybWFscz1bXTt0aGlzLnNraW5XZWlnaHRzPVtdO3RoaXMuc2tpbkluZGljZXM9W107dGhpcy5saW5lRGlzdGFuY2VzPVtdO3RoaXMuYm91bmRpbmdTcGhlcmU9dGhpcy5ib3VuZGluZ0JveD1udWxsO3RoaXMuZ3JvdXBzTmVlZFVwZGF0ZT10aGlzLmxpbmVEaXN0YW5jZXNOZWVkVXBkYXRlPXRoaXMuY29sb3JzTmVlZFVwZGF0ZT10aGlzLm5vcm1hbHNOZWVkVXBkYXRlPXRoaXMudXZzTmVlZFVwZGF0ZT10aGlzLnZlcnRpY2VzTmVlZFVwZGF0ZT1cbnRoaXMuZWxlbWVudHNOZWVkVXBkYXRlPSExfTtcbk9iamVjdC5hc3NpZ24oVEhSRUUuR2VvbWV0cnkucHJvdG90eXBlLFRIUkVFLkV2ZW50RGlzcGF0Y2hlci5wcm90b3R5cGUse2FwcGx5TWF0cml4OmZ1bmN0aW9uKGEpe2Zvcih2YXIgYj0obmV3IFRIUkVFLk1hdHJpeDMpLmdldE5vcm1hbE1hdHJpeChhKSxjPTAsZD10aGlzLnZlcnRpY2VzLmxlbmd0aDtjPGQ7YysrKXRoaXMudmVydGljZXNbY10uYXBwbHlNYXRyaXg0KGEpO2M9MDtmb3IoZD10aGlzLmZhY2VzLmxlbmd0aDtjPGQ7YysrKXthPXRoaXMuZmFjZXNbY107YS5ub3JtYWwuYXBwbHlNYXRyaXgzKGIpLm5vcm1hbGl6ZSgpO2Zvcih2YXIgZT0wLGY9YS52ZXJ0ZXhOb3JtYWxzLmxlbmd0aDtlPGY7ZSsrKWEudmVydGV4Tm9ybWFsc1tlXS5hcHBseU1hdHJpeDMoYikubm9ybWFsaXplKCl9bnVsbCE9PXRoaXMuYm91bmRpbmdCb3gmJnRoaXMuY29tcHV0ZUJvdW5kaW5nQm94KCk7bnVsbCE9PXRoaXMuYm91bmRpbmdTcGhlcmUmJnRoaXMuY29tcHV0ZUJvdW5kaW5nU3BoZXJlKCk7XG50aGlzLm5vcm1hbHNOZWVkVXBkYXRlPXRoaXMudmVydGljZXNOZWVkVXBkYXRlPSEwO3JldHVybiB0aGlzfSxyb3RhdGVYOmZ1bmN0aW9uKCl7dmFyIGE7cmV0dXJuIGZ1bmN0aW9uKGIpe3ZvaWQgMD09PWEmJihhPW5ldyBUSFJFRS5NYXRyaXg0KTthLm1ha2VSb3RhdGlvblgoYik7dGhpcy5hcHBseU1hdHJpeChhKTtyZXR1cm4gdGhpc319KCkscm90YXRlWTpmdW5jdGlvbigpe3ZhciBhO3JldHVybiBmdW5jdGlvbihiKXt2b2lkIDA9PT1hJiYoYT1uZXcgVEhSRUUuTWF0cml4NCk7YS5tYWtlUm90YXRpb25ZKGIpO3RoaXMuYXBwbHlNYXRyaXgoYSk7cmV0dXJuIHRoaXN9fSgpLHJvdGF0ZVo6ZnVuY3Rpb24oKXt2YXIgYTtyZXR1cm4gZnVuY3Rpb24oYil7dm9pZCAwPT09YSYmKGE9bmV3IFRIUkVFLk1hdHJpeDQpO2EubWFrZVJvdGF0aW9uWihiKTt0aGlzLmFwcGx5TWF0cml4KGEpO3JldHVybiB0aGlzfX0oKSx0cmFuc2xhdGU6ZnVuY3Rpb24oKXt2YXIgYTtyZXR1cm4gZnVuY3Rpb24oYixcbmMsZCl7dm9pZCAwPT09YSYmKGE9bmV3IFRIUkVFLk1hdHJpeDQpO2EubWFrZVRyYW5zbGF0aW9uKGIsYyxkKTt0aGlzLmFwcGx5TWF0cml4KGEpO3JldHVybiB0aGlzfX0oKSxzY2FsZTpmdW5jdGlvbigpe3ZhciBhO3JldHVybiBmdW5jdGlvbihiLGMsZCl7dm9pZCAwPT09YSYmKGE9bmV3IFRIUkVFLk1hdHJpeDQpO2EubWFrZVNjYWxlKGIsYyxkKTt0aGlzLmFwcGx5TWF0cml4KGEpO3JldHVybiB0aGlzfX0oKSxsb29rQXQ6ZnVuY3Rpb24oKXt2YXIgYTtyZXR1cm4gZnVuY3Rpb24oYil7dm9pZCAwPT09YSYmKGE9bmV3IFRIUkVFLk9iamVjdDNEKTthLmxvb2tBdChiKTthLnVwZGF0ZU1hdHJpeCgpO3RoaXMuYXBwbHlNYXRyaXgoYS5tYXRyaXgpfX0oKSxmcm9tQnVmZmVyR2VvbWV0cnk6ZnVuY3Rpb24oYSl7ZnVuY3Rpb24gYihhLGIsZCxlKXt2YXIgZj12b2lkIDAhPT1nP1ttW2FdLmNsb25lKCksbVtiXS5jbG9uZSgpLG1bZF0uY2xvbmUoKV06W10scT12b2lkIDAhPT1oP1tjLmNvbG9yc1thXS5jbG9uZSgpLFxuYy5jb2xvcnNbYl0uY2xvbmUoKSxjLmNvbG9yc1tkXS5jbG9uZSgpXTpbXTtlPW5ldyBUSFJFRS5GYWNlMyhhLGIsZCxmLHEsZSk7Yy5mYWNlcy5wdXNoKGUpO3ZvaWQgMCE9PWsmJmMuZmFjZVZlcnRleFV2c1swXS5wdXNoKFtwW2FdLmNsb25lKCkscFtiXS5jbG9uZSgpLHBbZF0uY2xvbmUoKV0pO3ZvaWQgMCE9PWwmJmMuZmFjZVZlcnRleFV2c1sxXS5wdXNoKFtuW2FdLmNsb25lKCksbltiXS5jbG9uZSgpLG5bZF0uY2xvbmUoKV0pfXZhciBjPXRoaXMsZD1udWxsIT09YS5pbmRleD9hLmluZGV4LmFycmF5OnZvaWQgMCxlPWEuYXR0cmlidXRlcyxmPWUucG9zaXRpb24uYXJyYXksZz12b2lkIDAhPT1lLm5vcm1hbD9lLm5vcm1hbC5hcnJheTp2b2lkIDAsaD12b2lkIDAhPT1lLmNvbG9yP2UuY29sb3IuYXJyYXk6dm9pZCAwLGs9dm9pZCAwIT09ZS51dj9lLnV2LmFycmF5OnZvaWQgMCxsPXZvaWQgMCE9PWUudXYyP2UudXYyLmFycmF5OnZvaWQgMDt2b2lkIDAhPT1sJiYodGhpcy5mYWNlVmVydGV4VXZzWzFdPVxuW10pO2Zvcih2YXIgbT1bXSxwPVtdLG49W10scT1lPTA7ZTxmLmxlbmd0aDtlKz0zLHErPTIpYy52ZXJ0aWNlcy5wdXNoKG5ldyBUSFJFRS5WZWN0b3IzKGZbZV0sZltlKzFdLGZbZSsyXSkpLHZvaWQgMCE9PWcmJm0ucHVzaChuZXcgVEhSRUUuVmVjdG9yMyhnW2VdLGdbZSsxXSxnW2UrMl0pKSx2b2lkIDAhPT1oJiZjLmNvbG9ycy5wdXNoKG5ldyBUSFJFRS5Db2xvcihoW2VdLGhbZSsxXSxoW2UrMl0pKSx2b2lkIDAhPT1rJiZwLnB1c2gobmV3IFRIUkVFLlZlY3RvcjIoa1txXSxrW3ErMV0pKSx2b2lkIDAhPT1sJiZuLnB1c2gobmV3IFRIUkVFLlZlY3RvcjIobFtxXSxsW3ErMV0pKTtpZih2b2lkIDAhPT1kKWlmKGY9YS5ncm91cHMsMDxmLmxlbmd0aClmb3IoZT0wO2U8Zi5sZW5ndGg7ZSsrKWZvcih2YXIgcj1mW2VdLHM9ci5zdGFydCx2PXIuY291bnQscT1zLHM9cyt2O3E8cztxKz0zKWIoZFtxXSxkW3ErMV0sZFtxKzJdLHIubWF0ZXJpYWxJbmRleCk7ZWxzZSBmb3IoZT0wO2U8XG5kLmxlbmd0aDtlKz0zKWIoZFtlXSxkW2UrMV0sZFtlKzJdKTtlbHNlIGZvcihlPTA7ZTxmLmxlbmd0aC8zO2UrPTMpYihlLGUrMSxlKzIpO3RoaXMuY29tcHV0ZUZhY2VOb3JtYWxzKCk7bnVsbCE9PWEuYm91bmRpbmdCb3gmJih0aGlzLmJvdW5kaW5nQm94PWEuYm91bmRpbmdCb3guY2xvbmUoKSk7bnVsbCE9PWEuYm91bmRpbmdTcGhlcmUmJih0aGlzLmJvdW5kaW5nU3BoZXJlPWEuYm91bmRpbmdTcGhlcmUuY2xvbmUoKSk7cmV0dXJuIHRoaXN9LGNlbnRlcjpmdW5jdGlvbigpe3RoaXMuY29tcHV0ZUJvdW5kaW5nQm94KCk7dmFyIGE9dGhpcy5ib3VuZGluZ0JveC5jZW50ZXIoKS5uZWdhdGUoKTt0aGlzLnRyYW5zbGF0ZShhLngsYS55LGEueik7cmV0dXJuIGF9LG5vcm1hbGl6ZTpmdW5jdGlvbigpe3RoaXMuY29tcHV0ZUJvdW5kaW5nU3BoZXJlKCk7dmFyIGE9dGhpcy5ib3VuZGluZ1NwaGVyZS5jZW50ZXIsYj10aGlzLmJvdW5kaW5nU3BoZXJlLnJhZGl1cyxiPTA9PT1iPzE6MS9cbmIsYz1uZXcgVEhSRUUuTWF0cml4NDtjLnNldChiLDAsMCwtYiphLngsMCxiLDAsLWIqYS55LDAsMCxiLC1iKmEueiwwLDAsMCwxKTt0aGlzLmFwcGx5TWF0cml4KGMpO3JldHVybiB0aGlzfSxjb21wdXRlRmFjZU5vcm1hbHM6ZnVuY3Rpb24oKXtmb3IodmFyIGE9bmV3IFRIUkVFLlZlY3RvcjMsYj1uZXcgVEhSRUUuVmVjdG9yMyxjPTAsZD10aGlzLmZhY2VzLmxlbmd0aDtjPGQ7YysrKXt2YXIgZT10aGlzLmZhY2VzW2NdLGY9dGhpcy52ZXJ0aWNlc1tlLmFdLGc9dGhpcy52ZXJ0aWNlc1tlLmJdO2Euc3ViVmVjdG9ycyh0aGlzLnZlcnRpY2VzW2UuY10sZyk7Yi5zdWJWZWN0b3JzKGYsZyk7YS5jcm9zcyhiKTthLm5vcm1hbGl6ZSgpO2Uubm9ybWFsLmNvcHkoYSl9fSxjb21wdXRlVmVydGV4Tm9ybWFsczpmdW5jdGlvbihhKXt2b2lkIDA9PT1hJiYoYT0hMCk7dmFyIGIsYyxkO2Q9QXJyYXkodGhpcy52ZXJ0aWNlcy5sZW5ndGgpO2I9MDtmb3IoYz10aGlzLnZlcnRpY2VzLmxlbmd0aDtiPFxuYztiKyspZFtiXT1uZXcgVEhSRUUuVmVjdG9yMztpZihhKXt2YXIgZSxmLGcsaD1uZXcgVEhSRUUuVmVjdG9yMyxrPW5ldyBUSFJFRS5WZWN0b3IzO2E9MDtmb3IoYj10aGlzLmZhY2VzLmxlbmd0aDthPGI7YSsrKWM9dGhpcy5mYWNlc1thXSxlPXRoaXMudmVydGljZXNbYy5hXSxmPXRoaXMudmVydGljZXNbYy5iXSxnPXRoaXMudmVydGljZXNbYy5jXSxoLnN1YlZlY3RvcnMoZyxmKSxrLnN1YlZlY3RvcnMoZSxmKSxoLmNyb3NzKGspLGRbYy5hXS5hZGQoaCksZFtjLmJdLmFkZChoKSxkW2MuY10uYWRkKGgpfWVsc2UgZm9yKGE9MCxiPXRoaXMuZmFjZXMubGVuZ3RoO2E8YjthKyspYz10aGlzLmZhY2VzW2FdLGRbYy5hXS5hZGQoYy5ub3JtYWwpLGRbYy5iXS5hZGQoYy5ub3JtYWwpLGRbYy5jXS5hZGQoYy5ub3JtYWwpO2I9MDtmb3IoYz10aGlzLnZlcnRpY2VzLmxlbmd0aDtiPGM7YisrKWRbYl0ubm9ybWFsaXplKCk7YT0wO2ZvcihiPXRoaXMuZmFjZXMubGVuZ3RoO2E8YjthKyspYz1cbnRoaXMuZmFjZXNbYV0sZT1jLnZlcnRleE5vcm1hbHMsMz09PWUubGVuZ3RoPyhlWzBdLmNvcHkoZFtjLmFdKSxlWzFdLmNvcHkoZFtjLmJdKSxlWzJdLmNvcHkoZFtjLmNdKSk6KGVbMF09ZFtjLmFdLmNsb25lKCksZVsxXT1kW2MuYl0uY2xvbmUoKSxlWzJdPWRbYy5jXS5jbG9uZSgpKTswPHRoaXMuZmFjZXMubGVuZ3RoJiYodGhpcy5ub3JtYWxzTmVlZFVwZGF0ZT0hMCl9LGNvbXB1dGVNb3JwaE5vcm1hbHM6ZnVuY3Rpb24oKXt2YXIgYSxiLGMsZCxlO2M9MDtmb3IoZD10aGlzLmZhY2VzLmxlbmd0aDtjPGQ7YysrKWZvcihlPXRoaXMuZmFjZXNbY10sZS5fX29yaWdpbmFsRmFjZU5vcm1hbD9lLl9fb3JpZ2luYWxGYWNlTm9ybWFsLmNvcHkoZS5ub3JtYWwpOmUuX19vcmlnaW5hbEZhY2VOb3JtYWw9ZS5ub3JtYWwuY2xvbmUoKSxlLl9fb3JpZ2luYWxWZXJ0ZXhOb3JtYWxzfHwoZS5fX29yaWdpbmFsVmVydGV4Tm9ybWFscz1bXSksYT0wLGI9ZS52ZXJ0ZXhOb3JtYWxzLmxlbmd0aDthPFxuYjthKyspZS5fX29yaWdpbmFsVmVydGV4Tm9ybWFsc1thXT9lLl9fb3JpZ2luYWxWZXJ0ZXhOb3JtYWxzW2FdLmNvcHkoZS52ZXJ0ZXhOb3JtYWxzW2FdKTplLl9fb3JpZ2luYWxWZXJ0ZXhOb3JtYWxzW2FdPWUudmVydGV4Tm9ybWFsc1thXS5jbG9uZSgpO3ZhciBmPW5ldyBUSFJFRS5HZW9tZXRyeTtmLmZhY2VzPXRoaXMuZmFjZXM7YT0wO2ZvcihiPXRoaXMubW9ycGhUYXJnZXRzLmxlbmd0aDthPGI7YSsrKXtpZighdGhpcy5tb3JwaE5vcm1hbHNbYV0pe3RoaXMubW9ycGhOb3JtYWxzW2FdPXt9O3RoaXMubW9ycGhOb3JtYWxzW2FdLmZhY2VOb3JtYWxzPVtdO3RoaXMubW9ycGhOb3JtYWxzW2FdLnZlcnRleE5vcm1hbHM9W107ZT10aGlzLm1vcnBoTm9ybWFsc1thXS5mYWNlTm9ybWFsczt2YXIgZz10aGlzLm1vcnBoTm9ybWFsc1thXS52ZXJ0ZXhOb3JtYWxzLGgsaztjPTA7Zm9yKGQ9dGhpcy5mYWNlcy5sZW5ndGg7YzxkO2MrKyloPW5ldyBUSFJFRS5WZWN0b3IzLGs9e2E6bmV3IFRIUkVFLlZlY3RvcjMsXG5iOm5ldyBUSFJFRS5WZWN0b3IzLGM6bmV3IFRIUkVFLlZlY3RvcjN9LGUucHVzaChoKSxnLnB1c2goayl9Zz10aGlzLm1vcnBoTm9ybWFsc1thXTtmLnZlcnRpY2VzPXRoaXMubW9ycGhUYXJnZXRzW2FdLnZlcnRpY2VzO2YuY29tcHV0ZUZhY2VOb3JtYWxzKCk7Zi5jb21wdXRlVmVydGV4Tm9ybWFscygpO2M9MDtmb3IoZD10aGlzLmZhY2VzLmxlbmd0aDtjPGQ7YysrKWU9dGhpcy5mYWNlc1tjXSxoPWcuZmFjZU5vcm1hbHNbY10saz1nLnZlcnRleE5vcm1hbHNbY10saC5jb3B5KGUubm9ybWFsKSxrLmEuY29weShlLnZlcnRleE5vcm1hbHNbMF0pLGsuYi5jb3B5KGUudmVydGV4Tm9ybWFsc1sxXSksay5jLmNvcHkoZS52ZXJ0ZXhOb3JtYWxzWzJdKX1jPTA7Zm9yKGQ9dGhpcy5mYWNlcy5sZW5ndGg7YzxkO2MrKyllPXRoaXMuZmFjZXNbY10sZS5ub3JtYWw9ZS5fX29yaWdpbmFsRmFjZU5vcm1hbCxlLnZlcnRleE5vcm1hbHM9ZS5fX29yaWdpbmFsVmVydGV4Tm9ybWFsc30sY29tcHV0ZVRhbmdlbnRzOmZ1bmN0aW9uKCl7Y29uc29sZS53YXJuKFwiVEhSRUUuR2VvbWV0cnk6IC5jb21wdXRlVGFuZ2VudHMoKSBoYXMgYmVlbiByZW1vdmVkLlwiKX0sXG5jb21wdXRlTGluZURpc3RhbmNlczpmdW5jdGlvbigpe2Zvcih2YXIgYT0wLGI9dGhpcy52ZXJ0aWNlcyxjPTAsZD1iLmxlbmd0aDtjPGQ7YysrKTA8YyYmKGErPWJbY10uZGlzdGFuY2VUbyhiW2MtMV0pKSx0aGlzLmxpbmVEaXN0YW5jZXNbY109YX0sY29tcHV0ZUJvdW5kaW5nQm94OmZ1bmN0aW9uKCl7bnVsbD09PXRoaXMuYm91bmRpbmdCb3gmJih0aGlzLmJvdW5kaW5nQm94PW5ldyBUSFJFRS5Cb3gzKTt0aGlzLmJvdW5kaW5nQm94LnNldEZyb21Qb2ludHModGhpcy52ZXJ0aWNlcyl9LGNvbXB1dGVCb3VuZGluZ1NwaGVyZTpmdW5jdGlvbigpe251bGw9PT10aGlzLmJvdW5kaW5nU3BoZXJlJiYodGhpcy5ib3VuZGluZ1NwaGVyZT1uZXcgVEhSRUUuU3BoZXJlKTt0aGlzLmJvdW5kaW5nU3BoZXJlLnNldEZyb21Qb2ludHModGhpcy52ZXJ0aWNlcyl9LG1lcmdlOmZ1bmN0aW9uKGEsYixjKXtpZighMT09PWEgaW5zdGFuY2VvZiBUSFJFRS5HZW9tZXRyeSljb25zb2xlLmVycm9yKFwiVEhSRUUuR2VvbWV0cnkubWVyZ2UoKTogZ2VvbWV0cnkgbm90IGFuIGluc3RhbmNlIG9mIFRIUkVFLkdlb21ldHJ5LlwiLFxuYSk7ZWxzZXt2YXIgZCxlPXRoaXMudmVydGljZXMubGVuZ3RoLGY9dGhpcy52ZXJ0aWNlcyxnPWEudmVydGljZXMsaD10aGlzLmZhY2VzLGs9YS5mYWNlcyxsPXRoaXMuZmFjZVZlcnRleFV2c1swXTthPWEuZmFjZVZlcnRleFV2c1swXTt2b2lkIDA9PT1jJiYoYz0wKTt2b2lkIDAhPT1iJiYoZD0obmV3IFRIUkVFLk1hdHJpeDMpLmdldE5vcm1hbE1hdHJpeChiKSk7Zm9yKHZhciBtPTAscD1nLmxlbmd0aDttPHA7bSsrKXt2YXIgbj1nW21dLmNsb25lKCk7dm9pZCAwIT09YiYmbi5hcHBseU1hdHJpeDQoYik7Zi5wdXNoKG4pfW09MDtmb3IocD1rLmxlbmd0aDttPHA7bSsrKXt2YXIgZz1rW21dLHEscj1nLnZlcnRleE5vcm1hbHMscz1nLnZlcnRleENvbG9ycyxuPW5ldyBUSFJFRS5GYWNlMyhnLmErZSxnLmIrZSxnLmMrZSk7bi5ub3JtYWwuY29weShnLm5vcm1hbCk7dm9pZCAwIT09ZCYmbi5ub3JtYWwuYXBwbHlNYXRyaXgzKGQpLm5vcm1hbGl6ZSgpO2I9MDtmb3IoZj1yLmxlbmd0aDtiPFxuZjtiKyspcT1yW2JdLmNsb25lKCksdm9pZCAwIT09ZCYmcS5hcHBseU1hdHJpeDMoZCkubm9ybWFsaXplKCksbi52ZXJ0ZXhOb3JtYWxzLnB1c2gocSk7bi5jb2xvci5jb3B5KGcuY29sb3IpO2I9MDtmb3IoZj1zLmxlbmd0aDtiPGY7YisrKXE9c1tiXSxuLnZlcnRleENvbG9ycy5wdXNoKHEuY2xvbmUoKSk7bi5tYXRlcmlhbEluZGV4PWcubWF0ZXJpYWxJbmRleCtjO2gucHVzaChuKX1tPTA7Zm9yKHA9YS5sZW5ndGg7bTxwO20rKylpZihjPWFbbV0sZD1bXSx2b2lkIDAhPT1jKXtiPTA7Zm9yKGY9Yy5sZW5ndGg7YjxmO2IrKylkLnB1c2goY1tiXS5jbG9uZSgpKTtsLnB1c2goZCl9fX0sbWVyZ2VNZXNoOmZ1bmN0aW9uKGEpeyExPT09YSBpbnN0YW5jZW9mIFRIUkVFLk1lc2g/Y29uc29sZS5lcnJvcihcIlRIUkVFLkdlb21ldHJ5Lm1lcmdlTWVzaCgpOiBtZXNoIG5vdCBhbiBpbnN0YW5jZSBvZiBUSFJFRS5NZXNoLlwiLGEpOihhLm1hdHJpeEF1dG9VcGRhdGUmJmEudXBkYXRlTWF0cml4KCksXG50aGlzLm1lcmdlKGEuZ2VvbWV0cnksYS5tYXRyaXgpKX0sbWVyZ2VWZXJ0aWNlczpmdW5jdGlvbigpe3ZhciBhPXt9LGI9W10sYz1bXSxkLGU9TWF0aC5wb3coMTAsNCksZixnO2Y9MDtmb3IoZz10aGlzLnZlcnRpY2VzLmxlbmd0aDtmPGc7ZisrKWQ9dGhpcy52ZXJ0aWNlc1tmXSxkPU1hdGgucm91bmQoZC54KmUpK1wiX1wiK01hdGgucm91bmQoZC55KmUpK1wiX1wiK01hdGgucm91bmQoZC56KmUpLHZvaWQgMD09PWFbZF0/KGFbZF09ZixiLnB1c2godGhpcy52ZXJ0aWNlc1tmXSksY1tmXT1iLmxlbmd0aC0xKTpjW2ZdPWNbYVtkXV07YT1bXTtmPTA7Zm9yKGc9dGhpcy5mYWNlcy5sZW5ndGg7ZjxnO2YrKylmb3IoZT10aGlzLmZhY2VzW2ZdLGUuYT1jW2UuYV0sZS5iPWNbZS5iXSxlLmM9Y1tlLmNdLGU9W2UuYSxlLmIsZS5jXSxkPTA7Mz5kO2QrKylpZihlW2RdPT09ZVsoZCsxKSUzXSl7YS5wdXNoKGYpO2JyZWFrfWZvcihmPWEubGVuZ3RoLTE7MDw9ZjtmLS0pZm9yKGU9YVtmXSx0aGlzLmZhY2VzLnNwbGljZShlLFxuMSksYz0wLGc9dGhpcy5mYWNlVmVydGV4VXZzLmxlbmd0aDtjPGc7YysrKXRoaXMuZmFjZVZlcnRleFV2c1tjXS5zcGxpY2UoZSwxKTtmPXRoaXMudmVydGljZXMubGVuZ3RoLWIubGVuZ3RoO3RoaXMudmVydGljZXM9YjtyZXR1cm4gZn0sc29ydEZhY2VzQnlNYXRlcmlhbEluZGV4OmZ1bmN0aW9uKCl7Zm9yKHZhciBhPXRoaXMuZmFjZXMsYj1hLmxlbmd0aCxjPTA7YzxiO2MrKylhW2NdLl9pZD1jO2Euc29ydChmdW5jdGlvbihhLGIpe3JldHVybiBhLm1hdGVyaWFsSW5kZXgtYi5tYXRlcmlhbEluZGV4fSk7dmFyIGQ9dGhpcy5mYWNlVmVydGV4VXZzWzBdLGU9dGhpcy5mYWNlVmVydGV4VXZzWzFdLGYsZztkJiZkLmxlbmd0aD09PWImJihmPVtdKTtlJiZlLmxlbmd0aD09PWImJihnPVtdKTtmb3IoYz0wO2M8YjtjKyspe3ZhciBoPWFbY10uX2lkO2YmJmYucHVzaChkW2hdKTtnJiZnLnB1c2goZVtoXSl9ZiYmKHRoaXMuZmFjZVZlcnRleFV2c1swXT1mKTtnJiYodGhpcy5mYWNlVmVydGV4VXZzWzFdPVxuZyl9LHRvSlNPTjpmdW5jdGlvbigpe2Z1bmN0aW9uIGEoYSxiLGMpe3JldHVybiBjP2F8MTw8YjphJn4oMTw8Yil9ZnVuY3Rpb24gYihhKXt2YXIgYj1hLngudG9TdHJpbmcoKSthLnkudG9TdHJpbmcoKSthLnoudG9TdHJpbmcoKTtpZih2b2lkIDAhPT1sW2JdKXJldHVybiBsW2JdO2xbYl09ay5sZW5ndGgvMztrLnB1c2goYS54LGEueSxhLnopO3JldHVybiBsW2JdfWZ1bmN0aW9uIGMoYSl7dmFyIGI9YS5yLnRvU3RyaW5nKCkrYS5nLnRvU3RyaW5nKCkrYS5iLnRvU3RyaW5nKCk7aWYodm9pZCAwIT09cFtiXSlyZXR1cm4gcFtiXTtwW2JdPW0ubGVuZ3RoO20ucHVzaChhLmdldEhleCgpKTtyZXR1cm4gcFtiXX1mdW5jdGlvbiBkKGEpe3ZhciBiPWEueC50b1N0cmluZygpK2EueS50b1N0cmluZygpO2lmKHZvaWQgMCE9PXFbYl0pcmV0dXJuIHFbYl07cVtiXT1uLmxlbmd0aC8yO24ucHVzaChhLngsYS55KTtyZXR1cm4gcVtiXX12YXIgZT17bWV0YWRhdGE6e3ZlcnNpb246NC40LHR5cGU6XCJHZW9tZXRyeVwiLFxuZ2VuZXJhdG9yOlwiR2VvbWV0cnkudG9KU09OXCJ9fTtlLnV1aWQ9dGhpcy51dWlkO2UudHlwZT10aGlzLnR5cGU7XCJcIiE9PXRoaXMubmFtZSYmKGUubmFtZT10aGlzLm5hbWUpO2lmKHZvaWQgMCE9PXRoaXMucGFyYW1ldGVycyl7dmFyIGY9dGhpcy5wYXJhbWV0ZXJzLGc7Zm9yKGcgaW4gZil2b2lkIDAhPT1mW2ddJiYoZVtnXT1mW2ddKTtyZXR1cm4gZX1mPVtdO2ZvcihnPTA7Zzx0aGlzLnZlcnRpY2VzLmxlbmd0aDtnKyspe3ZhciBoPXRoaXMudmVydGljZXNbZ107Zi5wdXNoKGgueCxoLnksaC56KX12YXIgaD1bXSxrPVtdLGw9e30sbT1bXSxwPXt9LG49W10scT17fTtmb3IoZz0wO2c8dGhpcy5mYWNlcy5sZW5ndGg7ZysrKXt2YXIgcj10aGlzLmZhY2VzW2ddLHM9dm9pZCAwIT09dGhpcy5mYWNlVmVydGV4VXZzWzBdW2ddLHY9MDxyLm5vcm1hbC5sZW5ndGgoKSx0PTA8ci52ZXJ0ZXhOb3JtYWxzLmxlbmd0aCx1PTEhPT1yLmNvbG9yLnJ8fDEhPT1yLmNvbG9yLmd8fDEhPT1yLmNvbG9yLmIsXG5EPTA8ci52ZXJ0ZXhDb2xvcnMubGVuZ3RoLHc9MCx3PWEodywwLDApLHc9YSh3LDEsITApLHc9YSh3LDIsITEpLHc9YSh3LDMscyksdz1hKHcsNCx2KSx3PWEodyw1LHQpLHc9YSh3LDYsdSksdz1hKHcsNyxEKTtoLnB1c2godyk7aC5wdXNoKHIuYSxyLmIsci5jKTtoLnB1c2goci5tYXRlcmlhbEluZGV4KTtzJiYocz10aGlzLmZhY2VWZXJ0ZXhVdnNbMF1bZ10saC5wdXNoKGQoc1swXSksZChzWzFdKSxkKHNbMl0pKSk7diYmaC5wdXNoKGIoci5ub3JtYWwpKTt0JiYodj1yLnZlcnRleE5vcm1hbHMsaC5wdXNoKGIodlswXSksYih2WzFdKSxiKHZbMl0pKSk7dSYmaC5wdXNoKGMoci5jb2xvcikpO0QmJihyPXIudmVydGV4Q29sb3JzLGgucHVzaChjKHJbMF0pLGMoclsxXSksYyhyWzJdKSkpfWUuZGF0YT17fTtlLmRhdGEudmVydGljZXM9ZjtlLmRhdGEubm9ybWFscz1rOzA8bS5sZW5ndGgmJihlLmRhdGEuY29sb3JzPW0pOzA8bi5sZW5ndGgmJihlLmRhdGEudXZzPVtuXSk7ZS5kYXRhLmZhY2VzPVxuaDtyZXR1cm4gZX0sY2xvbmU6ZnVuY3Rpb24oKXtyZXR1cm4obmV3IFRIUkVFLkdlb21ldHJ5KS5jb3B5KHRoaXMpfSxjb3B5OmZ1bmN0aW9uKGEpe3RoaXMudmVydGljZXM9W107dGhpcy5mYWNlcz1bXTt0aGlzLmZhY2VWZXJ0ZXhVdnM9W1tdXTtmb3IodmFyIGI9YS52ZXJ0aWNlcyxjPTAsZD1iLmxlbmd0aDtjPGQ7YysrKXRoaXMudmVydGljZXMucHVzaChiW2NdLmNsb25lKCkpO2I9YS5mYWNlcztjPTA7Zm9yKGQ9Yi5sZW5ndGg7YzxkO2MrKyl0aGlzLmZhY2VzLnB1c2goYltjXS5jbG9uZSgpKTtjPTA7Zm9yKGQ9YS5mYWNlVmVydGV4VXZzLmxlbmd0aDtjPGQ7YysrKXtiPWEuZmFjZVZlcnRleFV2c1tjXTt2b2lkIDA9PT10aGlzLmZhY2VWZXJ0ZXhVdnNbY10mJih0aGlzLmZhY2VWZXJ0ZXhVdnNbY109W10pO2Zvcih2YXIgZT0wLGY9Yi5sZW5ndGg7ZTxmO2UrKyl7Zm9yKHZhciBnPWJbZV0saD1bXSxrPTAsbD1nLmxlbmd0aDtrPGw7aysrKWgucHVzaChnW2tdLmNsb25lKCkpO1xudGhpcy5mYWNlVmVydGV4VXZzW2NdLnB1c2goaCl9fXJldHVybiB0aGlzfSxkaXNwb3NlOmZ1bmN0aW9uKCl7dGhpcy5kaXNwYXRjaEV2ZW50KHt0eXBlOlwiZGlzcG9zZVwifSl9fSk7VEhSRUUuR2VvbWV0cnlJZENvdW50PTA7XG5USFJFRS5EaXJlY3RHZW9tZXRyeT1mdW5jdGlvbigpe09iamVjdC5kZWZpbmVQcm9wZXJ0eSh0aGlzLFwiaWRcIix7dmFsdWU6VEhSRUUuR2VvbWV0cnlJZENvdW50Kyt9KTt0aGlzLnV1aWQ9VEhSRUUuTWF0aC5nZW5lcmF0ZVVVSUQoKTt0aGlzLm5hbWU9XCJcIjt0aGlzLnR5cGU9XCJEaXJlY3RHZW9tZXRyeVwiO3RoaXMuaW5kaWNlcz1bXTt0aGlzLnZlcnRpY2VzPVtdO3RoaXMubm9ybWFscz1bXTt0aGlzLmNvbG9ycz1bXTt0aGlzLnV2cz1bXTt0aGlzLnV2czI9W107dGhpcy5ncm91cHM9W107dGhpcy5tb3JwaFRhcmdldHM9e307dGhpcy5za2luV2VpZ2h0cz1bXTt0aGlzLnNraW5JbmRpY2VzPVtdO3RoaXMuYm91bmRpbmdTcGhlcmU9dGhpcy5ib3VuZGluZ0JveD1udWxsO3RoaXMuZ3JvdXBzTmVlZFVwZGF0ZT10aGlzLnV2c05lZWRVcGRhdGU9dGhpcy5jb2xvcnNOZWVkVXBkYXRlPXRoaXMubm9ybWFsc05lZWRVcGRhdGU9dGhpcy52ZXJ0aWNlc05lZWRVcGRhdGU9ITF9O1xuT2JqZWN0LmFzc2lnbihUSFJFRS5EaXJlY3RHZW9tZXRyeS5wcm90b3R5cGUsVEhSRUUuRXZlbnREaXNwYXRjaGVyLnByb3RvdHlwZSx7Y29tcHV0ZUJvdW5kaW5nQm94OlRIUkVFLkdlb21ldHJ5LnByb3RvdHlwZS5jb21wdXRlQm91bmRpbmdCb3gsY29tcHV0ZUJvdW5kaW5nU3BoZXJlOlRIUkVFLkdlb21ldHJ5LnByb3RvdHlwZS5jb21wdXRlQm91bmRpbmdTcGhlcmUsY29tcHV0ZUZhY2VOb3JtYWxzOmZ1bmN0aW9uKCl7Y29uc29sZS53YXJuKFwiVEhSRUUuRGlyZWN0R2VvbWV0cnk6IGNvbXB1dGVGYWNlTm9ybWFscygpIGlzIG5vdCBhIG1ldGhvZCBvZiB0aGlzIHR5cGUgb2YgZ2VvbWV0cnkuXCIpfSxjb21wdXRlVmVydGV4Tm9ybWFsczpmdW5jdGlvbigpe2NvbnNvbGUud2FybihcIlRIUkVFLkRpcmVjdEdlb21ldHJ5OiBjb21wdXRlVmVydGV4Tm9ybWFscygpIGlzIG5vdCBhIG1ldGhvZCBvZiB0aGlzIHR5cGUgb2YgZ2VvbWV0cnkuXCIpfSxjb21wdXRlR3JvdXBzOmZ1bmN0aW9uKGEpe3ZhciBiLFxuYz1bXSxkO2E9YS5mYWNlcztmb3IodmFyIGU9MDtlPGEubGVuZ3RoO2UrKyl7dmFyIGY9YVtlXTtmLm1hdGVyaWFsSW5kZXghPT1kJiYoZD1mLm1hdGVyaWFsSW5kZXgsdm9pZCAwIT09YiYmKGIuY291bnQ9MyplLWIuc3RhcnQsYy5wdXNoKGIpKSxiPXtzdGFydDozKmUsbWF0ZXJpYWxJbmRleDpkfSl9dm9pZCAwIT09YiYmKGIuY291bnQ9MyplLWIuc3RhcnQsYy5wdXNoKGIpKTt0aGlzLmdyb3Vwcz1jfSxmcm9tR2VvbWV0cnk6ZnVuY3Rpb24oYSl7dmFyIGI9YS5mYWNlcyxjPWEudmVydGljZXMsZD1hLmZhY2VWZXJ0ZXhVdnMsZT1kWzBdJiYwPGRbMF0ubGVuZ3RoLGY9ZFsxXSYmMDxkWzFdLmxlbmd0aCxnPWEubW9ycGhUYXJnZXRzLGg9Zy5sZW5ndGgsaztpZigwPGgpe2s9W107Zm9yKHZhciBsPTA7bDxoO2wrKylrW2xdPVtdO3RoaXMubW9ycGhUYXJnZXRzLnBvc2l0aW9uPWt9dmFyIG09YS5tb3JwaE5vcm1hbHMscD1tLmxlbmd0aCxuO2lmKDA8cCl7bj1bXTtmb3IobD0wO2w8XG5wO2wrKyluW2xdPVtdO3RoaXMubW9ycGhUYXJnZXRzLm5vcm1hbD1ufWZvcih2YXIgcT1hLnNraW5JbmRpY2VzLHI9YS5za2luV2VpZ2h0cyxzPXEubGVuZ3RoPT09Yy5sZW5ndGgsdj1yLmxlbmd0aD09PWMubGVuZ3RoLGw9MDtsPGIubGVuZ3RoO2wrKyl7dmFyIHQ9YltsXTt0aGlzLnZlcnRpY2VzLnB1c2goY1t0LmFdLGNbdC5iXSxjW3QuY10pO3ZhciB1PXQudmVydGV4Tm9ybWFsczszPT09dS5sZW5ndGg/dGhpcy5ub3JtYWxzLnB1c2godVswXSx1WzFdLHVbMl0pOih1PXQubm9ybWFsLHRoaXMubm9ybWFscy5wdXNoKHUsdSx1KSk7dT10LnZlcnRleENvbG9yczszPT09dS5sZW5ndGg/dGhpcy5jb2xvcnMucHVzaCh1WzBdLHVbMV0sdVsyXSk6KHU9dC5jb2xvcix0aGlzLmNvbG9ycy5wdXNoKHUsdSx1KSk7ITA9PT1lJiYodT1kWzBdW2xdLHZvaWQgMCE9PXU/dGhpcy51dnMucHVzaCh1WzBdLHVbMV0sdVsyXSk6KGNvbnNvbGUud2FybihcIlRIUkVFLkRpcmVjdEdlb21ldHJ5LmZyb21HZW9tZXRyeSgpOiBVbmRlZmluZWQgdmVydGV4VXYgXCIsXG5sKSx0aGlzLnV2cy5wdXNoKG5ldyBUSFJFRS5WZWN0b3IyLG5ldyBUSFJFRS5WZWN0b3IyLG5ldyBUSFJFRS5WZWN0b3IyKSkpOyEwPT09ZiYmKHU9ZFsxXVtsXSx2b2lkIDAhPT11P3RoaXMudXZzMi5wdXNoKHVbMF0sdVsxXSx1WzJdKTooY29uc29sZS53YXJuKFwiVEhSRUUuRGlyZWN0R2VvbWV0cnkuZnJvbUdlb21ldHJ5KCk6IFVuZGVmaW5lZCB2ZXJ0ZXhVdjIgXCIsbCksdGhpcy51dnMyLnB1c2gobmV3IFRIUkVFLlZlY3RvcjIsbmV3IFRIUkVFLlZlY3RvcjIsbmV3IFRIUkVFLlZlY3RvcjIpKSk7Zm9yKHU9MDt1PGg7dSsrKXt2YXIgRD1nW3VdLnZlcnRpY2VzO2tbdV0ucHVzaChEW3QuYV0sRFt0LmJdLERbdC5jXSl9Zm9yKHU9MDt1PHA7dSsrKUQ9bVt1XS52ZXJ0ZXhOb3JtYWxzW2xdLG5bdV0ucHVzaChELmEsRC5iLEQuYyk7cyYmdGhpcy5za2luSW5kaWNlcy5wdXNoKHFbdC5hXSxxW3QuYl0scVt0LmNdKTt2JiZ0aGlzLnNraW5XZWlnaHRzLnB1c2goclt0LmFdLHJbdC5iXSxcbnJbdC5jXSl9dGhpcy5jb21wdXRlR3JvdXBzKGEpO3RoaXMudmVydGljZXNOZWVkVXBkYXRlPWEudmVydGljZXNOZWVkVXBkYXRlO3RoaXMubm9ybWFsc05lZWRVcGRhdGU9YS5ub3JtYWxzTmVlZFVwZGF0ZTt0aGlzLmNvbG9yc05lZWRVcGRhdGU9YS5jb2xvcnNOZWVkVXBkYXRlO3RoaXMudXZzTmVlZFVwZGF0ZT1hLnV2c05lZWRVcGRhdGU7dGhpcy5ncm91cHNOZWVkVXBkYXRlPWEuZ3JvdXBzTmVlZFVwZGF0ZTtyZXR1cm4gdGhpc30sZGlzcG9zZTpmdW5jdGlvbigpe3RoaXMuZGlzcGF0Y2hFdmVudCh7dHlwZTpcImRpc3Bvc2VcIn0pfX0pO1xuVEhSRUUuQnVmZmVyR2VvbWV0cnk9ZnVuY3Rpb24oKXtPYmplY3QuZGVmaW5lUHJvcGVydHkodGhpcyxcImlkXCIse3ZhbHVlOlRIUkVFLkdlb21ldHJ5SWRDb3VudCsrfSk7dGhpcy51dWlkPVRIUkVFLk1hdGguZ2VuZXJhdGVVVUlEKCk7dGhpcy5uYW1lPVwiXCI7dGhpcy50eXBlPVwiQnVmZmVyR2VvbWV0cnlcIjt0aGlzLmluZGV4PW51bGw7dGhpcy5hdHRyaWJ1dGVzPXt9O3RoaXMubW9ycGhBdHRyaWJ1dGVzPXt9O3RoaXMuZ3JvdXBzPVtdO3RoaXMuYm91bmRpbmdTcGhlcmU9dGhpcy5ib3VuZGluZ0JveD1udWxsO3RoaXMuZHJhd1JhbmdlPXtzdGFydDowLGNvdW50OkluZmluaXR5fX07XG5PYmplY3QuYXNzaWduKFRIUkVFLkJ1ZmZlckdlb21ldHJ5LnByb3RvdHlwZSxUSFJFRS5FdmVudERpc3BhdGNoZXIucHJvdG90eXBlLHtnZXRJbmRleDpmdW5jdGlvbigpe3JldHVybiB0aGlzLmluZGV4fSxzZXRJbmRleDpmdW5jdGlvbihhKXt0aGlzLmluZGV4PWF9LGFkZEF0dHJpYnV0ZTpmdW5jdGlvbihhLGIsYyl7aWYoITE9PT1iIGluc3RhbmNlb2YgVEhSRUUuQnVmZmVyQXR0cmlidXRlJiYhMT09PWIgaW5zdGFuY2VvZiBUSFJFRS5JbnRlcmxlYXZlZEJ1ZmZlckF0dHJpYnV0ZSljb25zb2xlLndhcm4oXCJUSFJFRS5CdWZmZXJHZW9tZXRyeTogLmFkZEF0dHJpYnV0ZSgpIG5vdyBleHBlY3RzICggbmFtZSwgYXR0cmlidXRlICkuXCIpLHRoaXMuYWRkQXR0cmlidXRlKGEsbmV3IFRIUkVFLkJ1ZmZlckF0dHJpYnV0ZShiLGMpKTtlbHNlIGlmKFwiaW5kZXhcIj09PWEpY29uc29sZS53YXJuKFwiVEhSRUUuQnVmZmVyR2VvbWV0cnkuYWRkQXR0cmlidXRlOiBVc2UgLnNldEluZGV4KCkgZm9yIGluZGV4IGF0dHJpYnV0ZS5cIiksXG50aGlzLnNldEluZGV4KGIpO2Vsc2UgcmV0dXJuIHRoaXMuYXR0cmlidXRlc1thXT1iLHRoaXN9LGdldEF0dHJpYnV0ZTpmdW5jdGlvbihhKXtyZXR1cm4gdGhpcy5hdHRyaWJ1dGVzW2FdfSxyZW1vdmVBdHRyaWJ1dGU6ZnVuY3Rpb24oYSl7ZGVsZXRlIHRoaXMuYXR0cmlidXRlc1thXTtyZXR1cm4gdGhpc30sYWRkR3JvdXA6ZnVuY3Rpb24oYSxiLGMpe3RoaXMuZ3JvdXBzLnB1c2goe3N0YXJ0OmEsY291bnQ6YixtYXRlcmlhbEluZGV4OnZvaWQgMCE9PWM/YzowfSl9LGNsZWFyR3JvdXBzOmZ1bmN0aW9uKCl7dGhpcy5ncm91cHM9W119LHNldERyYXdSYW5nZTpmdW5jdGlvbihhLGIpe3RoaXMuZHJhd1JhbmdlLnN0YXJ0PWE7dGhpcy5kcmF3UmFuZ2UuY291bnQ9Yn0sYXBwbHlNYXRyaXg6ZnVuY3Rpb24oYSl7dmFyIGI9dGhpcy5hdHRyaWJ1dGVzLnBvc2l0aW9uO3ZvaWQgMCE9PWImJihhLmFwcGx5VG9WZWN0b3IzQXJyYXkoYi5hcnJheSksYi5uZWVkc1VwZGF0ZT0hMCk7Yj10aGlzLmF0dHJpYnV0ZXMubm9ybWFsO1xudm9pZCAwIT09YiYmKChuZXcgVEhSRUUuTWF0cml4MykuZ2V0Tm9ybWFsTWF0cml4KGEpLmFwcGx5VG9WZWN0b3IzQXJyYXkoYi5hcnJheSksYi5uZWVkc1VwZGF0ZT0hMCk7bnVsbCE9PXRoaXMuYm91bmRpbmdCb3gmJnRoaXMuY29tcHV0ZUJvdW5kaW5nQm94KCk7bnVsbCE9PXRoaXMuYm91bmRpbmdTcGhlcmUmJnRoaXMuY29tcHV0ZUJvdW5kaW5nU3BoZXJlKCk7cmV0dXJuIHRoaXN9LHJvdGF0ZVg6ZnVuY3Rpb24oKXt2YXIgYTtyZXR1cm4gZnVuY3Rpb24oYil7dm9pZCAwPT09YSYmKGE9bmV3IFRIUkVFLk1hdHJpeDQpO2EubWFrZVJvdGF0aW9uWChiKTt0aGlzLmFwcGx5TWF0cml4KGEpO3JldHVybiB0aGlzfX0oKSxyb3RhdGVZOmZ1bmN0aW9uKCl7dmFyIGE7cmV0dXJuIGZ1bmN0aW9uKGIpe3ZvaWQgMD09PWEmJihhPW5ldyBUSFJFRS5NYXRyaXg0KTthLm1ha2VSb3RhdGlvblkoYik7dGhpcy5hcHBseU1hdHJpeChhKTtyZXR1cm4gdGhpc319KCkscm90YXRlWjpmdW5jdGlvbigpe3ZhciBhO1xucmV0dXJuIGZ1bmN0aW9uKGIpe3ZvaWQgMD09PWEmJihhPW5ldyBUSFJFRS5NYXRyaXg0KTthLm1ha2VSb3RhdGlvblooYik7dGhpcy5hcHBseU1hdHJpeChhKTtyZXR1cm4gdGhpc319KCksdHJhbnNsYXRlOmZ1bmN0aW9uKCl7dmFyIGE7cmV0dXJuIGZ1bmN0aW9uKGIsYyxkKXt2b2lkIDA9PT1hJiYoYT1uZXcgVEhSRUUuTWF0cml4NCk7YS5tYWtlVHJhbnNsYXRpb24oYixjLGQpO3RoaXMuYXBwbHlNYXRyaXgoYSk7cmV0dXJuIHRoaXN9fSgpLHNjYWxlOmZ1bmN0aW9uKCl7dmFyIGE7cmV0dXJuIGZ1bmN0aW9uKGIsYyxkKXt2b2lkIDA9PT1hJiYoYT1uZXcgVEhSRUUuTWF0cml4NCk7YS5tYWtlU2NhbGUoYixjLGQpO3RoaXMuYXBwbHlNYXRyaXgoYSk7cmV0dXJuIHRoaXN9fSgpLGxvb2tBdDpmdW5jdGlvbigpe3ZhciBhO3JldHVybiBmdW5jdGlvbihiKXt2b2lkIDA9PT1hJiYoYT1uZXcgVEhSRUUuT2JqZWN0M0QpO2EubG9va0F0KGIpO2EudXBkYXRlTWF0cml4KCk7dGhpcy5hcHBseU1hdHJpeChhLm1hdHJpeCl9fSgpLFxuY2VudGVyOmZ1bmN0aW9uKCl7dGhpcy5jb21wdXRlQm91bmRpbmdCb3goKTt2YXIgYT10aGlzLmJvdW5kaW5nQm94LmNlbnRlcigpLm5lZ2F0ZSgpO3RoaXMudHJhbnNsYXRlKGEueCxhLnksYS56KTtyZXR1cm4gYX0sc2V0RnJvbU9iamVjdDpmdW5jdGlvbihhKXt2YXIgYj1hLmdlb21ldHJ5O2lmKGEgaW5zdGFuY2VvZiBUSFJFRS5Qb2ludHN8fGEgaW5zdGFuY2VvZiBUSFJFRS5MaW5lKXthPW5ldyBUSFJFRS5GbG9hdDMyQXR0cmlidXRlKDMqYi52ZXJ0aWNlcy5sZW5ndGgsMyk7dmFyIGM9bmV3IFRIUkVFLkZsb2F0MzJBdHRyaWJ1dGUoMypiLmNvbG9ycy5sZW5ndGgsMyk7dGhpcy5hZGRBdHRyaWJ1dGUoXCJwb3NpdGlvblwiLGEuY29weVZlY3RvcjNzQXJyYXkoYi52ZXJ0aWNlcykpO3RoaXMuYWRkQXR0cmlidXRlKFwiY29sb3JcIixjLmNvcHlDb2xvcnNBcnJheShiLmNvbG9ycykpO2IubGluZURpc3RhbmNlcyYmYi5saW5lRGlzdGFuY2VzLmxlbmd0aD09PWIudmVydGljZXMubGVuZ3RoJiZcbihhPW5ldyBUSFJFRS5GbG9hdDMyQXR0cmlidXRlKGIubGluZURpc3RhbmNlcy5sZW5ndGgsMSksdGhpcy5hZGRBdHRyaWJ1dGUoXCJsaW5lRGlzdGFuY2VcIixhLmNvcHlBcnJheShiLmxpbmVEaXN0YW5jZXMpKSk7bnVsbCE9PWIuYm91bmRpbmdTcGhlcmUmJih0aGlzLmJvdW5kaW5nU3BoZXJlPWIuYm91bmRpbmdTcGhlcmUuY2xvbmUoKSk7bnVsbCE9PWIuYm91bmRpbmdCb3gmJih0aGlzLmJvdW5kaW5nQm94PWIuYm91bmRpbmdCb3guY2xvbmUoKSl9ZWxzZSBhIGluc3RhbmNlb2YgVEhSRUUuTWVzaCYmYiBpbnN0YW5jZW9mIFRIUkVFLkdlb21ldHJ5JiZ0aGlzLmZyb21HZW9tZXRyeShiKTtyZXR1cm4gdGhpc30sdXBkYXRlRnJvbU9iamVjdDpmdW5jdGlvbihhKXt2YXIgYj1hLmdlb21ldHJ5O2lmKGEgaW5zdGFuY2VvZiBUSFJFRS5NZXNoKXt2YXIgYz1iLl9fZGlyZWN0R2VvbWV0cnk7aWYodm9pZCAwPT09Y3x8ITA9PT1iLmVsZW1lbnRzTmVlZFVwZGF0ZSlyZXR1cm4gdGhpcy5mcm9tR2VvbWV0cnkoYik7XG5jLnZlcnRpY2VzTmVlZFVwZGF0ZT1iLnZlcnRpY2VzTmVlZFVwZGF0ZXx8Yi5lbGVtZW50c05lZWRVcGRhdGU7Yy5ub3JtYWxzTmVlZFVwZGF0ZT1iLm5vcm1hbHNOZWVkVXBkYXRlfHxiLmVsZW1lbnRzTmVlZFVwZGF0ZTtjLmNvbG9yc05lZWRVcGRhdGU9Yi5jb2xvcnNOZWVkVXBkYXRlfHxiLmVsZW1lbnRzTmVlZFVwZGF0ZTtjLnV2c05lZWRVcGRhdGU9Yi51dnNOZWVkVXBkYXRlfHxiLmVsZW1lbnRzTmVlZFVwZGF0ZTtjLmdyb3Vwc05lZWRVcGRhdGU9Yi5ncm91cHNOZWVkVXBkYXRlfHxiLmVsZW1lbnRzTmVlZFVwZGF0ZTtiLmVsZW1lbnRzTmVlZFVwZGF0ZT0hMTtiLnZlcnRpY2VzTmVlZFVwZGF0ZT0hMTtiLm5vcm1hbHNOZWVkVXBkYXRlPSExO2IuY29sb3JzTmVlZFVwZGF0ZT0hMTtiLnV2c05lZWRVcGRhdGU9ITE7Yi5ncm91cHNOZWVkVXBkYXRlPSExO2I9Y30hMD09PWIudmVydGljZXNOZWVkVXBkYXRlJiYoYz10aGlzLmF0dHJpYnV0ZXMucG9zaXRpb24sdm9pZCAwIT09XG5jJiYoYy5jb3B5VmVjdG9yM3NBcnJheShiLnZlcnRpY2VzKSxjLm5lZWRzVXBkYXRlPSEwKSxiLnZlcnRpY2VzTmVlZFVwZGF0ZT0hMSk7ITA9PT1iLm5vcm1hbHNOZWVkVXBkYXRlJiYoYz10aGlzLmF0dHJpYnV0ZXMubm9ybWFsLHZvaWQgMCE9PWMmJihjLmNvcHlWZWN0b3Izc0FycmF5KGIubm9ybWFscyksYy5uZWVkc1VwZGF0ZT0hMCksYi5ub3JtYWxzTmVlZFVwZGF0ZT0hMSk7ITA9PT1iLmNvbG9yc05lZWRVcGRhdGUmJihjPXRoaXMuYXR0cmlidXRlcy5jb2xvcix2b2lkIDAhPT1jJiYoYy5jb3B5Q29sb3JzQXJyYXkoYi5jb2xvcnMpLGMubmVlZHNVcGRhdGU9ITApLGIuY29sb3JzTmVlZFVwZGF0ZT0hMSk7Yi51dnNOZWVkVXBkYXRlJiYoYz10aGlzLmF0dHJpYnV0ZXMudXYsdm9pZCAwIT09YyYmKGMuY29weVZlY3RvcjJzQXJyYXkoYi51dnMpLGMubmVlZHNVcGRhdGU9ITApLGIudXZzTmVlZFVwZGF0ZT0hMSk7Yi5saW5lRGlzdGFuY2VzTmVlZFVwZGF0ZSYmKGM9dGhpcy5hdHRyaWJ1dGVzLmxpbmVEaXN0YW5jZSxcbnZvaWQgMCE9PWMmJihjLmNvcHlBcnJheShiLmxpbmVEaXN0YW5jZXMpLGMubmVlZHNVcGRhdGU9ITApLGIubGluZURpc3RhbmNlc05lZWRVcGRhdGU9ITEpO2IuZ3JvdXBzTmVlZFVwZGF0ZSYmKGIuY29tcHV0ZUdyb3VwcyhhLmdlb21ldHJ5KSx0aGlzLmdyb3Vwcz1iLmdyb3VwcyxiLmdyb3Vwc05lZWRVcGRhdGU9ITEpO3JldHVybiB0aGlzfSxmcm9tR2VvbWV0cnk6ZnVuY3Rpb24oYSl7YS5fX2RpcmVjdEdlb21ldHJ5PShuZXcgVEhSRUUuRGlyZWN0R2VvbWV0cnkpLmZyb21HZW9tZXRyeShhKTtyZXR1cm4gdGhpcy5mcm9tRGlyZWN0R2VvbWV0cnkoYS5fX2RpcmVjdEdlb21ldHJ5KX0sZnJvbURpcmVjdEdlb21ldHJ5OmZ1bmN0aW9uKGEpe3ZhciBiPW5ldyBGbG9hdDMyQXJyYXkoMyphLnZlcnRpY2VzLmxlbmd0aCk7dGhpcy5hZGRBdHRyaWJ1dGUoXCJwb3NpdGlvblwiLChuZXcgVEhSRUUuQnVmZmVyQXR0cmlidXRlKGIsMykpLmNvcHlWZWN0b3Izc0FycmF5KGEudmVydGljZXMpKTtcbjA8YS5ub3JtYWxzLmxlbmd0aCYmKGI9bmV3IEZsb2F0MzJBcnJheSgzKmEubm9ybWFscy5sZW5ndGgpLHRoaXMuYWRkQXR0cmlidXRlKFwibm9ybWFsXCIsKG5ldyBUSFJFRS5CdWZmZXJBdHRyaWJ1dGUoYiwzKSkuY29weVZlY3RvcjNzQXJyYXkoYS5ub3JtYWxzKSkpOzA8YS5jb2xvcnMubGVuZ3RoJiYoYj1uZXcgRmxvYXQzMkFycmF5KDMqYS5jb2xvcnMubGVuZ3RoKSx0aGlzLmFkZEF0dHJpYnV0ZShcImNvbG9yXCIsKG5ldyBUSFJFRS5CdWZmZXJBdHRyaWJ1dGUoYiwzKSkuY29weUNvbG9yc0FycmF5KGEuY29sb3JzKSkpOzA8YS51dnMubGVuZ3RoJiYoYj1uZXcgRmxvYXQzMkFycmF5KDIqYS51dnMubGVuZ3RoKSx0aGlzLmFkZEF0dHJpYnV0ZShcInV2XCIsKG5ldyBUSFJFRS5CdWZmZXJBdHRyaWJ1dGUoYiwyKSkuY29weVZlY3RvcjJzQXJyYXkoYS51dnMpKSk7MDxhLnV2czIubGVuZ3RoJiYoYj1uZXcgRmxvYXQzMkFycmF5KDIqYS51dnMyLmxlbmd0aCksdGhpcy5hZGRBdHRyaWJ1dGUoXCJ1djJcIixcbihuZXcgVEhSRUUuQnVmZmVyQXR0cmlidXRlKGIsMikpLmNvcHlWZWN0b3Iyc0FycmF5KGEudXZzMikpKTswPGEuaW5kaWNlcy5sZW5ndGgmJihiPW5ldyAoNjU1MzU8YS52ZXJ0aWNlcy5sZW5ndGg/VWludDMyQXJyYXk6VWludDE2QXJyYXkpKDMqYS5pbmRpY2VzLmxlbmd0aCksdGhpcy5zZXRJbmRleCgobmV3IFRIUkVFLkJ1ZmZlckF0dHJpYnV0ZShiLDEpKS5jb3B5SW5kaWNlc0FycmF5KGEuaW5kaWNlcykpKTt0aGlzLmdyb3Vwcz1hLmdyb3Vwcztmb3IodmFyIGMgaW4gYS5tb3JwaFRhcmdldHMpe2Zvcih2YXIgYj1bXSxkPWEubW9ycGhUYXJnZXRzW2NdLGU9MCxmPWQubGVuZ3RoO2U8ZjtlKyspe3ZhciBnPWRbZV0saD1uZXcgVEhSRUUuRmxvYXQzMkF0dHJpYnV0ZSgzKmcubGVuZ3RoLDMpO2IucHVzaChoLmNvcHlWZWN0b3Izc0FycmF5KGcpKX10aGlzLm1vcnBoQXR0cmlidXRlc1tjXT1ifTA8YS5za2luSW5kaWNlcy5sZW5ndGgmJihjPW5ldyBUSFJFRS5GbG9hdDMyQXR0cmlidXRlKDQqXG5hLnNraW5JbmRpY2VzLmxlbmd0aCw0KSx0aGlzLmFkZEF0dHJpYnV0ZShcInNraW5JbmRleFwiLGMuY29weVZlY3RvcjRzQXJyYXkoYS5za2luSW5kaWNlcykpKTswPGEuc2tpbldlaWdodHMubGVuZ3RoJiYoYz1uZXcgVEhSRUUuRmxvYXQzMkF0dHJpYnV0ZSg0KmEuc2tpbldlaWdodHMubGVuZ3RoLDQpLHRoaXMuYWRkQXR0cmlidXRlKFwic2tpbldlaWdodFwiLGMuY29weVZlY3RvcjRzQXJyYXkoYS5za2luV2VpZ2h0cykpKTtudWxsIT09YS5ib3VuZGluZ1NwaGVyZSYmKHRoaXMuYm91bmRpbmdTcGhlcmU9YS5ib3VuZGluZ1NwaGVyZS5jbG9uZSgpKTtudWxsIT09YS5ib3VuZGluZ0JveCYmKHRoaXMuYm91bmRpbmdCb3g9YS5ib3VuZGluZ0JveC5jbG9uZSgpKTtyZXR1cm4gdGhpc30sY29tcHV0ZUJvdW5kaW5nQm94OmZ1bmN0aW9uKCl7bnVsbD09PXRoaXMuYm91bmRpbmdCb3gmJih0aGlzLmJvdW5kaW5nQm94PW5ldyBUSFJFRS5Cb3gzKTt2YXIgYT10aGlzLmF0dHJpYnV0ZXMucG9zaXRpb24uYXJyYXk7XG52b2lkIDAhPT1hP3RoaXMuYm91bmRpbmdCb3guc2V0RnJvbUFycmF5KGEpOnRoaXMuYm91bmRpbmdCb3gubWFrZUVtcHR5KCk7KGlzTmFOKHRoaXMuYm91bmRpbmdCb3gubWluLngpfHxpc05hTih0aGlzLmJvdW5kaW5nQm94Lm1pbi55KXx8aXNOYU4odGhpcy5ib3VuZGluZ0JveC5taW4ueikpJiZjb25zb2xlLmVycm9yKCdUSFJFRS5CdWZmZXJHZW9tZXRyeS5jb21wdXRlQm91bmRpbmdCb3g6IENvbXB1dGVkIG1pbi9tYXggaGF2ZSBOYU4gdmFsdWVzLiBUaGUgXCJwb3NpdGlvblwiIGF0dHJpYnV0ZSBpcyBsaWtlbHkgdG8gaGF2ZSBOYU4gdmFsdWVzLicsdGhpcyl9LGNvbXB1dGVCb3VuZGluZ1NwaGVyZTpmdW5jdGlvbigpe3ZhciBhPW5ldyBUSFJFRS5Cb3gzLGI9bmV3IFRIUkVFLlZlY3RvcjM7cmV0dXJuIGZ1bmN0aW9uKCl7bnVsbD09PXRoaXMuYm91bmRpbmdTcGhlcmUmJih0aGlzLmJvdW5kaW5nU3BoZXJlPW5ldyBUSFJFRS5TcGhlcmUpO3ZhciBjPXRoaXMuYXR0cmlidXRlcy5wb3NpdGlvbjtcbmlmKGMpe3ZhciBjPWMuYXJyYXksZD10aGlzLmJvdW5kaW5nU3BoZXJlLmNlbnRlcjthLnNldEZyb21BcnJheShjKTthLmNlbnRlcihkKTtmb3IodmFyIGU9MCxmPTAsZz1jLmxlbmd0aDtmPGc7Zis9MyliLmZyb21BcnJheShjLGYpLGU9TWF0aC5tYXgoZSxkLmRpc3RhbmNlVG9TcXVhcmVkKGIpKTt0aGlzLmJvdW5kaW5nU3BoZXJlLnJhZGl1cz1NYXRoLnNxcnQoZSk7aXNOYU4odGhpcy5ib3VuZGluZ1NwaGVyZS5yYWRpdXMpJiZjb25zb2xlLmVycm9yKCdUSFJFRS5CdWZmZXJHZW9tZXRyeS5jb21wdXRlQm91bmRpbmdTcGhlcmUoKTogQ29tcHV0ZWQgcmFkaXVzIGlzIE5hTi4gVGhlIFwicG9zaXRpb25cIiBhdHRyaWJ1dGUgaXMgbGlrZWx5IHRvIGhhdmUgTmFOIHZhbHVlcy4nLHRoaXMpfX19KCksY29tcHV0ZUZhY2VOb3JtYWxzOmZ1bmN0aW9uKCl7fSxjb21wdXRlVmVydGV4Tm9ybWFsczpmdW5jdGlvbigpe3ZhciBhPXRoaXMuaW5kZXgsYj10aGlzLmF0dHJpYnV0ZXMsYz10aGlzLmdyb3VwcztcbmlmKGIucG9zaXRpb24pe3ZhciBkPWIucG9zaXRpb24uYXJyYXk7aWYodm9pZCAwPT09Yi5ub3JtYWwpdGhpcy5hZGRBdHRyaWJ1dGUoXCJub3JtYWxcIixuZXcgVEhSRUUuQnVmZmVyQXR0cmlidXRlKG5ldyBGbG9hdDMyQXJyYXkoZC5sZW5ndGgpLDMpKTtlbHNlIGZvcih2YXIgZT1iLm5vcm1hbC5hcnJheSxmPTAsZz1lLmxlbmd0aDtmPGc7ZisrKWVbZl09MDt2YXIgZT1iLm5vcm1hbC5hcnJheSxoLGssbCxtPW5ldyBUSFJFRS5WZWN0b3IzLHA9bmV3IFRIUkVFLlZlY3RvcjMsbj1uZXcgVEhSRUUuVmVjdG9yMyxxPW5ldyBUSFJFRS5WZWN0b3IzLHI9bmV3IFRIUkVFLlZlY3RvcjM7aWYoYSl7YT1hLmFycmF5OzA9PT1jLmxlbmd0aCYmdGhpcy5hZGRHcm91cCgwLGEubGVuZ3RoKTtmb3IodmFyIHM9MCx2PWMubGVuZ3RoO3M8djsrK3MpZm9yKGY9Y1tzXSxnPWYuc3RhcnQsaD1mLmNvdW50LGY9ZyxnKz1oO2Y8ZztmKz0zKWg9MyphW2YrMF0saz0zKmFbZisxXSxsPTMqYVtmKzJdLG0uZnJvbUFycmF5KGQsXG5oKSxwLmZyb21BcnJheShkLGspLG4uZnJvbUFycmF5KGQsbCkscS5zdWJWZWN0b3JzKG4scCksci5zdWJWZWN0b3JzKG0scCkscS5jcm9zcyhyKSxlW2hdKz1xLngsZVtoKzFdKz1xLnksZVtoKzJdKz1xLnosZVtrXSs9cS54LGVbaysxXSs9cS55LGVbaysyXSs9cS56LGVbbF0rPXEueCxlW2wrMV0rPXEueSxlW2wrMl0rPXEuen1lbHNlIGZvcihmPTAsZz1kLmxlbmd0aDtmPGc7Zis9OSltLmZyb21BcnJheShkLGYpLHAuZnJvbUFycmF5KGQsZiszKSxuLmZyb21BcnJheShkLGYrNikscS5zdWJWZWN0b3JzKG4scCksci5zdWJWZWN0b3JzKG0scCkscS5jcm9zcyhyKSxlW2ZdPXEueCxlW2YrMV09cS55LGVbZisyXT1xLnosZVtmKzNdPXEueCxlW2YrNF09cS55LGVbZis1XT1xLnosZVtmKzZdPXEueCxlW2YrN109cS55LGVbZis4XT1xLno7dGhpcy5ub3JtYWxpemVOb3JtYWxzKCk7Yi5ub3JtYWwubmVlZHNVcGRhdGU9ITB9fSxtZXJnZTpmdW5jdGlvbihhLGIpe2lmKCExPT09YSBpbnN0YW5jZW9mXG5USFJFRS5CdWZmZXJHZW9tZXRyeSljb25zb2xlLmVycm9yKFwiVEhSRUUuQnVmZmVyR2VvbWV0cnkubWVyZ2UoKTogZ2VvbWV0cnkgbm90IGFuIGluc3RhbmNlIG9mIFRIUkVFLkJ1ZmZlckdlb21ldHJ5LlwiLGEpO2Vsc2V7dm9pZCAwPT09YiYmKGI9MCk7dmFyIGM9dGhpcy5hdHRyaWJ1dGVzLGQ7Zm9yKGQgaW4gYylpZih2b2lkIDAhPT1hLmF0dHJpYnV0ZXNbZF0pZm9yKHZhciBlPWNbZF0uYXJyYXksZj1hLmF0dHJpYnV0ZXNbZF0sZz1mLmFycmF5LGg9MCxmPWYuaXRlbVNpemUqYjtoPGcubGVuZ3RoO2grKyxmKyspZVtmXT1nW2hdO3JldHVybiB0aGlzfX0sbm9ybWFsaXplTm9ybWFsczpmdW5jdGlvbigpe2Zvcih2YXIgYT10aGlzLmF0dHJpYnV0ZXMubm9ybWFsLmFycmF5LGIsYyxkLGU9MCxmPWEubGVuZ3RoO2U8ZjtlKz0zKWI9YVtlXSxjPWFbZSsxXSxkPWFbZSsyXSxiPTEvTWF0aC5zcXJ0KGIqYitjKmMrZCpkKSxhW2VdKj1iLGFbZSsxXSo9YixhW2UrMl0qPWJ9LHRvTm9uSW5kZXhlZDpmdW5jdGlvbigpe2lmKG51bGw9PT1cbnRoaXMuaW5kZXgpcmV0dXJuIGNvbnNvbGUud2FybihcIlRIUkVFLkJ1ZmZlckdlb21ldHJ5LnRvTm9uSW5kZXhlZCgpOiBHZW9tZXRyeSBpcyBhbHJlYWR5IG5vbi1pbmRleGVkLlwiKSx0aGlzO3ZhciBhPW5ldyBUSFJFRS5CdWZmZXJHZW9tZXRyeSxiPXRoaXMuaW5kZXguYXJyYXksYz10aGlzLmF0dHJpYnV0ZXMsZDtmb3IoZCBpbiBjKXtmb3IodmFyIGU9Y1tkXSxmPWUuYXJyYXksZT1lLml0ZW1TaXplLGc9bmV3IGYuY29uc3RydWN0b3IoYi5sZW5ndGgqZSksaD0wLGs9MCxsPTAsbT1iLmxlbmd0aDtsPG07bCsrKWZvcih2YXIgaD1iW2xdKmUscD0wO3A8ZTtwKyspZ1trKytdPWZbaCsrXTthLmFkZEF0dHJpYnV0ZShkLG5ldyBUSFJFRS5CdWZmZXJBdHRyaWJ1dGUoZyxlKSl9cmV0dXJuIGF9LHRvSlNPTjpmdW5jdGlvbigpe3ZhciBhPXttZXRhZGF0YTp7dmVyc2lvbjo0LjQsdHlwZTpcIkJ1ZmZlckdlb21ldHJ5XCIsZ2VuZXJhdG9yOlwiQnVmZmVyR2VvbWV0cnkudG9KU09OXCJ9fTthLnV1aWQ9XG50aGlzLnV1aWQ7YS50eXBlPXRoaXMudHlwZTtcIlwiIT09dGhpcy5uYW1lJiYoYS5uYW1lPXRoaXMubmFtZSk7aWYodm9pZCAwIT09dGhpcy5wYXJhbWV0ZXJzKXt2YXIgYj10aGlzLnBhcmFtZXRlcnMsYztmb3IoYyBpbiBiKXZvaWQgMCE9PWJbY10mJihhW2NdPWJbY10pO3JldHVybiBhfWEuZGF0YT17YXR0cmlidXRlczp7fX07dmFyIGQ9dGhpcy5pbmRleDtudWxsIT09ZCYmKGI9QXJyYXkucHJvdG90eXBlLnNsaWNlLmNhbGwoZC5hcnJheSksYS5kYXRhLmluZGV4PXt0eXBlOmQuYXJyYXkuY29uc3RydWN0b3IubmFtZSxhcnJheTpifSk7ZD10aGlzLmF0dHJpYnV0ZXM7Zm9yKGMgaW4gZCl7dmFyIGU9ZFtjXSxiPUFycmF5LnByb3RvdHlwZS5zbGljZS5jYWxsKGUuYXJyYXkpO2EuZGF0YS5hdHRyaWJ1dGVzW2NdPXtpdGVtU2l6ZTplLml0ZW1TaXplLHR5cGU6ZS5hcnJheS5jb25zdHJ1Y3Rvci5uYW1lLGFycmF5OmIsbm9ybWFsaXplZDplLm5vcm1hbGl6ZWR9fWM9dGhpcy5ncm91cHM7XG4wPGMubGVuZ3RoJiYoYS5kYXRhLmdyb3Vwcz1KU09OLnBhcnNlKEpTT04uc3RyaW5naWZ5KGMpKSk7Yz10aGlzLmJvdW5kaW5nU3BoZXJlO251bGwhPT1jJiYoYS5kYXRhLmJvdW5kaW5nU3BoZXJlPXtjZW50ZXI6Yy5jZW50ZXIudG9BcnJheSgpLHJhZGl1czpjLnJhZGl1c30pO3JldHVybiBhfSxjbG9uZTpmdW5jdGlvbigpe3JldHVybihuZXcgVEhSRUUuQnVmZmVyR2VvbWV0cnkpLmNvcHkodGhpcyl9LGNvcHk6ZnVuY3Rpb24oYSl7dmFyIGI9YS5pbmRleDtudWxsIT09YiYmdGhpcy5zZXRJbmRleChiLmNsb25lKCkpO3ZhciBiPWEuYXR0cmlidXRlcyxjO2ZvcihjIGluIGIpdGhpcy5hZGRBdHRyaWJ1dGUoYyxiW2NdLmNsb25lKCkpO2E9YS5ncm91cHM7Yz0wO2ZvcihiPWEubGVuZ3RoO2M8YjtjKyspe3ZhciBkPWFbY107dGhpcy5hZGRHcm91cChkLnN0YXJ0LGQuY291bnQsZC5tYXRlcmlhbEluZGV4KX1yZXR1cm4gdGhpc30sZGlzcG9zZTpmdW5jdGlvbigpe3RoaXMuZGlzcGF0Y2hFdmVudCh7dHlwZTpcImRpc3Bvc2VcIn0pfX0pO1xuVEhSRUUuQnVmZmVyR2VvbWV0cnkuTWF4SW5kZXg9NjU1MzU7VEhSRUUuSW5zdGFuY2VkQnVmZmVyR2VvbWV0cnk9ZnVuY3Rpb24oKXtUSFJFRS5CdWZmZXJHZW9tZXRyeS5jYWxsKHRoaXMpO3RoaXMudHlwZT1cIkluc3RhbmNlZEJ1ZmZlckdlb21ldHJ5XCI7dGhpcy5tYXhJbnN0YW5jZWRDb3VudD12b2lkIDB9O1RIUkVFLkluc3RhbmNlZEJ1ZmZlckdlb21ldHJ5LnByb3RvdHlwZT1PYmplY3QuY3JlYXRlKFRIUkVFLkJ1ZmZlckdlb21ldHJ5LnByb3RvdHlwZSk7VEhSRUUuSW5zdGFuY2VkQnVmZmVyR2VvbWV0cnkucHJvdG90eXBlLmNvbnN0cnVjdG9yPVRIUkVFLkluc3RhbmNlZEJ1ZmZlckdlb21ldHJ5O1RIUkVFLkluc3RhbmNlZEJ1ZmZlckdlb21ldHJ5LnByb3RvdHlwZS5hZGRHcm91cD1mdW5jdGlvbihhLGIsYyl7dGhpcy5ncm91cHMucHVzaCh7c3RhcnQ6YSxjb3VudDpiLGluc3RhbmNlczpjfSl9O1xuVEhSRUUuSW5zdGFuY2VkQnVmZmVyR2VvbWV0cnkucHJvdG90eXBlLmNvcHk9ZnVuY3Rpb24oYSl7dmFyIGI9YS5pbmRleDtudWxsIT09YiYmdGhpcy5zZXRJbmRleChiLmNsb25lKCkpO3ZhciBiPWEuYXR0cmlidXRlcyxjO2ZvcihjIGluIGIpdGhpcy5hZGRBdHRyaWJ1dGUoYyxiW2NdLmNsb25lKCkpO2E9YS5ncm91cHM7Yz0wO2ZvcihiPWEubGVuZ3RoO2M8YjtjKyspe3ZhciBkPWFbY107dGhpcy5hZGRHcm91cChkLnN0YXJ0LGQuY291bnQsZC5pbnN0YW5jZXMpfXJldHVybiB0aGlzfTtUSFJFRS5Vbmlmb3JtPWZ1bmN0aW9uKGEsYil7XCJzdHJpbmdcIj09PXR5cGVvZiBhJiYoY29uc29sZS53YXJuKFwiVEhSRUUuVW5pZm9ybTogVHlwZSBwYXJhbWV0ZXIgaXMgbm8gbG9uZ2VyIG5lZWRlZC5cIiksYT1iKTt0aGlzLnZhbHVlPWE7dGhpcy5keW5hbWljPSExfTtcblRIUkVFLlVuaWZvcm0ucHJvdG90eXBlPXtjb25zdHJ1Y3RvcjpUSFJFRS5Vbmlmb3JtLG9uVXBkYXRlOmZ1bmN0aW9uKGEpe3RoaXMuZHluYW1pYz0hMDt0aGlzLm9uVXBkYXRlQ2FsbGJhY2s9YTtyZXR1cm4gdGhpc319O1RIUkVFLkFuaW1hdGlvbkFjdGlvbj1mdW5jdGlvbigpe3Rocm93IEVycm9yKFwiVEhSRUUuQW5pbWF0aW9uQWN0aW9uOiBVc2UgbWl4ZXIuY2xpcEFjdGlvbiBmb3IgY29uc3RydWN0aW9uLlwiKTt9O1xuVEhSRUUuQW5pbWF0aW9uQWN0aW9uLl9uZXc9ZnVuY3Rpb24oYSxiLGMpe3RoaXMuX21peGVyPWE7dGhpcy5fY2xpcD1iO3RoaXMuX2xvY2FsUm9vdD1jfHxudWxsO2E9Yi50cmFja3M7Yj1hLmxlbmd0aDtjPUFycmF5KGIpO2Zvcih2YXIgZD17ZW5kaW5nU3RhcnQ6VEhSRUUuWmVyb0N1cnZhdHVyZUVuZGluZyxlbmRpbmdFbmQ6VEhSRUUuWmVyb0N1cnZhdHVyZUVuZGluZ30sZT0wO2UhPT1iOysrZSl7dmFyIGY9YVtlXS5jcmVhdGVJbnRlcnBvbGFudChudWxsKTtjW2VdPWY7Zi5zZXR0aW5ncz1kfXRoaXMuX2ludGVycG9sYW50U2V0dGluZ3M9ZDt0aGlzLl9pbnRlcnBvbGFudHM9Yzt0aGlzLl9wcm9wZXJ0eUJpbmRpbmdzPUFycmF5KGIpO3RoaXMuX3dlaWdodEludGVycG9sYW50PXRoaXMuX3RpbWVTY2FsZUludGVycG9sYW50PXRoaXMuX2J5Q2xpcENhY2hlSW5kZXg9dGhpcy5fY2FjaGVJbmRleD1udWxsO3RoaXMubG9vcD1USFJFRS5Mb29wUmVwZWF0O3RoaXMuX2xvb3BDb3VudD1cbi0xO3RoaXMuX3N0YXJ0VGltZT1udWxsO3RoaXMudGltZT0wO3RoaXMuX2VmZmVjdGl2ZVdlaWdodD10aGlzLndlaWdodD10aGlzLl9lZmZlY3RpdmVUaW1lU2NhbGU9dGhpcy50aW1lU2NhbGU9MTt0aGlzLnJlcGV0aXRpb25zPUluZmluaXR5O3RoaXMucGF1c2VkPSExO3RoaXMuZW5hYmxlZD0hMDt0aGlzLmNsYW1wV2hlbkZpbmlzaGVkPSExO3RoaXMuemVyb1Nsb3BlQXRFbmQ9dGhpcy56ZXJvU2xvcGVBdFN0YXJ0PSEwfTtcblRIUkVFLkFuaW1hdGlvbkFjdGlvbi5fbmV3LnByb3RvdHlwZT17Y29uc3RydWN0b3I6VEhSRUUuQW5pbWF0aW9uQWN0aW9uLl9uZXcscGxheTpmdW5jdGlvbigpe3RoaXMuX21peGVyLl9hY3RpdmF0ZUFjdGlvbih0aGlzKTtyZXR1cm4gdGhpc30sc3RvcDpmdW5jdGlvbigpe3RoaXMuX21peGVyLl9kZWFjdGl2YXRlQWN0aW9uKHRoaXMpO3JldHVybiB0aGlzLnJlc2V0KCl9LHJlc2V0OmZ1bmN0aW9uKCl7dGhpcy5wYXVzZWQ9ITE7dGhpcy5lbmFibGVkPSEwO3RoaXMudGltZT0wO3RoaXMuX2xvb3BDb3VudD0tMTt0aGlzLl9zdGFydFRpbWU9bnVsbDtyZXR1cm4gdGhpcy5zdG9wRmFkaW5nKCkuc3RvcFdhcnBpbmcoKX0saXNSdW5uaW5nOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuZW5hYmxlZCYmIXRoaXMucGF1c2VkJiYwIT09dGhpcy50aW1lU2NhbGUmJm51bGw9PT10aGlzLl9zdGFydFRpbWUmJnRoaXMuX21peGVyLl9pc0FjdGl2ZUFjdGlvbih0aGlzKX0saXNTY2hlZHVsZWQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fbWl4ZXIuX2lzQWN0aXZlQWN0aW9uKHRoaXMpfSxcbnN0YXJ0QXQ6ZnVuY3Rpb24oYSl7dGhpcy5fc3RhcnRUaW1lPWE7cmV0dXJuIHRoaXN9LHNldExvb3A6ZnVuY3Rpb24oYSxiKXt0aGlzLmxvb3A9YTt0aGlzLnJlcGV0aXRpb25zPWI7cmV0dXJuIHRoaXN9LHNldEVmZmVjdGl2ZVdlaWdodDpmdW5jdGlvbihhKXt0aGlzLndlaWdodD1hO3RoaXMuX2VmZmVjdGl2ZVdlaWdodD10aGlzLmVuYWJsZWQ/YTowO3JldHVybiB0aGlzLnN0b3BGYWRpbmcoKX0sZ2V0RWZmZWN0aXZlV2VpZ2h0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX2VmZmVjdGl2ZVdlaWdodH0sZmFkZUluOmZ1bmN0aW9uKGEpe3JldHVybiB0aGlzLl9zY2hlZHVsZUZhZGluZyhhLDAsMSl9LGZhZGVPdXQ6ZnVuY3Rpb24oYSl7cmV0dXJuIHRoaXMuX3NjaGVkdWxlRmFkaW5nKGEsMSwwKX0sY3Jvc3NGYWRlRnJvbTpmdW5jdGlvbihhLGIsYyl7YS5mYWRlT3V0KGIpO3RoaXMuZmFkZUluKGIpO2lmKGMpe2M9dGhpcy5fY2xpcC5kdXJhdGlvbjt2YXIgZD1hLl9jbGlwLmR1cmF0aW9uLFxuZT1jL2Q7YS53YXJwKDEsZC9jLGIpO3RoaXMud2FycChlLDEsYil9cmV0dXJuIHRoaXN9LGNyb3NzRmFkZVRvOmZ1bmN0aW9uKGEsYixjKXtyZXR1cm4gYS5jcm9zc0ZhZGVGcm9tKHRoaXMsYixjKX0sc3RvcEZhZGluZzpmdW5jdGlvbigpe3ZhciBhPXRoaXMuX3dlaWdodEludGVycG9sYW50O251bGwhPT1hJiYodGhpcy5fd2VpZ2h0SW50ZXJwb2xhbnQ9bnVsbCx0aGlzLl9taXhlci5fdGFrZUJhY2tDb250cm9sSW50ZXJwb2xhbnQoYSkpO3JldHVybiB0aGlzfSxzZXRFZmZlY3RpdmVUaW1lU2NhbGU6ZnVuY3Rpb24oYSl7dGhpcy50aW1lU2NhbGU9YTt0aGlzLl9lZmZlY3RpdmVUaW1lU2NhbGU9dGhpcy5wYXVzZWQ/MDphO3JldHVybiB0aGlzLnN0b3BXYXJwaW5nKCl9LGdldEVmZmVjdGl2ZVRpbWVTY2FsZTpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9lZmZlY3RpdmVUaW1lU2NhbGV9LHNldER1cmF0aW9uOmZ1bmN0aW9uKGEpe3RoaXMudGltZVNjYWxlPXRoaXMuX2NsaXAuZHVyYXRpb24vXG5hO3JldHVybiB0aGlzLnN0b3BXYXJwaW5nKCl9LHN5bmNXaXRoOmZ1bmN0aW9uKGEpe3RoaXMudGltZT1hLnRpbWU7dGhpcy50aW1lU2NhbGU9YS50aW1lU2NhbGU7cmV0dXJuIHRoaXMuc3RvcFdhcnBpbmcoKX0saGFsdDpmdW5jdGlvbihhKXtyZXR1cm4gdGhpcy53YXJwKHRoaXMuX2VmZmVjdGl2ZVRpbWVTY2FsZSwwLGEpfSx3YXJwOmZ1bmN0aW9uKGEsYixjKXt2YXIgZD10aGlzLl9taXhlcixlPWQudGltZSxmPXRoaXMuX3RpbWVTY2FsZUludGVycG9sYW50LGc9dGhpcy50aW1lU2NhbGU7bnVsbD09PWYmJih0aGlzLl90aW1lU2NhbGVJbnRlcnBvbGFudD1mPWQuX2xlbmRDb250cm9sSW50ZXJwb2xhbnQoKSk7ZD1mLnBhcmFtZXRlclBvc2l0aW9ucztmPWYuc2FtcGxlVmFsdWVzO2RbMF09ZTtkWzFdPWUrYztmWzBdPWEvZztmWzFdPWIvZztyZXR1cm4gdGhpc30sc3RvcFdhcnBpbmc6ZnVuY3Rpb24oKXt2YXIgYT10aGlzLl90aW1lU2NhbGVJbnRlcnBvbGFudDtudWxsIT09YSYmXG4odGhpcy5fdGltZVNjYWxlSW50ZXJwb2xhbnQ9bnVsbCx0aGlzLl9taXhlci5fdGFrZUJhY2tDb250cm9sSW50ZXJwb2xhbnQoYSkpO3JldHVybiB0aGlzfSxnZXRNaXhlcjpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9taXhlcn0sZ2V0Q2xpcDpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9jbGlwfSxnZXRSb290OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX2xvY2FsUm9vdHx8dGhpcy5fbWl4ZXIuX3Jvb3R9LF91cGRhdGU6ZnVuY3Rpb24oYSxiLGMsZCl7dmFyIGU9dGhpcy5fc3RhcnRUaW1lO2lmKG51bGwhPT1lKXtiPShhLWUpKmM7aWYoMD5ifHwwPT09YylyZXR1cm47dGhpcy5fc3RhcnRUaW1lPW51bGw7Yio9Y31iKj10aGlzLl91cGRhdGVUaW1lU2NhbGUoYSk7Yz10aGlzLl91cGRhdGVUaW1lKGIpO2E9dGhpcy5fdXBkYXRlV2VpZ2h0KGEpO2lmKDA8YSl7Yj10aGlzLl9pbnRlcnBvbGFudHM7Zm9yKHZhciBlPXRoaXMuX3Byb3BlcnR5QmluZGluZ3MsZj0wLGc9Yi5sZW5ndGg7ZiE9PVxuZzsrK2YpYltmXS5ldmFsdWF0ZShjKSxlW2ZdLmFjY3VtdWxhdGUoZCxhKX19LF91cGRhdGVXZWlnaHQ6ZnVuY3Rpb24oYSl7dmFyIGI9MDtpZih0aGlzLmVuYWJsZWQpe3ZhciBiPXRoaXMud2VpZ2h0LGM9dGhpcy5fd2VpZ2h0SW50ZXJwb2xhbnQ7aWYobnVsbCE9PWMpe3ZhciBkPWMuZXZhbHVhdGUoYSlbMF0sYj1iKmQ7YT5jLnBhcmFtZXRlclBvc2l0aW9uc1sxXSYmKHRoaXMuc3RvcEZhZGluZygpLDA9PT1kJiYodGhpcy5lbmFibGVkPSExKSl9fXJldHVybiB0aGlzLl9lZmZlY3RpdmVXZWlnaHQ9Yn0sX3VwZGF0ZVRpbWVTY2FsZTpmdW5jdGlvbihhKXt2YXIgYj0wO2lmKCF0aGlzLnBhdXNlZCl7dmFyIGI9dGhpcy50aW1lU2NhbGUsYz10aGlzLl90aW1lU2NhbGVJbnRlcnBvbGFudDtpZihudWxsIT09Yyl7dmFyIGQ9Yy5ldmFsdWF0ZShhKVswXSxiPWIqZDthPmMucGFyYW1ldGVyUG9zaXRpb25zWzFdJiYodGhpcy5zdG9wV2FycGluZygpLDA9PT1iP3RoaXMucGF1c2VkPSEwOlxudGhpcy50aW1lU2NhbGU9Yil9fXJldHVybiB0aGlzLl9lZmZlY3RpdmVUaW1lU2NhbGU9Yn0sX3VwZGF0ZVRpbWU6ZnVuY3Rpb24oYSl7dmFyIGI9dGhpcy50aW1lK2E7aWYoMD09PWEpcmV0dXJuIGI7dmFyIGM9dGhpcy5fY2xpcC5kdXJhdGlvbixkPXRoaXMubG9vcCxlPXRoaXMuX2xvb3BDb3VudDtpZihkPT09VEhSRUUuTG9vcE9uY2UpYTp7aWYoLTE9PT1lJiYodGhpcy5sb29wQ291bnQ9MCx0aGlzLl9zZXRFbmRpbmdzKCEwLCEwLCExKSksYj49YyliPWM7ZWxzZSBpZigwPmIpYj0wO2Vsc2UgYnJlYWsgYTt0aGlzLmNsYW1wV2hlbkZpbmlzaGVkP3RoaXMucGF1c2VkPSEwOnRoaXMuZW5hYmxlZD0hMTt0aGlzLl9taXhlci5kaXNwYXRjaEV2ZW50KHt0eXBlOlwiZmluaXNoZWRcIixhY3Rpb246dGhpcyxkaXJlY3Rpb246MD5hPy0xOjF9KX1lbHNle2Q9ZD09PVRIUkVFLkxvb3BQaW5nUG9uZzstMT09PWUmJigwPD1hPyhlPTAsdGhpcy5fc2V0RW5kaW5ncyghMCwwPT09dGhpcy5yZXBldGl0aW9ucyxcbmQpKTp0aGlzLl9zZXRFbmRpbmdzKDA9PT10aGlzLnJlcGV0aXRpb25zLCEwLGQpKTtpZihiPj1jfHwwPmIpe3ZhciBmPU1hdGguZmxvb3IoYi9jKSxiPWItYypmLGU9ZStNYXRoLmFicyhmKSxnPXRoaXMucmVwZXRpdGlvbnMtZTswPmc/KHRoaXMuY2xhbXBXaGVuRmluaXNoZWQ/dGhpcy5wYXVzZWQ9ITA6dGhpcy5lbmFibGVkPSExLGI9MDxhP2M6MCx0aGlzLl9taXhlci5kaXNwYXRjaEV2ZW50KHt0eXBlOlwiZmluaXNoZWRcIixhY3Rpb246dGhpcyxkaXJlY3Rpb246MDxhPzE6LTF9KSk6KDA9PT1nPyhhPTA+YSx0aGlzLl9zZXRFbmRpbmdzKGEsIWEsZCkpOnRoaXMuX3NldEVuZGluZ3MoITEsITEsZCksdGhpcy5fbG9vcENvdW50PWUsdGhpcy5fbWl4ZXIuZGlzcGF0Y2hFdmVudCh7dHlwZTpcImxvb3BcIixhY3Rpb246dGhpcyxsb29wRGVsdGE6Zn0pKX1pZihkJiYxPT09KGUmMSkpcmV0dXJuIHRoaXMudGltZT1iLGMtYn1yZXR1cm4gdGhpcy50aW1lPWJ9LF9zZXRFbmRpbmdzOmZ1bmN0aW9uKGEsXG5iLGMpe3ZhciBkPXRoaXMuX2ludGVycG9sYW50U2V0dGluZ3M7Yz8oZC5lbmRpbmdTdGFydD1USFJFRS5aZXJvU2xvcGVFbmRpbmcsZC5lbmRpbmdFbmQ9VEhSRUUuWmVyb1Nsb3BlRW5kaW5nKTooZC5lbmRpbmdTdGFydD1hP3RoaXMuemVyb1Nsb3BlQXRTdGFydD9USFJFRS5aZXJvU2xvcGVFbmRpbmc6VEhSRUUuWmVyb0N1cnZhdHVyZUVuZGluZzpUSFJFRS5XcmFwQXJvdW5kRW5kaW5nLGQuZW5kaW5nRW5kPWI/dGhpcy56ZXJvU2xvcGVBdEVuZD9USFJFRS5aZXJvU2xvcGVFbmRpbmc6VEhSRUUuWmVyb0N1cnZhdHVyZUVuZGluZzpUSFJFRS5XcmFwQXJvdW5kRW5kaW5nKX0sX3NjaGVkdWxlRmFkaW5nOmZ1bmN0aW9uKGEsYixjKXt2YXIgZD10aGlzLl9taXhlcixlPWQudGltZSxmPXRoaXMuX3dlaWdodEludGVycG9sYW50O251bGw9PT1mJiYodGhpcy5fd2VpZ2h0SW50ZXJwb2xhbnQ9Zj1kLl9sZW5kQ29udHJvbEludGVycG9sYW50KCkpO2Q9Zi5wYXJhbWV0ZXJQb3NpdGlvbnM7XG5mPWYuc2FtcGxlVmFsdWVzO2RbMF09ZTtmWzBdPWI7ZFsxXT1lK2E7ZlsxXT1jO3JldHVybiB0aGlzfX07VEhSRUUuQW5pbWF0aW9uQ2xpcD1mdW5jdGlvbihhLGIsYyl7dGhpcy5uYW1lPWE7dGhpcy50cmFja3M9Yzt0aGlzLmR1cmF0aW9uPXZvaWQgMCE9PWI/YjotMTt0aGlzLnV1aWQ9VEhSRUUuTWF0aC5nZW5lcmF0ZVVVSUQoKTswPnRoaXMuZHVyYXRpb24mJnRoaXMucmVzZXREdXJhdGlvbigpO3RoaXMudHJpbSgpO3RoaXMub3B0aW1pemUoKX07XG5USFJFRS5BbmltYXRpb25DbGlwLnByb3RvdHlwZT17Y29uc3RydWN0b3I6VEhSRUUuQW5pbWF0aW9uQ2xpcCxyZXNldER1cmF0aW9uOmZ1bmN0aW9uKCl7Zm9yKHZhciBhPTAsYj0wLGM9dGhpcy50cmFja3MubGVuZ3RoO2IhPT1jOysrYil2YXIgZD10aGlzLnRyYWNrc1tiXSxhPU1hdGgubWF4KGEsZC50aW1lc1tkLnRpbWVzLmxlbmd0aC0xXSk7dGhpcy5kdXJhdGlvbj1hfSx0cmltOmZ1bmN0aW9uKCl7Zm9yKHZhciBhPTA7YTx0aGlzLnRyYWNrcy5sZW5ndGg7YSsrKXRoaXMudHJhY2tzW2FdLnRyaW0oMCx0aGlzLmR1cmF0aW9uKTtyZXR1cm4gdGhpc30sb3B0aW1pemU6ZnVuY3Rpb24oKXtmb3IodmFyIGE9MDthPHRoaXMudHJhY2tzLmxlbmd0aDthKyspdGhpcy50cmFja3NbYV0ub3B0aW1pemUoKTtyZXR1cm4gdGhpc319O1xuT2JqZWN0LmFzc2lnbihUSFJFRS5BbmltYXRpb25DbGlwLHtwYXJzZTpmdW5jdGlvbihhKXtmb3IodmFyIGI9W10sYz1hLnRyYWNrcyxkPTEvKGEuZnBzfHwxKSxlPTAsZj1jLmxlbmd0aDtlIT09ZjsrK2UpYi5wdXNoKFRIUkVFLktleWZyYW1lVHJhY2sucGFyc2UoY1tlXSkuc2NhbGUoZCkpO3JldHVybiBuZXcgVEhSRUUuQW5pbWF0aW9uQ2xpcChhLm5hbWUsYS5kdXJhdGlvbixiKX0sdG9KU09OOmZ1bmN0aW9uKGEpe3ZhciBiPVtdLGM9YS50cmFja3M7YT17bmFtZTphLm5hbWUsZHVyYXRpb246YS5kdXJhdGlvbix0cmFja3M6Yn07Zm9yKHZhciBkPTAsZT1jLmxlbmd0aDtkIT09ZTsrK2QpYi5wdXNoKFRIUkVFLktleWZyYW1lVHJhY2sudG9KU09OKGNbZF0pKTtyZXR1cm4gYX0sQ3JlYXRlRnJvbU1vcnBoVGFyZ2V0U2VxdWVuY2U6ZnVuY3Rpb24oYSxiLGMsZCl7Zm9yKHZhciBlPWIubGVuZ3RoLGY9W10sZz0wO2c8ZTtnKyspe3ZhciBoPVtdLGs9W107aC5wdXNoKChnK2UtMSklXG5lLGcsKGcrMSklZSk7ay5wdXNoKDAsMSwwKTt2YXIgbD1USFJFRS5BbmltYXRpb25VdGlscy5nZXRLZXlmcmFtZU9yZGVyKGgpLGg9VEhSRUUuQW5pbWF0aW9uVXRpbHMuc29ydGVkQXJyYXkoaCwxLGwpLGs9VEhSRUUuQW5pbWF0aW9uVXRpbHMuc29ydGVkQXJyYXkoaywxLGwpO2R8fDAhPT1oWzBdfHwoaC5wdXNoKGUpLGsucHVzaChrWzBdKSk7Zi5wdXNoKChuZXcgVEhSRUUuTnVtYmVyS2V5ZnJhbWVUcmFjayhcIi5tb3JwaFRhcmdldEluZmx1ZW5jZXNbXCIrYltnXS5uYW1lK1wiXVwiLGgsaykpLnNjYWxlKDEvYykpfXJldHVybiBuZXcgVEhSRUUuQW5pbWF0aW9uQ2xpcChhLC0xLGYpfSxmaW5kQnlOYW1lOmZ1bmN0aW9uKGEsYil7dmFyIGM9YTtBcnJheS5pc0FycmF5KGEpfHwoYz1hLmdlb21ldHJ5JiZhLmdlb21ldHJ5LmFuaW1hdGlvbnN8fGEuYW5pbWF0aW9ucyk7Zm9yKHZhciBkPTA7ZDxjLmxlbmd0aDtkKyspaWYoY1tkXS5uYW1lPT09YilyZXR1cm4gY1tkXTtyZXR1cm4gbnVsbH0sXG5DcmVhdGVDbGlwc0Zyb21Nb3JwaFRhcmdldFNlcXVlbmNlczpmdW5jdGlvbihhLGIsYyl7Zm9yKHZhciBkPXt9LGU9L14oW1xcdy1dKj8pKFtcXGRdKykkLyxmPTAsZz1hLmxlbmd0aDtmPGc7ZisrKXt2YXIgaD1hW2ZdLGs9aC5uYW1lLm1hdGNoKGUpO2lmKGsmJjE8ay5sZW5ndGgpe3ZhciBsPWtbMV07KGs9ZFtsXSl8fChkW2xdPWs9W10pO2sucHVzaChoKX19YT1bXTtmb3IobCBpbiBkKWEucHVzaChUSFJFRS5BbmltYXRpb25DbGlwLkNyZWF0ZUZyb21Nb3JwaFRhcmdldFNlcXVlbmNlKGwsZFtsXSxiLGMpKTtyZXR1cm4gYX0scGFyc2VBbmltYXRpb246ZnVuY3Rpb24oYSxiLGMpe2lmKCFhKXJldHVybiBjb25zb2xlLmVycm9yKFwiICBubyBhbmltYXRpb24gaW4gSlNPTkxvYWRlciBkYXRhXCIpLG51bGw7Yz1mdW5jdGlvbihhLGIsYyxkLGUpe2lmKDAhPT1jLmxlbmd0aCl7dmFyIGY9W10sZz1bXTtUSFJFRS5BbmltYXRpb25VdGlscy5mbGF0dGVuSlNPTihjLGYsZyxkKTswIT09Zi5sZW5ndGgmJlxuZS5wdXNoKG5ldyBhKGIsZixnKSl9fTt2YXIgZD1bXSxlPWEubmFtZXx8XCJkZWZhdWx0XCIsZj1hLmxlbmd0aHx8LTEsZz1hLmZwc3x8MzA7YT1hLmhpZXJhcmNoeXx8W107Zm9yKHZhciBoPTA7aDxhLmxlbmd0aDtoKyspe3ZhciBrPWFbaF0ua2V5cztpZihrJiYwIT09ay5sZW5ndGgpaWYoa1swXS5tb3JwaFRhcmdldHMpe2Zvcih2YXIgZj17fSxsPTA7bDxrLmxlbmd0aDtsKyspaWYoa1tsXS5tb3JwaFRhcmdldHMpZm9yKHZhciBtPTA7bTxrW2xdLm1vcnBoVGFyZ2V0cy5sZW5ndGg7bSsrKWZba1tsXS5tb3JwaFRhcmdldHNbbV1dPS0xO2Zvcih2YXIgcCBpbiBmKXtmb3IodmFyIG49W10scT1bXSxtPTA7bSE9PWtbbF0ubW9ycGhUYXJnZXRzLmxlbmd0aDsrK20pe3ZhciByPWtbbF07bi5wdXNoKHIudGltZSk7cS5wdXNoKHIubW9ycGhUYXJnZXQ9PT1wPzE6MCl9ZC5wdXNoKG5ldyBUSFJFRS5OdW1iZXJLZXlmcmFtZVRyYWNrKFwiLm1vcnBoVGFyZ2V0SW5mbHVlbmNlW1wiK3ArXCJdXCIsXG5uLHEpKX1mPWYubGVuZ3RoKihnfHwxKX1lbHNlIGw9XCIuYm9uZXNbXCIrYltoXS5uYW1lK1wiXVwiLGMoVEhSRUUuVmVjdG9yS2V5ZnJhbWVUcmFjayxsK1wiLnBvc2l0aW9uXCIsayxcInBvc1wiLGQpLGMoVEhSRUUuUXVhdGVybmlvbktleWZyYW1lVHJhY2ssbCtcIi5xdWF0ZXJuaW9uXCIsayxcInJvdFwiLGQpLGMoVEhSRUUuVmVjdG9yS2V5ZnJhbWVUcmFjayxsK1wiLnNjYWxlXCIsayxcInNjbFwiLGQpfXJldHVybiAwPT09ZC5sZW5ndGg/bnVsbDpuZXcgVEhSRUUuQW5pbWF0aW9uQ2xpcChlLGYsZCl9fSk7VEhSRUUuQW5pbWF0aW9uTWl4ZXI9ZnVuY3Rpb24oYSl7dGhpcy5fcm9vdD1hO3RoaXMuX2luaXRNZW1vcnlNYW5hZ2VyKCk7dGhpcy50aW1lPXRoaXMuX2FjY3VJbmRleD0wO3RoaXMudGltZVNjYWxlPTF9O1xuT2JqZWN0LmFzc2lnbihUSFJFRS5BbmltYXRpb25NaXhlci5wcm90b3R5cGUsVEhSRUUuRXZlbnREaXNwYXRjaGVyLnByb3RvdHlwZSx7Y2xpcEFjdGlvbjpmdW5jdGlvbihhLGIpe3ZhciBjPWJ8fHRoaXMuX3Jvb3QsZD1jLnV1aWQsZT1cInN0cmluZ1wiPT09dHlwZW9mIGE/VEhSRUUuQW5pbWF0aW9uQ2xpcC5maW5kQnlOYW1lKGMsYSk6YSxjPW51bGwhPT1lP2UudXVpZDphLGY9dGhpcy5fYWN0aW9uc0J5Q2xpcFtjXSxnPW51bGw7aWYodm9pZCAwIT09Zil7Zz1mLmFjdGlvbkJ5Um9vdFtkXTtpZih2b2lkIDAhPT1nKXJldHVybiBnO2c9Zi5rbm93bkFjdGlvbnNbMF07bnVsbD09PWUmJihlPWcuX2NsaXApfWlmKG51bGw9PT1lKXJldHVybiBudWxsO2U9bmV3IFRIUkVFLkFuaW1hdGlvbk1peGVyLl9BY3Rpb24odGhpcyxlLGIpO3RoaXMuX2JpbmRBY3Rpb24oZSxnKTt0aGlzLl9hZGRJbmFjdGl2ZUFjdGlvbihlLGMsZCk7cmV0dXJuIGV9LGV4aXN0aW5nQWN0aW9uOmZ1bmN0aW9uKGEsXG5iKXt2YXIgYz1ifHx0aGlzLl9yb290LGQ9Yy51dWlkLGM9XCJzdHJpbmdcIj09PXR5cGVvZiBhP1RIUkVFLkFuaW1hdGlvbkNsaXAuZmluZEJ5TmFtZShjLGEpOmEsYz10aGlzLl9hY3Rpb25zQnlDbGlwW2M/Yy51dWlkOmFdO3JldHVybiB2b2lkIDAhPT1jP2MuYWN0aW9uQnlSb290W2RdfHxudWxsOm51bGx9LHN0b3BBbGxBY3Rpb246ZnVuY3Rpb24oKXtmb3IodmFyIGE9dGhpcy5fYWN0aW9ucyxiPXRoaXMuX25BY3RpdmVBY3Rpb25zLGM9dGhpcy5fYmluZGluZ3MsZD10aGlzLl9uQWN0aXZlQmluZGluZ3MsZT10aGlzLl9uQWN0aXZlQmluZGluZ3M9dGhpcy5fbkFjdGl2ZUFjdGlvbnM9MDtlIT09YjsrK2UpYVtlXS5yZXNldCgpO2ZvcihlPTA7ZSE9PWQ7KytlKWNbZV0udXNlQ291bnQ9MDtyZXR1cm4gdGhpc30sdXBkYXRlOmZ1bmN0aW9uKGEpe2EqPXRoaXMudGltZVNjYWxlO2Zvcih2YXIgYj10aGlzLl9hY3Rpb25zLGM9dGhpcy5fbkFjdGl2ZUFjdGlvbnMsZD10aGlzLnRpbWUrPVxuYSxlPU1hdGguc2lnbihhKSxmPXRoaXMuX2FjY3VJbmRleF49MSxnPTA7ZyE9PWM7KytnKXt2YXIgaD1iW2ddO2guZW5hYmxlZCYmaC5fdXBkYXRlKGQsYSxlLGYpfWE9dGhpcy5fYmluZGluZ3M7Yj10aGlzLl9uQWN0aXZlQmluZGluZ3M7Zm9yKGc9MDtnIT09YjsrK2cpYVtnXS5hcHBseShmKTtyZXR1cm4gdGhpc30sZ2V0Um9vdDpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9yb290fSx1bmNhY2hlQ2xpcDpmdW5jdGlvbihhKXt2YXIgYj10aGlzLl9hY3Rpb25zO2E9YS51dWlkO3ZhciBjPXRoaXMuX2FjdGlvbnNCeUNsaXAsZD1jW2FdO2lmKHZvaWQgMCE9PWQpe2Zvcih2YXIgZD1kLmtub3duQWN0aW9ucyxlPTAsZj1kLmxlbmd0aDtlIT09ZjsrK2Upe3ZhciBnPWRbZV07dGhpcy5fZGVhY3RpdmF0ZUFjdGlvbihnKTt2YXIgaD1nLl9jYWNoZUluZGV4LGs9YltiLmxlbmd0aC0xXTtnLl9jYWNoZUluZGV4PW51bGw7Zy5fYnlDbGlwQ2FjaGVJbmRleD1udWxsO2suX2NhY2hlSW5kZXg9XG5oO2JbaF09aztiLnBvcCgpO3RoaXMuX3JlbW92ZUluYWN0aXZlQmluZGluZ3NGb3JBY3Rpb24oZyl9ZGVsZXRlIGNbYV19fSx1bmNhY2hlUm9vdDpmdW5jdGlvbihhKXthPWEudXVpZDt2YXIgYj10aGlzLl9hY3Rpb25zQnlDbGlwLGM7Zm9yKGMgaW4gYil7dmFyIGQ9YltjXS5hY3Rpb25CeVJvb3RbYV07dm9pZCAwIT09ZCYmKHRoaXMuX2RlYWN0aXZhdGVBY3Rpb24oZCksdGhpcy5fcmVtb3ZlSW5hY3RpdmVBY3Rpb24oZCkpfWM9dGhpcy5fYmluZGluZ3NCeVJvb3RBbmROYW1lW2FdO2lmKHZvaWQgMCE9PWMpZm9yKHZhciBlIGluIGMpYT1jW2VdLGEucmVzdG9yZU9yaWdpbmFsU3RhdGUoKSx0aGlzLl9yZW1vdmVJbmFjdGl2ZUJpbmRpbmcoYSl9LHVuY2FjaGVBY3Rpb246ZnVuY3Rpb24oYSxiKXt2YXIgYz10aGlzLmV4aXN0aW5nQWN0aW9uKGEsYik7bnVsbCE9PWMmJih0aGlzLl9kZWFjdGl2YXRlQWN0aW9uKGMpLHRoaXMuX3JlbW92ZUluYWN0aXZlQWN0aW9uKGMpKX19KTtcblRIUkVFLkFuaW1hdGlvbk1peGVyLl9BY3Rpb249VEhSRUUuQW5pbWF0aW9uQWN0aW9uLl9uZXc7XG5PYmplY3QuYXNzaWduKFRIUkVFLkFuaW1hdGlvbk1peGVyLnByb3RvdHlwZSx7X2JpbmRBY3Rpb246ZnVuY3Rpb24oYSxiKXt2YXIgYz1hLl9sb2NhbFJvb3R8fHRoaXMuX3Jvb3QsZD1hLl9jbGlwLnRyYWNrcyxlPWQubGVuZ3RoLGY9YS5fcHJvcGVydHlCaW5kaW5ncyxnPWEuX2ludGVycG9sYW50cyxoPWMudXVpZCxrPXRoaXMuX2JpbmRpbmdzQnlSb290QW5kTmFtZSxsPWtbaF07dm9pZCAwPT09bCYmKGw9e30sa1toXT1sKTtmb3Ioaz0wO2shPT1lOysrayl7dmFyIG09ZFtrXSxwPW0ubmFtZSxuPWxbcF07aWYodm9pZCAwPT09bil7bj1mW2tdO2lmKHZvaWQgMCE9PW4pe251bGw9PT1uLl9jYWNoZUluZGV4JiYoKytuLnJlZmVyZW5jZUNvdW50LHRoaXMuX2FkZEluYWN0aXZlQmluZGluZyhuLGgscCkpO2NvbnRpbnVlfW49bmV3IFRIUkVFLlByb3BlcnR5TWl4ZXIoVEhSRUUuUHJvcGVydHlCaW5kaW5nLmNyZWF0ZShjLHAsYiYmYi5fcHJvcGVydHlCaW5kaW5nc1trXS5iaW5kaW5nLnBhcnNlZFBhdGgpLFxubS5WYWx1ZVR5cGVOYW1lLG0uZ2V0VmFsdWVTaXplKCkpOysrbi5yZWZlcmVuY2VDb3VudDt0aGlzLl9hZGRJbmFjdGl2ZUJpbmRpbmcobixoLHApfWZba109bjtnW2tdLnJlc3VsdEJ1ZmZlcj1uLmJ1ZmZlcn19LF9hY3RpdmF0ZUFjdGlvbjpmdW5jdGlvbihhKXtpZighdGhpcy5faXNBY3RpdmVBY3Rpb24oYSkpe2lmKG51bGw9PT1hLl9jYWNoZUluZGV4KXt2YXIgYj0oYS5fbG9jYWxSb290fHx0aGlzLl9yb290KS51dWlkLGM9YS5fY2xpcC51dWlkLGQ9dGhpcy5fYWN0aW9uc0J5Q2xpcFtjXTt0aGlzLl9iaW5kQWN0aW9uKGEsZCYmZC5rbm93bkFjdGlvbnNbMF0pO3RoaXMuX2FkZEluYWN0aXZlQWN0aW9uKGEsYyxiKX1iPWEuX3Byb3BlcnR5QmluZGluZ3M7Yz0wO2ZvcihkPWIubGVuZ3RoO2MhPT1kOysrYyl7dmFyIGU9YltjXTswPT09ZS51c2VDb3VudCsrJiYodGhpcy5fbGVuZEJpbmRpbmcoZSksZS5zYXZlT3JpZ2luYWxTdGF0ZSgpKX10aGlzLl9sZW5kQWN0aW9uKGEpfX0sXG5fZGVhY3RpdmF0ZUFjdGlvbjpmdW5jdGlvbihhKXtpZih0aGlzLl9pc0FjdGl2ZUFjdGlvbihhKSl7Zm9yKHZhciBiPWEuX3Byb3BlcnR5QmluZGluZ3MsYz0wLGQ9Yi5sZW5ndGg7YyE9PWQ7KytjKXt2YXIgZT1iW2NdOzA9PT0tLWUudXNlQ291bnQmJihlLnJlc3RvcmVPcmlnaW5hbFN0YXRlKCksdGhpcy5fdGFrZUJhY2tCaW5kaW5nKGUpKX10aGlzLl90YWtlQmFja0FjdGlvbihhKX19LF9pbml0TWVtb3J5TWFuYWdlcjpmdW5jdGlvbigpe3RoaXMuX2FjdGlvbnM9W107dGhpcy5fbkFjdGl2ZUFjdGlvbnM9MDt0aGlzLl9hY3Rpb25zQnlDbGlwPXt9O3RoaXMuX2JpbmRpbmdzPVtdO3RoaXMuX25BY3RpdmVCaW5kaW5ncz0wO3RoaXMuX2JpbmRpbmdzQnlSb290QW5kTmFtZT17fTt0aGlzLl9jb250cm9sSW50ZXJwb2xhbnRzPVtdO3RoaXMuX25BY3RpdmVDb250cm9sSW50ZXJwb2xhbnRzPTA7dmFyIGE9dGhpczt0aGlzLnN0YXRzPXthY3Rpb25zOntnZXQgdG90YWwoKXtyZXR1cm4gYS5fYWN0aW9ucy5sZW5ndGh9LFxuZ2V0IGluVXNlKCl7cmV0dXJuIGEuX25BY3RpdmVBY3Rpb25zfX0sYmluZGluZ3M6e2dldCB0b3RhbCgpe3JldHVybiBhLl9iaW5kaW5ncy5sZW5ndGh9LGdldCBpblVzZSgpe3JldHVybiBhLl9uQWN0aXZlQmluZGluZ3N9fSxjb250cm9sSW50ZXJwb2xhbnRzOntnZXQgdG90YWwoKXtyZXR1cm4gYS5fY29udHJvbEludGVycG9sYW50cy5sZW5ndGh9LGdldCBpblVzZSgpe3JldHVybiBhLl9uQWN0aXZlQ29udHJvbEludGVycG9sYW50c319fX0sX2lzQWN0aXZlQWN0aW9uOmZ1bmN0aW9uKGEpe2E9YS5fY2FjaGVJbmRleDtyZXR1cm4gbnVsbCE9PWEmJmE8dGhpcy5fbkFjdGl2ZUFjdGlvbnN9LF9hZGRJbmFjdGl2ZUFjdGlvbjpmdW5jdGlvbihhLGIsYyl7dmFyIGQ9dGhpcy5fYWN0aW9ucyxlPXRoaXMuX2FjdGlvbnNCeUNsaXAsZj1lW2JdO3ZvaWQgMD09PWY/KGY9e2tub3duQWN0aW9uczpbYV0sYWN0aW9uQnlSb290Ont9fSxhLl9ieUNsaXBDYWNoZUluZGV4PTAsZVtiXT1mKTooYj1cbmYua25vd25BY3Rpb25zLGEuX2J5Q2xpcENhY2hlSW5kZXg9Yi5sZW5ndGgsYi5wdXNoKGEpKTthLl9jYWNoZUluZGV4PWQubGVuZ3RoO2QucHVzaChhKTtmLmFjdGlvbkJ5Um9vdFtjXT1hfSxfcmVtb3ZlSW5hY3RpdmVBY3Rpb246ZnVuY3Rpb24oYSl7dmFyIGI9dGhpcy5fYWN0aW9ucyxjPWJbYi5sZW5ndGgtMV0sZD1hLl9jYWNoZUluZGV4O2MuX2NhY2hlSW5kZXg9ZDtiW2RdPWM7Yi5wb3AoKTthLl9jYWNoZUluZGV4PW51bGw7dmFyIGM9YS5fY2xpcC51dWlkLGQ9dGhpcy5fYWN0aW9uc0J5Q2xpcCxlPWRbY10sZj1lLmtub3duQWN0aW9ucyxnPWZbZi5sZW5ndGgtMV0saD1hLl9ieUNsaXBDYWNoZUluZGV4O2cuX2J5Q2xpcENhY2hlSW5kZXg9aDtmW2hdPWc7Zi5wb3AoKTthLl9ieUNsaXBDYWNoZUluZGV4PW51bGw7ZGVsZXRlIGUuYWN0aW9uQnlSb290WyhiLl9sb2NhbFJvb3R8fHRoaXMuX3Jvb3QpLnV1aWRdOzA9PT1mLmxlbmd0aCYmZGVsZXRlIGRbY107dGhpcy5fcmVtb3ZlSW5hY3RpdmVCaW5kaW5nc0ZvckFjdGlvbihhKX0sXG5fcmVtb3ZlSW5hY3RpdmVCaW5kaW5nc0ZvckFjdGlvbjpmdW5jdGlvbihhKXthPWEuX3Byb3BlcnR5QmluZGluZ3M7Zm9yKHZhciBiPTAsYz1hLmxlbmd0aDtiIT09YzsrK2Ipe3ZhciBkPWFbYl07MD09PS0tZC5yZWZlcmVuY2VDb3VudCYmdGhpcy5fcmVtb3ZlSW5hY3RpdmVCaW5kaW5nKGQpfX0sX2xlbmRBY3Rpb246ZnVuY3Rpb24oYSl7dmFyIGI9dGhpcy5fYWN0aW9ucyxjPWEuX2NhY2hlSW5kZXgsZD10aGlzLl9uQWN0aXZlQWN0aW9ucysrLGU9YltkXTthLl9jYWNoZUluZGV4PWQ7YltkXT1hO2UuX2NhY2hlSW5kZXg9YztiW2NdPWV9LF90YWtlQmFja0FjdGlvbjpmdW5jdGlvbihhKXt2YXIgYj10aGlzLl9hY3Rpb25zLGM9YS5fY2FjaGVJbmRleCxkPS0tdGhpcy5fbkFjdGl2ZUFjdGlvbnMsZT1iW2RdO2EuX2NhY2hlSW5kZXg9ZDtiW2RdPWE7ZS5fY2FjaGVJbmRleD1jO2JbY109ZX0sX2FkZEluYWN0aXZlQmluZGluZzpmdW5jdGlvbihhLGIsYyl7dmFyIGQ9dGhpcy5fYmluZGluZ3NCeVJvb3RBbmROYW1lLFxuZT1kW2JdLGY9dGhpcy5fYmluZGluZ3M7dm9pZCAwPT09ZSYmKGU9e30sZFtiXT1lKTtlW2NdPWE7YS5fY2FjaGVJbmRleD1mLmxlbmd0aDtmLnB1c2goYSl9LF9yZW1vdmVJbmFjdGl2ZUJpbmRpbmc6ZnVuY3Rpb24oYSl7dmFyIGI9dGhpcy5fYmluZGluZ3MsYz1hLmJpbmRpbmcsZD1jLnJvb3ROb2RlLnV1aWQsYz1jLnBhdGgsZT10aGlzLl9iaW5kaW5nc0J5Um9vdEFuZE5hbWUsZj1lW2RdLGc9YltiLmxlbmd0aC0xXTthPWEuX2NhY2hlSW5kZXg7Zy5fY2FjaGVJbmRleD1hO2JbYV09ZztiLnBvcCgpO2RlbGV0ZSBmW2NdO2E6e2Zvcih2YXIgaCBpbiBmKWJyZWFrIGE7ZGVsZXRlIGVbZF19fSxfbGVuZEJpbmRpbmc6ZnVuY3Rpb24oYSl7dmFyIGI9dGhpcy5fYmluZGluZ3MsYz1hLl9jYWNoZUluZGV4LGQ9dGhpcy5fbkFjdGl2ZUJpbmRpbmdzKyssZT1iW2RdO2EuX2NhY2hlSW5kZXg9ZDtiW2RdPWE7ZS5fY2FjaGVJbmRleD1jO2JbY109ZX0sX3Rha2VCYWNrQmluZGluZzpmdW5jdGlvbihhKXt2YXIgYj1cbnRoaXMuX2JpbmRpbmdzLGM9YS5fY2FjaGVJbmRleCxkPS0tdGhpcy5fbkFjdGl2ZUJpbmRpbmdzLGU9YltkXTthLl9jYWNoZUluZGV4PWQ7YltkXT1hO2UuX2NhY2hlSW5kZXg9YztiW2NdPWV9LF9sZW5kQ29udHJvbEludGVycG9sYW50OmZ1bmN0aW9uKCl7dmFyIGE9dGhpcy5fY29udHJvbEludGVycG9sYW50cyxiPXRoaXMuX25BY3RpdmVDb250cm9sSW50ZXJwb2xhbnRzKyssYz1hW2JdO3ZvaWQgMD09PWMmJihjPW5ldyBUSFJFRS5MaW5lYXJJbnRlcnBvbGFudChuZXcgRmxvYXQzMkFycmF5KDIpLG5ldyBGbG9hdDMyQXJyYXkoMiksMSx0aGlzLl9jb250cm9sSW50ZXJwb2xhbnRzUmVzdWx0QnVmZmVyKSxjLl9fY2FjaGVJbmRleD1iLGFbYl09Yyk7cmV0dXJuIGN9LF90YWtlQmFja0NvbnRyb2xJbnRlcnBvbGFudDpmdW5jdGlvbihhKXt2YXIgYj10aGlzLl9jb250cm9sSW50ZXJwb2xhbnRzLGM9YS5fX2NhY2hlSW5kZXgsZD0tLXRoaXMuX25BY3RpdmVDb250cm9sSW50ZXJwb2xhbnRzLFxuZT1iW2RdO2EuX19jYWNoZUluZGV4PWQ7YltkXT1hO2UuX19jYWNoZUluZGV4PWM7YltjXT1lfSxfY29udHJvbEludGVycG9sYW50c1Jlc3VsdEJ1ZmZlcjpuZXcgRmxvYXQzMkFycmF5KDEpfSk7XG5USFJFRS5BbmltYXRpb25PYmplY3RHcm91cD1mdW5jdGlvbihhKXt0aGlzLnV1aWQ9VEhSRUUuTWF0aC5nZW5lcmF0ZVVVSUQoKTt0aGlzLl9vYmplY3RzPUFycmF5LnByb3RvdHlwZS5zbGljZS5jYWxsKGFyZ3VtZW50cyk7dGhpcy5uQ2FjaGVkT2JqZWN0c189MDt2YXIgYj17fTt0aGlzLl9pbmRpY2VzQnlVVUlEPWI7Zm9yKHZhciBjPTAsZD1hcmd1bWVudHMubGVuZ3RoO2MhPT1kOysrYyliW2FyZ3VtZW50c1tjXS51dWlkXT1jO3RoaXMuX3BhdGhzPVtdO3RoaXMuX3BhcnNlZFBhdGhzPVtdO3RoaXMuX2JpbmRpbmdzPVtdO3RoaXMuX2JpbmRpbmdzSW5kaWNlc0J5UGF0aD17fTt2YXIgZT10aGlzO3RoaXMuc3RhdHM9e29iamVjdHM6e2dldCB0b3RhbCgpe3JldHVybiBlLl9vYmplY3RzLmxlbmd0aH0sZ2V0IGluVXNlKCl7cmV0dXJuIHRoaXMudG90YWwtZS5uQ2FjaGVkT2JqZWN0c199fSxnZXQgYmluZGluZ3NQZXJPYmplY3QoKXtyZXR1cm4gZS5fYmluZGluZ3MubGVuZ3RofX19O1xuVEhSRUUuQW5pbWF0aW9uT2JqZWN0R3JvdXAucHJvdG90eXBlPXtjb25zdHJ1Y3RvcjpUSFJFRS5BbmltYXRpb25PYmplY3RHcm91cCxhZGQ6ZnVuY3Rpb24oYSl7Zm9yKHZhciBiPXRoaXMuX29iamVjdHMsYz1iLmxlbmd0aCxkPXRoaXMubkNhY2hlZE9iamVjdHNfLGU9dGhpcy5faW5kaWNlc0J5VVVJRCxmPXRoaXMuX3BhdGhzLGc9dGhpcy5fcGFyc2VkUGF0aHMsaD10aGlzLl9iaW5kaW5ncyxrPWgubGVuZ3RoLGw9MCxtPWFyZ3VtZW50cy5sZW5ndGg7bCE9PW07KytsKXt2YXIgcD1hcmd1bWVudHNbbF0sbj1wLnV1aWQscT1lW25dO2lmKHZvaWQgMD09PXEpe3E9YysrO2Vbbl09cTtiLnB1c2gocCk7Zm9yKHZhciBuPTAscj1rO24hPT1yOysrbiloW25dLnB1c2gobmV3IFRIUkVFLlByb3BlcnR5QmluZGluZyhwLGZbbl0sZ1tuXSkpfWVsc2UgaWYocTxkKXt2YXIgcz1iW3FdLHY9LS1kLHI9Ylt2XTtlW3IudXVpZF09cTtiW3FdPXI7ZVtuXT12O2Jbdl09cDtuPTA7Zm9yKHI9aztuIT09XG5yOysrbil7dmFyIHQ9aFtuXSx1PXRbcV07dFtxXT10W3ZdO3ZvaWQgMD09PXUmJih1PW5ldyBUSFJFRS5Qcm9wZXJ0eUJpbmRpbmcocCxmW25dLGdbbl0pKTt0W3ZdPXV9fWVsc2UgYltxXSE9PXMmJmNvbnNvbGUuZXJyb3IoXCJEaWZmZXJlbnQgb2JqZWN0cyB3aXRoIHRoZSBzYW1lIFVVSUQgZGV0ZWN0ZWQuIENsZWFuIHRoZSBjYWNoZXMgb3IgcmVjcmVhdGUgeW91ciBpbmZyYXN0cnVjdHVyZSB3aGVuIHJlbG9hZGluZyBzY2VuZXMuLi5cIil9dGhpcy5uQ2FjaGVkT2JqZWN0c189ZH0scmVtb3ZlOmZ1bmN0aW9uKGEpe2Zvcih2YXIgYj10aGlzLl9vYmplY3RzLGM9dGhpcy5uQ2FjaGVkT2JqZWN0c18sZD10aGlzLl9pbmRpY2VzQnlVVUlELGU9dGhpcy5fYmluZGluZ3MsZj1lLmxlbmd0aCxnPTAsaD1hcmd1bWVudHMubGVuZ3RoO2chPT1oOysrZyl7dmFyIGs9YXJndW1lbnRzW2ddLGw9ay51dWlkLG09ZFtsXTtpZih2b2lkIDAhPT1tJiZtPj1jKXt2YXIgcD1jKyssbj1iW3BdO2Rbbi51dWlkXT1cbm07YlttXT1uO2RbbF09cDtiW3BdPWs7az0wO2ZvcihsPWY7ayE9PWw7KytrKXt2YXIgbj1lW2tdLHE9blttXTtuW21dPW5bcF07bltwXT1xfX19dGhpcy5uQ2FjaGVkT2JqZWN0c189Y30sdW5jYWNoZTpmdW5jdGlvbihhKXtmb3IodmFyIGI9dGhpcy5fb2JqZWN0cyxjPWIubGVuZ3RoLGQ9dGhpcy5uQ2FjaGVkT2JqZWN0c18sZT10aGlzLl9pbmRpY2VzQnlVVUlELGY9dGhpcy5fYmluZGluZ3MsZz1mLmxlbmd0aCxoPTAsaz1hcmd1bWVudHMubGVuZ3RoO2ghPT1rOysraCl7dmFyIGw9YXJndW1lbnRzW2hdLnV1aWQsbT1lW2xdO2lmKHZvaWQgMCE9PW0paWYoZGVsZXRlIGVbbF0sbTxkKXt2YXIgbD0tLWQscD1iW2xdLG49LS1jLHE9YltuXTtlW3AudXVpZF09bTtiW21dPXA7ZVtxLnV1aWRdPWw7YltsXT1xO2IucG9wKCk7cD0wO2ZvcihxPWc7cCE9PXE7KytwKXt2YXIgcj1mW3BdLHM9cltuXTtyW21dPXJbbF07cltsXT1zO3IucG9wKCl9fWVsc2UgZm9yKG49LS1jLHE9YltuXSxlW3EudXVpZF09XG5tLGJbbV09cSxiLnBvcCgpLHA9MCxxPWc7cCE9PXE7KytwKXI9ZltwXSxyW21dPXJbbl0sci5wb3AoKX10aGlzLm5DYWNoZWRPYmplY3RzXz1kfSxzdWJzY3JpYmVfOmZ1bmN0aW9uKGEsYil7dmFyIGM9dGhpcy5fYmluZGluZ3NJbmRpY2VzQnlQYXRoLGQ9Y1thXSxlPXRoaXMuX2JpbmRpbmdzO2lmKHZvaWQgMCE9PWQpcmV0dXJuIGVbZF07dmFyIGY9dGhpcy5fcGF0aHMsZz10aGlzLl9wYXJzZWRQYXRocyxoPXRoaXMuX29iamVjdHMsaz10aGlzLm5DYWNoZWRPYmplY3RzXyxsPUFycmF5KGgubGVuZ3RoKSxkPWUubGVuZ3RoO2NbYV09ZDtmLnB1c2goYSk7Zy5wdXNoKGIpO2UucHVzaChsKTtjPWs7Zm9yKGQ9aC5sZW5ndGg7YyE9PWQ7KytjKWxbY109bmV3IFRIUkVFLlByb3BlcnR5QmluZGluZyhoW2NdLGEsYik7cmV0dXJuIGx9LHVuc3Vic2NyaWJlXzpmdW5jdGlvbihhKXt2YXIgYj10aGlzLl9iaW5kaW5nc0luZGljZXNCeVBhdGgsYz1iW2FdO2lmKHZvaWQgMCE9PWMpe3ZhciBkPVxudGhpcy5fcGF0aHMsZT10aGlzLl9wYXJzZWRQYXRocyxmPXRoaXMuX2JpbmRpbmdzLGc9Zi5sZW5ndGgtMSxoPWZbZ107YlthW2ddXT1jO2ZbY109aDtmLnBvcCgpO2VbY109ZVtnXTtlLnBvcCgpO2RbY109ZFtnXTtkLnBvcCgpfX19O1xuVEhSRUUuQW5pbWF0aW9uVXRpbHM9e2FycmF5U2xpY2U6ZnVuY3Rpb24oYSxiLGMpe3JldHVybiBUSFJFRS5BbmltYXRpb25VdGlscy5pc1R5cGVkQXJyYXkoYSk/bmV3IGEuY29uc3RydWN0b3IoYS5zdWJhcnJheShiLGMpKTphLnNsaWNlKGIsYyl9LGNvbnZlcnRBcnJheTpmdW5jdGlvbihhLGIsYyl7cmV0dXJuIWF8fCFjJiZhLmNvbnN0cnVjdG9yPT09Yj9hOlwibnVtYmVyXCI9PT10eXBlb2YgYi5CWVRFU19QRVJfRUxFTUVOVD9uZXcgYihhKTpBcnJheS5wcm90b3R5cGUuc2xpY2UuY2FsbChhKX0saXNUeXBlZEFycmF5OmZ1bmN0aW9uKGEpe3JldHVybiBBcnJheUJ1ZmZlci5pc1ZpZXcoYSkmJiEoYSBpbnN0YW5jZW9mIERhdGFWaWV3KX0sZ2V0S2V5ZnJhbWVPcmRlcjpmdW5jdGlvbihhKXtmb3IodmFyIGI9YS5sZW5ndGgsYz1BcnJheShiKSxkPTA7ZCE9PWI7KytkKWNbZF09ZDtjLnNvcnQoZnVuY3Rpb24oYixjKXtyZXR1cm4gYVtiXS1hW2NdfSk7cmV0dXJuIGN9LHNvcnRlZEFycmF5OmZ1bmN0aW9uKGEsXG5iLGMpe2Zvcih2YXIgZD1hLmxlbmd0aCxlPW5ldyBhLmNvbnN0cnVjdG9yKGQpLGY9MCxnPTA7ZyE9PWQ7KytmKWZvcih2YXIgaD1jW2ZdKmIsaz0wO2shPT1iOysrayllW2crK109YVtoK2tdO3JldHVybiBlfSxmbGF0dGVuSlNPTjpmdW5jdGlvbihhLGIsYyxkKXtmb3IodmFyIGU9MSxmPWFbMF07dm9pZCAwIT09ZiYmdm9pZCAwPT09ZltkXTspZj1hW2UrK107aWYodm9pZCAwIT09Zil7dmFyIGc9ZltkXTtpZih2b2lkIDAhPT1nKWlmKEFycmF5LmlzQXJyYXkoZykpe2RvIGc9ZltkXSx2b2lkIDAhPT1nJiYoYi5wdXNoKGYudGltZSksYy5wdXNoLmFwcGx5KGMsZykpLGY9YVtlKytdO3doaWxlKHZvaWQgMCE9PWYpfWVsc2UgaWYodm9pZCAwIT09Zy50b0FycmF5KXtkbyBnPWZbZF0sdm9pZCAwIT09ZyYmKGIucHVzaChmLnRpbWUpLGcudG9BcnJheShjLGMubGVuZ3RoKSksZj1hW2UrK107d2hpbGUodm9pZCAwIT09Zil9ZWxzZXtkbyBnPWZbZF0sdm9pZCAwIT09ZyYmKGIucHVzaChmLnRpbWUpLFxuYy5wdXNoKGcpKSxmPWFbZSsrXTt3aGlsZSh2b2lkIDAhPT1mKX19fX07VEhSRUUuS2V5ZnJhbWVUcmFjaz1mdW5jdGlvbihhLGIsYyxkKXtpZih2b2lkIDA9PT1hKXRocm93IEVycm9yKFwidHJhY2sgbmFtZSBpcyB1bmRlZmluZWRcIik7aWYodm9pZCAwPT09Ynx8MD09PWIubGVuZ3RoKXRocm93IEVycm9yKFwibm8ga2V5ZnJhbWVzIGluIHRyYWNrIG5hbWVkIFwiK2EpO3RoaXMubmFtZT1hO3RoaXMudGltZXM9VEhSRUUuQW5pbWF0aW9uVXRpbHMuY29udmVydEFycmF5KGIsdGhpcy5UaW1lQnVmZmVyVHlwZSk7dGhpcy52YWx1ZXM9VEhSRUUuQW5pbWF0aW9uVXRpbHMuY29udmVydEFycmF5KGMsdGhpcy5WYWx1ZUJ1ZmZlclR5cGUpO3RoaXMuc2V0SW50ZXJwb2xhdGlvbihkfHx0aGlzLkRlZmF1bHRJbnRlcnBvbGF0aW9uKTt0aGlzLnZhbGlkYXRlKCk7dGhpcy5vcHRpbWl6ZSgpfTtcblRIUkVFLktleWZyYW1lVHJhY2sucHJvdG90eXBlPXtjb25zdHJ1Y3RvcjpUSFJFRS5LZXlmcmFtZVRyYWNrLFRpbWVCdWZmZXJUeXBlOkZsb2F0MzJBcnJheSxWYWx1ZUJ1ZmZlclR5cGU6RmxvYXQzMkFycmF5LERlZmF1bHRJbnRlcnBvbGF0aW9uOlRIUkVFLkludGVycG9sYXRlTGluZWFyLEludGVycG9sYW50RmFjdG9yeU1ldGhvZERpc2NyZXRlOmZ1bmN0aW9uKGEpe3JldHVybiBuZXcgVEhSRUUuRGlzY3JldGVJbnRlcnBvbGFudCh0aGlzLnRpbWVzLHRoaXMudmFsdWVzLHRoaXMuZ2V0VmFsdWVTaXplKCksYSl9LEludGVycG9sYW50RmFjdG9yeU1ldGhvZExpbmVhcjpmdW5jdGlvbihhKXtyZXR1cm4gbmV3IFRIUkVFLkxpbmVhckludGVycG9sYW50KHRoaXMudGltZXMsdGhpcy52YWx1ZXMsdGhpcy5nZXRWYWx1ZVNpemUoKSxhKX0sSW50ZXJwb2xhbnRGYWN0b3J5TWV0aG9kU21vb3RoOmZ1bmN0aW9uKGEpe3JldHVybiBuZXcgVEhSRUUuQ3ViaWNJbnRlcnBvbGFudCh0aGlzLnRpbWVzLFxudGhpcy52YWx1ZXMsdGhpcy5nZXRWYWx1ZVNpemUoKSxhKX0sc2V0SW50ZXJwb2xhdGlvbjpmdW5jdGlvbihhKXt2YXIgYjtzd2l0Y2goYSl7Y2FzZSBUSFJFRS5JbnRlcnBvbGF0ZURpc2NyZXRlOmI9dGhpcy5JbnRlcnBvbGFudEZhY3RvcnlNZXRob2REaXNjcmV0ZTticmVhaztjYXNlIFRIUkVFLkludGVycG9sYXRlTGluZWFyOmI9dGhpcy5JbnRlcnBvbGFudEZhY3RvcnlNZXRob2RMaW5lYXI7YnJlYWs7Y2FzZSBUSFJFRS5JbnRlcnBvbGF0ZVNtb290aDpiPXRoaXMuSW50ZXJwb2xhbnRGYWN0b3J5TWV0aG9kU21vb3RofWlmKHZvaWQgMD09PWIpe2I9XCJ1bnN1cHBvcnRlZCBpbnRlcnBvbGF0aW9uIGZvciBcIit0aGlzLlZhbHVlVHlwZU5hbWUrXCIga2V5ZnJhbWUgdHJhY2sgbmFtZWQgXCIrdGhpcy5uYW1lO2lmKHZvaWQgMD09PXRoaXMuY3JlYXRlSW50ZXJwb2xhbnQpaWYoYSE9PXRoaXMuRGVmYXVsdEludGVycG9sYXRpb24pdGhpcy5zZXRJbnRlcnBvbGF0aW9uKHRoaXMuRGVmYXVsdEludGVycG9sYXRpb24pO1xuZWxzZSB0aHJvdyBFcnJvcihiKTtjb25zb2xlLndhcm4oYil9ZWxzZSB0aGlzLmNyZWF0ZUludGVycG9sYW50PWJ9LGdldEludGVycG9sYXRpb246ZnVuY3Rpb24oKXtzd2l0Y2godGhpcy5jcmVhdGVJbnRlcnBvbGFudCl7Y2FzZSB0aGlzLkludGVycG9sYW50RmFjdG9yeU1ldGhvZERpc2NyZXRlOnJldHVybiBUSFJFRS5JbnRlcnBvbGF0ZURpc2NyZXRlO2Nhc2UgdGhpcy5JbnRlcnBvbGFudEZhY3RvcnlNZXRob2RMaW5lYXI6cmV0dXJuIFRIUkVFLkludGVycG9sYXRlTGluZWFyO2Nhc2UgdGhpcy5JbnRlcnBvbGFudEZhY3RvcnlNZXRob2RTbW9vdGg6cmV0dXJuIFRIUkVFLkludGVycG9sYXRlU21vb3RofX0sZ2V0VmFsdWVTaXplOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMudmFsdWVzLmxlbmd0aC90aGlzLnRpbWVzLmxlbmd0aH0sc2hpZnQ6ZnVuY3Rpb24oYSl7aWYoMCE9PWEpZm9yKHZhciBiPXRoaXMudGltZXMsYz0wLGQ9Yi5sZW5ndGg7YyE9PWQ7KytjKWJbY10rPWE7cmV0dXJuIHRoaXN9LFxuc2NhbGU6ZnVuY3Rpb24oYSl7aWYoMSE9PWEpZm9yKHZhciBiPXRoaXMudGltZXMsYz0wLGQ9Yi5sZW5ndGg7YyE9PWQ7KytjKWJbY10qPWE7cmV0dXJuIHRoaXN9LHRyaW06ZnVuY3Rpb24oYSxiKXtmb3IodmFyIGM9dGhpcy50aW1lcyxkPWMubGVuZ3RoLGU9MCxmPWQtMTtlIT09ZCYmY1tlXTxhOykrK2U7Zm9yKDstMSE9PWYmJmNbZl0+YjspLS1mOysrZjtpZigwIT09ZXx8ZiE9PWQpZT49ZiYmKGY9TWF0aC5tYXgoZiwxKSxlPWYtMSksZD10aGlzLmdldFZhbHVlU2l6ZSgpLHRoaXMudGltZXM9VEhSRUUuQW5pbWF0aW9uVXRpbHMuYXJyYXlTbGljZShjLGUsZiksdGhpcy52YWx1ZXM9VEhSRUUuQW5pbWF0aW9uVXRpbHMuYXJyYXlTbGljZSh0aGlzLnZhbHVlcyxlKmQsZipkKTtyZXR1cm4gdGhpc30sdmFsaWRhdGU6ZnVuY3Rpb24oKXt2YXIgYT0hMCxiPXRoaXMuZ2V0VmFsdWVTaXplKCk7MCE9PWItTWF0aC5mbG9vcihiKSYmKGNvbnNvbGUuZXJyb3IoXCJpbnZhbGlkIHZhbHVlIHNpemUgaW4gdHJhY2tcIixcbnRoaXMpLGE9ITEpO3ZhciBjPXRoaXMudGltZXMsYj10aGlzLnZhbHVlcyxkPWMubGVuZ3RoOzA9PT1kJiYoY29uc29sZS5lcnJvcihcInRyYWNrIGlzIGVtcHR5XCIsdGhpcyksYT0hMSk7Zm9yKHZhciBlPW51bGwsZj0wO2YhPT1kO2YrKyl7dmFyIGc9Y1tmXTtpZihcIm51bWJlclwiPT09dHlwZW9mIGcmJmlzTmFOKGcpKXtjb25zb2xlLmVycm9yKFwidGltZSBpcyBub3QgYSB2YWxpZCBudW1iZXJcIix0aGlzLGYsZyk7YT0hMTticmVha31pZihudWxsIT09ZSYmZT5nKXtjb25zb2xlLmVycm9yKFwib3V0IG9mIG9yZGVyIGtleXNcIix0aGlzLGYsZyxlKTthPSExO2JyZWFrfWU9Z31pZih2b2lkIDAhPT1iJiZUSFJFRS5BbmltYXRpb25VdGlscy5pc1R5cGVkQXJyYXkoYikpZm9yKGY9MCxjPWIubGVuZ3RoO2YhPT1jOysrZilpZihkPWJbZl0saXNOYU4oZCkpe2NvbnNvbGUuZXJyb3IoXCJ2YWx1ZSBpcyBub3QgYSB2YWxpZCBudW1iZXJcIix0aGlzLGYsZCk7YT0hMTticmVha31yZXR1cm4gYX0sb3B0aW1pemU6ZnVuY3Rpb24oKXtmb3IodmFyIGE9XG50aGlzLnRpbWVzLGI9dGhpcy52YWx1ZXMsYz10aGlzLmdldFZhbHVlU2l6ZSgpLGQ9MSxlPTEsZj1hLmxlbmd0aC0xO2U8PWY7KytlKXt2YXIgZz0hMSxoPWFbZV07aWYoaCE9PWFbZSsxXSYmKDEhPT1lfHxoIT09aFswXSkpZm9yKHZhciBrPWUqYyxsPWstYyxtPWsrYyxoPTA7aCE9PWM7KytoKXt2YXIgcD1iW2sraF07aWYocCE9PWJbbCtoXXx8cCE9PWJbbStoXSl7Zz0hMDticmVha319aWYoZyl7aWYoZSE9PWQpZm9yKGFbZF09YVtlXSxnPWUqYyxrPWQqYyxoPTA7aCE9PWM7KytoKWJbaytoXT1iW2craF07KytkfX1kIT09YS5sZW5ndGgmJih0aGlzLnRpbWVzPVRIUkVFLkFuaW1hdGlvblV0aWxzLmFycmF5U2xpY2UoYSwwLGQpLHRoaXMudmFsdWVzPVRIUkVFLkFuaW1hdGlvblV0aWxzLmFycmF5U2xpY2UoYiwwLGQqYykpO3JldHVybiB0aGlzfX07XG5PYmplY3QuYXNzaWduKFRIUkVFLktleWZyYW1lVHJhY2sse3BhcnNlOmZ1bmN0aW9uKGEpe2lmKHZvaWQgMD09PWEudHlwZSl0aHJvdyBFcnJvcihcInRyYWNrIHR5cGUgdW5kZWZpbmVkLCBjYW4gbm90IHBhcnNlXCIpO3ZhciBiPVRIUkVFLktleWZyYW1lVHJhY2suX2dldFRyYWNrVHlwZUZvclZhbHVlVHlwZU5hbWUoYS50eXBlKTtpZih2b2lkIDA9PT1hLnRpbWVzKXt2YXIgYz1bXSxkPVtdO1RIUkVFLkFuaW1hdGlvblV0aWxzLmZsYXR0ZW5KU09OKGEua2V5cyxjLGQsXCJ2YWx1ZVwiKTthLnRpbWVzPWM7YS52YWx1ZXM9ZH1yZXR1cm4gdm9pZCAwIT09Yi5wYXJzZT9iLnBhcnNlKGEpOm5ldyBiKGEubmFtZSxhLnRpbWVzLGEudmFsdWVzLGEuaW50ZXJwb2xhdGlvbil9LHRvSlNPTjpmdW5jdGlvbihhKXt2YXIgYj1hLmNvbnN0cnVjdG9yO2lmKHZvaWQgMCE9PWIudG9KU09OKWI9Yi50b0pTT04oYSk7ZWxzZXt2YXIgYj17bmFtZTphLm5hbWUsdGltZXM6VEhSRUUuQW5pbWF0aW9uVXRpbHMuY29udmVydEFycmF5KGEudGltZXMsXG5BcnJheSksdmFsdWVzOlRIUkVFLkFuaW1hdGlvblV0aWxzLmNvbnZlcnRBcnJheShhLnZhbHVlcyxBcnJheSl9LGM9YS5nZXRJbnRlcnBvbGF0aW9uKCk7YyE9PWEuRGVmYXVsdEludGVycG9sYXRpb24mJihiLmludGVycG9sYXRpb249Yyl9Yi50eXBlPWEuVmFsdWVUeXBlTmFtZTtyZXR1cm4gYn0sX2dldFRyYWNrVHlwZUZvclZhbHVlVHlwZU5hbWU6ZnVuY3Rpb24oYSl7c3dpdGNoKGEudG9Mb3dlckNhc2UoKSl7Y2FzZSBcInNjYWxhclwiOmNhc2UgXCJkb3VibGVcIjpjYXNlIFwiZmxvYXRcIjpjYXNlIFwibnVtYmVyXCI6Y2FzZSBcImludGVnZXJcIjpyZXR1cm4gVEhSRUUuTnVtYmVyS2V5ZnJhbWVUcmFjaztjYXNlIFwidmVjdG9yXCI6Y2FzZSBcInZlY3RvcjJcIjpjYXNlIFwidmVjdG9yM1wiOmNhc2UgXCJ2ZWN0b3I0XCI6cmV0dXJuIFRIUkVFLlZlY3RvcktleWZyYW1lVHJhY2s7Y2FzZSBcImNvbG9yXCI6cmV0dXJuIFRIUkVFLkNvbG9yS2V5ZnJhbWVUcmFjaztjYXNlIFwicXVhdGVybmlvblwiOnJldHVybiBUSFJFRS5RdWF0ZXJuaW9uS2V5ZnJhbWVUcmFjaztcbmNhc2UgXCJib29sXCI6Y2FzZSBcImJvb2xlYW5cIjpyZXR1cm4gVEhSRUUuQm9vbGVhbktleWZyYW1lVHJhY2s7Y2FzZSBcInN0cmluZ1wiOnJldHVybiBUSFJFRS5TdHJpbmdLZXlmcmFtZVRyYWNrfXRocm93IEVycm9yKFwiVW5zdXBwb3J0ZWQgdHlwZU5hbWU6IFwiK2EpO319KTtUSFJFRS5Qcm9wZXJ0eUJpbmRpbmc9ZnVuY3Rpb24oYSxiLGMpe3RoaXMucGF0aD1iO3RoaXMucGFyc2VkUGF0aD1jfHxUSFJFRS5Qcm9wZXJ0eUJpbmRpbmcucGFyc2VUcmFja05hbWUoYik7dGhpcy5ub2RlPVRIUkVFLlByb3BlcnR5QmluZGluZy5maW5kTm9kZShhLHRoaXMucGFyc2VkUGF0aC5ub2RlTmFtZSl8fGE7dGhpcy5yb290Tm9kZT1hfTtcblRIUkVFLlByb3BlcnR5QmluZGluZy5wcm90b3R5cGU9e2NvbnN0cnVjdG9yOlRIUkVFLlByb3BlcnR5QmluZGluZyxnZXRWYWx1ZTpmdW5jdGlvbihhLGIpe3RoaXMuYmluZCgpO3RoaXMuZ2V0VmFsdWUoYSxiKX0sc2V0VmFsdWU6ZnVuY3Rpb24oYSxiKXt0aGlzLmJpbmQoKTt0aGlzLnNldFZhbHVlKGEsYil9LGJpbmQ6ZnVuY3Rpb24oKXt2YXIgYT10aGlzLm5vZGUsYj10aGlzLnBhcnNlZFBhdGgsYz1iLm9iamVjdE5hbWUsZD1iLnByb3BlcnR5TmFtZSxlPWIucHJvcGVydHlJbmRleDthfHwodGhpcy5ub2RlPWE9VEhSRUUuUHJvcGVydHlCaW5kaW5nLmZpbmROb2RlKHRoaXMucm9vdE5vZGUsYi5ub2RlTmFtZSl8fHRoaXMucm9vdE5vZGUpO3RoaXMuZ2V0VmFsdWU9dGhpcy5fZ2V0VmFsdWVfdW5hdmFpbGFibGU7dGhpcy5zZXRWYWx1ZT10aGlzLl9zZXRWYWx1ZV91bmF2YWlsYWJsZTtpZihhKXtpZihjKXt2YXIgZj1iLm9iamVjdEluZGV4O3N3aXRjaChjKXtjYXNlIFwibWF0ZXJpYWxzXCI6aWYoIWEubWF0ZXJpYWwpe2NvbnNvbGUuZXJyb3IoXCIgIGNhbiBub3QgYmluZCB0byBtYXRlcmlhbCBhcyBub2RlIGRvZXMgbm90IGhhdmUgYSBtYXRlcmlhbFwiLFxudGhpcyk7cmV0dXJufWlmKCFhLm1hdGVyaWFsLm1hdGVyaWFscyl7Y29uc29sZS5lcnJvcihcIiAgY2FuIG5vdCBiaW5kIHRvIG1hdGVyaWFsLm1hdGVyaWFscyBhcyBub2RlLm1hdGVyaWFsIGRvZXMgbm90IGhhdmUgYSBtYXRlcmlhbHMgYXJyYXlcIix0aGlzKTtyZXR1cm59YT1hLm1hdGVyaWFsLm1hdGVyaWFsczticmVhaztjYXNlIFwiYm9uZXNcIjppZighYS5za2VsZXRvbil7Y29uc29sZS5lcnJvcihcIiAgY2FuIG5vdCBiaW5kIHRvIGJvbmVzIGFzIG5vZGUgZG9lcyBub3QgaGF2ZSBhIHNrZWxldG9uXCIsdGhpcyk7cmV0dXJufWE9YS5za2VsZXRvbi5ib25lcztmb3IoYz0wO2M8YS5sZW5ndGg7YysrKWlmKGFbY10ubmFtZT09PWYpe2Y9YzticmVha31icmVhaztkZWZhdWx0OmlmKHZvaWQgMD09PWFbY10pe2NvbnNvbGUuZXJyb3IoXCIgIGNhbiBub3QgYmluZCB0byBvYmplY3ROYW1lIG9mIG5vZGUsIHVuZGVmaW5lZFwiLHRoaXMpO3JldHVybn1hPWFbY119aWYodm9pZCAwIT09Zil7aWYodm9pZCAwPT09XG5hW2ZdKXtjb25zb2xlLmVycm9yKFwiICB0cnlpbmcgdG8gYmluZCB0byBvYmplY3RJbmRleCBvZiBvYmplY3ROYW1lLCBidXQgaXMgdW5kZWZpbmVkOlwiLHRoaXMsYSk7cmV0dXJufWE9YVtmXX19Zj1hW2RdO2lmKHZvaWQgMD09PWYpY29uc29sZS5lcnJvcihcIiAgdHJ5aW5nIHRvIHVwZGF0ZSBwcm9wZXJ0eSBmb3IgdHJhY2s6IFwiK2Iubm9kZU5hbWUrXCIuXCIrZCtcIiBidXQgaXQgd2Fzbid0IGZvdW5kLlwiLGEpO2Vsc2V7Yj10aGlzLlZlcnNpb25pbmcuTm9uZTt2b2lkIDAhPT1hLm5lZWRzVXBkYXRlPyhiPXRoaXMuVmVyc2lvbmluZy5OZWVkc1VwZGF0ZSx0aGlzLnRhcmdldE9iamVjdD1hKTp2b2lkIDAhPT1hLm1hdHJpeFdvcmxkTmVlZHNVcGRhdGUmJihiPXRoaXMuVmVyc2lvbmluZy5NYXRyaXhXb3JsZE5lZWRzVXBkYXRlLHRoaXMudGFyZ2V0T2JqZWN0PWEpO2M9dGhpcy5CaW5kaW5nVHlwZS5EaXJlY3Q7aWYodm9pZCAwIT09ZSl7aWYoXCJtb3JwaFRhcmdldEluZmx1ZW5jZXNcIj09PVxuZCl7aWYoIWEuZ2VvbWV0cnkpe2NvbnNvbGUuZXJyb3IoXCIgIGNhbiBub3QgYmluZCB0byBtb3JwaFRhcmdldEluZmx1ZW5jZXMgYmVjYXN1c2Ugbm9kZSBkb2VzIG5vdCBoYXZlIGEgZ2VvbWV0cnlcIix0aGlzKTtyZXR1cm59aWYoIWEuZ2VvbWV0cnkubW9ycGhUYXJnZXRzKXtjb25zb2xlLmVycm9yKFwiICBjYW4gbm90IGJpbmQgdG8gbW9ycGhUYXJnZXRJbmZsdWVuY2VzIGJlY2FzdXNlIG5vZGUgZG9lcyBub3QgaGF2ZSBhIGdlb21ldHJ5Lm1vcnBoVGFyZ2V0c1wiLHRoaXMpO3JldHVybn1mb3IoYz0wO2M8dGhpcy5ub2RlLmdlb21ldHJ5Lm1vcnBoVGFyZ2V0cy5sZW5ndGg7YysrKWlmKGEuZ2VvbWV0cnkubW9ycGhUYXJnZXRzW2NdLm5hbWU9PT1lKXtlPWM7YnJlYWt9fWM9dGhpcy5CaW5kaW5nVHlwZS5BcnJheUVsZW1lbnQ7dGhpcy5yZXNvbHZlZFByb3BlcnR5PWY7dGhpcy5wcm9wZXJ0eUluZGV4PWV9ZWxzZSB2b2lkIDAhPT1mLmZyb21BcnJheSYmdm9pZCAwIT09Zi50b0FycmF5P1xuKGM9dGhpcy5CaW5kaW5nVHlwZS5IYXNGcm9tVG9BcnJheSx0aGlzLnJlc29sdmVkUHJvcGVydHk9Zik6dm9pZCAwIT09Zi5sZW5ndGg/KGM9dGhpcy5CaW5kaW5nVHlwZS5FbnRpcmVBcnJheSx0aGlzLnJlc29sdmVkUHJvcGVydHk9Zik6dGhpcy5wcm9wZXJ0eU5hbWU9ZDt0aGlzLmdldFZhbHVlPXRoaXMuR2V0dGVyQnlCaW5kaW5nVHlwZVtjXTt0aGlzLnNldFZhbHVlPXRoaXMuU2V0dGVyQnlCaW5kaW5nVHlwZUFuZFZlcnNpb25pbmdbY11bYl19fWVsc2UgY29uc29sZS5lcnJvcihcIiAgdHJ5aW5nIHRvIHVwZGF0ZSBub2RlIGZvciB0cmFjazogXCIrdGhpcy5wYXRoK1wiIGJ1dCBpdCB3YXNuJ3QgZm91bmQuXCIpfSx1bmJpbmQ6ZnVuY3Rpb24oKXt0aGlzLm5vZGU9bnVsbDt0aGlzLmdldFZhbHVlPXRoaXMuX2dldFZhbHVlX3VuYm91bmQ7dGhpcy5zZXRWYWx1ZT10aGlzLl9zZXRWYWx1ZV91bmJvdW5kfX07XG5PYmplY3QuYXNzaWduKFRIUkVFLlByb3BlcnR5QmluZGluZy5wcm90b3R5cGUse19nZXRWYWx1ZV91bmF2YWlsYWJsZTpmdW5jdGlvbigpe30sX3NldFZhbHVlX3VuYXZhaWxhYmxlOmZ1bmN0aW9uKCl7fSxfZ2V0VmFsdWVfdW5ib3VuZDpUSFJFRS5Qcm9wZXJ0eUJpbmRpbmcucHJvdG90eXBlLmdldFZhbHVlLF9zZXRWYWx1ZV91bmJvdW5kOlRIUkVFLlByb3BlcnR5QmluZGluZy5wcm90b3R5cGUuc2V0VmFsdWUsQmluZGluZ1R5cGU6e0RpcmVjdDowLEVudGlyZUFycmF5OjEsQXJyYXlFbGVtZW50OjIsSGFzRnJvbVRvQXJyYXk6M30sVmVyc2lvbmluZzp7Tm9uZTowLE5lZWRzVXBkYXRlOjEsTWF0cml4V29ybGROZWVkc1VwZGF0ZToyfSxHZXR0ZXJCeUJpbmRpbmdUeXBlOltmdW5jdGlvbihhLGIpe2FbYl09dGhpcy5ub2RlW3RoaXMucHJvcGVydHlOYW1lXX0sZnVuY3Rpb24oYSxiKXtmb3IodmFyIGM9dGhpcy5yZXNvbHZlZFByb3BlcnR5LGQ9MCxlPWMubGVuZ3RoO2QhPT1lOysrZClhW2IrK109XG5jW2RdfSxmdW5jdGlvbihhLGIpe2FbYl09dGhpcy5yZXNvbHZlZFByb3BlcnR5W3RoaXMucHJvcGVydHlJbmRleF19LGZ1bmN0aW9uKGEsYil7dGhpcy5yZXNvbHZlZFByb3BlcnR5LnRvQXJyYXkoYSxiKX1dLFNldHRlckJ5QmluZGluZ1R5cGVBbmRWZXJzaW9uaW5nOltbZnVuY3Rpb24oYSxiKXt0aGlzLm5vZGVbdGhpcy5wcm9wZXJ0eU5hbWVdPWFbYl19LGZ1bmN0aW9uKGEsYil7dGhpcy5ub2RlW3RoaXMucHJvcGVydHlOYW1lXT1hW2JdO3RoaXMudGFyZ2V0T2JqZWN0Lm5lZWRzVXBkYXRlPSEwfSxmdW5jdGlvbihhLGIpe3RoaXMubm9kZVt0aGlzLnByb3BlcnR5TmFtZV09YVtiXTt0aGlzLnRhcmdldE9iamVjdC5tYXRyaXhXb3JsZE5lZWRzVXBkYXRlPSEwfV0sW2Z1bmN0aW9uKGEsYil7Zm9yKHZhciBjPXRoaXMucmVzb2x2ZWRQcm9wZXJ0eSxkPTAsZT1jLmxlbmd0aDtkIT09ZTsrK2QpY1tkXT1hW2IrK119LGZ1bmN0aW9uKGEsYil7Zm9yKHZhciBjPXRoaXMucmVzb2x2ZWRQcm9wZXJ0eSxcbmQ9MCxlPWMubGVuZ3RoO2QhPT1lOysrZCljW2RdPWFbYisrXTt0aGlzLnRhcmdldE9iamVjdC5uZWVkc1VwZGF0ZT0hMH0sZnVuY3Rpb24oYSxiKXtmb3IodmFyIGM9dGhpcy5yZXNvbHZlZFByb3BlcnR5LGQ9MCxlPWMubGVuZ3RoO2QhPT1lOysrZCljW2RdPWFbYisrXTt0aGlzLnRhcmdldE9iamVjdC5tYXRyaXhXb3JsZE5lZWRzVXBkYXRlPSEwfV0sW2Z1bmN0aW9uKGEsYil7dGhpcy5yZXNvbHZlZFByb3BlcnR5W3RoaXMucHJvcGVydHlJbmRleF09YVtiXX0sZnVuY3Rpb24oYSxiKXt0aGlzLnJlc29sdmVkUHJvcGVydHlbdGhpcy5wcm9wZXJ0eUluZGV4XT1hW2JdO3RoaXMudGFyZ2V0T2JqZWN0Lm5lZWRzVXBkYXRlPSEwfSxmdW5jdGlvbihhLGIpe3RoaXMucmVzb2x2ZWRQcm9wZXJ0eVt0aGlzLnByb3BlcnR5SW5kZXhdPWFbYl07dGhpcy50YXJnZXRPYmplY3QubWF0cml4V29ybGROZWVkc1VwZGF0ZT0hMH1dLFtmdW5jdGlvbihhLGIpe3RoaXMucmVzb2x2ZWRQcm9wZXJ0eS5mcm9tQXJyYXkoYSxcbmIpfSxmdW5jdGlvbihhLGIpe3RoaXMucmVzb2x2ZWRQcm9wZXJ0eS5mcm9tQXJyYXkoYSxiKTt0aGlzLnRhcmdldE9iamVjdC5uZWVkc1VwZGF0ZT0hMH0sZnVuY3Rpb24oYSxiKXt0aGlzLnJlc29sdmVkUHJvcGVydHkuZnJvbUFycmF5KGEsYik7dGhpcy50YXJnZXRPYmplY3QubWF0cml4V29ybGROZWVkc1VwZGF0ZT0hMH1dXX0pO1RIUkVFLlByb3BlcnR5QmluZGluZy5Db21wb3NpdGU9ZnVuY3Rpb24oYSxiLGMpe2M9Y3x8VEhSRUUuUHJvcGVydHlCaW5kaW5nLnBhcnNlVHJhY2tOYW1lKGIpO3RoaXMuX3RhcmdldEdyb3VwPWE7dGhpcy5fYmluZGluZ3M9YS5zdWJzY3JpYmVfKGIsYyl9O1xuVEhSRUUuUHJvcGVydHlCaW5kaW5nLkNvbXBvc2l0ZS5wcm90b3R5cGU9e2NvbnN0cnVjdG9yOlRIUkVFLlByb3BlcnR5QmluZGluZy5Db21wb3NpdGUsZ2V0VmFsdWU6ZnVuY3Rpb24oYSxiKXt0aGlzLmJpbmQoKTt2YXIgYz10aGlzLl9iaW5kaW5nc1t0aGlzLl90YXJnZXRHcm91cC5uQ2FjaGVkT2JqZWN0c19dO3ZvaWQgMCE9PWMmJmMuZ2V0VmFsdWUoYSxiKX0sc2V0VmFsdWU6ZnVuY3Rpb24oYSxiKXtmb3IodmFyIGM9dGhpcy5fYmluZGluZ3MsZD10aGlzLl90YXJnZXRHcm91cC5uQ2FjaGVkT2JqZWN0c18sZT1jLmxlbmd0aDtkIT09ZTsrK2QpY1tkXS5zZXRWYWx1ZShhLGIpfSxiaW5kOmZ1bmN0aW9uKCl7Zm9yKHZhciBhPXRoaXMuX2JpbmRpbmdzLGI9dGhpcy5fdGFyZ2V0R3JvdXAubkNhY2hlZE9iamVjdHNfLGM9YS5sZW5ndGg7YiE9PWM7KytiKWFbYl0uYmluZCgpfSx1bmJpbmQ6ZnVuY3Rpb24oKXtmb3IodmFyIGE9dGhpcy5fYmluZGluZ3MsYj10aGlzLl90YXJnZXRHcm91cC5uQ2FjaGVkT2JqZWN0c18sXG5jPWEubGVuZ3RoO2IhPT1jOysrYilhW2JdLnVuYmluZCgpfX07VEhSRUUuUHJvcGVydHlCaW5kaW5nLmNyZWF0ZT1mdW5jdGlvbihhLGIsYyl7cmV0dXJuIGEgaW5zdGFuY2VvZiBUSFJFRS5BbmltYXRpb25PYmplY3RHcm91cD9uZXcgVEhSRUUuUHJvcGVydHlCaW5kaW5nLkNvbXBvc2l0ZShhLGIsYyk6bmV3IFRIUkVFLlByb3BlcnR5QmluZGluZyhhLGIsYyl9O1xuVEhSRUUuUHJvcGVydHlCaW5kaW5nLnBhcnNlVHJhY2tOYW1lPWZ1bmN0aW9uKGEpe3ZhciBiPS9eKChbXFx3XStcXC8pKikoW1xcdy1cXGRdKyk/KFxcLihbXFx3XSspKFxcWyhbXFx3XFxkXFxbXFxdXFxfLjpcXC0gXSspXFxdKT8pPyhcXC4oW1xcdy5dKykoXFxbKFtcXHdcXGRcXFtcXF1cXF8uIF0rKVxcXSk/KSQvLGM9Yi5leGVjKGEpO2lmKCFjKXRocm93IEVycm9yKFwiY2Fubm90IHBhcnNlIHRyYWNrTmFtZSBhdCBhbGw6IFwiK2EpO2MuaW5kZXg9PT1iLmxhc3RJbmRleCYmYi5sYXN0SW5kZXgrKztiPXtub2RlTmFtZTpjWzNdLG9iamVjdE5hbWU6Y1s1XSxvYmplY3RJbmRleDpjWzddLHByb3BlcnR5TmFtZTpjWzldLHByb3BlcnR5SW5kZXg6Y1sxMV19O2lmKG51bGw9PT1iLnByb3BlcnR5TmFtZXx8MD09PWIucHJvcGVydHlOYW1lLmxlbmd0aCl0aHJvdyBFcnJvcihcImNhbiBub3QgcGFyc2UgcHJvcGVydHlOYW1lIGZyb20gdHJhY2tOYW1lOiBcIithKTtyZXR1cm4gYn07XG5USFJFRS5Qcm9wZXJ0eUJpbmRpbmcuZmluZE5vZGU9ZnVuY3Rpb24oYSxiKXtpZighYnx8XCJcIj09PWJ8fFwicm9vdFwiPT09Ynx8XCIuXCI9PT1ifHwtMT09PWJ8fGI9PT1hLm5hbWV8fGI9PT1hLnV1aWQpcmV0dXJuIGE7aWYoYS5za2VsZXRvbil7dmFyIGM9ZnVuY3Rpb24oYSl7Zm9yKHZhciBjPTA7YzxhLmJvbmVzLmxlbmd0aDtjKyspe3ZhciBkPWEuYm9uZXNbY107aWYoZC5uYW1lPT09YilyZXR1cm4gZH1yZXR1cm4gbnVsbH0oYS5za2VsZXRvbik7aWYoYylyZXR1cm4gY31pZihhLmNoaWxkcmVuKXt2YXIgZD1mdW5jdGlvbihhKXtmb3IodmFyIGM9MDtjPGEubGVuZ3RoO2MrKyl7dmFyIGc9YVtjXTtpZihnLm5hbWU9PT1ifHxnLnV1aWQ9PT1ifHwoZz1kKGcuY2hpbGRyZW4pKSlyZXR1cm4gZ31yZXR1cm4gbnVsbH07aWYoYz1kKGEuY2hpbGRyZW4pKXJldHVybiBjfXJldHVybiBudWxsfTtcblRIUkVFLlByb3BlcnR5TWl4ZXI9ZnVuY3Rpb24oYSxiLGMpe3RoaXMuYmluZGluZz1hO3RoaXMudmFsdWVTaXplPWM7YT1GbG9hdDY0QXJyYXk7c3dpdGNoKGIpe2Nhc2UgXCJxdWF0ZXJuaW9uXCI6Yj10aGlzLl9zbGVycDticmVhaztjYXNlIFwic3RyaW5nXCI6Y2FzZSBcImJvb2xcIjphPUFycmF5O2I9dGhpcy5fc2VsZWN0O2JyZWFrO2RlZmF1bHQ6Yj10aGlzLl9sZXJwfXRoaXMuYnVmZmVyPW5ldyBhKDQqYyk7dGhpcy5fbWl4QnVmZmVyUmVnaW9uPWI7dGhpcy5yZWZlcmVuY2VDb3VudD10aGlzLnVzZUNvdW50PXRoaXMuY3VtdWxhdGl2ZVdlaWdodD0wfTtcblRIUkVFLlByb3BlcnR5TWl4ZXIucHJvdG90eXBlPXtjb25zdHJ1Y3RvcjpUSFJFRS5Qcm9wZXJ0eU1peGVyLGFjY3VtdWxhdGU6ZnVuY3Rpb24oYSxiKXt2YXIgYz10aGlzLmJ1ZmZlcixkPXRoaXMudmFsdWVTaXplLGU9YSpkK2QsZj10aGlzLmN1bXVsYXRpdmVXZWlnaHQ7aWYoMD09PWYpe2ZvcihmPTA7ZiE9PWQ7KytmKWNbZStmXT1jW2ZdO2Y9Yn1lbHNlIGYrPWIsdGhpcy5fbWl4QnVmZmVyUmVnaW9uKGMsZSwwLGIvZixkKTt0aGlzLmN1bXVsYXRpdmVXZWlnaHQ9Zn0sYXBwbHk6ZnVuY3Rpb24oYSl7dmFyIGI9dGhpcy52YWx1ZVNpemUsYz10aGlzLmJ1ZmZlcjthPWEqYitiO3ZhciBkPXRoaXMuY3VtdWxhdGl2ZVdlaWdodCxlPXRoaXMuYmluZGluZzt0aGlzLmN1bXVsYXRpdmVXZWlnaHQ9MDsxPmQmJnRoaXMuX21peEJ1ZmZlclJlZ2lvbihjLGEsMypiLDEtZCxiKTtmb3IodmFyIGQ9YixmPWIrYjtkIT09ZjsrK2QpaWYoY1tkXSE9PWNbZCtiXSl7ZS5zZXRWYWx1ZShjLGEpO1xuYnJlYWt9fSxzYXZlT3JpZ2luYWxTdGF0ZTpmdW5jdGlvbigpe3ZhciBhPXRoaXMuYnVmZmVyLGI9dGhpcy52YWx1ZVNpemUsYz0zKmI7dGhpcy5iaW5kaW5nLmdldFZhbHVlKGEsYyk7Zm9yKHZhciBkPWI7ZCE9PWM7KytkKWFbZF09YVtjK2QlYl07dGhpcy5jdW11bGF0aXZlV2VpZ2h0PTB9LHJlc3RvcmVPcmlnaW5hbFN0YXRlOmZ1bmN0aW9uKCl7dGhpcy5iaW5kaW5nLnNldFZhbHVlKHRoaXMuYnVmZmVyLDMqdGhpcy52YWx1ZVNpemUpfSxfc2VsZWN0OmZ1bmN0aW9uKGEsYixjLGQsZSl7aWYoLjU8PWQpZm9yKGQ9MDtkIT09ZTsrK2QpYVtiK2RdPWFbYytkXX0sX3NsZXJwOmZ1bmN0aW9uKGEsYixjLGQsZSl7VEhSRUUuUXVhdGVybmlvbi5zbGVycEZsYXQoYSxiLGEsYixhLGMsZCl9LF9sZXJwOmZ1bmN0aW9uKGEsYixjLGQsZSl7Zm9yKHZhciBmPTEtZCxnPTA7ZyE9PWU7KytnKXt2YXIgaD1iK2c7YVtoXT1hW2hdKmYrYVtjK2ddKmR9fX07XG5USFJFRS5Cb29sZWFuS2V5ZnJhbWVUcmFjaz1mdW5jdGlvbihhLGIsYyl7VEhSRUUuS2V5ZnJhbWVUcmFjay5jYWxsKHRoaXMsYSxiLGMpfTtUSFJFRS5Cb29sZWFuS2V5ZnJhbWVUcmFjay5wcm90b3R5cGU9T2JqZWN0LmFzc2lnbihPYmplY3QuY3JlYXRlKFRIUkVFLktleWZyYW1lVHJhY2sucHJvdG90eXBlKSx7Y29uc3RydWN0b3I6VEhSRUUuQm9vbGVhbktleWZyYW1lVHJhY2ssVmFsdWVUeXBlTmFtZTpcImJvb2xcIixWYWx1ZUJ1ZmZlclR5cGU6QXJyYXksRGVmYXVsdEludGVycG9sYXRpb246VEhSRUUuSW50ZXJwb2xhdGVEaXNjcmV0ZSxJbnRlcnBvbGFudEZhY3RvcnlNZXRob2RMaW5lYXI6dm9pZCAwLEludGVycG9sYW50RmFjdG9yeU1ldGhvZFNtb290aDp2b2lkIDB9KTtUSFJFRS5Db2xvcktleWZyYW1lVHJhY2s9ZnVuY3Rpb24oYSxiLGMsZCl7VEhSRUUuS2V5ZnJhbWVUcmFjay5jYWxsKHRoaXMsYSxiLGMsZCl9O1xuVEhSRUUuQ29sb3JLZXlmcmFtZVRyYWNrLnByb3RvdHlwZT1PYmplY3QuYXNzaWduKE9iamVjdC5jcmVhdGUoVEhSRUUuS2V5ZnJhbWVUcmFjay5wcm90b3R5cGUpLHtjb25zdHJ1Y3RvcjpUSFJFRS5Db2xvcktleWZyYW1lVHJhY2ssVmFsdWVUeXBlTmFtZTpcImNvbG9yXCJ9KTtUSFJFRS5OdW1iZXJLZXlmcmFtZVRyYWNrPWZ1bmN0aW9uKGEsYixjLGQpe1RIUkVFLktleWZyYW1lVHJhY2suY2FsbCh0aGlzLGEsYixjLGQpfTtUSFJFRS5OdW1iZXJLZXlmcmFtZVRyYWNrLnByb3RvdHlwZT1PYmplY3QuYXNzaWduKE9iamVjdC5jcmVhdGUoVEhSRUUuS2V5ZnJhbWVUcmFjay5wcm90b3R5cGUpLHtjb25zdHJ1Y3RvcjpUSFJFRS5OdW1iZXJLZXlmcmFtZVRyYWNrLFZhbHVlVHlwZU5hbWU6XCJudW1iZXJcIn0pO1RIUkVFLlF1YXRlcm5pb25LZXlmcmFtZVRyYWNrPWZ1bmN0aW9uKGEsYixjLGQpe1RIUkVFLktleWZyYW1lVHJhY2suY2FsbCh0aGlzLGEsYixjLGQpfTtcblRIUkVFLlF1YXRlcm5pb25LZXlmcmFtZVRyYWNrLnByb3RvdHlwZT1PYmplY3QuYXNzaWduKE9iamVjdC5jcmVhdGUoVEhSRUUuS2V5ZnJhbWVUcmFjay5wcm90b3R5cGUpLHtjb25zdHJ1Y3RvcjpUSFJFRS5RdWF0ZXJuaW9uS2V5ZnJhbWVUcmFjayxWYWx1ZVR5cGVOYW1lOlwicXVhdGVybmlvblwiLERlZmF1bHRJbnRlcnBvbGF0aW9uOlRIUkVFLkludGVycG9sYXRlTGluZWFyLEludGVycG9sYW50RmFjdG9yeU1ldGhvZExpbmVhcjpmdW5jdGlvbihhKXtyZXR1cm4gbmV3IFRIUkVFLlF1YXRlcm5pb25MaW5lYXJJbnRlcnBvbGFudCh0aGlzLnRpbWVzLHRoaXMudmFsdWVzLHRoaXMuZ2V0VmFsdWVTaXplKCksYSl9LEludGVycG9sYW50RmFjdG9yeU1ldGhvZFNtb290aDp2b2lkIDB9KTtUSFJFRS5TdHJpbmdLZXlmcmFtZVRyYWNrPWZ1bmN0aW9uKGEsYixjLGQpe1RIUkVFLktleWZyYW1lVHJhY2suY2FsbCh0aGlzLGEsYixjLGQpfTtcblRIUkVFLlN0cmluZ0tleWZyYW1lVHJhY2sucHJvdG90eXBlPU9iamVjdC5hc3NpZ24oT2JqZWN0LmNyZWF0ZShUSFJFRS5LZXlmcmFtZVRyYWNrLnByb3RvdHlwZSkse2NvbnN0cnVjdG9yOlRIUkVFLlN0cmluZ0tleWZyYW1lVHJhY2ssVmFsdWVUeXBlTmFtZTpcInN0cmluZ1wiLFZhbHVlQnVmZmVyVHlwZTpBcnJheSxEZWZhdWx0SW50ZXJwb2xhdGlvbjpUSFJFRS5JbnRlcnBvbGF0ZURpc2NyZXRlLEludGVycG9sYW50RmFjdG9yeU1ldGhvZExpbmVhcjp2b2lkIDAsSW50ZXJwb2xhbnRGYWN0b3J5TWV0aG9kU21vb3RoOnZvaWQgMH0pO1RIUkVFLlZlY3RvcktleWZyYW1lVHJhY2s9ZnVuY3Rpb24oYSxiLGMsZCl7VEhSRUUuS2V5ZnJhbWVUcmFjay5jYWxsKHRoaXMsYSxiLGMsZCl9O1xuVEhSRUUuVmVjdG9yS2V5ZnJhbWVUcmFjay5wcm90b3R5cGU9T2JqZWN0LmFzc2lnbihPYmplY3QuY3JlYXRlKFRIUkVFLktleWZyYW1lVHJhY2sucHJvdG90eXBlKSx7Y29uc3RydWN0b3I6VEhSRUUuVmVjdG9yS2V5ZnJhbWVUcmFjayxWYWx1ZVR5cGVOYW1lOlwidmVjdG9yXCJ9KTtcblRIUkVFLkF1ZGlvPWZ1bmN0aW9uKGEpe1RIUkVFLk9iamVjdDNELmNhbGwodGhpcyk7dGhpcy50eXBlPVwiQXVkaW9cIjt0aGlzLmNvbnRleHQ9YS5jb250ZXh0O3RoaXMuc291cmNlPXRoaXMuY29udGV4dC5jcmVhdGVCdWZmZXJTb3VyY2UoKTt0aGlzLnNvdXJjZS5vbmVuZGVkPXRoaXMub25FbmRlZC5iaW5kKHRoaXMpO3RoaXMuZ2Fpbj10aGlzLmNvbnRleHQuY3JlYXRlR2FpbigpO3RoaXMuZ2Fpbi5jb25uZWN0KGEuZ2V0SW5wdXQoKSk7dGhpcy5hdXRvcGxheT0hMTt0aGlzLnN0YXJ0VGltZT0wO3RoaXMucGxheWJhY2tSYXRlPTE7dGhpcy5pc1BsYXlpbmc9ITE7dGhpcy5oYXNQbGF5YmFja0NvbnRyb2w9ITA7dGhpcy5zb3VyY2VUeXBlPVwiZW1wdHlcIjt0aGlzLmZpbHRlcnM9W119O1xuVEhSRUUuQXVkaW8ucHJvdG90eXBlPU9iamVjdC5hc3NpZ24oT2JqZWN0LmNyZWF0ZShUSFJFRS5PYmplY3QzRC5wcm90b3R5cGUpLHtjb25zdHJ1Y3RvcjpUSFJFRS5BdWRpbyxnZXRPdXRwdXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5nYWlufSxzZXROb2RlU291cmNlOmZ1bmN0aW9uKGEpe3RoaXMuaGFzUGxheWJhY2tDb250cm9sPSExO3RoaXMuc291cmNlVHlwZT1cImF1ZGlvTm9kZVwiO3RoaXMuc291cmNlPWE7dGhpcy5jb25uZWN0KCk7cmV0dXJuIHRoaXN9LHNldEJ1ZmZlcjpmdW5jdGlvbihhKXt0aGlzLnNvdXJjZS5idWZmZXI9YTt0aGlzLnNvdXJjZVR5cGU9XCJidWZmZXJcIjt0aGlzLmF1dG9wbGF5JiZ0aGlzLnBsYXkoKTtyZXR1cm4gdGhpc30scGxheTpmdW5jdGlvbigpe2lmKCEwPT09dGhpcy5pc1BsYXlpbmcpY29uc29sZS53YXJuKFwiVEhSRUUuQXVkaW86IEF1ZGlvIGlzIGFscmVhZHkgcGxheWluZy5cIik7ZWxzZSBpZighMT09PXRoaXMuaGFzUGxheWJhY2tDb250cm9sKWNvbnNvbGUud2FybihcIlRIUkVFLkF1ZGlvOiB0aGlzIEF1ZGlvIGhhcyBubyBwbGF5YmFjayBjb250cm9sLlwiKTtcbmVsc2V7dmFyIGE9dGhpcy5jb250ZXh0LmNyZWF0ZUJ1ZmZlclNvdXJjZSgpO2EuYnVmZmVyPXRoaXMuc291cmNlLmJ1ZmZlcjthLmxvb3A9dGhpcy5zb3VyY2UubG9vcDthLm9uZW5kZWQ9dGhpcy5zb3VyY2Uub25lbmRlZDthLnN0YXJ0KDAsdGhpcy5zdGFydFRpbWUpO2EucGxheWJhY2tSYXRlLnZhbHVlPXRoaXMucGxheWJhY2tSYXRlO3RoaXMuaXNQbGF5aW5nPSEwO3RoaXMuc291cmNlPWE7cmV0dXJuIHRoaXMuY29ubmVjdCgpfX0scGF1c2U6ZnVuY3Rpb24oKXtpZighMT09PXRoaXMuaGFzUGxheWJhY2tDb250cm9sKWNvbnNvbGUud2FybihcIlRIUkVFLkF1ZGlvOiB0aGlzIEF1ZGlvIGhhcyBubyBwbGF5YmFjayBjb250cm9sLlwiKTtlbHNlIHJldHVybiB0aGlzLnNvdXJjZS5zdG9wKCksdGhpcy5zdGFydFRpbWU9dGhpcy5jb250ZXh0LmN1cnJlbnRUaW1lLHRoaXMuaXNQbGF5aW5nPSExLHRoaXN9LHN0b3A6ZnVuY3Rpb24oKXtpZighMT09PXRoaXMuaGFzUGxheWJhY2tDb250cm9sKWNvbnNvbGUud2FybihcIlRIUkVFLkF1ZGlvOiB0aGlzIEF1ZGlvIGhhcyBubyBwbGF5YmFjayBjb250cm9sLlwiKTtcbmVsc2UgcmV0dXJuIHRoaXMuc291cmNlLnN0b3AoKSx0aGlzLnN0YXJ0VGltZT0wLHRoaXMuaXNQbGF5aW5nPSExLHRoaXN9LGNvbm5lY3Q6ZnVuY3Rpb24oKXtpZigwPHRoaXMuZmlsdGVycy5sZW5ndGgpe3RoaXMuc291cmNlLmNvbm5lY3QodGhpcy5maWx0ZXJzWzBdKTtmb3IodmFyIGE9MSxiPXRoaXMuZmlsdGVycy5sZW5ndGg7YTxiO2ErKyl0aGlzLmZpbHRlcnNbYS0xXS5jb25uZWN0KHRoaXMuZmlsdGVyc1thXSk7dGhpcy5maWx0ZXJzW3RoaXMuZmlsdGVycy5sZW5ndGgtMV0uY29ubmVjdCh0aGlzLmdldE91dHB1dCgpKX1lbHNlIHRoaXMuc291cmNlLmNvbm5lY3QodGhpcy5nZXRPdXRwdXQoKSk7cmV0dXJuIHRoaXN9LGRpc2Nvbm5lY3Q6ZnVuY3Rpb24oKXtpZigwPHRoaXMuZmlsdGVycy5sZW5ndGgpe3RoaXMuc291cmNlLmRpc2Nvbm5lY3QodGhpcy5maWx0ZXJzWzBdKTtmb3IodmFyIGE9MSxiPXRoaXMuZmlsdGVycy5sZW5ndGg7YTxiO2ErKyl0aGlzLmZpbHRlcnNbYS1cbjFdLmRpc2Nvbm5lY3QodGhpcy5maWx0ZXJzW2FdKTt0aGlzLmZpbHRlcnNbdGhpcy5maWx0ZXJzLmxlbmd0aC0xXS5kaXNjb25uZWN0KHRoaXMuZ2V0T3V0cHV0KCkpfWVsc2UgdGhpcy5zb3VyY2UuZGlzY29ubmVjdCh0aGlzLmdldE91dHB1dCgpKTtyZXR1cm4gdGhpc30sZ2V0RmlsdGVyczpmdW5jdGlvbigpe3JldHVybiB0aGlzLmZpbHRlcnN9LHNldEZpbHRlcnM6ZnVuY3Rpb24oYSl7YXx8KGE9W10pOyEwPT09dGhpcy5pc1BsYXlpbmc/KHRoaXMuZGlzY29ubmVjdCgpLHRoaXMuZmlsdGVycz1hLHRoaXMuY29ubmVjdCgpKTp0aGlzLmZpbHRlcnM9YTtyZXR1cm4gdGhpc30sZ2V0RmlsdGVyOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuZ2V0RmlsdGVycygpWzBdfSxzZXRGaWx0ZXI6ZnVuY3Rpb24oYSl7cmV0dXJuIHRoaXMuc2V0RmlsdGVycyhhP1thXTpbXSl9LHNldFBsYXliYWNrUmF0ZTpmdW5jdGlvbihhKXtpZighMT09PXRoaXMuaGFzUGxheWJhY2tDb250cm9sKWNvbnNvbGUud2FybihcIlRIUkVFLkF1ZGlvOiB0aGlzIEF1ZGlvIGhhcyBubyBwbGF5YmFjayBjb250cm9sLlwiKTtcbmVsc2UgcmV0dXJuIHRoaXMucGxheWJhY2tSYXRlPWEsITA9PT10aGlzLmlzUGxheWluZyYmKHRoaXMuc291cmNlLnBsYXliYWNrUmF0ZS52YWx1ZT10aGlzLnBsYXliYWNrUmF0ZSksdGhpc30sZ2V0UGxheWJhY2tSYXRlOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMucGxheWJhY2tSYXRlfSxvbkVuZGVkOmZ1bmN0aW9uKCl7dGhpcy5pc1BsYXlpbmc9ITF9LGdldExvb3A6ZnVuY3Rpb24oKXtyZXR1cm4hMT09PXRoaXMuaGFzUGxheWJhY2tDb250cm9sPyhjb25zb2xlLndhcm4oXCJUSFJFRS5BdWRpbzogdGhpcyBBdWRpbyBoYXMgbm8gcGxheWJhY2sgY29udHJvbC5cIiksITEpOnRoaXMuc291cmNlLmxvb3B9LHNldExvb3A6ZnVuY3Rpb24oYSl7ITE9PT10aGlzLmhhc1BsYXliYWNrQ29udHJvbD9jb25zb2xlLndhcm4oXCJUSFJFRS5BdWRpbzogdGhpcyBBdWRpbyBoYXMgbm8gcGxheWJhY2sgY29udHJvbC5cIik6dGhpcy5zb3VyY2UubG9vcD1hfSxnZXRWb2x1bWU6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5nYWluLmdhaW4udmFsdWV9LFxuc2V0Vm9sdW1lOmZ1bmN0aW9uKGEpe3RoaXMuZ2Fpbi5nYWluLnZhbHVlPWE7cmV0dXJuIHRoaXN9fSk7VEhSRUUuQXVkaW9BbmFseXNlcj1mdW5jdGlvbihhLGIpe3RoaXMuYW5hbHlzZXI9YS5jb250ZXh0LmNyZWF0ZUFuYWx5c2VyKCk7dGhpcy5hbmFseXNlci5mZnRTaXplPXZvaWQgMCE9PWI/YjoyMDQ4O3RoaXMuZGF0YT1uZXcgVWludDhBcnJheSh0aGlzLmFuYWx5c2VyLmZyZXF1ZW5jeUJpbkNvdW50KTthLmdldE91dHB1dCgpLmNvbm5lY3QodGhpcy5hbmFseXNlcil9O1xuT2JqZWN0LmFzc2lnbihUSFJFRS5BdWRpb0FuYWx5c2VyLnByb3RvdHlwZSx7Z2V0RnJlcXVlbmN5RGF0YTpmdW5jdGlvbigpe3RoaXMuYW5hbHlzZXIuZ2V0Qnl0ZUZyZXF1ZW5jeURhdGEodGhpcy5kYXRhKTtyZXR1cm4gdGhpcy5kYXRhfSxnZXRBdmVyYWdlRnJlcXVlbmN5OmZ1bmN0aW9uKCl7Zm9yKHZhciBhPTAsYj10aGlzLmdldEZyZXF1ZW5jeURhdGEoKSxjPTA7YzxiLmxlbmd0aDtjKyspYSs9YltjXTtyZXR1cm4gYS9iLmxlbmd0aH19KTtPYmplY3QuZGVmaW5lUHJvcGVydHkoVEhSRUUsXCJBdWRpb0NvbnRleHRcIix7Z2V0OmZ1bmN0aW9uKCl7dmFyIGE7cmV0dXJuIGZ1bmN0aW9uKCl7dm9pZCAwPT09YSYmKGE9bmV3ICh3aW5kb3cuQXVkaW9Db250ZXh0fHx3aW5kb3cud2Via2l0QXVkaW9Db250ZXh0KSk7cmV0dXJuIGF9fSgpfSk7XG5USFJFRS5Qb3NpdGlvbmFsQXVkaW89ZnVuY3Rpb24oYSl7VEhSRUUuQXVkaW8uY2FsbCh0aGlzLGEpO3RoaXMucGFubmVyPXRoaXMuY29udGV4dC5jcmVhdGVQYW5uZXIoKTt0aGlzLnBhbm5lci5jb25uZWN0KHRoaXMuZ2Fpbil9O1xuVEhSRUUuUG9zaXRpb25hbEF1ZGlvLnByb3RvdHlwZT1PYmplY3QuYXNzaWduKE9iamVjdC5jcmVhdGUoVEhSRUUuQXVkaW8ucHJvdG90eXBlKSx7Y29uc3RydWN0b3I6VEhSRUUuUG9zaXRpb25hbEF1ZGlvLGdldE91dHB1dDpmdW5jdGlvbigpe3JldHVybiB0aGlzLnBhbm5lcn0sZ2V0UmVmRGlzdGFuY2U6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5wYW5uZXIucmVmRGlzdGFuY2V9LHNldFJlZkRpc3RhbmNlOmZ1bmN0aW9uKGEpe3RoaXMucGFubmVyLnJlZkRpc3RhbmNlPWF9LGdldFJvbGxvZmZGYWN0b3I6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5wYW5uZXIucm9sbG9mZkZhY3Rvcn0sc2V0Um9sbG9mZkZhY3RvcjpmdW5jdGlvbihhKXt0aGlzLnBhbm5lci5yb2xsb2ZmRmFjdG9yPWF9LGdldERpc3RhbmNlTW9kZWw6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5wYW5uZXIuZGlzdGFuY2VNb2RlbH0sc2V0RGlzdGFuY2VNb2RlbDpmdW5jdGlvbihhKXt0aGlzLnBhbm5lci5kaXN0YW5jZU1vZGVsPVxuYX0sZ2V0TWF4RGlzdGFuY2U6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5wYW5uZXIubWF4RGlzdGFuY2V9LHNldE1heERpc3RhbmNlOmZ1bmN0aW9uKGEpe3RoaXMucGFubmVyLm1heERpc3RhbmNlPWF9LHVwZGF0ZU1hdHJpeFdvcmxkOmZ1bmN0aW9uKCl7dmFyIGE9bmV3IFRIUkVFLlZlY3RvcjM7cmV0dXJuIGZ1bmN0aW9uKGIpe1RIUkVFLk9iamVjdDNELnByb3RvdHlwZS51cGRhdGVNYXRyaXhXb3JsZC5jYWxsKHRoaXMsYik7YS5zZXRGcm9tTWF0cml4UG9zaXRpb24odGhpcy5tYXRyaXhXb3JsZCk7dGhpcy5wYW5uZXIuc2V0UG9zaXRpb24oYS54LGEueSxhLnopfX0oKX0pO1xuVEhSRUUuQXVkaW9MaXN0ZW5lcj1mdW5jdGlvbigpe1RIUkVFLk9iamVjdDNELmNhbGwodGhpcyk7dGhpcy50eXBlPVwiQXVkaW9MaXN0ZW5lclwiO3RoaXMuY29udGV4dD1USFJFRS5BdWRpb0NvbnRleHQ7dGhpcy5nYWluPXRoaXMuY29udGV4dC5jcmVhdGVHYWluKCk7dGhpcy5nYWluLmNvbm5lY3QodGhpcy5jb250ZXh0LmRlc3RpbmF0aW9uKTt0aGlzLmZpbHRlcj1udWxsfTtcblRIUkVFLkF1ZGlvTGlzdGVuZXIucHJvdG90eXBlPU9iamVjdC5hc3NpZ24oT2JqZWN0LmNyZWF0ZShUSFJFRS5PYmplY3QzRC5wcm90b3R5cGUpLHtjb25zdHJ1Y3RvcjpUSFJFRS5BdWRpb0xpc3RlbmVyLGdldElucHV0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuZ2Fpbn0scmVtb3ZlRmlsdGVyOmZ1bmN0aW9uKCl7bnVsbCE9PXRoaXMuZmlsdGVyJiYodGhpcy5nYWluLmRpc2Nvbm5lY3QodGhpcy5maWx0ZXIpLHRoaXMuZmlsdGVyLmRpc2Nvbm5lY3QodGhpcy5jb250ZXh0LmRlc3RpbmF0aW9uKSx0aGlzLmdhaW4uY29ubmVjdCh0aGlzLmNvbnRleHQuZGVzdGluYXRpb24pLHRoaXMuZmlsdGVyPW51bGwpfSxnZXRGaWx0ZXI6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5maWx0ZXJ9LHNldEZpbHRlcjpmdW5jdGlvbihhKXtudWxsIT09dGhpcy5maWx0ZXI/KHRoaXMuZ2Fpbi5kaXNjb25uZWN0KHRoaXMuZmlsdGVyKSx0aGlzLmZpbHRlci5kaXNjb25uZWN0KHRoaXMuY29udGV4dC5kZXN0aW5hdGlvbikpOlxudGhpcy5nYWluLmRpc2Nvbm5lY3QodGhpcy5jb250ZXh0LmRlc3RpbmF0aW9uKTt0aGlzLmZpbHRlcj1hO3RoaXMuZ2Fpbi5jb25uZWN0KHRoaXMuZmlsdGVyKTt0aGlzLmZpbHRlci5jb25uZWN0KHRoaXMuY29udGV4dC5kZXN0aW5hdGlvbil9LGdldE1hc3RlclZvbHVtZTpmdW5jdGlvbigpe3JldHVybiB0aGlzLmdhaW4uZ2Fpbi52YWx1ZX0sc2V0TWFzdGVyVm9sdW1lOmZ1bmN0aW9uKGEpe3RoaXMuZ2Fpbi5nYWluLnZhbHVlPWF9LHVwZGF0ZU1hdHJpeFdvcmxkOmZ1bmN0aW9uKCl7dmFyIGE9bmV3IFRIUkVFLlZlY3RvcjMsYj1uZXcgVEhSRUUuUXVhdGVybmlvbixjPW5ldyBUSFJFRS5WZWN0b3IzLGQ9bmV3IFRIUkVFLlZlY3RvcjM7cmV0dXJuIGZ1bmN0aW9uKGUpe1RIUkVFLk9iamVjdDNELnByb3RvdHlwZS51cGRhdGVNYXRyaXhXb3JsZC5jYWxsKHRoaXMsZSk7ZT10aGlzLmNvbnRleHQubGlzdGVuZXI7dmFyIGY9dGhpcy51cDt0aGlzLm1hdHJpeFdvcmxkLmRlY29tcG9zZShhLFxuYixjKTtkLnNldCgwLDAsLTEpLmFwcGx5UXVhdGVybmlvbihiKTtlLnNldFBvc2l0aW9uKGEueCxhLnksYS56KTtlLnNldE9yaWVudGF0aW9uKGQueCxkLnksZC56LGYueCxmLnksZi56KX19KCl9KTtUSFJFRS5DYW1lcmE9ZnVuY3Rpb24oKXtUSFJFRS5PYmplY3QzRC5jYWxsKHRoaXMpO3RoaXMudHlwZT1cIkNhbWVyYVwiO3RoaXMubWF0cml4V29ybGRJbnZlcnNlPW5ldyBUSFJFRS5NYXRyaXg0O3RoaXMucHJvamVjdGlvbk1hdHJpeD1uZXcgVEhSRUUuTWF0cml4NH07VEhSRUUuQ2FtZXJhLnByb3RvdHlwZT1PYmplY3QuY3JlYXRlKFRIUkVFLk9iamVjdDNELnByb3RvdHlwZSk7VEhSRUUuQ2FtZXJhLnByb3RvdHlwZS5jb25zdHJ1Y3Rvcj1USFJFRS5DYW1lcmE7XG5USFJFRS5DYW1lcmEucHJvdG90eXBlLmdldFdvcmxkRGlyZWN0aW9uPWZ1bmN0aW9uKCl7dmFyIGE9bmV3IFRIUkVFLlF1YXRlcm5pb247cmV0dXJuIGZ1bmN0aW9uKGIpe2I9Ynx8bmV3IFRIUkVFLlZlY3RvcjM7dGhpcy5nZXRXb3JsZFF1YXRlcm5pb24oYSk7cmV0dXJuIGIuc2V0KDAsMCwtMSkuYXBwbHlRdWF0ZXJuaW9uKGEpfX0oKTtUSFJFRS5DYW1lcmEucHJvdG90eXBlLmxvb2tBdD1mdW5jdGlvbigpe3ZhciBhPW5ldyBUSFJFRS5NYXRyaXg0O3JldHVybiBmdW5jdGlvbihiKXthLmxvb2tBdCh0aGlzLnBvc2l0aW9uLGIsdGhpcy51cCk7dGhpcy5xdWF0ZXJuaW9uLnNldEZyb21Sb3RhdGlvbk1hdHJpeChhKX19KCk7VEhSRUUuQ2FtZXJhLnByb3RvdHlwZS5jbG9uZT1mdW5jdGlvbigpe3JldHVybihuZXcgdGhpcy5jb25zdHJ1Y3RvcikuY29weSh0aGlzKX07XG5USFJFRS5DYW1lcmEucHJvdG90eXBlLmNvcHk9ZnVuY3Rpb24oYSl7VEhSRUUuT2JqZWN0M0QucHJvdG90eXBlLmNvcHkuY2FsbCh0aGlzLGEpO3RoaXMubWF0cml4V29ybGRJbnZlcnNlLmNvcHkoYS5tYXRyaXhXb3JsZEludmVyc2UpO3RoaXMucHJvamVjdGlvbk1hdHJpeC5jb3B5KGEucHJvamVjdGlvbk1hdHJpeCk7cmV0dXJuIHRoaXN9O1xuVEhSRUUuQ3ViZUNhbWVyYT1mdW5jdGlvbihhLGIsYyl7VEhSRUUuT2JqZWN0M0QuY2FsbCh0aGlzKTt0aGlzLnR5cGU9XCJDdWJlQ2FtZXJhXCI7dmFyIGQ9bmV3IFRIUkVFLlBlcnNwZWN0aXZlQ2FtZXJhKDkwLDEsYSxiKTtkLnVwLnNldCgwLC0xLDApO2QubG9va0F0KG5ldyBUSFJFRS5WZWN0b3IzKDEsMCwwKSk7dGhpcy5hZGQoZCk7dmFyIGU9bmV3IFRIUkVFLlBlcnNwZWN0aXZlQ2FtZXJhKDkwLDEsYSxiKTtlLnVwLnNldCgwLC0xLDApO2UubG9va0F0KG5ldyBUSFJFRS5WZWN0b3IzKC0xLDAsMCkpO3RoaXMuYWRkKGUpO3ZhciBmPW5ldyBUSFJFRS5QZXJzcGVjdGl2ZUNhbWVyYSg5MCwxLGEsYik7Zi51cC5zZXQoMCwwLDEpO2YubG9va0F0KG5ldyBUSFJFRS5WZWN0b3IzKDAsMSwwKSk7dGhpcy5hZGQoZik7dmFyIGc9bmV3IFRIUkVFLlBlcnNwZWN0aXZlQ2FtZXJhKDkwLDEsYSxiKTtnLnVwLnNldCgwLDAsLTEpO2cubG9va0F0KG5ldyBUSFJFRS5WZWN0b3IzKDAsLTEsMCkpO1xudGhpcy5hZGQoZyk7dmFyIGg9bmV3IFRIUkVFLlBlcnNwZWN0aXZlQ2FtZXJhKDkwLDEsYSxiKTtoLnVwLnNldCgwLC0xLDApO2gubG9va0F0KG5ldyBUSFJFRS5WZWN0b3IzKDAsMCwxKSk7dGhpcy5hZGQoaCk7dmFyIGs9bmV3IFRIUkVFLlBlcnNwZWN0aXZlQ2FtZXJhKDkwLDEsYSxiKTtrLnVwLnNldCgwLC0xLDApO2subG9va0F0KG5ldyBUSFJFRS5WZWN0b3IzKDAsMCwtMSkpO3RoaXMuYWRkKGspO3RoaXMucmVuZGVyVGFyZ2V0PW5ldyBUSFJFRS5XZWJHTFJlbmRlclRhcmdldEN1YmUoYyxjLHtmb3JtYXQ6VEhSRUUuUkdCRm9ybWF0LG1hZ0ZpbHRlcjpUSFJFRS5MaW5lYXJGaWx0ZXIsbWluRmlsdGVyOlRIUkVFLkxpbmVhckZpbHRlcn0pO3RoaXMudXBkYXRlQ3ViZU1hcD1mdW5jdGlvbihhLGIpe251bGw9PT10aGlzLnBhcmVudCYmdGhpcy51cGRhdGVNYXRyaXhXb3JsZCgpO3ZhciBjPXRoaXMucmVuZGVyVGFyZ2V0LG49Yy50ZXh0dXJlLmdlbmVyYXRlTWlwbWFwcztjLnRleHR1cmUuZ2VuZXJhdGVNaXBtYXBzPVxuITE7Yy5hY3RpdmVDdWJlRmFjZT0wO2EucmVuZGVyKGIsZCxjKTtjLmFjdGl2ZUN1YmVGYWNlPTE7YS5yZW5kZXIoYixlLGMpO2MuYWN0aXZlQ3ViZUZhY2U9MjthLnJlbmRlcihiLGYsYyk7Yy5hY3RpdmVDdWJlRmFjZT0zO2EucmVuZGVyKGIsZyxjKTtjLmFjdGl2ZUN1YmVGYWNlPTQ7YS5yZW5kZXIoYixoLGMpO2MudGV4dHVyZS5nZW5lcmF0ZU1pcG1hcHM9bjtjLmFjdGl2ZUN1YmVGYWNlPTU7YS5yZW5kZXIoYixrLGMpO2Euc2V0UmVuZGVyVGFyZ2V0KG51bGwpfX07VEhSRUUuQ3ViZUNhbWVyYS5wcm90b3R5cGU9T2JqZWN0LmNyZWF0ZShUSFJFRS5PYmplY3QzRC5wcm90b3R5cGUpO1RIUkVFLkN1YmVDYW1lcmEucHJvdG90eXBlLmNvbnN0cnVjdG9yPVRIUkVFLkN1YmVDYW1lcmE7XG5USFJFRS5PcnRob2dyYXBoaWNDYW1lcmE9ZnVuY3Rpb24oYSxiLGMsZCxlLGYpe1RIUkVFLkNhbWVyYS5jYWxsKHRoaXMpO3RoaXMudHlwZT1cIk9ydGhvZ3JhcGhpY0NhbWVyYVwiO3RoaXMuem9vbT0xO3RoaXMudmlldz1udWxsO3RoaXMubGVmdD1hO3RoaXMucmlnaHQ9Yjt0aGlzLnRvcD1jO3RoaXMuYm90dG9tPWQ7dGhpcy5uZWFyPXZvaWQgMCE9PWU/ZTouMTt0aGlzLmZhcj12b2lkIDAhPT1mP2Y6MkUzO3RoaXMudXBkYXRlUHJvamVjdGlvbk1hdHJpeCgpfTtcblRIUkVFLk9ydGhvZ3JhcGhpY0NhbWVyYS5wcm90b3R5cGU9T2JqZWN0LmFzc2lnbihPYmplY3QuY3JlYXRlKFRIUkVFLkNhbWVyYS5wcm90b3R5cGUpLHtjb25zdHJ1Y3RvcjpUSFJFRS5PcnRob2dyYXBoaWNDYW1lcmEsY29weTpmdW5jdGlvbihhKXtUSFJFRS5DYW1lcmEucHJvdG90eXBlLmNvcHkuY2FsbCh0aGlzLGEpO3RoaXMubGVmdD1hLmxlZnQ7dGhpcy5yaWdodD1hLnJpZ2h0O3RoaXMudG9wPWEudG9wO3RoaXMuYm90dG9tPWEuYm90dG9tO3RoaXMubmVhcj1hLm5lYXI7dGhpcy5mYXI9YS5mYXI7dGhpcy56b29tPWEuem9vbTt0aGlzLnZpZXc9bnVsbD09PWEudmlldz9udWxsOk9iamVjdC5hc3NpZ24oe30sYS52aWV3KTtyZXR1cm4gdGhpc30sc2V0Vmlld09mZnNldDpmdW5jdGlvbihhLGIsYyxkLGUsZil7dGhpcy52aWV3PXtmdWxsV2lkdGg6YSxmdWxsSGVpZ2h0OmIsb2Zmc2V0WDpjLG9mZnNldFk6ZCx3aWR0aDplLGhlaWdodDpmfTt0aGlzLnVwZGF0ZVByb2plY3Rpb25NYXRyaXgoKX0sXG5jbGVhclZpZXdPZmZzZXQ6ZnVuY3Rpb24oKXt0aGlzLnZpZXc9bnVsbDt0aGlzLnVwZGF0ZVByb2plY3Rpb25NYXRyaXgoKX0sdXBkYXRlUHJvamVjdGlvbk1hdHJpeDpmdW5jdGlvbigpe3ZhciBhPSh0aGlzLnJpZ2h0LXRoaXMubGVmdCkvKDIqdGhpcy56b29tKSxiPSh0aGlzLnRvcC10aGlzLmJvdHRvbSkvKDIqdGhpcy56b29tKSxjPSh0aGlzLnJpZ2h0K3RoaXMubGVmdCkvMixkPSh0aGlzLnRvcCt0aGlzLmJvdHRvbSkvMixlPWMtYSxjPWMrYSxhPWQrYixiPWQtYjtpZihudWxsIT09dGhpcy52aWV3KXZhciBjPXRoaXMuem9vbS8odGhpcy52aWV3LndpZHRoL3RoaXMudmlldy5mdWxsV2lkdGgpLGI9dGhpcy56b29tLyh0aGlzLnZpZXcuaGVpZ2h0L3RoaXMudmlldy5mdWxsSGVpZ2h0KSxmPSh0aGlzLnJpZ2h0LXRoaXMubGVmdCkvdGhpcy52aWV3LndpZHRoLGQ9KHRoaXMudG9wLXRoaXMuYm90dG9tKS90aGlzLnZpZXcuaGVpZ2h0LGU9ZSt0aGlzLnZpZXcub2Zmc2V0WC9jKmYsXG5jPWUrdGhpcy52aWV3LndpZHRoL2MqZixhPWEtdGhpcy52aWV3Lm9mZnNldFkvYipkLGI9YS10aGlzLnZpZXcuaGVpZ2h0L2IqZDt0aGlzLnByb2plY3Rpb25NYXRyaXgubWFrZU9ydGhvZ3JhcGhpYyhlLGMsYSxiLHRoaXMubmVhcix0aGlzLmZhcil9LHRvSlNPTjpmdW5jdGlvbihhKXthPVRIUkVFLk9iamVjdDNELnByb3RvdHlwZS50b0pTT04uY2FsbCh0aGlzLGEpO2Eub2JqZWN0Lnpvb209dGhpcy56b29tO2Eub2JqZWN0LmxlZnQ9dGhpcy5sZWZ0O2Eub2JqZWN0LnJpZ2h0PXRoaXMucmlnaHQ7YS5vYmplY3QudG9wPXRoaXMudG9wO2Eub2JqZWN0LmJvdHRvbT10aGlzLmJvdHRvbTthLm9iamVjdC5uZWFyPXRoaXMubmVhcjthLm9iamVjdC5mYXI9dGhpcy5mYXI7bnVsbCE9PXRoaXMudmlldyYmKGEub2JqZWN0LnZpZXc9T2JqZWN0LmFzc2lnbih7fSx0aGlzLnZpZXcpKTtyZXR1cm4gYX19KTtcblRIUkVFLlBlcnNwZWN0aXZlQ2FtZXJhPWZ1bmN0aW9uKGEsYixjLGQpe1RIUkVFLkNhbWVyYS5jYWxsKHRoaXMpO3RoaXMudHlwZT1cIlBlcnNwZWN0aXZlQ2FtZXJhXCI7dGhpcy5mb3Y9dm9pZCAwIT09YT9hOjUwO3RoaXMuem9vbT0xO3RoaXMubmVhcj12b2lkIDAhPT1jP2M6LjE7dGhpcy5mYXI9dm9pZCAwIT09ZD9kOjJFMzt0aGlzLmZvY3VzPTEwO3RoaXMuYXNwZWN0PXZvaWQgMCE9PWI/YjoxO3RoaXMudmlldz1udWxsO3RoaXMuZmlsbUdhdWdlPTM1O3RoaXMuZmlsbU9mZnNldD0wO3RoaXMudXBkYXRlUHJvamVjdGlvbk1hdHJpeCgpfTtcblRIUkVFLlBlcnNwZWN0aXZlQ2FtZXJhLnByb3RvdHlwZT1PYmplY3QuYXNzaWduKE9iamVjdC5jcmVhdGUoVEhSRUUuQ2FtZXJhLnByb3RvdHlwZSkse2NvbnN0cnVjdG9yOlRIUkVFLlBlcnNwZWN0aXZlQ2FtZXJhLGNvcHk6ZnVuY3Rpb24oYSl7VEhSRUUuQ2FtZXJhLnByb3RvdHlwZS5jb3B5LmNhbGwodGhpcyxhKTt0aGlzLmZvdj1hLmZvdjt0aGlzLnpvb209YS56b29tO3RoaXMubmVhcj1hLm5lYXI7dGhpcy5mYXI9YS5mYXI7dGhpcy5mb2N1cz1hLmZvY3VzO3RoaXMuYXNwZWN0PWEuYXNwZWN0O3RoaXMudmlldz1udWxsPT09YS52aWV3P251bGw6T2JqZWN0LmFzc2lnbih7fSxhLnZpZXcpO3RoaXMuZmlsbUdhdWdlPWEuZmlsbUdhdWdlO3RoaXMuZmlsbU9mZnNldD1hLmZpbG1PZmZzZXQ7cmV0dXJuIHRoaXN9LHNldEZvY2FsTGVuZ3RoOmZ1bmN0aW9uKGEpe2E9LjUqdGhpcy5nZXRGaWxtSGVpZ2h0KCkvYTt0aGlzLmZvdj0yKlRIUkVFLk1hdGguUkFEMkRFRypNYXRoLmF0YW4oYSk7XG50aGlzLnVwZGF0ZVByb2plY3Rpb25NYXRyaXgoKX0sZ2V0Rm9jYWxMZW5ndGg6ZnVuY3Rpb24oKXt2YXIgYT1NYXRoLnRhbiguNSpUSFJFRS5NYXRoLkRFRzJSQUQqdGhpcy5mb3YpO3JldHVybi41KnRoaXMuZ2V0RmlsbUhlaWdodCgpL2F9LGdldEVmZmVjdGl2ZUZPVjpmdW5jdGlvbigpe3JldHVybiAyKlRIUkVFLk1hdGguUkFEMkRFRypNYXRoLmF0YW4oTWF0aC50YW4oLjUqVEhSRUUuTWF0aC5ERUcyUkFEKnRoaXMuZm92KS90aGlzLnpvb20pfSxnZXRGaWxtV2lkdGg6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5maWxtR2F1Z2UqTWF0aC5taW4odGhpcy5hc3BlY3QsMSl9LGdldEZpbG1IZWlnaHQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5maWxtR2F1Z2UvTWF0aC5tYXgodGhpcy5hc3BlY3QsMSl9LHNldFZpZXdPZmZzZXQ6ZnVuY3Rpb24oYSxiLGMsZCxlLGYpe3RoaXMuYXNwZWN0PWEvYjt0aGlzLnZpZXc9e2Z1bGxXaWR0aDphLGZ1bGxIZWlnaHQ6YixvZmZzZXRYOmMsb2Zmc2V0WTpkLFxud2lkdGg6ZSxoZWlnaHQ6Zn07dGhpcy51cGRhdGVQcm9qZWN0aW9uTWF0cml4KCl9LGNsZWFyVmlld09mZnNldDpmdW5jdGlvbigpe3RoaXMudmlldz1udWxsO3RoaXMudXBkYXRlUHJvamVjdGlvbk1hdHJpeCgpfSx1cGRhdGVQcm9qZWN0aW9uTWF0cml4OmZ1bmN0aW9uKCl7dmFyIGE9dGhpcy5uZWFyLGI9YSpNYXRoLnRhbiguNSpUSFJFRS5NYXRoLkRFRzJSQUQqdGhpcy5mb3YpL3RoaXMuem9vbSxjPTIqYixkPXRoaXMuYXNwZWN0KmMsZT0tLjUqZCxmPXRoaXMudmlldztpZihudWxsIT09Zil2YXIgZz1mLmZ1bGxXaWR0aCxoPWYuZnVsbEhlaWdodCxlPWUrZi5vZmZzZXRYKmQvZyxiPWItZi5vZmZzZXRZKmMvaCxkPWYud2lkdGgvZypkLGM9Zi5oZWlnaHQvaCpjO2Y9dGhpcy5maWxtT2Zmc2V0OzAhPT1mJiYoZSs9YSpmL3RoaXMuZ2V0RmlsbVdpZHRoKCkpO3RoaXMucHJvamVjdGlvbk1hdHJpeC5tYWtlRnJ1c3R1bShlLGUrZCxiLWMsYixhLHRoaXMuZmFyKX0sdG9KU09OOmZ1bmN0aW9uKGEpe2E9XG5USFJFRS5PYmplY3QzRC5wcm90b3R5cGUudG9KU09OLmNhbGwodGhpcyxhKTthLm9iamVjdC5mb3Y9dGhpcy5mb3Y7YS5vYmplY3Quem9vbT10aGlzLnpvb207YS5vYmplY3QubmVhcj10aGlzLm5lYXI7YS5vYmplY3QuZmFyPXRoaXMuZmFyO2Eub2JqZWN0LmZvY3VzPXRoaXMuZm9jdXM7YS5vYmplY3QuYXNwZWN0PXRoaXMuYXNwZWN0O251bGwhPT10aGlzLnZpZXcmJihhLm9iamVjdC52aWV3PU9iamVjdC5hc3NpZ24oe30sdGhpcy52aWV3KSk7YS5vYmplY3QuZmlsbUdhdWdlPXRoaXMuZmlsbUdhdWdlO2Eub2JqZWN0LmZpbG1PZmZzZXQ9dGhpcy5maWxtT2Zmc2V0O3JldHVybiBhfX0pO1xuVEhSRUUuU3RlcmVvQ2FtZXJhPWZ1bmN0aW9uKCl7dGhpcy50eXBlPVwiU3RlcmVvQ2FtZXJhXCI7dGhpcy5hc3BlY3Q9MTt0aGlzLmNhbWVyYUw9bmV3IFRIUkVFLlBlcnNwZWN0aXZlQ2FtZXJhO3RoaXMuY2FtZXJhTC5sYXllcnMuZW5hYmxlKDEpO3RoaXMuY2FtZXJhTC5tYXRyaXhBdXRvVXBkYXRlPSExO3RoaXMuY2FtZXJhUj1uZXcgVEhSRUUuUGVyc3BlY3RpdmVDYW1lcmE7dGhpcy5jYW1lcmFSLmxheWVycy5lbmFibGUoMik7dGhpcy5jYW1lcmFSLm1hdHJpeEF1dG9VcGRhdGU9ITF9O1xuT2JqZWN0LmFzc2lnbihUSFJFRS5TdGVyZW9DYW1lcmEucHJvdG90eXBlLHt1cGRhdGU6ZnVuY3Rpb24oKXt2YXIgYSxiLGMsZCxlLGY9bmV3IFRIUkVFLk1hdHJpeDQsZz1uZXcgVEhSRUUuTWF0cml4NDtyZXR1cm4gZnVuY3Rpb24oaCl7aWYoYSE9PWguZm9jdXN8fGIhPT1oLmZvdnx8YyE9PWguYXNwZWN0KnRoaXMuYXNwZWN0fHxkIT09aC5uZWFyfHxlIT09aC5mYXIpe2E9aC5mb2N1cztiPWguZm92O2M9aC5hc3BlY3QqdGhpcy5hc3BlY3Q7ZD1oLm5lYXI7ZT1oLmZhcjt2YXIgaz1oLnByb2plY3Rpb25NYXRyaXguY2xvbmUoKSxsPS4wMzIqZC9hLG09ZCpNYXRoLnRhbihUSFJFRS5NYXRoLkRFRzJSQUQqYiouNSkscCxuO2cuZWxlbWVudHNbMTJdPS0uMDMyO2YuZWxlbWVudHNbMTJdPS4wMzI7cD0tbSpjK2w7bj1tKmMrbDtrLmVsZW1lbnRzWzBdPTIqZC8obi1wKTtrLmVsZW1lbnRzWzhdPShuK3ApLyhuLXApO3RoaXMuY2FtZXJhTC5wcm9qZWN0aW9uTWF0cml4LmNvcHkoayk7XG5wPS1tKmMtbDtuPW0qYy1sO2suZWxlbWVudHNbMF09MipkLyhuLXApO2suZWxlbWVudHNbOF09KG4rcCkvKG4tcCk7dGhpcy5jYW1lcmFSLnByb2plY3Rpb25NYXRyaXguY29weShrKX10aGlzLmNhbWVyYUwubWF0cml4V29ybGQuY29weShoLm1hdHJpeFdvcmxkKS5tdWx0aXBseShnKTt0aGlzLmNhbWVyYVIubWF0cml4V29ybGQuY29weShoLm1hdHJpeFdvcmxkKS5tdWx0aXBseShmKX19KCl9KTtUSFJFRS5MaWdodD1mdW5jdGlvbihhLGIpe1RIUkVFLk9iamVjdDNELmNhbGwodGhpcyk7dGhpcy50eXBlPVwiTGlnaHRcIjt0aGlzLmNvbG9yPW5ldyBUSFJFRS5Db2xvcihhKTt0aGlzLmludGVuc2l0eT12b2lkIDAhPT1iP2I6MTt0aGlzLnJlY2VpdmVTaGFkb3c9dm9pZCAwfTtcblRIUkVFLkxpZ2h0LnByb3RvdHlwZT1PYmplY3QuYXNzaWduKE9iamVjdC5jcmVhdGUoVEhSRUUuT2JqZWN0M0QucHJvdG90eXBlKSx7Y29uc3RydWN0b3I6VEhSRUUuTGlnaHQsY29weTpmdW5jdGlvbihhKXtUSFJFRS5PYmplY3QzRC5wcm90b3R5cGUuY29weS5jYWxsKHRoaXMsYSk7dGhpcy5jb2xvci5jb3B5KGEuY29sb3IpO3RoaXMuaW50ZW5zaXR5PWEuaW50ZW5zaXR5O3JldHVybiB0aGlzfSx0b0pTT046ZnVuY3Rpb24oYSl7YT1USFJFRS5PYmplY3QzRC5wcm90b3R5cGUudG9KU09OLmNhbGwodGhpcyxhKTthLm9iamVjdC5jb2xvcj10aGlzLmNvbG9yLmdldEhleCgpO2Eub2JqZWN0LmludGVuc2l0eT10aGlzLmludGVuc2l0eTt2b2lkIDAhPT10aGlzLmdyb3VuZENvbG9yJiYoYS5vYmplY3QuZ3JvdW5kQ29sb3I9dGhpcy5ncm91bmRDb2xvci5nZXRIZXgoKSk7dm9pZCAwIT09dGhpcy5kaXN0YW5jZSYmKGEub2JqZWN0LmRpc3RhbmNlPXRoaXMuZGlzdGFuY2UpO3ZvaWQgMCE9PVxudGhpcy5hbmdsZSYmKGEub2JqZWN0LmFuZ2xlPXRoaXMuYW5nbGUpO3ZvaWQgMCE9PXRoaXMuZGVjYXkmJihhLm9iamVjdC5kZWNheT10aGlzLmRlY2F5KTt2b2lkIDAhPT10aGlzLnBlbnVtYnJhJiYoYS5vYmplY3QucGVudW1icmE9dGhpcy5wZW51bWJyYSk7cmV0dXJuIGF9fSk7VEhSRUUuTGlnaHRTaGFkb3c9ZnVuY3Rpb24oYSl7dGhpcy5jYW1lcmE9YTt0aGlzLmJpYXM9MDt0aGlzLnJhZGl1cz0xO3RoaXMubWFwU2l6ZT1uZXcgVEhSRUUuVmVjdG9yMig1MTIsNTEyKTt0aGlzLm1hcD1udWxsO3RoaXMubWF0cml4PW5ldyBUSFJFRS5NYXRyaXg0fTtPYmplY3QuYXNzaWduKFRIUkVFLkxpZ2h0U2hhZG93LnByb3RvdHlwZSx7Y29weTpmdW5jdGlvbihhKXt0aGlzLmNhbWVyYT1hLmNhbWVyYS5jbG9uZSgpO3RoaXMuYmlhcz1hLmJpYXM7dGhpcy5yYWRpdXM9YS5yYWRpdXM7dGhpcy5tYXBTaXplLmNvcHkoYS5tYXBTaXplKTtyZXR1cm4gdGhpc30sY2xvbmU6ZnVuY3Rpb24oKXtyZXR1cm4obmV3IHRoaXMuY29uc3RydWN0b3IpLmNvcHkodGhpcyl9fSk7XG5USFJFRS5BbWJpZW50TGlnaHQ9ZnVuY3Rpb24oYSxiKXtUSFJFRS5MaWdodC5jYWxsKHRoaXMsYSxiKTt0aGlzLnR5cGU9XCJBbWJpZW50TGlnaHRcIjt0aGlzLmNhc3RTaGFkb3c9dm9pZCAwfTtUSFJFRS5BbWJpZW50TGlnaHQucHJvdG90eXBlPU9iamVjdC5hc3NpZ24oT2JqZWN0LmNyZWF0ZShUSFJFRS5MaWdodC5wcm90b3R5cGUpLHtjb25zdHJ1Y3RvcjpUSFJFRS5BbWJpZW50TGlnaHR9KTtUSFJFRS5EaXJlY3Rpb25hbExpZ2h0PWZ1bmN0aW9uKGEsYil7VEhSRUUuTGlnaHQuY2FsbCh0aGlzLGEsYik7dGhpcy50eXBlPVwiRGlyZWN0aW9uYWxMaWdodFwiO3RoaXMucG9zaXRpb24uY29weShUSFJFRS5PYmplY3QzRC5EZWZhdWx0VXApO3RoaXMudXBkYXRlTWF0cml4KCk7dGhpcy50YXJnZXQ9bmV3IFRIUkVFLk9iamVjdDNEO3RoaXMuc2hhZG93PW5ldyBUSFJFRS5EaXJlY3Rpb25hbExpZ2h0U2hhZG93fTtcblRIUkVFLkRpcmVjdGlvbmFsTGlnaHQucHJvdG90eXBlPU9iamVjdC5hc3NpZ24oT2JqZWN0LmNyZWF0ZShUSFJFRS5MaWdodC5wcm90b3R5cGUpLHtjb25zdHJ1Y3RvcjpUSFJFRS5EaXJlY3Rpb25hbExpZ2h0LGNvcHk6ZnVuY3Rpb24oYSl7VEhSRUUuTGlnaHQucHJvdG90eXBlLmNvcHkuY2FsbCh0aGlzLGEpO3RoaXMudGFyZ2V0PWEudGFyZ2V0LmNsb25lKCk7dGhpcy5zaGFkb3c9YS5zaGFkb3cuY2xvbmUoKTtyZXR1cm4gdGhpc319KTtUSFJFRS5EaXJlY3Rpb25hbExpZ2h0U2hhZG93PWZ1bmN0aW9uKGEpe1RIUkVFLkxpZ2h0U2hhZG93LmNhbGwodGhpcyxuZXcgVEhSRUUuT3J0aG9ncmFwaGljQ2FtZXJhKC01LDUsNSwtNSwuNSw1MDApKX07VEhSRUUuRGlyZWN0aW9uYWxMaWdodFNoYWRvdy5wcm90b3R5cGU9T2JqZWN0LmFzc2lnbihPYmplY3QuY3JlYXRlKFRIUkVFLkxpZ2h0U2hhZG93LnByb3RvdHlwZSkse2NvbnN0cnVjdG9yOlRIUkVFLkRpcmVjdGlvbmFsTGlnaHRTaGFkb3d9KTtcblRIUkVFLkhlbWlzcGhlcmVMaWdodD1mdW5jdGlvbihhLGIsYyl7VEhSRUUuTGlnaHQuY2FsbCh0aGlzLGEsYyk7dGhpcy50eXBlPVwiSGVtaXNwaGVyZUxpZ2h0XCI7dGhpcy5jYXN0U2hhZG93PXZvaWQgMDt0aGlzLnBvc2l0aW9uLmNvcHkoVEhSRUUuT2JqZWN0M0QuRGVmYXVsdFVwKTt0aGlzLnVwZGF0ZU1hdHJpeCgpO3RoaXMuZ3JvdW5kQ29sb3I9bmV3IFRIUkVFLkNvbG9yKGIpfTtUSFJFRS5IZW1pc3BoZXJlTGlnaHQucHJvdG90eXBlPU9iamVjdC5hc3NpZ24oT2JqZWN0LmNyZWF0ZShUSFJFRS5MaWdodC5wcm90b3R5cGUpLHtjb25zdHJ1Y3RvcjpUSFJFRS5IZW1pc3BoZXJlTGlnaHQsY29weTpmdW5jdGlvbihhKXtUSFJFRS5MaWdodC5wcm90b3R5cGUuY29weS5jYWxsKHRoaXMsYSk7dGhpcy5ncm91bmRDb2xvci5jb3B5KGEuZ3JvdW5kQ29sb3IpO3JldHVybiB0aGlzfX0pO1xuVEhSRUUuUG9pbnRMaWdodD1mdW5jdGlvbihhLGIsYyxkKXtUSFJFRS5MaWdodC5jYWxsKHRoaXMsYSxiKTt0aGlzLnR5cGU9XCJQb2ludExpZ2h0XCI7T2JqZWN0LmRlZmluZVByb3BlcnR5KHRoaXMsXCJwb3dlclwiLHtnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gNCp0aGlzLmludGVuc2l0eSpNYXRoLlBJfSxzZXQ6ZnVuY3Rpb24oYSl7dGhpcy5pbnRlbnNpdHk9YS8oNCpNYXRoLlBJKX19KTt0aGlzLmRpc3RhbmNlPXZvaWQgMCE9PWM/YzowO3RoaXMuZGVjYXk9dm9pZCAwIT09ZD9kOjE7dGhpcy5zaGFkb3c9bmV3IFRIUkVFLkxpZ2h0U2hhZG93KG5ldyBUSFJFRS5QZXJzcGVjdGl2ZUNhbWVyYSg5MCwxLC41LDUwMCkpfTtcblRIUkVFLlBvaW50TGlnaHQucHJvdG90eXBlPU9iamVjdC5hc3NpZ24oT2JqZWN0LmNyZWF0ZShUSFJFRS5MaWdodC5wcm90b3R5cGUpLHtjb25zdHJ1Y3RvcjpUSFJFRS5Qb2ludExpZ2h0LGNvcHk6ZnVuY3Rpb24oYSl7VEhSRUUuTGlnaHQucHJvdG90eXBlLmNvcHkuY2FsbCh0aGlzLGEpO3RoaXMuZGlzdGFuY2U9YS5kaXN0YW5jZTt0aGlzLmRlY2F5PWEuZGVjYXk7dGhpcy5zaGFkb3c9YS5zaGFkb3cuY2xvbmUoKTtyZXR1cm4gdGhpc319KTtcblRIUkVFLlNwb3RMaWdodD1mdW5jdGlvbihhLGIsYyxkLGUsZil7VEhSRUUuTGlnaHQuY2FsbCh0aGlzLGEsYik7dGhpcy50eXBlPVwiU3BvdExpZ2h0XCI7dGhpcy5wb3NpdGlvbi5jb3B5KFRIUkVFLk9iamVjdDNELkRlZmF1bHRVcCk7dGhpcy51cGRhdGVNYXRyaXgoKTt0aGlzLnRhcmdldD1uZXcgVEhSRUUuT2JqZWN0M0Q7T2JqZWN0LmRlZmluZVByb3BlcnR5KHRoaXMsXCJwb3dlclwiLHtnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5pbnRlbnNpdHkqTWF0aC5QSX0sc2V0OmZ1bmN0aW9uKGEpe3RoaXMuaW50ZW5zaXR5PWEvTWF0aC5QSX19KTt0aGlzLmRpc3RhbmNlPXZvaWQgMCE9PWM/YzowO3RoaXMuYW5nbGU9dm9pZCAwIT09ZD9kOk1hdGguUEkvMzt0aGlzLnBlbnVtYnJhPXZvaWQgMCE9PWU/ZTowO3RoaXMuZGVjYXk9dm9pZCAwIT09Zj9mOjE7dGhpcy5zaGFkb3c9bmV3IFRIUkVFLlNwb3RMaWdodFNoYWRvd307XG5USFJFRS5TcG90TGlnaHQucHJvdG90eXBlPU9iamVjdC5hc3NpZ24oT2JqZWN0LmNyZWF0ZShUSFJFRS5MaWdodC5wcm90b3R5cGUpLHtjb25zdHJ1Y3RvcjpUSFJFRS5TcG90TGlnaHQsY29weTpmdW5jdGlvbihhKXtUSFJFRS5MaWdodC5wcm90b3R5cGUuY29weS5jYWxsKHRoaXMsYSk7dGhpcy5kaXN0YW5jZT1hLmRpc3RhbmNlO3RoaXMuYW5nbGU9YS5hbmdsZTt0aGlzLnBlbnVtYnJhPWEucGVudW1icmE7dGhpcy5kZWNheT1hLmRlY2F5O3RoaXMudGFyZ2V0PWEudGFyZ2V0LmNsb25lKCk7dGhpcy5zaGFkb3c9YS5zaGFkb3cuY2xvbmUoKTtyZXR1cm4gdGhpc319KTtUSFJFRS5TcG90TGlnaHRTaGFkb3c9ZnVuY3Rpb24oKXtUSFJFRS5MaWdodFNoYWRvdy5jYWxsKHRoaXMsbmV3IFRIUkVFLlBlcnNwZWN0aXZlQ2FtZXJhKDUwLDEsLjUsNTAwKSl9O1xuVEhSRUUuU3BvdExpZ2h0U2hhZG93LnByb3RvdHlwZT1PYmplY3QuYXNzaWduKE9iamVjdC5jcmVhdGUoVEhSRUUuTGlnaHRTaGFkb3cucHJvdG90eXBlKSx7Y29uc3RydWN0b3I6VEhSRUUuU3BvdExpZ2h0U2hhZG93LHVwZGF0ZTpmdW5jdGlvbihhKXt2YXIgYj0yKlRIUkVFLk1hdGguUkFEMkRFRyphLmFuZ2xlLGM9dGhpcy5tYXBTaXplLndpZHRoL3RoaXMubWFwU2l6ZS5oZWlnaHQ7YT1hLmRpc3RhbmNlfHw1MDA7dmFyIGQ9dGhpcy5jYW1lcmE7aWYoYiE9PWQuZm92fHxjIT09ZC5hc3BlY3R8fGEhPT1kLmZhcilkLmZvdj1iLGQuYXNwZWN0PWMsZC5mYXI9YSxkLnVwZGF0ZVByb2plY3Rpb25NYXRyaXgoKX19KTtUSFJFRS5BdWRpb0xvYWRlcj1mdW5jdGlvbihhKXt0aGlzLm1hbmFnZXI9dm9pZCAwIT09YT9hOlRIUkVFLkRlZmF1bHRMb2FkaW5nTWFuYWdlcn07XG5PYmplY3QuYXNzaWduKFRIUkVFLkF1ZGlvTG9hZGVyLnByb3RvdHlwZSx7bG9hZDpmdW5jdGlvbihhLGIsYyxkKXt2YXIgZT1uZXcgVEhSRUUuWEhSTG9hZGVyKHRoaXMubWFuYWdlcik7ZS5zZXRSZXNwb25zZVR5cGUoXCJhcnJheWJ1ZmZlclwiKTtlLmxvYWQoYSxmdW5jdGlvbihhKXtUSFJFRS5BdWRpb0NvbnRleHQuZGVjb2RlQXVkaW9EYXRhKGEsZnVuY3Rpb24oYSl7YihhKX0pfSxjLGQpfX0pO1RIUkVFLkNhY2hlPXtlbmFibGVkOiExLGZpbGVzOnt9LGFkZDpmdW5jdGlvbihhLGIpeyExIT09dGhpcy5lbmFibGVkJiYodGhpcy5maWxlc1thXT1iKX0sZ2V0OmZ1bmN0aW9uKGEpe2lmKCExIT09dGhpcy5lbmFibGVkKXJldHVybiB0aGlzLmZpbGVzW2FdfSxyZW1vdmU6ZnVuY3Rpb24oYSl7ZGVsZXRlIHRoaXMuZmlsZXNbYV19LGNsZWFyOmZ1bmN0aW9uKCl7dGhpcy5maWxlcz17fX19O1xuVEhSRUUuTG9hZGVyPWZ1bmN0aW9uKCl7dGhpcy5vbkxvYWRTdGFydD1mdW5jdGlvbigpe307dGhpcy5vbkxvYWRQcm9ncmVzcz1mdW5jdGlvbigpe307dGhpcy5vbkxvYWRDb21wbGV0ZT1mdW5jdGlvbigpe319O1xuVEhSRUUuTG9hZGVyLnByb3RvdHlwZT17Y29uc3RydWN0b3I6VEhSRUUuTG9hZGVyLGNyb3NzT3JpZ2luOnZvaWQgMCxleHRyYWN0VXJsQmFzZTpmdW5jdGlvbihhKXthPWEuc3BsaXQoXCIvXCIpO2lmKDE9PT1hLmxlbmd0aClyZXR1cm5cIi4vXCI7YS5wb3AoKTtyZXR1cm4gYS5qb2luKFwiL1wiKStcIi9cIn0saW5pdE1hdGVyaWFsczpmdW5jdGlvbihhLGIsYyl7Zm9yKHZhciBkPVtdLGU9MDtlPGEubGVuZ3RoOysrZSlkW2VdPXRoaXMuY3JlYXRlTWF0ZXJpYWwoYVtlXSxiLGMpO3JldHVybiBkfSxjcmVhdGVNYXRlcmlhbDpmdW5jdGlvbigpe3ZhciBhLGIsYztyZXR1cm4gZnVuY3Rpb24oZCxlLGYpe2Z1bmN0aW9uIGcoYSxjLGQsZyxrKXthPWUrYTt2YXIgbD1USFJFRS5Mb2FkZXIuSGFuZGxlcnMuZ2V0KGEpO251bGwhPT1sP2E9bC5sb2FkKGEpOihiLnNldENyb3NzT3JpZ2luKGYpLGE9Yi5sb2FkKGEpKTt2b2lkIDAhPT1jJiYoYS5yZXBlYXQuZnJvbUFycmF5KGMpLDEhPT1jWzBdJiYoYS53cmFwUz1cblRIUkVFLlJlcGVhdFdyYXBwaW5nKSwxIT09Y1sxXSYmKGEud3JhcFQ9VEhSRUUuUmVwZWF0V3JhcHBpbmcpKTt2b2lkIDAhPT1kJiZhLm9mZnNldC5mcm9tQXJyYXkoZCk7dm9pZCAwIT09ZyYmKFwicmVwZWF0XCI9PT1nWzBdJiYoYS53cmFwUz1USFJFRS5SZXBlYXRXcmFwcGluZyksXCJtaXJyb3JcIj09PWdbMF0mJihhLndyYXBTPVRIUkVFLk1pcnJvcmVkUmVwZWF0V3JhcHBpbmcpLFwicmVwZWF0XCI9PT1nWzFdJiYoYS53cmFwVD1USFJFRS5SZXBlYXRXcmFwcGluZyksXCJtaXJyb3JcIj09PWdbMV0mJihhLndyYXBUPVRIUkVFLk1pcnJvcmVkUmVwZWF0V3JhcHBpbmcpKTt2b2lkIDAhPT1rJiYoYS5hbmlzb3Ryb3B5PWspO2M9VEhSRUUuTWF0aC5nZW5lcmF0ZVVVSUQoKTtoW2NdPWE7cmV0dXJuIGN9dm9pZCAwPT09YSYmKGE9bmV3IFRIUkVFLkNvbG9yKTt2b2lkIDA9PT1iJiYoYj1uZXcgVEhSRUUuVGV4dHVyZUxvYWRlcik7dm9pZCAwPT09YyYmKGM9bmV3IFRIUkVFLk1hdGVyaWFsTG9hZGVyKTtcbnZhciBoPXt9LGs9e3V1aWQ6VEhSRUUuTWF0aC5nZW5lcmF0ZVVVSUQoKSx0eXBlOlwiTWVzaExhbWJlcnRNYXRlcmlhbFwifSxsO2ZvcihsIGluIGQpe3ZhciBtPWRbbF07c3dpdGNoKGwpe2Nhc2UgXCJEYmdDb2xvclwiOmNhc2UgXCJEYmdJbmRleFwiOmNhc2UgXCJvcHRpY2FsRGVuc2l0eVwiOmNhc2UgXCJpbGx1bWluYXRpb25cIjpicmVhaztjYXNlIFwiRGJnTmFtZVwiOmsubmFtZT1tO2JyZWFrO2Nhc2UgXCJibGVuZGluZ1wiOmsuYmxlbmRpbmc9VEhSRUVbbV07YnJlYWs7Y2FzZSBcImNvbG9yQW1iaWVudFwiOmNhc2UgXCJtYXBBbWJpZW50XCI6Y29uc29sZS53YXJuKFwiVEhSRUUuTG9hZGVyLmNyZWF0ZU1hdGVyaWFsOlwiLGwsXCJpcyBubyBsb25nZXIgc3VwcG9ydGVkLlwiKTticmVhaztjYXNlIFwiY29sb3JEaWZmdXNlXCI6ay5jb2xvcj1hLmZyb21BcnJheShtKS5nZXRIZXgoKTticmVhaztjYXNlIFwiY29sb3JTcGVjdWxhclwiOmsuc3BlY3VsYXI9YS5mcm9tQXJyYXkobSkuZ2V0SGV4KCk7YnJlYWs7Y2FzZSBcImNvbG9yRW1pc3NpdmVcIjprLmVtaXNzaXZlPVxuYS5mcm9tQXJyYXkobSkuZ2V0SGV4KCk7YnJlYWs7Y2FzZSBcInNwZWN1bGFyQ29lZlwiOmsuc2hpbmluZXNzPW07YnJlYWs7Y2FzZSBcInNoYWRpbmdcIjpcImJhc2ljXCI9PT1tLnRvTG93ZXJDYXNlKCkmJihrLnR5cGU9XCJNZXNoQmFzaWNNYXRlcmlhbFwiKTtcInBob25nXCI9PT1tLnRvTG93ZXJDYXNlKCkmJihrLnR5cGU9XCJNZXNoUGhvbmdNYXRlcmlhbFwiKTtcInN0YW5kYXJkXCI9PT1tLnRvTG93ZXJDYXNlKCkmJihrLnR5cGU9XCJNZXNoU3RhbmRhcmRNYXRlcmlhbFwiKTticmVhaztjYXNlIFwibWFwRGlmZnVzZVwiOmsubWFwPWcobSxkLm1hcERpZmZ1c2VSZXBlYXQsZC5tYXBEaWZmdXNlT2Zmc2V0LGQubWFwRGlmZnVzZVdyYXAsZC5tYXBEaWZmdXNlQW5pc290cm9weSk7YnJlYWs7Y2FzZSBcIm1hcERpZmZ1c2VSZXBlYXRcIjpjYXNlIFwibWFwRGlmZnVzZU9mZnNldFwiOmNhc2UgXCJtYXBEaWZmdXNlV3JhcFwiOmNhc2UgXCJtYXBEaWZmdXNlQW5pc290cm9weVwiOmJyZWFrO2Nhc2UgXCJtYXBFbWlzc2l2ZVwiOmsuZW1pc3NpdmVNYXA9XG5nKG0sZC5tYXBFbWlzc2l2ZVJlcGVhdCxkLm1hcEVtaXNzaXZlT2Zmc2V0LGQubWFwRW1pc3NpdmVXcmFwLGQubWFwRW1pc3NpdmVBbmlzb3Ryb3B5KTticmVhaztjYXNlIFwibWFwRW1pc3NpdmVSZXBlYXRcIjpjYXNlIFwibWFwRW1pc3NpdmVPZmZzZXRcIjpjYXNlIFwibWFwRW1pc3NpdmVXcmFwXCI6Y2FzZSBcIm1hcEVtaXNzaXZlQW5pc290cm9weVwiOmJyZWFrO2Nhc2UgXCJtYXBMaWdodFwiOmsubGlnaHRNYXA9ZyhtLGQubWFwTGlnaHRSZXBlYXQsZC5tYXBMaWdodE9mZnNldCxkLm1hcExpZ2h0V3JhcCxkLm1hcExpZ2h0QW5pc290cm9weSk7YnJlYWs7Y2FzZSBcIm1hcExpZ2h0UmVwZWF0XCI6Y2FzZSBcIm1hcExpZ2h0T2Zmc2V0XCI6Y2FzZSBcIm1hcExpZ2h0V3JhcFwiOmNhc2UgXCJtYXBMaWdodEFuaXNvdHJvcHlcIjpicmVhaztjYXNlIFwibWFwQU9cIjprLmFvTWFwPWcobSxkLm1hcEFPUmVwZWF0LGQubWFwQU9PZmZzZXQsZC5tYXBBT1dyYXAsZC5tYXBBT0FuaXNvdHJvcHkpO2JyZWFrO2Nhc2UgXCJtYXBBT1JlcGVhdFwiOmNhc2UgXCJtYXBBT09mZnNldFwiOmNhc2UgXCJtYXBBT1dyYXBcIjpjYXNlIFwibWFwQU9Bbmlzb3Ryb3B5XCI6YnJlYWs7XG5jYXNlIFwibWFwQnVtcFwiOmsuYnVtcE1hcD1nKG0sZC5tYXBCdW1wUmVwZWF0LGQubWFwQnVtcE9mZnNldCxkLm1hcEJ1bXBXcmFwLGQubWFwQnVtcEFuaXNvdHJvcHkpO2JyZWFrO2Nhc2UgXCJtYXBCdW1wU2NhbGVcIjprLmJ1bXBTY2FsZT1tO2JyZWFrO2Nhc2UgXCJtYXBCdW1wUmVwZWF0XCI6Y2FzZSBcIm1hcEJ1bXBPZmZzZXRcIjpjYXNlIFwibWFwQnVtcFdyYXBcIjpjYXNlIFwibWFwQnVtcEFuaXNvdHJvcHlcIjpicmVhaztjYXNlIFwibWFwTm9ybWFsXCI6ay5ub3JtYWxNYXA9ZyhtLGQubWFwTm9ybWFsUmVwZWF0LGQubWFwTm9ybWFsT2Zmc2V0LGQubWFwTm9ybWFsV3JhcCxkLm1hcE5vcm1hbEFuaXNvdHJvcHkpO2JyZWFrO2Nhc2UgXCJtYXBOb3JtYWxGYWN0b3JcIjprLm5vcm1hbFNjYWxlPVttLG1dO2JyZWFrO2Nhc2UgXCJtYXBOb3JtYWxSZXBlYXRcIjpjYXNlIFwibWFwTm9ybWFsT2Zmc2V0XCI6Y2FzZSBcIm1hcE5vcm1hbFdyYXBcIjpjYXNlIFwibWFwTm9ybWFsQW5pc290cm9weVwiOmJyZWFrO2Nhc2UgXCJtYXBTcGVjdWxhclwiOmsuc3BlY3VsYXJNYXA9XG5nKG0sZC5tYXBTcGVjdWxhclJlcGVhdCxkLm1hcFNwZWN1bGFyT2Zmc2V0LGQubWFwU3BlY3VsYXJXcmFwLGQubWFwU3BlY3VsYXJBbmlzb3Ryb3B5KTticmVhaztjYXNlIFwibWFwU3BlY3VsYXJSZXBlYXRcIjpjYXNlIFwibWFwU3BlY3VsYXJPZmZzZXRcIjpjYXNlIFwibWFwU3BlY3VsYXJXcmFwXCI6Y2FzZSBcIm1hcFNwZWN1bGFyQW5pc290cm9weVwiOmJyZWFrO2Nhc2UgXCJtYXBNZXRhbG5lc3NcIjprLm1ldGFsbmVzc01hcD1nKG0sZC5tYXBNZXRhbG5lc3NSZXBlYXQsZC5tYXBNZXRhbG5lc3NPZmZzZXQsZC5tYXBNZXRhbG5lc3NXcmFwLGQubWFwTWV0YWxuZXNzQW5pc290cm9weSk7YnJlYWs7Y2FzZSBcIm1hcE1ldGFsbmVzc1JlcGVhdFwiOmNhc2UgXCJtYXBNZXRhbG5lc3NPZmZzZXRcIjpjYXNlIFwibWFwTWV0YWxuZXNzV3JhcFwiOmNhc2UgXCJtYXBNZXRhbG5lc3NBbmlzb3Ryb3B5XCI6YnJlYWs7Y2FzZSBcIm1hcFJvdWdobmVzc1wiOmsucm91Z2huZXNzTWFwPWcobSxkLm1hcFJvdWdobmVzc1JlcGVhdCxcbmQubWFwUm91Z2huZXNzT2Zmc2V0LGQubWFwUm91Z2huZXNzV3JhcCxkLm1hcFJvdWdobmVzc0FuaXNvdHJvcHkpO2JyZWFrO2Nhc2UgXCJtYXBSb3VnaG5lc3NSZXBlYXRcIjpjYXNlIFwibWFwUm91Z2huZXNzT2Zmc2V0XCI6Y2FzZSBcIm1hcFJvdWdobmVzc1dyYXBcIjpjYXNlIFwibWFwUm91Z2huZXNzQW5pc290cm9weVwiOmJyZWFrO2Nhc2UgXCJtYXBBbHBoYVwiOmsuYWxwaGFNYXA9ZyhtLGQubWFwQWxwaGFSZXBlYXQsZC5tYXBBbHBoYU9mZnNldCxkLm1hcEFscGhhV3JhcCxkLm1hcEFscGhhQW5pc290cm9weSk7YnJlYWs7Y2FzZSBcIm1hcEFscGhhUmVwZWF0XCI6Y2FzZSBcIm1hcEFscGhhT2Zmc2V0XCI6Y2FzZSBcIm1hcEFscGhhV3JhcFwiOmNhc2UgXCJtYXBBbHBoYUFuaXNvdHJvcHlcIjpicmVhaztjYXNlIFwiZmxpcFNpZGVkXCI6ay5zaWRlPVRIUkVFLkJhY2tTaWRlO2JyZWFrO2Nhc2UgXCJkb3VibGVTaWRlZFwiOmsuc2lkZT1USFJFRS5Eb3VibGVTaWRlO2JyZWFrO2Nhc2UgXCJ0cmFuc3BhcmVuY3lcIjpjb25zb2xlLndhcm4oXCJUSFJFRS5Mb2FkZXIuY3JlYXRlTWF0ZXJpYWw6IHRyYW5zcGFyZW5jeSBoYXMgYmVlbiByZW5hbWVkIHRvIG9wYWNpdHlcIik7XG5rLm9wYWNpdHk9bTticmVhaztjYXNlIFwiZGVwdGhUZXN0XCI6Y2FzZSBcImRlcHRoV3JpdGVcIjpjYXNlIFwiY29sb3JXcml0ZVwiOmNhc2UgXCJvcGFjaXR5XCI6Y2FzZSBcInJlZmxlY3Rpdml0eVwiOmNhc2UgXCJ0cmFuc3BhcmVudFwiOmNhc2UgXCJ2aXNpYmxlXCI6Y2FzZSBcIndpcmVmcmFtZVwiOmtbbF09bTticmVhaztjYXNlIFwidmVydGV4Q29sb3JzXCI6ITA9PT1tJiYoay52ZXJ0ZXhDb2xvcnM9VEhSRUUuVmVydGV4Q29sb3JzKTtcImZhY2VcIj09PW0mJihrLnZlcnRleENvbG9ycz1USFJFRS5GYWNlQ29sb3JzKTticmVhaztkZWZhdWx0OmNvbnNvbGUuZXJyb3IoXCJUSFJFRS5Mb2FkZXIuY3JlYXRlTWF0ZXJpYWw6IFVuc3VwcG9ydGVkXCIsbCxtKX19XCJNZXNoQmFzaWNNYXRlcmlhbFwiPT09ay50eXBlJiZkZWxldGUgay5lbWlzc2l2ZTtcIk1lc2hQaG9uZ01hdGVyaWFsXCIhPT1rLnR5cGUmJmRlbGV0ZSBrLnNwZWN1bGFyOzE+ay5vcGFjaXR5JiYoay50cmFuc3BhcmVudD0hMCk7Yy5zZXRUZXh0dXJlcyhoKTtcbnJldHVybiBjLnBhcnNlKGspfX0oKX07VEhSRUUuTG9hZGVyLkhhbmRsZXJzPXtoYW5kbGVyczpbXSxhZGQ6ZnVuY3Rpb24oYSxiKXt0aGlzLmhhbmRsZXJzLnB1c2goYSxiKX0sZ2V0OmZ1bmN0aW9uKGEpe2Zvcih2YXIgYj10aGlzLmhhbmRsZXJzLGM9MCxkPWIubGVuZ3RoO2M8ZDtjKz0yKXt2YXIgZT1iW2MrMV07aWYoYltjXS50ZXN0KGEpKXJldHVybiBlfXJldHVybiBudWxsfX07VEhSRUUuWEhSTG9hZGVyPWZ1bmN0aW9uKGEpe3RoaXMubWFuYWdlcj12b2lkIDAhPT1hP2E6VEhSRUUuRGVmYXVsdExvYWRpbmdNYW5hZ2VyfTtcbk9iamVjdC5hc3NpZ24oVEhSRUUuWEhSTG9hZGVyLnByb3RvdHlwZSx7bG9hZDpmdW5jdGlvbihhLGIsYyxkKXt2b2lkIDAhPT10aGlzLnBhdGgmJihhPXRoaXMucGF0aCthKTt2YXIgZT10aGlzLGY9VEhSRUUuQ2FjaGUuZ2V0KGEpO2lmKHZvaWQgMCE9PWYpcmV0dXJuIGUubWFuYWdlci5pdGVtU3RhcnQoYSksc2V0VGltZW91dChmdW5jdGlvbigpe2ImJmIoZik7ZS5tYW5hZ2VyLml0ZW1FbmQoYSl9LDApLGY7dmFyIGc9bmV3IFhNTEh0dHBSZXF1ZXN0O2cub3ZlcnJpZGVNaW1lVHlwZShcInRleHQvcGxhaW5cIik7Zy5vcGVuKFwiR0VUXCIsYSwhMCk7Zy5hZGRFdmVudExpc3RlbmVyKFwibG9hZFwiLGZ1bmN0aW9uKGMpe3ZhciBmPWMudGFyZ2V0LnJlc3BvbnNlO1RIUkVFLkNhY2hlLmFkZChhLGYpOzIwMD09PXRoaXMuc3RhdHVzPyhiJiZiKGYpLGUubWFuYWdlci5pdGVtRW5kKGEpKTowPT09dGhpcy5zdGF0dXM/KGNvbnNvbGUud2FybihcIlRIUkVFLlhIUkxvYWRlcjogSFRUUCBTdGF0dXMgMCByZWNlaXZlZC5cIiksXG5iJiZiKGYpLGUubWFuYWdlci5pdGVtRW5kKGEpKTooZCYmZChjKSxlLm1hbmFnZXIuaXRlbUVycm9yKGEpKX0sITEpO3ZvaWQgMCE9PWMmJmcuYWRkRXZlbnRMaXN0ZW5lcihcInByb2dyZXNzXCIsZnVuY3Rpb24oYSl7YyhhKX0sITEpO2cuYWRkRXZlbnRMaXN0ZW5lcihcImVycm9yXCIsZnVuY3Rpb24oYil7ZCYmZChiKTtlLm1hbmFnZXIuaXRlbUVycm9yKGEpfSwhMSk7dm9pZCAwIT09dGhpcy5yZXNwb25zZVR5cGUmJihnLnJlc3BvbnNlVHlwZT10aGlzLnJlc3BvbnNlVHlwZSk7dm9pZCAwIT09dGhpcy53aXRoQ3JlZGVudGlhbHMmJihnLndpdGhDcmVkZW50aWFscz10aGlzLndpdGhDcmVkZW50aWFscyk7Zy5zZW5kKG51bGwpO2UubWFuYWdlci5pdGVtU3RhcnQoYSk7cmV0dXJuIGd9LHNldFBhdGg6ZnVuY3Rpb24oYSl7dGhpcy5wYXRoPWE7cmV0dXJuIHRoaXN9LHNldFJlc3BvbnNlVHlwZTpmdW5jdGlvbihhKXt0aGlzLnJlc3BvbnNlVHlwZT1hO3JldHVybiB0aGlzfSxzZXRXaXRoQ3JlZGVudGlhbHM6ZnVuY3Rpb24oYSl7dGhpcy53aXRoQ3JlZGVudGlhbHM9XG5hO3JldHVybiB0aGlzfX0pO1RIUkVFLkZvbnRMb2FkZXI9ZnVuY3Rpb24oYSl7dGhpcy5tYW5hZ2VyPXZvaWQgMCE9PWE/YTpUSFJFRS5EZWZhdWx0TG9hZGluZ01hbmFnZXJ9O09iamVjdC5hc3NpZ24oVEhSRUUuRm9udExvYWRlci5wcm90b3R5cGUse2xvYWQ6ZnVuY3Rpb24oYSxiLGMsZCl7dmFyIGU9dGhpczsobmV3IFRIUkVFLlhIUkxvYWRlcih0aGlzLm1hbmFnZXIpKS5sb2FkKGEsZnVuY3Rpb24oYSl7dmFyIGM7dHJ5e2M9SlNPTi5wYXJzZShhKX1jYXRjaChkKXtjb25zb2xlLndhcm4oXCJUSFJFRS5Gb250TG9hZGVyOiB0eXBlZmFjZS5qcyBzdXBwb3J0IGlzIGJlaW5nIGRlcHJlY2F0ZWQuIFVzZSB0eXBlZmFjZS5qc29uIGluc3RlYWQuXCIpLGM9SlNPTi5wYXJzZShhLnN1YnN0cmluZyg2NSxhLmxlbmd0aC0yKSl9YT1lLnBhcnNlKGMpO2ImJmIoYSl9LGMsZCl9LHBhcnNlOmZ1bmN0aW9uKGEpe3JldHVybiBuZXcgVEhSRUUuRm9udChhKX19KTtcblRIUkVFLkltYWdlTG9hZGVyPWZ1bmN0aW9uKGEpe3RoaXMubWFuYWdlcj12b2lkIDAhPT1hP2E6VEhSRUUuRGVmYXVsdExvYWRpbmdNYW5hZ2VyfTtcbk9iamVjdC5hc3NpZ24oVEhSRUUuSW1hZ2VMb2FkZXIucHJvdG90eXBlLHtsb2FkOmZ1bmN0aW9uKGEsYixjLGQpe3ZhciBlPXRoaXMsZj1kb2N1bWVudC5jcmVhdGVFbGVtZW50TlMoXCJodHRwOi8vd3d3LnczLm9yZy8xOTk5L3hodG1sXCIsXCJpbWdcIik7Zi5vbmxvYWQ9ZnVuY3Rpb24oKXtVUkwucmV2b2tlT2JqZWN0VVJMKGYuc3JjKTtiJiZiKGYpO2UubWFuYWdlci5pdGVtRW5kKGEpfTtpZigwPT09YS5pbmRleE9mKFwiZGF0YTpcIikpZi5zcmM9YTtlbHNle3ZhciBnPW5ldyBUSFJFRS5YSFJMb2FkZXI7Zy5zZXRQYXRoKHRoaXMucGF0aCk7Zy5zZXRSZXNwb25zZVR5cGUoXCJibG9iXCIpO2cubG9hZChhLGZ1bmN0aW9uKGEpe2Yuc3JjPVVSTC5jcmVhdGVPYmplY3RVUkwoYSl9LGMsZCl9ZS5tYW5hZ2VyLml0ZW1TdGFydChhKTtyZXR1cm4gZn0sc2V0Q3Jvc3NPcmlnaW46ZnVuY3Rpb24oYSl7dGhpcy5jcm9zc09yaWdpbj1hO3JldHVybiB0aGlzfSxzZXRQYXRoOmZ1bmN0aW9uKGEpe3RoaXMucGF0aD1cbmE7cmV0dXJuIHRoaXN9fSk7VEhSRUUuSlNPTkxvYWRlcj1mdW5jdGlvbihhKXtcImJvb2xlYW5cIj09PXR5cGVvZiBhJiYoY29uc29sZS53YXJuKFwiVEhSRUUuSlNPTkxvYWRlcjogc2hvd1N0YXR1cyBwYXJhbWV0ZXIgaGFzIGJlZW4gcmVtb3ZlZCBmcm9tIGNvbnN0cnVjdG9yLlwiKSxhPXZvaWQgMCk7dGhpcy5tYW5hZ2VyPXZvaWQgMCE9PWE/YTpUSFJFRS5EZWZhdWx0TG9hZGluZ01hbmFnZXI7dGhpcy53aXRoQ3JlZGVudGlhbHM9ITF9O1xuT2JqZWN0LmFzc2lnbihUSFJFRS5KU09OTG9hZGVyLnByb3RvdHlwZSx7bG9hZDpmdW5jdGlvbihhLGIsYyxkKXt2YXIgZT10aGlzLGY9dGhpcy50ZXh0dXJlUGF0aCYmXCJzdHJpbmdcIj09PXR5cGVvZiB0aGlzLnRleHR1cmVQYXRoP3RoaXMudGV4dHVyZVBhdGg6VEhSRUUuTG9hZGVyLnByb3RvdHlwZS5leHRyYWN0VXJsQmFzZShhKSxnPW5ldyBUSFJFRS5YSFJMb2FkZXIodGhpcy5tYW5hZ2VyKTtnLnNldFdpdGhDcmVkZW50aWFscyh0aGlzLndpdGhDcmVkZW50aWFscyk7Zy5sb2FkKGEsZnVuY3Rpb24oYyl7Yz1KU09OLnBhcnNlKGMpO3ZhciBkPWMubWV0YWRhdGE7aWYodm9pZCAwIT09ZCYmKGQ9ZC50eXBlLHZvaWQgMCE9PWQpKXtpZihcIm9iamVjdFwiPT09ZC50b0xvd2VyQ2FzZSgpKXtjb25zb2xlLmVycm9yKFwiVEhSRUUuSlNPTkxvYWRlcjogXCIrYStcIiBzaG91bGQgYmUgbG9hZGVkIHdpdGggVEhSRUUuT2JqZWN0TG9hZGVyIGluc3RlYWQuXCIpO3JldHVybn1pZihcInNjZW5lXCI9PT1cbmQudG9Mb3dlckNhc2UoKSl7Y29uc29sZS5lcnJvcihcIlRIUkVFLkpTT05Mb2FkZXI6IFwiK2ErXCIgc2hvdWxkIGJlIGxvYWRlZCB3aXRoIFRIUkVFLlNjZW5lTG9hZGVyIGluc3RlYWQuXCIpO3JldHVybn19Yz1lLnBhcnNlKGMsZik7YihjLmdlb21ldHJ5LGMubWF0ZXJpYWxzKX0sYyxkKX0sc2V0VGV4dHVyZVBhdGg6ZnVuY3Rpb24oYSl7dGhpcy50ZXh0dXJlUGF0aD1hfSxwYXJzZTpmdW5jdGlvbihhLGIpe3ZhciBjPW5ldyBUSFJFRS5HZW9tZXRyeSxkPXZvaWQgMCE9PWEuc2NhbGU/MS9hLnNjYWxlOjE7KGZ1bmN0aW9uKGIpe3ZhciBkLGcsaCxrLGwsbSxwLG4scSxyLHMsdix0LHU9YS5mYWNlczttPWEudmVydGljZXM7dmFyIEQ9YS5ub3JtYWxzLHc9YS5jb2xvcnMsST0wO2lmKHZvaWQgMCE9PWEudXZzKXtmb3IoZD0wO2Q8YS51dnMubGVuZ3RoO2QrKylhLnV2c1tkXS5sZW5ndGgmJkkrKztmb3IoZD0wO2Q8STtkKyspYy5mYWNlVmVydGV4VXZzW2RdPVtdfWs9MDtmb3IobD1tLmxlbmd0aDtrPFxubDspZD1uZXcgVEhSRUUuVmVjdG9yMyxkLng9bVtrKytdKmIsZC55PW1baysrXSpiLGQuej1tW2srK10qYixjLnZlcnRpY2VzLnB1c2goZCk7az0wO2ZvcihsPXUubGVuZ3RoO2s8bDspaWYoYj11W2srK10scT1iJjEsaD1iJjIsZD1iJjgscD1iJjE2LHI9YiYzMixtPWImNjQsYiY9MTI4LHEpe3E9bmV3IFRIUkVFLkZhY2UzO3EuYT11W2tdO3EuYj11W2srMV07cS5jPXVbayszXTtzPW5ldyBUSFJFRS5GYWNlMztzLmE9dVtrKzFdO3MuYj11W2srMl07cy5jPXVbayszXTtrKz00O2gmJihoPXVbaysrXSxxLm1hdGVyaWFsSW5kZXg9aCxzLm1hdGVyaWFsSW5kZXg9aCk7aD1jLmZhY2VzLmxlbmd0aDtpZihkKWZvcihkPTA7ZDxJO2QrKylmb3Iodj1hLnV2c1tkXSxjLmZhY2VWZXJ0ZXhVdnNbZF1baF09W10sYy5mYWNlVmVydGV4VXZzW2RdW2grMV09W10sZz0wOzQ+ZztnKyspbj11W2srK10sdD12WzIqbl0sbj12WzIqbisxXSx0PW5ldyBUSFJFRS5WZWN0b3IyKHQsbiksMiE9PWcmJmMuZmFjZVZlcnRleFV2c1tkXVtoXS5wdXNoKHQpLFxuMCE9PWcmJmMuZmFjZVZlcnRleFV2c1tkXVtoKzFdLnB1c2godCk7cCYmKHA9Myp1W2srK10scS5ub3JtYWwuc2V0KERbcCsrXSxEW3ArK10sRFtwXSkscy5ub3JtYWwuY29weShxLm5vcm1hbCkpO2lmKHIpZm9yKGQ9MDs0PmQ7ZCsrKXA9Myp1W2srK10scj1uZXcgVEhSRUUuVmVjdG9yMyhEW3ArK10sRFtwKytdLERbcF0pLDIhPT1kJiZxLnZlcnRleE5vcm1hbHMucHVzaChyKSwwIT09ZCYmcy52ZXJ0ZXhOb3JtYWxzLnB1c2gocik7bSYmKG09dVtrKytdLG09d1ttXSxxLmNvbG9yLnNldEhleChtKSxzLmNvbG9yLnNldEhleChtKSk7aWYoYilmb3IoZD0wOzQ+ZDtkKyspbT11W2srK10sbT13W21dLDIhPT1kJiZxLnZlcnRleENvbG9ycy5wdXNoKG5ldyBUSFJFRS5Db2xvcihtKSksMCE9PWQmJnMudmVydGV4Q29sb3JzLnB1c2gobmV3IFRIUkVFLkNvbG9yKG0pKTtjLmZhY2VzLnB1c2gocSk7Yy5mYWNlcy5wdXNoKHMpfWVsc2V7cT1uZXcgVEhSRUUuRmFjZTM7cS5hPXVbaysrXTtxLmI9XG51W2srK107cS5jPXVbaysrXTtoJiYoaD11W2srK10scS5tYXRlcmlhbEluZGV4PWgpO2g9Yy5mYWNlcy5sZW5ndGg7aWYoZClmb3IoZD0wO2Q8STtkKyspZm9yKHY9YS51dnNbZF0sYy5mYWNlVmVydGV4VXZzW2RdW2hdPVtdLGc9MDszPmc7ZysrKW49dVtrKytdLHQ9dlsyKm5dLG49dlsyKm4rMV0sdD1uZXcgVEhSRUUuVmVjdG9yMih0LG4pLGMuZmFjZVZlcnRleFV2c1tkXVtoXS5wdXNoKHQpO3AmJihwPTMqdVtrKytdLHEubm9ybWFsLnNldChEW3ArK10sRFtwKytdLERbcF0pKTtpZihyKWZvcihkPTA7Mz5kO2QrKylwPTMqdVtrKytdLHI9bmV3IFRIUkVFLlZlY3RvcjMoRFtwKytdLERbcCsrXSxEW3BdKSxxLnZlcnRleE5vcm1hbHMucHVzaChyKTttJiYobT11W2srK10scS5jb2xvci5zZXRIZXgod1ttXSkpO2lmKGIpZm9yKGQ9MDszPmQ7ZCsrKW09dVtrKytdLHEudmVydGV4Q29sb3JzLnB1c2gobmV3IFRIUkVFLkNvbG9yKHdbbV0pKTtjLmZhY2VzLnB1c2gocSl9fSkoZCk7KGZ1bmN0aW9uKCl7dmFyIGI9XG52b2lkIDAhPT1hLmluZmx1ZW5jZXNQZXJWZXJ0ZXg/YS5pbmZsdWVuY2VzUGVyVmVydGV4OjI7aWYoYS5za2luV2VpZ2h0cylmb3IodmFyIGQ9MCxnPWEuc2tpbldlaWdodHMubGVuZ3RoO2Q8ZztkKz1iKWMuc2tpbldlaWdodHMucHVzaChuZXcgVEhSRUUuVmVjdG9yNChhLnNraW5XZWlnaHRzW2RdLDE8Yj9hLnNraW5XZWlnaHRzW2QrMV06MCwyPGI/YS5za2luV2VpZ2h0c1tkKzJdOjAsMzxiP2Euc2tpbldlaWdodHNbZCszXTowKSk7aWYoYS5za2luSW5kaWNlcylmb3IoZD0wLGc9YS5za2luSW5kaWNlcy5sZW5ndGg7ZDxnO2QrPWIpYy5za2luSW5kaWNlcy5wdXNoKG5ldyBUSFJFRS5WZWN0b3I0KGEuc2tpbkluZGljZXNbZF0sMTxiP2Euc2tpbkluZGljZXNbZCsxXTowLDI8Yj9hLnNraW5JbmRpY2VzW2QrMl06MCwzPGI/YS5za2luSW5kaWNlc1tkKzNdOjApKTtjLmJvbmVzPWEuYm9uZXM7Yy5ib25lcyYmMDxjLmJvbmVzLmxlbmd0aCYmKGMuc2tpbldlaWdodHMubGVuZ3RoIT09XG5jLnNraW5JbmRpY2VzLmxlbmd0aHx8Yy5za2luSW5kaWNlcy5sZW5ndGghPT1jLnZlcnRpY2VzLmxlbmd0aCkmJmNvbnNvbGUud2FybihcIldoZW4gc2tpbm5pbmcsIG51bWJlciBvZiB2ZXJ0aWNlcyAoXCIrYy52ZXJ0aWNlcy5sZW5ndGgrXCIpLCBza2luSW5kaWNlcyAoXCIrYy5za2luSW5kaWNlcy5sZW5ndGgrXCIpLCBhbmQgc2tpbldlaWdodHMgKFwiK2Muc2tpbldlaWdodHMubGVuZ3RoK1wiKSBzaG91bGQgbWF0Y2guXCIpfSkoKTsoZnVuY3Rpb24oYil7aWYodm9pZCAwIT09YS5tb3JwaFRhcmdldHMpZm9yKHZhciBkPTAsZz1hLm1vcnBoVGFyZ2V0cy5sZW5ndGg7ZDxnO2QrKyl7Yy5tb3JwaFRhcmdldHNbZF09e307Yy5tb3JwaFRhcmdldHNbZF0ubmFtZT1hLm1vcnBoVGFyZ2V0c1tkXS5uYW1lO2MubW9ycGhUYXJnZXRzW2RdLnZlcnRpY2VzPVtdO2Zvcih2YXIgaD1jLm1vcnBoVGFyZ2V0c1tkXS52ZXJ0aWNlcyxrPWEubW9ycGhUYXJnZXRzW2RdLnZlcnRpY2VzLGw9MCxtPWsubGVuZ3RoO2w8XG5tO2wrPTMpe3ZhciBwPW5ldyBUSFJFRS5WZWN0b3IzO3AueD1rW2xdKmI7cC55PWtbbCsxXSpiO3Auej1rW2wrMl0qYjtoLnB1c2gocCl9fWlmKHZvaWQgMCE9PWEubW9ycGhDb2xvcnMmJjA8YS5tb3JwaENvbG9ycy5sZW5ndGgpZm9yKGNvbnNvbGUud2FybignVEhSRUUuSlNPTkxvYWRlcjogXCJtb3JwaENvbG9yc1wiIG5vIGxvbmdlciBzdXBwb3J0ZWQuIFVzaW5nIHRoZW0gYXMgZmFjZSBjb2xvcnMuJyksYj1jLmZhY2VzLGg9YS5tb3JwaENvbG9yc1swXS5jb2xvcnMsZD0wLGc9Yi5sZW5ndGg7ZDxnO2QrKyliW2RdLmNvbG9yLmZyb21BcnJheShoLDMqZCl9KShkKTsoZnVuY3Rpb24oKXt2YXIgYj1bXSxkPVtdO3ZvaWQgMCE9PWEuYW5pbWF0aW9uJiZkLnB1c2goYS5hbmltYXRpb24pO3ZvaWQgMCE9PWEuYW5pbWF0aW9ucyYmKGEuYW5pbWF0aW9ucy5sZW5ndGg/ZD1kLmNvbmNhdChhLmFuaW1hdGlvbnMpOmQucHVzaChhLmFuaW1hdGlvbnMpKTtmb3IodmFyIGc9MDtnPGQubGVuZ3RoO2crKyl7dmFyIGg9XG5USFJFRS5BbmltYXRpb25DbGlwLnBhcnNlQW5pbWF0aW9uKGRbZ10sYy5ib25lcyk7aCYmYi5wdXNoKGgpfWMubW9ycGhUYXJnZXRzJiYoZD1USFJFRS5BbmltYXRpb25DbGlwLkNyZWF0ZUNsaXBzRnJvbU1vcnBoVGFyZ2V0U2VxdWVuY2VzKGMubW9ycGhUYXJnZXRzLDEwKSxiPWIuY29uY2F0KGQpKTswPGIubGVuZ3RoJiYoYy5hbmltYXRpb25zPWIpfSkoKTtjLmNvbXB1dGVGYWNlTm9ybWFscygpO2MuY29tcHV0ZUJvdW5kaW5nU3BoZXJlKCk7aWYodm9pZCAwPT09YS5tYXRlcmlhbHN8fDA9PT1hLm1hdGVyaWFscy5sZW5ndGgpcmV0dXJue2dlb21ldHJ5OmN9O2Q9VEhSRUUuTG9hZGVyLnByb3RvdHlwZS5pbml0TWF0ZXJpYWxzKGEubWF0ZXJpYWxzLGIsdGhpcy5jcm9zc09yaWdpbik7cmV0dXJue2dlb21ldHJ5OmMsbWF0ZXJpYWxzOmR9fX0pO1xuVEhSRUUuTG9hZGluZ01hbmFnZXI9ZnVuY3Rpb24oYSxiLGMpe3ZhciBkPXRoaXMsZT0hMSxmPTAsZz0wO3RoaXMub25TdGFydD12b2lkIDA7dGhpcy5vbkxvYWQ9YTt0aGlzLm9uUHJvZ3Jlc3M9Yjt0aGlzLm9uRXJyb3I9Yzt0aGlzLml0ZW1TdGFydD1mdW5jdGlvbihhKXtnKys7aWYoITE9PT1lJiZ2b2lkIDAhPT1kLm9uU3RhcnQpZC5vblN0YXJ0KGEsZixnKTtlPSEwfTt0aGlzLml0ZW1FbmQ9ZnVuY3Rpb24oYSl7ZisrO2lmKHZvaWQgMCE9PWQub25Qcm9ncmVzcylkLm9uUHJvZ3Jlc3MoYSxmLGcpO2lmKGY9PT1nJiYoZT0hMSx2b2lkIDAhPT1kLm9uTG9hZCkpZC5vbkxvYWQoKX07dGhpcy5pdGVtRXJyb3I9ZnVuY3Rpb24oYSl7aWYodm9pZCAwIT09ZC5vbkVycm9yKWQub25FcnJvcihhKX19O1RIUkVFLkRlZmF1bHRMb2FkaW5nTWFuYWdlcj1uZXcgVEhSRUUuTG9hZGluZ01hbmFnZXI7XG5USFJFRS5CdWZmZXJHZW9tZXRyeUxvYWRlcj1mdW5jdGlvbihhKXt0aGlzLm1hbmFnZXI9dm9pZCAwIT09YT9hOlRIUkVFLkRlZmF1bHRMb2FkaW5nTWFuYWdlcn07XG5PYmplY3QuYXNzaWduKFRIUkVFLkJ1ZmZlckdlb21ldHJ5TG9hZGVyLnByb3RvdHlwZSx7bG9hZDpmdW5jdGlvbihhLGIsYyxkKXt2YXIgZT10aGlzOyhuZXcgVEhSRUUuWEhSTG9hZGVyKGUubWFuYWdlcikpLmxvYWQoYSxmdW5jdGlvbihhKXtiKGUucGFyc2UoSlNPTi5wYXJzZShhKSkpfSxjLGQpfSxwYXJzZTpmdW5jdGlvbihhKXt2YXIgYj1uZXcgVEhSRUUuQnVmZmVyR2VvbWV0cnksYz1hLmRhdGEuaW5kZXgsZD17SW50OEFycmF5OkludDhBcnJheSxVaW50OEFycmF5OlVpbnQ4QXJyYXksVWludDhDbGFtcGVkQXJyYXk6VWludDhDbGFtcGVkQXJyYXksSW50MTZBcnJheTpJbnQxNkFycmF5LFVpbnQxNkFycmF5OlVpbnQxNkFycmF5LEludDMyQXJyYXk6SW50MzJBcnJheSxVaW50MzJBcnJheTpVaW50MzJBcnJheSxGbG9hdDMyQXJyYXk6RmxvYXQzMkFycmF5LEZsb2F0NjRBcnJheTpGbG9hdDY0QXJyYXl9O3ZvaWQgMCE9PWMmJihjPW5ldyBkW2MudHlwZV0oYy5hcnJheSksYi5zZXRJbmRleChuZXcgVEhSRUUuQnVmZmVyQXR0cmlidXRlKGMsXG4xKSkpO3ZhciBlPWEuZGF0YS5hdHRyaWJ1dGVzLGY7Zm9yKGYgaW4gZSl7dmFyIGc9ZVtmXSxjPW5ldyBkW2cudHlwZV0oZy5hcnJheSk7Yi5hZGRBdHRyaWJ1dGUoZixuZXcgVEhSRUUuQnVmZmVyQXR0cmlidXRlKGMsZy5pdGVtU2l6ZSxnLm5vcm1hbGl6ZWQpKX1kPWEuZGF0YS5ncm91cHN8fGEuZGF0YS5kcmF3Y2FsbHN8fGEuZGF0YS5vZmZzZXRzO2lmKHZvaWQgMCE9PWQpZm9yKGY9MCxjPWQubGVuZ3RoO2YhPT1jOysrZillPWRbZl0sYi5hZGRHcm91cChlLnN0YXJ0LGUuY291bnQsZS5tYXRlcmlhbEluZGV4KTthPWEuZGF0YS5ib3VuZGluZ1NwaGVyZTt2b2lkIDAhPT1hJiYoZD1uZXcgVEhSRUUuVmVjdG9yMyx2b2lkIDAhPT1hLmNlbnRlciYmZC5mcm9tQXJyYXkoYS5jZW50ZXIpLGIuYm91bmRpbmdTcGhlcmU9bmV3IFRIUkVFLlNwaGVyZShkLGEucmFkaXVzKSk7cmV0dXJuIGJ9fSk7XG5USFJFRS5NYXRlcmlhbExvYWRlcj1mdW5jdGlvbihhKXt0aGlzLm1hbmFnZXI9dm9pZCAwIT09YT9hOlRIUkVFLkRlZmF1bHRMb2FkaW5nTWFuYWdlcjt0aGlzLnRleHR1cmVzPXt9fTtcbk9iamVjdC5hc3NpZ24oVEhSRUUuTWF0ZXJpYWxMb2FkZXIucHJvdG90eXBlLHtsb2FkOmZ1bmN0aW9uKGEsYixjLGQpe3ZhciBlPXRoaXM7KG5ldyBUSFJFRS5YSFJMb2FkZXIoZS5tYW5hZ2VyKSkubG9hZChhLGZ1bmN0aW9uKGEpe2IoZS5wYXJzZShKU09OLnBhcnNlKGEpKSl9LGMsZCl9LHNldFRleHR1cmVzOmZ1bmN0aW9uKGEpe3RoaXMudGV4dHVyZXM9YX0sZ2V0VGV4dHVyZTpmdW5jdGlvbihhKXt2YXIgYj10aGlzLnRleHR1cmVzO3ZvaWQgMD09PWJbYV0mJmNvbnNvbGUud2FybihcIlRIUkVFLk1hdGVyaWFsTG9hZGVyOiBVbmRlZmluZWQgdGV4dHVyZVwiLGEpO3JldHVybiBiW2FdfSxwYXJzZTpmdW5jdGlvbihhKXt2YXIgYj1uZXcgVEhSRUVbYS50eXBlXTt2b2lkIDAhPT1hLnV1aWQmJihiLnV1aWQ9YS51dWlkKTt2b2lkIDAhPT1hLm5hbWUmJihiLm5hbWU9YS5uYW1lKTt2b2lkIDAhPT1hLmNvbG9yJiZiLmNvbG9yLnNldEhleChhLmNvbG9yKTt2b2lkIDAhPT1hLnJvdWdobmVzcyYmXG4oYi5yb3VnaG5lc3M9YS5yb3VnaG5lc3MpO3ZvaWQgMCE9PWEubWV0YWxuZXNzJiYoYi5tZXRhbG5lc3M9YS5tZXRhbG5lc3MpO3ZvaWQgMCE9PWEuZW1pc3NpdmUmJmIuZW1pc3NpdmUuc2V0SGV4KGEuZW1pc3NpdmUpO3ZvaWQgMCE9PWEuc3BlY3VsYXImJmIuc3BlY3VsYXIuc2V0SGV4KGEuc3BlY3VsYXIpO3ZvaWQgMCE9PWEuc2hpbmluZXNzJiYoYi5zaGluaW5lc3M9YS5zaGluaW5lc3MpO3ZvaWQgMCE9PWEudW5pZm9ybXMmJihiLnVuaWZvcm1zPWEudW5pZm9ybXMpO3ZvaWQgMCE9PWEudmVydGV4U2hhZGVyJiYoYi52ZXJ0ZXhTaGFkZXI9YS52ZXJ0ZXhTaGFkZXIpO3ZvaWQgMCE9PWEuZnJhZ21lbnRTaGFkZXImJihiLmZyYWdtZW50U2hhZGVyPWEuZnJhZ21lbnRTaGFkZXIpO3ZvaWQgMCE9PWEudmVydGV4Q29sb3JzJiYoYi52ZXJ0ZXhDb2xvcnM9YS52ZXJ0ZXhDb2xvcnMpO3ZvaWQgMCE9PWEuc2hhZGluZyYmKGIuc2hhZGluZz1hLnNoYWRpbmcpO3ZvaWQgMCE9PWEuYmxlbmRpbmcmJlxuKGIuYmxlbmRpbmc9YS5ibGVuZGluZyk7dm9pZCAwIT09YS5zaWRlJiYoYi5zaWRlPWEuc2lkZSk7dm9pZCAwIT09YS5vcGFjaXR5JiYoYi5vcGFjaXR5PWEub3BhY2l0eSk7dm9pZCAwIT09YS50cmFuc3BhcmVudCYmKGIudHJhbnNwYXJlbnQ9YS50cmFuc3BhcmVudCk7dm9pZCAwIT09YS5hbHBoYVRlc3QmJihiLmFscGhhVGVzdD1hLmFscGhhVGVzdCk7dm9pZCAwIT09YS5kZXB0aFRlc3QmJihiLmRlcHRoVGVzdD1hLmRlcHRoVGVzdCk7dm9pZCAwIT09YS5kZXB0aFdyaXRlJiYoYi5kZXB0aFdyaXRlPWEuZGVwdGhXcml0ZSk7dm9pZCAwIT09YS5jb2xvcldyaXRlJiYoYi5jb2xvcldyaXRlPWEuY29sb3JXcml0ZSk7dm9pZCAwIT09YS53aXJlZnJhbWUmJihiLndpcmVmcmFtZT1hLndpcmVmcmFtZSk7dm9pZCAwIT09YS53aXJlZnJhbWVMaW5ld2lkdGgmJihiLndpcmVmcmFtZUxpbmV3aWR0aD1hLndpcmVmcmFtZUxpbmV3aWR0aCk7dm9pZCAwIT09YS5zaXplJiYoYi5zaXplPWEuc2l6ZSk7XG52b2lkIDAhPT1hLnNpemVBdHRlbnVhdGlvbiYmKGIuc2l6ZUF0dGVudWF0aW9uPWEuc2l6ZUF0dGVudWF0aW9uKTt2b2lkIDAhPT1hLm1hcCYmKGIubWFwPXRoaXMuZ2V0VGV4dHVyZShhLm1hcCkpO3ZvaWQgMCE9PWEuYWxwaGFNYXAmJihiLmFscGhhTWFwPXRoaXMuZ2V0VGV4dHVyZShhLmFscGhhTWFwKSxiLnRyYW5zcGFyZW50PSEwKTt2b2lkIDAhPT1hLmJ1bXBNYXAmJihiLmJ1bXBNYXA9dGhpcy5nZXRUZXh0dXJlKGEuYnVtcE1hcCkpO3ZvaWQgMCE9PWEuYnVtcFNjYWxlJiYoYi5idW1wU2NhbGU9YS5idW1wU2NhbGUpO3ZvaWQgMCE9PWEubm9ybWFsTWFwJiYoYi5ub3JtYWxNYXA9dGhpcy5nZXRUZXh0dXJlKGEubm9ybWFsTWFwKSk7aWYodm9pZCAwIT09YS5ub3JtYWxTY2FsZSl7dmFyIGM9YS5ub3JtYWxTY2FsZTshMT09PUFycmF5LmlzQXJyYXkoYykmJihjPVtjLGNdKTtiLm5vcm1hbFNjYWxlPShuZXcgVEhSRUUuVmVjdG9yMikuZnJvbUFycmF5KGMpfXZvaWQgMCE9PWEuZGlzcGxhY2VtZW50TWFwJiZcbihiLmRpc3BsYWNlbWVudE1hcD10aGlzLmdldFRleHR1cmUoYS5kaXNwbGFjZW1lbnRNYXApKTt2b2lkIDAhPT1hLmRpc3BsYWNlbWVudFNjYWxlJiYoYi5kaXNwbGFjZW1lbnRTY2FsZT1hLmRpc3BsYWNlbWVudFNjYWxlKTt2b2lkIDAhPT1hLmRpc3BsYWNlbWVudEJpYXMmJihiLmRpc3BsYWNlbWVudEJpYXM9YS5kaXNwbGFjZW1lbnRCaWFzKTt2b2lkIDAhPT1hLnJvdWdobmVzc01hcCYmKGIucm91Z2huZXNzTWFwPXRoaXMuZ2V0VGV4dHVyZShhLnJvdWdobmVzc01hcCkpO3ZvaWQgMCE9PWEubWV0YWxuZXNzTWFwJiYoYi5tZXRhbG5lc3NNYXA9dGhpcy5nZXRUZXh0dXJlKGEubWV0YWxuZXNzTWFwKSk7dm9pZCAwIT09YS5lbWlzc2l2ZU1hcCYmKGIuZW1pc3NpdmVNYXA9dGhpcy5nZXRUZXh0dXJlKGEuZW1pc3NpdmVNYXApKTt2b2lkIDAhPT1hLmVtaXNzaXZlSW50ZW5zaXR5JiYoYi5lbWlzc2l2ZUludGVuc2l0eT1hLmVtaXNzaXZlSW50ZW5zaXR5KTt2b2lkIDAhPT1hLnNwZWN1bGFyTWFwJiZcbihiLnNwZWN1bGFyTWFwPXRoaXMuZ2V0VGV4dHVyZShhLnNwZWN1bGFyTWFwKSk7dm9pZCAwIT09YS5lbnZNYXAmJihiLmVudk1hcD10aGlzLmdldFRleHR1cmUoYS5lbnZNYXApLGIuY29tYmluZT1USFJFRS5NdWx0aXBseU9wZXJhdGlvbik7dm9pZCAwIT09YS5yZWZsZWN0aXZpdHkmJihiLnJlZmxlY3Rpdml0eT1hLnJlZmxlY3Rpdml0eSk7dm9pZCAwIT09YS5saWdodE1hcCYmKGIubGlnaHRNYXA9dGhpcy5nZXRUZXh0dXJlKGEubGlnaHRNYXApKTt2b2lkIDAhPT1hLmxpZ2h0TWFwSW50ZW5zaXR5JiYoYi5saWdodE1hcEludGVuc2l0eT1hLmxpZ2h0TWFwSW50ZW5zaXR5KTt2b2lkIDAhPT1hLmFvTWFwJiYoYi5hb01hcD10aGlzLmdldFRleHR1cmUoYS5hb01hcCkpO3ZvaWQgMCE9PWEuYW9NYXBJbnRlbnNpdHkmJihiLmFvTWFwSW50ZW5zaXR5PWEuYW9NYXBJbnRlbnNpdHkpO2lmKHZvaWQgMCE9PWEubWF0ZXJpYWxzKWZvcih2YXIgYz0wLGQ9YS5tYXRlcmlhbHMubGVuZ3RoO2M8XG5kO2MrKyliLm1hdGVyaWFscy5wdXNoKHRoaXMucGFyc2UoYS5tYXRlcmlhbHNbY10pKTtyZXR1cm4gYn19KTtUSFJFRS5PYmplY3RMb2FkZXI9ZnVuY3Rpb24oYSl7dGhpcy5tYW5hZ2VyPXZvaWQgMCE9PWE/YTpUSFJFRS5EZWZhdWx0TG9hZGluZ01hbmFnZXI7dGhpcy50ZXh0dXJlUGF0aD1cIlwifTtcbk9iamVjdC5hc3NpZ24oVEhSRUUuT2JqZWN0TG9hZGVyLnByb3RvdHlwZSx7bG9hZDpmdW5jdGlvbihhLGIsYyxkKXtcIlwiPT09dGhpcy50ZXh0dXJlUGF0aCYmKHRoaXMudGV4dHVyZVBhdGg9YS5zdWJzdHJpbmcoMCxhLmxhc3RJbmRleE9mKFwiL1wiKSsxKSk7dmFyIGU9dGhpczsobmV3IFRIUkVFLlhIUkxvYWRlcihlLm1hbmFnZXIpKS5sb2FkKGEsZnVuY3Rpb24oYSl7ZS5wYXJzZShKU09OLnBhcnNlKGEpLGIpfSxjLGQpfSxzZXRUZXh0dXJlUGF0aDpmdW5jdGlvbihhKXt0aGlzLnRleHR1cmVQYXRoPWF9LHNldENyb3NzT3JpZ2luOmZ1bmN0aW9uKGEpe3RoaXMuY3Jvc3NPcmlnaW49YX0scGFyc2U6ZnVuY3Rpb24oYSxiKXt2YXIgYz10aGlzLnBhcnNlR2VvbWV0cmllcyhhLmdlb21ldHJpZXMpLGQ9dGhpcy5wYXJzZUltYWdlcyhhLmltYWdlcyxmdW5jdGlvbigpe3ZvaWQgMCE9PWImJmIoZSl9KSxkPXRoaXMucGFyc2VUZXh0dXJlcyhhLnRleHR1cmVzLGQpLGQ9dGhpcy5wYXJzZU1hdGVyaWFscyhhLm1hdGVyaWFscyxcbmQpLGU9dGhpcy5wYXJzZU9iamVjdChhLm9iamVjdCxjLGQpO2EuYW5pbWF0aW9ucyYmKGUuYW5pbWF0aW9ucz10aGlzLnBhcnNlQW5pbWF0aW9ucyhhLmFuaW1hdGlvbnMpKTt2b2lkIDAhPT1hLmltYWdlcyYmMCE9PWEuaW1hZ2VzLmxlbmd0aHx8dm9pZCAwPT09Ynx8YihlKTtyZXR1cm4gZX0scGFyc2VHZW9tZXRyaWVzOmZ1bmN0aW9uKGEpe3ZhciBiPXt9O2lmKHZvaWQgMCE9PWEpZm9yKHZhciBjPW5ldyBUSFJFRS5KU09OTG9hZGVyLGQ9bmV3IFRIUkVFLkJ1ZmZlckdlb21ldHJ5TG9hZGVyLGU9MCxmPWEubGVuZ3RoO2U8ZjtlKyspe3ZhciBnLGg9YVtlXTtzd2l0Y2goaC50eXBlKXtjYXNlIFwiUGxhbmVHZW9tZXRyeVwiOmNhc2UgXCJQbGFuZUJ1ZmZlckdlb21ldHJ5XCI6Zz1uZXcgVEhSRUVbaC50eXBlXShoLndpZHRoLGguaGVpZ2h0LGgud2lkdGhTZWdtZW50cyxoLmhlaWdodFNlZ21lbnRzKTticmVhaztjYXNlIFwiQm94R2VvbWV0cnlcIjpjYXNlIFwiQm94QnVmZmVyR2VvbWV0cnlcIjpjYXNlIFwiQ3ViZUdlb21ldHJ5XCI6Zz1cbm5ldyBUSFJFRVtoLnR5cGVdKGgud2lkdGgsaC5oZWlnaHQsaC5kZXB0aCxoLndpZHRoU2VnbWVudHMsaC5oZWlnaHRTZWdtZW50cyxoLmRlcHRoU2VnbWVudHMpO2JyZWFrO2Nhc2UgXCJDaXJjbGVHZW9tZXRyeVwiOmNhc2UgXCJDaXJjbGVCdWZmZXJHZW9tZXRyeVwiOmc9bmV3IFRIUkVFW2gudHlwZV0oaC5yYWRpdXMsaC5zZWdtZW50cyxoLnRoZXRhU3RhcnQsaC50aGV0YUxlbmd0aCk7YnJlYWs7Y2FzZSBcIkN5bGluZGVyR2VvbWV0cnlcIjpjYXNlIFwiQ3lsaW5kZXJCdWZmZXJHZW9tZXRyeVwiOmc9bmV3IFRIUkVFW2gudHlwZV0oaC5yYWRpdXNUb3AsaC5yYWRpdXNCb3R0b20saC5oZWlnaHQsaC5yYWRpYWxTZWdtZW50cyxoLmhlaWdodFNlZ21lbnRzLGgub3BlbkVuZGVkLGgudGhldGFTdGFydCxoLnRoZXRhTGVuZ3RoKTticmVhaztjYXNlIFwiQ29uZUdlb21ldHJ5XCI6Y2FzZSBcIkNvbmVCdWZmZXJHZW9tZXRyeVwiOmc9bmV3IFRIUkVFW2gudHlwZV0oaC5yYWRpdXMsaC5oZWlnaHQsaC5yYWRpYWxTZWdtZW50cyxcbmguaGVpZ2h0U2VnbWVudHMsaC5vcGVuRW5kZWQsaC50aGV0YVN0YXJ0LGgudGhldGFMZW5ndGgpO2JyZWFrO2Nhc2UgXCJTcGhlcmVHZW9tZXRyeVwiOmNhc2UgXCJTcGhlcmVCdWZmZXJHZW9tZXRyeVwiOmc9bmV3IFRIUkVFW2gudHlwZV0oaC5yYWRpdXMsaC53aWR0aFNlZ21lbnRzLGguaGVpZ2h0U2VnbWVudHMsaC5waGlTdGFydCxoLnBoaUxlbmd0aCxoLnRoZXRhU3RhcnQsaC50aGV0YUxlbmd0aCk7YnJlYWs7Y2FzZSBcIkRvZGVjYWhlZHJvbkdlb21ldHJ5XCI6Y2FzZSBcIkljb3NhaGVkcm9uR2VvbWV0cnlcIjpjYXNlIFwiT2N0YWhlZHJvbkdlb21ldHJ5XCI6Y2FzZSBcIlRldHJhaGVkcm9uR2VvbWV0cnlcIjpnPW5ldyBUSFJFRVtoLnR5cGVdKGgucmFkaXVzLGguZGV0YWlsKTticmVhaztjYXNlIFwiUmluZ0dlb21ldHJ5XCI6Y2FzZSBcIlJpbmdCdWZmZXJHZW9tZXRyeVwiOmc9bmV3IFRIUkVFW2gudHlwZV0oaC5pbm5lclJhZGl1cyxoLm91dGVyUmFkaXVzLGgudGhldGFTZWdtZW50cyxoLnBoaVNlZ21lbnRzLFxuaC50aGV0YVN0YXJ0LGgudGhldGFMZW5ndGgpO2JyZWFrO2Nhc2UgXCJUb3J1c0dlb21ldHJ5XCI6Y2FzZSBcIlRvcnVzQnVmZmVyR2VvbWV0cnlcIjpnPW5ldyBUSFJFRVtoLnR5cGVdKGgucmFkaXVzLGgudHViZSxoLnJhZGlhbFNlZ21lbnRzLGgudHVidWxhclNlZ21lbnRzLGguYXJjKTticmVhaztjYXNlIFwiVG9ydXNLbm90R2VvbWV0cnlcIjpjYXNlIFwiVG9ydXNLbm90QnVmZmVyR2VvbWV0cnlcIjpnPW5ldyBUSFJFRVtoLnR5cGVdKGgucmFkaXVzLGgudHViZSxoLnR1YnVsYXJTZWdtZW50cyxoLnJhZGlhbFNlZ21lbnRzLGgucCxoLnEpO2JyZWFrO2Nhc2UgXCJMYXRoZUdlb21ldHJ5XCI6Y2FzZSBcIkxhdGhlQnVmZmVyR2VvbWV0cnlcIjpnPW5ldyBUSFJFRVtoLnR5cGVdKGgucG9pbnRzLGguc2VnbWVudHMsaC5waGlTdGFydCxoLnBoaUxlbmd0aCk7YnJlYWs7Y2FzZSBcIkJ1ZmZlckdlb21ldHJ5XCI6Zz1kLnBhcnNlKGgpO2JyZWFrO2Nhc2UgXCJHZW9tZXRyeVwiOmc9Yy5wYXJzZShoLmRhdGEsdGhpcy50ZXh0dXJlUGF0aCkuZ2VvbWV0cnk7XG5icmVhaztkZWZhdWx0OmNvbnNvbGUud2FybignVEhSRUUuT2JqZWN0TG9hZGVyOiBVbnN1cHBvcnRlZCBnZW9tZXRyeSB0eXBlIFwiJytoLnR5cGUrJ1wiJyk7Y29udGludWV9Zy51dWlkPWgudXVpZDt2b2lkIDAhPT1oLm5hbWUmJihnLm5hbWU9aC5uYW1lKTtiW2gudXVpZF09Z31yZXR1cm4gYn0scGFyc2VNYXRlcmlhbHM6ZnVuY3Rpb24oYSxiKXt2YXIgYz17fTtpZih2b2lkIDAhPT1hKXt2YXIgZD1uZXcgVEhSRUUuTWF0ZXJpYWxMb2FkZXI7ZC5zZXRUZXh0dXJlcyhiKTtmb3IodmFyIGU9MCxmPWEubGVuZ3RoO2U8ZjtlKyspe3ZhciBnPWQucGFyc2UoYVtlXSk7Y1tnLnV1aWRdPWd9fXJldHVybiBjfSxwYXJzZUFuaW1hdGlvbnM6ZnVuY3Rpb24oYSl7Zm9yKHZhciBiPVtdLGM9MDtjPGEubGVuZ3RoO2MrKyl7dmFyIGQ9VEhSRUUuQW5pbWF0aW9uQ2xpcC5wYXJzZShhW2NdKTtiLnB1c2goZCl9cmV0dXJuIGJ9LHBhcnNlSW1hZ2VzOmZ1bmN0aW9uKGEsYil7ZnVuY3Rpb24gYyhhKXtkLm1hbmFnZXIuaXRlbVN0YXJ0KGEpO1xucmV0dXJuIGcubG9hZChhLGZ1bmN0aW9uKCl7ZC5tYW5hZ2VyLml0ZW1FbmQoYSl9KX12YXIgZD10aGlzLGU9e307aWYodm9pZCAwIT09YSYmMDxhLmxlbmd0aCl7dmFyIGY9bmV3IFRIUkVFLkxvYWRpbmdNYW5hZ2VyKGIpLGc9bmV3IFRIUkVFLkltYWdlTG9hZGVyKGYpO2cuc2V0Q3Jvc3NPcmlnaW4odGhpcy5jcm9zc09yaWdpbik7Zm9yKHZhciBmPTAsaD1hLmxlbmd0aDtmPGg7ZisrKXt2YXIgaz1hW2ZdLGw9L14oXFwvXFwvKXwoW2Etel0rOihcXC9cXC8pPykvaS50ZXN0KGsudXJsKT9rLnVybDpkLnRleHR1cmVQYXRoK2sudXJsO2Vbay51dWlkXT1jKGwpfX1yZXR1cm4gZX0scGFyc2VUZXh0dXJlczpmdW5jdGlvbihhLGIpe2Z1bmN0aW9uIGMoYSl7aWYoXCJudW1iZXJcIj09PXR5cGVvZiBhKXJldHVybiBhO2NvbnNvbGUud2FybihcIlRIUkVFLk9iamVjdExvYWRlci5wYXJzZVRleHR1cmU6IENvbnN0YW50IHNob3VsZCBiZSBpbiBudW1lcmljIGZvcm0uXCIsYSk7cmV0dXJuIFRIUkVFW2FdfVxudmFyIGQ9e307aWYodm9pZCAwIT09YSlmb3IodmFyIGU9MCxmPWEubGVuZ3RoO2U8ZjtlKyspe3ZhciBnPWFbZV07dm9pZCAwPT09Zy5pbWFnZSYmY29uc29sZS53YXJuKCdUSFJFRS5PYmplY3RMb2FkZXI6IE5vIFwiaW1hZ2VcIiBzcGVjaWZpZWQgZm9yJyxnLnV1aWQpO3ZvaWQgMD09PWJbZy5pbWFnZV0mJmNvbnNvbGUud2FybihcIlRIUkVFLk9iamVjdExvYWRlcjogVW5kZWZpbmVkIGltYWdlXCIsZy5pbWFnZSk7dmFyIGg9bmV3IFRIUkVFLlRleHR1cmUoYltnLmltYWdlXSk7aC5uZWVkc1VwZGF0ZT0hMDtoLnV1aWQ9Zy51dWlkO3ZvaWQgMCE9PWcubmFtZSYmKGgubmFtZT1nLm5hbWUpO3ZvaWQgMCE9PWcubWFwcGluZyYmKGgubWFwcGluZz1jKGcubWFwcGluZykpO3ZvaWQgMCE9PWcub2Zmc2V0JiZoLm9mZnNldC5mcm9tQXJyYXkoZy5vZmZzZXQpO3ZvaWQgMCE9PWcucmVwZWF0JiZoLnJlcGVhdC5mcm9tQXJyYXkoZy5yZXBlYXQpO3ZvaWQgMCE9PWcud3JhcCYmKGgud3JhcFM9YyhnLndyYXBbMF0pLFxuaC53cmFwVD1jKGcud3JhcFsxXSkpO3ZvaWQgMCE9PWcubWluRmlsdGVyJiYoaC5taW5GaWx0ZXI9YyhnLm1pbkZpbHRlcikpO3ZvaWQgMCE9PWcubWFnRmlsdGVyJiYoaC5tYWdGaWx0ZXI9YyhnLm1hZ0ZpbHRlcikpO3ZvaWQgMCE9PWcuYW5pc290cm9weSYmKGguYW5pc290cm9weT1nLmFuaXNvdHJvcHkpO3ZvaWQgMCE9PWcuZmxpcFkmJihoLmZsaXBZPWcuZmxpcFkpO2RbZy51dWlkXT1ofXJldHVybiBkfSxwYXJzZU9iamVjdDpmdW5jdGlvbigpe3ZhciBhPW5ldyBUSFJFRS5NYXRyaXg0O3JldHVybiBmdW5jdGlvbihiLGMsZCl7ZnVuY3Rpb24gZShhKXt2b2lkIDA9PT1jW2FdJiZjb25zb2xlLndhcm4oXCJUSFJFRS5PYmplY3RMb2FkZXI6IFVuZGVmaW5lZCBnZW9tZXRyeVwiLGEpO3JldHVybiBjW2FdfWZ1bmN0aW9uIGYoYSl7aWYodm9pZCAwIT09YSlyZXR1cm4gdm9pZCAwPT09ZFthXSYmY29uc29sZS53YXJuKFwiVEhSRUUuT2JqZWN0TG9hZGVyOiBVbmRlZmluZWQgbWF0ZXJpYWxcIixcbmEpLGRbYV19dmFyIGc7c3dpdGNoKGIudHlwZSl7Y2FzZSBcIlNjZW5lXCI6Zz1uZXcgVEhSRUUuU2NlbmU7YnJlYWs7Y2FzZSBcIlBlcnNwZWN0aXZlQ2FtZXJhXCI6Zz1uZXcgVEhSRUUuUGVyc3BlY3RpdmVDYW1lcmEoYi5mb3YsYi5hc3BlY3QsYi5uZWFyLGIuZmFyKTt2b2lkIDAhPT1iLmZvY3VzJiYoZy5mb2N1cz1iLmZvY3VzKTt2b2lkIDAhPT1iLnpvb20mJihnLnpvb209Yi56b29tKTt2b2lkIDAhPT1iLmZpbG1HYXVnZSYmKGcuZmlsbUdhdWdlPWIuZmlsbUdhdWdlKTt2b2lkIDAhPT1iLmZpbG1PZmZzZXQmJihnLmZpbG1PZmZzZXQ9Yi5maWxtT2Zmc2V0KTt2b2lkIDAhPT1iLnZpZXcmJihnLnZpZXc9T2JqZWN0LmFzc2lnbih7fSxiLnZpZXcpKTticmVhaztjYXNlIFwiT3J0aG9ncmFwaGljQ2FtZXJhXCI6Zz1uZXcgVEhSRUUuT3J0aG9ncmFwaGljQ2FtZXJhKGIubGVmdCxiLnJpZ2h0LGIudG9wLGIuYm90dG9tLGIubmVhcixiLmZhcik7YnJlYWs7Y2FzZSBcIkFtYmllbnRMaWdodFwiOmc9XG5uZXcgVEhSRUUuQW1iaWVudExpZ2h0KGIuY29sb3IsYi5pbnRlbnNpdHkpO2JyZWFrO2Nhc2UgXCJEaXJlY3Rpb25hbExpZ2h0XCI6Zz1uZXcgVEhSRUUuRGlyZWN0aW9uYWxMaWdodChiLmNvbG9yLGIuaW50ZW5zaXR5KTticmVhaztjYXNlIFwiUG9pbnRMaWdodFwiOmc9bmV3IFRIUkVFLlBvaW50TGlnaHQoYi5jb2xvcixiLmludGVuc2l0eSxiLmRpc3RhbmNlLGIuZGVjYXkpO2JyZWFrO2Nhc2UgXCJTcG90TGlnaHRcIjpnPW5ldyBUSFJFRS5TcG90TGlnaHQoYi5jb2xvcixiLmludGVuc2l0eSxiLmRpc3RhbmNlLGIuYW5nbGUsYi5wZW51bWJyYSxiLmRlY2F5KTticmVhaztjYXNlIFwiSGVtaXNwaGVyZUxpZ2h0XCI6Zz1uZXcgVEhSRUUuSGVtaXNwaGVyZUxpZ2h0KGIuY29sb3IsYi5ncm91bmRDb2xvcixiLmludGVuc2l0eSk7YnJlYWs7Y2FzZSBcIk1lc2hcIjpnPWUoYi5nZW9tZXRyeSk7dmFyIGg9ZihiLm1hdGVyaWFsKTtnPWcuYm9uZXMmJjA8Zy5ib25lcy5sZW5ndGg/bmV3IFRIUkVFLlNraW5uZWRNZXNoKGcsXG5oKTpuZXcgVEhSRUUuTWVzaChnLGgpO2JyZWFrO2Nhc2UgXCJMT0RcIjpnPW5ldyBUSFJFRS5MT0Q7YnJlYWs7Y2FzZSBcIkxpbmVcIjpnPW5ldyBUSFJFRS5MaW5lKGUoYi5nZW9tZXRyeSksZihiLm1hdGVyaWFsKSxiLm1vZGUpO2JyZWFrO2Nhc2UgXCJQb2ludENsb3VkXCI6Y2FzZSBcIlBvaW50c1wiOmc9bmV3IFRIUkVFLlBvaW50cyhlKGIuZ2VvbWV0cnkpLGYoYi5tYXRlcmlhbCkpO2JyZWFrO2Nhc2UgXCJTcHJpdGVcIjpnPW5ldyBUSFJFRS5TcHJpdGUoZihiLm1hdGVyaWFsKSk7YnJlYWs7Y2FzZSBcIkdyb3VwXCI6Zz1uZXcgVEhSRUUuR3JvdXA7YnJlYWs7ZGVmYXVsdDpnPW5ldyBUSFJFRS5PYmplY3QzRH1nLnV1aWQ9Yi51dWlkO3ZvaWQgMCE9PWIubmFtZSYmKGcubmFtZT1iLm5hbWUpO3ZvaWQgMCE9PWIubWF0cml4PyhhLmZyb21BcnJheShiLm1hdHJpeCksYS5kZWNvbXBvc2UoZy5wb3NpdGlvbixnLnF1YXRlcm5pb24sZy5zY2FsZSkpOih2b2lkIDAhPT1iLnBvc2l0aW9uJiZnLnBvc2l0aW9uLmZyb21BcnJheShiLnBvc2l0aW9uKSxcbnZvaWQgMCE9PWIucm90YXRpb24mJmcucm90YXRpb24uZnJvbUFycmF5KGIucm90YXRpb24pLHZvaWQgMCE9PWIuc2NhbGUmJmcuc2NhbGUuZnJvbUFycmF5KGIuc2NhbGUpKTt2b2lkIDAhPT1iLmNhc3RTaGFkb3cmJihnLmNhc3RTaGFkb3c9Yi5jYXN0U2hhZG93KTt2b2lkIDAhPT1iLnJlY2VpdmVTaGFkb3cmJihnLnJlY2VpdmVTaGFkb3c9Yi5yZWNlaXZlU2hhZG93KTt2b2lkIDAhPT1iLnZpc2libGUmJihnLnZpc2libGU9Yi52aXNpYmxlKTt2b2lkIDAhPT1iLnVzZXJEYXRhJiYoZy51c2VyRGF0YT1iLnVzZXJEYXRhKTtpZih2b2lkIDAhPT1iLmNoaWxkcmVuKWZvcih2YXIgayBpbiBiLmNoaWxkcmVuKWcuYWRkKHRoaXMucGFyc2VPYmplY3QoYi5jaGlsZHJlbltrXSxjLGQpKTtpZihcIkxPRFwiPT09Yi50eXBlKWZvcihiPWIubGV2ZWxzLGg9MDtoPGIubGVuZ3RoO2grKyl7dmFyIGw9YltoXTtrPWcuZ2V0T2JqZWN0QnlQcm9wZXJ0eShcInV1aWRcIixsLm9iamVjdCk7dm9pZCAwIT09XG5rJiZnLmFkZExldmVsKGssbC5kaXN0YW5jZSl9cmV0dXJuIGd9fSgpfSk7VEhSRUUuVGV4dHVyZUxvYWRlcj1mdW5jdGlvbihhKXt0aGlzLm1hbmFnZXI9dm9pZCAwIT09YT9hOlRIUkVFLkRlZmF1bHRMb2FkaW5nTWFuYWdlcn07XG5PYmplY3QuYXNzaWduKFRIUkVFLlRleHR1cmVMb2FkZXIucHJvdG90eXBlLHtsb2FkOmZ1bmN0aW9uKGEsYixjLGQpe3ZhciBlPW5ldyBUSFJFRS5UZXh0dXJlLGY9bmV3IFRIUkVFLkltYWdlTG9hZGVyKHRoaXMubWFuYWdlcik7Zi5zZXRDcm9zc09yaWdpbih0aGlzLmNyb3NzT3JpZ2luKTtmLnNldFBhdGgodGhpcy5wYXRoKTtmLmxvYWQoYSxmdW5jdGlvbihjKXt2YXIgZD0wPGEuc2VhcmNoKC9cXC4oanBnfGpwZWcpJC8pfHwwPT09YS5zZWFyY2goL15kYXRhXFw6aW1hZ2VcXC9qcGVnLyk7ZS5mb3JtYXQ9ZD9USFJFRS5SR0JGb3JtYXQ6VEhSRUUuUkdCQUZvcm1hdDtlLmltYWdlPWM7ZS5uZWVkc1VwZGF0ZT0hMDt2b2lkIDAhPT1iJiZiKGUpfSxjLGQpO3JldHVybiBlfSxzZXRDcm9zc09yaWdpbjpmdW5jdGlvbihhKXt0aGlzLmNyb3NzT3JpZ2luPWE7cmV0dXJuIHRoaXN9LHNldFBhdGg6ZnVuY3Rpb24oYSl7dGhpcy5wYXRoPWE7cmV0dXJuIHRoaXN9fSk7XG5USFJFRS5DdWJlVGV4dHVyZUxvYWRlcj1mdW5jdGlvbihhKXt0aGlzLm1hbmFnZXI9dm9pZCAwIT09YT9hOlRIUkVFLkRlZmF1bHRMb2FkaW5nTWFuYWdlcn07XG5PYmplY3QuYXNzaWduKFRIUkVFLkN1YmVUZXh0dXJlTG9hZGVyLnByb3RvdHlwZSx7bG9hZDpmdW5jdGlvbihhLGIsYyxkKXtmdW5jdGlvbiBlKGMpe2cubG9hZChhW2NdLGZ1bmN0aW9uKGEpe2YuaW1hZ2VzW2NdPWE7aCsrOzY9PT1oJiYoZi5uZWVkc1VwZGF0ZT0hMCxiJiZiKGYpKX0sdm9pZCAwLGQpfXZhciBmPW5ldyBUSFJFRS5DdWJlVGV4dHVyZSxnPW5ldyBUSFJFRS5JbWFnZUxvYWRlcih0aGlzLm1hbmFnZXIpO2cuc2V0Q3Jvc3NPcmlnaW4odGhpcy5jcm9zc09yaWdpbik7Zy5zZXRQYXRoKHRoaXMucGF0aCk7dmFyIGg9MDtmb3IoYz0wO2M8YS5sZW5ndGg7KytjKWUoYyk7cmV0dXJuIGZ9LHNldENyb3NzT3JpZ2luOmZ1bmN0aW9uKGEpe3RoaXMuY3Jvc3NPcmlnaW49YTtyZXR1cm4gdGhpc30sc2V0UGF0aDpmdW5jdGlvbihhKXt0aGlzLnBhdGg9YTtyZXR1cm4gdGhpc319KTtcblRIUkVFLkRhdGFUZXh0dXJlTG9hZGVyPVRIUkVFLkJpbmFyeVRleHR1cmVMb2FkZXI9ZnVuY3Rpb24oYSl7dGhpcy5tYW5hZ2VyPXZvaWQgMCE9PWE/YTpUSFJFRS5EZWZhdWx0TG9hZGluZ01hbmFnZXI7dGhpcy5fcGFyc2VyPW51bGx9O1xuT2JqZWN0LmFzc2lnbihUSFJFRS5CaW5hcnlUZXh0dXJlTG9hZGVyLnByb3RvdHlwZSx7bG9hZDpmdW5jdGlvbihhLGIsYyxkKXt2YXIgZT10aGlzLGY9bmV3IFRIUkVFLkRhdGFUZXh0dXJlLGc9bmV3IFRIUkVFLlhIUkxvYWRlcih0aGlzLm1hbmFnZXIpO2cuc2V0UmVzcG9uc2VUeXBlKFwiYXJyYXlidWZmZXJcIik7Zy5sb2FkKGEsZnVuY3Rpb24oYSl7aWYoYT1lLl9wYXJzZXIoYSkpdm9pZCAwIT09YS5pbWFnZT9mLmltYWdlPWEuaW1hZ2U6dm9pZCAwIT09YS5kYXRhJiYoZi5pbWFnZS53aWR0aD1hLndpZHRoLGYuaW1hZ2UuaGVpZ2h0PWEuaGVpZ2h0LGYuaW1hZ2UuZGF0YT1hLmRhdGEpLGYud3JhcFM9dm9pZCAwIT09YS53cmFwUz9hLndyYXBTOlRIUkVFLkNsYW1wVG9FZGdlV3JhcHBpbmcsZi53cmFwVD12b2lkIDAhPT1hLndyYXBUP2Eud3JhcFQ6VEhSRUUuQ2xhbXBUb0VkZ2VXcmFwcGluZyxmLm1hZ0ZpbHRlcj12b2lkIDAhPT1hLm1hZ0ZpbHRlcj9hLm1hZ0ZpbHRlcjpUSFJFRS5MaW5lYXJGaWx0ZXIsXG5mLm1pbkZpbHRlcj12b2lkIDAhPT1hLm1pbkZpbHRlcj9hLm1pbkZpbHRlcjpUSFJFRS5MaW5lYXJNaXBNYXBMaW5lYXJGaWx0ZXIsZi5hbmlzb3Ryb3B5PXZvaWQgMCE9PWEuYW5pc290cm9weT9hLmFuaXNvdHJvcHk6MSx2b2lkIDAhPT1hLmZvcm1hdCYmKGYuZm9ybWF0PWEuZm9ybWF0KSx2b2lkIDAhPT1hLnR5cGUmJihmLnR5cGU9YS50eXBlKSx2b2lkIDAhPT1hLm1pcG1hcHMmJihmLm1pcG1hcHM9YS5taXBtYXBzKSwxPT09YS5taXBtYXBDb3VudCYmKGYubWluRmlsdGVyPVRIUkVFLkxpbmVhckZpbHRlciksZi5uZWVkc1VwZGF0ZT0hMCxiJiZiKGYsYSl9LGMsZCk7cmV0dXJuIGZ9fSk7VEhSRUUuQ29tcHJlc3NlZFRleHR1cmVMb2FkZXI9ZnVuY3Rpb24oYSl7dGhpcy5tYW5hZ2VyPXZvaWQgMCE9PWE/YTpUSFJFRS5EZWZhdWx0TG9hZGluZ01hbmFnZXI7dGhpcy5fcGFyc2VyPW51bGx9O1xuT2JqZWN0LmFzc2lnbihUSFJFRS5Db21wcmVzc2VkVGV4dHVyZUxvYWRlci5wcm90b3R5cGUse2xvYWQ6ZnVuY3Rpb24oYSxiLGMsZCl7ZnVuY3Rpb24gZShlKXtrLmxvYWQoYVtlXSxmdW5jdGlvbihhKXthPWYuX3BhcnNlcihhLCEwKTtnW2VdPXt3aWR0aDphLndpZHRoLGhlaWdodDphLmhlaWdodCxmb3JtYXQ6YS5mb3JtYXQsbWlwbWFwczphLm1pcG1hcHN9O2wrPTE7Nj09PWwmJigxPT09YS5taXBtYXBDb3VudCYmKGgubWluRmlsdGVyPVRIUkVFLkxpbmVhckZpbHRlciksaC5mb3JtYXQ9YS5mb3JtYXQsaC5uZWVkc1VwZGF0ZT0hMCxiJiZiKGgpKX0sYyxkKX12YXIgZj10aGlzLGc9W10saD1uZXcgVEhSRUUuQ29tcHJlc3NlZFRleHR1cmU7aC5pbWFnZT1nO3ZhciBrPW5ldyBUSFJFRS5YSFJMb2FkZXIodGhpcy5tYW5hZ2VyKTtrLnNldFBhdGgodGhpcy5wYXRoKTtrLnNldFJlc3BvbnNlVHlwZShcImFycmF5YnVmZmVyXCIpO2lmKEFycmF5LmlzQXJyYXkoYSkpZm9yKHZhciBsPTAsXG5tPTAscD1hLmxlbmd0aDttPHA7KyttKWUobSk7ZWxzZSBrLmxvYWQoYSxmdW5jdGlvbihhKXthPWYuX3BhcnNlcihhLCEwKTtpZihhLmlzQ3ViZW1hcClmb3IodmFyIGM9YS5taXBtYXBzLmxlbmd0aC9hLm1pcG1hcENvdW50LGQ9MDtkPGM7ZCsrKXtnW2RdPXttaXBtYXBzOltdfTtmb3IodmFyIGU9MDtlPGEubWlwbWFwQ291bnQ7ZSsrKWdbZF0ubWlwbWFwcy5wdXNoKGEubWlwbWFwc1tkKmEubWlwbWFwQ291bnQrZV0pLGdbZF0uZm9ybWF0PWEuZm9ybWF0LGdbZF0ud2lkdGg9YS53aWR0aCxnW2RdLmhlaWdodD1hLmhlaWdodH1lbHNlIGguaW1hZ2Uud2lkdGg9YS53aWR0aCxoLmltYWdlLmhlaWdodD1hLmhlaWdodCxoLm1pcG1hcHM9YS5taXBtYXBzOzE9PT1hLm1pcG1hcENvdW50JiYoaC5taW5GaWx0ZXI9VEhSRUUuTGluZWFyRmlsdGVyKTtoLmZvcm1hdD1hLmZvcm1hdDtoLm5lZWRzVXBkYXRlPSEwO2ImJmIoaCl9LGMsZCk7cmV0dXJuIGh9LHNldFBhdGg6ZnVuY3Rpb24oYSl7dGhpcy5wYXRoPVxuYTtyZXR1cm4gdGhpc319KTtcblRIUkVFLk1hdGVyaWFsPWZ1bmN0aW9uKCl7T2JqZWN0LmRlZmluZVByb3BlcnR5KHRoaXMsXCJpZFwiLHt2YWx1ZTpUSFJFRS5NYXRlcmlhbElkQ291bnQrK30pO3RoaXMudXVpZD1USFJFRS5NYXRoLmdlbmVyYXRlVVVJRCgpO3RoaXMubmFtZT1cIlwiO3RoaXMudHlwZT1cIk1hdGVyaWFsXCI7dGhpcy5saWdodHM9dGhpcy5mb2c9ITA7dGhpcy5ibGVuZGluZz1USFJFRS5Ob3JtYWxCbGVuZGluZzt0aGlzLnNpZGU9VEhSRUUuRnJvbnRTaWRlO3RoaXMuc2hhZGluZz1USFJFRS5TbW9vdGhTaGFkaW5nO3RoaXMudmVydGV4Q29sb3JzPVRIUkVFLk5vQ29sb3JzO3RoaXMub3BhY2l0eT0xO3RoaXMudHJhbnNwYXJlbnQ9ITE7dGhpcy5ibGVuZFNyYz1USFJFRS5TcmNBbHBoYUZhY3Rvcjt0aGlzLmJsZW5kRHN0PVRIUkVFLk9uZU1pbnVzU3JjQWxwaGFGYWN0b3I7dGhpcy5ibGVuZEVxdWF0aW9uPVRIUkVFLkFkZEVxdWF0aW9uO3RoaXMuYmxlbmRFcXVhdGlvbkFscGhhPXRoaXMuYmxlbmREc3RBbHBoYT1cbnRoaXMuYmxlbmRTcmNBbHBoYT1udWxsO3RoaXMuZGVwdGhGdW5jPVRIUkVFLkxlc3NFcXVhbERlcHRoO3RoaXMuZGVwdGhXcml0ZT10aGlzLmRlcHRoVGVzdD0hMDt0aGlzLmNsaXBwaW5nUGxhbmVzPW51bGw7dGhpcy5jbGlwU2hhZG93cz0hMTt0aGlzLmNvbG9yV3JpdGU9ITA7dGhpcy5wcmVjaXNpb249bnVsbDt0aGlzLnBvbHlnb25PZmZzZXQ9ITE7dGhpcy5hbHBoYVRlc3Q9dGhpcy5wb2x5Z29uT2Zmc2V0VW5pdHM9dGhpcy5wb2x5Z29uT2Zmc2V0RmFjdG9yPTA7dGhpcy5wcmVtdWx0aXBsaWVkQWxwaGE9ITE7dGhpcy5vdmVyZHJhdz0wO3RoaXMuX25lZWRzVXBkYXRlPXRoaXMudmlzaWJsZT0hMH07XG5USFJFRS5NYXRlcmlhbC5wcm90b3R5cGU9e2NvbnN0cnVjdG9yOlRIUkVFLk1hdGVyaWFsLGdldCBuZWVkc1VwZGF0ZSgpe3JldHVybiB0aGlzLl9uZWVkc1VwZGF0ZX0sc2V0IG5lZWRzVXBkYXRlKGEpeyEwPT09YSYmdGhpcy51cGRhdGUoKTt0aGlzLl9uZWVkc1VwZGF0ZT1hfSxzZXRWYWx1ZXM6ZnVuY3Rpb24oYSl7aWYodm9pZCAwIT09YSlmb3IodmFyIGIgaW4gYSl7dmFyIGM9YVtiXTtpZih2b2lkIDA9PT1jKWNvbnNvbGUud2FybihcIlRIUkVFLk1hdGVyaWFsOiAnXCIrYitcIicgcGFyYW1ldGVyIGlzIHVuZGVmaW5lZC5cIik7ZWxzZXt2YXIgZD10aGlzW2JdO3ZvaWQgMD09PWQ/Y29uc29sZS53YXJuKFwiVEhSRUUuXCIrdGhpcy50eXBlK1wiOiAnXCIrYitcIicgaXMgbm90IGEgcHJvcGVydHkgb2YgdGhpcyBtYXRlcmlhbC5cIik6ZCBpbnN0YW5jZW9mIFRIUkVFLkNvbG9yP2Quc2V0KGMpOmQgaW5zdGFuY2VvZiBUSFJFRS5WZWN0b3IzJiZjIGluc3RhbmNlb2YgVEhSRUUuVmVjdG9yMz9kLmNvcHkoYyk6XG50aGlzW2JdPVwib3ZlcmRyYXdcIj09PWI/TnVtYmVyKGMpOmN9fX0sdG9KU09OOmZ1bmN0aW9uKGEpe2Z1bmN0aW9uIGIoYSl7dmFyIGI9W10sYztmb3IoYyBpbiBhKXt2YXIgZD1hW2NdO2RlbGV0ZSBkLm1ldGFkYXRhO2IucHVzaChkKX1yZXR1cm4gYn12YXIgYz12b2lkIDA9PT1hO2MmJihhPXt0ZXh0dXJlczp7fSxpbWFnZXM6e319KTt2YXIgZD17bWV0YWRhdGE6e3ZlcnNpb246NC40LHR5cGU6XCJNYXRlcmlhbFwiLGdlbmVyYXRvcjpcIk1hdGVyaWFsLnRvSlNPTlwifX07ZC51dWlkPXRoaXMudXVpZDtkLnR5cGU9dGhpcy50eXBlO1wiXCIhPT10aGlzLm5hbWUmJihkLm5hbWU9dGhpcy5uYW1lKTt0aGlzLmNvbG9yIGluc3RhbmNlb2YgVEhSRUUuQ29sb3ImJihkLmNvbG9yPXRoaXMuY29sb3IuZ2V0SGV4KCkpO3ZvaWQgMCE9PXRoaXMucm91Z2huZXNzJiYoZC5yb3VnaG5lc3M9dGhpcy5yb3VnaG5lc3MpO3ZvaWQgMCE9PXRoaXMubWV0YWxuZXNzJiYoZC5tZXRhbG5lc3M9dGhpcy5tZXRhbG5lc3MpO1xudGhpcy5lbWlzc2l2ZSBpbnN0YW5jZW9mIFRIUkVFLkNvbG9yJiYoZC5lbWlzc2l2ZT10aGlzLmVtaXNzaXZlLmdldEhleCgpKTt0aGlzLnNwZWN1bGFyIGluc3RhbmNlb2YgVEhSRUUuQ29sb3ImJihkLnNwZWN1bGFyPXRoaXMuc3BlY3VsYXIuZ2V0SGV4KCkpO3ZvaWQgMCE9PXRoaXMuc2hpbmluZXNzJiYoZC5zaGluaW5lc3M9dGhpcy5zaGluaW5lc3MpO3RoaXMubWFwIGluc3RhbmNlb2YgVEhSRUUuVGV4dHVyZSYmKGQubWFwPXRoaXMubWFwLnRvSlNPTihhKS51dWlkKTt0aGlzLmFscGhhTWFwIGluc3RhbmNlb2YgVEhSRUUuVGV4dHVyZSYmKGQuYWxwaGFNYXA9dGhpcy5hbHBoYU1hcC50b0pTT04oYSkudXVpZCk7dGhpcy5saWdodE1hcCBpbnN0YW5jZW9mIFRIUkVFLlRleHR1cmUmJihkLmxpZ2h0TWFwPXRoaXMubGlnaHRNYXAudG9KU09OKGEpLnV1aWQpO3RoaXMuYnVtcE1hcCBpbnN0YW5jZW9mIFRIUkVFLlRleHR1cmUmJihkLmJ1bXBNYXA9dGhpcy5idW1wTWFwLnRvSlNPTihhKS51dWlkLFxuZC5idW1wU2NhbGU9dGhpcy5idW1wU2NhbGUpO3RoaXMubm9ybWFsTWFwIGluc3RhbmNlb2YgVEhSRUUuVGV4dHVyZSYmKGQubm9ybWFsTWFwPXRoaXMubm9ybWFsTWFwLnRvSlNPTihhKS51dWlkLGQubm9ybWFsU2NhbGU9dGhpcy5ub3JtYWxTY2FsZS50b0FycmF5KCkpO3RoaXMuZGlzcGxhY2VtZW50TWFwIGluc3RhbmNlb2YgVEhSRUUuVGV4dHVyZSYmKGQuZGlzcGxhY2VtZW50TWFwPXRoaXMuZGlzcGxhY2VtZW50TWFwLnRvSlNPTihhKS51dWlkLGQuZGlzcGxhY2VtZW50U2NhbGU9dGhpcy5kaXNwbGFjZW1lbnRTY2FsZSxkLmRpc3BsYWNlbWVudEJpYXM9dGhpcy5kaXNwbGFjZW1lbnRCaWFzKTt0aGlzLnJvdWdobmVzc01hcCBpbnN0YW5jZW9mIFRIUkVFLlRleHR1cmUmJihkLnJvdWdobmVzc01hcD10aGlzLnJvdWdobmVzc01hcC50b0pTT04oYSkudXVpZCk7dGhpcy5tZXRhbG5lc3NNYXAgaW5zdGFuY2VvZiBUSFJFRS5UZXh0dXJlJiYoZC5tZXRhbG5lc3NNYXA9dGhpcy5tZXRhbG5lc3NNYXAudG9KU09OKGEpLnV1aWQpO1xudGhpcy5lbWlzc2l2ZU1hcCBpbnN0YW5jZW9mIFRIUkVFLlRleHR1cmUmJihkLmVtaXNzaXZlTWFwPXRoaXMuZW1pc3NpdmVNYXAudG9KU09OKGEpLnV1aWQpO3RoaXMuc3BlY3VsYXJNYXAgaW5zdGFuY2VvZiBUSFJFRS5UZXh0dXJlJiYoZC5zcGVjdWxhck1hcD10aGlzLnNwZWN1bGFyTWFwLnRvSlNPTihhKS51dWlkKTt0aGlzLmVudk1hcCBpbnN0YW5jZW9mIFRIUkVFLlRleHR1cmUmJihkLmVudk1hcD10aGlzLmVudk1hcC50b0pTT04oYSkudXVpZCxkLnJlZmxlY3Rpdml0eT10aGlzLnJlZmxlY3Rpdml0eSk7dm9pZCAwIT09dGhpcy5zaXplJiYoZC5zaXplPXRoaXMuc2l6ZSk7dm9pZCAwIT09dGhpcy5zaXplQXR0ZW51YXRpb24mJihkLnNpemVBdHRlbnVhdGlvbj10aGlzLnNpemVBdHRlbnVhdGlvbik7dGhpcy5ibGVuZGluZyE9PVRIUkVFLk5vcm1hbEJsZW5kaW5nJiYoZC5ibGVuZGluZz10aGlzLmJsZW5kaW5nKTt0aGlzLnNoYWRpbmchPT1USFJFRS5TbW9vdGhTaGFkaW5nJiZcbihkLnNoYWRpbmc9dGhpcy5zaGFkaW5nKTt0aGlzLnNpZGUhPT1USFJFRS5Gcm9udFNpZGUmJihkLnNpZGU9dGhpcy5zaWRlKTt0aGlzLnZlcnRleENvbG9ycyE9PVRIUkVFLk5vQ29sb3JzJiYoZC52ZXJ0ZXhDb2xvcnM9dGhpcy52ZXJ0ZXhDb2xvcnMpOzE+dGhpcy5vcGFjaXR5JiYoZC5vcGFjaXR5PXRoaXMub3BhY2l0eSk7ITA9PT10aGlzLnRyYW5zcGFyZW50JiYoZC50cmFuc3BhcmVudD10aGlzLnRyYW5zcGFyZW50KTswPHRoaXMuYWxwaGFUZXN0JiYoZC5hbHBoYVRlc3Q9dGhpcy5hbHBoYVRlc3QpOyEwPT09dGhpcy5wcmVtdWx0aXBsaWVkQWxwaGEmJihkLnByZW11bHRpcGxpZWRBbHBoYT10aGlzLnByZW11bHRpcGxpZWRBbHBoYSk7ITA9PT10aGlzLndpcmVmcmFtZSYmKGQud2lyZWZyYW1lPXRoaXMud2lyZWZyYW1lKTsxPHRoaXMud2lyZWZyYW1lTGluZXdpZHRoJiYoZC53aXJlZnJhbWVMaW5ld2lkdGg9dGhpcy53aXJlZnJhbWVMaW5ld2lkdGgpO2MmJihjPWIoYS50ZXh0dXJlcyksXG5hPWIoYS5pbWFnZXMpLDA8Yy5sZW5ndGgmJihkLnRleHR1cmVzPWMpLDA8YS5sZW5ndGgmJihkLmltYWdlcz1hKSk7cmV0dXJuIGR9LGNsb25lOmZ1bmN0aW9uKCl7cmV0dXJuKG5ldyB0aGlzLmNvbnN0cnVjdG9yKS5jb3B5KHRoaXMpfSxjb3B5OmZ1bmN0aW9uKGEpe3RoaXMubmFtZT1hLm5hbWU7dGhpcy5mb2c9YS5mb2c7dGhpcy5saWdodHM9YS5saWdodHM7dGhpcy5ibGVuZGluZz1hLmJsZW5kaW5nO3RoaXMuc2lkZT1hLnNpZGU7dGhpcy5zaGFkaW5nPWEuc2hhZGluZzt0aGlzLnZlcnRleENvbG9ycz1hLnZlcnRleENvbG9yczt0aGlzLm9wYWNpdHk9YS5vcGFjaXR5O3RoaXMudHJhbnNwYXJlbnQ9YS50cmFuc3BhcmVudDt0aGlzLmJsZW5kU3JjPWEuYmxlbmRTcmM7dGhpcy5ibGVuZERzdD1hLmJsZW5kRHN0O3RoaXMuYmxlbmRFcXVhdGlvbj1hLmJsZW5kRXF1YXRpb247dGhpcy5ibGVuZFNyY0FscGhhPWEuYmxlbmRTcmNBbHBoYTt0aGlzLmJsZW5kRHN0QWxwaGE9YS5ibGVuZERzdEFscGhhO1xudGhpcy5ibGVuZEVxdWF0aW9uQWxwaGE9YS5ibGVuZEVxdWF0aW9uQWxwaGE7dGhpcy5kZXB0aEZ1bmM9YS5kZXB0aEZ1bmM7dGhpcy5kZXB0aFRlc3Q9YS5kZXB0aFRlc3Q7dGhpcy5kZXB0aFdyaXRlPWEuZGVwdGhXcml0ZTt0aGlzLmNvbG9yV3JpdGU9YS5jb2xvcldyaXRlO3RoaXMucHJlY2lzaW9uPWEucHJlY2lzaW9uO3RoaXMucG9seWdvbk9mZnNldD1hLnBvbHlnb25PZmZzZXQ7dGhpcy5wb2x5Z29uT2Zmc2V0RmFjdG9yPWEucG9seWdvbk9mZnNldEZhY3Rvcjt0aGlzLnBvbHlnb25PZmZzZXRVbml0cz1hLnBvbHlnb25PZmZzZXRVbml0czt0aGlzLmFscGhhVGVzdD1hLmFscGhhVGVzdDt0aGlzLnByZW11bHRpcGxpZWRBbHBoYT1hLnByZW11bHRpcGxpZWRBbHBoYTt0aGlzLm92ZXJkcmF3PWEub3ZlcmRyYXc7dGhpcy52aXNpYmxlPWEudmlzaWJsZTt0aGlzLmNsaXBTaGFkb3dzPWEuY2xpcFNoYWRvd3M7YT1hLmNsaXBwaW5nUGxhbmVzO3ZhciBiPW51bGw7aWYobnVsbCE9PVxuYSlmb3IodmFyIGM9YS5sZW5ndGgsYj1BcnJheShjKSxkPTA7ZCE9PWM7KytkKWJbZF09YVtkXS5jbG9uZSgpO3RoaXMuY2xpcHBpbmdQbGFuZXM9YjtyZXR1cm4gdGhpc30sdXBkYXRlOmZ1bmN0aW9uKCl7dGhpcy5kaXNwYXRjaEV2ZW50KHt0eXBlOlwidXBkYXRlXCJ9KX0sZGlzcG9zZTpmdW5jdGlvbigpe3RoaXMuZGlzcGF0Y2hFdmVudCh7dHlwZTpcImRpc3Bvc2VcIn0pfX07T2JqZWN0LmFzc2lnbihUSFJFRS5NYXRlcmlhbC5wcm90b3R5cGUsVEhSRUUuRXZlbnREaXNwYXRjaGVyLnByb3RvdHlwZSk7VEhSRUUuTWF0ZXJpYWxJZENvdW50PTA7XG5USFJFRS5MaW5lQmFzaWNNYXRlcmlhbD1mdW5jdGlvbihhKXtUSFJFRS5NYXRlcmlhbC5jYWxsKHRoaXMpO3RoaXMudHlwZT1cIkxpbmVCYXNpY01hdGVyaWFsXCI7dGhpcy5jb2xvcj1uZXcgVEhSRUUuQ29sb3IoMTY3NzcyMTUpO3RoaXMubGluZXdpZHRoPTE7dGhpcy5saW5lam9pbj10aGlzLmxpbmVjYXA9XCJyb3VuZFwiO3RoaXMubGlnaHRzPSExO3RoaXMuc2V0VmFsdWVzKGEpfTtUSFJFRS5MaW5lQmFzaWNNYXRlcmlhbC5wcm90b3R5cGU9T2JqZWN0LmNyZWF0ZShUSFJFRS5NYXRlcmlhbC5wcm90b3R5cGUpO1RIUkVFLkxpbmVCYXNpY01hdGVyaWFsLnByb3RvdHlwZS5jb25zdHJ1Y3Rvcj1USFJFRS5MaW5lQmFzaWNNYXRlcmlhbDtcblRIUkVFLkxpbmVCYXNpY01hdGVyaWFsLnByb3RvdHlwZS5jb3B5PWZ1bmN0aW9uKGEpe1RIUkVFLk1hdGVyaWFsLnByb3RvdHlwZS5jb3B5LmNhbGwodGhpcyxhKTt0aGlzLmNvbG9yLmNvcHkoYS5jb2xvcik7dGhpcy5saW5ld2lkdGg9YS5saW5ld2lkdGg7dGhpcy5saW5lY2FwPWEubGluZWNhcDt0aGlzLmxpbmVqb2luPWEubGluZWpvaW47cmV0dXJuIHRoaXN9O1RIUkVFLkxpbmVEYXNoZWRNYXRlcmlhbD1mdW5jdGlvbihhKXtUSFJFRS5NYXRlcmlhbC5jYWxsKHRoaXMpO3RoaXMudHlwZT1cIkxpbmVEYXNoZWRNYXRlcmlhbFwiO3RoaXMuY29sb3I9bmV3IFRIUkVFLkNvbG9yKDE2Nzc3MjE1KTt0aGlzLnNjYWxlPXRoaXMubGluZXdpZHRoPTE7dGhpcy5kYXNoU2l6ZT0zO3RoaXMuZ2FwU2l6ZT0xO3RoaXMubGlnaHRzPSExO3RoaXMuc2V0VmFsdWVzKGEpfTtUSFJFRS5MaW5lRGFzaGVkTWF0ZXJpYWwucHJvdG90eXBlPU9iamVjdC5jcmVhdGUoVEhSRUUuTWF0ZXJpYWwucHJvdG90eXBlKTtcblRIUkVFLkxpbmVEYXNoZWRNYXRlcmlhbC5wcm90b3R5cGUuY29uc3RydWN0b3I9VEhSRUUuTGluZURhc2hlZE1hdGVyaWFsO1RIUkVFLkxpbmVEYXNoZWRNYXRlcmlhbC5wcm90b3R5cGUuY29weT1mdW5jdGlvbihhKXtUSFJFRS5NYXRlcmlhbC5wcm90b3R5cGUuY29weS5jYWxsKHRoaXMsYSk7dGhpcy5jb2xvci5jb3B5KGEuY29sb3IpO3RoaXMubGluZXdpZHRoPWEubGluZXdpZHRoO3RoaXMuc2NhbGU9YS5zY2FsZTt0aGlzLmRhc2hTaXplPWEuZGFzaFNpemU7dGhpcy5nYXBTaXplPWEuZ2FwU2l6ZTtyZXR1cm4gdGhpc307XG5USFJFRS5NZXNoQmFzaWNNYXRlcmlhbD1mdW5jdGlvbihhKXtUSFJFRS5NYXRlcmlhbC5jYWxsKHRoaXMpO3RoaXMudHlwZT1cIk1lc2hCYXNpY01hdGVyaWFsXCI7dGhpcy5jb2xvcj1uZXcgVEhSRUUuQ29sb3IoMTY3NzcyMTUpO3RoaXMuYW9NYXA9dGhpcy5tYXA9bnVsbDt0aGlzLmFvTWFwSW50ZW5zaXR5PTE7dGhpcy5lbnZNYXA9dGhpcy5hbHBoYU1hcD10aGlzLnNwZWN1bGFyTWFwPW51bGw7dGhpcy5jb21iaW5lPVRIUkVFLk11bHRpcGx5T3BlcmF0aW9uO3RoaXMucmVmbGVjdGl2aXR5PTE7dGhpcy5yZWZyYWN0aW9uUmF0aW89Ljk4O3RoaXMud2lyZWZyYW1lPSExO3RoaXMud2lyZWZyYW1lTGluZXdpZHRoPTE7dGhpcy53aXJlZnJhbWVMaW5lam9pbj10aGlzLndpcmVmcmFtZUxpbmVjYXA9XCJyb3VuZFwiO3RoaXMubGlnaHRzPXRoaXMubW9ycGhUYXJnZXRzPXRoaXMuc2tpbm5pbmc9ITE7dGhpcy5zZXRWYWx1ZXMoYSl9O1xuVEhSRUUuTWVzaEJhc2ljTWF0ZXJpYWwucHJvdG90eXBlPU9iamVjdC5jcmVhdGUoVEhSRUUuTWF0ZXJpYWwucHJvdG90eXBlKTtUSFJFRS5NZXNoQmFzaWNNYXRlcmlhbC5wcm90b3R5cGUuY29uc3RydWN0b3I9VEhSRUUuTWVzaEJhc2ljTWF0ZXJpYWw7XG5USFJFRS5NZXNoQmFzaWNNYXRlcmlhbC5wcm90b3R5cGUuY29weT1mdW5jdGlvbihhKXtUSFJFRS5NYXRlcmlhbC5wcm90b3R5cGUuY29weS5jYWxsKHRoaXMsYSk7dGhpcy5jb2xvci5jb3B5KGEuY29sb3IpO3RoaXMubWFwPWEubWFwO3RoaXMuYW9NYXA9YS5hb01hcDt0aGlzLmFvTWFwSW50ZW5zaXR5PWEuYW9NYXBJbnRlbnNpdHk7dGhpcy5zcGVjdWxhck1hcD1hLnNwZWN1bGFyTWFwO3RoaXMuYWxwaGFNYXA9YS5hbHBoYU1hcDt0aGlzLmVudk1hcD1hLmVudk1hcDt0aGlzLmNvbWJpbmU9YS5jb21iaW5lO3RoaXMucmVmbGVjdGl2aXR5PWEucmVmbGVjdGl2aXR5O3RoaXMucmVmcmFjdGlvblJhdGlvPWEucmVmcmFjdGlvblJhdGlvO3RoaXMud2lyZWZyYW1lPWEud2lyZWZyYW1lO3RoaXMud2lyZWZyYW1lTGluZXdpZHRoPWEud2lyZWZyYW1lTGluZXdpZHRoO3RoaXMud2lyZWZyYW1lTGluZWNhcD1hLndpcmVmcmFtZUxpbmVjYXA7dGhpcy53aXJlZnJhbWVMaW5lam9pbj1hLndpcmVmcmFtZUxpbmVqb2luO1xudGhpcy5za2lubmluZz1hLnNraW5uaW5nO3RoaXMubW9ycGhUYXJnZXRzPWEubW9ycGhUYXJnZXRzO3JldHVybiB0aGlzfTtUSFJFRS5NZXNoRGVwdGhNYXRlcmlhbD1mdW5jdGlvbihhKXtUSFJFRS5NYXRlcmlhbC5jYWxsKHRoaXMpO3RoaXMudHlwZT1cIk1lc2hEZXB0aE1hdGVyaWFsXCI7dGhpcy5kZXB0aFBhY2tpbmc9VEhSRUUuQmFzaWNEZXB0aFBhY2tpbmc7dGhpcy5tb3JwaFRhcmdldHM9dGhpcy5za2lubmluZz0hMTt0aGlzLmRpc3BsYWNlbWVudE1hcD10aGlzLmFscGhhTWFwPXRoaXMubWFwPW51bGw7dGhpcy5kaXNwbGFjZW1lbnRTY2FsZT0xO3RoaXMuZGlzcGxhY2VtZW50Qmlhcz0wO3RoaXMud2lyZWZyYW1lPSExO3RoaXMud2lyZWZyYW1lTGluZXdpZHRoPTE7dGhpcy5saWdodHM9dGhpcy5mb2c9ITE7dGhpcy5zZXRWYWx1ZXMoYSl9O1RIUkVFLk1lc2hEZXB0aE1hdGVyaWFsLnByb3RvdHlwZT1PYmplY3QuY3JlYXRlKFRIUkVFLk1hdGVyaWFsLnByb3RvdHlwZSk7XG5USFJFRS5NZXNoRGVwdGhNYXRlcmlhbC5wcm90b3R5cGUuY29uc3RydWN0b3I9VEhSRUUuTWVzaERlcHRoTWF0ZXJpYWw7VEhSRUUuTWVzaERlcHRoTWF0ZXJpYWwucHJvdG90eXBlLmNvcHk9ZnVuY3Rpb24oYSl7VEhSRUUuTWF0ZXJpYWwucHJvdG90eXBlLmNvcHkuY2FsbCh0aGlzLGEpO3RoaXMuZGVwdGhQYWNraW5nPWEuZGVwdGhQYWNraW5nO3RoaXMuc2tpbm5pbmc9YS5za2lubmluZzt0aGlzLm1vcnBoVGFyZ2V0cz1hLm1vcnBoVGFyZ2V0czt0aGlzLm1hcD1hLm1hcDt0aGlzLmFscGhhTWFwPWEuYWxwaGFNYXA7dGhpcy5kaXNwbGFjZW1lbnRNYXA9YS5kaXNwbGFjZW1lbnRNYXA7dGhpcy5kaXNwbGFjZW1lbnRTY2FsZT1hLmRpc3BsYWNlbWVudFNjYWxlO3RoaXMuZGlzcGxhY2VtZW50Qmlhcz1hLmRpc3BsYWNlbWVudEJpYXM7dGhpcy53aXJlZnJhbWU9YS53aXJlZnJhbWU7dGhpcy53aXJlZnJhbWVMaW5ld2lkdGg9YS53aXJlZnJhbWVMaW5ld2lkdGg7cmV0dXJuIHRoaXN9O1xuVEhSRUUuTWVzaExhbWJlcnRNYXRlcmlhbD1mdW5jdGlvbihhKXtUSFJFRS5NYXRlcmlhbC5jYWxsKHRoaXMpO3RoaXMudHlwZT1cIk1lc2hMYW1iZXJ0TWF0ZXJpYWxcIjt0aGlzLmNvbG9yPW5ldyBUSFJFRS5Db2xvcigxNjc3NzIxNSk7dGhpcy5saWdodE1hcD10aGlzLm1hcD1udWxsO3RoaXMubGlnaHRNYXBJbnRlbnNpdHk9MTt0aGlzLmFvTWFwPW51bGw7dGhpcy5hb01hcEludGVuc2l0eT0xO3RoaXMuZW1pc3NpdmU9bmV3IFRIUkVFLkNvbG9yKDApO3RoaXMuZW1pc3NpdmVJbnRlbnNpdHk9MTt0aGlzLmVudk1hcD10aGlzLmFscGhhTWFwPXRoaXMuc3BlY3VsYXJNYXA9dGhpcy5lbWlzc2l2ZU1hcD1udWxsO3RoaXMuY29tYmluZT1USFJFRS5NdWx0aXBseU9wZXJhdGlvbjt0aGlzLnJlZmxlY3Rpdml0eT0xO3RoaXMucmVmcmFjdGlvblJhdGlvPS45ODt0aGlzLndpcmVmcmFtZT0hMTt0aGlzLndpcmVmcmFtZUxpbmV3aWR0aD0xO3RoaXMud2lyZWZyYW1lTGluZWpvaW49dGhpcy53aXJlZnJhbWVMaW5lY2FwPVxuXCJyb3VuZFwiO3RoaXMubW9ycGhOb3JtYWxzPXRoaXMubW9ycGhUYXJnZXRzPXRoaXMuc2tpbm5pbmc9ITE7dGhpcy5zZXRWYWx1ZXMoYSl9O1RIUkVFLk1lc2hMYW1iZXJ0TWF0ZXJpYWwucHJvdG90eXBlPU9iamVjdC5jcmVhdGUoVEhSRUUuTWF0ZXJpYWwucHJvdG90eXBlKTtUSFJFRS5NZXNoTGFtYmVydE1hdGVyaWFsLnByb3RvdHlwZS5jb25zdHJ1Y3Rvcj1USFJFRS5NZXNoTGFtYmVydE1hdGVyaWFsO1xuVEhSRUUuTWVzaExhbWJlcnRNYXRlcmlhbC5wcm90b3R5cGUuY29weT1mdW5jdGlvbihhKXtUSFJFRS5NYXRlcmlhbC5wcm90b3R5cGUuY29weS5jYWxsKHRoaXMsYSk7dGhpcy5jb2xvci5jb3B5KGEuY29sb3IpO3RoaXMubWFwPWEubWFwO3RoaXMubGlnaHRNYXA9YS5saWdodE1hcDt0aGlzLmxpZ2h0TWFwSW50ZW5zaXR5PWEubGlnaHRNYXBJbnRlbnNpdHk7dGhpcy5hb01hcD1hLmFvTWFwO3RoaXMuYW9NYXBJbnRlbnNpdHk9YS5hb01hcEludGVuc2l0eTt0aGlzLmVtaXNzaXZlLmNvcHkoYS5lbWlzc2l2ZSk7dGhpcy5lbWlzc2l2ZU1hcD1hLmVtaXNzaXZlTWFwO3RoaXMuZW1pc3NpdmVJbnRlbnNpdHk9YS5lbWlzc2l2ZUludGVuc2l0eTt0aGlzLnNwZWN1bGFyTWFwPWEuc3BlY3VsYXJNYXA7dGhpcy5hbHBoYU1hcD1hLmFscGhhTWFwO3RoaXMuZW52TWFwPWEuZW52TWFwO3RoaXMuY29tYmluZT1hLmNvbWJpbmU7dGhpcy5yZWZsZWN0aXZpdHk9YS5yZWZsZWN0aXZpdHk7dGhpcy5yZWZyYWN0aW9uUmF0aW89XG5hLnJlZnJhY3Rpb25SYXRpbzt0aGlzLndpcmVmcmFtZT1hLndpcmVmcmFtZTt0aGlzLndpcmVmcmFtZUxpbmV3aWR0aD1hLndpcmVmcmFtZUxpbmV3aWR0aDt0aGlzLndpcmVmcmFtZUxpbmVjYXA9YS53aXJlZnJhbWVMaW5lY2FwO3RoaXMud2lyZWZyYW1lTGluZWpvaW49YS53aXJlZnJhbWVMaW5lam9pbjt0aGlzLnNraW5uaW5nPWEuc2tpbm5pbmc7dGhpcy5tb3JwaFRhcmdldHM9YS5tb3JwaFRhcmdldHM7dGhpcy5tb3JwaE5vcm1hbHM9YS5tb3JwaE5vcm1hbHM7cmV0dXJuIHRoaXN9O1RIUkVFLk1lc2hOb3JtYWxNYXRlcmlhbD1mdW5jdGlvbihhKXtUSFJFRS5NYXRlcmlhbC5jYWxsKHRoaXMsYSk7dGhpcy50eXBlPVwiTWVzaE5vcm1hbE1hdGVyaWFsXCI7dGhpcy53aXJlZnJhbWU9ITE7dGhpcy53aXJlZnJhbWVMaW5ld2lkdGg9MTt0aGlzLm1vcnBoVGFyZ2V0cz10aGlzLmxpZ2h0cz10aGlzLmZvZz0hMTt0aGlzLnNldFZhbHVlcyhhKX07XG5USFJFRS5NZXNoTm9ybWFsTWF0ZXJpYWwucHJvdG90eXBlPU9iamVjdC5jcmVhdGUoVEhSRUUuTWF0ZXJpYWwucHJvdG90eXBlKTtUSFJFRS5NZXNoTm9ybWFsTWF0ZXJpYWwucHJvdG90eXBlLmNvbnN0cnVjdG9yPVRIUkVFLk1lc2hOb3JtYWxNYXRlcmlhbDtUSFJFRS5NZXNoTm9ybWFsTWF0ZXJpYWwucHJvdG90eXBlLmNvcHk9ZnVuY3Rpb24oYSl7VEhSRUUuTWF0ZXJpYWwucHJvdG90eXBlLmNvcHkuY2FsbCh0aGlzLGEpO3RoaXMud2lyZWZyYW1lPWEud2lyZWZyYW1lO3RoaXMud2lyZWZyYW1lTGluZXdpZHRoPWEud2lyZWZyYW1lTGluZXdpZHRoO3JldHVybiB0aGlzfTtcblRIUkVFLk1lc2hQaG9uZ01hdGVyaWFsPWZ1bmN0aW9uKGEpe1RIUkVFLk1hdGVyaWFsLmNhbGwodGhpcyk7dGhpcy50eXBlPVwiTWVzaFBob25nTWF0ZXJpYWxcIjt0aGlzLmNvbG9yPW5ldyBUSFJFRS5Db2xvcigxNjc3NzIxNSk7dGhpcy5zcGVjdWxhcj1uZXcgVEhSRUUuQ29sb3IoMTExODQ4MSk7dGhpcy5zaGluaW5lc3M9MzA7dGhpcy5saWdodE1hcD10aGlzLm1hcD1udWxsO3RoaXMubGlnaHRNYXBJbnRlbnNpdHk9MTt0aGlzLmFvTWFwPW51bGw7dGhpcy5hb01hcEludGVuc2l0eT0xO3RoaXMuZW1pc3NpdmU9bmV3IFRIUkVFLkNvbG9yKDApO3RoaXMuZW1pc3NpdmVJbnRlbnNpdHk9MTt0aGlzLmJ1bXBNYXA9dGhpcy5lbWlzc2l2ZU1hcD1udWxsO3RoaXMuYnVtcFNjYWxlPTE7dGhpcy5ub3JtYWxNYXA9bnVsbDt0aGlzLm5vcm1hbFNjYWxlPW5ldyBUSFJFRS5WZWN0b3IyKDEsMSk7dGhpcy5kaXNwbGFjZW1lbnRNYXA9bnVsbDt0aGlzLmRpc3BsYWNlbWVudFNjYWxlPTE7dGhpcy5kaXNwbGFjZW1lbnRCaWFzPVxuMDt0aGlzLmVudk1hcD10aGlzLmFscGhhTWFwPXRoaXMuc3BlY3VsYXJNYXA9bnVsbDt0aGlzLmNvbWJpbmU9VEhSRUUuTXVsdGlwbHlPcGVyYXRpb247dGhpcy5yZWZsZWN0aXZpdHk9MTt0aGlzLnJlZnJhY3Rpb25SYXRpbz0uOTg7dGhpcy53aXJlZnJhbWU9ITE7dGhpcy53aXJlZnJhbWVMaW5ld2lkdGg9MTt0aGlzLndpcmVmcmFtZUxpbmVqb2luPXRoaXMud2lyZWZyYW1lTGluZWNhcD1cInJvdW5kXCI7dGhpcy5tb3JwaE5vcm1hbHM9dGhpcy5tb3JwaFRhcmdldHM9dGhpcy5za2lubmluZz0hMTt0aGlzLnNldFZhbHVlcyhhKX07VEhSRUUuTWVzaFBob25nTWF0ZXJpYWwucHJvdG90eXBlPU9iamVjdC5jcmVhdGUoVEhSRUUuTWF0ZXJpYWwucHJvdG90eXBlKTtUSFJFRS5NZXNoUGhvbmdNYXRlcmlhbC5wcm90b3R5cGUuY29uc3RydWN0b3I9VEhSRUUuTWVzaFBob25nTWF0ZXJpYWw7XG5USFJFRS5NZXNoUGhvbmdNYXRlcmlhbC5wcm90b3R5cGUuY29weT1mdW5jdGlvbihhKXtUSFJFRS5NYXRlcmlhbC5wcm90b3R5cGUuY29weS5jYWxsKHRoaXMsYSk7dGhpcy5jb2xvci5jb3B5KGEuY29sb3IpO3RoaXMuc3BlY3VsYXIuY29weShhLnNwZWN1bGFyKTt0aGlzLnNoaW5pbmVzcz1hLnNoaW5pbmVzczt0aGlzLm1hcD1hLm1hcDt0aGlzLmxpZ2h0TWFwPWEubGlnaHRNYXA7dGhpcy5saWdodE1hcEludGVuc2l0eT1hLmxpZ2h0TWFwSW50ZW5zaXR5O3RoaXMuYW9NYXA9YS5hb01hcDt0aGlzLmFvTWFwSW50ZW5zaXR5PWEuYW9NYXBJbnRlbnNpdHk7dGhpcy5lbWlzc2l2ZS5jb3B5KGEuZW1pc3NpdmUpO3RoaXMuZW1pc3NpdmVNYXA9YS5lbWlzc2l2ZU1hcDt0aGlzLmVtaXNzaXZlSW50ZW5zaXR5PWEuZW1pc3NpdmVJbnRlbnNpdHk7dGhpcy5idW1wTWFwPWEuYnVtcE1hcDt0aGlzLmJ1bXBTY2FsZT1hLmJ1bXBTY2FsZTt0aGlzLm5vcm1hbE1hcD1hLm5vcm1hbE1hcDt0aGlzLm5vcm1hbFNjYWxlLmNvcHkoYS5ub3JtYWxTY2FsZSk7XG50aGlzLmRpc3BsYWNlbWVudE1hcD1hLmRpc3BsYWNlbWVudE1hcDt0aGlzLmRpc3BsYWNlbWVudFNjYWxlPWEuZGlzcGxhY2VtZW50U2NhbGU7dGhpcy5kaXNwbGFjZW1lbnRCaWFzPWEuZGlzcGxhY2VtZW50Qmlhczt0aGlzLnNwZWN1bGFyTWFwPWEuc3BlY3VsYXJNYXA7dGhpcy5hbHBoYU1hcD1hLmFscGhhTWFwO3RoaXMuZW52TWFwPWEuZW52TWFwO3RoaXMuY29tYmluZT1hLmNvbWJpbmU7dGhpcy5yZWZsZWN0aXZpdHk9YS5yZWZsZWN0aXZpdHk7dGhpcy5yZWZyYWN0aW9uUmF0aW89YS5yZWZyYWN0aW9uUmF0aW87dGhpcy53aXJlZnJhbWU9YS53aXJlZnJhbWU7dGhpcy53aXJlZnJhbWVMaW5ld2lkdGg9YS53aXJlZnJhbWVMaW5ld2lkdGg7dGhpcy53aXJlZnJhbWVMaW5lY2FwPWEud2lyZWZyYW1lTGluZWNhcDt0aGlzLndpcmVmcmFtZUxpbmVqb2luPWEud2lyZWZyYW1lTGluZWpvaW47dGhpcy5za2lubmluZz1hLnNraW5uaW5nO3RoaXMubW9ycGhUYXJnZXRzPWEubW9ycGhUYXJnZXRzO1xudGhpcy5tb3JwaE5vcm1hbHM9YS5tb3JwaE5vcm1hbHM7cmV0dXJuIHRoaXN9O1xuVEhSRUUuTWVzaFN0YW5kYXJkTWF0ZXJpYWw9ZnVuY3Rpb24oYSl7VEhSRUUuTWF0ZXJpYWwuY2FsbCh0aGlzKTt0aGlzLmRlZmluZXM9e1NUQU5EQVJEOlwiXCJ9O3RoaXMudHlwZT1cIk1lc2hTdGFuZGFyZE1hdGVyaWFsXCI7dGhpcy5jb2xvcj1uZXcgVEhSRUUuQ29sb3IoMTY3NzcyMTUpO3RoaXMubWV0YWxuZXNzPXRoaXMucm91Z2huZXNzPS41O3RoaXMubGlnaHRNYXA9dGhpcy5tYXA9bnVsbDt0aGlzLmxpZ2h0TWFwSW50ZW5zaXR5PTE7dGhpcy5hb01hcD1udWxsO3RoaXMuYW9NYXBJbnRlbnNpdHk9MTt0aGlzLmVtaXNzaXZlPW5ldyBUSFJFRS5Db2xvcigwKTt0aGlzLmVtaXNzaXZlSW50ZW5zaXR5PTE7dGhpcy5idW1wTWFwPXRoaXMuZW1pc3NpdmVNYXA9bnVsbDt0aGlzLmJ1bXBTY2FsZT0xO3RoaXMubm9ybWFsTWFwPW51bGw7dGhpcy5ub3JtYWxTY2FsZT1uZXcgVEhSRUUuVmVjdG9yMigxLDEpO3RoaXMuZGlzcGxhY2VtZW50TWFwPW51bGw7dGhpcy5kaXNwbGFjZW1lbnRTY2FsZT1cbjE7dGhpcy5kaXNwbGFjZW1lbnRCaWFzPTA7dGhpcy5lbnZNYXA9dGhpcy5hbHBoYU1hcD10aGlzLm1ldGFsbmVzc01hcD10aGlzLnJvdWdobmVzc01hcD1udWxsO3RoaXMuZW52TWFwSW50ZW5zaXR5PTE7dGhpcy5yZWZyYWN0aW9uUmF0aW89Ljk4O3RoaXMud2lyZWZyYW1lPSExO3RoaXMud2lyZWZyYW1lTGluZXdpZHRoPTE7dGhpcy53aXJlZnJhbWVMaW5lam9pbj10aGlzLndpcmVmcmFtZUxpbmVjYXA9XCJyb3VuZFwiO3RoaXMubW9ycGhOb3JtYWxzPXRoaXMubW9ycGhUYXJnZXRzPXRoaXMuc2tpbm5pbmc9ITE7dGhpcy5zZXRWYWx1ZXMoYSl9O1RIUkVFLk1lc2hTdGFuZGFyZE1hdGVyaWFsLnByb3RvdHlwZT1PYmplY3QuY3JlYXRlKFRIUkVFLk1hdGVyaWFsLnByb3RvdHlwZSk7VEhSRUUuTWVzaFN0YW5kYXJkTWF0ZXJpYWwucHJvdG90eXBlLmNvbnN0cnVjdG9yPVRIUkVFLk1lc2hTdGFuZGFyZE1hdGVyaWFsO1xuVEhSRUUuTWVzaFN0YW5kYXJkTWF0ZXJpYWwucHJvdG90eXBlLmNvcHk9ZnVuY3Rpb24oYSl7VEhSRUUuTWF0ZXJpYWwucHJvdG90eXBlLmNvcHkuY2FsbCh0aGlzLGEpO3RoaXMuZGVmaW5lcz17U1RBTkRBUkQ6XCJcIn07dGhpcy5jb2xvci5jb3B5KGEuY29sb3IpO3RoaXMucm91Z2huZXNzPWEucm91Z2huZXNzO3RoaXMubWV0YWxuZXNzPWEubWV0YWxuZXNzO3RoaXMubWFwPWEubWFwO3RoaXMubGlnaHRNYXA9YS5saWdodE1hcDt0aGlzLmxpZ2h0TWFwSW50ZW5zaXR5PWEubGlnaHRNYXBJbnRlbnNpdHk7dGhpcy5hb01hcD1hLmFvTWFwO3RoaXMuYW9NYXBJbnRlbnNpdHk9YS5hb01hcEludGVuc2l0eTt0aGlzLmVtaXNzaXZlLmNvcHkoYS5lbWlzc2l2ZSk7dGhpcy5lbWlzc2l2ZU1hcD1hLmVtaXNzaXZlTWFwO3RoaXMuZW1pc3NpdmVJbnRlbnNpdHk9YS5lbWlzc2l2ZUludGVuc2l0eTt0aGlzLmJ1bXBNYXA9YS5idW1wTWFwO3RoaXMuYnVtcFNjYWxlPWEuYnVtcFNjYWxlO3RoaXMubm9ybWFsTWFwPVxuYS5ub3JtYWxNYXA7dGhpcy5ub3JtYWxTY2FsZS5jb3B5KGEubm9ybWFsU2NhbGUpO3RoaXMuZGlzcGxhY2VtZW50TWFwPWEuZGlzcGxhY2VtZW50TWFwO3RoaXMuZGlzcGxhY2VtZW50U2NhbGU9YS5kaXNwbGFjZW1lbnRTY2FsZTt0aGlzLmRpc3BsYWNlbWVudEJpYXM9YS5kaXNwbGFjZW1lbnRCaWFzO3RoaXMucm91Z2huZXNzTWFwPWEucm91Z2huZXNzTWFwO3RoaXMubWV0YWxuZXNzTWFwPWEubWV0YWxuZXNzTWFwO3RoaXMuYWxwaGFNYXA9YS5hbHBoYU1hcDt0aGlzLmVudk1hcD1hLmVudk1hcDt0aGlzLmVudk1hcEludGVuc2l0eT1hLmVudk1hcEludGVuc2l0eTt0aGlzLnJlZnJhY3Rpb25SYXRpbz1hLnJlZnJhY3Rpb25SYXRpbzt0aGlzLndpcmVmcmFtZT1hLndpcmVmcmFtZTt0aGlzLndpcmVmcmFtZUxpbmV3aWR0aD1hLndpcmVmcmFtZUxpbmV3aWR0aDt0aGlzLndpcmVmcmFtZUxpbmVjYXA9YS53aXJlZnJhbWVMaW5lY2FwO3RoaXMud2lyZWZyYW1lTGluZWpvaW49YS53aXJlZnJhbWVMaW5lam9pbjtcbnRoaXMuc2tpbm5pbmc9YS5za2lubmluZzt0aGlzLm1vcnBoVGFyZ2V0cz1hLm1vcnBoVGFyZ2V0czt0aGlzLm1vcnBoTm9ybWFscz1hLm1vcnBoTm9ybWFscztyZXR1cm4gdGhpc307VEhSRUUuTWVzaFBoeXNpY2FsTWF0ZXJpYWw9ZnVuY3Rpb24oYSl7VEhSRUUuTWVzaFN0YW5kYXJkTWF0ZXJpYWwuY2FsbCh0aGlzKTt0aGlzLmRlZmluZXM9e1BIWVNJQ0FMOlwiXCJ9O3RoaXMudHlwZT1cIk1lc2hQaHlzaWNhbE1hdGVyaWFsXCI7dGhpcy5yZWZsZWN0aXZpdHk9LjU7dGhpcy5jbGVhckNvYXRSb3VnaG5lc3M9dGhpcy5jbGVhckNvYXQ9MDt0aGlzLnNldFZhbHVlcyhhKX07VEhSRUUuTWVzaFBoeXNpY2FsTWF0ZXJpYWwucHJvdG90eXBlPU9iamVjdC5jcmVhdGUoVEhSRUUuTWVzaFN0YW5kYXJkTWF0ZXJpYWwucHJvdG90eXBlKTtUSFJFRS5NZXNoUGh5c2ljYWxNYXRlcmlhbC5wcm90b3R5cGUuY29uc3RydWN0b3I9VEhSRUUuTWVzaFBoeXNpY2FsTWF0ZXJpYWw7XG5USFJFRS5NZXNoUGh5c2ljYWxNYXRlcmlhbC5wcm90b3R5cGUuY29weT1mdW5jdGlvbihhKXtUSFJFRS5NZXNoU3RhbmRhcmRNYXRlcmlhbC5wcm90b3R5cGUuY29weS5jYWxsKHRoaXMsYSk7dGhpcy5kZWZpbmVzPXtQSFlTSUNBTDpcIlwifTt0aGlzLnJlZmxlY3Rpdml0eT1hLnJlZmxlY3Rpdml0eTt0aGlzLmNsZWFyQ29hdD1hLmNsZWFyQ29hdDt0aGlzLmNsZWFyQ29hdFJvdWdobmVzcz1hLmNsZWFyQ29hdFJvdWdobmVzcztyZXR1cm4gdGhpc307VEhSRUUuTXVsdGlNYXRlcmlhbD1mdW5jdGlvbihhKXt0aGlzLnV1aWQ9VEhSRUUuTWF0aC5nZW5lcmF0ZVVVSUQoKTt0aGlzLnR5cGU9XCJNdWx0aU1hdGVyaWFsXCI7dGhpcy5tYXRlcmlhbHM9YSBpbnN0YW5jZW9mIEFycmF5P2E6W107dGhpcy52aXNpYmxlPSEwfTtcblRIUkVFLk11bHRpTWF0ZXJpYWwucHJvdG90eXBlPXtjb25zdHJ1Y3RvcjpUSFJFRS5NdWx0aU1hdGVyaWFsLHRvSlNPTjpmdW5jdGlvbihhKXtmb3IodmFyIGI9e21ldGFkYXRhOnt2ZXJzaW9uOjQuMix0eXBlOlwibWF0ZXJpYWxcIixnZW5lcmF0b3I6XCJNYXRlcmlhbEV4cG9ydGVyXCJ9LHV1aWQ6dGhpcy51dWlkLHR5cGU6dGhpcy50eXBlLG1hdGVyaWFsczpbXX0sYz10aGlzLm1hdGVyaWFscyxkPTAsZT1jLmxlbmd0aDtkPGU7ZCsrKXt2YXIgZj1jW2RdLnRvSlNPTihhKTtkZWxldGUgZi5tZXRhZGF0YTtiLm1hdGVyaWFscy5wdXNoKGYpfWIudmlzaWJsZT10aGlzLnZpc2libGU7cmV0dXJuIGJ9LGNsb25lOmZ1bmN0aW9uKCl7Zm9yKHZhciBhPW5ldyB0aGlzLmNvbnN0cnVjdG9yLGI9MDtiPHRoaXMubWF0ZXJpYWxzLmxlbmd0aDtiKyspYS5tYXRlcmlhbHMucHVzaCh0aGlzLm1hdGVyaWFsc1tiXS5jbG9uZSgpKTthLnZpc2libGU9dGhpcy52aXNpYmxlO3JldHVybiBhfX07XG5USFJFRS5Qb2ludHNNYXRlcmlhbD1mdW5jdGlvbihhKXtUSFJFRS5NYXRlcmlhbC5jYWxsKHRoaXMpO3RoaXMudHlwZT1cIlBvaW50c01hdGVyaWFsXCI7dGhpcy5jb2xvcj1uZXcgVEhSRUUuQ29sb3IoMTY3NzcyMTUpO3RoaXMubWFwPW51bGw7dGhpcy5zaXplPTE7dGhpcy5zaXplQXR0ZW51YXRpb249ITA7dGhpcy5saWdodHM9ITE7dGhpcy5zZXRWYWx1ZXMoYSl9O1RIUkVFLlBvaW50c01hdGVyaWFsLnByb3RvdHlwZT1PYmplY3QuY3JlYXRlKFRIUkVFLk1hdGVyaWFsLnByb3RvdHlwZSk7VEhSRUUuUG9pbnRzTWF0ZXJpYWwucHJvdG90eXBlLmNvbnN0cnVjdG9yPVRIUkVFLlBvaW50c01hdGVyaWFsO1xuVEhSRUUuUG9pbnRzTWF0ZXJpYWwucHJvdG90eXBlLmNvcHk9ZnVuY3Rpb24oYSl7VEhSRUUuTWF0ZXJpYWwucHJvdG90eXBlLmNvcHkuY2FsbCh0aGlzLGEpO3RoaXMuY29sb3IuY29weShhLmNvbG9yKTt0aGlzLm1hcD1hLm1hcDt0aGlzLnNpemU9YS5zaXplO3RoaXMuc2l6ZUF0dGVudWF0aW9uPWEuc2l6ZUF0dGVudWF0aW9uO3JldHVybiB0aGlzfTtcblRIUkVFLlNoYWRlck1hdGVyaWFsPWZ1bmN0aW9uKGEpe1RIUkVFLk1hdGVyaWFsLmNhbGwodGhpcyk7dGhpcy50eXBlPVwiU2hhZGVyTWF0ZXJpYWxcIjt0aGlzLmRlZmluZXM9e307dGhpcy51bmlmb3Jtcz17fTt0aGlzLnZlcnRleFNoYWRlcj1cInZvaWQgbWFpbigpIHtcXG5cXHRnbF9Qb3NpdGlvbiA9IHByb2plY3Rpb25NYXRyaXggKiBtb2RlbFZpZXdNYXRyaXggKiB2ZWM0KCBwb3NpdGlvbiwgMS4wICk7XFxufVwiO3RoaXMuZnJhZ21lbnRTaGFkZXI9XCJ2b2lkIG1haW4oKSB7XFxuXFx0Z2xfRnJhZ0NvbG9yID0gdmVjNCggMS4wLCAwLjAsIDAuMCwgMS4wICk7XFxufVwiO3RoaXMubGluZXdpZHRoPTE7dGhpcy53aXJlZnJhbWU9ITE7dGhpcy53aXJlZnJhbWVMaW5ld2lkdGg9MTt0aGlzLm1vcnBoTm9ybWFscz10aGlzLm1vcnBoVGFyZ2V0cz10aGlzLnNraW5uaW5nPXRoaXMuY2xpcHBpbmc9dGhpcy5saWdodHM9dGhpcy5mb2c9ITE7dGhpcy5leHRlbnNpb25zPXtkZXJpdmF0aXZlczohMSxmcmFnRGVwdGg6ITEsXG5kcmF3QnVmZmVyczohMSxzaGFkZXJUZXh0dXJlTE9EOiExfTt0aGlzLmRlZmF1bHRBdHRyaWJ1dGVWYWx1ZXM9e2NvbG9yOlsxLDEsMV0sdXY6WzAsMF0sdXYyOlswLDBdfTt0aGlzLmluZGV4MEF0dHJpYnV0ZU5hbWU9dm9pZCAwO3ZvaWQgMCE9PWEmJih2b2lkIDAhPT1hLmF0dHJpYnV0ZXMmJmNvbnNvbGUuZXJyb3IoXCJUSFJFRS5TaGFkZXJNYXRlcmlhbDogYXR0cmlidXRlcyBzaG91bGQgbm93IGJlIGRlZmluZWQgaW4gVEhSRUUuQnVmZmVyR2VvbWV0cnkgaW5zdGVhZC5cIiksdGhpcy5zZXRWYWx1ZXMoYSkpfTtUSFJFRS5TaGFkZXJNYXRlcmlhbC5wcm90b3R5cGU9T2JqZWN0LmNyZWF0ZShUSFJFRS5NYXRlcmlhbC5wcm90b3R5cGUpO1RIUkVFLlNoYWRlck1hdGVyaWFsLnByb3RvdHlwZS5jb25zdHJ1Y3Rvcj1USFJFRS5TaGFkZXJNYXRlcmlhbDtcblRIUkVFLlNoYWRlck1hdGVyaWFsLnByb3RvdHlwZS5jb3B5PWZ1bmN0aW9uKGEpe1RIUkVFLk1hdGVyaWFsLnByb3RvdHlwZS5jb3B5LmNhbGwodGhpcyxhKTt0aGlzLmZyYWdtZW50U2hhZGVyPWEuZnJhZ21lbnRTaGFkZXI7dGhpcy52ZXJ0ZXhTaGFkZXI9YS52ZXJ0ZXhTaGFkZXI7dGhpcy51bmlmb3Jtcz1USFJFRS5Vbmlmb3Jtc1V0aWxzLmNsb25lKGEudW5pZm9ybXMpO3RoaXMuZGVmaW5lcz1hLmRlZmluZXM7dGhpcy53aXJlZnJhbWU9YS53aXJlZnJhbWU7dGhpcy53aXJlZnJhbWVMaW5ld2lkdGg9YS53aXJlZnJhbWVMaW5ld2lkdGg7dGhpcy5saWdodHM9YS5saWdodHM7dGhpcy5jbGlwcGluZz1hLmNsaXBwaW5nO3RoaXMuc2tpbm5pbmc9YS5za2lubmluZzt0aGlzLm1vcnBoVGFyZ2V0cz1hLm1vcnBoVGFyZ2V0czt0aGlzLm1vcnBoTm9ybWFscz1hLm1vcnBoTm9ybWFsczt0aGlzLmV4dGVuc2lvbnM9YS5leHRlbnNpb25zO3JldHVybiB0aGlzfTtcblRIUkVFLlNoYWRlck1hdGVyaWFsLnByb3RvdHlwZS50b0pTT049ZnVuY3Rpb24oYSl7YT1USFJFRS5NYXRlcmlhbC5wcm90b3R5cGUudG9KU09OLmNhbGwodGhpcyxhKTthLnVuaWZvcm1zPXRoaXMudW5pZm9ybXM7YS52ZXJ0ZXhTaGFkZXI9dGhpcy52ZXJ0ZXhTaGFkZXI7YS5mcmFnbWVudFNoYWRlcj10aGlzLmZyYWdtZW50U2hhZGVyO3JldHVybiBhfTtUSFJFRS5SYXdTaGFkZXJNYXRlcmlhbD1mdW5jdGlvbihhKXtUSFJFRS5TaGFkZXJNYXRlcmlhbC5jYWxsKHRoaXMsYSk7dGhpcy50eXBlPVwiUmF3U2hhZGVyTWF0ZXJpYWxcIn07VEhSRUUuUmF3U2hhZGVyTWF0ZXJpYWwucHJvdG90eXBlPU9iamVjdC5jcmVhdGUoVEhSRUUuU2hhZGVyTWF0ZXJpYWwucHJvdG90eXBlKTtUSFJFRS5SYXdTaGFkZXJNYXRlcmlhbC5wcm90b3R5cGUuY29uc3RydWN0b3I9VEhSRUUuUmF3U2hhZGVyTWF0ZXJpYWw7XG5USFJFRS5TcHJpdGVNYXRlcmlhbD1mdW5jdGlvbihhKXtUSFJFRS5NYXRlcmlhbC5jYWxsKHRoaXMpO3RoaXMudHlwZT1cIlNwcml0ZU1hdGVyaWFsXCI7dGhpcy5jb2xvcj1uZXcgVEhSRUUuQ29sb3IoMTY3NzcyMTUpO3RoaXMubWFwPW51bGw7dGhpcy5yb3RhdGlvbj0wO3RoaXMubGlnaHRzPXRoaXMuZm9nPSExO3RoaXMuc2V0VmFsdWVzKGEpfTtUSFJFRS5TcHJpdGVNYXRlcmlhbC5wcm90b3R5cGU9T2JqZWN0LmNyZWF0ZShUSFJFRS5NYXRlcmlhbC5wcm90b3R5cGUpO1RIUkVFLlNwcml0ZU1hdGVyaWFsLnByb3RvdHlwZS5jb25zdHJ1Y3Rvcj1USFJFRS5TcHJpdGVNYXRlcmlhbDtUSFJFRS5TcHJpdGVNYXRlcmlhbC5wcm90b3R5cGUuY29weT1mdW5jdGlvbihhKXtUSFJFRS5NYXRlcmlhbC5wcm90b3R5cGUuY29weS5jYWxsKHRoaXMsYSk7dGhpcy5jb2xvci5jb3B5KGEuY29sb3IpO3RoaXMubWFwPWEubWFwO3RoaXMucm90YXRpb249YS5yb3RhdGlvbjtyZXR1cm4gdGhpc307XG5USFJFRS5TaGFkb3dNYXRlcmlhbD1mdW5jdGlvbigpe1RIUkVFLlNoYWRlck1hdGVyaWFsLmNhbGwodGhpcyx7dW5pZm9ybXM6VEhSRUUuVW5pZm9ybXNVdGlscy5tZXJnZShbVEhSRUUuVW5pZm9ybXNMaWIubGlnaHRzLHtvcGFjaXR5Ont2YWx1ZToxfX1dKSx2ZXJ0ZXhTaGFkZXI6VEhSRUUuU2hhZGVyQ2h1bmsuc2hhZG93X3ZlcnQsZnJhZ21lbnRTaGFkZXI6VEhSRUUuU2hhZGVyQ2h1bmsuc2hhZG93X2ZyYWd9KTt0aGlzLnRyYW5zcGFyZW50PXRoaXMubGlnaHRzPSEwO09iamVjdC5kZWZpbmVQcm9wZXJ0aWVzKHRoaXMse29wYWNpdHk6e2VudW1lcmFibGU6ITAsZ2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMudW5pZm9ybXMub3BhY2l0eS52YWx1ZX0sc2V0OmZ1bmN0aW9uKGEpe3RoaXMudW5pZm9ybXMub3BhY2l0eS52YWx1ZT1hfX19KX07VEhSRUUuU2hhZG93TWF0ZXJpYWwucHJvdG90eXBlPU9iamVjdC5jcmVhdGUoVEhSRUUuU2hhZGVyTWF0ZXJpYWwucHJvdG90eXBlKTtcblRIUkVFLlNoYWRvd01hdGVyaWFsLnByb3RvdHlwZS5jb25zdHJ1Y3Rvcj1USFJFRS5TaGFkb3dNYXRlcmlhbDtcblRIUkVFLlRleHR1cmU9ZnVuY3Rpb24oYSxiLGMsZCxlLGYsZyxoLGssbCl7T2JqZWN0LmRlZmluZVByb3BlcnR5KHRoaXMsXCJpZFwiLHt2YWx1ZTpUSFJFRS5UZXh0dXJlSWRDb3VudCsrfSk7dGhpcy51dWlkPVRIUkVFLk1hdGguZ2VuZXJhdGVVVUlEKCk7dGhpcy5zb3VyY2VGaWxlPXRoaXMubmFtZT1cIlwiO3RoaXMuaW1hZ2U9dm9pZCAwIT09YT9hOlRIUkVFLlRleHR1cmUuREVGQVVMVF9JTUFHRTt0aGlzLm1pcG1hcHM9W107dGhpcy5tYXBwaW5nPXZvaWQgMCE9PWI/YjpUSFJFRS5UZXh0dXJlLkRFRkFVTFRfTUFQUElORzt0aGlzLndyYXBTPXZvaWQgMCE9PWM/YzpUSFJFRS5DbGFtcFRvRWRnZVdyYXBwaW5nO3RoaXMud3JhcFQ9dm9pZCAwIT09ZD9kOlRIUkVFLkNsYW1wVG9FZGdlV3JhcHBpbmc7dGhpcy5tYWdGaWx0ZXI9dm9pZCAwIT09ZT9lOlRIUkVFLkxpbmVhckZpbHRlcjt0aGlzLm1pbkZpbHRlcj12b2lkIDAhPT1mP2Y6VEhSRUUuTGluZWFyTWlwTWFwTGluZWFyRmlsdGVyO1xudGhpcy5hbmlzb3Ryb3B5PXZvaWQgMCE9PWs/azoxO3RoaXMuZm9ybWF0PXZvaWQgMCE9PWc/ZzpUSFJFRS5SR0JBRm9ybWF0O3RoaXMudHlwZT12b2lkIDAhPT1oP2g6VEhSRUUuVW5zaWduZWRCeXRlVHlwZTt0aGlzLm9mZnNldD1uZXcgVEhSRUUuVmVjdG9yMigwLDApO3RoaXMucmVwZWF0PW5ldyBUSFJFRS5WZWN0b3IyKDEsMSk7dGhpcy5nZW5lcmF0ZU1pcG1hcHM9ITA7dGhpcy5wcmVtdWx0aXBseUFscGhhPSExO3RoaXMuZmxpcFk9ITA7dGhpcy51bnBhY2tBbGlnbm1lbnQ9NDt0aGlzLmVuY29kaW5nPXZvaWQgMCE9PWw/bDpUSFJFRS5MaW5lYXJFbmNvZGluZzt0aGlzLnZlcnNpb249MDt0aGlzLm9uVXBkYXRlPW51bGx9O1RIUkVFLlRleHR1cmUuREVGQVVMVF9JTUFHRT12b2lkIDA7VEhSRUUuVGV4dHVyZS5ERUZBVUxUX01BUFBJTkc9VEhSRUUuVVZNYXBwaW5nO1xuVEhSRUUuVGV4dHVyZS5wcm90b3R5cGU9e2NvbnN0cnVjdG9yOlRIUkVFLlRleHR1cmUsc2V0IG5lZWRzVXBkYXRlKGEpeyEwPT09YSYmdGhpcy52ZXJzaW9uKyt9LGNsb25lOmZ1bmN0aW9uKCl7cmV0dXJuKG5ldyB0aGlzLmNvbnN0cnVjdG9yKS5jb3B5KHRoaXMpfSxjb3B5OmZ1bmN0aW9uKGEpe3RoaXMuaW1hZ2U9YS5pbWFnZTt0aGlzLm1pcG1hcHM9YS5taXBtYXBzLnNsaWNlKDApO3RoaXMubWFwcGluZz1hLm1hcHBpbmc7dGhpcy53cmFwUz1hLndyYXBTO3RoaXMud3JhcFQ9YS53cmFwVDt0aGlzLm1hZ0ZpbHRlcj1hLm1hZ0ZpbHRlcjt0aGlzLm1pbkZpbHRlcj1hLm1pbkZpbHRlcjt0aGlzLmFuaXNvdHJvcHk9YS5hbmlzb3Ryb3B5O3RoaXMuZm9ybWF0PWEuZm9ybWF0O3RoaXMudHlwZT1hLnR5cGU7dGhpcy5vZmZzZXQuY29weShhLm9mZnNldCk7dGhpcy5yZXBlYXQuY29weShhLnJlcGVhdCk7dGhpcy5nZW5lcmF0ZU1pcG1hcHM9YS5nZW5lcmF0ZU1pcG1hcHM7dGhpcy5wcmVtdWx0aXBseUFscGhhPVxuYS5wcmVtdWx0aXBseUFscGhhO3RoaXMuZmxpcFk9YS5mbGlwWTt0aGlzLnVucGFja0FsaWdubWVudD1hLnVucGFja0FsaWdubWVudDt0aGlzLmVuY29kaW5nPWEuZW5jb2Rpbmc7cmV0dXJuIHRoaXN9LHRvSlNPTjpmdW5jdGlvbihhKXtpZih2b2lkIDAhPT1hLnRleHR1cmVzW3RoaXMudXVpZF0pcmV0dXJuIGEudGV4dHVyZXNbdGhpcy51dWlkXTt2YXIgYj17bWV0YWRhdGE6e3ZlcnNpb246NC40LHR5cGU6XCJUZXh0dXJlXCIsZ2VuZXJhdG9yOlwiVGV4dHVyZS50b0pTT05cIn0sdXVpZDp0aGlzLnV1aWQsbmFtZTp0aGlzLm5hbWUsbWFwcGluZzp0aGlzLm1hcHBpbmcscmVwZWF0Olt0aGlzLnJlcGVhdC54LHRoaXMucmVwZWF0LnldLG9mZnNldDpbdGhpcy5vZmZzZXQueCx0aGlzLm9mZnNldC55XSx3cmFwOlt0aGlzLndyYXBTLHRoaXMud3JhcFRdLG1pbkZpbHRlcjp0aGlzLm1pbkZpbHRlcixtYWdGaWx0ZXI6dGhpcy5tYWdGaWx0ZXIsYW5pc290cm9weTp0aGlzLmFuaXNvdHJvcHksZmxpcFk6dGhpcy5mbGlwWX07XG5pZih2b2lkIDAhPT10aGlzLmltYWdlKXt2YXIgYz10aGlzLmltYWdlO3ZvaWQgMD09PWMudXVpZCYmKGMudXVpZD1USFJFRS5NYXRoLmdlbmVyYXRlVVVJRCgpKTtpZih2b2lkIDA9PT1hLmltYWdlc1tjLnV1aWRdKXt2YXIgZD1hLmltYWdlcyxlPWMudXVpZCxmPWMudXVpZCxnO3ZvaWQgMCE9PWMudG9EYXRhVVJMP2c9YzooZz1kb2N1bWVudC5jcmVhdGVFbGVtZW50TlMoXCJodHRwOi8vd3d3LnczLm9yZy8xOTk5L3hodG1sXCIsXCJjYW52YXNcIiksZy53aWR0aD1jLndpZHRoLGcuaGVpZ2h0PWMuaGVpZ2h0LGcuZ2V0Q29udGV4dChcIjJkXCIpLmRyYXdJbWFnZShjLDAsMCxjLndpZHRoLGMuaGVpZ2h0KSk7Zz0yMDQ4PGcud2lkdGh8fDIwNDg8Zy5oZWlnaHQ/Zy50b0RhdGFVUkwoXCJpbWFnZS9qcGVnXCIsLjYpOmcudG9EYXRhVVJMKFwiaW1hZ2UvcG5nXCIpO2RbZV09e3V1aWQ6Zix1cmw6Z319Yi5pbWFnZT1jLnV1aWR9cmV0dXJuIGEudGV4dHVyZXNbdGhpcy51dWlkXT1ifSxkaXNwb3NlOmZ1bmN0aW9uKCl7dGhpcy5kaXNwYXRjaEV2ZW50KHt0eXBlOlwiZGlzcG9zZVwifSl9LFxudHJhbnNmb3JtVXY6ZnVuY3Rpb24oYSl7aWYodGhpcy5tYXBwaW5nPT09VEhSRUUuVVZNYXBwaW5nKXthLm11bHRpcGx5KHRoaXMucmVwZWF0KTthLmFkZCh0aGlzLm9mZnNldCk7aWYoMD5hLnh8fDE8YS54KXN3aXRjaCh0aGlzLndyYXBTKXtjYXNlIFRIUkVFLlJlcGVhdFdyYXBwaW5nOmEueC09TWF0aC5mbG9vcihhLngpO2JyZWFrO2Nhc2UgVEhSRUUuQ2xhbXBUb0VkZ2VXcmFwcGluZzphLng9MD5hLng/MDoxO2JyZWFrO2Nhc2UgVEhSRUUuTWlycm9yZWRSZXBlYXRXcmFwcGluZzoxPT09TWF0aC5hYnMoTWF0aC5mbG9vcihhLngpJTIpP2EueD1NYXRoLmNlaWwoYS54KS1hLng6YS54LT1NYXRoLmZsb29yKGEueCl9aWYoMD5hLnl8fDE8YS55KXN3aXRjaCh0aGlzLndyYXBUKXtjYXNlIFRIUkVFLlJlcGVhdFdyYXBwaW5nOmEueS09TWF0aC5mbG9vcihhLnkpO2JyZWFrO2Nhc2UgVEhSRUUuQ2xhbXBUb0VkZ2VXcmFwcGluZzphLnk9MD5hLnk/MDoxO2JyZWFrO2Nhc2UgVEhSRUUuTWlycm9yZWRSZXBlYXRXcmFwcGluZzoxPT09XG5NYXRoLmFicyhNYXRoLmZsb29yKGEueSklMik/YS55PU1hdGguY2VpbChhLnkpLWEueTphLnktPU1hdGguZmxvb3IoYS55KX10aGlzLmZsaXBZJiYoYS55PTEtYS55KX19fTtPYmplY3QuYXNzaWduKFRIUkVFLlRleHR1cmUucHJvdG90eXBlLFRIUkVFLkV2ZW50RGlzcGF0Y2hlci5wcm90b3R5cGUpO1RIUkVFLlRleHR1cmVJZENvdW50PTA7XG5USFJFRS5EZXB0aFRleHR1cmU9ZnVuY3Rpb24oYSxiLGMsZCxlLGYsZyxoLGspe1RIUkVFLlRleHR1cmUuY2FsbCh0aGlzLG51bGwsZCxlLGYsZyxoLFRIUkVFLkRlcHRoRm9ybWF0LGMsayk7dGhpcy5pbWFnZT17d2lkdGg6YSxoZWlnaHQ6Yn07dGhpcy50eXBlPXZvaWQgMCE9PWM/YzpUSFJFRS5VbnNpZ25lZFNob3J0VHlwZTt0aGlzLm1hZ0ZpbHRlcj12b2lkIDAhPT1nP2c6VEhSRUUuTmVhcmVzdEZpbHRlcjt0aGlzLm1pbkZpbHRlcj12b2lkIDAhPT1oP2g6VEhSRUUuTmVhcmVzdEZpbHRlcjt0aGlzLmdlbmVyYXRlTWlwbWFwcz10aGlzLmZsaXBZPSExfTtUSFJFRS5EZXB0aFRleHR1cmUucHJvdG90eXBlPU9iamVjdC5jcmVhdGUoVEhSRUUuVGV4dHVyZS5wcm90b3R5cGUpO1RIUkVFLkRlcHRoVGV4dHVyZS5wcm90b3R5cGUuY29uc3RydWN0b3I9VEhSRUUuRGVwdGhUZXh0dXJlO1xuVEhSRUUuQ2FudmFzVGV4dHVyZT1mdW5jdGlvbihhLGIsYyxkLGUsZixnLGgsayl7VEhSRUUuVGV4dHVyZS5jYWxsKHRoaXMsYSxiLGMsZCxlLGYsZyxoLGspO3RoaXMubmVlZHNVcGRhdGU9ITB9O1RIUkVFLkNhbnZhc1RleHR1cmUucHJvdG90eXBlPU9iamVjdC5jcmVhdGUoVEhSRUUuVGV4dHVyZS5wcm90b3R5cGUpO1RIUkVFLkNhbnZhc1RleHR1cmUucHJvdG90eXBlLmNvbnN0cnVjdG9yPVRIUkVFLkNhbnZhc1RleHR1cmU7VEhSRUUuQ3ViZVRleHR1cmU9ZnVuY3Rpb24oYSxiLGMsZCxlLGYsZyxoLGssbCl7YT12b2lkIDAhPT1hP2E6W107Yj12b2lkIDAhPT1iP2I6VEhSRUUuQ3ViZVJlZmxlY3Rpb25NYXBwaW5nO1RIUkVFLlRleHR1cmUuY2FsbCh0aGlzLGEsYixjLGQsZSxmLGcsaCxrLGwpO3RoaXMuZmxpcFk9ITF9O1RIUkVFLkN1YmVUZXh0dXJlLnByb3RvdHlwZT1PYmplY3QuY3JlYXRlKFRIUkVFLlRleHR1cmUucHJvdG90eXBlKTtcblRIUkVFLkN1YmVUZXh0dXJlLnByb3RvdHlwZS5jb25zdHJ1Y3Rvcj1USFJFRS5DdWJlVGV4dHVyZTtPYmplY3QuZGVmaW5lUHJvcGVydHkoVEhSRUUuQ3ViZVRleHR1cmUucHJvdG90eXBlLFwiaW1hZ2VzXCIse2dldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLmltYWdlfSxzZXQ6ZnVuY3Rpb24oYSl7dGhpcy5pbWFnZT1hfX0pO1RIUkVFLkNvbXByZXNzZWRUZXh0dXJlPWZ1bmN0aW9uKGEsYixjLGQsZSxmLGcsaCxrLGwsbSxwKXtUSFJFRS5UZXh0dXJlLmNhbGwodGhpcyxudWxsLGYsZyxoLGssbCxkLGUsbSxwKTt0aGlzLmltYWdlPXt3aWR0aDpiLGhlaWdodDpjfTt0aGlzLm1pcG1hcHM9YTt0aGlzLmdlbmVyYXRlTWlwbWFwcz10aGlzLmZsaXBZPSExfTtUSFJFRS5Db21wcmVzc2VkVGV4dHVyZS5wcm90b3R5cGU9T2JqZWN0LmNyZWF0ZShUSFJFRS5UZXh0dXJlLnByb3RvdHlwZSk7VEhSRUUuQ29tcHJlc3NlZFRleHR1cmUucHJvdG90eXBlLmNvbnN0cnVjdG9yPVRIUkVFLkNvbXByZXNzZWRUZXh0dXJlO1xuVEhSRUUuRGF0YVRleHR1cmU9ZnVuY3Rpb24oYSxiLGMsZCxlLGYsZyxoLGssbCxtLHApe1RIUkVFLlRleHR1cmUuY2FsbCh0aGlzLG51bGwsZixnLGgsayxsLGQsZSxtLHApO3RoaXMuaW1hZ2U9e2RhdGE6YSx3aWR0aDpiLGhlaWdodDpjfTt0aGlzLm1hZ0ZpbHRlcj12b2lkIDAhPT1rP2s6VEhSRUUuTmVhcmVzdEZpbHRlcjt0aGlzLm1pbkZpbHRlcj12b2lkIDAhPT1sP2w6VEhSRUUuTmVhcmVzdEZpbHRlcjt0aGlzLmdlbmVyYXRlTWlwbWFwcz10aGlzLmZsaXBZPSExfTtUSFJFRS5EYXRhVGV4dHVyZS5wcm90b3R5cGU9T2JqZWN0LmNyZWF0ZShUSFJFRS5UZXh0dXJlLnByb3RvdHlwZSk7VEhSRUUuRGF0YVRleHR1cmUucHJvdG90eXBlLmNvbnN0cnVjdG9yPVRIUkVFLkRhdGFUZXh0dXJlO1xuVEhSRUUuVmlkZW9UZXh0dXJlPWZ1bmN0aW9uKGEsYixjLGQsZSxmLGcsaCxrKXtmdW5jdGlvbiBsKCl7cmVxdWVzdEFuaW1hdGlvbkZyYW1lKGwpO2EucmVhZHlTdGF0ZT49YS5IQVZFX0NVUlJFTlRfREFUQSYmKG0ubmVlZHNVcGRhdGU9ITApfVRIUkVFLlRleHR1cmUuY2FsbCh0aGlzLGEsYixjLGQsZSxmLGcsaCxrKTt0aGlzLmdlbmVyYXRlTWlwbWFwcz0hMTt2YXIgbT10aGlzO2woKX07VEhSRUUuVmlkZW9UZXh0dXJlLnByb3RvdHlwZT1PYmplY3QuY3JlYXRlKFRIUkVFLlRleHR1cmUucHJvdG90eXBlKTtUSFJFRS5WaWRlb1RleHR1cmUucHJvdG90eXBlLmNvbnN0cnVjdG9yPVRIUkVFLlZpZGVvVGV4dHVyZTtUSFJFRS5Hcm91cD1mdW5jdGlvbigpe1RIUkVFLk9iamVjdDNELmNhbGwodGhpcyk7dGhpcy50eXBlPVwiR3JvdXBcIn07VEhSRUUuR3JvdXAucHJvdG90eXBlPU9iamVjdC5hc3NpZ24oT2JqZWN0LmNyZWF0ZShUSFJFRS5PYmplY3QzRC5wcm90b3R5cGUpLHtjb25zdHJ1Y3RvcjpUSFJFRS5Hcm91cH0pO1xuVEhSRUUuUG9pbnRzPWZ1bmN0aW9uKGEsYil7VEhSRUUuT2JqZWN0M0QuY2FsbCh0aGlzKTt0aGlzLnR5cGU9XCJQb2ludHNcIjt0aGlzLmdlb21ldHJ5PXZvaWQgMCE9PWE/YTpuZXcgVEhSRUUuQnVmZmVyR2VvbWV0cnk7dGhpcy5tYXRlcmlhbD12b2lkIDAhPT1iP2I6bmV3IFRIUkVFLlBvaW50c01hdGVyaWFsKHtjb2xvcjoxNjc3NzIxNSpNYXRoLnJhbmRvbSgpfSl9O1xuVEhSRUUuUG9pbnRzLnByb3RvdHlwZT1PYmplY3QuYXNzaWduKE9iamVjdC5jcmVhdGUoVEhSRUUuT2JqZWN0M0QucHJvdG90eXBlKSx7Y29uc3RydWN0b3I6VEhSRUUuUG9pbnRzLHJheWNhc3Q6ZnVuY3Rpb24oKXt2YXIgYT1uZXcgVEhSRUUuTWF0cml4NCxiPW5ldyBUSFJFRS5SYXksYz1uZXcgVEhSRUUuU3BoZXJlO3JldHVybiBmdW5jdGlvbihkLGUpe2Z1bmN0aW9uIGYoYSxjKXt2YXIgZj1iLmRpc3RhbmNlU3FUb1BvaW50KGEpO2lmKGY8bSl7dmFyIGg9Yi5jbG9zZXN0UG9pbnRUb1BvaW50KGEpO2guYXBwbHlNYXRyaXg0KGspO3ZhciBsPWQucmF5Lm9yaWdpbi5kaXN0YW5jZVRvKGgpO2w8ZC5uZWFyfHxsPmQuZmFyfHxlLnB1c2goe2Rpc3RhbmNlOmwsZGlzdGFuY2VUb1JheTpNYXRoLnNxcnQoZikscG9pbnQ6aC5jbG9uZSgpLGluZGV4OmMsZmFjZTpudWxsLG9iamVjdDpnfSl9fXZhciBnPXRoaXMsaD10aGlzLmdlb21ldHJ5LGs9dGhpcy5tYXRyaXhXb3JsZCxsPWQucGFyYW1zLlBvaW50cy50aHJlc2hvbGQ7XG5udWxsPT09aC5ib3VuZGluZ1NwaGVyZSYmaC5jb21wdXRlQm91bmRpbmdTcGhlcmUoKTtjLmNvcHkoaC5ib3VuZGluZ1NwaGVyZSk7Yy5hcHBseU1hdHJpeDQoayk7aWYoITEhPT1kLnJheS5pbnRlcnNlY3RzU3BoZXJlKGMpKXthLmdldEludmVyc2Uoayk7Yi5jb3B5KGQucmF5KS5hcHBseU1hdHJpeDQoYSk7dmFyIGw9bC8oKHRoaXMuc2NhbGUueCt0aGlzLnNjYWxlLnkrdGhpcy5zY2FsZS56KS8zKSxtPWwqbCxsPW5ldyBUSFJFRS5WZWN0b3IzO2lmKGggaW5zdGFuY2VvZiBUSFJFRS5CdWZmZXJHZW9tZXRyeSl7dmFyIHA9aC5pbmRleCxoPWguYXR0cmlidXRlcy5wb3NpdGlvbi5hcnJheTtpZihudWxsIT09cClmb3IodmFyIG49cC5hcnJheSxwPTAscT1uLmxlbmd0aDtwPHE7cCsrKXt2YXIgcj1uW3BdO2wuZnJvbUFycmF5KGgsMypyKTtmKGwscil9ZWxzZSBmb3IocD0wLG49aC5sZW5ndGgvMztwPG47cCsrKWwuZnJvbUFycmF5KGgsMypwKSxmKGwscCl9ZWxzZSBmb3IobD1oLnZlcnRpY2VzLFxucD0wLG49bC5sZW5ndGg7cDxuO3ArKylmKGxbcF0scCl9fX0oKSxjbG9uZTpmdW5jdGlvbigpe3JldHVybihuZXcgdGhpcy5jb25zdHJ1Y3Rvcih0aGlzLmdlb21ldHJ5LHRoaXMubWF0ZXJpYWwpKS5jb3B5KHRoaXMpfX0pO1RIUkVFLkxpbmU9ZnVuY3Rpb24oYSxiLGMpe2lmKDE9PT1jKXJldHVybiBjb25zb2xlLndhcm4oXCJUSFJFRS5MaW5lOiBwYXJhbWV0ZXIgVEhSRUUuTGluZVBpZWNlcyBubyBsb25nZXIgc3VwcG9ydGVkLiBDcmVhdGVkIFRIUkVFLkxpbmVTZWdtZW50cyBpbnN0ZWFkLlwiKSxuZXcgVEhSRUUuTGluZVNlZ21lbnRzKGEsYik7VEhSRUUuT2JqZWN0M0QuY2FsbCh0aGlzKTt0aGlzLnR5cGU9XCJMaW5lXCI7dGhpcy5nZW9tZXRyeT12b2lkIDAhPT1hP2E6bmV3IFRIUkVFLkJ1ZmZlckdlb21ldHJ5O3RoaXMubWF0ZXJpYWw9dm9pZCAwIT09Yj9iOm5ldyBUSFJFRS5MaW5lQmFzaWNNYXRlcmlhbCh7Y29sb3I6MTY3NzcyMTUqTWF0aC5yYW5kb20oKX0pfTtcblRIUkVFLkxpbmUucHJvdG90eXBlPU9iamVjdC5hc3NpZ24oT2JqZWN0LmNyZWF0ZShUSFJFRS5PYmplY3QzRC5wcm90b3R5cGUpLHtjb25zdHJ1Y3RvcjpUSFJFRS5MaW5lLHJheWNhc3Q6ZnVuY3Rpb24oKXt2YXIgYT1uZXcgVEhSRUUuTWF0cml4NCxiPW5ldyBUSFJFRS5SYXksYz1uZXcgVEhSRUUuU3BoZXJlO3JldHVybiBmdW5jdGlvbihkLGUpe3ZhciBmPWQubGluZVByZWNpc2lvbixmPWYqZixnPXRoaXMuZ2VvbWV0cnksaD10aGlzLm1hdHJpeFdvcmxkO251bGw9PT1nLmJvdW5kaW5nU3BoZXJlJiZnLmNvbXB1dGVCb3VuZGluZ1NwaGVyZSgpO2MuY29weShnLmJvdW5kaW5nU3BoZXJlKTtjLmFwcGx5TWF0cml4NChoKTtpZighMSE9PWQucmF5LmludGVyc2VjdHNTcGhlcmUoYykpe2EuZ2V0SW52ZXJzZShoKTtiLmNvcHkoZC5yYXkpLmFwcGx5TWF0cml4NChhKTt2YXIgaz1uZXcgVEhSRUUuVmVjdG9yMyxsPW5ldyBUSFJFRS5WZWN0b3IzLGg9bmV3IFRIUkVFLlZlY3RvcjMsbT1cbm5ldyBUSFJFRS5WZWN0b3IzLHA9dGhpcyBpbnN0YW5jZW9mIFRIUkVFLkxpbmVTZWdtZW50cz8yOjE7aWYoZyBpbnN0YW5jZW9mIFRIUkVFLkJ1ZmZlckdlb21ldHJ5KXt2YXIgbj1nLmluZGV4LHE9Zy5hdHRyaWJ1dGVzLnBvc2l0aW9uLmFycmF5O2lmKG51bGwhPT1uKWZvcih2YXIgbj1uLmFycmF5LGc9MCxyPW4ubGVuZ3RoLTE7ZzxyO2crPXApe3ZhciBzPW5bZysxXTtrLmZyb21BcnJheShxLDMqbltnXSk7bC5mcm9tQXJyYXkocSwzKnMpO3M9Yi5kaXN0YW5jZVNxVG9TZWdtZW50KGssbCxtLGgpO3M+Znx8KG0uYXBwbHlNYXRyaXg0KHRoaXMubWF0cml4V29ybGQpLHM9ZC5yYXkub3JpZ2luLmRpc3RhbmNlVG8obSksczxkLm5lYXJ8fHM+ZC5mYXJ8fGUucHVzaCh7ZGlzdGFuY2U6cyxwb2ludDpoLmNsb25lKCkuYXBwbHlNYXRyaXg0KHRoaXMubWF0cml4V29ybGQpLGluZGV4OmcsZmFjZTpudWxsLGZhY2VJbmRleDpudWxsLG9iamVjdDp0aGlzfSkpfWVsc2UgZm9yKGc9MCxyPVxucS5sZW5ndGgvMy0xO2c8cjtnKz1wKWsuZnJvbUFycmF5KHEsMypnKSxsLmZyb21BcnJheShxLDMqZyszKSxzPWIuZGlzdGFuY2VTcVRvU2VnbWVudChrLGwsbSxoKSxzPmZ8fChtLmFwcGx5TWF0cml4NCh0aGlzLm1hdHJpeFdvcmxkKSxzPWQucmF5Lm9yaWdpbi5kaXN0YW5jZVRvKG0pLHM8ZC5uZWFyfHxzPmQuZmFyfHxlLnB1c2goe2Rpc3RhbmNlOnMscG9pbnQ6aC5jbG9uZSgpLmFwcGx5TWF0cml4NCh0aGlzLm1hdHJpeFdvcmxkKSxpbmRleDpnLGZhY2U6bnVsbCxmYWNlSW5kZXg6bnVsbCxvYmplY3Q6dGhpc30pKX1lbHNlIGlmKGcgaW5zdGFuY2VvZiBUSFJFRS5HZW9tZXRyeSlmb3Ioaz1nLnZlcnRpY2VzLGw9ay5sZW5ndGgsZz0wO2c8bC0xO2crPXApcz1iLmRpc3RhbmNlU3FUb1NlZ21lbnQoa1tnXSxrW2crMV0sbSxoKSxzPmZ8fChtLmFwcGx5TWF0cml4NCh0aGlzLm1hdHJpeFdvcmxkKSxzPWQucmF5Lm9yaWdpbi5kaXN0YW5jZVRvKG0pLHM8ZC5uZWFyfHxzPmQuZmFyfHxcbmUucHVzaCh7ZGlzdGFuY2U6cyxwb2ludDpoLmNsb25lKCkuYXBwbHlNYXRyaXg0KHRoaXMubWF0cml4V29ybGQpLGluZGV4OmcsZmFjZTpudWxsLGZhY2VJbmRleDpudWxsLG9iamVjdDp0aGlzfSkpfX19KCksY2xvbmU6ZnVuY3Rpb24oKXtyZXR1cm4obmV3IHRoaXMuY29uc3RydWN0b3IodGhpcy5nZW9tZXRyeSx0aGlzLm1hdGVyaWFsKSkuY29weSh0aGlzKX19KTtUSFJFRS5MaW5lU2VnbWVudHM9ZnVuY3Rpb24oYSxiKXtUSFJFRS5MaW5lLmNhbGwodGhpcyxhLGIpO3RoaXMudHlwZT1cIkxpbmVTZWdtZW50c1wifTtUSFJFRS5MaW5lU2VnbWVudHMucHJvdG90eXBlPU9iamVjdC5hc3NpZ24oT2JqZWN0LmNyZWF0ZShUSFJFRS5MaW5lLnByb3RvdHlwZSkse2NvbnN0cnVjdG9yOlRIUkVFLkxpbmVTZWdtZW50c30pO1xuVEhSRUUuTWVzaD1mdW5jdGlvbihhLGIpe1RIUkVFLk9iamVjdDNELmNhbGwodGhpcyk7dGhpcy50eXBlPVwiTWVzaFwiO3RoaXMuZ2VvbWV0cnk9dm9pZCAwIT09YT9hOm5ldyBUSFJFRS5CdWZmZXJHZW9tZXRyeTt0aGlzLm1hdGVyaWFsPXZvaWQgMCE9PWI/YjpuZXcgVEhSRUUuTWVzaEJhc2ljTWF0ZXJpYWwoe2NvbG9yOjE2Nzc3MjE1Kk1hdGgucmFuZG9tKCl9KTt0aGlzLmRyYXdNb2RlPVRIUkVFLlRyaWFuZ2xlc0RyYXdNb2RlO3RoaXMudXBkYXRlTW9ycGhUYXJnZXRzKCl9O1xuVEhSRUUuTWVzaC5wcm90b3R5cGU9T2JqZWN0LmFzc2lnbihPYmplY3QuY3JlYXRlKFRIUkVFLk9iamVjdDNELnByb3RvdHlwZSkse2NvbnN0cnVjdG9yOlRIUkVFLk1lc2gsc2V0RHJhd01vZGU6ZnVuY3Rpb24oYSl7dGhpcy5kcmF3TW9kZT1hfSxjb3B5OmZ1bmN0aW9uKGEpe1RIUkVFLk9iamVjdDNELnByb3RvdHlwZS5jb3B5LmNhbGwodGhpcyxhKTt0aGlzLmRyYXdNb2RlPWEuZHJhd01vZGU7cmV0dXJuIHRoaXN9LHVwZGF0ZU1vcnBoVGFyZ2V0czpmdW5jdGlvbigpe2lmKHZvaWQgMCE9PXRoaXMuZ2VvbWV0cnkubW9ycGhUYXJnZXRzJiYwPHRoaXMuZ2VvbWV0cnkubW9ycGhUYXJnZXRzLmxlbmd0aCl7dGhpcy5tb3JwaFRhcmdldEJhc2U9LTE7dGhpcy5tb3JwaFRhcmdldEluZmx1ZW5jZXM9W107dGhpcy5tb3JwaFRhcmdldERpY3Rpb25hcnk9e307Zm9yKHZhciBhPTAsYj10aGlzLmdlb21ldHJ5Lm1vcnBoVGFyZ2V0cy5sZW5ndGg7YTxiO2ErKyl0aGlzLm1vcnBoVGFyZ2V0SW5mbHVlbmNlcy5wdXNoKDApLFxudGhpcy5tb3JwaFRhcmdldERpY3Rpb25hcnlbdGhpcy5nZW9tZXRyeS5tb3JwaFRhcmdldHNbYV0ubmFtZV09YX19LGdldE1vcnBoVGFyZ2V0SW5kZXhCeU5hbWU6ZnVuY3Rpb24oYSl7aWYodm9pZCAwIT09dGhpcy5tb3JwaFRhcmdldERpY3Rpb25hcnlbYV0pcmV0dXJuIHRoaXMubW9ycGhUYXJnZXREaWN0aW9uYXJ5W2FdO2NvbnNvbGUud2FybihcIlRIUkVFLk1lc2guZ2V0TW9ycGhUYXJnZXRJbmRleEJ5TmFtZTogbW9ycGggdGFyZ2V0IFwiK2ErXCIgZG9lcyBub3QgZXhpc3QuIFJldHVybmluZyAwLlwiKTtyZXR1cm4gMH0scmF5Y2FzdDpmdW5jdGlvbigpe2Z1bmN0aW9uIGEoYSxiLGMsZCxlLGcsZil7VEhSRUUuVHJpYW5nbGUuYmFyeWNvb3JkRnJvbVBvaW50KGEsYixjLGQscyk7ZS5tdWx0aXBseVNjYWxhcihzLngpO2cubXVsdGlwbHlTY2FsYXIocy55KTtmLm11bHRpcGx5U2NhbGFyKHMueik7ZS5hZGQoZykuYWRkKGYpO3JldHVybiBlLmNsb25lKCl9ZnVuY3Rpb24gYihhLGIsYyxcbmQsZSxnLGYpe3ZhciBoPWEubWF0ZXJpYWw7aWYobnVsbD09PShoLnNpZGU9PT1USFJFRS5CYWNrU2lkZT9jLmludGVyc2VjdFRyaWFuZ2xlKGcsZSxkLCEwLGYpOmMuaW50ZXJzZWN0VHJpYW5nbGUoZCxlLGcsaC5zaWRlIT09VEhSRUUuRG91YmxlU2lkZSxmKSkpcmV0dXJuIG51bGw7dC5jb3B5KGYpO3QuYXBwbHlNYXRyaXg0KGEubWF0cml4V29ybGQpO2M9Yi5yYXkub3JpZ2luLmRpc3RhbmNlVG8odCk7cmV0dXJuIGM8Yi5uZWFyfHxjPmIuZmFyP251bGw6e2Rpc3RhbmNlOmMscG9pbnQ6dC5jbG9uZSgpLG9iamVjdDphfX1mdW5jdGlvbiBjKGMsZCxlLGYsbCxwLG0scyl7Zy5mcm9tQXJyYXkoZiwzKnApO2guZnJvbUFycmF5KGYsMyptKTtrLmZyb21BcnJheShmLDMqcyk7aWYoYz1iKGMsZCxlLGcsaCxrLHYpKWwmJihuLmZyb21BcnJheShsLDIqcCkscS5mcm9tQXJyYXkobCwyKm0pLHIuZnJvbUFycmF5KGwsMipzKSxjLnV2PWEodixnLGgsayxuLHEscikpLGMuZmFjZT1uZXcgVEhSRUUuRmFjZTMocCxcbm0scyxUSFJFRS5UcmlhbmdsZS5ub3JtYWwoZyxoLGspKSxjLmZhY2VJbmRleD1wO3JldHVybiBjfXZhciBkPW5ldyBUSFJFRS5NYXRyaXg0LGU9bmV3IFRIUkVFLlJheSxmPW5ldyBUSFJFRS5TcGhlcmUsZz1uZXcgVEhSRUUuVmVjdG9yMyxoPW5ldyBUSFJFRS5WZWN0b3IzLGs9bmV3IFRIUkVFLlZlY3RvcjMsbD1uZXcgVEhSRUUuVmVjdG9yMyxtPW5ldyBUSFJFRS5WZWN0b3IzLHA9bmV3IFRIUkVFLlZlY3RvcjMsbj1uZXcgVEhSRUUuVmVjdG9yMixxPW5ldyBUSFJFRS5WZWN0b3IyLHI9bmV3IFRIUkVFLlZlY3RvcjIscz1uZXcgVEhSRUUuVmVjdG9yMyx2PW5ldyBUSFJFRS5WZWN0b3IzLHQ9bmV3IFRIUkVFLlZlY3RvcjM7cmV0dXJuIGZ1bmN0aW9uKHUscyl7dmFyIHc9dGhpcy5nZW9tZXRyeSx0PXRoaXMubWF0ZXJpYWwsej10aGlzLm1hdHJpeFdvcmxkO2lmKHZvaWQgMCE9PXQmJihudWxsPT09dy5ib3VuZGluZ1NwaGVyZSYmdy5jb21wdXRlQm91bmRpbmdTcGhlcmUoKSxmLmNvcHkody5ib3VuZGluZ1NwaGVyZSksXG5mLmFwcGx5TWF0cml4NCh6KSwhMSE9PXUucmF5LmludGVyc2VjdHNTcGhlcmUoZikmJihkLmdldEludmVyc2UoeiksZS5jb3B5KHUucmF5KS5hcHBseU1hdHJpeDQoZCksbnVsbD09PXcuYm91bmRpbmdCb3h8fCExIT09ZS5pbnRlcnNlY3RzQm94KHcuYm91bmRpbmdCb3gpKSkpe3ZhciB5LEE7aWYodyBpbnN0YW5jZW9mIFRIUkVFLkJ1ZmZlckdlb21ldHJ5KXt2YXIgRyxCLHQ9dy5pbmRleCx6PXcuYXR0cmlidXRlcyx3PXoucG9zaXRpb24uYXJyYXk7dm9pZCAwIT09ei51diYmKHk9ei51di5hcnJheSk7aWYobnVsbCE9PXQpZm9yKHZhciB6PXQuYXJyYXksRj0wLEo9ei5sZW5ndGg7RjxKO0YrPTMpe2lmKHQ9eltGXSxHPXpbRisxXSxCPXpbRisyXSxBPWModGhpcyx1LGUsdyx5LHQsRyxCKSlBLmZhY2VJbmRleD1NYXRoLmZsb29yKEYvMykscy5wdXNoKEEpfWVsc2UgZm9yKEY9MCxKPXcubGVuZ3RoO0Y8SjtGKz05KWlmKHQ9Ri8zLEc9dCsxLEI9dCsyLEE9Yyh0aGlzLHUsZSx3LHksXG50LEcsQikpQS5pbmRleD10LHMucHVzaChBKX1lbHNlIGlmKHcgaW5zdGFuY2VvZiBUSFJFRS5HZW9tZXRyeSl7dmFyIFAsSyx6PXQgaW5zdGFuY2VvZiBUSFJFRS5NdWx0aU1hdGVyaWFsLEY9ITA9PT16P3QubWF0ZXJpYWxzOm51bGwsSj13LnZlcnRpY2VzO0c9dy5mYWNlcztCPXcuZmFjZVZlcnRleFV2c1swXTswPEIubGVuZ3RoJiYoeT1CKTtmb3IodmFyIEg9MCxNPUcubGVuZ3RoO0g8TTtIKyspe3ZhciBPPUdbSF07QT0hMD09PXo/RltPLm1hdGVyaWFsSW5kZXhdOnQ7aWYodm9pZCAwIT09QSl7Qj1KW08uYV07UD1KW08uYl07Sz1KW08uY107aWYoITA9PT1BLm1vcnBoVGFyZ2V0cyl7QT13Lm1vcnBoVGFyZ2V0czt2YXIgTj10aGlzLm1vcnBoVGFyZ2V0SW5mbHVlbmNlcztnLnNldCgwLDAsMCk7aC5zZXQoMCwwLDApO2suc2V0KDAsMCwwKTtmb3IodmFyIFE9MCxDPUEubGVuZ3RoO1E8QztRKyspe3ZhciBMPU5bUV07aWYoMCE9PUwpe3ZhciBFPUFbUV0udmVydGljZXM7Zy5hZGRTY2FsZWRWZWN0b3IobC5zdWJWZWN0b3JzKEVbTy5hXSxcbkIpLEwpO2guYWRkU2NhbGVkVmVjdG9yKG0uc3ViVmVjdG9ycyhFW08uYl0sUCksTCk7ay5hZGRTY2FsZWRWZWN0b3IocC5zdWJWZWN0b3JzKEVbTy5jXSxLKSxMKX19Zy5hZGQoQik7aC5hZGQoUCk7ay5hZGQoSyk7Qj1nO1A9aDtLPWt9aWYoQT1iKHRoaXMsdSxlLEIsUCxLLHYpKXkmJihOPXlbSF0sbi5jb3B5KE5bMF0pLHEuY29weShOWzFdKSxyLmNvcHkoTlsyXSksQS51dj1hKHYsQixQLEssbixxLHIpKSxBLmZhY2U9TyxBLmZhY2VJbmRleD1ILHMucHVzaChBKX19fX19fSgpLGNsb25lOmZ1bmN0aW9uKCl7cmV0dXJuKG5ldyB0aGlzLmNvbnN0cnVjdG9yKHRoaXMuZ2VvbWV0cnksdGhpcy5tYXRlcmlhbCkpLmNvcHkodGhpcyl9fSk7VEhSRUUuQm9uZT1mdW5jdGlvbihhKXtUSFJFRS5PYmplY3QzRC5jYWxsKHRoaXMpO3RoaXMudHlwZT1cIkJvbmVcIjt0aGlzLnNraW49YX07XG5USFJFRS5Cb25lLnByb3RvdHlwZT1PYmplY3QuYXNzaWduKE9iamVjdC5jcmVhdGUoVEhSRUUuT2JqZWN0M0QucHJvdG90eXBlKSx7Y29uc3RydWN0b3I6VEhSRUUuQm9uZSxjb3B5OmZ1bmN0aW9uKGEpe1RIUkVFLk9iamVjdDNELnByb3RvdHlwZS5jb3B5LmNhbGwodGhpcyxhKTt0aGlzLnNraW49YS5za2luO3JldHVybiB0aGlzfX0pO1xuVEhSRUUuU2tlbGV0b249ZnVuY3Rpb24oYSxiLGMpe3RoaXMudXNlVmVydGV4VGV4dHVyZT12b2lkIDAhPT1jP2M6ITA7dGhpcy5pZGVudGl0eU1hdHJpeD1uZXcgVEhSRUUuTWF0cml4NDthPWF8fFtdO3RoaXMuYm9uZXM9YS5zbGljZSgwKTt0aGlzLnVzZVZlcnRleFRleHR1cmU/KGE9TWF0aC5zcXJ0KDQqdGhpcy5ib25lcy5sZW5ndGgpLGE9VEhSRUUuTWF0aC5uZXh0UG93ZXJPZlR3byhNYXRoLmNlaWwoYSkpLHRoaXMuYm9uZVRleHR1cmVIZWlnaHQ9dGhpcy5ib25lVGV4dHVyZVdpZHRoPWE9TWF0aC5tYXgoYSw0KSx0aGlzLmJvbmVNYXRyaWNlcz1uZXcgRmxvYXQzMkFycmF5KHRoaXMuYm9uZVRleHR1cmVXaWR0aCp0aGlzLmJvbmVUZXh0dXJlSGVpZ2h0KjQpLHRoaXMuYm9uZVRleHR1cmU9bmV3IFRIUkVFLkRhdGFUZXh0dXJlKHRoaXMuYm9uZU1hdHJpY2VzLHRoaXMuYm9uZVRleHR1cmVXaWR0aCx0aGlzLmJvbmVUZXh0dXJlSGVpZ2h0LFRIUkVFLlJHQkFGb3JtYXQsVEhSRUUuRmxvYXRUeXBlKSk6XG50aGlzLmJvbmVNYXRyaWNlcz1uZXcgRmxvYXQzMkFycmF5KDE2KnRoaXMuYm9uZXMubGVuZ3RoKTtpZih2b2lkIDA9PT1iKXRoaXMuY2FsY3VsYXRlSW52ZXJzZXMoKTtlbHNlIGlmKHRoaXMuYm9uZXMubGVuZ3RoPT09Yi5sZW5ndGgpdGhpcy5ib25lSW52ZXJzZXM9Yi5zbGljZSgwKTtlbHNlIGZvcihjb25zb2xlLndhcm4oXCJUSFJFRS5Ta2VsZXRvbiBib25JbnZlcnNlcyBpcyB0aGUgd3JvbmcgbGVuZ3RoLlwiKSx0aGlzLmJvbmVJbnZlcnNlcz1bXSxiPTAsYT10aGlzLmJvbmVzLmxlbmd0aDtiPGE7YisrKXRoaXMuYm9uZUludmVyc2VzLnB1c2gobmV3IFRIUkVFLk1hdHJpeDQpfTtcbk9iamVjdC5hc3NpZ24oVEhSRUUuU2tlbGV0b24ucHJvdG90eXBlLHtjYWxjdWxhdGVJbnZlcnNlczpmdW5jdGlvbigpe3RoaXMuYm9uZUludmVyc2VzPVtdO2Zvcih2YXIgYT0wLGI9dGhpcy5ib25lcy5sZW5ndGg7YTxiO2ErKyl7dmFyIGM9bmV3IFRIUkVFLk1hdHJpeDQ7dGhpcy5ib25lc1thXSYmYy5nZXRJbnZlcnNlKHRoaXMuYm9uZXNbYV0ubWF0cml4V29ybGQpO3RoaXMuYm9uZUludmVyc2VzLnB1c2goYyl9fSxwb3NlOmZ1bmN0aW9uKCl7Zm9yKHZhciBhLGI9MCxjPXRoaXMuYm9uZXMubGVuZ3RoO2I8YztiKyspKGE9dGhpcy5ib25lc1tiXSkmJmEubWF0cml4V29ybGQuZ2V0SW52ZXJzZSh0aGlzLmJvbmVJbnZlcnNlc1tiXSk7Yj0wO2ZvcihjPXRoaXMuYm9uZXMubGVuZ3RoO2I8YztiKyspaWYoYT10aGlzLmJvbmVzW2JdKWEucGFyZW50IGluc3RhbmNlb2YgVEhSRUUuQm9uZT8oYS5tYXRyaXguZ2V0SW52ZXJzZShhLnBhcmVudC5tYXRyaXhXb3JsZCksYS5tYXRyaXgubXVsdGlwbHkoYS5tYXRyaXhXb3JsZCkpOlxuYS5tYXRyaXguY29weShhLm1hdHJpeFdvcmxkKSxhLm1hdHJpeC5kZWNvbXBvc2UoYS5wb3NpdGlvbixhLnF1YXRlcm5pb24sYS5zY2FsZSl9LHVwZGF0ZTpmdW5jdGlvbigpe3ZhciBhPW5ldyBUSFJFRS5NYXRyaXg0O3JldHVybiBmdW5jdGlvbigpe2Zvcih2YXIgYj0wLGM9dGhpcy5ib25lcy5sZW5ndGg7YjxjO2IrKylhLm11bHRpcGx5TWF0cmljZXModGhpcy5ib25lc1tiXT90aGlzLmJvbmVzW2JdLm1hdHJpeFdvcmxkOnRoaXMuaWRlbnRpdHlNYXRyaXgsdGhpcy5ib25lSW52ZXJzZXNbYl0pLGEudG9BcnJheSh0aGlzLmJvbmVNYXRyaWNlcywxNipiKTt0aGlzLnVzZVZlcnRleFRleHR1cmUmJih0aGlzLmJvbmVUZXh0dXJlLm5lZWRzVXBkYXRlPSEwKX19KCksY2xvbmU6ZnVuY3Rpb24oKXtyZXR1cm4gbmV3IFRIUkVFLlNrZWxldG9uKHRoaXMuYm9uZXMsdGhpcy5ib25lSW52ZXJzZXMsdGhpcy51c2VWZXJ0ZXhUZXh0dXJlKX19KTtcblRIUkVFLlNraW5uZWRNZXNoPWZ1bmN0aW9uKGEsYixjKXtUSFJFRS5NZXNoLmNhbGwodGhpcyxhLGIpO3RoaXMudHlwZT1cIlNraW5uZWRNZXNoXCI7dGhpcy5iaW5kTW9kZT1cImF0dGFjaGVkXCI7dGhpcy5iaW5kTWF0cml4PW5ldyBUSFJFRS5NYXRyaXg0O3RoaXMuYmluZE1hdHJpeEludmVyc2U9bmV3IFRIUkVFLk1hdHJpeDQ7YT1bXTtpZih0aGlzLmdlb21ldHJ5JiZ2b2lkIDAhPT10aGlzLmdlb21ldHJ5LmJvbmVzKXtmb3IodmFyIGQsZT0wLGY9dGhpcy5nZW9tZXRyeS5ib25lcy5sZW5ndGg7ZTxmOysrZSlkPXRoaXMuZ2VvbWV0cnkuYm9uZXNbZV0sYj1uZXcgVEhSRUUuQm9uZSh0aGlzKSxhLnB1c2goYiksYi5uYW1lPWQubmFtZSxiLnBvc2l0aW9uLmZyb21BcnJheShkLnBvcyksYi5xdWF0ZXJuaW9uLmZyb21BcnJheShkLnJvdHEpLHZvaWQgMCE9PWQuc2NsJiZiLnNjYWxlLmZyb21BcnJheShkLnNjbCk7ZT0wO2ZvcihmPXRoaXMuZ2VvbWV0cnkuYm9uZXMubGVuZ3RoO2U8ZjsrK2UpZD1cbnRoaXMuZ2VvbWV0cnkuYm9uZXNbZV0sLTEhPT1kLnBhcmVudCYmbnVsbCE9PWQucGFyZW50JiZ2b2lkIDAhPT1hW2QucGFyZW50XT9hW2QucGFyZW50XS5hZGQoYVtlXSk6dGhpcy5hZGQoYVtlXSl9dGhpcy5ub3JtYWxpemVTa2luV2VpZ2h0cygpO3RoaXMudXBkYXRlTWF0cml4V29ybGQoITApO3RoaXMuYmluZChuZXcgVEhSRUUuU2tlbGV0b24oYSx2b2lkIDAsYyksdGhpcy5tYXRyaXhXb3JsZCl9O1xuVEhSRUUuU2tpbm5lZE1lc2gucHJvdG90eXBlPU9iamVjdC5hc3NpZ24oT2JqZWN0LmNyZWF0ZShUSFJFRS5NZXNoLnByb3RvdHlwZSkse2NvbnN0cnVjdG9yOlRIUkVFLlNraW5uZWRNZXNoLGJpbmQ6ZnVuY3Rpb24oYSxiKXt0aGlzLnNrZWxldG9uPWE7dm9pZCAwPT09YiYmKHRoaXMudXBkYXRlTWF0cml4V29ybGQoITApLHRoaXMuc2tlbGV0b24uY2FsY3VsYXRlSW52ZXJzZXMoKSxiPXRoaXMubWF0cml4V29ybGQpO3RoaXMuYmluZE1hdHJpeC5jb3B5KGIpO3RoaXMuYmluZE1hdHJpeEludmVyc2UuZ2V0SW52ZXJzZShiKX0scG9zZTpmdW5jdGlvbigpe3RoaXMuc2tlbGV0b24ucG9zZSgpfSxub3JtYWxpemVTa2luV2VpZ2h0czpmdW5jdGlvbigpe2lmKHRoaXMuZ2VvbWV0cnkgaW5zdGFuY2VvZiBUSFJFRS5HZW9tZXRyeSlmb3IodmFyIGE9MDthPHRoaXMuZ2VvbWV0cnkuc2tpbldlaWdodHMubGVuZ3RoO2ErKyl7dmFyIGI9dGhpcy5nZW9tZXRyeS5za2luV2VpZ2h0c1thXSxjPVxuMS9iLmxlbmd0aE1hbmhhdHRhbigpO0luZmluaXR5IT09Yz9iLm11bHRpcGx5U2NhbGFyKGMpOmIuc2V0KDEsMCwwLDApfWVsc2UgaWYodGhpcy5nZW9tZXRyeSBpbnN0YW5jZW9mIFRIUkVFLkJ1ZmZlckdlb21ldHJ5KWZvcih2YXIgYj1uZXcgVEhSRUUuVmVjdG9yNCxkPXRoaXMuZ2VvbWV0cnkuYXR0cmlidXRlcy5za2luV2VpZ2h0LGE9MDthPGQuY291bnQ7YSsrKWIueD1kLmdldFgoYSksYi55PWQuZ2V0WShhKSxiLno9ZC5nZXRaKGEpLGIudz1kLmdldFcoYSksYz0xL2IubGVuZ3RoTWFuaGF0dGFuKCksSW5maW5pdHkhPT1jP2IubXVsdGlwbHlTY2FsYXIoYyk6Yi5zZXQoMSwwLDAsMCksZC5zZXRYWVpXKGEsYi54LGIueSxiLnosYi53KX0sdXBkYXRlTWF0cml4V29ybGQ6ZnVuY3Rpb24oYSl7VEhSRUUuTWVzaC5wcm90b3R5cGUudXBkYXRlTWF0cml4V29ybGQuY2FsbCh0aGlzLCEwKTtcImF0dGFjaGVkXCI9PT10aGlzLmJpbmRNb2RlP3RoaXMuYmluZE1hdHJpeEludmVyc2UuZ2V0SW52ZXJzZSh0aGlzLm1hdHJpeFdvcmxkKTpcblwiZGV0YWNoZWRcIj09PXRoaXMuYmluZE1vZGU/dGhpcy5iaW5kTWF0cml4SW52ZXJzZS5nZXRJbnZlcnNlKHRoaXMuYmluZE1hdHJpeCk6Y29uc29sZS53YXJuKFwiVEhSRUUuU2tpbm5lZE1lc2ggdW5yZWNvZ25pemVkIGJpbmRNb2RlOiBcIit0aGlzLmJpbmRNb2RlKX0sY2xvbmU6ZnVuY3Rpb24oKXtyZXR1cm4obmV3IHRoaXMuY29uc3RydWN0b3IodGhpcy5nZW9tZXRyeSx0aGlzLm1hdGVyaWFsLHRoaXMuc2tlbGV0b24udXNlVmVydGV4VGV4dHVyZSkpLmNvcHkodGhpcyl9fSk7VEhSRUUuTE9EPWZ1bmN0aW9uKCl7VEhSRUUuT2JqZWN0M0QuY2FsbCh0aGlzKTt0aGlzLnR5cGU9XCJMT0RcIjtPYmplY3QuZGVmaW5lUHJvcGVydGllcyh0aGlzLHtsZXZlbHM6e2VudW1lcmFibGU6ITAsdmFsdWU6W119fSl9O1xuVEhSRUUuTE9ELnByb3RvdHlwZT1PYmplY3QuYXNzaWduKE9iamVjdC5jcmVhdGUoVEhSRUUuT2JqZWN0M0QucHJvdG90eXBlKSx7Y29uc3RydWN0b3I6VEhSRUUuTE9ELGNvcHk6ZnVuY3Rpb24oYSl7VEhSRUUuT2JqZWN0M0QucHJvdG90eXBlLmNvcHkuY2FsbCh0aGlzLGEsITEpO2E9YS5sZXZlbHM7Zm9yKHZhciBiPTAsYz1hLmxlbmd0aDtiPGM7YisrKXt2YXIgZD1hW2JdO3RoaXMuYWRkTGV2ZWwoZC5vYmplY3QuY2xvbmUoKSxkLmRpc3RhbmNlKX1yZXR1cm4gdGhpc30sYWRkTGV2ZWw6ZnVuY3Rpb24oYSxiKXt2b2lkIDA9PT1iJiYoYj0wKTtiPU1hdGguYWJzKGIpO2Zvcih2YXIgYz10aGlzLmxldmVscyxkPTA7ZDxjLmxlbmd0aCYmIShiPGNbZF0uZGlzdGFuY2UpO2QrKyk7Yy5zcGxpY2UoZCwwLHtkaXN0YW5jZTpiLG9iamVjdDphfSk7dGhpcy5hZGQoYSl9LGdldE9iamVjdEZvckRpc3RhbmNlOmZ1bmN0aW9uKGEpe2Zvcih2YXIgYj10aGlzLmxldmVscyxjPTEsZD1iLmxlbmd0aDtjPFxuZCYmIShhPGJbY10uZGlzdGFuY2UpO2MrKyk7cmV0dXJuIGJbYy0xXS5vYmplY3R9LHJheWNhc3Q6ZnVuY3Rpb24oKXt2YXIgYT1uZXcgVEhSRUUuVmVjdG9yMztyZXR1cm4gZnVuY3Rpb24oYixjKXthLnNldEZyb21NYXRyaXhQb3NpdGlvbih0aGlzLm1hdHJpeFdvcmxkKTt2YXIgZD1iLnJheS5vcmlnaW4uZGlzdGFuY2VUbyhhKTt0aGlzLmdldE9iamVjdEZvckRpc3RhbmNlKGQpLnJheWNhc3QoYixjKX19KCksdXBkYXRlOmZ1bmN0aW9uKCl7dmFyIGE9bmV3IFRIUkVFLlZlY3RvcjMsYj1uZXcgVEhSRUUuVmVjdG9yMztyZXR1cm4gZnVuY3Rpb24oYyl7dmFyIGQ9dGhpcy5sZXZlbHM7aWYoMTxkLmxlbmd0aCl7YS5zZXRGcm9tTWF0cml4UG9zaXRpb24oYy5tYXRyaXhXb3JsZCk7Yi5zZXRGcm9tTWF0cml4UG9zaXRpb24odGhpcy5tYXRyaXhXb3JsZCk7Yz1hLmRpc3RhbmNlVG8oYik7ZFswXS5vYmplY3QudmlzaWJsZT0hMDtmb3IodmFyIGU9MSxmPWQubGVuZ3RoO2U8ZjtlKyspaWYoYz49XG5kW2VdLmRpc3RhbmNlKWRbZS0xXS5vYmplY3QudmlzaWJsZT0hMSxkW2VdLm9iamVjdC52aXNpYmxlPSEwO2Vsc2UgYnJlYWs7Zm9yKDtlPGY7ZSsrKWRbZV0ub2JqZWN0LnZpc2libGU9ITF9fX0oKSx0b0pTT046ZnVuY3Rpb24oYSl7YT1USFJFRS5PYmplY3QzRC5wcm90b3R5cGUudG9KU09OLmNhbGwodGhpcyxhKTthLm9iamVjdC5sZXZlbHM9W107Zm9yKHZhciBiPXRoaXMubGV2ZWxzLGM9MCxkPWIubGVuZ3RoO2M8ZDtjKyspe3ZhciBlPWJbY107YS5vYmplY3QubGV2ZWxzLnB1c2goe29iamVjdDplLm9iamVjdC51dWlkLGRpc3RhbmNlOmUuZGlzdGFuY2V9KX1yZXR1cm4gYX19KTtUSFJFRS5TcHJpdGU9ZnVuY3Rpb24oYSl7VEhSRUUuT2JqZWN0M0QuY2FsbCh0aGlzKTt0aGlzLnR5cGU9XCJTcHJpdGVcIjt0aGlzLm1hdGVyaWFsPXZvaWQgMCE9PWE/YTpuZXcgVEhSRUUuU3ByaXRlTWF0ZXJpYWx9O1xuVEhSRUUuU3ByaXRlLnByb3RvdHlwZT1PYmplY3QuYXNzaWduKE9iamVjdC5jcmVhdGUoVEhSRUUuT2JqZWN0M0QucHJvdG90eXBlKSx7Y29uc3RydWN0b3I6VEhSRUUuU3ByaXRlLHJheWNhc3Q6ZnVuY3Rpb24oKXt2YXIgYT1uZXcgVEhSRUUuVmVjdG9yMztyZXR1cm4gZnVuY3Rpb24oYixjKXthLnNldEZyb21NYXRyaXhQb3NpdGlvbih0aGlzLm1hdHJpeFdvcmxkKTt2YXIgZD1iLnJheS5kaXN0YW5jZVNxVG9Qb2ludChhKTtkPnRoaXMuc2NhbGUueCp0aGlzLnNjYWxlLnkvNHx8Yy5wdXNoKHtkaXN0YW5jZTpNYXRoLnNxcnQoZCkscG9pbnQ6dGhpcy5wb3NpdGlvbixmYWNlOm51bGwsb2JqZWN0OnRoaXN9KX19KCksY2xvbmU6ZnVuY3Rpb24oKXtyZXR1cm4obmV3IHRoaXMuY29uc3RydWN0b3IodGhpcy5tYXRlcmlhbCkpLmNvcHkodGhpcyl9fSk7XG5USFJFRS5MZW5zRmxhcmU9ZnVuY3Rpb24oYSxiLGMsZCxlKXtUSFJFRS5PYmplY3QzRC5jYWxsKHRoaXMpO3RoaXMubGVuc0ZsYXJlcz1bXTt0aGlzLnBvc2l0aW9uU2NyZWVuPW5ldyBUSFJFRS5WZWN0b3IzO3RoaXMuY3VzdG9tVXBkYXRlQ2FsbGJhY2s9dm9pZCAwO3ZvaWQgMCE9PWEmJnRoaXMuYWRkKGEsYixjLGQsZSl9O1xuVEhSRUUuTGVuc0ZsYXJlLnByb3RvdHlwZT1PYmplY3QuYXNzaWduKE9iamVjdC5jcmVhdGUoVEhSRUUuT2JqZWN0M0QucHJvdG90eXBlKSx7Y29uc3RydWN0b3I6VEhSRUUuTGVuc0ZsYXJlLGNvcHk6ZnVuY3Rpb24oYSl7VEhSRUUuT2JqZWN0M0QucHJvdG90eXBlLmNvcHkuY2FsbCh0aGlzLGEpO3RoaXMucG9zaXRpb25TY3JlZW4uY29weShhLnBvc2l0aW9uU2NyZWVuKTt0aGlzLmN1c3RvbVVwZGF0ZUNhbGxiYWNrPWEuY3VzdG9tVXBkYXRlQ2FsbGJhY2s7Zm9yKHZhciBiPTAsYz1hLmxlbnNGbGFyZXMubGVuZ3RoO2I8YztiKyspdGhpcy5sZW5zRmxhcmVzLnB1c2goYS5sZW5zRmxhcmVzW2JdKTtyZXR1cm4gdGhpc30sYWRkOmZ1bmN0aW9uKGEsYixjLGQsZSxmKXt2b2lkIDA9PT1iJiYoYj0tMSk7dm9pZCAwPT09YyYmKGM9MCk7dm9pZCAwPT09ZiYmKGY9MSk7dm9pZCAwPT09ZSYmKGU9bmV3IFRIUkVFLkNvbG9yKDE2Nzc3MjE1KSk7dm9pZCAwPT09ZCYmKGQ9VEhSRUUuTm9ybWFsQmxlbmRpbmcpO1xuYz1NYXRoLm1pbihjLE1hdGgubWF4KDAsYykpO3RoaXMubGVuc0ZsYXJlcy5wdXNoKHt0ZXh0dXJlOmEsc2l6ZTpiLGRpc3RhbmNlOmMseDowLHk6MCx6OjAsc2NhbGU6MSxyb3RhdGlvbjowLG9wYWNpdHk6Zixjb2xvcjplLGJsZW5kaW5nOmR9KX0sdXBkYXRlTGVuc0ZsYXJlczpmdW5jdGlvbigpe3ZhciBhLGI9dGhpcy5sZW5zRmxhcmVzLmxlbmd0aCxjLGQ9MiotdGhpcy5wb3NpdGlvblNjcmVlbi54LGU9MiotdGhpcy5wb3NpdGlvblNjcmVlbi55O2ZvcihhPTA7YTxiO2ErKyljPXRoaXMubGVuc0ZsYXJlc1thXSxjLng9dGhpcy5wb3NpdGlvblNjcmVlbi54K2QqYy5kaXN0YW5jZSxjLnk9dGhpcy5wb3NpdGlvblNjcmVlbi55K2UqYy5kaXN0YW5jZSxjLndhbnRlZFJvdGF0aW9uPWMueCpNYXRoLlBJKi4yNSxjLnJvdGF0aW9uKz0uMjUqKGMud2FudGVkUm90YXRpb24tYy5yb3RhdGlvbil9fSk7XG5USFJFRS5TY2VuZT1mdW5jdGlvbigpe1RIUkVFLk9iamVjdDNELmNhbGwodGhpcyk7dGhpcy50eXBlPVwiU2NlbmVcIjt0aGlzLm92ZXJyaWRlTWF0ZXJpYWw9dGhpcy5mb2c9dGhpcy5iYWNrZ3JvdW5kPW51bGw7dGhpcy5hdXRvVXBkYXRlPSEwfTtUSFJFRS5TY2VuZS5wcm90b3R5cGU9T2JqZWN0LmNyZWF0ZShUSFJFRS5PYmplY3QzRC5wcm90b3R5cGUpO1RIUkVFLlNjZW5lLnByb3RvdHlwZS5jb25zdHJ1Y3Rvcj1USFJFRS5TY2VuZTtcblRIUkVFLlNjZW5lLnByb3RvdHlwZS5jb3B5PWZ1bmN0aW9uKGEsYil7VEhSRUUuT2JqZWN0M0QucHJvdG90eXBlLmNvcHkuY2FsbCh0aGlzLGEsYik7bnVsbCE9PWEuYmFja2dyb3VuZCYmKHRoaXMuYmFja2dyb3VuZD1hLmJhY2tncm91bmQuY2xvbmUoKSk7bnVsbCE9PWEuZm9nJiYodGhpcy5mb2c9YS5mb2cuY2xvbmUoKSk7bnVsbCE9PWEub3ZlcnJpZGVNYXRlcmlhbCYmKHRoaXMub3ZlcnJpZGVNYXRlcmlhbD1hLm92ZXJyaWRlTWF0ZXJpYWwuY2xvbmUoKSk7dGhpcy5hdXRvVXBkYXRlPWEuYXV0b1VwZGF0ZTt0aGlzLm1hdHJpeEF1dG9VcGRhdGU9YS5tYXRyaXhBdXRvVXBkYXRlO3JldHVybiB0aGlzfTtUSFJFRS5Gb2c9ZnVuY3Rpb24oYSxiLGMpe3RoaXMubmFtZT1cIlwiO3RoaXMuY29sb3I9bmV3IFRIUkVFLkNvbG9yKGEpO3RoaXMubmVhcj12b2lkIDAhPT1iP2I6MTt0aGlzLmZhcj12b2lkIDAhPT1jP2M6MUUzfTtcblRIUkVFLkZvZy5wcm90b3R5cGUuY2xvbmU9ZnVuY3Rpb24oKXtyZXR1cm4gbmV3IFRIUkVFLkZvZyh0aGlzLmNvbG9yLmdldEhleCgpLHRoaXMubmVhcix0aGlzLmZhcil9O1RIUkVFLkZvZ0V4cDI9ZnVuY3Rpb24oYSxiKXt0aGlzLm5hbWU9XCJcIjt0aGlzLmNvbG9yPW5ldyBUSFJFRS5Db2xvcihhKTt0aGlzLmRlbnNpdHk9dm9pZCAwIT09Yj9iOjIuNUUtNH07VEhSRUUuRm9nRXhwMi5wcm90b3R5cGUuY2xvbmU9ZnVuY3Rpb24oKXtyZXR1cm4gbmV3IFRIUkVFLkZvZ0V4cDIodGhpcy5jb2xvci5nZXRIZXgoKSx0aGlzLmRlbnNpdHkpfTtUSFJFRS5TaGFkZXJDaHVuaz17fTtUSFJFRS5TaGFkZXJDaHVuay5hbHBoYW1hcF9mcmFnbWVudD1cIiNpZmRlZiBVU0VfQUxQSEFNQVBcXG5cXHRkaWZmdXNlQ29sb3IuYSAqPSB0ZXh0dXJlMkQoIGFscGhhTWFwLCB2VXYgKS5nO1xcbiNlbmRpZlxcblwiO1RIUkVFLlNoYWRlckNodW5rLmFscGhhbWFwX3BhcnNfZnJhZ21lbnQ9XCIjaWZkZWYgVVNFX0FMUEhBTUFQXFxuXFx0dW5pZm9ybSBzYW1wbGVyMkQgYWxwaGFNYXA7XFxuI2VuZGlmXFxuXCI7XG5USFJFRS5TaGFkZXJDaHVuay5hbHBoYXRlc3RfZnJhZ21lbnQ9XCIjaWZkZWYgQUxQSEFURVNUXFxuXFx0aWYgKCBkaWZmdXNlQ29sb3IuYSA8IEFMUEhBVEVTVCApIGRpc2NhcmQ7XFxuI2VuZGlmXFxuXCI7VEhSRUUuU2hhZGVyQ2h1bmsuYW9tYXBfZnJhZ21lbnQ9XCIjaWZkZWYgVVNFX0FPTUFQXFxuXFx0ZmxvYXQgYW1iaWVudE9jY2x1c2lvbiA9ICggdGV4dHVyZTJEKCBhb01hcCwgdlV2MiApLnIgLSAxLjAgKSAqIGFvTWFwSW50ZW5zaXR5ICsgMS4wO1xcblxcdHJlZmxlY3RlZExpZ2h0LmluZGlyZWN0RGlmZnVzZSAqPSBhbWJpZW50T2NjbHVzaW9uO1xcblxcdCNpZiBkZWZpbmVkKCBVU0VfRU5WTUFQICkgJiYgZGVmaW5lZCggUEhZU0lDQUwgKVxcblxcdFxcdGZsb2F0IGRvdE5WID0gc2F0dXJhdGUoIGRvdCggZ2VvbWV0cnkubm9ybWFsLCBnZW9tZXRyeS52aWV3RGlyICkgKTtcXG5cXHRcXHRyZWZsZWN0ZWRMaWdodC5pbmRpcmVjdFNwZWN1bGFyICo9IGNvbXB1dGVTcGVjdWxhck9jY2x1c2lvbiggZG90TlYsIGFtYmllbnRPY2NsdXNpb24sIG1hdGVyaWFsLnNwZWN1bGFyUm91Z2huZXNzICk7XFxuXFx0I2VuZGlmXFxuI2VuZGlmXFxuXCI7XG5USFJFRS5TaGFkZXJDaHVuay5hb21hcF9wYXJzX2ZyYWdtZW50PVwiI2lmZGVmIFVTRV9BT01BUFxcblxcdHVuaWZvcm0gc2FtcGxlcjJEIGFvTWFwO1xcblxcdHVuaWZvcm0gZmxvYXQgYW9NYXBJbnRlbnNpdHk7XFxuI2VuZGlmXCI7VEhSRUUuU2hhZGVyQ2h1bmsuYmVnaW5fdmVydGV4PVwiXFxudmVjMyB0cmFuc2Zvcm1lZCA9IHZlYzMoIHBvc2l0aW9uICk7XFxuXCI7VEhSRUUuU2hhZGVyQ2h1bmsuYmVnaW5ub3JtYWxfdmVydGV4PVwiXFxudmVjMyBvYmplY3ROb3JtYWwgPSB2ZWMzKCBub3JtYWwgKTtcXG5cIjtUSFJFRS5TaGFkZXJDaHVuay5ic2Rmcz1cImJvb2wgdGVzdExpZ2h0SW5SYW5nZSggY29uc3QgaW4gZmxvYXQgbGlnaHREaXN0YW5jZSwgY29uc3QgaW4gZmxvYXQgY3V0b2ZmRGlzdGFuY2UgKSB7XFxuXFx0cmV0dXJuIGFueSggYnZlYzIoIGN1dG9mZkRpc3RhbmNlID09IDAuMCwgbGlnaHREaXN0YW5jZSA8IGN1dG9mZkRpc3RhbmNlICkgKTtcXG59XFxuZmxvYXQgcHVuY3R1YWxMaWdodEludGVuc2l0eVRvSXJyYWRpYW5jZUZhY3RvciggY29uc3QgaW4gZmxvYXQgbGlnaHREaXN0YW5jZSwgY29uc3QgaW4gZmxvYXQgY3V0b2ZmRGlzdGFuY2UsIGNvbnN0IGluIGZsb2F0IGRlY2F5RXhwb25lbnQgKSB7XFxuXFx0XFx0aWYoIGRlY2F5RXhwb25lbnQgPiAwLjAgKSB7XFxuI2lmIGRlZmluZWQgKCBQSFlTSUNBTExZX0NPUlJFQ1RfTElHSFRTIClcXG5cXHRcXHRcXHRmbG9hdCBkaXN0YW5jZUZhbGxvZmYgPSAxLjAgLyBtYXgoIHBvdyggbGlnaHREaXN0YW5jZSwgZGVjYXlFeHBvbmVudCApLCAwLjAxICk7XFxuXFx0XFx0XFx0ZmxvYXQgbWF4RGlzdGFuY2VDdXRvZmZGYWN0b3IgPSBwb3cyKCBzYXR1cmF0ZSggMS4wIC0gcG93NCggbGlnaHREaXN0YW5jZSAvIGN1dG9mZkRpc3RhbmNlICkgKSApO1xcblxcdFxcdFxcdHJldHVybiBkaXN0YW5jZUZhbGxvZmYgKiBtYXhEaXN0YW5jZUN1dG9mZkZhY3RvcjtcXG4jZWxzZVxcblxcdFxcdFxcdHJldHVybiBwb3coIHNhdHVyYXRlKCAtbGlnaHREaXN0YW5jZSAvIGN1dG9mZkRpc3RhbmNlICsgMS4wICksIGRlY2F5RXhwb25lbnQgKTtcXG4jZW5kaWZcXG5cXHRcXHR9XFxuXFx0XFx0cmV0dXJuIDEuMDtcXG59XFxudmVjMyBCUkRGX0RpZmZ1c2VfTGFtYmVydCggY29uc3QgaW4gdmVjMyBkaWZmdXNlQ29sb3IgKSB7XFxuXFx0cmV0dXJuIFJFQ0lQUk9DQUxfUEkgKiBkaWZmdXNlQ29sb3I7XFxufVxcbnZlYzMgRl9TY2hsaWNrKCBjb25zdCBpbiB2ZWMzIHNwZWN1bGFyQ29sb3IsIGNvbnN0IGluIGZsb2F0IGRvdExIICkge1xcblxcdGZsb2F0IGZyZXNuZWwgPSBleHAyKCAoIC01LjU1NDczICogZG90TEggLSA2Ljk4MzE2ICkgKiBkb3RMSCApO1xcblxcdHJldHVybiAoIDEuMCAtIHNwZWN1bGFyQ29sb3IgKSAqIGZyZXNuZWwgKyBzcGVjdWxhckNvbG9yO1xcbn1cXG5mbG9hdCBHX0dHWF9TbWl0aCggY29uc3QgaW4gZmxvYXQgYWxwaGEsIGNvbnN0IGluIGZsb2F0IGRvdE5MLCBjb25zdCBpbiBmbG9hdCBkb3ROViApIHtcXG5cXHRmbG9hdCBhMiA9IHBvdzIoIGFscGhhICk7XFxuXFx0ZmxvYXQgZ2wgPSBkb3ROTCArIHNxcnQoIGEyICsgKCAxLjAgLSBhMiApICogcG93MiggZG90TkwgKSApO1xcblxcdGZsb2F0IGd2ID0gZG90TlYgKyBzcXJ0KCBhMiArICggMS4wIC0gYTIgKSAqIHBvdzIoIGRvdE5WICkgKTtcXG5cXHRyZXR1cm4gMS4wIC8gKCBnbCAqIGd2ICk7XFxufVxcbmZsb2F0IEdfR0dYX1NtaXRoQ29ycmVsYXRlZCggY29uc3QgaW4gZmxvYXQgYWxwaGEsIGNvbnN0IGluIGZsb2F0IGRvdE5MLCBjb25zdCBpbiBmbG9hdCBkb3ROViApIHtcXG5cXHRmbG9hdCBhMiA9IHBvdzIoIGFscGhhICk7XFxuXFx0ZmxvYXQgZ3YgPSBkb3ROTCAqIHNxcnQoIGEyICsgKCAxLjAgLSBhMiApICogcG93MiggZG90TlYgKSApO1xcblxcdGZsb2F0IGdsID0gZG90TlYgKiBzcXJ0KCBhMiArICggMS4wIC0gYTIgKSAqIHBvdzIoIGRvdE5MICkgKTtcXG5cXHRyZXR1cm4gMC41IC8gbWF4KCBndiArIGdsLCBFUFNJTE9OICk7XFxufVxcbmZsb2F0IERfR0dYKCBjb25zdCBpbiBmbG9hdCBhbHBoYSwgY29uc3QgaW4gZmxvYXQgZG90TkggKSB7XFxuXFx0ZmxvYXQgYTIgPSBwb3cyKCBhbHBoYSApO1xcblxcdGZsb2F0IGRlbm9tID0gcG93MiggZG90TkggKSAqICggYTIgLSAxLjAgKSArIDEuMDtcXG5cXHRyZXR1cm4gUkVDSVBST0NBTF9QSSAqIGEyIC8gcG93MiggZGVub20gKTtcXG59XFxudmVjMyBCUkRGX1NwZWN1bGFyX0dHWCggY29uc3QgaW4gSW5jaWRlbnRMaWdodCBpbmNpZGVudExpZ2h0LCBjb25zdCBpbiBHZW9tZXRyaWNDb250ZXh0IGdlb21ldHJ5LCBjb25zdCBpbiB2ZWMzIHNwZWN1bGFyQ29sb3IsIGNvbnN0IGluIGZsb2F0IHJvdWdobmVzcyApIHtcXG5cXHRmbG9hdCBhbHBoYSA9IHBvdzIoIHJvdWdobmVzcyApO1xcblxcdHZlYzMgaGFsZkRpciA9IG5vcm1hbGl6ZSggaW5jaWRlbnRMaWdodC5kaXJlY3Rpb24gKyBnZW9tZXRyeS52aWV3RGlyICk7XFxuXFx0ZmxvYXQgZG90TkwgPSBzYXR1cmF0ZSggZG90KCBnZW9tZXRyeS5ub3JtYWwsIGluY2lkZW50TGlnaHQuZGlyZWN0aW9uICkgKTtcXG5cXHRmbG9hdCBkb3ROViA9IHNhdHVyYXRlKCBkb3QoIGdlb21ldHJ5Lm5vcm1hbCwgZ2VvbWV0cnkudmlld0RpciApICk7XFxuXFx0ZmxvYXQgZG90TkggPSBzYXR1cmF0ZSggZG90KCBnZW9tZXRyeS5ub3JtYWwsIGhhbGZEaXIgKSApO1xcblxcdGZsb2F0IGRvdExIID0gc2F0dXJhdGUoIGRvdCggaW5jaWRlbnRMaWdodC5kaXJlY3Rpb24sIGhhbGZEaXIgKSApO1xcblxcdHZlYzMgRiA9IEZfU2NobGljayggc3BlY3VsYXJDb2xvciwgZG90TEggKTtcXG5cXHRmbG9hdCBHID0gR19HR1hfU21pdGhDb3JyZWxhdGVkKCBhbHBoYSwgZG90TkwsIGRvdE5WICk7XFxuXFx0ZmxvYXQgRCA9IERfR0dYKCBhbHBoYSwgZG90TkggKTtcXG5cXHRyZXR1cm4gRiAqICggRyAqIEQgKTtcXG59XFxudmVjMyBCUkRGX1NwZWN1bGFyX0dHWF9FbnZpcm9ubWVudCggY29uc3QgaW4gR2VvbWV0cmljQ29udGV4dCBnZW9tZXRyeSwgY29uc3QgaW4gdmVjMyBzcGVjdWxhckNvbG9yLCBjb25zdCBpbiBmbG9hdCByb3VnaG5lc3MgKSB7XFxuXFx0ZmxvYXQgZG90TlYgPSBzYXR1cmF0ZSggZG90KCBnZW9tZXRyeS5ub3JtYWwsIGdlb21ldHJ5LnZpZXdEaXIgKSApO1xcblxcdGNvbnN0IHZlYzQgYzAgPSB2ZWM0KCAtIDEsIC0gMC4wMjc1LCAtIDAuNTcyLCAwLjAyMiApO1xcblxcdGNvbnN0IHZlYzQgYzEgPSB2ZWM0KCAxLCAwLjA0MjUsIDEuMDQsIC0gMC4wNCApO1xcblxcdHZlYzQgciA9IHJvdWdobmVzcyAqIGMwICsgYzE7XFxuXFx0ZmxvYXQgYTAwNCA9IG1pbiggci54ICogci54LCBleHAyKCAtIDkuMjggKiBkb3ROViApICkgKiByLnggKyByLnk7XFxuXFx0dmVjMiBBQiA9IHZlYzIoIC0xLjA0LCAxLjA0ICkgKiBhMDA0ICsgci56dztcXG5cXHRyZXR1cm4gc3BlY3VsYXJDb2xvciAqIEFCLnggKyBBQi55O1xcbn1cXG5mbG9hdCBHX0JsaW5uUGhvbmdfSW1wbGljaXQoICkge1xcblxcdHJldHVybiAwLjI1O1xcbn1cXG5mbG9hdCBEX0JsaW5uUGhvbmcoIGNvbnN0IGluIGZsb2F0IHNoaW5pbmVzcywgY29uc3QgaW4gZmxvYXQgZG90TkggKSB7XFxuXFx0cmV0dXJuIFJFQ0lQUk9DQUxfUEkgKiAoIHNoaW5pbmVzcyAqIDAuNSArIDEuMCApICogcG93KCBkb3ROSCwgc2hpbmluZXNzICk7XFxufVxcbnZlYzMgQlJERl9TcGVjdWxhcl9CbGlublBob25nKCBjb25zdCBpbiBJbmNpZGVudExpZ2h0IGluY2lkZW50TGlnaHQsIGNvbnN0IGluIEdlb21ldHJpY0NvbnRleHQgZ2VvbWV0cnksIGNvbnN0IGluIHZlYzMgc3BlY3VsYXJDb2xvciwgY29uc3QgaW4gZmxvYXQgc2hpbmluZXNzICkge1xcblxcdHZlYzMgaGFsZkRpciA9IG5vcm1hbGl6ZSggaW5jaWRlbnRMaWdodC5kaXJlY3Rpb24gKyBnZW9tZXRyeS52aWV3RGlyICk7XFxuXFx0ZmxvYXQgZG90TkggPSBzYXR1cmF0ZSggZG90KCBnZW9tZXRyeS5ub3JtYWwsIGhhbGZEaXIgKSApO1xcblxcdGZsb2F0IGRvdExIID0gc2F0dXJhdGUoIGRvdCggaW5jaWRlbnRMaWdodC5kaXJlY3Rpb24sIGhhbGZEaXIgKSApO1xcblxcdHZlYzMgRiA9IEZfU2NobGljayggc3BlY3VsYXJDb2xvciwgZG90TEggKTtcXG5cXHRmbG9hdCBHID0gR19CbGlublBob25nX0ltcGxpY2l0KCApO1xcblxcdGZsb2F0IEQgPSBEX0JsaW5uUGhvbmcoIHNoaW5pbmVzcywgZG90TkggKTtcXG5cXHRyZXR1cm4gRiAqICggRyAqIEQgKTtcXG59XFxuZmxvYXQgR0dYUm91Z2huZXNzVG9CbGlubkV4cG9uZW50KCBjb25zdCBpbiBmbG9hdCBnZ3hSb3VnaG5lc3MgKSB7XFxuXFx0cmV0dXJuICggMi4wIC8gcG93MiggZ2d4Um91Z2huZXNzICsgMC4wMDAxICkgLSAyLjAgKTtcXG59XFxuZmxvYXQgQmxpbm5FeHBvbmVudFRvR0dYUm91Z2huZXNzKCBjb25zdCBpbiBmbG9hdCBibGlubkV4cG9uZW50ICkge1xcblxcdHJldHVybiBzcXJ0KCAyLjAgLyAoIGJsaW5uRXhwb25lbnQgKyAyLjAgKSApO1xcbn1cXG5cIjtcblRIUkVFLlNoYWRlckNodW5rLmJ1bXBtYXBfcGFyc19mcmFnbWVudD1cIiNpZmRlZiBVU0VfQlVNUE1BUFxcblxcdHVuaWZvcm0gc2FtcGxlcjJEIGJ1bXBNYXA7XFxuXFx0dW5pZm9ybSBmbG9hdCBidW1wU2NhbGU7XFxuXFx0dmVjMiBkSGR4eV9md2QoKSB7XFxuXFx0XFx0dmVjMiBkU1RkeCA9IGRGZHgoIHZVdiApO1xcblxcdFxcdHZlYzIgZFNUZHkgPSBkRmR5KCB2VXYgKTtcXG5cXHRcXHRmbG9hdCBIbGwgPSBidW1wU2NhbGUgKiB0ZXh0dXJlMkQoIGJ1bXBNYXAsIHZVdiApLng7XFxuXFx0XFx0ZmxvYXQgZEJ4ID0gYnVtcFNjYWxlICogdGV4dHVyZTJEKCBidW1wTWFwLCB2VXYgKyBkU1RkeCApLnggLSBIbGw7XFxuXFx0XFx0ZmxvYXQgZEJ5ID0gYnVtcFNjYWxlICogdGV4dHVyZTJEKCBidW1wTWFwLCB2VXYgKyBkU1RkeSApLnggLSBIbGw7XFxuXFx0XFx0cmV0dXJuIHZlYzIoIGRCeCwgZEJ5ICk7XFxuXFx0fVxcblxcdHZlYzMgcGVydHVyYk5vcm1hbEFyYiggdmVjMyBzdXJmX3BvcywgdmVjMyBzdXJmX25vcm0sIHZlYzIgZEhkeHkgKSB7XFxuXFx0XFx0dmVjMyB2U2lnbWFYID0gZEZkeCggc3VyZl9wb3MgKTtcXG5cXHRcXHR2ZWMzIHZTaWdtYVkgPSBkRmR5KCBzdXJmX3BvcyApO1xcblxcdFxcdHZlYzMgdk4gPSBzdXJmX25vcm07XFxuXFx0XFx0dmVjMyBSMSA9IGNyb3NzKCB2U2lnbWFZLCB2TiApO1xcblxcdFxcdHZlYzMgUjIgPSBjcm9zcyggdk4sIHZTaWdtYVggKTtcXG5cXHRcXHRmbG9hdCBmRGV0ID0gZG90KCB2U2lnbWFYLCBSMSApO1xcblxcdFxcdHZlYzMgdkdyYWQgPSBzaWduKCBmRGV0ICkgKiAoIGRIZHh5LnggKiBSMSArIGRIZHh5LnkgKiBSMiApO1xcblxcdFxcdHJldHVybiBub3JtYWxpemUoIGFicyggZkRldCApICogc3VyZl9ub3JtIC0gdkdyYWQgKTtcXG5cXHR9XFxuI2VuZGlmXFxuXCI7XG5USFJFRS5TaGFkZXJDaHVuay5jbGlwcGluZ19wbGFuZXNfZnJhZ21lbnQ9XCIjaWYgTlVNX0NMSVBQSU5HX1BMQU5FUyA+IDBcXG5cXHRmb3IgKCBpbnQgaSA9IDA7IGkgPCBOVU1fQ0xJUFBJTkdfUExBTkVTOyArKyBpICkge1xcblxcdFxcdHZlYzQgcGxhbmUgPSBjbGlwcGluZ1BsYW5lc1sgaSBdO1xcblxcdFxcdGlmICggZG90KCB2Vmlld1Bvc2l0aW9uLCBwbGFuZS54eXogKSA+IHBsYW5lLncgKSBkaXNjYXJkO1xcblxcdH1cXG4jZW5kaWZcXG5cIjtUSFJFRS5TaGFkZXJDaHVuay5jbGlwcGluZ19wbGFuZXNfcGFyc19mcmFnbWVudD1cIiNpZiBOVU1fQ0xJUFBJTkdfUExBTkVTID4gMFxcblxcdCNpZiAhIGRlZmluZWQoIFBIWVNJQ0FMICkgJiYgISBkZWZpbmVkKCBQSE9ORyApXFxuXFx0XFx0dmFyeWluZyB2ZWMzIHZWaWV3UG9zaXRpb247XFxuXFx0I2VuZGlmXFxuXFx0dW5pZm9ybSB2ZWM0IGNsaXBwaW5nUGxhbmVzWyBOVU1fQ0xJUFBJTkdfUExBTkVTIF07XFxuI2VuZGlmXFxuXCI7XG5USFJFRS5TaGFkZXJDaHVuay5jbGlwcGluZ19wbGFuZXNfcGFyc192ZXJ0ZXg9XCIjaWYgTlVNX0NMSVBQSU5HX1BMQU5FUyA+IDAgJiYgISBkZWZpbmVkKCBQSFlTSUNBTCApICYmICEgZGVmaW5lZCggUEhPTkcgKVxcblxcdHZhcnlpbmcgdmVjMyB2Vmlld1Bvc2l0aW9uO1xcbiNlbmRpZlxcblwiO1RIUkVFLlNoYWRlckNodW5rLmNsaXBwaW5nX3BsYW5lc192ZXJ0ZXg9XCIjaWYgTlVNX0NMSVBQSU5HX1BMQU5FUyA+IDAgJiYgISBkZWZpbmVkKCBQSFlTSUNBTCApICYmICEgZGVmaW5lZCggUEhPTkcgKVxcblxcdHZWaWV3UG9zaXRpb24gPSAtIG12UG9zaXRpb24ueHl6O1xcbiNlbmRpZlxcblwiO1RIUkVFLlNoYWRlckNodW5rLmNvbG9yX2ZyYWdtZW50PVwiI2lmZGVmIFVTRV9DT0xPUlxcblxcdGRpZmZ1c2VDb2xvci5yZ2IgKj0gdkNvbG9yO1xcbiNlbmRpZlwiO1RIUkVFLlNoYWRlckNodW5rLmNvbG9yX3BhcnNfZnJhZ21lbnQ9XCIjaWZkZWYgVVNFX0NPTE9SXFxuXFx0dmFyeWluZyB2ZWMzIHZDb2xvcjtcXG4jZW5kaWZcXG5cIjtcblRIUkVFLlNoYWRlckNodW5rLmNvbG9yX3BhcnNfdmVydGV4PVwiI2lmZGVmIFVTRV9DT0xPUlxcblxcdHZhcnlpbmcgdmVjMyB2Q29sb3I7XFxuI2VuZGlmXCI7VEhSRUUuU2hhZGVyQ2h1bmsuY29sb3JfdmVydGV4PVwiI2lmZGVmIFVTRV9DT0xPUlxcblxcdHZDb2xvci54eXogPSBjb2xvci54eXo7XFxuI2VuZGlmXCI7VEhSRUUuU2hhZGVyQ2h1bmsuY29tbW9uPVwiI2RlZmluZSBQSSAzLjE0MTU5MjY1MzU5XFxuI2RlZmluZSBQSTIgNi4yODMxODUzMDcxOFxcbiNkZWZpbmUgUkVDSVBST0NBTF9QSSAwLjMxODMwOTg4NjE4XFxuI2RlZmluZSBSRUNJUFJPQ0FMX1BJMiAwLjE1OTE1NDk0XFxuI2RlZmluZSBMT0cyIDEuNDQyNjk1XFxuI2RlZmluZSBFUFNJTE9OIDFlLTZcXG4jZGVmaW5lIHNhdHVyYXRlKGEpIGNsYW1wKCBhLCAwLjAsIDEuMCApXFxuI2RlZmluZSB3aGl0ZUNvbXBsaW1lbnQoYSkgKCAxLjAgLSBzYXR1cmF0ZSggYSApIClcXG5mbG9hdCBwb3cyKCBjb25zdCBpbiBmbG9hdCB4ICkgeyByZXR1cm4geCp4OyB9XFxuZmxvYXQgcG93MyggY29uc3QgaW4gZmxvYXQgeCApIHsgcmV0dXJuIHgqeCp4OyB9XFxuZmxvYXQgcG93NCggY29uc3QgaW4gZmxvYXQgeCApIHsgZmxvYXQgeDIgPSB4Kng7IHJldHVybiB4Mip4MjsgfVxcbmZsb2F0IGF2ZXJhZ2UoIGNvbnN0IGluIHZlYzMgY29sb3IgKSB7IHJldHVybiBkb3QoIGNvbG9yLCB2ZWMzKCAwLjMzMzMgKSApOyB9XFxuaGlnaHAgZmxvYXQgcmFuZCggY29uc3QgaW4gdmVjMiB1diApIHtcXG5cXHRjb25zdCBoaWdocCBmbG9hdCBhID0gMTIuOTg5OCwgYiA9IDc4LjIzMywgYyA9IDQzNzU4LjU0NTM7XFxuXFx0aGlnaHAgZmxvYXQgZHQgPSBkb3QoIHV2Lnh5LCB2ZWMyKCBhLGIgKSApLCBzbiA9IG1vZCggZHQsIFBJICk7XFxuXFx0cmV0dXJuIGZyYWN0KHNpbihzbikgKiBjKTtcXG59XFxuc3RydWN0IEluY2lkZW50TGlnaHQge1xcblxcdHZlYzMgY29sb3I7XFxuXFx0dmVjMyBkaXJlY3Rpb247XFxuXFx0Ym9vbCB2aXNpYmxlO1xcbn07XFxuc3RydWN0IFJlZmxlY3RlZExpZ2h0IHtcXG5cXHR2ZWMzIGRpcmVjdERpZmZ1c2U7XFxuXFx0dmVjMyBkaXJlY3RTcGVjdWxhcjtcXG5cXHR2ZWMzIGluZGlyZWN0RGlmZnVzZTtcXG5cXHR2ZWMzIGluZGlyZWN0U3BlY3VsYXI7XFxufTtcXG5zdHJ1Y3QgR2VvbWV0cmljQ29udGV4dCB7XFxuXFx0dmVjMyBwb3NpdGlvbjtcXG5cXHR2ZWMzIG5vcm1hbDtcXG5cXHR2ZWMzIHZpZXdEaXI7XFxufTtcXG52ZWMzIHRyYW5zZm9ybURpcmVjdGlvbiggaW4gdmVjMyBkaXIsIGluIG1hdDQgbWF0cml4ICkge1xcblxcdHJldHVybiBub3JtYWxpemUoICggbWF0cml4ICogdmVjNCggZGlyLCAwLjAgKSApLnh5eiApO1xcbn1cXG52ZWMzIGludmVyc2VUcmFuc2Zvcm1EaXJlY3Rpb24oIGluIHZlYzMgZGlyLCBpbiBtYXQ0IG1hdHJpeCApIHtcXG5cXHRyZXR1cm4gbm9ybWFsaXplKCAoIHZlYzQoIGRpciwgMC4wICkgKiBtYXRyaXggKS54eXogKTtcXG59XFxudmVjMyBwcm9qZWN0T25QbGFuZShpbiB2ZWMzIHBvaW50LCBpbiB2ZWMzIHBvaW50T25QbGFuZSwgaW4gdmVjMyBwbGFuZU5vcm1hbCApIHtcXG5cXHRmbG9hdCBkaXN0YW5jZSA9IGRvdCggcGxhbmVOb3JtYWwsIHBvaW50IC0gcG9pbnRPblBsYW5lICk7XFxuXFx0cmV0dXJuIC0gZGlzdGFuY2UgKiBwbGFuZU5vcm1hbCArIHBvaW50O1xcbn1cXG5mbG9hdCBzaWRlT2ZQbGFuZSggaW4gdmVjMyBwb2ludCwgaW4gdmVjMyBwb2ludE9uUGxhbmUsIGluIHZlYzMgcGxhbmVOb3JtYWwgKSB7XFxuXFx0cmV0dXJuIHNpZ24oIGRvdCggcG9pbnQgLSBwb2ludE9uUGxhbmUsIHBsYW5lTm9ybWFsICkgKTtcXG59XFxudmVjMyBsaW5lUGxhbmVJbnRlcnNlY3QoIGluIHZlYzMgcG9pbnRPbkxpbmUsIGluIHZlYzMgbGluZURpcmVjdGlvbiwgaW4gdmVjMyBwb2ludE9uUGxhbmUsIGluIHZlYzMgcGxhbmVOb3JtYWwgKSB7XFxuXFx0cmV0dXJuIGxpbmVEaXJlY3Rpb24gKiAoIGRvdCggcGxhbmVOb3JtYWwsIHBvaW50T25QbGFuZSAtIHBvaW50T25MaW5lICkgLyBkb3QoIHBsYW5lTm9ybWFsLCBsaW5lRGlyZWN0aW9uICkgKSArIHBvaW50T25MaW5lO1xcbn1cXG5cIjtcblRIUkVFLlNoYWRlckNodW5rLmN1YmVfdXZfcmVmbGVjdGlvbl9mcmFnbWVudD1cIiNpZmRlZiBFTlZNQVBfVFlQRV9DVUJFX1VWXFxuI2RlZmluZSBjdWJlVVZfdGV4dHVyZVNpemUgKDEwMjQuMClcXG5pbnQgZ2V0RmFjZUZyb21EaXJlY3Rpb24odmVjMyBkaXJlY3Rpb24pIHtcXG5cXHR2ZWMzIGFic0RpcmVjdGlvbiA9IGFicyhkaXJlY3Rpb24pO1xcblxcdGludCBmYWNlID0gLTE7XFxuXFx0aWYoIGFic0RpcmVjdGlvbi54ID4gYWJzRGlyZWN0aW9uLnogKSB7XFxuXFx0XFx0aWYoYWJzRGlyZWN0aW9uLnggPiBhYnNEaXJlY3Rpb24ueSApXFxuXFx0XFx0XFx0ZmFjZSA9IGRpcmVjdGlvbi54ID4gMC4wID8gMCA6IDM7XFxuXFx0XFx0ZWxzZVxcblxcdFxcdFxcdGZhY2UgPSBkaXJlY3Rpb24ueSA+IDAuMCA/IDEgOiA0O1xcblxcdH1cXG5cXHRlbHNlIHtcXG5cXHRcXHRpZihhYnNEaXJlY3Rpb24ueiA+IGFic0RpcmVjdGlvbi55IClcXG5cXHRcXHRcXHRmYWNlID0gZGlyZWN0aW9uLnogPiAwLjAgPyAyIDogNTtcXG5cXHRcXHRlbHNlXFxuXFx0XFx0XFx0ZmFjZSA9IGRpcmVjdGlvbi55ID4gMC4wID8gMSA6IDQ7XFxuXFx0fVxcblxcdHJldHVybiBmYWNlO1xcbn1cXG4jZGVmaW5lIGN1YmVVVl9tYXhMb2RzMSAgKGxvZzIoY3ViZVVWX3RleHR1cmVTaXplKjAuMjUpIC0gMS4wKVxcbiNkZWZpbmUgY3ViZVVWX3JhbmdlQ2xhbXAgKGV4cDIoKDYuMCAtIDEuMCkgKiAyLjApKVxcbnZlYzIgTWlwTGV2ZWxJbmZvKCB2ZWMzIHZlYywgZmxvYXQgcm91Z2huZXNzTGV2ZWwsIGZsb2F0IHJvdWdobmVzcyApIHtcXG5cXHRmbG9hdCBzY2FsZSA9IGV4cDIoY3ViZVVWX21heExvZHMxIC0gcm91Z2huZXNzTGV2ZWwpO1xcblxcdGZsb2F0IGR4Um91Z2huZXNzID0gZEZkeChyb3VnaG5lc3MpO1xcblxcdGZsb2F0IGR5Um91Z2huZXNzID0gZEZkeShyb3VnaG5lc3MpO1xcblxcdHZlYzMgZHggPSBkRmR4KCB2ZWMgKiBzY2FsZSAqIGR4Um91Z2huZXNzICk7XFxuXFx0dmVjMyBkeSA9IGRGZHkoIHZlYyAqIHNjYWxlICogZHlSb3VnaG5lc3MgKTtcXG5cXHRmbG9hdCBkID0gbWF4KCBkb3QoIGR4LCBkeCApLCBkb3QoIGR5LCBkeSApICk7XFxuXFx0ZCA9IGNsYW1wKGQsIDEuMCwgY3ViZVVWX3JhbmdlQ2xhbXApO1xcblxcdGZsb2F0IG1pcExldmVsID0gMC41ICogbG9nMihkKTtcXG5cXHRyZXR1cm4gdmVjMihmbG9vcihtaXBMZXZlbCksIGZyYWN0KG1pcExldmVsKSk7XFxufVxcbiNkZWZpbmUgY3ViZVVWX21heExvZHMyIChsb2cyKGN1YmVVVl90ZXh0dXJlU2l6ZSowLjI1KSAtIDIuMClcXG4jZGVmaW5lIGN1YmVVVl9yY3BUZXh0dXJlU2l6ZSAoMS4wIC8gY3ViZVVWX3RleHR1cmVTaXplKVxcbnZlYzIgZ2V0Q3ViZVVWKHZlYzMgZGlyZWN0aW9uLCBmbG9hdCByb3VnaG5lc3NMZXZlbCwgZmxvYXQgbWlwTGV2ZWwpIHtcXG5cXHRtaXBMZXZlbCA9IHJvdWdobmVzc0xldmVsID4gY3ViZVVWX21heExvZHMyIC0gMy4wID8gMC4wIDogbWlwTGV2ZWw7XFxuXFx0ZmxvYXQgYSA9IDE2LjAgKiBjdWJlVVZfcmNwVGV4dHVyZVNpemU7XFxuXFx0dmVjMiBleHAyX3BhY2tlZCA9IGV4cDIoIHZlYzIoIHJvdWdobmVzc0xldmVsLCBtaXBMZXZlbCApICk7XFxuXFx0dmVjMiByY3BfZXhwMl9wYWNrZWQgPSB2ZWMyKCAxLjAgKSAvIGV4cDJfcGFja2VkO1xcblxcdGZsb2F0IHBvd1NjYWxlID0gZXhwMl9wYWNrZWQueCAqIGV4cDJfcGFja2VkLnk7XFxuXFx0ZmxvYXQgc2NhbGUgPSByY3BfZXhwMl9wYWNrZWQueCAqIHJjcF9leHAyX3BhY2tlZC55ICogMC4yNTtcXG5cXHRmbG9hdCBtaXBPZmZzZXQgPSAwLjc1KigxLjAgLSByY3BfZXhwMl9wYWNrZWQueSkgKiByY3BfZXhwMl9wYWNrZWQueDtcXG5cXHRib29sIGJSZXMgPSBtaXBMZXZlbCA9PSAwLjA7XFxuXFx0c2NhbGUgPSAgYlJlcyAmJiAoc2NhbGUgPCBhKSA/IGEgOiBzY2FsZTtcXG5cXHR2ZWMzIHI7XFxuXFx0dmVjMiBvZmZzZXQ7XFxuXFx0aW50IGZhY2UgPSBnZXRGYWNlRnJvbURpcmVjdGlvbihkaXJlY3Rpb24pO1xcblxcdGZsb2F0IHJjcFBvd1NjYWxlID0gMS4wIC8gcG93U2NhbGU7XFxuXFx0aWYoIGZhY2UgPT0gMCkge1xcblxcdFxcdHIgPSB2ZWMzKGRpcmVjdGlvbi54LCAtZGlyZWN0aW9uLnosIGRpcmVjdGlvbi55KTtcXG5cXHRcXHRvZmZzZXQgPSB2ZWMyKDAuMCttaXBPZmZzZXQsMC43NSAqIHJjcFBvd1NjYWxlKTtcXG5cXHRcXHRvZmZzZXQueSA9IGJSZXMgJiYgKG9mZnNldC55IDwgMi4wKmEpID8gIGEgOiBvZmZzZXQueTtcXG5cXHR9XFxuXFx0ZWxzZSBpZiggZmFjZSA9PSAxKSB7XFxuXFx0XFx0ciA9IHZlYzMoZGlyZWN0aW9uLnksIGRpcmVjdGlvbi54LCBkaXJlY3Rpb24ueik7XFxuXFx0XFx0b2Zmc2V0ID0gdmVjMihzY2FsZSttaXBPZmZzZXQsIDAuNzUgKiByY3BQb3dTY2FsZSk7XFxuXFx0XFx0b2Zmc2V0LnkgPSBiUmVzICYmIChvZmZzZXQueSA8IDIuMCphKSA/ICBhIDogb2Zmc2V0Lnk7XFxuXFx0fVxcblxcdGVsc2UgaWYoIGZhY2UgPT0gMikge1xcblxcdFxcdHIgPSB2ZWMzKGRpcmVjdGlvbi56LCBkaXJlY3Rpb24ueCwgZGlyZWN0aW9uLnkpO1xcblxcdFxcdG9mZnNldCA9IHZlYzIoMi4wKnNjYWxlK21pcE9mZnNldCwgMC43NSAqIHJjcFBvd1NjYWxlKTtcXG5cXHRcXHRvZmZzZXQueSA9IGJSZXMgJiYgKG9mZnNldC55IDwgMi4wKmEpID8gIGEgOiBvZmZzZXQueTtcXG5cXHR9XFxuXFx0ZWxzZSBpZiggZmFjZSA9PSAzKSB7XFxuXFx0XFx0ciA9IHZlYzMoZGlyZWN0aW9uLngsIGRpcmVjdGlvbi56LCBkaXJlY3Rpb24ueSk7XFxuXFx0XFx0b2Zmc2V0ID0gdmVjMigwLjArbWlwT2Zmc2V0LDAuNSAqIHJjcFBvd1NjYWxlKTtcXG5cXHRcXHRvZmZzZXQueSA9IGJSZXMgJiYgKG9mZnNldC55IDwgMi4wKmEpID8gIDAuMCA6IG9mZnNldC55O1xcblxcdH1cXG5cXHRlbHNlIGlmKCBmYWNlID09IDQpIHtcXG5cXHRcXHRyID0gdmVjMyhkaXJlY3Rpb24ueSwgZGlyZWN0aW9uLngsIC1kaXJlY3Rpb24ueik7XFxuXFx0XFx0b2Zmc2V0ID0gdmVjMihzY2FsZSttaXBPZmZzZXQsIDAuNSAqIHJjcFBvd1NjYWxlKTtcXG5cXHRcXHRvZmZzZXQueSA9IGJSZXMgJiYgKG9mZnNldC55IDwgMi4wKmEpID8gIDAuMCA6IG9mZnNldC55O1xcblxcdH1cXG5cXHRlbHNlIHtcXG5cXHRcXHRyID0gdmVjMyhkaXJlY3Rpb24ueiwgLWRpcmVjdGlvbi54LCBkaXJlY3Rpb24ueSk7XFxuXFx0XFx0b2Zmc2V0ID0gdmVjMigyLjAqc2NhbGUrbWlwT2Zmc2V0LCAwLjUgKiByY3BQb3dTY2FsZSk7XFxuXFx0XFx0b2Zmc2V0LnkgPSBiUmVzICYmIChvZmZzZXQueSA8IDIuMCphKSA/ICAwLjAgOiBvZmZzZXQueTtcXG5cXHR9XFxuXFx0ciA9IG5vcm1hbGl6ZShyKTtcXG5cXHRmbG9hdCB0ZXhlbE9mZnNldCA9IDAuNSAqIGN1YmVVVl9yY3BUZXh0dXJlU2l6ZTtcXG5cXHR2ZWMyIHMgPSAoIHIueXogLyBhYnMoIHIueCApICsgdmVjMiggMS4wICkgKSAqIDAuNTtcXG5cXHR2ZWMyIGJhc2UgPSBvZmZzZXQgKyB2ZWMyKCB0ZXhlbE9mZnNldCApO1xcblxcdHJldHVybiBiYXNlICsgcyAqICggc2NhbGUgLSAyLjAgKiB0ZXhlbE9mZnNldCApO1xcbn1cXG4jZGVmaW5lIGN1YmVVVl9tYXhMb2RzMyAobG9nMihjdWJlVVZfdGV4dHVyZVNpemUqMC4yNSkgLSAzLjApXFxudmVjNCB0ZXh0dXJlQ3ViZVVWKHZlYzMgcmVmbGVjdGVkRGlyZWN0aW9uLCBmbG9hdCByb3VnaG5lc3MgKSB7XFxuXFx0ZmxvYXQgcm91Z2huZXNzVmFsID0gcm91Z2huZXNzKiBjdWJlVVZfbWF4TG9kczM7XFxuXFx0ZmxvYXQgcjEgPSBmbG9vcihyb3VnaG5lc3NWYWwpO1xcblxcdGZsb2F0IHIyID0gcjEgKyAxLjA7XFxuXFx0ZmxvYXQgdCA9IGZyYWN0KHJvdWdobmVzc1ZhbCk7XFxuXFx0dmVjMiBtaXBJbmZvID0gTWlwTGV2ZWxJbmZvKHJlZmxlY3RlZERpcmVjdGlvbiwgcjEsIHJvdWdobmVzcyk7XFxuXFx0ZmxvYXQgcyA9IG1pcEluZm8ueTtcXG5cXHRmbG9hdCBsZXZlbDAgPSBtaXBJbmZvLng7XFxuXFx0ZmxvYXQgbGV2ZWwxID0gbGV2ZWwwICsgMS4wO1xcblxcdGxldmVsMSA9IGxldmVsMSA+IDUuMCA/IDUuMCA6IGxldmVsMTtcXG5cXHRsZXZlbDAgKz0gbWluKCBmbG9vciggcyArIDAuNSApLCA1LjAgKTtcXG5cXHR2ZWMyIHV2XzEwID0gZ2V0Q3ViZVVWKHJlZmxlY3RlZERpcmVjdGlvbiwgcjEsIGxldmVsMCk7XFxuXFx0dmVjNCBjb2xvcjEwID0gZW52TWFwVGV4ZWxUb0xpbmVhcih0ZXh0dXJlMkQoZW52TWFwLCB1dl8xMCkpO1xcblxcdHZlYzIgdXZfMjAgPSBnZXRDdWJlVVYocmVmbGVjdGVkRGlyZWN0aW9uLCByMiwgbGV2ZWwwKTtcXG5cXHR2ZWM0IGNvbG9yMjAgPSBlbnZNYXBUZXhlbFRvTGluZWFyKHRleHR1cmUyRChlbnZNYXAsIHV2XzIwKSk7XFxuXFx0dmVjNCByZXN1bHQgPSBtaXgoY29sb3IxMCwgY29sb3IyMCwgdCk7XFxuXFx0cmV0dXJuIHZlYzQocmVzdWx0LnJnYiwgMS4wKTtcXG59XFxuI2VuZGlmXFxuXCI7XG5USFJFRS5TaGFkZXJDaHVuay5kZWZhdWx0bm9ybWFsX3ZlcnRleD1cIiNpZmRlZiBGTElQX1NJREVEXFxuXFx0b2JqZWN0Tm9ybWFsID0gLW9iamVjdE5vcm1hbDtcXG4jZW5kaWZcXG52ZWMzIHRyYW5zZm9ybWVkTm9ybWFsID0gbm9ybWFsTWF0cml4ICogb2JqZWN0Tm9ybWFsO1xcblwiO1RIUkVFLlNoYWRlckNodW5rLmRpc3BsYWNlbWVudG1hcF92ZXJ0ZXg9XCIjaWZkZWYgVVNFX0RJU1BMQUNFTUVOVE1BUFxcblxcdHRyYW5zZm9ybWVkICs9IG5vcm1hbCAqICggdGV4dHVyZTJEKCBkaXNwbGFjZW1lbnRNYXAsIHV2ICkueCAqIGRpc3BsYWNlbWVudFNjYWxlICsgZGlzcGxhY2VtZW50QmlhcyApO1xcbiNlbmRpZlxcblwiO1RIUkVFLlNoYWRlckNodW5rLmRpc3BsYWNlbWVudG1hcF9wYXJzX3ZlcnRleD1cIiNpZmRlZiBVU0VfRElTUExBQ0VNRU5UTUFQXFxuXFx0dW5pZm9ybSBzYW1wbGVyMkQgZGlzcGxhY2VtZW50TWFwO1xcblxcdHVuaWZvcm0gZmxvYXQgZGlzcGxhY2VtZW50U2NhbGU7XFxuXFx0dW5pZm9ybSBmbG9hdCBkaXNwbGFjZW1lbnRCaWFzO1xcbiNlbmRpZlxcblwiO1xuVEhSRUUuU2hhZGVyQ2h1bmsuZW1pc3NpdmVtYXBfZnJhZ21lbnQ9XCIjaWZkZWYgVVNFX0VNSVNTSVZFTUFQXFxuXFx0dmVjNCBlbWlzc2l2ZUNvbG9yID0gdGV4dHVyZTJEKCBlbWlzc2l2ZU1hcCwgdlV2ICk7XFxuXFx0ZW1pc3NpdmVDb2xvci5yZ2IgPSBlbWlzc2l2ZU1hcFRleGVsVG9MaW5lYXIoIGVtaXNzaXZlQ29sb3IgKS5yZ2I7XFxuXFx0dG90YWxFbWlzc2l2ZVJhZGlhbmNlICo9IGVtaXNzaXZlQ29sb3IucmdiO1xcbiNlbmRpZlxcblwiO1RIUkVFLlNoYWRlckNodW5rLmVtaXNzaXZlbWFwX3BhcnNfZnJhZ21lbnQ9XCIjaWZkZWYgVVNFX0VNSVNTSVZFTUFQXFxuXFx0dW5pZm9ybSBzYW1wbGVyMkQgZW1pc3NpdmVNYXA7XFxuI2VuZGlmXFxuXCI7VEhSRUUuU2hhZGVyQ2h1bmsuZW5jb2RpbmdzX3BhcnNfZnJhZ21lbnQ9XCJcXG52ZWM0IExpbmVhclRvTGluZWFyKCBpbiB2ZWM0IHZhbHVlICkge1xcbiAgcmV0dXJuIHZhbHVlO1xcbn1cXG52ZWM0IEdhbW1hVG9MaW5lYXIoIGluIHZlYzQgdmFsdWUsIGluIGZsb2F0IGdhbW1hRmFjdG9yICkge1xcbiAgcmV0dXJuIHZlYzQoIHBvdyggdmFsdWUueHl6LCB2ZWMzKCBnYW1tYUZhY3RvciApICksIHZhbHVlLncgKTtcXG59XFxudmVjNCBMaW5lYXJUb0dhbW1hKCBpbiB2ZWM0IHZhbHVlLCBpbiBmbG9hdCBnYW1tYUZhY3RvciApIHtcXG4gIHJldHVybiB2ZWM0KCBwb3coIHZhbHVlLnh5eiwgdmVjMyggMS4wIC8gZ2FtbWFGYWN0b3IgKSApLCB2YWx1ZS53ICk7XFxufVxcbnZlYzQgc1JHQlRvTGluZWFyKCBpbiB2ZWM0IHZhbHVlICkge1xcbiAgcmV0dXJuIHZlYzQoIG1peCggcG93KCB2YWx1ZS5yZ2IgKiAwLjk0Nzg2NzI5ODYgKyB2ZWMzKCAwLjA1MjEzMjcwMTQgKSwgdmVjMyggMi40ICkgKSwgdmFsdWUucmdiICogMC4wNzczOTkzODA4LCB2ZWMzKCBsZXNzVGhhbkVxdWFsKCB2YWx1ZS5yZ2IsIHZlYzMoIDAuMDQwNDUgKSApICkgKSwgdmFsdWUudyApO1xcbn1cXG52ZWM0IExpbmVhclRvc1JHQiggaW4gdmVjNCB2YWx1ZSApIHtcXG4gIHJldHVybiB2ZWM0KCBtaXgoIHBvdyggdmFsdWUucmdiLCB2ZWMzKCAwLjQxNjY2ICkgKSAqIDEuMDU1IC0gdmVjMyggMC4wNTUgKSwgdmFsdWUucmdiICogMTIuOTIsIHZlYzMoIGxlc3NUaGFuRXF1YWwoIHZhbHVlLnJnYiwgdmVjMyggMC4wMDMxMzA4ICkgKSApICksIHZhbHVlLncgKTtcXG59XFxudmVjNCBSR0JFVG9MaW5lYXIoIGluIHZlYzQgdmFsdWUgKSB7XFxuICByZXR1cm4gdmVjNCggdmFsdWUucmdiICogZXhwMiggdmFsdWUuYSAqIDI1NS4wIC0gMTI4LjAgKSwgMS4wICk7XFxufVxcbnZlYzQgTGluZWFyVG9SR0JFKCBpbiB2ZWM0IHZhbHVlICkge1xcbiAgZmxvYXQgbWF4Q29tcG9uZW50ID0gbWF4KCBtYXgoIHZhbHVlLnIsIHZhbHVlLmcgKSwgdmFsdWUuYiApO1xcbiAgZmxvYXQgZkV4cCA9IGNsYW1wKCBjZWlsKCBsb2cyKCBtYXhDb21wb25lbnQgKSApLCAtMTI4LjAsIDEyNy4wICk7XFxuICByZXR1cm4gdmVjNCggdmFsdWUucmdiIC8gZXhwMiggZkV4cCApLCAoIGZFeHAgKyAxMjguMCApIC8gMjU1LjAgKTtcXG59XFxudmVjNCBSR0JNVG9MaW5lYXIoIGluIHZlYzQgdmFsdWUsIGluIGZsb2F0IG1heFJhbmdlICkge1xcbiAgcmV0dXJuIHZlYzQoIHZhbHVlLnh5eiAqIHZhbHVlLncgKiBtYXhSYW5nZSwgMS4wICk7XFxufVxcbnZlYzQgTGluZWFyVG9SR0JNKCBpbiB2ZWM0IHZhbHVlLCBpbiBmbG9hdCBtYXhSYW5nZSApIHtcXG4gIGZsb2F0IG1heFJHQiA9IG1heCggdmFsdWUueCwgbWF4KCB2YWx1ZS5nLCB2YWx1ZS5iICkgKTtcXG4gIGZsb2F0IE0gICAgICA9IGNsYW1wKCBtYXhSR0IgLyBtYXhSYW5nZSwgMC4wLCAxLjAgKTtcXG4gIE0gICAgICAgICAgICA9IGNlaWwoIE0gKiAyNTUuMCApIC8gMjU1LjA7XFxuICByZXR1cm4gdmVjNCggdmFsdWUucmdiIC8gKCBNICogbWF4UmFuZ2UgKSwgTSApO1xcbn1cXG52ZWM0IFJHQkRUb0xpbmVhciggaW4gdmVjNCB2YWx1ZSwgaW4gZmxvYXQgbWF4UmFuZ2UgKSB7XFxuICAgIHJldHVybiB2ZWM0KCB2YWx1ZS5yZ2IgKiAoICggbWF4UmFuZ2UgLyAyNTUuMCApIC8gdmFsdWUuYSApLCAxLjAgKTtcXG59XFxudmVjNCBMaW5lYXJUb1JHQkQoIGluIHZlYzQgdmFsdWUsIGluIGZsb2F0IG1heFJhbmdlICkge1xcbiAgICBmbG9hdCBtYXhSR0IgPSBtYXgoIHZhbHVlLngsIG1heCggdmFsdWUuZywgdmFsdWUuYiApICk7XFxuICAgIGZsb2F0IEQgICAgICA9IG1heCggbWF4UmFuZ2UgLyBtYXhSR0IsIDEuMCApO1xcbiAgICBEICAgICAgICAgICAgPSBtaW4oIGZsb29yKCBEICkgLyAyNTUuMCwgMS4wICk7XFxuICAgIHJldHVybiB2ZWM0KCB2YWx1ZS5yZ2IgKiAoIEQgKiAoIDI1NS4wIC8gbWF4UmFuZ2UgKSApLCBEICk7XFxufVxcbmNvbnN0IG1hdDMgY0xvZ0x1dk0gPSBtYXQzKCAwLjIyMDksIDAuMzM5MCwgMC40MTg0LCAwLjExMzgsIDAuNjc4MCwgMC43MzE5LCAwLjAxMDIsIDAuMTEzMCwgMC4yOTY5ICk7XFxudmVjNCBMaW5lYXJUb0xvZ0x1diggaW4gdmVjNCB2YWx1ZSApICB7XFxuICB2ZWMzIFhwX1lfWFlacCA9IHZhbHVlLnJnYiAqIGNMb2dMdXZNO1xcbiAgWHBfWV9YWVpwID0gbWF4KFhwX1lfWFlacCwgdmVjMygxZS02LCAxZS02LCAxZS02KSk7XFxuICB2ZWM0IHZSZXN1bHQ7XFxuICB2UmVzdWx0Lnh5ID0gWHBfWV9YWVpwLnh5IC8gWHBfWV9YWVpwLno7XFxuICBmbG9hdCBMZSA9IDIuMCAqIGxvZzIoWHBfWV9YWVpwLnkpICsgMTI3LjA7XFxuICB2UmVzdWx0LncgPSBmcmFjdChMZSk7XFxuICB2UmVzdWx0LnogPSAoTGUgLSAoZmxvb3IodlJlc3VsdC53KjI1NS4wKSkvMjU1LjApLzI1NS4wO1xcbiAgcmV0dXJuIHZSZXN1bHQ7XFxufVxcbmNvbnN0IG1hdDMgY0xvZ0x1dkludmVyc2VNID0gbWF0MyggNi4wMDE0LCAtMi43MDA4LCAtMS43OTk2LCAtMS4zMzIwLCAzLjEwMjksIC01Ljc3MjEsIDAuMzAwOCwgLTEuMDg4MiwgNS42MjY4ICk7XFxudmVjNCBMb2dMdXZUb0xpbmVhciggaW4gdmVjNCB2YWx1ZSApIHtcXG4gIGZsb2F0IExlID0gdmFsdWUueiAqIDI1NS4wICsgdmFsdWUudztcXG4gIHZlYzMgWHBfWV9YWVpwO1xcbiAgWHBfWV9YWVpwLnkgPSBleHAyKChMZSAtIDEyNy4wKSAvIDIuMCk7XFxuICBYcF9ZX1hZWnAueiA9IFhwX1lfWFlacC55IC8gdmFsdWUueTtcXG4gIFhwX1lfWFlacC54ID0gdmFsdWUueCAqIFhwX1lfWFlacC56O1xcbiAgdmVjMyB2UkdCID0gWHBfWV9YWVpwLnJnYiAqIGNMb2dMdXZJbnZlcnNlTTtcXG4gIHJldHVybiB2ZWM0KCBtYXgodlJHQiwgMC4wKSwgMS4wICk7XFxufVxcblwiO1xuVEhSRUUuU2hhZGVyQ2h1bmsuZW5jb2RpbmdzX2ZyYWdtZW50PVwiICBnbF9GcmFnQ29sb3IgPSBsaW5lYXJUb091dHB1dFRleGVsKCBnbF9GcmFnQ29sb3IgKTtcXG5cIjtUSFJFRS5TaGFkZXJDaHVuay5lbnZtYXBfZnJhZ21lbnQ9XCIjaWZkZWYgVVNFX0VOVk1BUFxcblxcdCNpZiBkZWZpbmVkKCBVU0VfQlVNUE1BUCApIHx8IGRlZmluZWQoIFVTRV9OT1JNQUxNQVAgKSB8fCBkZWZpbmVkKCBQSE9ORyApXFxuXFx0XFx0dmVjMyBjYW1lcmFUb1ZlcnRleCA9IG5vcm1hbGl6ZSggdldvcmxkUG9zaXRpb24gLSBjYW1lcmFQb3NpdGlvbiApO1xcblxcdFxcdHZlYzMgd29ybGROb3JtYWwgPSBpbnZlcnNlVHJhbnNmb3JtRGlyZWN0aW9uKCBub3JtYWwsIHZpZXdNYXRyaXggKTtcXG5cXHRcXHQjaWZkZWYgRU5WTUFQX01PREVfUkVGTEVDVElPTlxcblxcdFxcdFxcdHZlYzMgcmVmbGVjdFZlYyA9IHJlZmxlY3QoIGNhbWVyYVRvVmVydGV4LCB3b3JsZE5vcm1hbCApO1xcblxcdFxcdCNlbHNlXFxuXFx0XFx0XFx0dmVjMyByZWZsZWN0VmVjID0gcmVmcmFjdCggY2FtZXJhVG9WZXJ0ZXgsIHdvcmxkTm9ybWFsLCByZWZyYWN0aW9uUmF0aW8gKTtcXG5cXHRcXHQjZW5kaWZcXG5cXHQjZWxzZVxcblxcdFxcdHZlYzMgcmVmbGVjdFZlYyA9IHZSZWZsZWN0O1xcblxcdCNlbmRpZlxcblxcdCNpZmRlZiBFTlZNQVBfVFlQRV9DVUJFXFxuXFx0XFx0dmVjNCBlbnZDb2xvciA9IHRleHR1cmVDdWJlKCBlbnZNYXAsIGZsaXBOb3JtYWwgKiB2ZWMzKCBmbGlwRW52TWFwICogcmVmbGVjdFZlYy54LCByZWZsZWN0VmVjLnl6ICkgKTtcXG5cXHQjZWxpZiBkZWZpbmVkKCBFTlZNQVBfVFlQRV9FUVVJUkVDIClcXG5cXHRcXHR2ZWMyIHNhbXBsZVVWO1xcblxcdFxcdHNhbXBsZVVWLnkgPSBzYXR1cmF0ZSggZmxpcE5vcm1hbCAqIHJlZmxlY3RWZWMueSAqIDAuNSArIDAuNSApO1xcblxcdFxcdHNhbXBsZVVWLnggPSBhdGFuKCBmbGlwTm9ybWFsICogcmVmbGVjdFZlYy56LCBmbGlwTm9ybWFsICogcmVmbGVjdFZlYy54ICkgKiBSRUNJUFJPQ0FMX1BJMiArIDAuNTtcXG5cXHRcXHR2ZWM0IGVudkNvbG9yID0gdGV4dHVyZTJEKCBlbnZNYXAsIHNhbXBsZVVWICk7XFxuXFx0I2VsaWYgZGVmaW5lZCggRU5WTUFQX1RZUEVfU1BIRVJFIClcXG5cXHRcXHR2ZWMzIHJlZmxlY3RWaWV3ID0gZmxpcE5vcm1hbCAqIG5vcm1hbGl6ZSggKCB2aWV3TWF0cml4ICogdmVjNCggcmVmbGVjdFZlYywgMC4wICkgKS54eXogKyB2ZWMzKCAwLjAsIDAuMCwgMS4wICkgKTtcXG5cXHRcXHR2ZWM0IGVudkNvbG9yID0gdGV4dHVyZTJEKCBlbnZNYXAsIHJlZmxlY3RWaWV3Lnh5ICogMC41ICsgMC41ICk7XFxuXFx0I2VuZGlmXFxuXFx0ZW52Q29sb3IgPSBlbnZNYXBUZXhlbFRvTGluZWFyKCBlbnZDb2xvciApO1xcblxcdCNpZmRlZiBFTlZNQVBfQkxFTkRJTkdfTVVMVElQTFlcXG5cXHRcXHRvdXRnb2luZ0xpZ2h0ID0gbWl4KCBvdXRnb2luZ0xpZ2h0LCBvdXRnb2luZ0xpZ2h0ICogZW52Q29sb3IueHl6LCBzcGVjdWxhclN0cmVuZ3RoICogcmVmbGVjdGl2aXR5ICk7XFxuXFx0I2VsaWYgZGVmaW5lZCggRU5WTUFQX0JMRU5ESU5HX01JWCApXFxuXFx0XFx0b3V0Z29pbmdMaWdodCA9IG1peCggb3V0Z29pbmdMaWdodCwgZW52Q29sb3IueHl6LCBzcGVjdWxhclN0cmVuZ3RoICogcmVmbGVjdGl2aXR5ICk7XFxuXFx0I2VsaWYgZGVmaW5lZCggRU5WTUFQX0JMRU5ESU5HX0FERCApXFxuXFx0XFx0b3V0Z29pbmdMaWdodCArPSBlbnZDb2xvci54eXogKiBzcGVjdWxhclN0cmVuZ3RoICogcmVmbGVjdGl2aXR5O1xcblxcdCNlbmRpZlxcbiNlbmRpZlxcblwiO1xuVEhSRUUuU2hhZGVyQ2h1bmsuZW52bWFwX3BhcnNfZnJhZ21lbnQ9XCIjaWYgZGVmaW5lZCggVVNFX0VOVk1BUCApIHx8IGRlZmluZWQoIFBIWVNJQ0FMIClcXG5cXHR1bmlmb3JtIGZsb2F0IHJlZmxlY3Rpdml0eTtcXG5cXHR1bmlmb3JtIGZsb2F0IGVudk1hcEludGVuc3RpeTtcXG4jZW5kaWZcXG4jaWZkZWYgVVNFX0VOVk1BUFxcblxcdCNpZiAhIGRlZmluZWQoIFBIWVNJQ0FMICkgJiYgKCBkZWZpbmVkKCBVU0VfQlVNUE1BUCApIHx8IGRlZmluZWQoIFVTRV9OT1JNQUxNQVAgKSB8fCBkZWZpbmVkKCBQSE9ORyApIClcXG5cXHRcXHR2YXJ5aW5nIHZlYzMgdldvcmxkUG9zaXRpb247XFxuXFx0I2VuZGlmXFxuXFx0I2lmZGVmIEVOVk1BUF9UWVBFX0NVQkVcXG5cXHRcXHR1bmlmb3JtIHNhbXBsZXJDdWJlIGVudk1hcDtcXG5cXHQjZWxzZVxcblxcdFxcdHVuaWZvcm0gc2FtcGxlcjJEIGVudk1hcDtcXG5cXHQjZW5kaWZcXG5cXHR1bmlmb3JtIGZsb2F0IGZsaXBFbnZNYXA7XFxuXFx0I2lmIGRlZmluZWQoIFVTRV9CVU1QTUFQICkgfHwgZGVmaW5lZCggVVNFX05PUk1BTE1BUCApIHx8IGRlZmluZWQoIFBIT05HICkgfHwgZGVmaW5lZCggUEhZU0lDQUwgKVxcblxcdFxcdHVuaWZvcm0gZmxvYXQgcmVmcmFjdGlvblJhdGlvO1xcblxcdCNlbHNlXFxuXFx0XFx0dmFyeWluZyB2ZWMzIHZSZWZsZWN0O1xcblxcdCNlbmRpZlxcbiNlbmRpZlxcblwiO1xuVEhSRUUuU2hhZGVyQ2h1bmsuZW52bWFwX3BhcnNfdmVydGV4PVwiI2lmZGVmIFVTRV9FTlZNQVBcXG5cXHQjaWYgZGVmaW5lZCggVVNFX0JVTVBNQVAgKSB8fCBkZWZpbmVkKCBVU0VfTk9STUFMTUFQICkgfHwgZGVmaW5lZCggUEhPTkcgKVxcblxcdFxcdHZhcnlpbmcgdmVjMyB2V29ybGRQb3NpdGlvbjtcXG5cXHQjZWxzZVxcblxcdFxcdHZhcnlpbmcgdmVjMyB2UmVmbGVjdDtcXG5cXHRcXHR1bmlmb3JtIGZsb2F0IHJlZnJhY3Rpb25SYXRpbztcXG5cXHQjZW5kaWZcXG4jZW5kaWZcXG5cIjtUSFJFRS5TaGFkZXJDaHVuay5lbnZtYXBfdmVydGV4PVwiI2lmZGVmIFVTRV9FTlZNQVBcXG5cXHQjaWYgZGVmaW5lZCggVVNFX0JVTVBNQVAgKSB8fCBkZWZpbmVkKCBVU0VfTk9STUFMTUFQICkgfHwgZGVmaW5lZCggUEhPTkcgKVxcblxcdFxcdHZXb3JsZFBvc2l0aW9uID0gd29ybGRQb3NpdGlvbi54eXo7XFxuXFx0I2Vsc2VcXG5cXHRcXHR2ZWMzIGNhbWVyYVRvVmVydGV4ID0gbm9ybWFsaXplKCB3b3JsZFBvc2l0aW9uLnh5eiAtIGNhbWVyYVBvc2l0aW9uICk7XFxuXFx0XFx0dmVjMyB3b3JsZE5vcm1hbCA9IGludmVyc2VUcmFuc2Zvcm1EaXJlY3Rpb24oIHRyYW5zZm9ybWVkTm9ybWFsLCB2aWV3TWF0cml4ICk7XFxuXFx0XFx0I2lmZGVmIEVOVk1BUF9NT0RFX1JFRkxFQ1RJT05cXG5cXHRcXHRcXHR2UmVmbGVjdCA9IHJlZmxlY3QoIGNhbWVyYVRvVmVydGV4LCB3b3JsZE5vcm1hbCApO1xcblxcdFxcdCNlbHNlXFxuXFx0XFx0XFx0dlJlZmxlY3QgPSByZWZyYWN0KCBjYW1lcmFUb1ZlcnRleCwgd29ybGROb3JtYWwsIHJlZnJhY3Rpb25SYXRpbyApO1xcblxcdFxcdCNlbmRpZlxcblxcdCNlbmRpZlxcbiNlbmRpZlxcblwiO1xuVEhSRUUuU2hhZGVyQ2h1bmsuZm9nX2ZyYWdtZW50PVwiI2lmZGVmIFVTRV9GT0dcXG5cXHQjaWZkZWYgVVNFX0xPR0RFUFRIQlVGX0VYVFxcblxcdFxcdGZsb2F0IGRlcHRoID0gZ2xfRnJhZ0RlcHRoRVhUIC8gZ2xfRnJhZ0Nvb3JkLnc7XFxuXFx0I2Vsc2VcXG5cXHRcXHRmbG9hdCBkZXB0aCA9IGdsX0ZyYWdDb29yZC56IC8gZ2xfRnJhZ0Nvb3JkLnc7XFxuXFx0I2VuZGlmXFxuXFx0I2lmZGVmIEZPR19FWFAyXFxuXFx0XFx0ZmxvYXQgZm9nRmFjdG9yID0gd2hpdGVDb21wbGltZW50KCBleHAyKCAtIGZvZ0RlbnNpdHkgKiBmb2dEZW5zaXR5ICogZGVwdGggKiBkZXB0aCAqIExPRzIgKSApO1xcblxcdCNlbHNlXFxuXFx0XFx0ZmxvYXQgZm9nRmFjdG9yID0gc21vb3Roc3RlcCggZm9nTmVhciwgZm9nRmFyLCBkZXB0aCApO1xcblxcdCNlbmRpZlxcblxcdGdsX0ZyYWdDb2xvci5yZ2IgPSBtaXgoIGdsX0ZyYWdDb2xvci5yZ2IsIGZvZ0NvbG9yLCBmb2dGYWN0b3IgKTtcXG4jZW5kaWZcXG5cIjtcblRIUkVFLlNoYWRlckNodW5rLmZvZ19wYXJzX2ZyYWdtZW50PVwiI2lmZGVmIFVTRV9GT0dcXG5cXHR1bmlmb3JtIHZlYzMgZm9nQ29sb3I7XFxuXFx0I2lmZGVmIEZPR19FWFAyXFxuXFx0XFx0dW5pZm9ybSBmbG9hdCBmb2dEZW5zaXR5O1xcblxcdCNlbHNlXFxuXFx0XFx0dW5pZm9ybSBmbG9hdCBmb2dOZWFyO1xcblxcdFxcdHVuaWZvcm0gZmxvYXQgZm9nRmFyO1xcblxcdCNlbmRpZlxcbiNlbmRpZlwiO1RIUkVFLlNoYWRlckNodW5rLmxpZ2h0bWFwX2ZyYWdtZW50PVwiI2lmZGVmIFVTRV9MSUdIVE1BUFxcblxcdHJlZmxlY3RlZExpZ2h0LmluZGlyZWN0RGlmZnVzZSArPSBQSSAqIHRleHR1cmUyRCggbGlnaHRNYXAsIHZVdjIgKS54eXogKiBsaWdodE1hcEludGVuc2l0eTtcXG4jZW5kaWZcXG5cIjtUSFJFRS5TaGFkZXJDaHVuay5saWdodG1hcF9wYXJzX2ZyYWdtZW50PVwiI2lmZGVmIFVTRV9MSUdIVE1BUFxcblxcdHVuaWZvcm0gc2FtcGxlcjJEIGxpZ2h0TWFwO1xcblxcdHVuaWZvcm0gZmxvYXQgbGlnaHRNYXBJbnRlbnNpdHk7XFxuI2VuZGlmXCI7XG5USFJFRS5TaGFkZXJDaHVuay5saWdodHNfbGFtYmVydF92ZXJ0ZXg9XCJ2ZWMzIGRpZmZ1c2UgPSB2ZWMzKCAxLjAgKTtcXG5HZW9tZXRyaWNDb250ZXh0IGdlb21ldHJ5O1xcbmdlb21ldHJ5LnBvc2l0aW9uID0gbXZQb3NpdGlvbi54eXo7XFxuZ2VvbWV0cnkubm9ybWFsID0gbm9ybWFsaXplKCB0cmFuc2Zvcm1lZE5vcm1hbCApO1xcbmdlb21ldHJ5LnZpZXdEaXIgPSBub3JtYWxpemUoIC1tdlBvc2l0aW9uLnh5eiApO1xcbkdlb21ldHJpY0NvbnRleHQgYmFja0dlb21ldHJ5O1xcbmJhY2tHZW9tZXRyeS5wb3NpdGlvbiA9IGdlb21ldHJ5LnBvc2l0aW9uO1xcbmJhY2tHZW9tZXRyeS5ub3JtYWwgPSAtZ2VvbWV0cnkubm9ybWFsO1xcbmJhY2tHZW9tZXRyeS52aWV3RGlyID0gZ2VvbWV0cnkudmlld0RpcjtcXG52TGlnaHRGcm9udCA9IHZlYzMoIDAuMCApO1xcbiNpZmRlZiBET1VCTEVfU0lERURcXG5cXHR2TGlnaHRCYWNrID0gdmVjMyggMC4wICk7XFxuI2VuZGlmXFxuSW5jaWRlbnRMaWdodCBkaXJlY3RMaWdodDtcXG5mbG9hdCBkb3ROTDtcXG52ZWMzIGRpcmVjdExpZ2h0Q29sb3JfRGlmZnVzZTtcXG4jaWYgTlVNX1BPSU5UX0xJR0hUUyA+IDBcXG5cXHRmb3IgKCBpbnQgaSA9IDA7IGkgPCBOVU1fUE9JTlRfTElHSFRTOyBpICsrICkge1xcblxcdFxcdGdldFBvaW50RGlyZWN0TGlnaHRJcnJhZGlhbmNlKCBwb2ludExpZ2h0c1sgaSBdLCBnZW9tZXRyeSwgZGlyZWN0TGlnaHQgKTtcXG5cXHRcXHRkb3ROTCA9IGRvdCggZ2VvbWV0cnkubm9ybWFsLCBkaXJlY3RMaWdodC5kaXJlY3Rpb24gKTtcXG5cXHRcXHRkaXJlY3RMaWdodENvbG9yX0RpZmZ1c2UgPSBQSSAqIGRpcmVjdExpZ2h0LmNvbG9yO1xcblxcdFxcdHZMaWdodEZyb250ICs9IHNhdHVyYXRlKCBkb3ROTCApICogZGlyZWN0TGlnaHRDb2xvcl9EaWZmdXNlO1xcblxcdFxcdCNpZmRlZiBET1VCTEVfU0lERURcXG5cXHRcXHRcXHR2TGlnaHRCYWNrICs9IHNhdHVyYXRlKCAtZG90TkwgKSAqIGRpcmVjdExpZ2h0Q29sb3JfRGlmZnVzZTtcXG5cXHRcXHQjZW5kaWZcXG5cXHR9XFxuI2VuZGlmXFxuI2lmIE5VTV9TUE9UX0xJR0hUUyA+IDBcXG5cXHRmb3IgKCBpbnQgaSA9IDA7IGkgPCBOVU1fU1BPVF9MSUdIVFM7IGkgKysgKSB7XFxuXFx0XFx0Z2V0U3BvdERpcmVjdExpZ2h0SXJyYWRpYW5jZSggc3BvdExpZ2h0c1sgaSBdLCBnZW9tZXRyeSwgZGlyZWN0TGlnaHQgKTtcXG5cXHRcXHRkb3ROTCA9IGRvdCggZ2VvbWV0cnkubm9ybWFsLCBkaXJlY3RMaWdodC5kaXJlY3Rpb24gKTtcXG5cXHRcXHRkaXJlY3RMaWdodENvbG9yX0RpZmZ1c2UgPSBQSSAqIGRpcmVjdExpZ2h0LmNvbG9yO1xcblxcdFxcdHZMaWdodEZyb250ICs9IHNhdHVyYXRlKCBkb3ROTCApICogZGlyZWN0TGlnaHRDb2xvcl9EaWZmdXNlO1xcblxcdFxcdCNpZmRlZiBET1VCTEVfU0lERURcXG5cXHRcXHRcXHR2TGlnaHRCYWNrICs9IHNhdHVyYXRlKCAtZG90TkwgKSAqIGRpcmVjdExpZ2h0Q29sb3JfRGlmZnVzZTtcXG5cXHRcXHQjZW5kaWZcXG5cXHR9XFxuI2VuZGlmXFxuI2lmIE5VTV9ESVJfTElHSFRTID4gMFxcblxcdGZvciAoIGludCBpID0gMDsgaSA8IE5VTV9ESVJfTElHSFRTOyBpICsrICkge1xcblxcdFxcdGdldERpcmVjdGlvbmFsRGlyZWN0TGlnaHRJcnJhZGlhbmNlKCBkaXJlY3Rpb25hbExpZ2h0c1sgaSBdLCBnZW9tZXRyeSwgZGlyZWN0TGlnaHQgKTtcXG5cXHRcXHRkb3ROTCA9IGRvdCggZ2VvbWV0cnkubm9ybWFsLCBkaXJlY3RMaWdodC5kaXJlY3Rpb24gKTtcXG5cXHRcXHRkaXJlY3RMaWdodENvbG9yX0RpZmZ1c2UgPSBQSSAqIGRpcmVjdExpZ2h0LmNvbG9yO1xcblxcdFxcdHZMaWdodEZyb250ICs9IHNhdHVyYXRlKCBkb3ROTCApICogZGlyZWN0TGlnaHRDb2xvcl9EaWZmdXNlO1xcblxcdFxcdCNpZmRlZiBET1VCTEVfU0lERURcXG5cXHRcXHRcXHR2TGlnaHRCYWNrICs9IHNhdHVyYXRlKCAtZG90TkwgKSAqIGRpcmVjdExpZ2h0Q29sb3JfRGlmZnVzZTtcXG5cXHRcXHQjZW5kaWZcXG5cXHR9XFxuI2VuZGlmXFxuI2lmIE5VTV9IRU1JX0xJR0hUUyA+IDBcXG5cXHRmb3IgKCBpbnQgaSA9IDA7IGkgPCBOVU1fSEVNSV9MSUdIVFM7IGkgKysgKSB7XFxuXFx0XFx0dkxpZ2h0RnJvbnQgKz0gZ2V0SGVtaXNwaGVyZUxpZ2h0SXJyYWRpYW5jZSggaGVtaXNwaGVyZUxpZ2h0c1sgaSBdLCBnZW9tZXRyeSApO1xcblxcdFxcdCNpZmRlZiBET1VCTEVfU0lERURcXG5cXHRcXHRcXHR2TGlnaHRCYWNrICs9IGdldEhlbWlzcGhlcmVMaWdodElycmFkaWFuY2UoIGhlbWlzcGhlcmVMaWdodHNbIGkgXSwgYmFja0dlb21ldHJ5ICk7XFxuXFx0XFx0I2VuZGlmXFxuXFx0fVxcbiNlbmRpZlxcblwiO1xuVEhSRUUuU2hhZGVyQ2h1bmsubGlnaHRzX3BhcnM9XCJ1bmlmb3JtIHZlYzMgYW1iaWVudExpZ2h0Q29sb3I7XFxudmVjMyBnZXRBbWJpZW50TGlnaHRJcnJhZGlhbmNlKCBjb25zdCBpbiB2ZWMzIGFtYmllbnRMaWdodENvbG9yICkge1xcblxcdHZlYzMgaXJyYWRpYW5jZSA9IGFtYmllbnRMaWdodENvbG9yO1xcblxcdCNpZm5kZWYgUEhZU0lDQUxMWV9DT1JSRUNUX0xJR0hUU1xcblxcdFxcdGlycmFkaWFuY2UgKj0gUEk7XFxuXFx0I2VuZGlmXFxuXFx0cmV0dXJuIGlycmFkaWFuY2U7XFxufVxcbiNpZiBOVU1fRElSX0xJR0hUUyA+IDBcXG5cXHRzdHJ1Y3QgRGlyZWN0aW9uYWxMaWdodCB7XFxuXFx0XFx0dmVjMyBkaXJlY3Rpb247XFxuXFx0XFx0dmVjMyBjb2xvcjtcXG5cXHRcXHRpbnQgc2hhZG93O1xcblxcdFxcdGZsb2F0IHNoYWRvd0JpYXM7XFxuXFx0XFx0ZmxvYXQgc2hhZG93UmFkaXVzO1xcblxcdFxcdHZlYzIgc2hhZG93TWFwU2l6ZTtcXG5cXHR9O1xcblxcdHVuaWZvcm0gRGlyZWN0aW9uYWxMaWdodCBkaXJlY3Rpb25hbExpZ2h0c1sgTlVNX0RJUl9MSUdIVFMgXTtcXG5cXHR2b2lkIGdldERpcmVjdGlvbmFsRGlyZWN0TGlnaHRJcnJhZGlhbmNlKCBjb25zdCBpbiBEaXJlY3Rpb25hbExpZ2h0IGRpcmVjdGlvbmFsTGlnaHQsIGNvbnN0IGluIEdlb21ldHJpY0NvbnRleHQgZ2VvbWV0cnksIG91dCBJbmNpZGVudExpZ2h0IGRpcmVjdExpZ2h0ICkge1xcblxcdFxcdGRpcmVjdExpZ2h0LmNvbG9yID0gZGlyZWN0aW9uYWxMaWdodC5jb2xvcjtcXG5cXHRcXHRkaXJlY3RMaWdodC5kaXJlY3Rpb24gPSBkaXJlY3Rpb25hbExpZ2h0LmRpcmVjdGlvbjtcXG5cXHRcXHRkaXJlY3RMaWdodC52aXNpYmxlID0gdHJ1ZTtcXG5cXHR9XFxuI2VuZGlmXFxuI2lmIE5VTV9QT0lOVF9MSUdIVFMgPiAwXFxuXFx0c3RydWN0IFBvaW50TGlnaHQge1xcblxcdFxcdHZlYzMgcG9zaXRpb247XFxuXFx0XFx0dmVjMyBjb2xvcjtcXG5cXHRcXHRmbG9hdCBkaXN0YW5jZTtcXG5cXHRcXHRmbG9hdCBkZWNheTtcXG5cXHRcXHRpbnQgc2hhZG93O1xcblxcdFxcdGZsb2F0IHNoYWRvd0JpYXM7XFxuXFx0XFx0ZmxvYXQgc2hhZG93UmFkaXVzO1xcblxcdFxcdHZlYzIgc2hhZG93TWFwU2l6ZTtcXG5cXHR9O1xcblxcdHVuaWZvcm0gUG9pbnRMaWdodCBwb2ludExpZ2h0c1sgTlVNX1BPSU5UX0xJR0hUUyBdO1xcblxcdHZvaWQgZ2V0UG9pbnREaXJlY3RMaWdodElycmFkaWFuY2UoIGNvbnN0IGluIFBvaW50TGlnaHQgcG9pbnRMaWdodCwgY29uc3QgaW4gR2VvbWV0cmljQ29udGV4dCBnZW9tZXRyeSwgb3V0IEluY2lkZW50TGlnaHQgZGlyZWN0TGlnaHQgKSB7XFxuXFx0XFx0dmVjMyBsVmVjdG9yID0gcG9pbnRMaWdodC5wb3NpdGlvbiAtIGdlb21ldHJ5LnBvc2l0aW9uO1xcblxcdFxcdGRpcmVjdExpZ2h0LmRpcmVjdGlvbiA9IG5vcm1hbGl6ZSggbFZlY3RvciApO1xcblxcdFxcdGZsb2F0IGxpZ2h0RGlzdGFuY2UgPSBsZW5ndGgoIGxWZWN0b3IgKTtcXG5cXHRcXHRpZiAoIHRlc3RMaWdodEluUmFuZ2UoIGxpZ2h0RGlzdGFuY2UsIHBvaW50TGlnaHQuZGlzdGFuY2UgKSApIHtcXG5cXHRcXHRcXHRkaXJlY3RMaWdodC5jb2xvciA9IHBvaW50TGlnaHQuY29sb3I7XFxuXFx0XFx0XFx0ZGlyZWN0TGlnaHQuY29sb3IgKj0gcHVuY3R1YWxMaWdodEludGVuc2l0eVRvSXJyYWRpYW5jZUZhY3RvciggbGlnaHREaXN0YW5jZSwgcG9pbnRMaWdodC5kaXN0YW5jZSwgcG9pbnRMaWdodC5kZWNheSApO1xcblxcdFxcdFxcdGRpcmVjdExpZ2h0LnZpc2libGUgPSB0cnVlO1xcblxcdFxcdH0gZWxzZSB7XFxuXFx0XFx0XFx0ZGlyZWN0TGlnaHQuY29sb3IgPSB2ZWMzKCAwLjAgKTtcXG5cXHRcXHRcXHRkaXJlY3RMaWdodC52aXNpYmxlID0gZmFsc2U7XFxuXFx0XFx0fVxcblxcdH1cXG4jZW5kaWZcXG4jaWYgTlVNX1NQT1RfTElHSFRTID4gMFxcblxcdHN0cnVjdCBTcG90TGlnaHQge1xcblxcdFxcdHZlYzMgcG9zaXRpb247XFxuXFx0XFx0dmVjMyBkaXJlY3Rpb247XFxuXFx0XFx0dmVjMyBjb2xvcjtcXG5cXHRcXHRmbG9hdCBkaXN0YW5jZTtcXG5cXHRcXHRmbG9hdCBkZWNheTtcXG5cXHRcXHRmbG9hdCBjb25lQ29zO1xcblxcdFxcdGZsb2F0IHBlbnVtYnJhQ29zO1xcblxcdFxcdGludCBzaGFkb3c7XFxuXFx0XFx0ZmxvYXQgc2hhZG93QmlhcztcXG5cXHRcXHRmbG9hdCBzaGFkb3dSYWRpdXM7XFxuXFx0XFx0dmVjMiBzaGFkb3dNYXBTaXplO1xcblxcdH07XFxuXFx0dW5pZm9ybSBTcG90TGlnaHQgc3BvdExpZ2h0c1sgTlVNX1NQT1RfTElHSFRTIF07XFxuXFx0dm9pZCBnZXRTcG90RGlyZWN0TGlnaHRJcnJhZGlhbmNlKCBjb25zdCBpbiBTcG90TGlnaHQgc3BvdExpZ2h0LCBjb25zdCBpbiBHZW9tZXRyaWNDb250ZXh0IGdlb21ldHJ5LCBvdXQgSW5jaWRlbnRMaWdodCBkaXJlY3RMaWdodCAgKSB7XFxuXFx0XFx0dmVjMyBsVmVjdG9yID0gc3BvdExpZ2h0LnBvc2l0aW9uIC0gZ2VvbWV0cnkucG9zaXRpb247XFxuXFx0XFx0ZGlyZWN0TGlnaHQuZGlyZWN0aW9uID0gbm9ybWFsaXplKCBsVmVjdG9yICk7XFxuXFx0XFx0ZmxvYXQgbGlnaHREaXN0YW5jZSA9IGxlbmd0aCggbFZlY3RvciApO1xcblxcdFxcdGZsb2F0IGFuZ2xlQ29zID0gZG90KCBkaXJlY3RMaWdodC5kaXJlY3Rpb24sIHNwb3RMaWdodC5kaXJlY3Rpb24gKTtcXG5cXHRcXHRpZiAoIGFsbCggYnZlYzIoIGFuZ2xlQ29zID4gc3BvdExpZ2h0LmNvbmVDb3MsIHRlc3RMaWdodEluUmFuZ2UoIGxpZ2h0RGlzdGFuY2UsIHNwb3RMaWdodC5kaXN0YW5jZSApICkgKSApIHtcXG5cXHRcXHRcXHRmbG9hdCBzcG90RWZmZWN0ID0gc21vb3Roc3RlcCggc3BvdExpZ2h0LmNvbmVDb3MsIHNwb3RMaWdodC5wZW51bWJyYUNvcywgYW5nbGVDb3MgKTtcXG5cXHRcXHRcXHRkaXJlY3RMaWdodC5jb2xvciA9IHNwb3RMaWdodC5jb2xvcjtcXG5cXHRcXHRcXHRkaXJlY3RMaWdodC5jb2xvciAqPSBzcG90RWZmZWN0ICogcHVuY3R1YWxMaWdodEludGVuc2l0eVRvSXJyYWRpYW5jZUZhY3RvciggbGlnaHREaXN0YW5jZSwgc3BvdExpZ2h0LmRpc3RhbmNlLCBzcG90TGlnaHQuZGVjYXkgKTtcXG5cXHRcXHRcXHRkaXJlY3RMaWdodC52aXNpYmxlID0gdHJ1ZTtcXG5cXHRcXHR9IGVsc2Uge1xcblxcdFxcdFxcdGRpcmVjdExpZ2h0LmNvbG9yID0gdmVjMyggMC4wICk7XFxuXFx0XFx0XFx0ZGlyZWN0TGlnaHQudmlzaWJsZSA9IGZhbHNlO1xcblxcdFxcdH1cXG5cXHR9XFxuI2VuZGlmXFxuI2lmIE5VTV9IRU1JX0xJR0hUUyA+IDBcXG5cXHRzdHJ1Y3QgSGVtaXNwaGVyZUxpZ2h0IHtcXG5cXHRcXHR2ZWMzIGRpcmVjdGlvbjtcXG5cXHRcXHR2ZWMzIHNreUNvbG9yO1xcblxcdFxcdHZlYzMgZ3JvdW5kQ29sb3I7XFxuXFx0fTtcXG5cXHR1bmlmb3JtIEhlbWlzcGhlcmVMaWdodCBoZW1pc3BoZXJlTGlnaHRzWyBOVU1fSEVNSV9MSUdIVFMgXTtcXG5cXHR2ZWMzIGdldEhlbWlzcGhlcmVMaWdodElycmFkaWFuY2UoIGNvbnN0IGluIEhlbWlzcGhlcmVMaWdodCBoZW1pTGlnaHQsIGNvbnN0IGluIEdlb21ldHJpY0NvbnRleHQgZ2VvbWV0cnkgKSB7XFxuXFx0XFx0ZmxvYXQgZG90TkwgPSBkb3QoIGdlb21ldHJ5Lm5vcm1hbCwgaGVtaUxpZ2h0LmRpcmVjdGlvbiApO1xcblxcdFxcdGZsb2F0IGhlbWlEaWZmdXNlV2VpZ2h0ID0gMC41ICogZG90TkwgKyAwLjU7XFxuXFx0XFx0dmVjMyBpcnJhZGlhbmNlID0gbWl4KCBoZW1pTGlnaHQuZ3JvdW5kQ29sb3IsIGhlbWlMaWdodC5za3lDb2xvciwgaGVtaURpZmZ1c2VXZWlnaHQgKTtcXG5cXHRcXHQjaWZuZGVmIFBIWVNJQ0FMTFlfQ09SUkVDVF9MSUdIVFNcXG5cXHRcXHRcXHRpcnJhZGlhbmNlICo9IFBJO1xcblxcdFxcdCNlbmRpZlxcblxcdFxcdHJldHVybiBpcnJhZGlhbmNlO1xcblxcdH1cXG4jZW5kaWZcXG4jaWYgZGVmaW5lZCggVVNFX0VOVk1BUCApICYmIGRlZmluZWQoIFBIWVNJQ0FMIClcXG5cXHR2ZWMzIGdldExpZ2h0UHJvYmVJbmRpcmVjdElycmFkaWFuY2UoIGNvbnN0IGluIEdlb21ldHJpY0NvbnRleHQgZ2VvbWV0cnksIGNvbnN0IGluIGludCBtYXhNSVBMZXZlbCApIHtcXG5cXHRcXHQjaW5jbHVkZSA8bm9ybWFsX2ZsaXA+XFxuXFx0XFx0dmVjMyB3b3JsZE5vcm1hbCA9IGludmVyc2VUcmFuc2Zvcm1EaXJlY3Rpb24oIGdlb21ldHJ5Lm5vcm1hbCwgdmlld01hdHJpeCApO1xcblxcdFxcdCNpZmRlZiBFTlZNQVBfVFlQRV9DVUJFXFxuXFx0XFx0XFx0dmVjMyBxdWVyeVZlYyA9IGZsaXBOb3JtYWwgKiB2ZWMzKCBmbGlwRW52TWFwICogd29ybGROb3JtYWwueCwgd29ybGROb3JtYWwueXogKTtcXG5cXHRcXHRcXHQjaWZkZWYgVEVYVFVSRV9MT0RfRVhUXFxuXFx0XFx0XFx0XFx0dmVjNCBlbnZNYXBDb2xvciA9IHRleHR1cmVDdWJlTG9kRVhUKCBlbnZNYXAsIHF1ZXJ5VmVjLCBmbG9hdCggbWF4TUlQTGV2ZWwgKSApO1xcblxcdFxcdFxcdCNlbHNlXFxuXFx0XFx0XFx0XFx0dmVjNCBlbnZNYXBDb2xvciA9IHRleHR1cmVDdWJlKCBlbnZNYXAsIHF1ZXJ5VmVjLCBmbG9hdCggbWF4TUlQTGV2ZWwgKSApO1xcblxcdFxcdFxcdCNlbmRpZlxcblxcdFxcdFxcdGVudk1hcENvbG9yLnJnYiA9IGVudk1hcFRleGVsVG9MaW5lYXIoIGVudk1hcENvbG9yICkucmdiO1xcblxcdFxcdCNlbGlmIGRlZmluZWQoIEVOVk1BUF9UWVBFX0NVQkVfVVYgKVxcblxcdFxcdFxcdHZlYzMgcXVlcnlWZWMgPSBmbGlwTm9ybWFsICogdmVjMyggZmxpcEVudk1hcCAqIHdvcmxkTm9ybWFsLngsIHdvcmxkTm9ybWFsLnl6ICk7XFxuXFx0XFx0XFx0dmVjNCBlbnZNYXBDb2xvciA9IHRleHR1cmVDdWJlVVYoIHF1ZXJ5VmVjLCAxLjAgKTtcXG5cXHRcXHQjZWxzZVxcblxcdFxcdFxcdHZlYzQgZW52TWFwQ29sb3IgPSB2ZWM0KCAwLjAgKTtcXG5cXHRcXHQjZW5kaWZcXG5cXHRcXHRyZXR1cm4gUEkgKiBlbnZNYXBDb2xvci5yZ2IgKiBlbnZNYXBJbnRlbnNpdHk7XFxuXFx0fVxcblxcdGZsb2F0IGdldFNwZWN1bGFyTUlQTGV2ZWwoIGNvbnN0IGluIGZsb2F0IGJsaW5uU2hpbmluZXNzRXhwb25lbnQsIGNvbnN0IGluIGludCBtYXhNSVBMZXZlbCApIHtcXG5cXHRcXHRmbG9hdCBtYXhNSVBMZXZlbFNjYWxhciA9IGZsb2F0KCBtYXhNSVBMZXZlbCApO1xcblxcdFxcdGZsb2F0IGRlc2lyZWRNSVBMZXZlbCA9IG1heE1JUExldmVsU2NhbGFyIC0gMC43OTI0OCAtIDAuNSAqIGxvZzIoIHBvdzIoIGJsaW5uU2hpbmluZXNzRXhwb25lbnQgKSArIDEuMCApO1xcblxcdFxcdHJldHVybiBjbGFtcCggZGVzaXJlZE1JUExldmVsLCAwLjAsIG1heE1JUExldmVsU2NhbGFyICk7XFxuXFx0fVxcblxcdHZlYzMgZ2V0TGlnaHRQcm9iZUluZGlyZWN0UmFkaWFuY2UoIGNvbnN0IGluIEdlb21ldHJpY0NvbnRleHQgZ2VvbWV0cnksIGNvbnN0IGluIGZsb2F0IGJsaW5uU2hpbmluZXNzRXhwb25lbnQsIGNvbnN0IGluIGludCBtYXhNSVBMZXZlbCApIHtcXG5cXHRcXHQjaWZkZWYgRU5WTUFQX01PREVfUkVGTEVDVElPTlxcblxcdFxcdFxcdHZlYzMgcmVmbGVjdFZlYyA9IHJlZmxlY3QoIC1nZW9tZXRyeS52aWV3RGlyLCBnZW9tZXRyeS5ub3JtYWwgKTtcXG5cXHRcXHQjZWxzZVxcblxcdFxcdFxcdHZlYzMgcmVmbGVjdFZlYyA9IHJlZnJhY3QoIC1nZW9tZXRyeS52aWV3RGlyLCBnZW9tZXRyeS5ub3JtYWwsIHJlZnJhY3Rpb25SYXRpbyApO1xcblxcdFxcdCNlbmRpZlxcblxcdFxcdCNpbmNsdWRlIDxub3JtYWxfZmxpcD5cXG5cXHRcXHRyZWZsZWN0VmVjID0gaW52ZXJzZVRyYW5zZm9ybURpcmVjdGlvbiggcmVmbGVjdFZlYywgdmlld01hdHJpeCApO1xcblxcdFxcdGZsb2F0IHNwZWN1bGFyTUlQTGV2ZWwgPSBnZXRTcGVjdWxhck1JUExldmVsKCBibGlublNoaW5pbmVzc0V4cG9uZW50LCBtYXhNSVBMZXZlbCApO1xcblxcdFxcdCNpZmRlZiBFTlZNQVBfVFlQRV9DVUJFXFxuXFx0XFx0XFx0dmVjMyBxdWVyeVJlZmxlY3RWZWMgPSBmbGlwTm9ybWFsICogdmVjMyggZmxpcEVudk1hcCAqIHJlZmxlY3RWZWMueCwgcmVmbGVjdFZlYy55eiApO1xcblxcdFxcdFxcdCNpZmRlZiBURVhUVVJFX0xPRF9FWFRcXG5cXHRcXHRcXHRcXHR2ZWM0IGVudk1hcENvbG9yID0gdGV4dHVyZUN1YmVMb2RFWFQoIGVudk1hcCwgcXVlcnlSZWZsZWN0VmVjLCBzcGVjdWxhck1JUExldmVsICk7XFxuXFx0XFx0XFx0I2Vsc2VcXG5cXHRcXHRcXHRcXHR2ZWM0IGVudk1hcENvbG9yID0gdGV4dHVyZUN1YmUoIGVudk1hcCwgcXVlcnlSZWZsZWN0VmVjLCBzcGVjdWxhck1JUExldmVsICk7XFxuXFx0XFx0XFx0I2VuZGlmXFxuXFx0XFx0XFx0ZW52TWFwQ29sb3IucmdiID0gZW52TWFwVGV4ZWxUb0xpbmVhciggZW52TWFwQ29sb3IgKS5yZ2I7XFxuXFx0XFx0I2VsaWYgZGVmaW5lZCggRU5WTUFQX1RZUEVfQ1VCRV9VViApXFxuXFx0XFx0XFx0dmVjMyBxdWVyeVJlZmxlY3RWZWMgPSBmbGlwTm9ybWFsICogdmVjMyggZmxpcEVudk1hcCAqIHJlZmxlY3RWZWMueCwgcmVmbGVjdFZlYy55eiApO1xcblxcdFxcdFxcdHZlYzQgZW52TWFwQ29sb3IgPSB0ZXh0dXJlQ3ViZVVWKHF1ZXJ5UmVmbGVjdFZlYywgQmxpbm5FeHBvbmVudFRvR0dYUm91Z2huZXNzKGJsaW5uU2hpbmluZXNzRXhwb25lbnQpKTtcXG5cXHRcXHQjZWxpZiBkZWZpbmVkKCBFTlZNQVBfVFlQRV9FUVVJUkVDIClcXG5cXHRcXHRcXHR2ZWMyIHNhbXBsZVVWO1xcblxcdFxcdFxcdHNhbXBsZVVWLnkgPSBzYXR1cmF0ZSggZmxpcE5vcm1hbCAqIHJlZmxlY3RWZWMueSAqIDAuNSArIDAuNSApO1xcblxcdFxcdFxcdHNhbXBsZVVWLnggPSBhdGFuKCBmbGlwTm9ybWFsICogcmVmbGVjdFZlYy56LCBmbGlwTm9ybWFsICogcmVmbGVjdFZlYy54ICkgKiBSRUNJUFJPQ0FMX1BJMiArIDAuNTtcXG5cXHRcXHRcXHQjaWZkZWYgVEVYVFVSRV9MT0RfRVhUXFxuXFx0XFx0XFx0XFx0dmVjNCBlbnZNYXBDb2xvciA9IHRleHR1cmUyRExvZEVYVCggZW52TWFwLCBzYW1wbGVVViwgc3BlY3VsYXJNSVBMZXZlbCApO1xcblxcdFxcdFxcdCNlbHNlXFxuXFx0XFx0XFx0XFx0dmVjNCBlbnZNYXBDb2xvciA9IHRleHR1cmUyRCggZW52TWFwLCBzYW1wbGVVViwgc3BlY3VsYXJNSVBMZXZlbCApO1xcblxcdFxcdFxcdCNlbmRpZlxcblxcdFxcdFxcdGVudk1hcENvbG9yLnJnYiA9IGVudk1hcFRleGVsVG9MaW5lYXIoIGVudk1hcENvbG9yICkucmdiO1xcblxcdFxcdCNlbGlmIGRlZmluZWQoIEVOVk1BUF9UWVBFX1NQSEVSRSApXFxuXFx0XFx0XFx0dmVjMyByZWZsZWN0VmlldyA9IGZsaXBOb3JtYWwgKiBub3JtYWxpemUoICggdmlld01hdHJpeCAqIHZlYzQoIHJlZmxlY3RWZWMsIDAuMCApICkueHl6ICsgdmVjMyggMC4wLDAuMCwxLjAgKSApO1xcblxcdFxcdFxcdCNpZmRlZiBURVhUVVJFX0xPRF9FWFRcXG5cXHRcXHRcXHRcXHR2ZWM0IGVudk1hcENvbG9yID0gdGV4dHVyZTJETG9kRVhUKCBlbnZNYXAsIHJlZmxlY3RWaWV3Lnh5ICogMC41ICsgMC41LCBzcGVjdWxhck1JUExldmVsICk7XFxuXFx0XFx0XFx0I2Vsc2VcXG5cXHRcXHRcXHRcXHR2ZWM0IGVudk1hcENvbG9yID0gdGV4dHVyZTJEKCBlbnZNYXAsIHJlZmxlY3RWaWV3Lnh5ICogMC41ICsgMC41LCBzcGVjdWxhck1JUExldmVsICk7XFxuXFx0XFx0XFx0I2VuZGlmXFxuXFx0XFx0XFx0ZW52TWFwQ29sb3IucmdiID0gZW52TWFwVGV4ZWxUb0xpbmVhciggZW52TWFwQ29sb3IgKS5yZ2I7XFxuXFx0XFx0I2VuZGlmXFxuXFx0XFx0cmV0dXJuIGVudk1hcENvbG9yLnJnYiAqIGVudk1hcEludGVuc2l0eTtcXG5cXHR9XFxuI2VuZGlmXFxuXCI7XG5USFJFRS5TaGFkZXJDaHVuay5saWdodHNfcGhvbmdfZnJhZ21lbnQ9XCJCbGlublBob25nTWF0ZXJpYWwgbWF0ZXJpYWw7XFxubWF0ZXJpYWwuZGlmZnVzZUNvbG9yID0gZGlmZnVzZUNvbG9yLnJnYjtcXG5tYXRlcmlhbC5zcGVjdWxhckNvbG9yID0gc3BlY3VsYXI7XFxubWF0ZXJpYWwuc3BlY3VsYXJTaGluaW5lc3MgPSBzaGluaW5lc3M7XFxubWF0ZXJpYWwuc3BlY3VsYXJTdHJlbmd0aCA9IHNwZWN1bGFyU3RyZW5ndGg7XFxuXCI7VEhSRUUuU2hhZGVyQ2h1bmsubGlnaHRzX3Bob25nX3BhcnNfZnJhZ21lbnQ9XCJ2YXJ5aW5nIHZlYzMgdlZpZXdQb3NpdGlvbjtcXG4jaWZuZGVmIEZMQVRfU0hBREVEXFxuXFx0dmFyeWluZyB2ZWMzIHZOb3JtYWw7XFxuI2VuZGlmXFxuc3RydWN0IEJsaW5uUGhvbmdNYXRlcmlhbCB7XFxuXFx0dmVjM1xcdGRpZmZ1c2VDb2xvcjtcXG5cXHR2ZWMzXFx0c3BlY3VsYXJDb2xvcjtcXG5cXHRmbG9hdFxcdHNwZWN1bGFyU2hpbmluZXNzO1xcblxcdGZsb2F0XFx0c3BlY3VsYXJTdHJlbmd0aDtcXG59O1xcbnZvaWQgUkVfRGlyZWN0X0JsaW5uUGhvbmcoIGNvbnN0IGluIEluY2lkZW50TGlnaHQgZGlyZWN0TGlnaHQsIGNvbnN0IGluIEdlb21ldHJpY0NvbnRleHQgZ2VvbWV0cnksIGNvbnN0IGluIEJsaW5uUGhvbmdNYXRlcmlhbCBtYXRlcmlhbCwgaW5vdXQgUmVmbGVjdGVkTGlnaHQgcmVmbGVjdGVkTGlnaHQgKSB7XFxuXFx0ZmxvYXQgZG90TkwgPSBzYXR1cmF0ZSggZG90KCBnZW9tZXRyeS5ub3JtYWwsIGRpcmVjdExpZ2h0LmRpcmVjdGlvbiApICk7XFxuXFx0dmVjMyBpcnJhZGlhbmNlID0gZG90TkwgKiBkaXJlY3RMaWdodC5jb2xvcjtcXG5cXHQjaWZuZGVmIFBIWVNJQ0FMTFlfQ09SUkVDVF9MSUdIVFNcXG5cXHRcXHRpcnJhZGlhbmNlICo9IFBJO1xcblxcdCNlbmRpZlxcblxcdHJlZmxlY3RlZExpZ2h0LmRpcmVjdERpZmZ1c2UgKz0gaXJyYWRpYW5jZSAqIEJSREZfRGlmZnVzZV9MYW1iZXJ0KCBtYXRlcmlhbC5kaWZmdXNlQ29sb3IgKTtcXG5cXHRyZWZsZWN0ZWRMaWdodC5kaXJlY3RTcGVjdWxhciArPSBpcnJhZGlhbmNlICogQlJERl9TcGVjdWxhcl9CbGlublBob25nKCBkaXJlY3RMaWdodCwgZ2VvbWV0cnksIG1hdGVyaWFsLnNwZWN1bGFyQ29sb3IsIG1hdGVyaWFsLnNwZWN1bGFyU2hpbmluZXNzICkgKiBtYXRlcmlhbC5zcGVjdWxhclN0cmVuZ3RoO1xcbn1cXG52b2lkIFJFX0luZGlyZWN0RGlmZnVzZV9CbGlublBob25nKCBjb25zdCBpbiB2ZWMzIGlycmFkaWFuY2UsIGNvbnN0IGluIEdlb21ldHJpY0NvbnRleHQgZ2VvbWV0cnksIGNvbnN0IGluIEJsaW5uUGhvbmdNYXRlcmlhbCBtYXRlcmlhbCwgaW5vdXQgUmVmbGVjdGVkTGlnaHQgcmVmbGVjdGVkTGlnaHQgKSB7XFxuXFx0cmVmbGVjdGVkTGlnaHQuaW5kaXJlY3REaWZmdXNlICs9IGlycmFkaWFuY2UgKiBCUkRGX0RpZmZ1c2VfTGFtYmVydCggbWF0ZXJpYWwuZGlmZnVzZUNvbG9yICk7XFxufVxcbiNkZWZpbmUgUkVfRGlyZWN0XFx0XFx0XFx0XFx0UkVfRGlyZWN0X0JsaW5uUGhvbmdcXG4jZGVmaW5lIFJFX0luZGlyZWN0RGlmZnVzZVxcdFxcdFJFX0luZGlyZWN0RGlmZnVzZV9CbGlublBob25nXFxuI2RlZmluZSBNYXRlcmlhbF9MaWdodFByb2JlTE9EKCBtYXRlcmlhbCApXFx0KDApXFxuXCI7XG5USFJFRS5TaGFkZXJDaHVuay5saWdodHNfcGh5c2ljYWxfZnJhZ21lbnQ9XCJQaHlzaWNhbE1hdGVyaWFsIG1hdGVyaWFsO1xcbm1hdGVyaWFsLmRpZmZ1c2VDb2xvciA9IGRpZmZ1c2VDb2xvci5yZ2IgKiAoIDEuMCAtIG1ldGFsbmVzc0ZhY3RvciApO1xcbm1hdGVyaWFsLnNwZWN1bGFyUm91Z2huZXNzID0gY2xhbXAoIHJvdWdobmVzc0ZhY3RvciwgMC4wNCwgMS4wICk7XFxuI2lmZGVmIFNUQU5EQVJEXFxuXFx0bWF0ZXJpYWwuc3BlY3VsYXJDb2xvciA9IG1peCggdmVjMyggREVGQVVMVF9TUEVDVUxBUl9DT0VGRklDSUVOVCApLCBkaWZmdXNlQ29sb3IucmdiLCBtZXRhbG5lc3NGYWN0b3IgKTtcXG4jZWxzZVxcblxcdG1hdGVyaWFsLnNwZWN1bGFyQ29sb3IgPSBtaXgoIHZlYzMoIE1BWElNVU1fU1BFQ1VMQVJfQ09FRkZJQ0lFTlQgKiBwb3cyKCByZWZsZWN0aXZpdHkgKSApLCBkaWZmdXNlQ29sb3IucmdiLCBtZXRhbG5lc3NGYWN0b3IgKTtcXG5cXHRtYXRlcmlhbC5jbGVhckNvYXQgPSBzYXR1cmF0ZSggY2xlYXJDb2F0ICk7XFx0bWF0ZXJpYWwuY2xlYXJDb2F0Um91Z2huZXNzID0gY2xhbXAoIGNsZWFyQ29hdFJvdWdobmVzcywgMC4wNCwgMS4wICk7XFxuI2VuZGlmXFxuXCI7XG5USFJFRS5TaGFkZXJDaHVuay5saWdodHNfcGh5c2ljYWxfcGFyc19mcmFnbWVudD1cInN0cnVjdCBQaHlzaWNhbE1hdGVyaWFsIHtcXG5cXHR2ZWMzXFx0ZGlmZnVzZUNvbG9yO1xcblxcdGZsb2F0XFx0c3BlY3VsYXJSb3VnaG5lc3M7XFxuXFx0dmVjM1xcdHNwZWN1bGFyQ29sb3I7XFxuXFx0I2lmbmRlZiBTVEFOREFSRFxcblxcdFxcdGZsb2F0IGNsZWFyQ29hdDtcXG5cXHRcXHRmbG9hdCBjbGVhckNvYXRSb3VnaG5lc3M7XFxuXFx0I2VuZGlmXFxufTtcXG4jZGVmaW5lIE1BWElNVU1fU1BFQ1VMQVJfQ09FRkZJQ0lFTlQgMC4xNlxcbiNkZWZpbmUgREVGQVVMVF9TUEVDVUxBUl9DT0VGRklDSUVOVCAwLjA0XFxuZmxvYXQgY2xlYXJDb2F0REhSQXBwcm94KCBjb25zdCBpbiBmbG9hdCByb3VnaG5lc3MsIGNvbnN0IGluIGZsb2F0IGRvdE5MICkge1xcblxcdHJldHVybiBERUZBVUxUX1NQRUNVTEFSX0NPRUZGSUNJRU5UICsgKCAxLjAgLSBERUZBVUxUX1NQRUNVTEFSX0NPRUZGSUNJRU5UICkgKiAoIHBvdyggMS4wIC0gZG90TkwsIDUuMCApICogcG93KCAxLjAgLSByb3VnaG5lc3MsIDIuMCApICk7XFxufVxcbnZvaWQgUkVfRGlyZWN0X1BoeXNpY2FsKCBjb25zdCBpbiBJbmNpZGVudExpZ2h0IGRpcmVjdExpZ2h0LCBjb25zdCBpbiBHZW9tZXRyaWNDb250ZXh0IGdlb21ldHJ5LCBjb25zdCBpbiBQaHlzaWNhbE1hdGVyaWFsIG1hdGVyaWFsLCBpbm91dCBSZWZsZWN0ZWRMaWdodCByZWZsZWN0ZWRMaWdodCApIHtcXG5cXHRmbG9hdCBkb3ROTCA9IHNhdHVyYXRlKCBkb3QoIGdlb21ldHJ5Lm5vcm1hbCwgZGlyZWN0TGlnaHQuZGlyZWN0aW9uICkgKTtcXG5cXHR2ZWMzIGlycmFkaWFuY2UgPSBkb3ROTCAqIGRpcmVjdExpZ2h0LmNvbG9yO1xcblxcdCNpZm5kZWYgUEhZU0lDQUxMWV9DT1JSRUNUX0xJR0hUU1xcblxcdFxcdGlycmFkaWFuY2UgKj0gUEk7XFxuXFx0I2VuZGlmXFxuXFx0I2lmbmRlZiBTVEFOREFSRFxcblxcdFxcdGZsb2F0IGNsZWFyQ29hdERIUiA9IG1hdGVyaWFsLmNsZWFyQ29hdCAqIGNsZWFyQ29hdERIUkFwcHJveCggbWF0ZXJpYWwuY2xlYXJDb2F0Um91Z2huZXNzLCBkb3ROTCApO1xcblxcdCNlbHNlXFxuXFx0XFx0ZmxvYXQgY2xlYXJDb2F0REhSID0gMC4wO1xcblxcdCNlbmRpZlxcblxcdHJlZmxlY3RlZExpZ2h0LmRpcmVjdFNwZWN1bGFyICs9ICggMS4wIC0gY2xlYXJDb2F0REhSICkgKiBpcnJhZGlhbmNlICogQlJERl9TcGVjdWxhcl9HR1goIGRpcmVjdExpZ2h0LCBnZW9tZXRyeSwgbWF0ZXJpYWwuc3BlY3VsYXJDb2xvciwgbWF0ZXJpYWwuc3BlY3VsYXJSb3VnaG5lc3MgKTtcXG5cXHRyZWZsZWN0ZWRMaWdodC5kaXJlY3REaWZmdXNlICs9ICggMS4wIC0gY2xlYXJDb2F0REhSICkgKiBpcnJhZGlhbmNlICogQlJERl9EaWZmdXNlX0xhbWJlcnQoIG1hdGVyaWFsLmRpZmZ1c2VDb2xvciApO1xcblxcdCNpZm5kZWYgU1RBTkRBUkRcXG5cXHRcXHRyZWZsZWN0ZWRMaWdodC5kaXJlY3RTcGVjdWxhciArPSBpcnJhZGlhbmNlICogbWF0ZXJpYWwuY2xlYXJDb2F0ICogQlJERl9TcGVjdWxhcl9HR1goIGRpcmVjdExpZ2h0LCBnZW9tZXRyeSwgdmVjMyggREVGQVVMVF9TUEVDVUxBUl9DT0VGRklDSUVOVCApLCBtYXRlcmlhbC5jbGVhckNvYXRSb3VnaG5lc3MgKTtcXG5cXHQjZW5kaWZcXG59XFxudm9pZCBSRV9JbmRpcmVjdERpZmZ1c2VfUGh5c2ljYWwoIGNvbnN0IGluIHZlYzMgaXJyYWRpYW5jZSwgY29uc3QgaW4gR2VvbWV0cmljQ29udGV4dCBnZW9tZXRyeSwgY29uc3QgaW4gUGh5c2ljYWxNYXRlcmlhbCBtYXRlcmlhbCwgaW5vdXQgUmVmbGVjdGVkTGlnaHQgcmVmbGVjdGVkTGlnaHQgKSB7XFxuXFx0cmVmbGVjdGVkTGlnaHQuaW5kaXJlY3REaWZmdXNlICs9IGlycmFkaWFuY2UgKiBCUkRGX0RpZmZ1c2VfTGFtYmVydCggbWF0ZXJpYWwuZGlmZnVzZUNvbG9yICk7XFxufVxcbnZvaWQgUkVfSW5kaXJlY3RTcGVjdWxhcl9QaHlzaWNhbCggY29uc3QgaW4gdmVjMyByYWRpYW5jZSwgY29uc3QgaW4gdmVjMyBjbGVhckNvYXRSYWRpYW5jZSwgY29uc3QgaW4gR2VvbWV0cmljQ29udGV4dCBnZW9tZXRyeSwgY29uc3QgaW4gUGh5c2ljYWxNYXRlcmlhbCBtYXRlcmlhbCwgaW5vdXQgUmVmbGVjdGVkTGlnaHQgcmVmbGVjdGVkTGlnaHQgKSB7XFxuXFx0I2lmbmRlZiBTVEFOREFSRFxcblxcdFxcdGZsb2F0IGRvdE5WID0gc2F0dXJhdGUoIGRvdCggZ2VvbWV0cnkubm9ybWFsLCBnZW9tZXRyeS52aWV3RGlyICkgKTtcXG5cXHRcXHRmbG9hdCBkb3ROTCA9IGRvdE5WO1xcblxcdFxcdGZsb2F0IGNsZWFyQ29hdERIUiA9IG1hdGVyaWFsLmNsZWFyQ29hdCAqIGNsZWFyQ29hdERIUkFwcHJveCggbWF0ZXJpYWwuY2xlYXJDb2F0Um91Z2huZXNzLCBkb3ROTCApO1xcblxcdCNlbHNlXFxuXFx0XFx0ZmxvYXQgY2xlYXJDb2F0REhSID0gMC4wO1xcblxcdCNlbmRpZlxcblxcdHJlZmxlY3RlZExpZ2h0LmluZGlyZWN0U3BlY3VsYXIgKz0gKCAxLjAgLSBjbGVhckNvYXRESFIgKSAqIHJhZGlhbmNlICogQlJERl9TcGVjdWxhcl9HR1hfRW52aXJvbm1lbnQoIGdlb21ldHJ5LCBtYXRlcmlhbC5zcGVjdWxhckNvbG9yLCBtYXRlcmlhbC5zcGVjdWxhclJvdWdobmVzcyApO1xcblxcdCNpZm5kZWYgU1RBTkRBUkRcXG5cXHRcXHRyZWZsZWN0ZWRMaWdodC5pbmRpcmVjdFNwZWN1bGFyICs9IGNsZWFyQ29hdFJhZGlhbmNlICogbWF0ZXJpYWwuY2xlYXJDb2F0ICogQlJERl9TcGVjdWxhcl9HR1hfRW52aXJvbm1lbnQoIGdlb21ldHJ5LCB2ZWMzKCBERUZBVUxUX1NQRUNVTEFSX0NPRUZGSUNJRU5UICksIG1hdGVyaWFsLmNsZWFyQ29hdFJvdWdobmVzcyApO1xcblxcdCNlbmRpZlxcbn1cXG4jZGVmaW5lIFJFX0RpcmVjdFxcdFxcdFxcdFxcdFJFX0RpcmVjdF9QaHlzaWNhbFxcbiNkZWZpbmUgUkVfSW5kaXJlY3REaWZmdXNlXFx0XFx0UkVfSW5kaXJlY3REaWZmdXNlX1BoeXNpY2FsXFxuI2RlZmluZSBSRV9JbmRpcmVjdFNwZWN1bGFyXFx0XFx0UkVfSW5kaXJlY3RTcGVjdWxhcl9QaHlzaWNhbFxcbiNkZWZpbmUgTWF0ZXJpYWxfQmxpbm5TaGluaW5lc3NFeHBvbmVudCggbWF0ZXJpYWwgKSAgIEdHWFJvdWdobmVzc1RvQmxpbm5FeHBvbmVudCggbWF0ZXJpYWwuc3BlY3VsYXJSb3VnaG5lc3MgKVxcbiNkZWZpbmUgTWF0ZXJpYWxfQ2xlYXJDb2F0X0JsaW5uU2hpbmluZXNzRXhwb25lbnQoIG1hdGVyaWFsICkgICBHR1hSb3VnaG5lc3NUb0JsaW5uRXhwb25lbnQoIG1hdGVyaWFsLmNsZWFyQ29hdFJvdWdobmVzcyApXFxuZmxvYXQgY29tcHV0ZVNwZWN1bGFyT2NjbHVzaW9uKCBjb25zdCBpbiBmbG9hdCBkb3ROViwgY29uc3QgaW4gZmxvYXQgYW1iaWVudE9jY2x1c2lvbiwgY29uc3QgaW4gZmxvYXQgcm91Z2huZXNzICkge1xcblxcdHJldHVybiBzYXR1cmF0ZSggcG93KCBkb3ROViArIGFtYmllbnRPY2NsdXNpb24sIGV4cDIoIC0gMTYuMCAqIHJvdWdobmVzcyAtIDEuMCApICkgLSAxLjAgKyBhbWJpZW50T2NjbHVzaW9uICk7XFxufVxcblwiO1xuVEhSRUUuU2hhZGVyQ2h1bmsubGlnaHRzX3RlbXBsYXRlPVwiXFxuR2VvbWV0cmljQ29udGV4dCBnZW9tZXRyeTtcXG5nZW9tZXRyeS5wb3NpdGlvbiA9IC0gdlZpZXdQb3NpdGlvbjtcXG5nZW9tZXRyeS5ub3JtYWwgPSBub3JtYWw7XFxuZ2VvbWV0cnkudmlld0RpciA9IG5vcm1hbGl6ZSggdlZpZXdQb3NpdGlvbiApO1xcbkluY2lkZW50TGlnaHQgZGlyZWN0TGlnaHQ7XFxuI2lmICggTlVNX1BPSU5UX0xJR0hUUyA+IDAgKSAmJiBkZWZpbmVkKCBSRV9EaXJlY3QgKVxcblxcdFBvaW50TGlnaHQgcG9pbnRMaWdodDtcXG5cXHRmb3IgKCBpbnQgaSA9IDA7IGkgPCBOVU1fUE9JTlRfTElHSFRTOyBpICsrICkge1xcblxcdFxcdHBvaW50TGlnaHQgPSBwb2ludExpZ2h0c1sgaSBdO1xcblxcdFxcdGdldFBvaW50RGlyZWN0TGlnaHRJcnJhZGlhbmNlKCBwb2ludExpZ2h0LCBnZW9tZXRyeSwgZGlyZWN0TGlnaHQgKTtcXG5cXHRcXHQjaWZkZWYgVVNFX1NIQURPV01BUFxcblxcdFxcdGRpcmVjdExpZ2h0LmNvbG9yICo9IGFsbCggYnZlYzIoIHBvaW50TGlnaHQuc2hhZG93LCBkaXJlY3RMaWdodC52aXNpYmxlICkgKSA/IGdldFBvaW50U2hhZG93KCBwb2ludFNoYWRvd01hcFsgaSBdLCBwb2ludExpZ2h0LnNoYWRvd01hcFNpemUsIHBvaW50TGlnaHQuc2hhZG93QmlhcywgcG9pbnRMaWdodC5zaGFkb3dSYWRpdXMsIHZQb2ludFNoYWRvd0Nvb3JkWyBpIF0gKSA6IDEuMDtcXG5cXHRcXHQjZW5kaWZcXG5cXHRcXHRSRV9EaXJlY3QoIGRpcmVjdExpZ2h0LCBnZW9tZXRyeSwgbWF0ZXJpYWwsIHJlZmxlY3RlZExpZ2h0ICk7XFxuXFx0fVxcbiNlbmRpZlxcbiNpZiAoIE5VTV9TUE9UX0xJR0hUUyA+IDAgKSAmJiBkZWZpbmVkKCBSRV9EaXJlY3QgKVxcblxcdFNwb3RMaWdodCBzcG90TGlnaHQ7XFxuXFx0Zm9yICggaW50IGkgPSAwOyBpIDwgTlVNX1NQT1RfTElHSFRTOyBpICsrICkge1xcblxcdFxcdHNwb3RMaWdodCA9IHNwb3RMaWdodHNbIGkgXTtcXG5cXHRcXHRnZXRTcG90RGlyZWN0TGlnaHRJcnJhZGlhbmNlKCBzcG90TGlnaHQsIGdlb21ldHJ5LCBkaXJlY3RMaWdodCApO1xcblxcdFxcdCNpZmRlZiBVU0VfU0hBRE9XTUFQXFxuXFx0XFx0ZGlyZWN0TGlnaHQuY29sb3IgKj0gYWxsKCBidmVjMiggc3BvdExpZ2h0LnNoYWRvdywgZGlyZWN0TGlnaHQudmlzaWJsZSApICkgPyBnZXRTaGFkb3coIHNwb3RTaGFkb3dNYXBbIGkgXSwgc3BvdExpZ2h0LnNoYWRvd01hcFNpemUsIHNwb3RMaWdodC5zaGFkb3dCaWFzLCBzcG90TGlnaHQuc2hhZG93UmFkaXVzLCB2U3BvdFNoYWRvd0Nvb3JkWyBpIF0gKSA6IDEuMDtcXG5cXHRcXHQjZW5kaWZcXG5cXHRcXHRSRV9EaXJlY3QoIGRpcmVjdExpZ2h0LCBnZW9tZXRyeSwgbWF0ZXJpYWwsIHJlZmxlY3RlZExpZ2h0ICk7XFxuXFx0fVxcbiNlbmRpZlxcbiNpZiAoIE5VTV9ESVJfTElHSFRTID4gMCApICYmIGRlZmluZWQoIFJFX0RpcmVjdCApXFxuXFx0RGlyZWN0aW9uYWxMaWdodCBkaXJlY3Rpb25hbExpZ2h0O1xcblxcdGZvciAoIGludCBpID0gMDsgaSA8IE5VTV9ESVJfTElHSFRTOyBpICsrICkge1xcblxcdFxcdGRpcmVjdGlvbmFsTGlnaHQgPSBkaXJlY3Rpb25hbExpZ2h0c1sgaSBdO1xcblxcdFxcdGdldERpcmVjdGlvbmFsRGlyZWN0TGlnaHRJcnJhZGlhbmNlKCBkaXJlY3Rpb25hbExpZ2h0LCBnZW9tZXRyeSwgZGlyZWN0TGlnaHQgKTtcXG5cXHRcXHQjaWZkZWYgVVNFX1NIQURPV01BUFxcblxcdFxcdGRpcmVjdExpZ2h0LmNvbG9yICo9IGFsbCggYnZlYzIoIGRpcmVjdGlvbmFsTGlnaHQuc2hhZG93LCBkaXJlY3RMaWdodC52aXNpYmxlICkgKSA/IGdldFNoYWRvdyggZGlyZWN0aW9uYWxTaGFkb3dNYXBbIGkgXSwgZGlyZWN0aW9uYWxMaWdodC5zaGFkb3dNYXBTaXplLCBkaXJlY3Rpb25hbExpZ2h0LnNoYWRvd0JpYXMsIGRpcmVjdGlvbmFsTGlnaHQuc2hhZG93UmFkaXVzLCB2RGlyZWN0aW9uYWxTaGFkb3dDb29yZFsgaSBdICkgOiAxLjA7XFxuXFx0XFx0I2VuZGlmXFxuXFx0XFx0UkVfRGlyZWN0KCBkaXJlY3RMaWdodCwgZ2VvbWV0cnksIG1hdGVyaWFsLCByZWZsZWN0ZWRMaWdodCApO1xcblxcdH1cXG4jZW5kaWZcXG4jaWYgZGVmaW5lZCggUkVfSW5kaXJlY3REaWZmdXNlIClcXG5cXHR2ZWMzIGlycmFkaWFuY2UgPSBnZXRBbWJpZW50TGlnaHRJcnJhZGlhbmNlKCBhbWJpZW50TGlnaHRDb2xvciApO1xcblxcdCNpZmRlZiBVU0VfTElHSFRNQVBcXG5cXHRcXHR2ZWMzIGxpZ2h0TWFwSXJyYWRpYW5jZSA9IHRleHR1cmUyRCggbGlnaHRNYXAsIHZVdjIgKS54eXogKiBsaWdodE1hcEludGVuc2l0eTtcXG5cXHRcXHQjaWZuZGVmIFBIWVNJQ0FMTFlfQ09SUkVDVF9MSUdIVFNcXG5cXHRcXHRcXHRsaWdodE1hcElycmFkaWFuY2UgKj0gUEk7XFxuXFx0XFx0I2VuZGlmXFxuXFx0XFx0aXJyYWRpYW5jZSArPSBsaWdodE1hcElycmFkaWFuY2U7XFxuXFx0I2VuZGlmXFxuXFx0I2lmICggTlVNX0hFTUlfTElHSFRTID4gMCApXFxuXFx0XFx0Zm9yICggaW50IGkgPSAwOyBpIDwgTlVNX0hFTUlfTElHSFRTOyBpICsrICkge1xcblxcdFxcdFxcdGlycmFkaWFuY2UgKz0gZ2V0SGVtaXNwaGVyZUxpZ2h0SXJyYWRpYW5jZSggaGVtaXNwaGVyZUxpZ2h0c1sgaSBdLCBnZW9tZXRyeSApO1xcblxcdFxcdH1cXG5cXHQjZW5kaWZcXG5cXHQjaWYgZGVmaW5lZCggVVNFX0VOVk1BUCApICYmIGRlZmluZWQoIFBIWVNJQ0FMICkgJiYgZGVmaW5lZCggRU5WTUFQX1RZUEVfQ1VCRV9VViApXFxuXFx0IFxcdGlycmFkaWFuY2UgKz0gZ2V0TGlnaHRQcm9iZUluZGlyZWN0SXJyYWRpYW5jZSggZ2VvbWV0cnksIDggKTtcXG5cXHQjZW5kaWZcXG5cXHRSRV9JbmRpcmVjdERpZmZ1c2UoIGlycmFkaWFuY2UsIGdlb21ldHJ5LCBtYXRlcmlhbCwgcmVmbGVjdGVkTGlnaHQgKTtcXG4jZW5kaWZcXG4jaWYgZGVmaW5lZCggVVNFX0VOVk1BUCApICYmIGRlZmluZWQoIFJFX0luZGlyZWN0U3BlY3VsYXIgKVxcblxcdHZlYzMgcmFkaWFuY2UgPSBnZXRMaWdodFByb2JlSW5kaXJlY3RSYWRpYW5jZSggZ2VvbWV0cnksIE1hdGVyaWFsX0JsaW5uU2hpbmluZXNzRXhwb25lbnQoIG1hdGVyaWFsICksIDggKTtcXG5cXHQjaWZuZGVmIFNUQU5EQVJEXFxuXFx0XFx0dmVjMyBjbGVhckNvYXRSYWRpYW5jZSA9IGdldExpZ2h0UHJvYmVJbmRpcmVjdFJhZGlhbmNlKCBnZW9tZXRyeSwgTWF0ZXJpYWxfQ2xlYXJDb2F0X0JsaW5uU2hpbmluZXNzRXhwb25lbnQoIG1hdGVyaWFsICksIDggKTtcXG5cXHQjZWxzZVxcblxcdFxcdHZlYzMgY2xlYXJDb2F0UmFkaWFuY2UgPSB2ZWMzKCAwLjAgKTtcXG5cXHQjZW5kaWZcXG5cXHRcXHRcXG5cXHRSRV9JbmRpcmVjdFNwZWN1bGFyKCByYWRpYW5jZSwgY2xlYXJDb2F0UmFkaWFuY2UsIGdlb21ldHJ5LCBtYXRlcmlhbCwgcmVmbGVjdGVkTGlnaHQgKTtcXG4jZW5kaWZcXG5cIjtcblRIUkVFLlNoYWRlckNodW5rLmxvZ2RlcHRoYnVmX2ZyYWdtZW50PVwiI2lmIGRlZmluZWQoVVNFX0xPR0RFUFRIQlVGKSAmJiBkZWZpbmVkKFVTRV9MT0dERVBUSEJVRl9FWFQpXFxuXFx0Z2xfRnJhZ0RlcHRoRVhUID0gbG9nMih2RnJhZ0RlcHRoKSAqIGxvZ0RlcHRoQnVmRkMgKiAwLjU7XFxuI2VuZGlmXCI7VEhSRUUuU2hhZGVyQ2h1bmsubG9nZGVwdGhidWZfcGFyc19mcmFnbWVudD1cIiNpZmRlZiBVU0VfTE9HREVQVEhCVUZcXG5cXHR1bmlmb3JtIGZsb2F0IGxvZ0RlcHRoQnVmRkM7XFxuXFx0I2lmZGVmIFVTRV9MT0dERVBUSEJVRl9FWFRcXG5cXHRcXHR2YXJ5aW5nIGZsb2F0IHZGcmFnRGVwdGg7XFxuXFx0I2VuZGlmXFxuI2VuZGlmXFxuXCI7VEhSRUUuU2hhZGVyQ2h1bmsubG9nZGVwdGhidWZfcGFyc192ZXJ0ZXg9XCIjaWZkZWYgVVNFX0xPR0RFUFRIQlVGXFxuXFx0I2lmZGVmIFVTRV9MT0dERVBUSEJVRl9FWFRcXG5cXHRcXHR2YXJ5aW5nIGZsb2F0IHZGcmFnRGVwdGg7XFxuXFx0I2VuZGlmXFxuXFx0dW5pZm9ybSBmbG9hdCBsb2dEZXB0aEJ1ZkZDO1xcbiNlbmRpZlwiO1xuVEhSRUUuU2hhZGVyQ2h1bmsubG9nZGVwdGhidWZfdmVydGV4PVwiI2lmZGVmIFVTRV9MT0dERVBUSEJVRlxcblxcdGdsX1Bvc2l0aW9uLnogPSBsb2cyKG1heCggRVBTSUxPTiwgZ2xfUG9zaXRpb24udyArIDEuMCApKSAqIGxvZ0RlcHRoQnVmRkM7XFxuXFx0I2lmZGVmIFVTRV9MT0dERVBUSEJVRl9FWFRcXG5cXHRcXHR2RnJhZ0RlcHRoID0gMS4wICsgZ2xfUG9zaXRpb24udztcXG5cXHQjZWxzZVxcblxcdFxcdGdsX1Bvc2l0aW9uLnogPSAoZ2xfUG9zaXRpb24ueiAtIDEuMCkgKiBnbF9Qb3NpdGlvbi53O1xcblxcdCNlbmRpZlxcbiNlbmRpZlxcblwiO1RIUkVFLlNoYWRlckNodW5rLm1hcF9mcmFnbWVudD1cIiNpZmRlZiBVU0VfTUFQXFxuXFx0dmVjNCB0ZXhlbENvbG9yID0gdGV4dHVyZTJEKCBtYXAsIHZVdiApO1xcblxcdHRleGVsQ29sb3IgPSBtYXBUZXhlbFRvTGluZWFyKCB0ZXhlbENvbG9yICk7XFxuXFx0ZGlmZnVzZUNvbG9yICo9IHRleGVsQ29sb3I7XFxuI2VuZGlmXFxuXCI7XG5USFJFRS5TaGFkZXJDaHVuay5tYXBfcGFyc19mcmFnbWVudD1cIiNpZmRlZiBVU0VfTUFQXFxuXFx0dW5pZm9ybSBzYW1wbGVyMkQgbWFwO1xcbiNlbmRpZlxcblwiO1RIUkVFLlNoYWRlckNodW5rLm1hcF9wYXJ0aWNsZV9mcmFnbWVudD1cIiNpZmRlZiBVU0VfTUFQXFxuXFx0dmVjNCBtYXBUZXhlbCA9IHRleHR1cmUyRCggbWFwLCB2ZWMyKCBnbF9Qb2ludENvb3JkLngsIDEuMCAtIGdsX1BvaW50Q29vcmQueSApICogb2Zmc2V0UmVwZWF0Lnp3ICsgb2Zmc2V0UmVwZWF0Lnh5ICk7XFxuXFx0ZGlmZnVzZUNvbG9yICo9IG1hcFRleGVsVG9MaW5lYXIoIG1hcFRleGVsICk7XFxuI2VuZGlmXFxuXCI7VEhSRUUuU2hhZGVyQ2h1bmsubWFwX3BhcnRpY2xlX3BhcnNfZnJhZ21lbnQ9XCIjaWZkZWYgVVNFX01BUFxcblxcdHVuaWZvcm0gdmVjNCBvZmZzZXRSZXBlYXQ7XFxuXFx0dW5pZm9ybSBzYW1wbGVyMkQgbWFwO1xcbiNlbmRpZlxcblwiO1RIUkVFLlNoYWRlckNodW5rLm1ldGFsbmVzc21hcF9mcmFnbWVudD1cImZsb2F0IG1ldGFsbmVzc0ZhY3RvciA9IG1ldGFsbmVzcztcXG4jaWZkZWYgVVNFX01FVEFMTkVTU01BUFxcblxcdHZlYzQgdGV4ZWxNZXRhbG5lc3MgPSB0ZXh0dXJlMkQoIG1ldGFsbmVzc01hcCwgdlV2ICk7XFxuXFx0bWV0YWxuZXNzRmFjdG9yICo9IHRleGVsTWV0YWxuZXNzLnI7XFxuI2VuZGlmXFxuXCI7XG5USFJFRS5TaGFkZXJDaHVuay5tZXRhbG5lc3NtYXBfcGFyc19mcmFnbWVudD1cIiNpZmRlZiBVU0VfTUVUQUxORVNTTUFQXFxuXFx0dW5pZm9ybSBzYW1wbGVyMkQgbWV0YWxuZXNzTWFwO1xcbiNlbmRpZlwiO1RIUkVFLlNoYWRlckNodW5rLm1vcnBobm9ybWFsX3ZlcnRleD1cIiNpZmRlZiBVU0VfTU9SUEhOT1JNQUxTXFxuXFx0b2JqZWN0Tm9ybWFsICs9ICggbW9ycGhOb3JtYWwwIC0gbm9ybWFsICkgKiBtb3JwaFRhcmdldEluZmx1ZW5jZXNbIDAgXTtcXG5cXHRvYmplY3ROb3JtYWwgKz0gKCBtb3JwaE5vcm1hbDEgLSBub3JtYWwgKSAqIG1vcnBoVGFyZ2V0SW5mbHVlbmNlc1sgMSBdO1xcblxcdG9iamVjdE5vcm1hbCArPSAoIG1vcnBoTm9ybWFsMiAtIG5vcm1hbCApICogbW9ycGhUYXJnZXRJbmZsdWVuY2VzWyAyIF07XFxuXFx0b2JqZWN0Tm9ybWFsICs9ICggbW9ycGhOb3JtYWwzIC0gbm9ybWFsICkgKiBtb3JwaFRhcmdldEluZmx1ZW5jZXNbIDMgXTtcXG4jZW5kaWZcXG5cIjtcblRIUkVFLlNoYWRlckNodW5rLm1vcnBodGFyZ2V0X3BhcnNfdmVydGV4PVwiI2lmZGVmIFVTRV9NT1JQSFRBUkdFVFNcXG5cXHQjaWZuZGVmIFVTRV9NT1JQSE5PUk1BTFNcXG5cXHR1bmlmb3JtIGZsb2F0IG1vcnBoVGFyZ2V0SW5mbHVlbmNlc1sgOCBdO1xcblxcdCNlbHNlXFxuXFx0dW5pZm9ybSBmbG9hdCBtb3JwaFRhcmdldEluZmx1ZW5jZXNbIDQgXTtcXG5cXHQjZW5kaWZcXG4jZW5kaWZcIjtUSFJFRS5TaGFkZXJDaHVuay5tb3JwaHRhcmdldF92ZXJ0ZXg9XCIjaWZkZWYgVVNFX01PUlBIVEFSR0VUU1xcblxcdHRyYW5zZm9ybWVkICs9ICggbW9ycGhUYXJnZXQwIC0gcG9zaXRpb24gKSAqIG1vcnBoVGFyZ2V0SW5mbHVlbmNlc1sgMCBdO1xcblxcdHRyYW5zZm9ybWVkICs9ICggbW9ycGhUYXJnZXQxIC0gcG9zaXRpb24gKSAqIG1vcnBoVGFyZ2V0SW5mbHVlbmNlc1sgMSBdO1xcblxcdHRyYW5zZm9ybWVkICs9ICggbW9ycGhUYXJnZXQyIC0gcG9zaXRpb24gKSAqIG1vcnBoVGFyZ2V0SW5mbHVlbmNlc1sgMiBdO1xcblxcdHRyYW5zZm9ybWVkICs9ICggbW9ycGhUYXJnZXQzIC0gcG9zaXRpb24gKSAqIG1vcnBoVGFyZ2V0SW5mbHVlbmNlc1sgMyBdO1xcblxcdCNpZm5kZWYgVVNFX01PUlBITk9STUFMU1xcblxcdHRyYW5zZm9ybWVkICs9ICggbW9ycGhUYXJnZXQ0IC0gcG9zaXRpb24gKSAqIG1vcnBoVGFyZ2V0SW5mbHVlbmNlc1sgNCBdO1xcblxcdHRyYW5zZm9ybWVkICs9ICggbW9ycGhUYXJnZXQ1IC0gcG9zaXRpb24gKSAqIG1vcnBoVGFyZ2V0SW5mbHVlbmNlc1sgNSBdO1xcblxcdHRyYW5zZm9ybWVkICs9ICggbW9ycGhUYXJnZXQ2IC0gcG9zaXRpb24gKSAqIG1vcnBoVGFyZ2V0SW5mbHVlbmNlc1sgNiBdO1xcblxcdHRyYW5zZm9ybWVkICs9ICggbW9ycGhUYXJnZXQ3IC0gcG9zaXRpb24gKSAqIG1vcnBoVGFyZ2V0SW5mbHVlbmNlc1sgNyBdO1xcblxcdCNlbmRpZlxcbiNlbmRpZlxcblwiO1xuVEhSRUUuU2hhZGVyQ2h1bmsubm9ybWFsX2ZsaXA9XCIjaWZkZWYgRE9VQkxFX1NJREVEXFxuXFx0ZmxvYXQgZmxpcE5vcm1hbCA9ICggZmxvYXQoIGdsX0Zyb250RmFjaW5nICkgKiAyLjAgLSAxLjAgKTtcXG4jZWxzZVxcblxcdGZsb2F0IGZsaXBOb3JtYWwgPSAxLjA7XFxuI2VuZGlmXFxuXCI7VEhSRUUuU2hhZGVyQ2h1bmsubm9ybWFsX2ZyYWdtZW50PVwiI2lmZGVmIEZMQVRfU0hBREVEXFxuXFx0dmVjMyBmZHggPSB2ZWMzKCBkRmR4KCB2Vmlld1Bvc2l0aW9uLnggKSwgZEZkeCggdlZpZXdQb3NpdGlvbi55ICksIGRGZHgoIHZWaWV3UG9zaXRpb24ueiApICk7XFxuXFx0dmVjMyBmZHkgPSB2ZWMzKCBkRmR5KCB2Vmlld1Bvc2l0aW9uLnggKSwgZEZkeSggdlZpZXdQb3NpdGlvbi55ICksIGRGZHkoIHZWaWV3UG9zaXRpb24ueiApICk7XFxuXFx0dmVjMyBub3JtYWwgPSBub3JtYWxpemUoIGNyb3NzKCBmZHgsIGZkeSApICk7XFxuI2Vsc2VcXG5cXHR2ZWMzIG5vcm1hbCA9IG5vcm1hbGl6ZSggdk5vcm1hbCApICogZmxpcE5vcm1hbDtcXG4jZW5kaWZcXG4jaWZkZWYgVVNFX05PUk1BTE1BUFxcblxcdG5vcm1hbCA9IHBlcnR1cmJOb3JtYWwyQXJiKCAtdlZpZXdQb3NpdGlvbiwgbm9ybWFsICk7XFxuI2VsaWYgZGVmaW5lZCggVVNFX0JVTVBNQVAgKVxcblxcdG5vcm1hbCA9IHBlcnR1cmJOb3JtYWxBcmIoIC12Vmlld1Bvc2l0aW9uLCBub3JtYWwsIGRIZHh5X2Z3ZCgpICk7XFxuI2VuZGlmXFxuXCI7XG5USFJFRS5TaGFkZXJDaHVuay5ub3JtYWxtYXBfcGFyc19mcmFnbWVudD1cIiNpZmRlZiBVU0VfTk9STUFMTUFQXFxuXFx0dW5pZm9ybSBzYW1wbGVyMkQgbm9ybWFsTWFwO1xcblxcdHVuaWZvcm0gdmVjMiBub3JtYWxTY2FsZTtcXG5cXHR2ZWMzIHBlcnR1cmJOb3JtYWwyQXJiKCB2ZWMzIGV5ZV9wb3MsIHZlYzMgc3VyZl9ub3JtICkge1xcblxcdFxcdHZlYzMgcTAgPSBkRmR4KCBleWVfcG9zLnh5eiApO1xcblxcdFxcdHZlYzMgcTEgPSBkRmR5KCBleWVfcG9zLnh5eiApO1xcblxcdFxcdHZlYzIgc3QwID0gZEZkeCggdlV2LnN0ICk7XFxuXFx0XFx0dmVjMiBzdDEgPSBkRmR5KCB2VXYuc3QgKTtcXG5cXHRcXHR2ZWMzIFMgPSBub3JtYWxpemUoIHEwICogc3QxLnQgLSBxMSAqIHN0MC50ICk7XFxuXFx0XFx0dmVjMyBUID0gbm9ybWFsaXplKCAtcTAgKiBzdDEucyArIHExICogc3QwLnMgKTtcXG5cXHRcXHR2ZWMzIE4gPSBub3JtYWxpemUoIHN1cmZfbm9ybSApO1xcblxcdFxcdHZlYzMgbWFwTiA9IHRleHR1cmUyRCggbm9ybWFsTWFwLCB2VXYgKS54eXogKiAyLjAgLSAxLjA7XFxuXFx0XFx0bWFwTi54eSA9IG5vcm1hbFNjYWxlICogbWFwTi54eTtcXG5cXHRcXHRtYXQzIHRzbiA9IG1hdDMoIFMsIFQsIE4gKTtcXG5cXHRcXHRyZXR1cm4gbm9ybWFsaXplKCB0c24gKiBtYXBOICk7XFxuXFx0fVxcbiNlbmRpZlxcblwiO1xuVEhSRUUuU2hhZGVyQ2h1bmsucGFja2luZz1cInZlYzMgcGFja05vcm1hbFRvUkdCKCBjb25zdCBpbiB2ZWMzIG5vcm1hbCApIHtcXG4gIHJldHVybiBub3JtYWxpemUoIG5vcm1hbCApICogMC41ICsgMC41O1xcbn1cXG52ZWMzIHVucGFja1JHQlRvTm9ybWFsKCBjb25zdCBpbiB2ZWMzIHJnYiApIHtcXG4gIHJldHVybiAxLjAgLSAyLjAgKiByZ2IueHl6O1xcbn1cXG5jb25zdCBmbG9hdCBQYWNrVXBzY2FsZSA9IDI1Ni4gLyAyNTUuO2NvbnN0IGZsb2F0IFVucGFja0Rvd25zY2FsZSA9IDI1NS4gLyAyNTYuO1xcbmNvbnN0IHZlYzMgUGFja0ZhY3RvcnMgPSB2ZWMzKCAyNTYuICogMjU2LiAqIDI1Ni4sIDI1Ni4gKiAyNTYuLCAgMjU2LiApO1xcbmNvbnN0IHZlYzQgVW5wYWNrRmFjdG9ycyA9IFVucGFja0Rvd25zY2FsZSAvIHZlYzQoIFBhY2tGYWN0b3JzLCAxLiApO1xcbmNvbnN0IGZsb2F0IFNoaWZ0UmlnaHQ4ID0gMS4gLyAyNTYuO1xcbnZlYzQgcGFja0RlcHRoVG9SR0JBKCBjb25zdCBpbiBmbG9hdCB2ICkge1xcblxcdHZlYzQgciA9IHZlYzQoIGZyYWN0KCB2ICogUGFja0ZhY3RvcnMgKSwgdiApO1xcblxcdHIueXp3IC09IHIueHl6ICogU2hpZnRSaWdodDg7XFx0cmV0dXJuIHIgKiBQYWNrVXBzY2FsZTtcXG59XFxuZmxvYXQgdW5wYWNrUkdCQVRvRGVwdGgoIGNvbnN0IGluIHZlYzQgdiApIHtcXG5cXHRyZXR1cm4gZG90KCB2LCBVbnBhY2tGYWN0b3JzICk7XFxufVxcbmZsb2F0IHZpZXdaVG9PcnRob2dyYXBoaWNEZXB0aCggY29uc3QgaW4gZmxvYXQgdmlld1osIGNvbnN0IGluIGZsb2F0IG5lYXIsIGNvbnN0IGluIGZsb2F0IGZhciApIHtcXG4gIHJldHVybiAoIHZpZXdaICsgbmVhciApIC8gKCBuZWFyIC0gZmFyICk7XFxufVxcbmZsb2F0IG9ydGhvZ3JhcGhpY0RlcHRoVG9WaWV3WiggY29uc3QgaW4gZmxvYXQgbGluZWFyQ2xpcFosIGNvbnN0IGluIGZsb2F0IG5lYXIsIGNvbnN0IGluIGZsb2F0IGZhciApIHtcXG4gIHJldHVybiBsaW5lYXJDbGlwWiAqICggbmVhciAtIGZhciApIC0gbmVhcjtcXG59XFxuZmxvYXQgdmlld1pUb1BlcnNwZWN0aXZlRGVwdGgoIGNvbnN0IGluIGZsb2F0IHZpZXdaLCBjb25zdCBpbiBmbG9hdCBuZWFyLCBjb25zdCBpbiBmbG9hdCBmYXIgKSB7XFxuICByZXR1cm4gKCggbmVhciArIHZpZXdaICkgKiBmYXIgKSAvICgoIGZhciAtIG5lYXIgKSAqIHZpZXdaICk7XFxufVxcbmZsb2F0IHBlcnNwZWN0aXZlRGVwdGhUb1ZpZXdaKCBjb25zdCBpbiBmbG9hdCBpbnZDbGlwWiwgY29uc3QgaW4gZmxvYXQgbmVhciwgY29uc3QgaW4gZmxvYXQgZmFyICkge1xcbiAgcmV0dXJuICggbmVhciAqIGZhciApIC8gKCAoIGZhciAtIG5lYXIgKSAqIGludkNsaXBaIC0gZmFyICk7XFxufVxcblwiO1xuVEhSRUUuU2hhZGVyQ2h1bmsucHJlbXVsdGlwbGllZF9hbHBoYV9mcmFnbWVudD1cIiNpZmRlZiBQUkVNVUxUSVBMSUVEX0FMUEhBXFxuXFx0Z2xfRnJhZ0NvbG9yLnJnYiAqPSBnbF9GcmFnQ29sb3IuYTtcXG4jZW5kaWZcXG5cIjtUSFJFRS5TaGFkZXJDaHVuay5wcm9qZWN0X3ZlcnRleD1cIiNpZmRlZiBVU0VfU0tJTk5JTkdcXG5cXHR2ZWM0IG12UG9zaXRpb24gPSBtb2RlbFZpZXdNYXRyaXggKiBza2lubmVkO1xcbiNlbHNlXFxuXFx0dmVjNCBtdlBvc2l0aW9uID0gbW9kZWxWaWV3TWF0cml4ICogdmVjNCggdHJhbnNmb3JtZWQsIDEuMCApO1xcbiNlbmRpZlxcbmdsX1Bvc2l0aW9uID0gcHJvamVjdGlvbk1hdHJpeCAqIG12UG9zaXRpb247XFxuXCI7VEhSRUUuU2hhZGVyQ2h1bmsucm91Z2huZXNzbWFwX2ZyYWdtZW50PVwiZmxvYXQgcm91Z2huZXNzRmFjdG9yID0gcm91Z2huZXNzO1xcbiNpZmRlZiBVU0VfUk9VR0hORVNTTUFQXFxuXFx0dmVjNCB0ZXhlbFJvdWdobmVzcyA9IHRleHR1cmUyRCggcm91Z2huZXNzTWFwLCB2VXYgKTtcXG5cXHRyb3VnaG5lc3NGYWN0b3IgKj0gdGV4ZWxSb3VnaG5lc3MucjtcXG4jZW5kaWZcXG5cIjtcblRIUkVFLlNoYWRlckNodW5rLnJvdWdobmVzc21hcF9wYXJzX2ZyYWdtZW50PVwiI2lmZGVmIFVTRV9ST1VHSE5FU1NNQVBcXG5cXHR1bmlmb3JtIHNhbXBsZXIyRCByb3VnaG5lc3NNYXA7XFxuI2VuZGlmXCI7VEhSRUUuU2hhZGVyQ2h1bmsuc2hhZG93bWFwX3BhcnNfZnJhZ21lbnQ9XCIjaWZkZWYgVVNFX1NIQURPV01BUFxcblxcdCNpZiBOVU1fRElSX0xJR0hUUyA+IDBcXG5cXHRcXHR1bmlmb3JtIHNhbXBsZXIyRCBkaXJlY3Rpb25hbFNoYWRvd01hcFsgTlVNX0RJUl9MSUdIVFMgXTtcXG5cXHRcXHR2YXJ5aW5nIHZlYzQgdkRpcmVjdGlvbmFsU2hhZG93Q29vcmRbIE5VTV9ESVJfTElHSFRTIF07XFxuXFx0I2VuZGlmXFxuXFx0I2lmIE5VTV9TUE9UX0xJR0hUUyA+IDBcXG5cXHRcXHR1bmlmb3JtIHNhbXBsZXIyRCBzcG90U2hhZG93TWFwWyBOVU1fU1BPVF9MSUdIVFMgXTtcXG5cXHRcXHR2YXJ5aW5nIHZlYzQgdlNwb3RTaGFkb3dDb29yZFsgTlVNX1NQT1RfTElHSFRTIF07XFxuXFx0I2VuZGlmXFxuXFx0I2lmIE5VTV9QT0lOVF9MSUdIVFMgPiAwXFxuXFx0XFx0dW5pZm9ybSBzYW1wbGVyMkQgcG9pbnRTaGFkb3dNYXBbIE5VTV9QT0lOVF9MSUdIVFMgXTtcXG5cXHRcXHR2YXJ5aW5nIHZlYzQgdlBvaW50U2hhZG93Q29vcmRbIE5VTV9QT0lOVF9MSUdIVFMgXTtcXG5cXHQjZW5kaWZcXG5cXHRmbG9hdCB0ZXh0dXJlMkRDb21wYXJlKCBzYW1wbGVyMkQgZGVwdGhzLCB2ZWMyIHV2LCBmbG9hdCBjb21wYXJlICkge1xcblxcdFxcdHJldHVybiBzdGVwKCBjb21wYXJlLCB1bnBhY2tSR0JBVG9EZXB0aCggdGV4dHVyZTJEKCBkZXB0aHMsIHV2ICkgKSApO1xcblxcdH1cXG5cXHRmbG9hdCB0ZXh0dXJlMkRTaGFkb3dMZXJwKCBzYW1wbGVyMkQgZGVwdGhzLCB2ZWMyIHNpemUsIHZlYzIgdXYsIGZsb2F0IGNvbXBhcmUgKSB7XFxuXFx0XFx0Y29uc3QgdmVjMiBvZmZzZXQgPSB2ZWMyKCAwLjAsIDEuMCApO1xcblxcdFxcdHZlYzIgdGV4ZWxTaXplID0gdmVjMiggMS4wICkgLyBzaXplO1xcblxcdFxcdHZlYzIgY2VudHJvaWRVViA9IGZsb29yKCB1diAqIHNpemUgKyAwLjUgKSAvIHNpemU7XFxuXFx0XFx0ZmxvYXQgbGIgPSB0ZXh0dXJlMkRDb21wYXJlKCBkZXB0aHMsIGNlbnRyb2lkVVYgKyB0ZXhlbFNpemUgKiBvZmZzZXQueHgsIGNvbXBhcmUgKTtcXG5cXHRcXHRmbG9hdCBsdCA9IHRleHR1cmUyRENvbXBhcmUoIGRlcHRocywgY2VudHJvaWRVViArIHRleGVsU2l6ZSAqIG9mZnNldC54eSwgY29tcGFyZSApO1xcblxcdFxcdGZsb2F0IHJiID0gdGV4dHVyZTJEQ29tcGFyZSggZGVwdGhzLCBjZW50cm9pZFVWICsgdGV4ZWxTaXplICogb2Zmc2V0Lnl4LCBjb21wYXJlICk7XFxuXFx0XFx0ZmxvYXQgcnQgPSB0ZXh0dXJlMkRDb21wYXJlKCBkZXB0aHMsIGNlbnRyb2lkVVYgKyB0ZXhlbFNpemUgKiBvZmZzZXQueXksIGNvbXBhcmUgKTtcXG5cXHRcXHR2ZWMyIGYgPSBmcmFjdCggdXYgKiBzaXplICsgMC41ICk7XFxuXFx0XFx0ZmxvYXQgYSA9IG1peCggbGIsIGx0LCBmLnkgKTtcXG5cXHRcXHRmbG9hdCBiID0gbWl4KCByYiwgcnQsIGYueSApO1xcblxcdFxcdGZsb2F0IGMgPSBtaXgoIGEsIGIsIGYueCApO1xcblxcdFxcdHJldHVybiBjO1xcblxcdH1cXG5cXHRmbG9hdCBnZXRTaGFkb3coIHNhbXBsZXIyRCBzaGFkb3dNYXAsIHZlYzIgc2hhZG93TWFwU2l6ZSwgZmxvYXQgc2hhZG93QmlhcywgZmxvYXQgc2hhZG93UmFkaXVzLCB2ZWM0IHNoYWRvd0Nvb3JkICkge1xcblxcdFxcdHNoYWRvd0Nvb3JkLnh5eiAvPSBzaGFkb3dDb29yZC53O1xcblxcdFxcdHNoYWRvd0Nvb3JkLnogKz0gc2hhZG93QmlhcztcXG5cXHRcXHRidmVjNCBpbkZydXN0dW1WZWMgPSBidmVjNCAoIHNoYWRvd0Nvb3JkLnggPj0gMC4wLCBzaGFkb3dDb29yZC54IDw9IDEuMCwgc2hhZG93Q29vcmQueSA+PSAwLjAsIHNoYWRvd0Nvb3JkLnkgPD0gMS4wICk7XFxuXFx0XFx0Ym9vbCBpbkZydXN0dW0gPSBhbGwoIGluRnJ1c3R1bVZlYyApO1xcblxcdFxcdGJ2ZWMyIGZydXN0dW1UZXN0VmVjID0gYnZlYzIoIGluRnJ1c3R1bSwgc2hhZG93Q29vcmQueiA8PSAxLjAgKTtcXG5cXHRcXHRib29sIGZydXN0dW1UZXN0ID0gYWxsKCBmcnVzdHVtVGVzdFZlYyApO1xcblxcdFxcdGlmICggZnJ1c3R1bVRlc3QgKSB7XFxuXFx0XFx0I2lmIGRlZmluZWQoIFNIQURPV01BUF9UWVBFX1BDRiApXFxuXFx0XFx0XFx0dmVjMiB0ZXhlbFNpemUgPSB2ZWMyKCAxLjAgKSAvIHNoYWRvd01hcFNpemU7XFxuXFx0XFx0XFx0ZmxvYXQgZHgwID0gLSB0ZXhlbFNpemUueCAqIHNoYWRvd1JhZGl1cztcXG5cXHRcXHRcXHRmbG9hdCBkeTAgPSAtIHRleGVsU2l6ZS55ICogc2hhZG93UmFkaXVzO1xcblxcdFxcdFxcdGZsb2F0IGR4MSA9ICsgdGV4ZWxTaXplLnggKiBzaGFkb3dSYWRpdXM7XFxuXFx0XFx0XFx0ZmxvYXQgZHkxID0gKyB0ZXhlbFNpemUueSAqIHNoYWRvd1JhZGl1cztcXG5cXHRcXHRcXHRyZXR1cm4gKFxcblxcdFxcdFxcdFxcdHRleHR1cmUyRENvbXBhcmUoIHNoYWRvd01hcCwgc2hhZG93Q29vcmQueHkgKyB2ZWMyKCBkeDAsIGR5MCApLCBzaGFkb3dDb29yZC56ICkgK1xcblxcdFxcdFxcdFxcdHRleHR1cmUyRENvbXBhcmUoIHNoYWRvd01hcCwgc2hhZG93Q29vcmQueHkgKyB2ZWMyKCAwLjAsIGR5MCApLCBzaGFkb3dDb29yZC56ICkgK1xcblxcdFxcdFxcdFxcdHRleHR1cmUyRENvbXBhcmUoIHNoYWRvd01hcCwgc2hhZG93Q29vcmQueHkgKyB2ZWMyKCBkeDEsIGR5MCApLCBzaGFkb3dDb29yZC56ICkgK1xcblxcdFxcdFxcdFxcdHRleHR1cmUyRENvbXBhcmUoIHNoYWRvd01hcCwgc2hhZG93Q29vcmQueHkgKyB2ZWMyKCBkeDAsIDAuMCApLCBzaGFkb3dDb29yZC56ICkgK1xcblxcdFxcdFxcdFxcdHRleHR1cmUyRENvbXBhcmUoIHNoYWRvd01hcCwgc2hhZG93Q29vcmQueHksIHNoYWRvd0Nvb3JkLnogKSArXFxuXFx0XFx0XFx0XFx0dGV4dHVyZTJEQ29tcGFyZSggc2hhZG93TWFwLCBzaGFkb3dDb29yZC54eSArIHZlYzIoIGR4MSwgMC4wICksIHNoYWRvd0Nvb3JkLnogKSArXFxuXFx0XFx0XFx0XFx0dGV4dHVyZTJEQ29tcGFyZSggc2hhZG93TWFwLCBzaGFkb3dDb29yZC54eSArIHZlYzIoIGR4MCwgZHkxICksIHNoYWRvd0Nvb3JkLnogKSArXFxuXFx0XFx0XFx0XFx0dGV4dHVyZTJEQ29tcGFyZSggc2hhZG93TWFwLCBzaGFkb3dDb29yZC54eSArIHZlYzIoIDAuMCwgZHkxICksIHNoYWRvd0Nvb3JkLnogKSArXFxuXFx0XFx0XFx0XFx0dGV4dHVyZTJEQ29tcGFyZSggc2hhZG93TWFwLCBzaGFkb3dDb29yZC54eSArIHZlYzIoIGR4MSwgZHkxICksIHNoYWRvd0Nvb3JkLnogKVxcblxcdFxcdFxcdCkgKiAoIDEuMCAvIDkuMCApO1xcblxcdFxcdCNlbGlmIGRlZmluZWQoIFNIQURPV01BUF9UWVBFX1BDRl9TT0ZUIClcXG5cXHRcXHRcXHR2ZWMyIHRleGVsU2l6ZSA9IHZlYzIoIDEuMCApIC8gc2hhZG93TWFwU2l6ZTtcXG5cXHRcXHRcXHRmbG9hdCBkeDAgPSAtIHRleGVsU2l6ZS54ICogc2hhZG93UmFkaXVzO1xcblxcdFxcdFxcdGZsb2F0IGR5MCA9IC0gdGV4ZWxTaXplLnkgKiBzaGFkb3dSYWRpdXM7XFxuXFx0XFx0XFx0ZmxvYXQgZHgxID0gKyB0ZXhlbFNpemUueCAqIHNoYWRvd1JhZGl1cztcXG5cXHRcXHRcXHRmbG9hdCBkeTEgPSArIHRleGVsU2l6ZS55ICogc2hhZG93UmFkaXVzO1xcblxcdFxcdFxcdHJldHVybiAoXFxuXFx0XFx0XFx0XFx0dGV4dHVyZTJEU2hhZG93TGVycCggc2hhZG93TWFwLCBzaGFkb3dNYXBTaXplLCBzaGFkb3dDb29yZC54eSArIHZlYzIoIGR4MCwgZHkwICksIHNoYWRvd0Nvb3JkLnogKSArXFxuXFx0XFx0XFx0XFx0dGV4dHVyZTJEU2hhZG93TGVycCggc2hhZG93TWFwLCBzaGFkb3dNYXBTaXplLCBzaGFkb3dDb29yZC54eSArIHZlYzIoIDAuMCwgZHkwICksIHNoYWRvd0Nvb3JkLnogKSArXFxuXFx0XFx0XFx0XFx0dGV4dHVyZTJEU2hhZG93TGVycCggc2hhZG93TWFwLCBzaGFkb3dNYXBTaXplLCBzaGFkb3dDb29yZC54eSArIHZlYzIoIGR4MSwgZHkwICksIHNoYWRvd0Nvb3JkLnogKSArXFxuXFx0XFx0XFx0XFx0dGV4dHVyZTJEU2hhZG93TGVycCggc2hhZG93TWFwLCBzaGFkb3dNYXBTaXplLCBzaGFkb3dDb29yZC54eSArIHZlYzIoIGR4MCwgMC4wICksIHNoYWRvd0Nvb3JkLnogKSArXFxuXFx0XFx0XFx0XFx0dGV4dHVyZTJEU2hhZG93TGVycCggc2hhZG93TWFwLCBzaGFkb3dNYXBTaXplLCBzaGFkb3dDb29yZC54eSwgc2hhZG93Q29vcmQueiApICtcXG5cXHRcXHRcXHRcXHR0ZXh0dXJlMkRTaGFkb3dMZXJwKCBzaGFkb3dNYXAsIHNoYWRvd01hcFNpemUsIHNoYWRvd0Nvb3JkLnh5ICsgdmVjMiggZHgxLCAwLjAgKSwgc2hhZG93Q29vcmQueiApICtcXG5cXHRcXHRcXHRcXHR0ZXh0dXJlMkRTaGFkb3dMZXJwKCBzaGFkb3dNYXAsIHNoYWRvd01hcFNpemUsIHNoYWRvd0Nvb3JkLnh5ICsgdmVjMiggZHgwLCBkeTEgKSwgc2hhZG93Q29vcmQueiApICtcXG5cXHRcXHRcXHRcXHR0ZXh0dXJlMkRTaGFkb3dMZXJwKCBzaGFkb3dNYXAsIHNoYWRvd01hcFNpemUsIHNoYWRvd0Nvb3JkLnh5ICsgdmVjMiggMC4wLCBkeTEgKSwgc2hhZG93Q29vcmQueiApICtcXG5cXHRcXHRcXHRcXHR0ZXh0dXJlMkRTaGFkb3dMZXJwKCBzaGFkb3dNYXAsIHNoYWRvd01hcFNpemUsIHNoYWRvd0Nvb3JkLnh5ICsgdmVjMiggZHgxLCBkeTEgKSwgc2hhZG93Q29vcmQueiApXFxuXFx0XFx0XFx0KSAqICggMS4wIC8gOS4wICk7XFxuXFx0XFx0I2Vsc2VcXG5cXHRcXHRcXHRyZXR1cm4gdGV4dHVyZTJEQ29tcGFyZSggc2hhZG93TWFwLCBzaGFkb3dDb29yZC54eSwgc2hhZG93Q29vcmQueiApO1xcblxcdFxcdCNlbmRpZlxcblxcdFxcdH1cXG5cXHRcXHRyZXR1cm4gMS4wO1xcblxcdH1cXG5cXHR2ZWMyIGN1YmVUb1VWKCB2ZWMzIHYsIGZsb2F0IHRleGVsU2l6ZVkgKSB7XFxuXFx0XFx0dmVjMyBhYnNWID0gYWJzKCB2ICk7XFxuXFx0XFx0ZmxvYXQgc2NhbGVUb0N1YmUgPSAxLjAgLyBtYXgoIGFic1YueCwgbWF4KCBhYnNWLnksIGFic1YueiApICk7XFxuXFx0XFx0YWJzViAqPSBzY2FsZVRvQ3ViZTtcXG5cXHRcXHR2ICo9IHNjYWxlVG9DdWJlICogKCAxLjAgLSAyLjAgKiB0ZXhlbFNpemVZICk7XFxuXFx0XFx0dmVjMiBwbGFuYXIgPSB2Lnh5O1xcblxcdFxcdGZsb2F0IGFsbW9zdEFUZXhlbCA9IDEuNSAqIHRleGVsU2l6ZVk7XFxuXFx0XFx0ZmxvYXQgYWxtb3N0T25lID0gMS4wIC0gYWxtb3N0QVRleGVsO1xcblxcdFxcdGlmICggYWJzVi56ID49IGFsbW9zdE9uZSApIHtcXG5cXHRcXHRcXHRpZiAoIHYueiA+IDAuMCApXFxuXFx0XFx0XFx0XFx0cGxhbmFyLnggPSA0LjAgLSB2Lng7XFxuXFx0XFx0fSBlbHNlIGlmICggYWJzVi54ID49IGFsbW9zdE9uZSApIHtcXG5cXHRcXHRcXHRmbG9hdCBzaWduWCA9IHNpZ24oIHYueCApO1xcblxcdFxcdFxcdHBsYW5hci54ID0gdi56ICogc2lnblggKyAyLjAgKiBzaWduWDtcXG5cXHRcXHR9IGVsc2UgaWYgKCBhYnNWLnkgPj0gYWxtb3N0T25lICkge1xcblxcdFxcdFxcdGZsb2F0IHNpZ25ZID0gc2lnbiggdi55ICk7XFxuXFx0XFx0XFx0cGxhbmFyLnggPSB2LnggKyAyLjAgKiBzaWduWSArIDIuMDtcXG5cXHRcXHRcXHRwbGFuYXIueSA9IHYueiAqIHNpZ25ZIC0gMi4wO1xcblxcdFxcdH1cXG5cXHRcXHRyZXR1cm4gdmVjMiggMC4xMjUsIDAuMjUgKSAqIHBsYW5hciArIHZlYzIoIDAuMzc1LCAwLjc1ICk7XFxuXFx0fVxcblxcdGZsb2F0IGdldFBvaW50U2hhZG93KCBzYW1wbGVyMkQgc2hhZG93TWFwLCB2ZWMyIHNoYWRvd01hcFNpemUsIGZsb2F0IHNoYWRvd0JpYXMsIGZsb2F0IHNoYWRvd1JhZGl1cywgdmVjNCBzaGFkb3dDb29yZCApIHtcXG5cXHRcXHR2ZWMyIHRleGVsU2l6ZSA9IHZlYzIoIDEuMCApIC8gKCBzaGFkb3dNYXBTaXplICogdmVjMiggNC4wLCAyLjAgKSApO1xcblxcdFxcdHZlYzMgbGlnaHRUb1Bvc2l0aW9uID0gc2hhZG93Q29vcmQueHl6O1xcblxcdFxcdHZlYzMgYmQzRCA9IG5vcm1hbGl6ZSggbGlnaHRUb1Bvc2l0aW9uICk7XFxuXFx0XFx0ZmxvYXQgZHAgPSAoIGxlbmd0aCggbGlnaHRUb1Bvc2l0aW9uICkgLSBzaGFkb3dCaWFzICkgLyAxMDAwLjA7XFxuXFx0XFx0I2lmIGRlZmluZWQoIFNIQURPV01BUF9UWVBFX1BDRiApIHx8IGRlZmluZWQoIFNIQURPV01BUF9UWVBFX1BDRl9TT0ZUIClcXG5cXHRcXHRcXHR2ZWMyIG9mZnNldCA9IHZlYzIoIC0gMSwgMSApICogc2hhZG93UmFkaXVzICogdGV4ZWxTaXplLnk7XFxuXFx0XFx0XFx0cmV0dXJuIChcXG5cXHRcXHRcXHRcXHR0ZXh0dXJlMkRDb21wYXJlKCBzaGFkb3dNYXAsIGN1YmVUb1VWKCBiZDNEICsgb2Zmc2V0Lnh5eSwgdGV4ZWxTaXplLnkgKSwgZHAgKSArXFxuXFx0XFx0XFx0XFx0dGV4dHVyZTJEQ29tcGFyZSggc2hhZG93TWFwLCBjdWJlVG9VViggYmQzRCArIG9mZnNldC55eXksIHRleGVsU2l6ZS55ICksIGRwICkgK1xcblxcdFxcdFxcdFxcdHRleHR1cmUyRENvbXBhcmUoIHNoYWRvd01hcCwgY3ViZVRvVVYoIGJkM0QgKyBvZmZzZXQueHl4LCB0ZXhlbFNpemUueSApLCBkcCApICtcXG5cXHRcXHRcXHRcXHR0ZXh0dXJlMkRDb21wYXJlKCBzaGFkb3dNYXAsIGN1YmVUb1VWKCBiZDNEICsgb2Zmc2V0Lnl5eCwgdGV4ZWxTaXplLnkgKSwgZHAgKSArXFxuXFx0XFx0XFx0XFx0dGV4dHVyZTJEQ29tcGFyZSggc2hhZG93TWFwLCBjdWJlVG9VViggYmQzRCwgdGV4ZWxTaXplLnkgKSwgZHAgKSArXFxuXFx0XFx0XFx0XFx0dGV4dHVyZTJEQ29tcGFyZSggc2hhZG93TWFwLCBjdWJlVG9VViggYmQzRCArIG9mZnNldC54eHksIHRleGVsU2l6ZS55ICksIGRwICkgK1xcblxcdFxcdFxcdFxcdHRleHR1cmUyRENvbXBhcmUoIHNoYWRvd01hcCwgY3ViZVRvVVYoIGJkM0QgKyBvZmZzZXQueXh5LCB0ZXhlbFNpemUueSApLCBkcCApICtcXG5cXHRcXHRcXHRcXHR0ZXh0dXJlMkRDb21wYXJlKCBzaGFkb3dNYXAsIGN1YmVUb1VWKCBiZDNEICsgb2Zmc2V0Lnh4eCwgdGV4ZWxTaXplLnkgKSwgZHAgKSArXFxuXFx0XFx0XFx0XFx0dGV4dHVyZTJEQ29tcGFyZSggc2hhZG93TWFwLCBjdWJlVG9VViggYmQzRCArIG9mZnNldC55eHgsIHRleGVsU2l6ZS55ICksIGRwIClcXG5cXHRcXHRcXHQpICogKCAxLjAgLyA5LjAgKTtcXG5cXHRcXHQjZWxzZVxcblxcdFxcdFxcdHJldHVybiB0ZXh0dXJlMkRDb21wYXJlKCBzaGFkb3dNYXAsIGN1YmVUb1VWKCBiZDNELCB0ZXhlbFNpemUueSApLCBkcCApO1xcblxcdFxcdCNlbmRpZlxcblxcdH1cXG4jZW5kaWZcXG5cIjtcblRIUkVFLlNoYWRlckNodW5rLnNoYWRvd21hcF9wYXJzX3ZlcnRleD1cIiNpZmRlZiBVU0VfU0hBRE9XTUFQXFxuXFx0I2lmIE5VTV9ESVJfTElHSFRTID4gMFxcblxcdFxcdHVuaWZvcm0gbWF0NCBkaXJlY3Rpb25hbFNoYWRvd01hdHJpeFsgTlVNX0RJUl9MSUdIVFMgXTtcXG5cXHRcXHR2YXJ5aW5nIHZlYzQgdkRpcmVjdGlvbmFsU2hhZG93Q29vcmRbIE5VTV9ESVJfTElHSFRTIF07XFxuXFx0I2VuZGlmXFxuXFx0I2lmIE5VTV9TUE9UX0xJR0hUUyA+IDBcXG5cXHRcXHR1bmlmb3JtIG1hdDQgc3BvdFNoYWRvd01hdHJpeFsgTlVNX1NQT1RfTElHSFRTIF07XFxuXFx0XFx0dmFyeWluZyB2ZWM0IHZTcG90U2hhZG93Q29vcmRbIE5VTV9TUE9UX0xJR0hUUyBdO1xcblxcdCNlbmRpZlxcblxcdCNpZiBOVU1fUE9JTlRfTElHSFRTID4gMFxcblxcdFxcdHVuaWZvcm0gbWF0NCBwb2ludFNoYWRvd01hdHJpeFsgTlVNX1BPSU5UX0xJR0hUUyBdO1xcblxcdFxcdHZhcnlpbmcgdmVjNCB2UG9pbnRTaGFkb3dDb29yZFsgTlVNX1BPSU5UX0xJR0hUUyBdO1xcblxcdCNlbmRpZlxcbiNlbmRpZlxcblwiO1xuVEhSRUUuU2hhZGVyQ2h1bmsuc2hhZG93bWFwX3ZlcnRleD1cIiNpZmRlZiBVU0VfU0hBRE9XTUFQXFxuXFx0I2lmIE5VTV9ESVJfTElHSFRTID4gMFxcblxcdGZvciAoIGludCBpID0gMDsgaSA8IE5VTV9ESVJfTElHSFRTOyBpICsrICkge1xcblxcdFxcdHZEaXJlY3Rpb25hbFNoYWRvd0Nvb3JkWyBpIF0gPSBkaXJlY3Rpb25hbFNoYWRvd01hdHJpeFsgaSBdICogd29ybGRQb3NpdGlvbjtcXG5cXHR9XFxuXFx0I2VuZGlmXFxuXFx0I2lmIE5VTV9TUE9UX0xJR0hUUyA+IDBcXG5cXHRmb3IgKCBpbnQgaSA9IDA7IGkgPCBOVU1fU1BPVF9MSUdIVFM7IGkgKysgKSB7XFxuXFx0XFx0dlNwb3RTaGFkb3dDb29yZFsgaSBdID0gc3BvdFNoYWRvd01hdHJpeFsgaSBdICogd29ybGRQb3NpdGlvbjtcXG5cXHR9XFxuXFx0I2VuZGlmXFxuXFx0I2lmIE5VTV9QT0lOVF9MSUdIVFMgPiAwXFxuXFx0Zm9yICggaW50IGkgPSAwOyBpIDwgTlVNX1BPSU5UX0xJR0hUUzsgaSArKyApIHtcXG5cXHRcXHR2UG9pbnRTaGFkb3dDb29yZFsgaSBdID0gcG9pbnRTaGFkb3dNYXRyaXhbIGkgXSAqIHdvcmxkUG9zaXRpb247XFxuXFx0fVxcblxcdCNlbmRpZlxcbiNlbmRpZlxcblwiO1xuVEhSRUUuU2hhZGVyQ2h1bmsuc2hhZG93bWFza19wYXJzX2ZyYWdtZW50PVwiZmxvYXQgZ2V0U2hhZG93TWFzaygpIHtcXG5cXHRmbG9hdCBzaGFkb3cgPSAxLjA7XFxuXFx0I2lmZGVmIFVTRV9TSEFET1dNQVBcXG5cXHQjaWYgTlVNX0RJUl9MSUdIVFMgPiAwXFxuXFx0RGlyZWN0aW9uYWxMaWdodCBkaXJlY3Rpb25hbExpZ2h0O1xcblxcdGZvciAoIGludCBpID0gMDsgaSA8IE5VTV9ESVJfTElHSFRTOyBpICsrICkge1xcblxcdFxcdGRpcmVjdGlvbmFsTGlnaHQgPSBkaXJlY3Rpb25hbExpZ2h0c1sgaSBdO1xcblxcdFxcdHNoYWRvdyAqPSBib29sKCBkaXJlY3Rpb25hbExpZ2h0LnNoYWRvdyApID8gZ2V0U2hhZG93KCBkaXJlY3Rpb25hbFNoYWRvd01hcFsgaSBdLCBkaXJlY3Rpb25hbExpZ2h0LnNoYWRvd01hcFNpemUsIGRpcmVjdGlvbmFsTGlnaHQuc2hhZG93QmlhcywgZGlyZWN0aW9uYWxMaWdodC5zaGFkb3dSYWRpdXMsIHZEaXJlY3Rpb25hbFNoYWRvd0Nvb3JkWyBpIF0gKSA6IDEuMDtcXG5cXHR9XFxuXFx0I2VuZGlmXFxuXFx0I2lmIE5VTV9TUE9UX0xJR0hUUyA+IDBcXG5cXHRTcG90TGlnaHQgc3BvdExpZ2h0O1xcblxcdGZvciAoIGludCBpID0gMDsgaSA8IE5VTV9TUE9UX0xJR0hUUzsgaSArKyApIHtcXG5cXHRcXHRzcG90TGlnaHQgPSBzcG90TGlnaHRzWyBpIF07XFxuXFx0XFx0c2hhZG93ICo9IGJvb2woIHNwb3RMaWdodC5zaGFkb3cgKSA/IGdldFNoYWRvdyggc3BvdFNoYWRvd01hcFsgaSBdLCBzcG90TGlnaHQuc2hhZG93TWFwU2l6ZSwgc3BvdExpZ2h0LnNoYWRvd0JpYXMsIHNwb3RMaWdodC5zaGFkb3dSYWRpdXMsIHZTcG90U2hhZG93Q29vcmRbIGkgXSApIDogMS4wO1xcblxcdH1cXG5cXHQjZW5kaWZcXG5cXHQjaWYgTlVNX1BPSU5UX0xJR0hUUyA+IDBcXG5cXHRQb2ludExpZ2h0IHBvaW50TGlnaHQ7XFxuXFx0Zm9yICggaW50IGkgPSAwOyBpIDwgTlVNX1BPSU5UX0xJR0hUUzsgaSArKyApIHtcXG5cXHRcXHRwb2ludExpZ2h0ID0gcG9pbnRMaWdodHNbIGkgXTtcXG5cXHRcXHRzaGFkb3cgKj0gYm9vbCggcG9pbnRMaWdodC5zaGFkb3cgKSA/IGdldFBvaW50U2hhZG93KCBwb2ludFNoYWRvd01hcFsgaSBdLCBwb2ludExpZ2h0LnNoYWRvd01hcFNpemUsIHBvaW50TGlnaHQuc2hhZG93QmlhcywgcG9pbnRMaWdodC5zaGFkb3dSYWRpdXMsIHZQb2ludFNoYWRvd0Nvb3JkWyBpIF0gKSA6IDEuMDtcXG5cXHR9XFxuXFx0I2VuZGlmXFxuXFx0I2VuZGlmXFxuXFx0cmV0dXJuIHNoYWRvdztcXG59XFxuXCI7XG5USFJFRS5TaGFkZXJDaHVuay5za2luYmFzZV92ZXJ0ZXg9XCIjaWZkZWYgVVNFX1NLSU5OSU5HXFxuXFx0bWF0NCBib25lTWF0WCA9IGdldEJvbmVNYXRyaXgoIHNraW5JbmRleC54ICk7XFxuXFx0bWF0NCBib25lTWF0WSA9IGdldEJvbmVNYXRyaXgoIHNraW5JbmRleC55ICk7XFxuXFx0bWF0NCBib25lTWF0WiA9IGdldEJvbmVNYXRyaXgoIHNraW5JbmRleC56ICk7XFxuXFx0bWF0NCBib25lTWF0VyA9IGdldEJvbmVNYXRyaXgoIHNraW5JbmRleC53ICk7XFxuI2VuZGlmXCI7VEhSRUUuU2hhZGVyQ2h1bmsuc2tpbm5pbmdfcGFyc192ZXJ0ZXg9XCIjaWZkZWYgVVNFX1NLSU5OSU5HXFxuXFx0dW5pZm9ybSBtYXQ0IGJpbmRNYXRyaXg7XFxuXFx0dW5pZm9ybSBtYXQ0IGJpbmRNYXRyaXhJbnZlcnNlO1xcblxcdCNpZmRlZiBCT05FX1RFWFRVUkVcXG5cXHRcXHR1bmlmb3JtIHNhbXBsZXIyRCBib25lVGV4dHVyZTtcXG5cXHRcXHR1bmlmb3JtIGludCBib25lVGV4dHVyZVdpZHRoO1xcblxcdFxcdHVuaWZvcm0gaW50IGJvbmVUZXh0dXJlSGVpZ2h0O1xcblxcdFxcdG1hdDQgZ2V0Qm9uZU1hdHJpeCggY29uc3QgaW4gZmxvYXQgaSApIHtcXG5cXHRcXHRcXHRmbG9hdCBqID0gaSAqIDQuMDtcXG5cXHRcXHRcXHRmbG9hdCB4ID0gbW9kKCBqLCBmbG9hdCggYm9uZVRleHR1cmVXaWR0aCApICk7XFxuXFx0XFx0XFx0ZmxvYXQgeSA9IGZsb29yKCBqIC8gZmxvYXQoIGJvbmVUZXh0dXJlV2lkdGggKSApO1xcblxcdFxcdFxcdGZsb2F0IGR4ID0gMS4wIC8gZmxvYXQoIGJvbmVUZXh0dXJlV2lkdGggKTtcXG5cXHRcXHRcXHRmbG9hdCBkeSA9IDEuMCAvIGZsb2F0KCBib25lVGV4dHVyZUhlaWdodCApO1xcblxcdFxcdFxcdHkgPSBkeSAqICggeSArIDAuNSApO1xcblxcdFxcdFxcdHZlYzQgdjEgPSB0ZXh0dXJlMkQoIGJvbmVUZXh0dXJlLCB2ZWMyKCBkeCAqICggeCArIDAuNSApLCB5ICkgKTtcXG5cXHRcXHRcXHR2ZWM0IHYyID0gdGV4dHVyZTJEKCBib25lVGV4dHVyZSwgdmVjMiggZHggKiAoIHggKyAxLjUgKSwgeSApICk7XFxuXFx0XFx0XFx0dmVjNCB2MyA9IHRleHR1cmUyRCggYm9uZVRleHR1cmUsIHZlYzIoIGR4ICogKCB4ICsgMi41ICksIHkgKSApO1xcblxcdFxcdFxcdHZlYzQgdjQgPSB0ZXh0dXJlMkQoIGJvbmVUZXh0dXJlLCB2ZWMyKCBkeCAqICggeCArIDMuNSApLCB5ICkgKTtcXG5cXHRcXHRcXHRtYXQ0IGJvbmUgPSBtYXQ0KCB2MSwgdjIsIHYzLCB2NCApO1xcblxcdFxcdFxcdHJldHVybiBib25lO1xcblxcdFxcdH1cXG5cXHQjZWxzZVxcblxcdFxcdHVuaWZvcm0gbWF0NCBib25lTWF0cmljZXNbIE1BWF9CT05FUyBdO1xcblxcdFxcdG1hdDQgZ2V0Qm9uZU1hdHJpeCggY29uc3QgaW4gZmxvYXQgaSApIHtcXG5cXHRcXHRcXHRtYXQ0IGJvbmUgPSBib25lTWF0cmljZXNbIGludChpKSBdO1xcblxcdFxcdFxcdHJldHVybiBib25lO1xcblxcdFxcdH1cXG5cXHQjZW5kaWZcXG4jZW5kaWZcXG5cIjtcblRIUkVFLlNoYWRlckNodW5rLnNraW5uaW5nX3ZlcnRleD1cIiNpZmRlZiBVU0VfU0tJTk5JTkdcXG5cXHR2ZWM0IHNraW5WZXJ0ZXggPSBiaW5kTWF0cml4ICogdmVjNCggdHJhbnNmb3JtZWQsIDEuMCApO1xcblxcdHZlYzQgc2tpbm5lZCA9IHZlYzQoIDAuMCApO1xcblxcdHNraW5uZWQgKz0gYm9uZU1hdFggKiBza2luVmVydGV4ICogc2tpbldlaWdodC54O1xcblxcdHNraW5uZWQgKz0gYm9uZU1hdFkgKiBza2luVmVydGV4ICogc2tpbldlaWdodC55O1xcblxcdHNraW5uZWQgKz0gYm9uZU1hdFogKiBza2luVmVydGV4ICogc2tpbldlaWdodC56O1xcblxcdHNraW5uZWQgKz0gYm9uZU1hdFcgKiBza2luVmVydGV4ICogc2tpbldlaWdodC53O1xcblxcdHNraW5uZWQgID0gYmluZE1hdHJpeEludmVyc2UgKiBza2lubmVkO1xcbiNlbmRpZlxcblwiO1RIUkVFLlNoYWRlckNodW5rLnNraW5ub3JtYWxfdmVydGV4PVwiI2lmZGVmIFVTRV9TS0lOTklOR1xcblxcdG1hdDQgc2tpbk1hdHJpeCA9IG1hdDQoIDAuMCApO1xcblxcdHNraW5NYXRyaXggKz0gc2tpbldlaWdodC54ICogYm9uZU1hdFg7XFxuXFx0c2tpbk1hdHJpeCArPSBza2luV2VpZ2h0LnkgKiBib25lTWF0WTtcXG5cXHRza2luTWF0cml4ICs9IHNraW5XZWlnaHQueiAqIGJvbmVNYXRaO1xcblxcdHNraW5NYXRyaXggKz0gc2tpbldlaWdodC53ICogYm9uZU1hdFc7XFxuXFx0c2tpbk1hdHJpeCAgPSBiaW5kTWF0cml4SW52ZXJzZSAqIHNraW5NYXRyaXggKiBiaW5kTWF0cml4O1xcblxcdG9iamVjdE5vcm1hbCA9IHZlYzQoIHNraW5NYXRyaXggKiB2ZWM0KCBvYmplY3ROb3JtYWwsIDAuMCApICkueHl6O1xcbiNlbmRpZlxcblwiO1xuVEhSRUUuU2hhZGVyQ2h1bmsuc3BlY3VsYXJtYXBfZnJhZ21lbnQ9XCJmbG9hdCBzcGVjdWxhclN0cmVuZ3RoO1xcbiNpZmRlZiBVU0VfU1BFQ1VMQVJNQVBcXG5cXHR2ZWM0IHRleGVsU3BlY3VsYXIgPSB0ZXh0dXJlMkQoIHNwZWN1bGFyTWFwLCB2VXYgKTtcXG5cXHRzcGVjdWxhclN0cmVuZ3RoID0gdGV4ZWxTcGVjdWxhci5yO1xcbiNlbHNlXFxuXFx0c3BlY3VsYXJTdHJlbmd0aCA9IDEuMDtcXG4jZW5kaWZcIjtUSFJFRS5TaGFkZXJDaHVuay5zcGVjdWxhcm1hcF9wYXJzX2ZyYWdtZW50PVwiI2lmZGVmIFVTRV9TUEVDVUxBUk1BUFxcblxcdHVuaWZvcm0gc2FtcGxlcjJEIHNwZWN1bGFyTWFwO1xcbiNlbmRpZlwiO1RIUkVFLlNoYWRlckNodW5rLnRvbmVtYXBwaW5nX2ZyYWdtZW50PVwiI2lmIGRlZmluZWQoIFRPTkVfTUFQUElORyApXFxuICBnbF9GcmFnQ29sb3IucmdiID0gdG9uZU1hcHBpbmcoIGdsX0ZyYWdDb2xvci5yZ2IgKTtcXG4jZW5kaWZcXG5cIjtcblRIUkVFLlNoYWRlckNodW5rLnRvbmVtYXBwaW5nX3BhcnNfZnJhZ21lbnQ9XCIjZGVmaW5lIHNhdHVyYXRlKGEpIGNsYW1wKCBhLCAwLjAsIDEuMCApXFxudW5pZm9ybSBmbG9hdCB0b25lTWFwcGluZ0V4cG9zdXJlO1xcbnVuaWZvcm0gZmxvYXQgdG9uZU1hcHBpbmdXaGl0ZVBvaW50O1xcbnZlYzMgTGluZWFyVG9uZU1hcHBpbmcoIHZlYzMgY29sb3IgKSB7XFxuICByZXR1cm4gdG9uZU1hcHBpbmdFeHBvc3VyZSAqIGNvbG9yO1xcbn1cXG52ZWMzIFJlaW5oYXJkVG9uZU1hcHBpbmcoIHZlYzMgY29sb3IgKSB7XFxuICBjb2xvciAqPSB0b25lTWFwcGluZ0V4cG9zdXJlO1xcbiAgcmV0dXJuIHNhdHVyYXRlKCBjb2xvciAvICggdmVjMyggMS4wICkgKyBjb2xvciApICk7XFxufVxcbiNkZWZpbmUgVW5jaGFydGVkMkhlbHBlciggeCApIG1heCggKCAoIHggKiAoIDAuMTUgKiB4ICsgMC4xMCAqIDAuNTAgKSArIDAuMjAgKiAwLjAyICkgLyAoIHggKiAoIDAuMTUgKiB4ICsgMC41MCApICsgMC4yMCAqIDAuMzAgKSApIC0gMC4wMiAvIDAuMzAsIHZlYzMoIDAuMCApIClcXG52ZWMzIFVuY2hhcnRlZDJUb25lTWFwcGluZyggdmVjMyBjb2xvciApIHtcXG4gIGNvbG9yICo9IHRvbmVNYXBwaW5nRXhwb3N1cmU7XFxuICByZXR1cm4gc2F0dXJhdGUoIFVuY2hhcnRlZDJIZWxwZXIoIGNvbG9yICkgLyBVbmNoYXJ0ZWQySGVscGVyKCB2ZWMzKCB0b25lTWFwcGluZ1doaXRlUG9pbnQgKSApICk7XFxufVxcbnZlYzMgT3B0aW1pemVkQ2luZW9uVG9uZU1hcHBpbmcoIHZlYzMgY29sb3IgKSB7XFxuICBjb2xvciAqPSB0b25lTWFwcGluZ0V4cG9zdXJlO1xcbiAgY29sb3IgPSBtYXgoIHZlYzMoIDAuMCApLCBjb2xvciAtIDAuMDA0ICk7XFxuICByZXR1cm4gcG93KCAoIGNvbG9yICogKCA2LjIgKiBjb2xvciArIDAuNSApICkgLyAoIGNvbG9yICogKCA2LjIgKiBjb2xvciArIDEuNyApICsgMC4wNiApLCB2ZWMzKCAyLjIgKSApO1xcbn1cXG5cIjtcblRIUkVFLlNoYWRlckNodW5rLnV2Ml9wYXJzX2ZyYWdtZW50PVwiI2lmIGRlZmluZWQoIFVTRV9MSUdIVE1BUCApIHx8IGRlZmluZWQoIFVTRV9BT01BUCApXFxuXFx0dmFyeWluZyB2ZWMyIHZVdjI7XFxuI2VuZGlmXCI7VEhSRUUuU2hhZGVyQ2h1bmsudXYyX3BhcnNfdmVydGV4PVwiI2lmIGRlZmluZWQoIFVTRV9MSUdIVE1BUCApIHx8IGRlZmluZWQoIFVTRV9BT01BUCApXFxuXFx0YXR0cmlidXRlIHZlYzIgdXYyO1xcblxcdHZhcnlpbmcgdmVjMiB2VXYyO1xcbiNlbmRpZlwiO1RIUkVFLlNoYWRlckNodW5rLnV2Ml92ZXJ0ZXg9XCIjaWYgZGVmaW5lZCggVVNFX0xJR0hUTUFQICkgfHwgZGVmaW5lZCggVVNFX0FPTUFQIClcXG5cXHR2VXYyID0gdXYyO1xcbiNlbmRpZlwiO1RIUkVFLlNoYWRlckNodW5rLnV2X3BhcnNfZnJhZ21lbnQ9XCIjaWYgZGVmaW5lZCggVVNFX01BUCApIHx8IGRlZmluZWQoIFVTRV9CVU1QTUFQICkgfHwgZGVmaW5lZCggVVNFX05PUk1BTE1BUCApIHx8IGRlZmluZWQoIFVTRV9TUEVDVUxBUk1BUCApIHx8IGRlZmluZWQoIFVTRV9BTFBIQU1BUCApIHx8IGRlZmluZWQoIFVTRV9FTUlTU0lWRU1BUCApIHx8IGRlZmluZWQoIFVTRV9ST1VHSE5FU1NNQVAgKSB8fCBkZWZpbmVkKCBVU0VfTUVUQUxORVNTTUFQIClcXG5cXHR2YXJ5aW5nIHZlYzIgdlV2O1xcbiNlbmRpZlwiO1xuVEhSRUUuU2hhZGVyQ2h1bmsudXZfcGFyc192ZXJ0ZXg9XCIjaWYgZGVmaW5lZCggVVNFX01BUCApIHx8IGRlZmluZWQoIFVTRV9CVU1QTUFQICkgfHwgZGVmaW5lZCggVVNFX05PUk1BTE1BUCApIHx8IGRlZmluZWQoIFVTRV9TUEVDVUxBUk1BUCApIHx8IGRlZmluZWQoIFVTRV9BTFBIQU1BUCApIHx8IGRlZmluZWQoIFVTRV9FTUlTU0lWRU1BUCApIHx8IGRlZmluZWQoIFVTRV9ST1VHSE5FU1NNQVAgKSB8fCBkZWZpbmVkKCBVU0VfTUVUQUxORVNTTUFQIClcXG5cXHR2YXJ5aW5nIHZlYzIgdlV2O1xcblxcdHVuaWZvcm0gdmVjNCBvZmZzZXRSZXBlYXQ7XFxuI2VuZGlmXFxuXCI7VEhSRUUuU2hhZGVyQ2h1bmsudXZfdmVydGV4PVwiI2lmIGRlZmluZWQoIFVTRV9NQVAgKSB8fCBkZWZpbmVkKCBVU0VfQlVNUE1BUCApIHx8IGRlZmluZWQoIFVTRV9OT1JNQUxNQVAgKSB8fCBkZWZpbmVkKCBVU0VfU1BFQ1VMQVJNQVAgKSB8fCBkZWZpbmVkKCBVU0VfQUxQSEFNQVAgKSB8fCBkZWZpbmVkKCBVU0VfRU1JU1NJVkVNQVAgKSB8fCBkZWZpbmVkKCBVU0VfUk9VR0hORVNTTUFQICkgfHwgZGVmaW5lZCggVVNFX01FVEFMTkVTU01BUCApXFxuXFx0dlV2ID0gdXYgKiBvZmZzZXRSZXBlYXQuencgKyBvZmZzZXRSZXBlYXQueHk7XFxuI2VuZGlmXCI7XG5USFJFRS5TaGFkZXJDaHVuay53b3JsZHBvc192ZXJ0ZXg9XCIjaWYgZGVmaW5lZCggVVNFX0VOVk1BUCApIHx8IGRlZmluZWQoIFBIT05HICkgfHwgZGVmaW5lZCggUEhZU0lDQUwgKSB8fCBkZWZpbmVkKCBMQU1CRVJUICkgfHwgZGVmaW5lZCAoIFVTRV9TSEFET1dNQVAgKVxcblxcdCNpZmRlZiBVU0VfU0tJTk5JTkdcXG5cXHRcXHR2ZWM0IHdvcmxkUG9zaXRpb24gPSBtb2RlbE1hdHJpeCAqIHNraW5uZWQ7XFxuXFx0I2Vsc2VcXG5cXHRcXHR2ZWM0IHdvcmxkUG9zaXRpb24gPSBtb2RlbE1hdHJpeCAqIHZlYzQoIHRyYW5zZm9ybWVkLCAxLjAgKTtcXG5cXHQjZW5kaWZcXG4jZW5kaWZcXG5cIjtcblRIUkVFLlVuaWZvcm1zVXRpbHM9e21lcmdlOmZ1bmN0aW9uKGEpe2Zvcih2YXIgYj17fSxjPTA7YzxhLmxlbmd0aDtjKyspe3ZhciBkPXRoaXMuY2xvbmUoYVtjXSksZTtmb3IoZSBpbiBkKWJbZV09ZFtlXX1yZXR1cm4gYn0sY2xvbmU6ZnVuY3Rpb24oYSl7dmFyIGI9e30sYztmb3IoYyBpbiBhKXtiW2NdPXt9O2Zvcih2YXIgZCBpbiBhW2NdKXt2YXIgZT1hW2NdW2RdO2UgaW5zdGFuY2VvZiBUSFJFRS5Db2xvcnx8ZSBpbnN0YW5jZW9mIFRIUkVFLlZlY3RvcjJ8fGUgaW5zdGFuY2VvZiBUSFJFRS5WZWN0b3IzfHxlIGluc3RhbmNlb2YgVEhSRUUuVmVjdG9yNHx8ZSBpbnN0YW5jZW9mIFRIUkVFLk1hdHJpeDN8fGUgaW5zdGFuY2VvZiBUSFJFRS5NYXRyaXg0fHxlIGluc3RhbmNlb2YgVEhSRUUuVGV4dHVyZT9iW2NdW2RdPWUuY2xvbmUoKTpBcnJheS5pc0FycmF5KGUpP2JbY11bZF09ZS5zbGljZSgpOmJbY11bZF09ZX19cmV0dXJuIGJ9fTtcblRIUkVFLlVuaWZvcm1zTGliPXtjb21tb246e2RpZmZ1c2U6e3ZhbHVlOm5ldyBUSFJFRS5Db2xvcigxNTY1ODczNCl9LG9wYWNpdHk6e3ZhbHVlOjF9LG1hcDp7dmFsdWU6bnVsbH0sb2Zmc2V0UmVwZWF0Ont2YWx1ZTpuZXcgVEhSRUUuVmVjdG9yNCgwLDAsMSwxKX0sc3BlY3VsYXJNYXA6e3ZhbHVlOm51bGx9LGFscGhhTWFwOnt2YWx1ZTpudWxsfSxlbnZNYXA6e3ZhbHVlOm51bGx9LGZsaXBFbnZNYXA6e3ZhbHVlOi0xfSxyZWZsZWN0aXZpdHk6e3ZhbHVlOjF9LHJlZnJhY3Rpb25SYXRpbzp7dmFsdWU6Ljk4fX0sYW9tYXA6e2FvTWFwOnt2YWx1ZTpudWxsfSxhb01hcEludGVuc2l0eTp7dmFsdWU6MX19LGxpZ2h0bWFwOntsaWdodE1hcDp7dmFsdWU6bnVsbH0sbGlnaHRNYXBJbnRlbnNpdHk6e3ZhbHVlOjF9fSxlbWlzc2l2ZW1hcDp7ZW1pc3NpdmVNYXA6e3ZhbHVlOm51bGx9fSxidW1wbWFwOntidW1wTWFwOnt2YWx1ZTpudWxsfSxidW1wU2NhbGU6e3ZhbHVlOjF9fSxub3JtYWxtYXA6e25vcm1hbE1hcDp7dmFsdWU6bnVsbH0sXG5ub3JtYWxTY2FsZTp7dmFsdWU6bmV3IFRIUkVFLlZlY3RvcjIoMSwxKX19LGRpc3BsYWNlbWVudG1hcDp7ZGlzcGxhY2VtZW50TWFwOnt2YWx1ZTpudWxsfSxkaXNwbGFjZW1lbnRTY2FsZTp7dmFsdWU6MX0sZGlzcGxhY2VtZW50Qmlhczp7dmFsdWU6MH19LHJvdWdobmVzc21hcDp7cm91Z2huZXNzTWFwOnt2YWx1ZTpudWxsfX0sbWV0YWxuZXNzbWFwOnttZXRhbG5lc3NNYXA6e3ZhbHVlOm51bGx9fSxmb2c6e2ZvZ0RlbnNpdHk6e3ZhbHVlOjIuNUUtNH0sZm9nTmVhcjp7dmFsdWU6MX0sZm9nRmFyOnt2YWx1ZToyRTN9LGZvZ0NvbG9yOnt2YWx1ZTpuZXcgVEhSRUUuQ29sb3IoMTY3NzcyMTUpfX0sbGlnaHRzOnthbWJpZW50TGlnaHRDb2xvcjp7dmFsdWU6W119LGRpcmVjdGlvbmFsTGlnaHRzOnt2YWx1ZTpbXSxwcm9wZXJ0aWVzOntkaXJlY3Rpb246e30sY29sb3I6e30sc2hhZG93Ont9LHNoYWRvd0JpYXM6e30sc2hhZG93UmFkaXVzOnt9LHNoYWRvd01hcFNpemU6e319fSxkaXJlY3Rpb25hbFNoYWRvd01hcDp7dmFsdWU6W119LFxuZGlyZWN0aW9uYWxTaGFkb3dNYXRyaXg6e3ZhbHVlOltdfSxzcG90TGlnaHRzOnt2YWx1ZTpbXSxwcm9wZXJ0aWVzOntjb2xvcjp7fSxwb3NpdGlvbjp7fSxkaXJlY3Rpb246e30sZGlzdGFuY2U6e30sY29uZUNvczp7fSxwZW51bWJyYUNvczp7fSxkZWNheTp7fSxzaGFkb3c6e30sc2hhZG93Qmlhczp7fSxzaGFkb3dSYWRpdXM6e30sc2hhZG93TWFwU2l6ZTp7fX19LHNwb3RTaGFkb3dNYXA6e3ZhbHVlOltdfSxzcG90U2hhZG93TWF0cml4Ont2YWx1ZTpbXX0scG9pbnRMaWdodHM6e3ZhbHVlOltdLHByb3BlcnRpZXM6e2NvbG9yOnt9LHBvc2l0aW9uOnt9LGRlY2F5Ont9LGRpc3RhbmNlOnt9LHNoYWRvdzp7fSxzaGFkb3dCaWFzOnt9LHNoYWRvd1JhZGl1czp7fSxzaGFkb3dNYXBTaXplOnt9fX0scG9pbnRTaGFkb3dNYXA6e3ZhbHVlOltdfSxwb2ludFNoYWRvd01hdHJpeDp7dmFsdWU6W119LGhlbWlzcGhlcmVMaWdodHM6e3ZhbHVlOltdLHByb3BlcnRpZXM6e2RpcmVjdGlvbjp7fSxcbnNreUNvbG9yOnt9LGdyb3VuZENvbG9yOnt9fX19LHBvaW50czp7ZGlmZnVzZTp7dmFsdWU6bmV3IFRIUkVFLkNvbG9yKDE1NjU4NzM0KX0sb3BhY2l0eTp7dmFsdWU6MX0sc2l6ZTp7dmFsdWU6MX0sc2NhbGU6e3ZhbHVlOjF9LG1hcDp7dmFsdWU6bnVsbH0sb2Zmc2V0UmVwZWF0Ont2YWx1ZTpuZXcgVEhSRUUuVmVjdG9yNCgwLDAsMSwxKX19fTtUSFJFRS5TaGFkZXJDaHVuay5jdWJlX2ZyYWc9XCJ1bmlmb3JtIHNhbXBsZXJDdWJlIHRDdWJlO1xcbnVuaWZvcm0gZmxvYXQgdEZsaXA7XFxudW5pZm9ybSBmbG9hdCBvcGFjaXR5O1xcbnZhcnlpbmcgdmVjMyB2V29ybGRQb3NpdGlvbjtcXG4jaW5jbHVkZSA8Y29tbW9uPlxcbnZvaWQgbWFpbigpIHtcXG5cXHRnbF9GcmFnQ29sb3IgPSB0ZXh0dXJlQ3ViZSggdEN1YmUsIHZlYzMoIHRGbGlwICogdldvcmxkUG9zaXRpb24ueCwgdldvcmxkUG9zaXRpb24ueXogKSApO1xcblxcdGdsX0ZyYWdDb2xvci5hICo9IG9wYWNpdHk7XFxufVxcblwiO1xuVEhSRUUuU2hhZGVyQ2h1bmsuY3ViZV92ZXJ0PVwidmFyeWluZyB2ZWMzIHZXb3JsZFBvc2l0aW9uO1xcbiNpbmNsdWRlIDxjb21tb24+XFxudm9pZCBtYWluKCkge1xcblxcdHZXb3JsZFBvc2l0aW9uID0gdHJhbnNmb3JtRGlyZWN0aW9uKCBwb3NpdGlvbiwgbW9kZWxNYXRyaXggKTtcXG5cXHQjaW5jbHVkZSA8YmVnaW5fdmVydGV4PlxcblxcdCNpbmNsdWRlIDxwcm9qZWN0X3ZlcnRleD5cXG59XFxuXCI7VEhSRUUuU2hhZGVyQ2h1bmsuZGVwdGhfZnJhZz1cIiNpZiBERVBUSF9QQUNLSU5HID09IDMyMDBcXG5cXHR1bmlmb3JtIGZsb2F0IG9wYWNpdHk7XFxuI2VuZGlmXFxuI2luY2x1ZGUgPGNvbW1vbj5cXG4jaW5jbHVkZSA8cGFja2luZz5cXG4jaW5jbHVkZSA8dXZfcGFyc19mcmFnbWVudD5cXG4jaW5jbHVkZSA8bWFwX3BhcnNfZnJhZ21lbnQ+XFxuI2luY2x1ZGUgPGFscGhhbWFwX3BhcnNfZnJhZ21lbnQ+XFxuI2luY2x1ZGUgPGxvZ2RlcHRoYnVmX3BhcnNfZnJhZ21lbnQ+XFxuI2luY2x1ZGUgPGNsaXBwaW5nX3BsYW5lc19wYXJzX2ZyYWdtZW50PlxcbnZvaWQgbWFpbigpIHtcXG5cXHQjaW5jbHVkZSA8Y2xpcHBpbmdfcGxhbmVzX2ZyYWdtZW50PlxcblxcdHZlYzQgZGlmZnVzZUNvbG9yID0gdmVjNCggMS4wICk7XFxuXFx0I2lmIERFUFRIX1BBQ0tJTkcgPT0gMzIwMFxcblxcdFxcdGRpZmZ1c2VDb2xvci5hID0gb3BhY2l0eTtcXG5cXHQjZW5kaWZcXG5cXHQjaW5jbHVkZSA8bWFwX2ZyYWdtZW50PlxcblxcdCNpbmNsdWRlIDxhbHBoYW1hcF9mcmFnbWVudD5cXG5cXHQjaW5jbHVkZSA8YWxwaGF0ZXN0X2ZyYWdtZW50PlxcblxcdCNpbmNsdWRlIDxsb2dkZXB0aGJ1Zl9mcmFnbWVudD5cXG5cXHQjaWYgREVQVEhfUEFDS0lORyA9PSAzMjAwXFxuXFx0XFx0Z2xfRnJhZ0NvbG9yID0gdmVjNCggdmVjMyggZ2xfRnJhZ0Nvb3JkLnogKSwgb3BhY2l0eSApO1xcblxcdCNlbGlmIERFUFRIX1BBQ0tJTkcgPT0gMzIwMVxcblxcdFxcdGdsX0ZyYWdDb2xvciA9IHBhY2tEZXB0aFRvUkdCQSggZ2xfRnJhZ0Nvb3JkLnogKTtcXG5cXHQjZW5kaWZcXG59XFxuXCI7XG5USFJFRS5TaGFkZXJDaHVuay5kZXB0aF92ZXJ0PVwiI2luY2x1ZGUgPGNvbW1vbj5cXG4jaW5jbHVkZSA8dXZfcGFyc192ZXJ0ZXg+XFxuI2luY2x1ZGUgPGRpc3BsYWNlbWVudG1hcF9wYXJzX3ZlcnRleD5cXG4jaW5jbHVkZSA8bW9ycGh0YXJnZXRfcGFyc192ZXJ0ZXg+XFxuI2luY2x1ZGUgPHNraW5uaW5nX3BhcnNfdmVydGV4PlxcbiNpbmNsdWRlIDxsb2dkZXB0aGJ1Zl9wYXJzX3ZlcnRleD5cXG4jaW5jbHVkZSA8Y2xpcHBpbmdfcGxhbmVzX3BhcnNfdmVydGV4PlxcbnZvaWQgbWFpbigpIHtcXG5cXHQjaW5jbHVkZSA8dXZfdmVydGV4PlxcblxcdCNpbmNsdWRlIDxza2luYmFzZV92ZXJ0ZXg+XFxuXFx0I2luY2x1ZGUgPGJlZ2luX3ZlcnRleD5cXG5cXHQjaW5jbHVkZSA8ZGlzcGxhY2VtZW50bWFwX3ZlcnRleD5cXG5cXHQjaW5jbHVkZSA8bW9ycGh0YXJnZXRfdmVydGV4PlxcblxcdCNpbmNsdWRlIDxza2lubmluZ192ZXJ0ZXg+XFxuXFx0I2luY2x1ZGUgPHByb2plY3RfdmVydGV4PlxcblxcdCNpbmNsdWRlIDxsb2dkZXB0aGJ1Zl92ZXJ0ZXg+XFxuXFx0I2luY2x1ZGUgPGNsaXBwaW5nX3BsYW5lc192ZXJ0ZXg+XFxufVxcblwiO1xuVEhSRUUuU2hhZGVyQ2h1bmsuZGlzdGFuY2VSR0JBX2ZyYWc9XCJ1bmlmb3JtIHZlYzMgbGlnaHRQb3M7XFxudmFyeWluZyB2ZWM0IHZXb3JsZFBvc2l0aW9uO1xcbiNpbmNsdWRlIDxjb21tb24+XFxuI2luY2x1ZGUgPHBhY2tpbmc+XFxuI2luY2x1ZGUgPGNsaXBwaW5nX3BsYW5lc19wYXJzX2ZyYWdtZW50PlxcbnZvaWQgbWFpbiAoKSB7XFxuXFx0I2luY2x1ZGUgPGNsaXBwaW5nX3BsYW5lc19mcmFnbWVudD5cXG5cXHRnbF9GcmFnQ29sb3IgPSBwYWNrRGVwdGhUb1JHQkEoIGxlbmd0aCggdldvcmxkUG9zaXRpb24ueHl6IC0gbGlnaHRQb3MueHl6ICkgLyAxMDAwLjAgKTtcXG59XFxuXCI7VEhSRUUuU2hhZGVyQ2h1bmsuZGlzdGFuY2VSR0JBX3ZlcnQ9XCJ2YXJ5aW5nIHZlYzQgdldvcmxkUG9zaXRpb247XFxuI2luY2x1ZGUgPGNvbW1vbj5cXG4jaW5jbHVkZSA8bW9ycGh0YXJnZXRfcGFyc192ZXJ0ZXg+XFxuI2luY2x1ZGUgPHNraW5uaW5nX3BhcnNfdmVydGV4PlxcbiNpbmNsdWRlIDxjbGlwcGluZ19wbGFuZXNfcGFyc192ZXJ0ZXg+XFxudm9pZCBtYWluKCkge1xcblxcdCNpbmNsdWRlIDxza2luYmFzZV92ZXJ0ZXg+XFxuXFx0I2luY2x1ZGUgPGJlZ2luX3ZlcnRleD5cXG5cXHQjaW5jbHVkZSA8bW9ycGh0YXJnZXRfdmVydGV4PlxcblxcdCNpbmNsdWRlIDxza2lubmluZ192ZXJ0ZXg+XFxuXFx0I2luY2x1ZGUgPHByb2plY3RfdmVydGV4PlxcblxcdCNpbmNsdWRlIDx3b3JsZHBvc192ZXJ0ZXg+XFxuXFx0I2luY2x1ZGUgPGNsaXBwaW5nX3BsYW5lc192ZXJ0ZXg+XFxuXFx0dldvcmxkUG9zaXRpb24gPSB3b3JsZFBvc2l0aW9uO1xcbn1cXG5cIjtcblRIUkVFLlNoYWRlckNodW5rLmVxdWlyZWN0X2ZyYWc9XCJ1bmlmb3JtIHNhbXBsZXIyRCB0RXF1aXJlY3Q7XFxudW5pZm9ybSBmbG9hdCB0RmxpcDtcXG52YXJ5aW5nIHZlYzMgdldvcmxkUG9zaXRpb247XFxuI2luY2x1ZGUgPGNvbW1vbj5cXG52b2lkIG1haW4oKSB7XFxuXFx0dmVjMyBkaXJlY3Rpb24gPSBub3JtYWxpemUoIHZXb3JsZFBvc2l0aW9uICk7XFxuXFx0dmVjMiBzYW1wbGVVVjtcXG5cXHRzYW1wbGVVVi55ID0gc2F0dXJhdGUoIHRGbGlwICogZGlyZWN0aW9uLnkgKiAtMC41ICsgMC41ICk7XFxuXFx0c2FtcGxlVVYueCA9IGF0YW4oIGRpcmVjdGlvbi56LCBkaXJlY3Rpb24ueCApICogUkVDSVBST0NBTF9QSTIgKyAwLjU7XFxuXFx0Z2xfRnJhZ0NvbG9yID0gdGV4dHVyZTJEKCB0RXF1aXJlY3QsIHNhbXBsZVVWICk7XFxufVxcblwiO1RIUkVFLlNoYWRlckNodW5rLmVxdWlyZWN0X3ZlcnQ9XCJ2YXJ5aW5nIHZlYzMgdldvcmxkUG9zaXRpb247XFxuI2luY2x1ZGUgPGNvbW1vbj5cXG52b2lkIG1haW4oKSB7XFxuXFx0dldvcmxkUG9zaXRpb24gPSB0cmFuc2Zvcm1EaXJlY3Rpb24oIHBvc2l0aW9uLCBtb2RlbE1hdHJpeCApO1xcblxcdCNpbmNsdWRlIDxiZWdpbl92ZXJ0ZXg+XFxuXFx0I2luY2x1ZGUgPHByb2plY3RfdmVydGV4Plxcbn1cXG5cIjtcblRIUkVFLlNoYWRlckNodW5rLmxpbmVkYXNoZWRfZnJhZz1cInVuaWZvcm0gdmVjMyBkaWZmdXNlO1xcbnVuaWZvcm0gZmxvYXQgb3BhY2l0eTtcXG51bmlmb3JtIGZsb2F0IGRhc2hTaXplO1xcbnVuaWZvcm0gZmxvYXQgdG90YWxTaXplO1xcbnZhcnlpbmcgZmxvYXQgdkxpbmVEaXN0YW5jZTtcXG4jaW5jbHVkZSA8Y29tbW9uPlxcbiNpbmNsdWRlIDxjb2xvcl9wYXJzX2ZyYWdtZW50PlxcbiNpbmNsdWRlIDxmb2dfcGFyc19mcmFnbWVudD5cXG4jaW5jbHVkZSA8bG9nZGVwdGhidWZfcGFyc19mcmFnbWVudD5cXG4jaW5jbHVkZSA8Y2xpcHBpbmdfcGxhbmVzX3BhcnNfZnJhZ21lbnQ+XFxudm9pZCBtYWluKCkge1xcblxcdCNpbmNsdWRlIDxjbGlwcGluZ19wbGFuZXNfZnJhZ21lbnQ+XFxuXFx0aWYgKCBtb2QoIHZMaW5lRGlzdGFuY2UsIHRvdGFsU2l6ZSApID4gZGFzaFNpemUgKSB7XFxuXFx0XFx0ZGlzY2FyZDtcXG5cXHR9XFxuXFx0dmVjMyBvdXRnb2luZ0xpZ2h0ID0gdmVjMyggMC4wICk7XFxuXFx0dmVjNCBkaWZmdXNlQ29sb3IgPSB2ZWM0KCBkaWZmdXNlLCBvcGFjaXR5ICk7XFxuXFx0I2luY2x1ZGUgPGxvZ2RlcHRoYnVmX2ZyYWdtZW50PlxcblxcdCNpbmNsdWRlIDxjb2xvcl9mcmFnbWVudD5cXG5cXHRvdXRnb2luZ0xpZ2h0ID0gZGlmZnVzZUNvbG9yLnJnYjtcXG5cXHRnbF9GcmFnQ29sb3IgPSB2ZWM0KCBvdXRnb2luZ0xpZ2h0LCBkaWZmdXNlQ29sb3IuYSApO1xcblxcdCNpbmNsdWRlIDxwcmVtdWx0aXBsaWVkX2FscGhhX2ZyYWdtZW50PlxcblxcdCNpbmNsdWRlIDx0b25lbWFwcGluZ19mcmFnbWVudD5cXG5cXHQjaW5jbHVkZSA8ZW5jb2RpbmdzX2ZyYWdtZW50PlxcblxcdCNpbmNsdWRlIDxmb2dfZnJhZ21lbnQ+XFxufVxcblwiO1xuVEhSRUUuU2hhZGVyQ2h1bmsubGluZWRhc2hlZF92ZXJ0PVwidW5pZm9ybSBmbG9hdCBzY2FsZTtcXG5hdHRyaWJ1dGUgZmxvYXQgbGluZURpc3RhbmNlO1xcbnZhcnlpbmcgZmxvYXQgdkxpbmVEaXN0YW5jZTtcXG4jaW5jbHVkZSA8Y29tbW9uPlxcbiNpbmNsdWRlIDxjb2xvcl9wYXJzX3ZlcnRleD5cXG4jaW5jbHVkZSA8bG9nZGVwdGhidWZfcGFyc192ZXJ0ZXg+XFxuI2luY2x1ZGUgPGNsaXBwaW5nX3BsYW5lc19wYXJzX3ZlcnRleD5cXG52b2lkIG1haW4oKSB7XFxuXFx0I2luY2x1ZGUgPGNvbG9yX3ZlcnRleD5cXG5cXHR2TGluZURpc3RhbmNlID0gc2NhbGUgKiBsaW5lRGlzdGFuY2U7XFxuXFx0dmVjNCBtdlBvc2l0aW9uID0gbW9kZWxWaWV3TWF0cml4ICogdmVjNCggcG9zaXRpb24sIDEuMCApO1xcblxcdGdsX1Bvc2l0aW9uID0gcHJvamVjdGlvbk1hdHJpeCAqIG12UG9zaXRpb247XFxuXFx0I2luY2x1ZGUgPGxvZ2RlcHRoYnVmX3ZlcnRleD5cXG5cXHQjaW5jbHVkZSA8Y2xpcHBpbmdfcGxhbmVzX3ZlcnRleD5cXG59XFxuXCI7XG5USFJFRS5TaGFkZXJDaHVuay5tZXNoYmFzaWNfZnJhZz1cInVuaWZvcm0gdmVjMyBkaWZmdXNlO1xcbnVuaWZvcm0gZmxvYXQgb3BhY2l0eTtcXG4jaWZuZGVmIEZMQVRfU0hBREVEXFxuXFx0dmFyeWluZyB2ZWMzIHZOb3JtYWw7XFxuI2VuZGlmXFxuI2luY2x1ZGUgPGNvbW1vbj5cXG4jaW5jbHVkZSA8Y29sb3JfcGFyc19mcmFnbWVudD5cXG4jaW5jbHVkZSA8dXZfcGFyc19mcmFnbWVudD5cXG4jaW5jbHVkZSA8dXYyX3BhcnNfZnJhZ21lbnQ+XFxuI2luY2x1ZGUgPG1hcF9wYXJzX2ZyYWdtZW50PlxcbiNpbmNsdWRlIDxhbHBoYW1hcF9wYXJzX2ZyYWdtZW50PlxcbiNpbmNsdWRlIDxhb21hcF9wYXJzX2ZyYWdtZW50PlxcbiNpbmNsdWRlIDxlbnZtYXBfcGFyc19mcmFnbWVudD5cXG4jaW5jbHVkZSA8Zm9nX3BhcnNfZnJhZ21lbnQ+XFxuI2luY2x1ZGUgPHNwZWN1bGFybWFwX3BhcnNfZnJhZ21lbnQ+XFxuI2luY2x1ZGUgPGxvZ2RlcHRoYnVmX3BhcnNfZnJhZ21lbnQ+XFxuI2luY2x1ZGUgPGNsaXBwaW5nX3BsYW5lc19wYXJzX2ZyYWdtZW50PlxcbnZvaWQgbWFpbigpIHtcXG5cXHQjaW5jbHVkZSA8Y2xpcHBpbmdfcGxhbmVzX2ZyYWdtZW50PlxcblxcdHZlYzQgZGlmZnVzZUNvbG9yID0gdmVjNCggZGlmZnVzZSwgb3BhY2l0eSApO1xcblxcdCNpbmNsdWRlIDxsb2dkZXB0aGJ1Zl9mcmFnbWVudD5cXG5cXHQjaW5jbHVkZSA8bWFwX2ZyYWdtZW50PlxcblxcdCNpbmNsdWRlIDxjb2xvcl9mcmFnbWVudD5cXG5cXHQjaW5jbHVkZSA8YWxwaGFtYXBfZnJhZ21lbnQ+XFxuXFx0I2luY2x1ZGUgPGFscGhhdGVzdF9mcmFnbWVudD5cXG5cXHQjaW5jbHVkZSA8c3BlY3VsYXJtYXBfZnJhZ21lbnQ+XFxuXFx0UmVmbGVjdGVkTGlnaHQgcmVmbGVjdGVkTGlnaHQ7XFxuXFx0cmVmbGVjdGVkTGlnaHQuZGlyZWN0RGlmZnVzZSA9IHZlYzMoIDAuMCApO1xcblxcdHJlZmxlY3RlZExpZ2h0LmRpcmVjdFNwZWN1bGFyID0gdmVjMyggMC4wICk7XFxuXFx0cmVmbGVjdGVkTGlnaHQuaW5kaXJlY3REaWZmdXNlID0gZGlmZnVzZUNvbG9yLnJnYjtcXG5cXHRyZWZsZWN0ZWRMaWdodC5pbmRpcmVjdFNwZWN1bGFyID0gdmVjMyggMC4wICk7XFxuXFx0I2luY2x1ZGUgPGFvbWFwX2ZyYWdtZW50PlxcblxcdHZlYzMgb3V0Z29pbmdMaWdodCA9IHJlZmxlY3RlZExpZ2h0LmluZGlyZWN0RGlmZnVzZTtcXG5cXHQjaW5jbHVkZSA8bm9ybWFsX2ZsaXA+XFxuXFx0I2luY2x1ZGUgPGVudm1hcF9mcmFnbWVudD5cXG5cXHRnbF9GcmFnQ29sb3IgPSB2ZWM0KCBvdXRnb2luZ0xpZ2h0LCBkaWZmdXNlQ29sb3IuYSApO1xcblxcdCNpbmNsdWRlIDxwcmVtdWx0aXBsaWVkX2FscGhhX2ZyYWdtZW50PlxcblxcdCNpbmNsdWRlIDx0b25lbWFwcGluZ19mcmFnbWVudD5cXG5cXHQjaW5jbHVkZSA8ZW5jb2RpbmdzX2ZyYWdtZW50PlxcblxcdCNpbmNsdWRlIDxmb2dfZnJhZ21lbnQ+XFxufVxcblwiO1xuVEhSRUUuU2hhZGVyQ2h1bmsubWVzaGJhc2ljX3ZlcnQ9XCIjaW5jbHVkZSA8Y29tbW9uPlxcbiNpbmNsdWRlIDx1dl9wYXJzX3ZlcnRleD5cXG4jaW5jbHVkZSA8dXYyX3BhcnNfdmVydGV4PlxcbiNpbmNsdWRlIDxlbnZtYXBfcGFyc192ZXJ0ZXg+XFxuI2luY2x1ZGUgPGNvbG9yX3BhcnNfdmVydGV4PlxcbiNpbmNsdWRlIDxtb3JwaHRhcmdldF9wYXJzX3ZlcnRleD5cXG4jaW5jbHVkZSA8c2tpbm5pbmdfcGFyc192ZXJ0ZXg+XFxuI2luY2x1ZGUgPGxvZ2RlcHRoYnVmX3BhcnNfdmVydGV4PlxcbiNpbmNsdWRlIDxjbGlwcGluZ19wbGFuZXNfcGFyc192ZXJ0ZXg+XFxudm9pZCBtYWluKCkge1xcblxcdCNpbmNsdWRlIDx1dl92ZXJ0ZXg+XFxuXFx0I2luY2x1ZGUgPHV2Ml92ZXJ0ZXg+XFxuXFx0I2luY2x1ZGUgPGNvbG9yX3ZlcnRleD5cXG5cXHQjaW5jbHVkZSA8c2tpbmJhc2VfdmVydGV4PlxcblxcdCNpZmRlZiBVU0VfRU5WTUFQXFxuXFx0I2luY2x1ZGUgPGJlZ2lubm9ybWFsX3ZlcnRleD5cXG5cXHQjaW5jbHVkZSA8bW9ycGhub3JtYWxfdmVydGV4PlxcblxcdCNpbmNsdWRlIDxza2lubm9ybWFsX3ZlcnRleD5cXG5cXHQjaW5jbHVkZSA8ZGVmYXVsdG5vcm1hbF92ZXJ0ZXg+XFxuXFx0I2VuZGlmXFxuXFx0I2luY2x1ZGUgPGJlZ2luX3ZlcnRleD5cXG5cXHQjaW5jbHVkZSA8bW9ycGh0YXJnZXRfdmVydGV4PlxcblxcdCNpbmNsdWRlIDxza2lubmluZ192ZXJ0ZXg+XFxuXFx0I2luY2x1ZGUgPHByb2plY3RfdmVydGV4PlxcblxcdCNpbmNsdWRlIDxsb2dkZXB0aGJ1Zl92ZXJ0ZXg+XFxuXFx0I2luY2x1ZGUgPHdvcmxkcG9zX3ZlcnRleD5cXG5cXHQjaW5jbHVkZSA8Y2xpcHBpbmdfcGxhbmVzX3ZlcnRleD5cXG5cXHQjaW5jbHVkZSA8ZW52bWFwX3ZlcnRleD5cXG59XFxuXCI7XG5USFJFRS5TaGFkZXJDaHVuay5tZXNobGFtYmVydF9mcmFnPVwidW5pZm9ybSB2ZWMzIGRpZmZ1c2U7XFxudW5pZm9ybSB2ZWMzIGVtaXNzaXZlO1xcbnVuaWZvcm0gZmxvYXQgb3BhY2l0eTtcXG52YXJ5aW5nIHZlYzMgdkxpZ2h0RnJvbnQ7XFxuI2lmZGVmIERPVUJMRV9TSURFRFxcblxcdHZhcnlpbmcgdmVjMyB2TGlnaHRCYWNrO1xcbiNlbmRpZlxcbiNpbmNsdWRlIDxjb21tb24+XFxuI2luY2x1ZGUgPHBhY2tpbmc+XFxuI2luY2x1ZGUgPGNvbG9yX3BhcnNfZnJhZ21lbnQ+XFxuI2luY2x1ZGUgPHV2X3BhcnNfZnJhZ21lbnQ+XFxuI2luY2x1ZGUgPHV2Ml9wYXJzX2ZyYWdtZW50PlxcbiNpbmNsdWRlIDxtYXBfcGFyc19mcmFnbWVudD5cXG4jaW5jbHVkZSA8YWxwaGFtYXBfcGFyc19mcmFnbWVudD5cXG4jaW5jbHVkZSA8YW9tYXBfcGFyc19mcmFnbWVudD5cXG4jaW5jbHVkZSA8bGlnaHRtYXBfcGFyc19mcmFnbWVudD5cXG4jaW5jbHVkZSA8ZW1pc3NpdmVtYXBfcGFyc19mcmFnbWVudD5cXG4jaW5jbHVkZSA8ZW52bWFwX3BhcnNfZnJhZ21lbnQ+XFxuI2luY2x1ZGUgPGJzZGZzPlxcbiNpbmNsdWRlIDxsaWdodHNfcGFycz5cXG4jaW5jbHVkZSA8Zm9nX3BhcnNfZnJhZ21lbnQ+XFxuI2luY2x1ZGUgPHNoYWRvd21hcF9wYXJzX2ZyYWdtZW50PlxcbiNpbmNsdWRlIDxzaGFkb3dtYXNrX3BhcnNfZnJhZ21lbnQ+XFxuI2luY2x1ZGUgPHNwZWN1bGFybWFwX3BhcnNfZnJhZ21lbnQ+XFxuI2luY2x1ZGUgPGxvZ2RlcHRoYnVmX3BhcnNfZnJhZ21lbnQ+XFxuI2luY2x1ZGUgPGNsaXBwaW5nX3BsYW5lc19wYXJzX2ZyYWdtZW50PlxcbnZvaWQgbWFpbigpIHtcXG5cXHQjaW5jbHVkZSA8Y2xpcHBpbmdfcGxhbmVzX2ZyYWdtZW50PlxcblxcdHZlYzQgZGlmZnVzZUNvbG9yID0gdmVjNCggZGlmZnVzZSwgb3BhY2l0eSApO1xcblxcdFJlZmxlY3RlZExpZ2h0IHJlZmxlY3RlZExpZ2h0ID0gUmVmbGVjdGVkTGlnaHQoIHZlYzMoIDAuMCApLCB2ZWMzKCAwLjAgKSwgdmVjMyggMC4wICksIHZlYzMoIDAuMCApICk7XFxuXFx0dmVjMyB0b3RhbEVtaXNzaXZlUmFkaWFuY2UgPSBlbWlzc2l2ZTtcXG5cXHQjaW5jbHVkZSA8bG9nZGVwdGhidWZfZnJhZ21lbnQ+XFxuXFx0I2luY2x1ZGUgPG1hcF9mcmFnbWVudD5cXG5cXHQjaW5jbHVkZSA8Y29sb3JfZnJhZ21lbnQ+XFxuXFx0I2luY2x1ZGUgPGFscGhhbWFwX2ZyYWdtZW50PlxcblxcdCNpbmNsdWRlIDxhbHBoYXRlc3RfZnJhZ21lbnQ+XFxuXFx0I2luY2x1ZGUgPHNwZWN1bGFybWFwX2ZyYWdtZW50PlxcblxcdCNpbmNsdWRlIDxlbWlzc2l2ZW1hcF9mcmFnbWVudD5cXG5cXHRyZWZsZWN0ZWRMaWdodC5pbmRpcmVjdERpZmZ1c2UgPSBnZXRBbWJpZW50TGlnaHRJcnJhZGlhbmNlKCBhbWJpZW50TGlnaHRDb2xvciApO1xcblxcdCNpbmNsdWRlIDxsaWdodG1hcF9mcmFnbWVudD5cXG5cXHRyZWZsZWN0ZWRMaWdodC5pbmRpcmVjdERpZmZ1c2UgKj0gQlJERl9EaWZmdXNlX0xhbWJlcnQoIGRpZmZ1c2VDb2xvci5yZ2IgKTtcXG5cXHQjaWZkZWYgRE9VQkxFX1NJREVEXFxuXFx0XFx0cmVmbGVjdGVkTGlnaHQuZGlyZWN0RGlmZnVzZSA9ICggZ2xfRnJvbnRGYWNpbmcgKSA/IHZMaWdodEZyb250IDogdkxpZ2h0QmFjaztcXG5cXHQjZWxzZVxcblxcdFxcdHJlZmxlY3RlZExpZ2h0LmRpcmVjdERpZmZ1c2UgPSB2TGlnaHRGcm9udDtcXG5cXHQjZW5kaWZcXG5cXHRyZWZsZWN0ZWRMaWdodC5kaXJlY3REaWZmdXNlICo9IEJSREZfRGlmZnVzZV9MYW1iZXJ0KCBkaWZmdXNlQ29sb3IucmdiICkgKiBnZXRTaGFkb3dNYXNrKCk7XFxuXFx0I2luY2x1ZGUgPGFvbWFwX2ZyYWdtZW50PlxcblxcdHZlYzMgb3V0Z29pbmdMaWdodCA9IHJlZmxlY3RlZExpZ2h0LmRpcmVjdERpZmZ1c2UgKyByZWZsZWN0ZWRMaWdodC5pbmRpcmVjdERpZmZ1c2UgKyB0b3RhbEVtaXNzaXZlUmFkaWFuY2U7XFxuXFx0I2luY2x1ZGUgPG5vcm1hbF9mbGlwPlxcblxcdCNpbmNsdWRlIDxlbnZtYXBfZnJhZ21lbnQ+XFxuXFx0Z2xfRnJhZ0NvbG9yID0gdmVjNCggb3V0Z29pbmdMaWdodCwgZGlmZnVzZUNvbG9yLmEgKTtcXG5cXHQjaW5jbHVkZSA8cHJlbXVsdGlwbGllZF9hbHBoYV9mcmFnbWVudD5cXG5cXHQjaW5jbHVkZSA8dG9uZW1hcHBpbmdfZnJhZ21lbnQ+XFxuXFx0I2luY2x1ZGUgPGVuY29kaW5nc19mcmFnbWVudD5cXG5cXHQjaW5jbHVkZSA8Zm9nX2ZyYWdtZW50Plxcbn1cXG5cIjtcblRIUkVFLlNoYWRlckNodW5rLm1lc2hsYW1iZXJ0X3ZlcnQ9XCIjZGVmaW5lIExBTUJFUlRcXG52YXJ5aW5nIHZlYzMgdkxpZ2h0RnJvbnQ7XFxuI2lmZGVmIERPVUJMRV9TSURFRFxcblxcdHZhcnlpbmcgdmVjMyB2TGlnaHRCYWNrO1xcbiNlbmRpZlxcbiNpbmNsdWRlIDxjb21tb24+XFxuI2luY2x1ZGUgPHV2X3BhcnNfdmVydGV4PlxcbiNpbmNsdWRlIDx1djJfcGFyc192ZXJ0ZXg+XFxuI2luY2x1ZGUgPGVudm1hcF9wYXJzX3ZlcnRleD5cXG4jaW5jbHVkZSA8YnNkZnM+XFxuI2luY2x1ZGUgPGxpZ2h0c19wYXJzPlxcbiNpbmNsdWRlIDxjb2xvcl9wYXJzX3ZlcnRleD5cXG4jaW5jbHVkZSA8bW9ycGh0YXJnZXRfcGFyc192ZXJ0ZXg+XFxuI2luY2x1ZGUgPHNraW5uaW5nX3BhcnNfdmVydGV4PlxcbiNpbmNsdWRlIDxzaGFkb3dtYXBfcGFyc192ZXJ0ZXg+XFxuI2luY2x1ZGUgPGxvZ2RlcHRoYnVmX3BhcnNfdmVydGV4PlxcbiNpbmNsdWRlIDxjbGlwcGluZ19wbGFuZXNfcGFyc192ZXJ0ZXg+XFxudm9pZCBtYWluKCkge1xcblxcdCNpbmNsdWRlIDx1dl92ZXJ0ZXg+XFxuXFx0I2luY2x1ZGUgPHV2Ml92ZXJ0ZXg+XFxuXFx0I2luY2x1ZGUgPGNvbG9yX3ZlcnRleD5cXG5cXHQjaW5jbHVkZSA8YmVnaW5ub3JtYWxfdmVydGV4PlxcblxcdCNpbmNsdWRlIDxtb3JwaG5vcm1hbF92ZXJ0ZXg+XFxuXFx0I2luY2x1ZGUgPHNraW5iYXNlX3ZlcnRleD5cXG5cXHQjaW5jbHVkZSA8c2tpbm5vcm1hbF92ZXJ0ZXg+XFxuXFx0I2luY2x1ZGUgPGRlZmF1bHRub3JtYWxfdmVydGV4PlxcblxcdCNpbmNsdWRlIDxiZWdpbl92ZXJ0ZXg+XFxuXFx0I2luY2x1ZGUgPG1vcnBodGFyZ2V0X3ZlcnRleD5cXG5cXHQjaW5jbHVkZSA8c2tpbm5pbmdfdmVydGV4PlxcblxcdCNpbmNsdWRlIDxwcm9qZWN0X3ZlcnRleD5cXG5cXHQjaW5jbHVkZSA8bG9nZGVwdGhidWZfdmVydGV4PlxcblxcdCNpbmNsdWRlIDxjbGlwcGluZ19wbGFuZXNfdmVydGV4PlxcblxcdCNpbmNsdWRlIDx3b3JsZHBvc192ZXJ0ZXg+XFxuXFx0I2luY2x1ZGUgPGVudm1hcF92ZXJ0ZXg+XFxuXFx0I2luY2x1ZGUgPGxpZ2h0c19sYW1iZXJ0X3ZlcnRleD5cXG5cXHQjaW5jbHVkZSA8c2hhZG93bWFwX3ZlcnRleD5cXG59XFxuXCI7XG5USFJFRS5TaGFkZXJDaHVuay5tZXNocGhvbmdfZnJhZz1cIiNkZWZpbmUgUEhPTkdcXG51bmlmb3JtIHZlYzMgZGlmZnVzZTtcXG51bmlmb3JtIHZlYzMgZW1pc3NpdmU7XFxudW5pZm9ybSB2ZWMzIHNwZWN1bGFyO1xcbnVuaWZvcm0gZmxvYXQgc2hpbmluZXNzO1xcbnVuaWZvcm0gZmxvYXQgb3BhY2l0eTtcXG4jaW5jbHVkZSA8Y29tbW9uPlxcbiNpbmNsdWRlIDxwYWNraW5nPlxcbiNpbmNsdWRlIDxjb2xvcl9wYXJzX2ZyYWdtZW50PlxcbiNpbmNsdWRlIDx1dl9wYXJzX2ZyYWdtZW50PlxcbiNpbmNsdWRlIDx1djJfcGFyc19mcmFnbWVudD5cXG4jaW5jbHVkZSA8bWFwX3BhcnNfZnJhZ21lbnQ+XFxuI2luY2x1ZGUgPGFscGhhbWFwX3BhcnNfZnJhZ21lbnQ+XFxuI2luY2x1ZGUgPGFvbWFwX3BhcnNfZnJhZ21lbnQ+XFxuI2luY2x1ZGUgPGxpZ2h0bWFwX3BhcnNfZnJhZ21lbnQ+XFxuI2luY2x1ZGUgPGVtaXNzaXZlbWFwX3BhcnNfZnJhZ21lbnQ+XFxuI2luY2x1ZGUgPGVudm1hcF9wYXJzX2ZyYWdtZW50PlxcbiNpbmNsdWRlIDxmb2dfcGFyc19mcmFnbWVudD5cXG4jaW5jbHVkZSA8YnNkZnM+XFxuI2luY2x1ZGUgPGxpZ2h0c19wYXJzPlxcbiNpbmNsdWRlIDxsaWdodHNfcGhvbmdfcGFyc19mcmFnbWVudD5cXG4jaW5jbHVkZSA8c2hhZG93bWFwX3BhcnNfZnJhZ21lbnQ+XFxuI2luY2x1ZGUgPGJ1bXBtYXBfcGFyc19mcmFnbWVudD5cXG4jaW5jbHVkZSA8bm9ybWFsbWFwX3BhcnNfZnJhZ21lbnQ+XFxuI2luY2x1ZGUgPHNwZWN1bGFybWFwX3BhcnNfZnJhZ21lbnQ+XFxuI2luY2x1ZGUgPGxvZ2RlcHRoYnVmX3BhcnNfZnJhZ21lbnQ+XFxuI2luY2x1ZGUgPGNsaXBwaW5nX3BsYW5lc19wYXJzX2ZyYWdtZW50PlxcbnZvaWQgbWFpbigpIHtcXG5cXHQjaW5jbHVkZSA8Y2xpcHBpbmdfcGxhbmVzX2ZyYWdtZW50PlxcblxcdHZlYzQgZGlmZnVzZUNvbG9yID0gdmVjNCggZGlmZnVzZSwgb3BhY2l0eSApO1xcblxcdFJlZmxlY3RlZExpZ2h0IHJlZmxlY3RlZExpZ2h0ID0gUmVmbGVjdGVkTGlnaHQoIHZlYzMoIDAuMCApLCB2ZWMzKCAwLjAgKSwgdmVjMyggMC4wICksIHZlYzMoIDAuMCApICk7XFxuXFx0dmVjMyB0b3RhbEVtaXNzaXZlUmFkaWFuY2UgPSBlbWlzc2l2ZTtcXG5cXHQjaW5jbHVkZSA8bG9nZGVwdGhidWZfZnJhZ21lbnQ+XFxuXFx0I2luY2x1ZGUgPG1hcF9mcmFnbWVudD5cXG5cXHQjaW5jbHVkZSA8Y29sb3JfZnJhZ21lbnQ+XFxuXFx0I2luY2x1ZGUgPGFscGhhbWFwX2ZyYWdtZW50PlxcblxcdCNpbmNsdWRlIDxhbHBoYXRlc3RfZnJhZ21lbnQ+XFxuXFx0I2luY2x1ZGUgPHNwZWN1bGFybWFwX2ZyYWdtZW50PlxcblxcdCNpbmNsdWRlIDxub3JtYWxfZmxpcD5cXG5cXHQjaW5jbHVkZSA8bm9ybWFsX2ZyYWdtZW50PlxcblxcdCNpbmNsdWRlIDxlbWlzc2l2ZW1hcF9mcmFnbWVudD5cXG5cXHQjaW5jbHVkZSA8bGlnaHRzX3Bob25nX2ZyYWdtZW50PlxcblxcdCNpbmNsdWRlIDxsaWdodHNfdGVtcGxhdGU+XFxuXFx0I2luY2x1ZGUgPGFvbWFwX2ZyYWdtZW50PlxcblxcdHZlYzMgb3V0Z29pbmdMaWdodCA9IHJlZmxlY3RlZExpZ2h0LmRpcmVjdERpZmZ1c2UgKyByZWZsZWN0ZWRMaWdodC5pbmRpcmVjdERpZmZ1c2UgKyByZWZsZWN0ZWRMaWdodC5kaXJlY3RTcGVjdWxhciArIHJlZmxlY3RlZExpZ2h0LmluZGlyZWN0U3BlY3VsYXIgKyB0b3RhbEVtaXNzaXZlUmFkaWFuY2U7XFxuXFx0I2luY2x1ZGUgPGVudm1hcF9mcmFnbWVudD5cXG5cXHRnbF9GcmFnQ29sb3IgPSB2ZWM0KCBvdXRnb2luZ0xpZ2h0LCBkaWZmdXNlQ29sb3IuYSApO1xcblxcdCNpbmNsdWRlIDxwcmVtdWx0aXBsaWVkX2FscGhhX2ZyYWdtZW50PlxcblxcdCNpbmNsdWRlIDx0b25lbWFwcGluZ19mcmFnbWVudD5cXG5cXHQjaW5jbHVkZSA8ZW5jb2RpbmdzX2ZyYWdtZW50PlxcblxcdCNpbmNsdWRlIDxmb2dfZnJhZ21lbnQ+XFxufVxcblwiO1xuVEhSRUUuU2hhZGVyQ2h1bmsubWVzaHBob25nX3ZlcnQ9XCIjZGVmaW5lIFBIT05HXFxudmFyeWluZyB2ZWMzIHZWaWV3UG9zaXRpb247XFxuI2lmbmRlZiBGTEFUX1NIQURFRFxcblxcdHZhcnlpbmcgdmVjMyB2Tm9ybWFsO1xcbiNlbmRpZlxcbiNpbmNsdWRlIDxjb21tb24+XFxuI2luY2x1ZGUgPHV2X3BhcnNfdmVydGV4PlxcbiNpbmNsdWRlIDx1djJfcGFyc192ZXJ0ZXg+XFxuI2luY2x1ZGUgPGRpc3BsYWNlbWVudG1hcF9wYXJzX3ZlcnRleD5cXG4jaW5jbHVkZSA8ZW52bWFwX3BhcnNfdmVydGV4PlxcbiNpbmNsdWRlIDxjb2xvcl9wYXJzX3ZlcnRleD5cXG4jaW5jbHVkZSA8bW9ycGh0YXJnZXRfcGFyc192ZXJ0ZXg+XFxuI2luY2x1ZGUgPHNraW5uaW5nX3BhcnNfdmVydGV4PlxcbiNpbmNsdWRlIDxzaGFkb3dtYXBfcGFyc192ZXJ0ZXg+XFxuI2luY2x1ZGUgPGxvZ2RlcHRoYnVmX3BhcnNfdmVydGV4PlxcbiNpbmNsdWRlIDxjbGlwcGluZ19wbGFuZXNfcGFyc192ZXJ0ZXg+XFxudm9pZCBtYWluKCkge1xcblxcdCNpbmNsdWRlIDx1dl92ZXJ0ZXg+XFxuXFx0I2luY2x1ZGUgPHV2Ml92ZXJ0ZXg+XFxuXFx0I2luY2x1ZGUgPGNvbG9yX3ZlcnRleD5cXG5cXHQjaW5jbHVkZSA8YmVnaW5ub3JtYWxfdmVydGV4PlxcblxcdCNpbmNsdWRlIDxtb3JwaG5vcm1hbF92ZXJ0ZXg+XFxuXFx0I2luY2x1ZGUgPHNraW5iYXNlX3ZlcnRleD5cXG5cXHQjaW5jbHVkZSA8c2tpbm5vcm1hbF92ZXJ0ZXg+XFxuXFx0I2luY2x1ZGUgPGRlZmF1bHRub3JtYWxfdmVydGV4PlxcbiNpZm5kZWYgRkxBVF9TSEFERURcXG5cXHR2Tm9ybWFsID0gbm9ybWFsaXplKCB0cmFuc2Zvcm1lZE5vcm1hbCApO1xcbiNlbmRpZlxcblxcdCNpbmNsdWRlIDxiZWdpbl92ZXJ0ZXg+XFxuXFx0I2luY2x1ZGUgPGRpc3BsYWNlbWVudG1hcF92ZXJ0ZXg+XFxuXFx0I2luY2x1ZGUgPG1vcnBodGFyZ2V0X3ZlcnRleD5cXG5cXHQjaW5jbHVkZSA8c2tpbm5pbmdfdmVydGV4PlxcblxcdCNpbmNsdWRlIDxwcm9qZWN0X3ZlcnRleD5cXG5cXHQjaW5jbHVkZSA8bG9nZGVwdGhidWZfdmVydGV4PlxcblxcdCNpbmNsdWRlIDxjbGlwcGluZ19wbGFuZXNfdmVydGV4PlxcblxcdHZWaWV3UG9zaXRpb24gPSAtIG12UG9zaXRpb24ueHl6O1xcblxcdCNpbmNsdWRlIDx3b3JsZHBvc192ZXJ0ZXg+XFxuXFx0I2luY2x1ZGUgPGVudm1hcF92ZXJ0ZXg+XFxuXFx0I2luY2x1ZGUgPHNoYWRvd21hcF92ZXJ0ZXg+XFxufVxcblwiO1xuVEhSRUUuU2hhZGVyQ2h1bmsubWVzaHBoeXNpY2FsX2ZyYWc9XCIjZGVmaW5lIFBIWVNJQ0FMXFxudW5pZm9ybSB2ZWMzIGRpZmZ1c2U7XFxudW5pZm9ybSB2ZWMzIGVtaXNzaXZlO1xcbnVuaWZvcm0gZmxvYXQgcm91Z2huZXNzO1xcbnVuaWZvcm0gZmxvYXQgbWV0YWxuZXNzO1xcbnVuaWZvcm0gZmxvYXQgb3BhY2l0eTtcXG4jaWZuZGVmIFNUQU5EQVJEXFxuXFx0dW5pZm9ybSBmbG9hdCBjbGVhckNvYXQ7XFxuXFx0dW5pZm9ybSBmbG9hdCBjbGVhckNvYXRSb3VnaG5lc3M7XFxuI2VuZGlmXFxudW5pZm9ybSBmbG9hdCBlbnZNYXBJbnRlbnNpdHk7XFxudmFyeWluZyB2ZWMzIHZWaWV3UG9zaXRpb247XFxuI2lmbmRlZiBGTEFUX1NIQURFRFxcblxcdHZhcnlpbmcgdmVjMyB2Tm9ybWFsO1xcbiNlbmRpZlxcbiNpbmNsdWRlIDxjb21tb24+XFxuI2luY2x1ZGUgPHBhY2tpbmc+XFxuI2luY2x1ZGUgPGNvbG9yX3BhcnNfZnJhZ21lbnQ+XFxuI2luY2x1ZGUgPHV2X3BhcnNfZnJhZ21lbnQ+XFxuI2luY2x1ZGUgPHV2Ml9wYXJzX2ZyYWdtZW50PlxcbiNpbmNsdWRlIDxtYXBfcGFyc19mcmFnbWVudD5cXG4jaW5jbHVkZSA8YWxwaGFtYXBfcGFyc19mcmFnbWVudD5cXG4jaW5jbHVkZSA8YW9tYXBfcGFyc19mcmFnbWVudD5cXG4jaW5jbHVkZSA8bGlnaHRtYXBfcGFyc19mcmFnbWVudD5cXG4jaW5jbHVkZSA8ZW1pc3NpdmVtYXBfcGFyc19mcmFnbWVudD5cXG4jaW5jbHVkZSA8ZW52bWFwX3BhcnNfZnJhZ21lbnQ+XFxuI2luY2x1ZGUgPGZvZ19wYXJzX2ZyYWdtZW50PlxcbiNpbmNsdWRlIDxic2Rmcz5cXG4jaW5jbHVkZSA8Y3ViZV91dl9yZWZsZWN0aW9uX2ZyYWdtZW50PlxcbiNpbmNsdWRlIDxsaWdodHNfcGFycz5cXG4jaW5jbHVkZSA8bGlnaHRzX3BoeXNpY2FsX3BhcnNfZnJhZ21lbnQ+XFxuI2luY2x1ZGUgPHNoYWRvd21hcF9wYXJzX2ZyYWdtZW50PlxcbiNpbmNsdWRlIDxidW1wbWFwX3BhcnNfZnJhZ21lbnQ+XFxuI2luY2x1ZGUgPG5vcm1hbG1hcF9wYXJzX2ZyYWdtZW50PlxcbiNpbmNsdWRlIDxyb3VnaG5lc3NtYXBfcGFyc19mcmFnbWVudD5cXG4jaW5jbHVkZSA8bWV0YWxuZXNzbWFwX3BhcnNfZnJhZ21lbnQ+XFxuI2luY2x1ZGUgPGxvZ2RlcHRoYnVmX3BhcnNfZnJhZ21lbnQ+XFxuI2luY2x1ZGUgPGNsaXBwaW5nX3BsYW5lc19wYXJzX2ZyYWdtZW50PlxcbnZvaWQgbWFpbigpIHtcXG5cXHQjaW5jbHVkZSA8Y2xpcHBpbmdfcGxhbmVzX2ZyYWdtZW50PlxcblxcdHZlYzQgZGlmZnVzZUNvbG9yID0gdmVjNCggZGlmZnVzZSwgb3BhY2l0eSApO1xcblxcdFJlZmxlY3RlZExpZ2h0IHJlZmxlY3RlZExpZ2h0ID0gUmVmbGVjdGVkTGlnaHQoIHZlYzMoIDAuMCApLCB2ZWMzKCAwLjAgKSwgdmVjMyggMC4wICksIHZlYzMoIDAuMCApICk7XFxuXFx0dmVjMyB0b3RhbEVtaXNzaXZlUmFkaWFuY2UgPSBlbWlzc2l2ZTtcXG5cXHQjaW5jbHVkZSA8bG9nZGVwdGhidWZfZnJhZ21lbnQ+XFxuXFx0I2luY2x1ZGUgPG1hcF9mcmFnbWVudD5cXG5cXHQjaW5jbHVkZSA8Y29sb3JfZnJhZ21lbnQ+XFxuXFx0I2luY2x1ZGUgPGFscGhhbWFwX2ZyYWdtZW50PlxcblxcdCNpbmNsdWRlIDxhbHBoYXRlc3RfZnJhZ21lbnQ+XFxuXFx0I2luY2x1ZGUgPHNwZWN1bGFybWFwX2ZyYWdtZW50PlxcblxcdCNpbmNsdWRlIDxyb3VnaG5lc3NtYXBfZnJhZ21lbnQ+XFxuXFx0I2luY2x1ZGUgPG1ldGFsbmVzc21hcF9mcmFnbWVudD5cXG5cXHQjaW5jbHVkZSA8bm9ybWFsX2ZsaXA+XFxuXFx0I2luY2x1ZGUgPG5vcm1hbF9mcmFnbWVudD5cXG5cXHQjaW5jbHVkZSA8ZW1pc3NpdmVtYXBfZnJhZ21lbnQ+XFxuXFx0I2luY2x1ZGUgPGxpZ2h0c19waHlzaWNhbF9mcmFnbWVudD5cXG5cXHQjaW5jbHVkZSA8bGlnaHRzX3RlbXBsYXRlPlxcblxcdCNpbmNsdWRlIDxhb21hcF9mcmFnbWVudD5cXG5cXHR2ZWMzIG91dGdvaW5nTGlnaHQgPSByZWZsZWN0ZWRMaWdodC5kaXJlY3REaWZmdXNlICsgcmVmbGVjdGVkTGlnaHQuaW5kaXJlY3REaWZmdXNlICsgcmVmbGVjdGVkTGlnaHQuZGlyZWN0U3BlY3VsYXIgKyByZWZsZWN0ZWRMaWdodC5pbmRpcmVjdFNwZWN1bGFyICsgdG90YWxFbWlzc2l2ZVJhZGlhbmNlO1xcblxcdGdsX0ZyYWdDb2xvciA9IHZlYzQoIG91dGdvaW5nTGlnaHQsIGRpZmZ1c2VDb2xvci5hICk7XFxuXFx0I2luY2x1ZGUgPHByZW11bHRpcGxpZWRfYWxwaGFfZnJhZ21lbnQ+XFxuXFx0I2luY2x1ZGUgPHRvbmVtYXBwaW5nX2ZyYWdtZW50PlxcblxcdCNpbmNsdWRlIDxlbmNvZGluZ3NfZnJhZ21lbnQ+XFxuXFx0I2luY2x1ZGUgPGZvZ19mcmFnbWVudD5cXG59XFxuXCI7XG5USFJFRS5TaGFkZXJDaHVuay5tZXNocGh5c2ljYWxfdmVydD1cIiNkZWZpbmUgUEhZU0lDQUxcXG52YXJ5aW5nIHZlYzMgdlZpZXdQb3NpdGlvbjtcXG4jaWZuZGVmIEZMQVRfU0hBREVEXFxuXFx0dmFyeWluZyB2ZWMzIHZOb3JtYWw7XFxuI2VuZGlmXFxuI2luY2x1ZGUgPGNvbW1vbj5cXG4jaW5jbHVkZSA8dXZfcGFyc192ZXJ0ZXg+XFxuI2luY2x1ZGUgPHV2Ml9wYXJzX3ZlcnRleD5cXG4jaW5jbHVkZSA8ZGlzcGxhY2VtZW50bWFwX3BhcnNfdmVydGV4PlxcbiNpbmNsdWRlIDxjb2xvcl9wYXJzX3ZlcnRleD5cXG4jaW5jbHVkZSA8bW9ycGh0YXJnZXRfcGFyc192ZXJ0ZXg+XFxuI2luY2x1ZGUgPHNraW5uaW5nX3BhcnNfdmVydGV4PlxcbiNpbmNsdWRlIDxzaGFkb3dtYXBfcGFyc192ZXJ0ZXg+XFxuI2luY2x1ZGUgPHNwZWN1bGFybWFwX3BhcnNfZnJhZ21lbnQ+XFxuI2luY2x1ZGUgPGxvZ2RlcHRoYnVmX3BhcnNfdmVydGV4PlxcbiNpbmNsdWRlIDxjbGlwcGluZ19wbGFuZXNfcGFyc192ZXJ0ZXg+XFxudm9pZCBtYWluKCkge1xcblxcdCNpbmNsdWRlIDx1dl92ZXJ0ZXg+XFxuXFx0I2luY2x1ZGUgPHV2Ml92ZXJ0ZXg+XFxuXFx0I2luY2x1ZGUgPGNvbG9yX3ZlcnRleD5cXG5cXHQjaW5jbHVkZSA8YmVnaW5ub3JtYWxfdmVydGV4PlxcblxcdCNpbmNsdWRlIDxtb3JwaG5vcm1hbF92ZXJ0ZXg+XFxuXFx0I2luY2x1ZGUgPHNraW5iYXNlX3ZlcnRleD5cXG5cXHQjaW5jbHVkZSA8c2tpbm5vcm1hbF92ZXJ0ZXg+XFxuXFx0I2luY2x1ZGUgPGRlZmF1bHRub3JtYWxfdmVydGV4PlxcbiNpZm5kZWYgRkxBVF9TSEFERURcXG5cXHR2Tm9ybWFsID0gbm9ybWFsaXplKCB0cmFuc2Zvcm1lZE5vcm1hbCApO1xcbiNlbmRpZlxcblxcdCNpbmNsdWRlIDxiZWdpbl92ZXJ0ZXg+XFxuXFx0I2luY2x1ZGUgPGRpc3BsYWNlbWVudG1hcF92ZXJ0ZXg+XFxuXFx0I2luY2x1ZGUgPG1vcnBodGFyZ2V0X3ZlcnRleD5cXG5cXHQjaW5jbHVkZSA8c2tpbm5pbmdfdmVydGV4PlxcblxcdCNpbmNsdWRlIDxwcm9qZWN0X3ZlcnRleD5cXG5cXHQjaW5jbHVkZSA8bG9nZGVwdGhidWZfdmVydGV4PlxcblxcdCNpbmNsdWRlIDxjbGlwcGluZ19wbGFuZXNfdmVydGV4PlxcblxcdHZWaWV3UG9zaXRpb24gPSAtIG12UG9zaXRpb24ueHl6O1xcblxcdCNpbmNsdWRlIDx3b3JsZHBvc192ZXJ0ZXg+XFxuXFx0I2luY2x1ZGUgPHNoYWRvd21hcF92ZXJ0ZXg+XFxufVxcblwiO1xuVEhSRUUuU2hhZGVyQ2h1bmsubm9ybWFsX2ZyYWc9XCJ1bmlmb3JtIGZsb2F0IG9wYWNpdHk7XFxudmFyeWluZyB2ZWMzIHZOb3JtYWw7XFxuI2luY2x1ZGUgPGNvbW1vbj5cXG4jaW5jbHVkZSA8cGFja2luZz5cXG4jaW5jbHVkZSA8bG9nZGVwdGhidWZfcGFyc19mcmFnbWVudD5cXG4jaW5jbHVkZSA8Y2xpcHBpbmdfcGxhbmVzX3BhcnNfZnJhZ21lbnQ+XFxudm9pZCBtYWluKCkge1xcblxcdCNpbmNsdWRlIDxjbGlwcGluZ19wbGFuZXNfZnJhZ21lbnQ+XFxuXFx0Z2xfRnJhZ0NvbG9yID0gdmVjNCggcGFja05vcm1hbFRvUkdCKCB2Tm9ybWFsICksIG9wYWNpdHkgKTtcXG5cXHQjaW5jbHVkZSA8bG9nZGVwdGhidWZfZnJhZ21lbnQ+XFxufVxcblwiO1RIUkVFLlNoYWRlckNodW5rLm5vcm1hbF92ZXJ0PVwidmFyeWluZyB2ZWMzIHZOb3JtYWw7XFxuI2luY2x1ZGUgPGNvbW1vbj5cXG4jaW5jbHVkZSA8bW9ycGh0YXJnZXRfcGFyc192ZXJ0ZXg+XFxuI2luY2x1ZGUgPGxvZ2RlcHRoYnVmX3BhcnNfdmVydGV4PlxcbiNpbmNsdWRlIDxjbGlwcGluZ19wbGFuZXNfcGFyc192ZXJ0ZXg+XFxudm9pZCBtYWluKCkge1xcblxcdHZOb3JtYWwgPSBub3JtYWxpemUoIG5vcm1hbE1hdHJpeCAqIG5vcm1hbCApO1xcblxcdCNpbmNsdWRlIDxiZWdpbl92ZXJ0ZXg+XFxuXFx0I2luY2x1ZGUgPG1vcnBodGFyZ2V0X3ZlcnRleD5cXG5cXHQjaW5jbHVkZSA8cHJvamVjdF92ZXJ0ZXg+XFxuXFx0I2luY2x1ZGUgPGxvZ2RlcHRoYnVmX3ZlcnRleD5cXG5cXHQjaW5jbHVkZSA8Y2xpcHBpbmdfcGxhbmVzX3ZlcnRleD5cXG59XFxuXCI7XG5USFJFRS5TaGFkZXJDaHVuay5wb2ludHNfZnJhZz1cInVuaWZvcm0gdmVjMyBkaWZmdXNlO1xcbnVuaWZvcm0gZmxvYXQgb3BhY2l0eTtcXG4jaW5jbHVkZSA8Y29tbW9uPlxcbiNpbmNsdWRlIDxjb2xvcl9wYXJzX2ZyYWdtZW50PlxcbiNpbmNsdWRlIDxtYXBfcGFydGljbGVfcGFyc19mcmFnbWVudD5cXG4jaW5jbHVkZSA8Zm9nX3BhcnNfZnJhZ21lbnQ+XFxuI2luY2x1ZGUgPHNoYWRvd21hcF9wYXJzX2ZyYWdtZW50PlxcbiNpbmNsdWRlIDxsb2dkZXB0aGJ1Zl9wYXJzX2ZyYWdtZW50PlxcbiNpbmNsdWRlIDxjbGlwcGluZ19wbGFuZXNfcGFyc19mcmFnbWVudD5cXG52b2lkIG1haW4oKSB7XFxuXFx0I2luY2x1ZGUgPGNsaXBwaW5nX3BsYW5lc19mcmFnbWVudD5cXG5cXHR2ZWMzIG91dGdvaW5nTGlnaHQgPSB2ZWMzKCAwLjAgKTtcXG5cXHR2ZWM0IGRpZmZ1c2VDb2xvciA9IHZlYzQoIGRpZmZ1c2UsIG9wYWNpdHkgKTtcXG5cXHQjaW5jbHVkZSA8bG9nZGVwdGhidWZfZnJhZ21lbnQ+XFxuXFx0I2luY2x1ZGUgPG1hcF9wYXJ0aWNsZV9mcmFnbWVudD5cXG5cXHQjaW5jbHVkZSA8Y29sb3JfZnJhZ21lbnQ+XFxuXFx0I2luY2x1ZGUgPGFscGhhdGVzdF9mcmFnbWVudD5cXG5cXHRvdXRnb2luZ0xpZ2h0ID0gZGlmZnVzZUNvbG9yLnJnYjtcXG5cXHRnbF9GcmFnQ29sb3IgPSB2ZWM0KCBvdXRnb2luZ0xpZ2h0LCBkaWZmdXNlQ29sb3IuYSApO1xcblxcdCNpbmNsdWRlIDxwcmVtdWx0aXBsaWVkX2FscGhhX2ZyYWdtZW50PlxcblxcdCNpbmNsdWRlIDx0b25lbWFwcGluZ19mcmFnbWVudD5cXG5cXHQjaW5jbHVkZSA8ZW5jb2RpbmdzX2ZyYWdtZW50PlxcblxcdCNpbmNsdWRlIDxmb2dfZnJhZ21lbnQ+XFxufVxcblwiO1xuVEhSRUUuU2hhZGVyQ2h1bmsucG9pbnRzX3ZlcnQ9XCJ1bmlmb3JtIGZsb2F0IHNpemU7XFxudW5pZm9ybSBmbG9hdCBzY2FsZTtcXG4jaW5jbHVkZSA8Y29tbW9uPlxcbiNpbmNsdWRlIDxjb2xvcl9wYXJzX3ZlcnRleD5cXG4jaW5jbHVkZSA8c2hhZG93bWFwX3BhcnNfdmVydGV4PlxcbiNpbmNsdWRlIDxsb2dkZXB0aGJ1Zl9wYXJzX3ZlcnRleD5cXG4jaW5jbHVkZSA8Y2xpcHBpbmdfcGxhbmVzX3BhcnNfdmVydGV4PlxcbnZvaWQgbWFpbigpIHtcXG5cXHQjaW5jbHVkZSA8Y29sb3JfdmVydGV4PlxcblxcdCNpbmNsdWRlIDxiZWdpbl92ZXJ0ZXg+XFxuXFx0I2luY2x1ZGUgPHByb2plY3RfdmVydGV4PlxcblxcdCNpZmRlZiBVU0VfU0laRUFUVEVOVUFUSU9OXFxuXFx0XFx0Z2xfUG9pbnRTaXplID0gc2l6ZSAqICggc2NhbGUgLyAtIG12UG9zaXRpb24ueiApO1xcblxcdCNlbHNlXFxuXFx0XFx0Z2xfUG9pbnRTaXplID0gc2l6ZTtcXG5cXHQjZW5kaWZcXG5cXHQjaW5jbHVkZSA8bG9nZGVwdGhidWZfdmVydGV4PlxcblxcdCNpbmNsdWRlIDxjbGlwcGluZ19wbGFuZXNfdmVydGV4PlxcblxcdCNpbmNsdWRlIDx3b3JsZHBvc192ZXJ0ZXg+XFxuXFx0I2luY2x1ZGUgPHNoYWRvd21hcF92ZXJ0ZXg+XFxufVxcblwiO1xuVEhSRUUuU2hhZGVyQ2h1bmsuc2hhZG93X2ZyYWc9XCJ1bmlmb3JtIGZsb2F0IG9wYWNpdHk7XFxuI2luY2x1ZGUgPGNvbW1vbj5cXG4jaW5jbHVkZSA8cGFja2luZz5cXG4jaW5jbHVkZSA8YnNkZnM+XFxuI2luY2x1ZGUgPGxpZ2h0c19wYXJzPlxcbiNpbmNsdWRlIDxzaGFkb3dtYXBfcGFyc19mcmFnbWVudD5cXG4jaW5jbHVkZSA8c2hhZG93bWFza19wYXJzX2ZyYWdtZW50PlxcbnZvaWQgbWFpbigpIHtcXG5cXHRnbF9GcmFnQ29sb3IgPSB2ZWM0KCAwLjAsIDAuMCwgMC4wLCBvcGFjaXR5ICogKCAxLjAgIC0gZ2V0U2hhZG93TWFzaygpICkgKTtcXG59XFxuXCI7VEhSRUUuU2hhZGVyQ2h1bmsuc2hhZG93X3ZlcnQ9XCIjaW5jbHVkZSA8c2hhZG93bWFwX3BhcnNfdmVydGV4PlxcbnZvaWQgbWFpbigpIHtcXG5cXHQjaW5jbHVkZSA8YmVnaW5fdmVydGV4PlxcblxcdCNpbmNsdWRlIDxwcm9qZWN0X3ZlcnRleD5cXG5cXHQjaW5jbHVkZSA8d29ybGRwb3NfdmVydGV4PlxcblxcdCNpbmNsdWRlIDxzaGFkb3dtYXBfdmVydGV4Plxcbn1cXG5cIjtcblRIUkVFLlNoYWRlckxpYj17YmFzaWM6e3VuaWZvcm1zOlRIUkVFLlVuaWZvcm1zVXRpbHMubWVyZ2UoW1RIUkVFLlVuaWZvcm1zTGliLmNvbW1vbixUSFJFRS5Vbmlmb3Jtc0xpYi5hb21hcCxUSFJFRS5Vbmlmb3Jtc0xpYi5mb2ddKSx2ZXJ0ZXhTaGFkZXI6VEhSRUUuU2hhZGVyQ2h1bmsubWVzaGJhc2ljX3ZlcnQsZnJhZ21lbnRTaGFkZXI6VEhSRUUuU2hhZGVyQ2h1bmsubWVzaGJhc2ljX2ZyYWd9LGxhbWJlcnQ6e3VuaWZvcm1zOlRIUkVFLlVuaWZvcm1zVXRpbHMubWVyZ2UoW1RIUkVFLlVuaWZvcm1zTGliLmNvbW1vbixUSFJFRS5Vbmlmb3Jtc0xpYi5hb21hcCxUSFJFRS5Vbmlmb3Jtc0xpYi5saWdodG1hcCxUSFJFRS5Vbmlmb3Jtc0xpYi5lbWlzc2l2ZW1hcCxUSFJFRS5Vbmlmb3Jtc0xpYi5mb2csVEhSRUUuVW5pZm9ybXNMaWIubGlnaHRzLHtlbWlzc2l2ZTp7dmFsdWU6bmV3IFRIUkVFLkNvbG9yKDApfX1dKSx2ZXJ0ZXhTaGFkZXI6VEhSRUUuU2hhZGVyQ2h1bmsubWVzaGxhbWJlcnRfdmVydCxcbmZyYWdtZW50U2hhZGVyOlRIUkVFLlNoYWRlckNodW5rLm1lc2hsYW1iZXJ0X2ZyYWd9LHBob25nOnt1bmlmb3JtczpUSFJFRS5Vbmlmb3Jtc1V0aWxzLm1lcmdlKFtUSFJFRS5Vbmlmb3Jtc0xpYi5jb21tb24sVEhSRUUuVW5pZm9ybXNMaWIuYW9tYXAsVEhSRUUuVW5pZm9ybXNMaWIubGlnaHRtYXAsVEhSRUUuVW5pZm9ybXNMaWIuZW1pc3NpdmVtYXAsVEhSRUUuVW5pZm9ybXNMaWIuYnVtcG1hcCxUSFJFRS5Vbmlmb3Jtc0xpYi5ub3JtYWxtYXAsVEhSRUUuVW5pZm9ybXNMaWIuZGlzcGxhY2VtZW50bWFwLFRIUkVFLlVuaWZvcm1zTGliLmZvZyxUSFJFRS5Vbmlmb3Jtc0xpYi5saWdodHMse2VtaXNzaXZlOnt2YWx1ZTpuZXcgVEhSRUUuQ29sb3IoMCl9LHNwZWN1bGFyOnt2YWx1ZTpuZXcgVEhSRUUuQ29sb3IoMTExODQ4MSl9LHNoaW5pbmVzczp7dmFsdWU6MzB9fV0pLHZlcnRleFNoYWRlcjpUSFJFRS5TaGFkZXJDaHVuay5tZXNocGhvbmdfdmVydCxmcmFnbWVudFNoYWRlcjpUSFJFRS5TaGFkZXJDaHVuay5tZXNocGhvbmdfZnJhZ30sXG5zdGFuZGFyZDp7dW5pZm9ybXM6VEhSRUUuVW5pZm9ybXNVdGlscy5tZXJnZShbVEhSRUUuVW5pZm9ybXNMaWIuY29tbW9uLFRIUkVFLlVuaWZvcm1zTGliLmFvbWFwLFRIUkVFLlVuaWZvcm1zTGliLmxpZ2h0bWFwLFRIUkVFLlVuaWZvcm1zTGliLmVtaXNzaXZlbWFwLFRIUkVFLlVuaWZvcm1zTGliLmJ1bXBtYXAsVEhSRUUuVW5pZm9ybXNMaWIubm9ybWFsbWFwLFRIUkVFLlVuaWZvcm1zTGliLmRpc3BsYWNlbWVudG1hcCxUSFJFRS5Vbmlmb3Jtc0xpYi5yb3VnaG5lc3NtYXAsVEhSRUUuVW5pZm9ybXNMaWIubWV0YWxuZXNzbWFwLFRIUkVFLlVuaWZvcm1zTGliLmZvZyxUSFJFRS5Vbmlmb3Jtc0xpYi5saWdodHMse2VtaXNzaXZlOnt2YWx1ZTpuZXcgVEhSRUUuQ29sb3IoMCl9LHJvdWdobmVzczp7dmFsdWU6LjV9LG1ldGFsbmVzczp7dmFsdWU6MH0sZW52TWFwSW50ZW5zaXR5Ont2YWx1ZToxfX1dKSx2ZXJ0ZXhTaGFkZXI6VEhSRUUuU2hhZGVyQ2h1bmsubWVzaHBoeXNpY2FsX3ZlcnQsXG5mcmFnbWVudFNoYWRlcjpUSFJFRS5TaGFkZXJDaHVuay5tZXNocGh5c2ljYWxfZnJhZ30scG9pbnRzOnt1bmlmb3JtczpUSFJFRS5Vbmlmb3Jtc1V0aWxzLm1lcmdlKFtUSFJFRS5Vbmlmb3Jtc0xpYi5wb2ludHMsVEhSRUUuVW5pZm9ybXNMaWIuZm9nXSksdmVydGV4U2hhZGVyOlRIUkVFLlNoYWRlckNodW5rLnBvaW50c192ZXJ0LGZyYWdtZW50U2hhZGVyOlRIUkVFLlNoYWRlckNodW5rLnBvaW50c19mcmFnfSxkYXNoZWQ6e3VuaWZvcm1zOlRIUkVFLlVuaWZvcm1zVXRpbHMubWVyZ2UoW1RIUkVFLlVuaWZvcm1zTGliLmNvbW1vbixUSFJFRS5Vbmlmb3Jtc0xpYi5mb2cse3NjYWxlOnt2YWx1ZToxfSxkYXNoU2l6ZTp7dmFsdWU6MX0sdG90YWxTaXplOnt2YWx1ZToyfX1dKSx2ZXJ0ZXhTaGFkZXI6VEhSRUUuU2hhZGVyQ2h1bmsubGluZWRhc2hlZF92ZXJ0LGZyYWdtZW50U2hhZGVyOlRIUkVFLlNoYWRlckNodW5rLmxpbmVkYXNoZWRfZnJhZ30sZGVwdGg6e3VuaWZvcm1zOlRIUkVFLlVuaWZvcm1zVXRpbHMubWVyZ2UoW1RIUkVFLlVuaWZvcm1zTGliLmNvbW1vbixcblRIUkVFLlVuaWZvcm1zTGliLmRpc3BsYWNlbWVudG1hcF0pLHZlcnRleFNoYWRlcjpUSFJFRS5TaGFkZXJDaHVuay5kZXB0aF92ZXJ0LGZyYWdtZW50U2hhZGVyOlRIUkVFLlNoYWRlckNodW5rLmRlcHRoX2ZyYWd9LG5vcm1hbDp7dW5pZm9ybXM6e29wYWNpdHk6e3ZhbHVlOjF9fSx2ZXJ0ZXhTaGFkZXI6VEhSRUUuU2hhZGVyQ2h1bmsubm9ybWFsX3ZlcnQsZnJhZ21lbnRTaGFkZXI6VEhSRUUuU2hhZGVyQ2h1bmsubm9ybWFsX2ZyYWd9LGN1YmU6e3VuaWZvcm1zOnt0Q3ViZTp7dmFsdWU6bnVsbH0sdEZsaXA6e3ZhbHVlOi0xfSxvcGFjaXR5Ont2YWx1ZToxfX0sdmVydGV4U2hhZGVyOlRIUkVFLlNoYWRlckNodW5rLmN1YmVfdmVydCxmcmFnbWVudFNoYWRlcjpUSFJFRS5TaGFkZXJDaHVuay5jdWJlX2ZyYWd9LGVxdWlyZWN0Ont1bmlmb3Jtczp7dEVxdWlyZWN0Ont2YWx1ZTpudWxsfSx0RmxpcDp7dmFsdWU6LTF9fSx2ZXJ0ZXhTaGFkZXI6VEhSRUUuU2hhZGVyQ2h1bmsuZXF1aXJlY3RfdmVydCxcbmZyYWdtZW50U2hhZGVyOlRIUkVFLlNoYWRlckNodW5rLmVxdWlyZWN0X2ZyYWd9LGRpc3RhbmNlUkdCQTp7dW5pZm9ybXM6e2xpZ2h0UG9zOnt2YWx1ZTpuZXcgVEhSRUUuVmVjdG9yM319LHZlcnRleFNoYWRlcjpUSFJFRS5TaGFkZXJDaHVuay5kaXN0YW5jZVJHQkFfdmVydCxmcmFnbWVudFNoYWRlcjpUSFJFRS5TaGFkZXJDaHVuay5kaXN0YW5jZVJHQkFfZnJhZ319O1RIUkVFLlNoYWRlckxpYi5waHlzaWNhbD17dW5pZm9ybXM6VEhSRUUuVW5pZm9ybXNVdGlscy5tZXJnZShbVEhSRUUuU2hhZGVyTGliLnN0YW5kYXJkLnVuaWZvcm1zLHtjbGVhckNvYXQ6e3ZhbHVlOjB9LGNsZWFyQ29hdFJvdWdobmVzczp7dmFsdWU6MH19XSksdmVydGV4U2hhZGVyOlRIUkVFLlNoYWRlckNodW5rLm1lc2hwaHlzaWNhbF92ZXJ0LGZyYWdtZW50U2hhZGVyOlRIUkVFLlNoYWRlckNodW5rLm1lc2hwaHlzaWNhbF9mcmFnfTtcblRIUkVFLldlYkdMUmVuZGVyZXI9ZnVuY3Rpb24oYSl7ZnVuY3Rpb24gYihhLGIsYyxkKXshMD09PUEmJihhKj1kLGIqPWQsYyo9ZCk7Ui5jbGVhckNvbG9yKGEsYixjLGQpfWZ1bmN0aW9uIGMoKXtSLmluaXQoKTtSLnNjaXNzb3IoWC5jb3B5KHVhKS5tdWx0aXBseVNjYWxhcihaKSk7Ui52aWV3cG9ydChmYS5jb3B5KG5hKS5tdWx0aXBseVNjYWxhcihaKSk7YihWLnIsVi5nLFYuYixiYSl9ZnVuY3Rpb24gZCgpe1Q9UT1udWxsOyQ9XCJcIjtFPS0xO1IucmVzZXQoKX1mdW5jdGlvbiBlKGEpe2EucHJldmVudERlZmF1bHQoKTtkKCk7YygpO1kuY2xlYXIoKX1mdW5jdGlvbiBmKGEpe2E9YS50YXJnZXQ7YS5yZW1vdmVFdmVudExpc3RlbmVyKFwiZGlzcG9zZVwiLGYpO2coYSk7WS5kZWxldGUoYSl9ZnVuY3Rpb24gZyhhKXt2YXIgYj1ZLmdldChhKS5wcm9ncmFtO2EucHJvZ3JhbT12b2lkIDA7dm9pZCAwIT09YiYmb2EucmVsZWFzZVByb2dyYW0oYil9ZnVuY3Rpb24gaChhLGIpe3JldHVybiBNYXRoLmFicyhiWzBdKS1cbk1hdGguYWJzKGFbMF0pfWZ1bmN0aW9uIGsoYSxiKXtyZXR1cm4gYS5vYmplY3QucmVuZGVyT3JkZXIhPT1iLm9iamVjdC5yZW5kZXJPcmRlcj9hLm9iamVjdC5yZW5kZXJPcmRlci1iLm9iamVjdC5yZW5kZXJPcmRlcjphLm1hdGVyaWFsLnByb2dyYW0mJmIubWF0ZXJpYWwucHJvZ3JhbSYmYS5tYXRlcmlhbC5wcm9ncmFtIT09Yi5tYXRlcmlhbC5wcm9ncmFtP2EubWF0ZXJpYWwucHJvZ3JhbS5pZC1iLm1hdGVyaWFsLnByb2dyYW0uaWQ6YS5tYXRlcmlhbC5pZCE9PWIubWF0ZXJpYWwuaWQ/YS5tYXRlcmlhbC5pZC1iLm1hdGVyaWFsLmlkOmEueiE9PWIuej9hLnotYi56OmEuaWQtYi5pZH1mdW5jdGlvbiBsKGEsYil7cmV0dXJuIGEub2JqZWN0LnJlbmRlck9yZGVyIT09Yi5vYmplY3QucmVuZGVyT3JkZXI/YS5vYmplY3QucmVuZGVyT3JkZXItYi5vYmplY3QucmVuZGVyT3JkZXI6YS56IT09Yi56P2Iuei1hLno6YS5pZC1iLmlkfWZ1bmN0aW9uIG0oYSxiLGMsZCxlKXt2YXIgZztjLnRyYW5zcGFyZW50P1xuKGQ9UCxnPSsrSyk6KGQ9RixnPSsrSik7Zz1kW2ddO3ZvaWQgMCE9PWc/KGcuaWQ9YS5pZCxnLm9iamVjdD1hLGcuZ2VvbWV0cnk9YixnLm1hdGVyaWFsPWMsZy56PVcueixnLmdyb3VwPWUpOihnPXtpZDphLmlkLG9iamVjdDphLGdlb21ldHJ5OmIsbWF0ZXJpYWw6Yyx6Olcueixncm91cDplfSxkLnB1c2goZykpfWZ1bmN0aW9uIHAoYSl7aWYoIXdhLmludGVyc2VjdHNTcGhlcmUoYSkpcmV0dXJuITE7dmFyIGI9ZGEubnVtUGxhbmVzO2lmKDA9PT1iKXJldHVybiEwO3ZhciBjPU4uY2xpcHBpbmdQbGFuZXMsZD1hLmNlbnRlcjthPS1hLnJhZGl1czt2YXIgZT0wO2RvIGlmKGNbZV0uZGlzdGFuY2VUb1BvaW50KGQpPGEpcmV0dXJuITE7d2hpbGUoKytlIT09Yik7cmV0dXJuITB9ZnVuY3Rpb24gbihhLGIpe2lmKCExIT09YS52aXNpYmxlKXtpZihhLmxheWVycy50ZXN0KGIubGF5ZXJzKSlpZihhIGluc3RhbmNlb2YgVEhSRUUuTGlnaHQpQi5wdXNoKGEpO2Vsc2UgaWYoYSBpbnN0YW5jZW9mXG5USFJFRS5TcHJpdGUpe3ZhciBjOyhjPSExPT09YS5mcnVzdHVtQ3VsbGVkKXx8KGthLmNlbnRlci5zZXQoMCwwLDApLGthLnJhZGl1cz0uNzA3MTA2NzgxMTg2NTQ3NixrYS5hcHBseU1hdHJpeDQoYS5tYXRyaXhXb3JsZCksYz0hMD09PXAoa2EpKTtjJiZNLnB1c2goYSl9ZWxzZSBpZihhIGluc3RhbmNlb2YgVEhSRUUuTGVuc0ZsYXJlKU8ucHVzaChhKTtlbHNlIGlmKGEgaW5zdGFuY2VvZiBUSFJFRS5JbW1lZGlhdGVSZW5kZXJPYmplY3QpITA9PT1OLnNvcnRPYmplY3RzJiYoVy5zZXRGcm9tTWF0cml4UG9zaXRpb24oYS5tYXRyaXhXb3JsZCksVy5hcHBseVByb2plY3Rpb24ocWEpKSxtKGEsbnVsbCxhLm1hdGVyaWFsLFcueixudWxsKTtlbHNlIGlmKGEgaW5zdGFuY2VvZiBUSFJFRS5NZXNofHxhIGluc3RhbmNlb2YgVEhSRUUuTGluZXx8YSBpbnN0YW5jZW9mIFRIUkVFLlBvaW50cylpZihhIGluc3RhbmNlb2YgVEhSRUUuU2tpbm5lZE1lc2gmJmEuc2tlbGV0b24udXBkYXRlKCksXG4oYz0hMT09PWEuZnJ1c3R1bUN1bGxlZCl8fChjPWEuZ2VvbWV0cnksbnVsbD09PWMuYm91bmRpbmdTcGhlcmUmJmMuY29tcHV0ZUJvdW5kaW5nU3BoZXJlKCksa2EuY29weShjLmJvdW5kaW5nU3BoZXJlKS5hcHBseU1hdHJpeDQoYS5tYXRyaXhXb3JsZCksYz0hMD09PXAoa2EpKSxjKXt2YXIgZD1hLm1hdGVyaWFsO2lmKCEwPT09ZC52aXNpYmxlKWlmKCEwPT09Ti5zb3J0T2JqZWN0cyYmKFcuc2V0RnJvbU1hdHJpeFBvc2l0aW9uKGEubWF0cml4V29ybGQpLFcuYXBwbHlQcm9qZWN0aW9uKHFhKSksYz1oYS51cGRhdGUoYSksZCBpbnN0YW5jZW9mIFRIUkVFLk11bHRpTWF0ZXJpYWwpZm9yKHZhciBlPWMuZ3JvdXBzLGc9ZC5tYXRlcmlhbHMsZD0wLGY9ZS5sZW5ndGg7ZDxmO2QrKyl7dmFyIGg9ZVtkXSxrPWdbaC5tYXRlcmlhbEluZGV4XTshMD09PWsudmlzaWJsZSYmbShhLGMsayxXLnosaCl9ZWxzZSBtKGEsYyxkLFcueixudWxsKX1jPWEuY2hpbGRyZW47ZD0wO2ZvcihmPWMubGVuZ3RoO2Q8XG5mO2QrKyluKGNbZF0sYil9fWZ1bmN0aW9uIHEoYSxiLGMsZCl7Zm9yKHZhciBlPTAsZz1hLmxlbmd0aDtlPGc7ZSsrKXt2YXIgZj1hW2VdLGg9Zi5vYmplY3Qsaz1mLmdlb21ldHJ5LGw9dm9pZCAwPT09ZD9mLm1hdGVyaWFsOmQsZj1mLmdyb3VwO2gubW9kZWxWaWV3TWF0cml4Lm11bHRpcGx5TWF0cmljZXMoYi5tYXRyaXhXb3JsZEludmVyc2UsaC5tYXRyaXhXb3JsZCk7aC5ub3JtYWxNYXRyaXguZ2V0Tm9ybWFsTWF0cml4KGgubW9kZWxWaWV3TWF0cml4KTtpZihoIGluc3RhbmNlb2YgVEhSRUUuSW1tZWRpYXRlUmVuZGVyT2JqZWN0KXtyKGwpO3ZhciBuPXMoYixjLGwsaCk7JD1cIlwiO2gucmVuZGVyKGZ1bmN0aW9uKGEpe04ucmVuZGVyQnVmZmVySW1tZWRpYXRlKGEsbixsKX0pfWVsc2UgTi5yZW5kZXJCdWZmZXJEaXJlY3QoYixjLGssbCxoLGYpfX1mdW5jdGlvbiByKGEpe2Euc2lkZSE9PVRIUkVFLkRvdWJsZVNpZGU/Ui5lbmFibGUoeC5DVUxMX0ZBQ0UpOlIuZGlzYWJsZSh4LkNVTExfRkFDRSk7XG5SLnNldEZsaXBTaWRlZChhLnNpZGU9PT1USFJFRS5CYWNrU2lkZSk7ITA9PT1hLnRyYW5zcGFyZW50P1Iuc2V0QmxlbmRpbmcoYS5ibGVuZGluZyxhLmJsZW5kRXF1YXRpb24sYS5ibGVuZFNyYyxhLmJsZW5kRHN0LGEuYmxlbmRFcXVhdGlvbkFscGhhLGEuYmxlbmRTcmNBbHBoYSxhLmJsZW5kRHN0QWxwaGEsYS5wcmVtdWx0aXBsaWVkQWxwaGEpOlIuc2V0QmxlbmRpbmcoVEhSRUUuTm9CbGVuZGluZyk7Ui5zZXREZXB0aEZ1bmMoYS5kZXB0aEZ1bmMpO1Iuc2V0RGVwdGhUZXN0KGEuZGVwdGhUZXN0KTtSLnNldERlcHRoV3JpdGUoYS5kZXB0aFdyaXRlKTtSLnNldENvbG9yV3JpdGUoYS5jb2xvcldyaXRlKTtSLnNldFBvbHlnb25PZmZzZXQoYS5wb2x5Z29uT2Zmc2V0LGEucG9seWdvbk9mZnNldEZhY3RvcixhLnBvbHlnb25PZmZzZXRVbml0cyl9ZnVuY3Rpb24gcyhhLGIsYyxkKXtnYT0wO3ZhciBlPVkuZ2V0KGMpO3JhJiYoKHZhfHxhIT09VCkmJmRhLnNldFN0YXRlKGMuY2xpcHBpbmdQbGFuZXMsXG5jLmNsaXBTaGFkb3dzLGEsZSxhPT09VCYmYy5pZD09PUUpLHZvaWQgMCE9PWUubnVtQ2xpcHBpbmdQbGFuZXMmJmUubnVtQ2xpcHBpbmdQbGFuZXMhPT1kYS5udW1QbGFuZXMmJihjLm5lZWRzVXBkYXRlPSEwKSk7dm9pZCAwPT09ZS5wcm9ncmFtJiYoYy5uZWVkc1VwZGF0ZT0hMCk7dm9pZCAwIT09ZS5saWdodHNIYXNoJiZlLmxpZ2h0c0hhc2ghPT1TLmhhc2gmJihjLm5lZWRzVXBkYXRlPSEwKTtpZihjLm5lZWRzVXBkYXRlKXthOnt2YXIgaD1ZLmdldChjKSxrPW9hLmdldFBhcmFtZXRlcnMoYyxTLGIsZGEubnVtUGxhbmVzLGQpLGw9b2EuZ2V0UHJvZ3JhbUNvZGUoYyxrKSxuPWgucHJvZ3JhbSxwPSEwO2lmKHZvaWQgMD09PW4pYy5hZGRFdmVudExpc3RlbmVyKFwiZGlzcG9zZVwiLGYpO2Vsc2UgaWYobi5jb2RlIT09bClnKGMpO2Vsc2UgaWYodm9pZCAwIT09ay5zaGFkZXJJRClicmVhayBhO2Vsc2UgcD0hMTtwJiYoay5zaGFkZXJJRD8obj1USFJFRS5TaGFkZXJMaWJbay5zaGFkZXJJRF0sXG5oLl9fd2ViZ2xTaGFkZXI9e25hbWU6Yy50eXBlLHVuaWZvcm1zOlRIUkVFLlVuaWZvcm1zVXRpbHMuY2xvbmUobi51bmlmb3JtcyksdmVydGV4U2hhZGVyOm4udmVydGV4U2hhZGVyLGZyYWdtZW50U2hhZGVyOm4uZnJhZ21lbnRTaGFkZXJ9KTpoLl9fd2ViZ2xTaGFkZXI9e25hbWU6Yy50eXBlLHVuaWZvcm1zOmMudW5pZm9ybXMsdmVydGV4U2hhZGVyOmMudmVydGV4U2hhZGVyLGZyYWdtZW50U2hhZGVyOmMuZnJhZ21lbnRTaGFkZXJ9LGMuX193ZWJnbFNoYWRlcj1oLl9fd2ViZ2xTaGFkZXIsbj1vYS5hY3F1aXJlUHJvZ3JhbShjLGssbCksaC5wcm9ncmFtPW4sYy5wcm9ncmFtPW4pO2s9bi5nZXRBdHRyaWJ1dGVzKCk7aWYoYy5tb3JwaFRhcmdldHMpZm9yKGw9Yy5udW1TdXBwb3J0ZWRNb3JwaFRhcmdldHM9MDtsPE4ubWF4TW9ycGhUYXJnZXRzO2wrKykwPD1rW1wibW9ycGhUYXJnZXRcIitsXSYmYy5udW1TdXBwb3J0ZWRNb3JwaFRhcmdldHMrKztpZihjLm1vcnBoTm9ybWFscylmb3IobD1cbmMubnVtU3VwcG9ydGVkTW9ycGhOb3JtYWxzPTA7bDxOLm1heE1vcnBoTm9ybWFscztsKyspMDw9a1tcIm1vcnBoTm9ybWFsXCIrbF0mJmMubnVtU3VwcG9ydGVkTW9ycGhOb3JtYWxzKys7az1oLl9fd2ViZ2xTaGFkZXIudW5pZm9ybXM7KGMgaW5zdGFuY2VvZiBUSFJFRS5TaGFkZXJNYXRlcmlhbHx8YyBpbnN0YW5jZW9mIFRIUkVFLlJhd1NoYWRlck1hdGVyaWFsKSYmITAhPT1jLmNsaXBwaW5nfHwoaC5udW1DbGlwcGluZ1BsYW5lcz1kYS5udW1QbGFuZXMsay5jbGlwcGluZ1BsYW5lcz1kYS51bmlmb3JtKTtjLmxpZ2h0cyYmKGgubGlnaHRzSGFzaD1TLmhhc2gsay5hbWJpZW50TGlnaHRDb2xvci52YWx1ZT1TLmFtYmllbnQsay5kaXJlY3Rpb25hbExpZ2h0cy52YWx1ZT1TLmRpcmVjdGlvbmFsLGsuc3BvdExpZ2h0cy52YWx1ZT1TLnNwb3Qsay5wb2ludExpZ2h0cy52YWx1ZT1TLnBvaW50LGsuaGVtaXNwaGVyZUxpZ2h0cy52YWx1ZT1TLmhlbWksay5kaXJlY3Rpb25hbFNoYWRvd01hcC52YWx1ZT1cblMuZGlyZWN0aW9uYWxTaGFkb3dNYXAsay5kaXJlY3Rpb25hbFNoYWRvd01hdHJpeC52YWx1ZT1TLmRpcmVjdGlvbmFsU2hhZG93TWF0cml4LGsuc3BvdFNoYWRvd01hcC52YWx1ZT1TLnNwb3RTaGFkb3dNYXAsay5zcG90U2hhZG93TWF0cml4LnZhbHVlPVMuc3BvdFNoYWRvd01hdHJpeCxrLnBvaW50U2hhZG93TWFwLnZhbHVlPVMucG9pbnRTaGFkb3dNYXAsay5wb2ludFNoYWRvd01hdHJpeC52YWx1ZT1TLnBvaW50U2hhZG93TWF0cml4KTtsPWgucHJvZ3JhbS5nZXRVbmlmb3JtcygpO2w9VEhSRUUuV2ViR0xVbmlmb3Jtcy5zZXFXaXRoVmFsdWUobC5zZXEsayk7aC51bmlmb3Jtc0xpc3Q9bDtoLmR5bmFtaWNVbmlmb3Jtcz1USFJFRS5XZWJHTFVuaWZvcm1zLnNwbGl0RHluYW1pYyhsLGspfWMubmVlZHNVcGRhdGU9ITF9dmFyIG09ITEscD1uPSExLGg9ZS5wcm9ncmFtLGw9aC5nZXRVbmlmb3JtcygpLGs9ZS5fX3dlYmdsU2hhZGVyLnVuaWZvcm1zO2guaWQhPT1RJiYoeC51c2VQcm9ncmFtKGgucHJvZ3JhbSksXG5RPWguaWQscD1uPW09ITApO2MuaWQhPT1FJiYoRT1jLmlkLG49ITApO2lmKG18fGEhPT1UKXtsLnNldCh4LGEsXCJwcm9qZWN0aW9uTWF0cml4XCIpO2NhLmxvZ2FyaXRobWljRGVwdGhCdWZmZXImJmwuc2V0VmFsdWUoeCxcImxvZ0RlcHRoQnVmRkNcIiwyLyhNYXRoLmxvZyhhLmZhcisxKS9NYXRoLkxOMikpO2EhPT1UJiYoVD1hLHA9bj0hMCk7aWYoYyBpbnN0YW5jZW9mIFRIUkVFLlNoYWRlck1hdGVyaWFsfHxjIGluc3RhbmNlb2YgVEhSRUUuTWVzaFBob25nTWF0ZXJpYWx8fGMgaW5zdGFuY2VvZiBUSFJFRS5NZXNoU3RhbmRhcmRNYXRlcmlhbHx8Yy5lbnZNYXApbT1sLm1hcC5jYW1lcmFQb3NpdGlvbix2b2lkIDAhPT1tJiZtLnNldFZhbHVlKHgsVy5zZXRGcm9tTWF0cml4UG9zaXRpb24oYS5tYXRyaXhXb3JsZCkpOyhjIGluc3RhbmNlb2YgVEhSRUUuTWVzaFBob25nTWF0ZXJpYWx8fGMgaW5zdGFuY2VvZiBUSFJFRS5NZXNoTGFtYmVydE1hdGVyaWFsfHxjIGluc3RhbmNlb2YgVEhSRUUuTWVzaEJhc2ljTWF0ZXJpYWx8fFxuYyBpbnN0YW5jZW9mIFRIUkVFLk1lc2hTdGFuZGFyZE1hdGVyaWFsfHxjIGluc3RhbmNlb2YgVEhSRUUuU2hhZGVyTWF0ZXJpYWx8fGMuc2tpbm5pbmcpJiZsLnNldFZhbHVlKHgsXCJ2aWV3TWF0cml4XCIsYS5tYXRyaXhXb3JsZEludmVyc2UpO2wuc2V0KHgsTixcInRvbmVNYXBwaW5nRXhwb3N1cmVcIik7bC5zZXQoeCxOLFwidG9uZU1hcHBpbmdXaGl0ZVBvaW50XCIpfWMuc2tpbm5pbmcmJihsLnNldE9wdGlvbmFsKHgsZCxcImJpbmRNYXRyaXhcIiksbC5zZXRPcHRpb25hbCh4LGQsXCJiaW5kTWF0cml4SW52ZXJzZVwiKSxtPWQuc2tlbGV0b24pJiYoY2EuZmxvYXRWZXJ0ZXhUZXh0dXJlcyYmbS51c2VWZXJ0ZXhUZXh0dXJlPyhsLnNldCh4LG0sXCJib25lVGV4dHVyZVwiKSxsLnNldCh4LG0sXCJib25lVGV4dHVyZVdpZHRoXCIpLGwuc2V0KHgsbSxcImJvbmVUZXh0dXJlSGVpZ2h0XCIpKTpsLnNldE9wdGlvbmFsKHgsbSxcImJvbmVNYXRyaWNlc1wiKSk7aWYobil7Yy5saWdodHMmJihuPXAsay5hbWJpZW50TGlnaHRDb2xvci5uZWVkc1VwZGF0ZT1cbm4say5kaXJlY3Rpb25hbExpZ2h0cy5uZWVkc1VwZGF0ZT1uLGsucG9pbnRMaWdodHMubmVlZHNVcGRhdGU9bixrLnNwb3RMaWdodHMubmVlZHNVcGRhdGU9bixrLmhlbWlzcGhlcmVMaWdodHMubmVlZHNVcGRhdGU9bik7YiYmYy5mb2cmJihrLmZvZ0NvbG9yLnZhbHVlPWIuY29sb3IsYiBpbnN0YW5jZW9mIFRIUkVFLkZvZz8oay5mb2dOZWFyLnZhbHVlPWIubmVhcixrLmZvZ0Zhci52YWx1ZT1iLmZhcik6YiBpbnN0YW5jZW9mIFRIUkVFLkZvZ0V4cDImJihrLmZvZ0RlbnNpdHkudmFsdWU9Yi5kZW5zaXR5KSk7aWYoYyBpbnN0YW5jZW9mIFRIUkVFLk1lc2hCYXNpY01hdGVyaWFsfHxjIGluc3RhbmNlb2YgVEhSRUUuTWVzaExhbWJlcnRNYXRlcmlhbHx8YyBpbnN0YW5jZW9mIFRIUkVFLk1lc2hQaG9uZ01hdGVyaWFsfHxjIGluc3RhbmNlb2YgVEhSRUUuTWVzaFN0YW5kYXJkTWF0ZXJpYWx8fGMgaW5zdGFuY2VvZiBUSFJFRS5NZXNoRGVwdGhNYXRlcmlhbCl7ay5vcGFjaXR5LnZhbHVlPVxuYy5vcGFjaXR5O2suZGlmZnVzZS52YWx1ZT1jLmNvbG9yO2MuZW1pc3NpdmUmJmsuZW1pc3NpdmUudmFsdWUuY29weShjLmVtaXNzaXZlKS5tdWx0aXBseVNjYWxhcihjLmVtaXNzaXZlSW50ZW5zaXR5KTtrLm1hcC52YWx1ZT1jLm1hcDtrLnNwZWN1bGFyTWFwLnZhbHVlPWMuc3BlY3VsYXJNYXA7ay5hbHBoYU1hcC52YWx1ZT1jLmFscGhhTWFwO2MuYW9NYXAmJihrLmFvTWFwLnZhbHVlPWMuYW9NYXAsay5hb01hcEludGVuc2l0eS52YWx1ZT1jLmFvTWFwSW50ZW5zaXR5KTt2YXIgcTtjLm1hcD9xPWMubWFwOmMuc3BlY3VsYXJNYXA/cT1jLnNwZWN1bGFyTWFwOmMuZGlzcGxhY2VtZW50TWFwP3E9Yy5kaXNwbGFjZW1lbnRNYXA6Yy5ub3JtYWxNYXA/cT1jLm5vcm1hbE1hcDpjLmJ1bXBNYXA/cT1jLmJ1bXBNYXA6Yy5yb3VnaG5lc3NNYXA/cT1jLnJvdWdobmVzc01hcDpjLm1ldGFsbmVzc01hcD9xPWMubWV0YWxuZXNzTWFwOmMuYWxwaGFNYXA/cT1jLmFscGhhTWFwOmMuZW1pc3NpdmVNYXAmJlxuKHE9Yy5lbWlzc2l2ZU1hcCk7dm9pZCAwIT09cSYmKHEgaW5zdGFuY2VvZiBUSFJFRS5XZWJHTFJlbmRlclRhcmdldCYmKHE9cS50ZXh0dXJlKSxiPXEub2Zmc2V0LHE9cS5yZXBlYXQsay5vZmZzZXRSZXBlYXQudmFsdWUuc2V0KGIueCxiLnkscS54LHEueSkpO2suZW52TWFwLnZhbHVlPWMuZW52TWFwO2suZmxpcEVudk1hcC52YWx1ZT1jLmVudk1hcCBpbnN0YW5jZW9mIFRIUkVFLkN1YmVUZXh0dXJlPy0xOjE7ay5yZWZsZWN0aXZpdHkudmFsdWU9Yy5yZWZsZWN0aXZpdHk7ay5yZWZyYWN0aW9uUmF0aW8udmFsdWU9Yy5yZWZyYWN0aW9uUmF0aW99YyBpbnN0YW5jZW9mIFRIUkVFLkxpbmVCYXNpY01hdGVyaWFsPyhrLmRpZmZ1c2UudmFsdWU9Yy5jb2xvcixrLm9wYWNpdHkudmFsdWU9Yy5vcGFjaXR5KTpjIGluc3RhbmNlb2YgVEhSRUUuTGluZURhc2hlZE1hdGVyaWFsPyhrLmRpZmZ1c2UudmFsdWU9Yy5jb2xvcixrLm9wYWNpdHkudmFsdWU9Yy5vcGFjaXR5LGsuZGFzaFNpemUudmFsdWU9XG5jLmRhc2hTaXplLGsudG90YWxTaXplLnZhbHVlPWMuZGFzaFNpemUrYy5nYXBTaXplLGsuc2NhbGUudmFsdWU9Yy5zY2FsZSk6YyBpbnN0YW5jZW9mIFRIUkVFLlBvaW50c01hdGVyaWFsPyhrLmRpZmZ1c2UudmFsdWU9Yy5jb2xvcixrLm9wYWNpdHkudmFsdWU9Yy5vcGFjaXR5LGsuc2l6ZS52YWx1ZT1jLnNpemUqWixrLnNjYWxlLnZhbHVlPS41KnUuY2xpZW50SGVpZ2h0LGsubWFwLnZhbHVlPWMubWFwLG51bGwhPT1jLm1hcCYmKHE9Yy5tYXAub2Zmc2V0LGM9Yy5tYXAucmVwZWF0LGsub2Zmc2V0UmVwZWF0LnZhbHVlLnNldChxLngscS55LGMueCxjLnkpKSk6YyBpbnN0YW5jZW9mIFRIUkVFLk1lc2hMYW1iZXJ0TWF0ZXJpYWw/KGMubGlnaHRNYXAmJihrLmxpZ2h0TWFwLnZhbHVlPWMubGlnaHRNYXAsay5saWdodE1hcEludGVuc2l0eS52YWx1ZT1jLmxpZ2h0TWFwSW50ZW5zaXR5KSxjLmVtaXNzaXZlTWFwJiYoay5lbWlzc2l2ZU1hcC52YWx1ZT1jLmVtaXNzaXZlTWFwKSk6YyBpbnN0YW5jZW9mXG5USFJFRS5NZXNoUGhvbmdNYXRlcmlhbD8oay5zcGVjdWxhci52YWx1ZT1jLnNwZWN1bGFyLGsuc2hpbmluZXNzLnZhbHVlPU1hdGgubWF4KGMuc2hpbmluZXNzLDFFLTQpLGMubGlnaHRNYXAmJihrLmxpZ2h0TWFwLnZhbHVlPWMubGlnaHRNYXAsay5saWdodE1hcEludGVuc2l0eS52YWx1ZT1jLmxpZ2h0TWFwSW50ZW5zaXR5KSxjLmVtaXNzaXZlTWFwJiYoay5lbWlzc2l2ZU1hcC52YWx1ZT1jLmVtaXNzaXZlTWFwKSxjLmJ1bXBNYXAmJihrLmJ1bXBNYXAudmFsdWU9Yy5idW1wTWFwLGsuYnVtcFNjYWxlLnZhbHVlPWMuYnVtcFNjYWxlKSxjLm5vcm1hbE1hcCYmKGsubm9ybWFsTWFwLnZhbHVlPWMubm9ybWFsTWFwLGsubm9ybWFsU2NhbGUudmFsdWUuY29weShjLm5vcm1hbFNjYWxlKSksYy5kaXNwbGFjZW1lbnRNYXAmJihrLmRpc3BsYWNlbWVudE1hcC52YWx1ZT1jLmRpc3BsYWNlbWVudE1hcCxrLmRpc3BsYWNlbWVudFNjYWxlLnZhbHVlPWMuZGlzcGxhY2VtZW50U2NhbGUsay5kaXNwbGFjZW1lbnRCaWFzLnZhbHVlPVxuYy5kaXNwbGFjZW1lbnRCaWFzKSk6YyBpbnN0YW5jZW9mIFRIUkVFLk1lc2hQaHlzaWNhbE1hdGVyaWFsPyhrLmNsZWFyQ29hdC52YWx1ZT1jLmNsZWFyQ29hdCxrLmNsZWFyQ29hdFJvdWdobmVzcy52YWx1ZT1jLmNsZWFyQ29hdFJvdWdobmVzcyx2KGssYykpOmMgaW5zdGFuY2VvZiBUSFJFRS5NZXNoU3RhbmRhcmRNYXRlcmlhbD92KGssYyk6YyBpbnN0YW5jZW9mIFRIUkVFLk1lc2hEZXB0aE1hdGVyaWFsP2MuZGlzcGxhY2VtZW50TWFwJiYoay5kaXNwbGFjZW1lbnRNYXAudmFsdWU9Yy5kaXNwbGFjZW1lbnRNYXAsay5kaXNwbGFjZW1lbnRTY2FsZS52YWx1ZT1jLmRpc3BsYWNlbWVudFNjYWxlLGsuZGlzcGxhY2VtZW50Qmlhcy52YWx1ZT1jLmRpc3BsYWNlbWVudEJpYXMpOmMgaW5zdGFuY2VvZiBUSFJFRS5NZXNoTm9ybWFsTWF0ZXJpYWwmJihrLm9wYWNpdHkudmFsdWU9Yy5vcGFjaXR5KTtUSFJFRS5XZWJHTFVuaWZvcm1zLnVwbG9hZCh4LGUudW5pZm9ybXNMaXN0LGssTil9bC5zZXQoeCxcbmQsXCJtb2RlbFZpZXdNYXRyaXhcIik7bC5zZXQoeCxkLFwibm9ybWFsTWF0cml4XCIpO2wuc2V0VmFsdWUoeCxcIm1vZGVsTWF0cml4XCIsZC5tYXRyaXhXb3JsZCk7ZT1lLmR5bmFtaWNVbmlmb3JtcztudWxsIT09ZSYmKFRIUkVFLldlYkdMVW5pZm9ybXMuZXZhbER5bmFtaWMoZSxrLGQsYSksVEhSRUUuV2ViR0xVbmlmb3Jtcy51cGxvYWQoeCxlLGssTikpO3JldHVybiBofWZ1bmN0aW9uIHYoYSxiKXthLnJvdWdobmVzcy52YWx1ZT1iLnJvdWdobmVzczthLm1ldGFsbmVzcy52YWx1ZT1iLm1ldGFsbmVzcztiLnJvdWdobmVzc01hcCYmKGEucm91Z2huZXNzTWFwLnZhbHVlPWIucm91Z2huZXNzTWFwKTtiLm1ldGFsbmVzc01hcCYmKGEubWV0YWxuZXNzTWFwLnZhbHVlPWIubWV0YWxuZXNzTWFwKTtiLmxpZ2h0TWFwJiYoYS5saWdodE1hcC52YWx1ZT1iLmxpZ2h0TWFwLGEubGlnaHRNYXBJbnRlbnNpdHkudmFsdWU9Yi5saWdodE1hcEludGVuc2l0eSk7Yi5lbWlzc2l2ZU1hcCYmKGEuZW1pc3NpdmVNYXAudmFsdWU9XG5iLmVtaXNzaXZlTWFwKTtiLmJ1bXBNYXAmJihhLmJ1bXBNYXAudmFsdWU9Yi5idW1wTWFwLGEuYnVtcFNjYWxlLnZhbHVlPWIuYnVtcFNjYWxlKTtiLm5vcm1hbE1hcCYmKGEubm9ybWFsTWFwLnZhbHVlPWIubm9ybWFsTWFwLGEubm9ybWFsU2NhbGUudmFsdWUuY29weShiLm5vcm1hbFNjYWxlKSk7Yi5kaXNwbGFjZW1lbnRNYXAmJihhLmRpc3BsYWNlbWVudE1hcC52YWx1ZT1iLmRpc3BsYWNlbWVudE1hcCxhLmRpc3BsYWNlbWVudFNjYWxlLnZhbHVlPWIuZGlzcGxhY2VtZW50U2NhbGUsYS5kaXNwbGFjZW1lbnRCaWFzLnZhbHVlPWIuZGlzcGxhY2VtZW50Qmlhcyk7Yi5lbnZNYXAmJihhLmVudk1hcEludGVuc2l0eS52YWx1ZT1iLmVudk1hcEludGVuc2l0eSl9ZnVuY3Rpb24gdChhKXt2YXIgYjtpZihhPT09VEhSRUUuUmVwZWF0V3JhcHBpbmcpcmV0dXJuIHguUkVQRUFUO2lmKGE9PT1USFJFRS5DbGFtcFRvRWRnZVdyYXBwaW5nKXJldHVybiB4LkNMQU1QX1RPX0VER0U7aWYoYT09PVxuVEhSRUUuTWlycm9yZWRSZXBlYXRXcmFwcGluZylyZXR1cm4geC5NSVJST1JFRF9SRVBFQVQ7aWYoYT09PVRIUkVFLk5lYXJlc3RGaWx0ZXIpcmV0dXJuIHguTkVBUkVTVDtpZihhPT09VEhSRUUuTmVhcmVzdE1pcE1hcE5lYXJlc3RGaWx0ZXIpcmV0dXJuIHguTkVBUkVTVF9NSVBNQVBfTkVBUkVTVDtpZihhPT09VEhSRUUuTmVhcmVzdE1pcE1hcExpbmVhckZpbHRlcilyZXR1cm4geC5ORUFSRVNUX01JUE1BUF9MSU5FQVI7aWYoYT09PVRIUkVFLkxpbmVhckZpbHRlcilyZXR1cm4geC5MSU5FQVI7aWYoYT09PVRIUkVFLkxpbmVhck1pcE1hcE5lYXJlc3RGaWx0ZXIpcmV0dXJuIHguTElORUFSX01JUE1BUF9ORUFSRVNUO2lmKGE9PT1USFJFRS5MaW5lYXJNaXBNYXBMaW5lYXJGaWx0ZXIpcmV0dXJuIHguTElORUFSX01JUE1BUF9MSU5FQVI7aWYoYT09PVRIUkVFLlVuc2lnbmVkQnl0ZVR5cGUpcmV0dXJuIHguVU5TSUdORURfQllURTtpZihhPT09VEhSRUUuVW5zaWduZWRTaG9ydDQ0NDRUeXBlKXJldHVybiB4LlVOU0lHTkVEX1NIT1JUXzRfNF80XzQ7XG5pZihhPT09VEhSRUUuVW5zaWduZWRTaG9ydDU1NTFUeXBlKXJldHVybiB4LlVOU0lHTkVEX1NIT1JUXzVfNV81XzE7aWYoYT09PVRIUkVFLlVuc2lnbmVkU2hvcnQ1NjVUeXBlKXJldHVybiB4LlVOU0lHTkVEX1NIT1JUXzVfNl81O2lmKGE9PT1USFJFRS5CeXRlVHlwZSlyZXR1cm4geC5CWVRFO2lmKGE9PT1USFJFRS5TaG9ydFR5cGUpcmV0dXJuIHguU0hPUlQ7aWYoYT09PVRIUkVFLlVuc2lnbmVkU2hvcnRUeXBlKXJldHVybiB4LlVOU0lHTkVEX1NIT1JUO2lmKGE9PT1USFJFRS5JbnRUeXBlKXJldHVybiB4LklOVDtpZihhPT09VEhSRUUuVW5zaWduZWRJbnRUeXBlKXJldHVybiB4LlVOU0lHTkVEX0lOVDtpZihhPT09VEhSRUUuRmxvYXRUeXBlKXJldHVybiB4LkZMT0FUO2I9VS5nZXQoXCJPRVNfdGV4dHVyZV9oYWxmX2Zsb2F0XCIpO2lmKG51bGwhPT1iJiZhPT09VEhSRUUuSGFsZkZsb2F0VHlwZSlyZXR1cm4gYi5IQUxGX0ZMT0FUX09FUztpZihhPT09VEhSRUUuQWxwaGFGb3JtYXQpcmV0dXJuIHguQUxQSEE7XG5pZihhPT09VEhSRUUuUkdCRm9ybWF0KXJldHVybiB4LlJHQjtpZihhPT09VEhSRUUuUkdCQUZvcm1hdClyZXR1cm4geC5SR0JBO2lmKGE9PT1USFJFRS5MdW1pbmFuY2VGb3JtYXQpcmV0dXJuIHguTFVNSU5BTkNFO2lmKGE9PT1USFJFRS5MdW1pbmFuY2VBbHBoYUZvcm1hdClyZXR1cm4geC5MVU1JTkFOQ0VfQUxQSEE7aWYoYT09PVRIUkVFLkRlcHRoRm9ybWF0KXJldHVybiB4LkRFUFRIX0NPTVBPTkVOVDtpZihhPT09VEhSRUUuQWRkRXF1YXRpb24pcmV0dXJuIHguRlVOQ19BREQ7aWYoYT09PVRIUkVFLlN1YnRyYWN0RXF1YXRpb24pcmV0dXJuIHguRlVOQ19TVUJUUkFDVDtpZihhPT09VEhSRUUuUmV2ZXJzZVN1YnRyYWN0RXF1YXRpb24pcmV0dXJuIHguRlVOQ19SRVZFUlNFX1NVQlRSQUNUO2lmKGE9PT1USFJFRS5aZXJvRmFjdG9yKXJldHVybiB4LlpFUk87aWYoYT09PVRIUkVFLk9uZUZhY3RvcilyZXR1cm4geC5PTkU7aWYoYT09PVRIUkVFLlNyY0NvbG9yRmFjdG9yKXJldHVybiB4LlNSQ19DT0xPUjtcbmlmKGE9PT1USFJFRS5PbmVNaW51c1NyY0NvbG9yRmFjdG9yKXJldHVybiB4Lk9ORV9NSU5VU19TUkNfQ09MT1I7aWYoYT09PVRIUkVFLlNyY0FscGhhRmFjdG9yKXJldHVybiB4LlNSQ19BTFBIQTtpZihhPT09VEhSRUUuT25lTWludXNTcmNBbHBoYUZhY3RvcilyZXR1cm4geC5PTkVfTUlOVVNfU1JDX0FMUEhBO2lmKGE9PT1USFJFRS5Ec3RBbHBoYUZhY3RvcilyZXR1cm4geC5EU1RfQUxQSEE7aWYoYT09PVRIUkVFLk9uZU1pbnVzRHN0QWxwaGFGYWN0b3IpcmV0dXJuIHguT05FX01JTlVTX0RTVF9BTFBIQTtpZihhPT09VEhSRUUuRHN0Q29sb3JGYWN0b3IpcmV0dXJuIHguRFNUX0NPTE9SO2lmKGE9PT1USFJFRS5PbmVNaW51c0RzdENvbG9yRmFjdG9yKXJldHVybiB4Lk9ORV9NSU5VU19EU1RfQ09MT1I7aWYoYT09PVRIUkVFLlNyY0FscGhhU2F0dXJhdGVGYWN0b3IpcmV0dXJuIHguU1JDX0FMUEhBX1NBVFVSQVRFO2I9VS5nZXQoXCJXRUJHTF9jb21wcmVzc2VkX3RleHR1cmVfczN0Y1wiKTtcbmlmKG51bGwhPT1iKXtpZihhPT09VEhSRUUuUkdCX1MzVENfRFhUMV9Gb3JtYXQpcmV0dXJuIGIuQ09NUFJFU1NFRF9SR0JfUzNUQ19EWFQxX0VYVDtpZihhPT09VEhSRUUuUkdCQV9TM1RDX0RYVDFfRm9ybWF0KXJldHVybiBiLkNPTVBSRVNTRURfUkdCQV9TM1RDX0RYVDFfRVhUO2lmKGE9PT1USFJFRS5SR0JBX1MzVENfRFhUM19Gb3JtYXQpcmV0dXJuIGIuQ09NUFJFU1NFRF9SR0JBX1MzVENfRFhUM19FWFQ7aWYoYT09PVRIUkVFLlJHQkFfUzNUQ19EWFQ1X0Zvcm1hdClyZXR1cm4gYi5DT01QUkVTU0VEX1JHQkFfUzNUQ19EWFQ1X0VYVH1iPVUuZ2V0KFwiV0VCR0xfY29tcHJlc3NlZF90ZXh0dXJlX3B2cnRjXCIpO2lmKG51bGwhPT1iKXtpZihhPT09VEhSRUUuUkdCX1BWUlRDXzRCUFBWMV9Gb3JtYXQpcmV0dXJuIGIuQ09NUFJFU1NFRF9SR0JfUFZSVENfNEJQUFYxX0lNRztpZihhPT09VEhSRUUuUkdCX1BWUlRDXzJCUFBWMV9Gb3JtYXQpcmV0dXJuIGIuQ09NUFJFU1NFRF9SR0JfUFZSVENfMkJQUFYxX0lNRztcbmlmKGE9PT1USFJFRS5SR0JBX1BWUlRDXzRCUFBWMV9Gb3JtYXQpcmV0dXJuIGIuQ09NUFJFU1NFRF9SR0JBX1BWUlRDXzRCUFBWMV9JTUc7aWYoYT09PVRIUkVFLlJHQkFfUFZSVENfMkJQUFYxX0Zvcm1hdClyZXR1cm4gYi5DT01QUkVTU0VEX1JHQkFfUFZSVENfMkJQUFYxX0lNR31iPVUuZ2V0KFwiV0VCR0xfY29tcHJlc3NlZF90ZXh0dXJlX2V0YzFcIik7aWYobnVsbCE9PWImJmE9PT1USFJFRS5SR0JfRVRDMV9Gb3JtYXQpcmV0dXJuIGIuQ09NUFJFU1NFRF9SR0JfRVRDMV9XRUJHTDtiPVUuZ2V0KFwiRVhUX2JsZW5kX21pbm1heFwiKTtpZihudWxsIT09Yil7aWYoYT09PVRIUkVFLk1pbkVxdWF0aW9uKXJldHVybiBiLk1JTl9FWFQ7aWYoYT09PVRIUkVFLk1heEVxdWF0aW9uKXJldHVybiBiLk1BWF9FWFR9cmV0dXJuIDB9Y29uc29sZS5sb2coXCJUSFJFRS5XZWJHTFJlbmRlcmVyXCIsVEhSRUUuUkVWSVNJT04pO2E9YXx8e307dmFyIHU9dm9pZCAwIT09YS5jYW52YXM/YS5jYW52YXM6ZG9jdW1lbnQuY3JlYXRlRWxlbWVudE5TKFwiaHR0cDovL3d3dy53My5vcmcvMTk5OS94aHRtbFwiLFxuXCJjYW52YXNcIiksRD12b2lkIDAhPT1hLmNvbnRleHQ/YS5jb250ZXh0Om51bGwsdz12b2lkIDAhPT1hLmFscGhhP2EuYWxwaGE6ITEsST12b2lkIDAhPT1hLmRlcHRoP2EuZGVwdGg6ITAsej12b2lkIDAhPT1hLnN0ZW5jaWw/YS5zdGVuY2lsOiEwLHk9dm9pZCAwIT09YS5hbnRpYWxpYXM/YS5hbnRpYWxpYXM6ITEsQT12b2lkIDAhPT1hLnByZW11bHRpcGxpZWRBbHBoYT9hLnByZW11bHRpcGxpZWRBbHBoYTohMCxHPXZvaWQgMCE9PWEucHJlc2VydmVEcmF3aW5nQnVmZmVyP2EucHJlc2VydmVEcmF3aW5nQnVmZmVyOiExLEI9W10sRj1bXSxKPS0xLFA9W10sSz0tMSxIPW5ldyBGbG9hdDMyQXJyYXkoOCksTT1bXSxPPVtdO3RoaXMuZG9tRWxlbWVudD11O3RoaXMuY29udGV4dD1udWxsO3RoaXMuc29ydE9iamVjdHM9dGhpcy5hdXRvQ2xlYXJTdGVuY2lsPXRoaXMuYXV0b0NsZWFyRGVwdGg9dGhpcy5hdXRvQ2xlYXJDb2xvcj10aGlzLmF1dG9DbGVhcj0hMDt0aGlzLmNsaXBwaW5nUGxhbmVzPVxuW107dGhpcy5sb2NhbENsaXBwaW5nRW5hYmxlZD0hMTt0aGlzLmdhbW1hRmFjdG9yPTI7dGhpcy5waHlzaWNhbGx5Q29ycmVjdExpZ2h0cz10aGlzLmdhbW1hT3V0cHV0PXRoaXMuZ2FtbWFJbnB1dD0hMTt0aGlzLnRvbmVNYXBwaW5nPVRIUkVFLkxpbmVhclRvbmVNYXBwaW5nO3RoaXMudG9uZU1hcHBpbmdXaGl0ZVBvaW50PXRoaXMudG9uZU1hcHBpbmdFeHBvc3VyZT0xO3RoaXMubWF4TW9ycGhUYXJnZXRzPTg7dGhpcy5tYXhNb3JwaE5vcm1hbHM9NDt2YXIgTj10aGlzLFE9bnVsbCxDPW51bGwsTD1udWxsLEU9LTEsJD1cIlwiLFQ9bnVsbCxYPW5ldyBUSFJFRS5WZWN0b3I0LGVhPW51bGwsZmE9bmV3IFRIUkVFLlZlY3RvcjQsZ2E9MCxWPW5ldyBUSFJFRS5Db2xvcigwKSxiYT0wLGFhPXUud2lkdGgsc2E9dS5oZWlnaHQsWj0xLHVhPW5ldyBUSFJFRS5WZWN0b3I0KDAsMCxhYSxzYSkseGE9ITEsbmE9bmV3IFRIUkVFLlZlY3RvcjQoMCwwLGFhLHNhKSx3YT1uZXcgVEhSRUUuRnJ1c3R1bSxcbmRhPW5ldyBUSFJFRS5XZWJHTENsaXBwaW5nLHJhPSExLHZhPSExLGthPW5ldyBUSFJFRS5TcGhlcmUscWE9bmV3IFRIUkVFLk1hdHJpeDQsVz1uZXcgVEhSRUUuVmVjdG9yMyxTPXtoYXNoOlwiXCIsYW1iaWVudDpbMCwwLDBdLGRpcmVjdGlvbmFsOltdLGRpcmVjdGlvbmFsU2hhZG93TWFwOltdLGRpcmVjdGlvbmFsU2hhZG93TWF0cml4OltdLHNwb3Q6W10sc3BvdFNoYWRvd01hcDpbXSxzcG90U2hhZG93TWF0cml4OltdLHBvaW50OltdLHBvaW50U2hhZG93TWFwOltdLHBvaW50U2hhZG93TWF0cml4OltdLGhlbWk6W10sc2hhZG93czpbXX0saWE9e2NhbGxzOjAsdmVydGljZXM6MCxmYWNlczowLHBvaW50czowfTt0aGlzLmluZm89e3JlbmRlcjppYSxtZW1vcnk6e2dlb21ldHJpZXM6MCx0ZXh0dXJlczowfSxwcm9ncmFtczpudWxsfTt2YXIgeDt0cnl7dz17YWxwaGE6dyxkZXB0aDpJLHN0ZW5jaWw6eixhbnRpYWxpYXM6eSxwcmVtdWx0aXBsaWVkQWxwaGE6QSxwcmVzZXJ2ZURyYXdpbmdCdWZmZXI6R307XG54PUR8fHUuZ2V0Q29udGV4dChcIndlYmdsXCIsdyl8fHUuZ2V0Q29udGV4dChcImV4cGVyaW1lbnRhbC13ZWJnbFwiLHcpO2lmKG51bGw9PT14KXtpZihudWxsIT09dS5nZXRDb250ZXh0KFwid2ViZ2xcIikpdGhyb3dcIkVycm9yIGNyZWF0aW5nIFdlYkdMIGNvbnRleHQgd2l0aCB5b3VyIHNlbGVjdGVkIGF0dHJpYnV0ZXMuXCI7dGhyb3dcIkVycm9yIGNyZWF0aW5nIFdlYkdMIGNvbnRleHQuXCI7fXZvaWQgMD09PXguZ2V0U2hhZGVyUHJlY2lzaW9uRm9ybWF0JiYoeC5nZXRTaGFkZXJQcmVjaXNpb25Gb3JtYXQ9ZnVuY3Rpb24oKXtyZXR1cm57cmFuZ2VNaW46MSxyYW5nZU1heDoxLHByZWNpc2lvbjoxfX0pO3UuYWRkRXZlbnRMaXN0ZW5lcihcIndlYmdsY29udGV4dGxvc3RcIixlLCExKX1jYXRjaCh6YSl7Y29uc29sZS5lcnJvcihcIlRIUkVFLldlYkdMUmVuZGVyZXI6IFwiK3phKX12YXIgVT1uZXcgVEhSRUUuV2ViR0xFeHRlbnNpb25zKHgpO1UuZ2V0KFwiV0VCR0xfZGVwdGhfdGV4dHVyZVwiKTtVLmdldChcIk9FU190ZXh0dXJlX2Zsb2F0XCIpO1xuVS5nZXQoXCJPRVNfdGV4dHVyZV9mbG9hdF9saW5lYXJcIik7VS5nZXQoXCJPRVNfdGV4dHVyZV9oYWxmX2Zsb2F0XCIpO1UuZ2V0KFwiT0VTX3RleHR1cmVfaGFsZl9mbG9hdF9saW5lYXJcIik7VS5nZXQoXCJPRVNfc3RhbmRhcmRfZGVyaXZhdGl2ZXNcIik7VS5nZXQoXCJBTkdMRV9pbnN0YW5jZWRfYXJyYXlzXCIpO1UuZ2V0KFwiT0VTX2VsZW1lbnRfaW5kZXhfdWludFwiKSYmKFRIUkVFLkJ1ZmZlckdlb21ldHJ5Lk1heEluZGV4PTQyOTQ5NjcyOTYpO3ZhciBjYT1uZXcgVEhSRUUuV2ViR0xDYXBhYmlsaXRpZXMoeCxVLGEpLFI9bmV3IFRIUkVFLldlYkdMU3RhdGUoeCxVLHQpLFk9bmV3IFRIUkVFLldlYkdMUHJvcGVydGllcyxsYT1uZXcgVEhSRUUuV2ViR0xUZXh0dXJlcyh4LFUsUixZLGNhLHQsdGhpcy5pbmZvKSxoYT1uZXcgVEhSRUUuV2ViR0xPYmplY3RzKHgsWSx0aGlzLmluZm8pLG9hPW5ldyBUSFJFRS5XZWJHTFByb2dyYW1zKHRoaXMsY2EpLHRhPW5ldyBUSFJFRS5XZWJHTExpZ2h0czt0aGlzLmluZm8ucHJvZ3JhbXM9XG5vYS5wcm9ncmFtczt2YXIgQWE9bmV3IFRIUkVFLldlYkdMQnVmZmVyUmVuZGVyZXIoeCxVLGlhKSxCYT1uZXcgVEhSRUUuV2ViR0xJbmRleGVkQnVmZmVyUmVuZGVyZXIoeCxVLGlhKSxDYT1uZXcgVEhSRUUuT3J0aG9ncmFwaGljQ2FtZXJhKC0xLDEsMSwtMSwwLDEpLG1hPW5ldyBUSFJFRS5QZXJzcGVjdGl2ZUNhbWVyYSxwYT1uZXcgVEhSRUUuTWVzaChuZXcgVEhSRUUuUGxhbmVCdWZmZXJHZW9tZXRyeSgyLDIpLG5ldyBUSFJFRS5NZXNoQmFzaWNNYXRlcmlhbCh7ZGVwdGhUZXN0OiExLGRlcHRoV3JpdGU6ITEsZm9nOiExfSkpO2E9VEhSRUUuU2hhZGVyTGliLmN1YmU7dmFyIGphPW5ldyBUSFJFRS5NZXNoKG5ldyBUSFJFRS5Cb3hCdWZmZXJHZW9tZXRyeSg1LDUsNSksbmV3IFRIUkVFLlNoYWRlck1hdGVyaWFsKHt1bmlmb3JtczphLnVuaWZvcm1zLHZlcnRleFNoYWRlcjphLnZlcnRleFNoYWRlcixmcmFnbWVudFNoYWRlcjphLmZyYWdtZW50U2hhZGVyLHNpZGU6VEhSRUUuQmFja1NpZGUsXG5kZXB0aFRlc3Q6ITEsZGVwdGhXcml0ZTohMSxmb2c6ITF9KSk7YygpO3RoaXMuY29udGV4dD14O3RoaXMuY2FwYWJpbGl0aWVzPWNhO3RoaXMuZXh0ZW5zaW9ucz1VO3RoaXMucHJvcGVydGllcz1ZO3RoaXMuc3RhdGU9Ujt2YXIgeWE9bmV3IFRIUkVFLldlYkdMU2hhZG93TWFwKHRoaXMsUyxoYSxjYSk7dGhpcy5zaGFkb3dNYXA9eWE7dmFyIERhPW5ldyBUSFJFRS5TcHJpdGVQbHVnaW4odGhpcyxNKSxFYT1uZXcgVEhSRUUuTGVuc0ZsYXJlUGx1Z2luKHRoaXMsTyk7dGhpcy5nZXRDb250ZXh0PWZ1bmN0aW9uKCl7cmV0dXJuIHh9O3RoaXMuZ2V0Q29udGV4dEF0dHJpYnV0ZXM9ZnVuY3Rpb24oKXtyZXR1cm4geC5nZXRDb250ZXh0QXR0cmlidXRlcygpfTt0aGlzLmZvcmNlQ29udGV4dExvc3M9ZnVuY3Rpb24oKXtVLmdldChcIldFQkdMX2xvc2VfY29udGV4dFwiKS5sb3NlQ29udGV4dCgpfTt0aGlzLmdldE1heEFuaXNvdHJvcHk9ZnVuY3Rpb24oKXtyZXR1cm4gY2EuZ2V0TWF4QW5pc290cm9weSgpfTtcbnRoaXMuZ2V0UHJlY2lzaW9uPWZ1bmN0aW9uKCl7cmV0dXJuIGNhLnByZWNpc2lvbn07dGhpcy5nZXRQaXhlbFJhdGlvPWZ1bmN0aW9uKCl7cmV0dXJuIFp9O3RoaXMuc2V0UGl4ZWxSYXRpbz1mdW5jdGlvbihhKXt2b2lkIDAhPT1hJiYoWj1hLHRoaXMuc2V0U2l6ZShuYS56LG5hLncsITEpKX07dGhpcy5nZXRTaXplPWZ1bmN0aW9uKCl7cmV0dXJue3dpZHRoOmFhLGhlaWdodDpzYX19O3RoaXMuc2V0U2l6ZT1mdW5jdGlvbihhLGIsYyl7YWE9YTtzYT1iO3Uud2lkdGg9YSpaO3UuaGVpZ2h0PWIqWjshMSE9PWMmJih1LnN0eWxlLndpZHRoPWErXCJweFwiLHUuc3R5bGUuaGVpZ2h0PWIrXCJweFwiKTt0aGlzLnNldFZpZXdwb3J0KDAsMCxhLGIpfTt0aGlzLnNldFZpZXdwb3J0PWZ1bmN0aW9uKGEsYixjLGQpe1Iudmlld3BvcnQobmEuc2V0KGEsYixjLGQpKX07dGhpcy5zZXRTY2lzc29yPWZ1bmN0aW9uKGEsYixjLGQpe1Iuc2Npc3Nvcih1YS5zZXQoYSxiLGMsZCkpfTt0aGlzLnNldFNjaXNzb3JUZXN0PVxuZnVuY3Rpb24oYSl7Ui5zZXRTY2lzc29yVGVzdCh4YT1hKX07dGhpcy5nZXRDbGVhckNvbG9yPWZ1bmN0aW9uKCl7cmV0dXJuIFZ9O3RoaXMuc2V0Q2xlYXJDb2xvcj1mdW5jdGlvbihhLGMpe1Yuc2V0KGEpO2JhPXZvaWQgMCE9PWM/YzoxO2IoVi5yLFYuZyxWLmIsYmEpfTt0aGlzLmdldENsZWFyQWxwaGE9ZnVuY3Rpb24oKXtyZXR1cm4gYmF9O3RoaXMuc2V0Q2xlYXJBbHBoYT1mdW5jdGlvbihhKXtiYT1hO2IoVi5yLFYuZyxWLmIsYmEpfTt0aGlzLmNsZWFyPWZ1bmN0aW9uKGEsYixjKXt2YXIgZD0wO2lmKHZvaWQgMD09PWF8fGEpZHw9eC5DT0xPUl9CVUZGRVJfQklUO2lmKHZvaWQgMD09PWJ8fGIpZHw9eC5ERVBUSF9CVUZGRVJfQklUO2lmKHZvaWQgMD09PWN8fGMpZHw9eC5TVEVOQ0lMX0JVRkZFUl9CSVQ7eC5jbGVhcihkKX07dGhpcy5jbGVhckNvbG9yPWZ1bmN0aW9uKCl7dGhpcy5jbGVhcighMCwhMSwhMSl9O3RoaXMuY2xlYXJEZXB0aD1mdW5jdGlvbigpe3RoaXMuY2xlYXIoITEsXG4hMCwhMSl9O3RoaXMuY2xlYXJTdGVuY2lsPWZ1bmN0aW9uKCl7dGhpcy5jbGVhcighMSwhMSwhMCl9O3RoaXMuY2xlYXJUYXJnZXQ9ZnVuY3Rpb24oYSxiLGMsZCl7dGhpcy5zZXRSZW5kZXJUYXJnZXQoYSk7dGhpcy5jbGVhcihiLGMsZCl9O3RoaXMucmVzZXRHTFN0YXRlPWQ7dGhpcy5kaXNwb3NlPWZ1bmN0aW9uKCl7UD1bXTtLPS0xO0Y9W107Sj0tMTt1LnJlbW92ZUV2ZW50TGlzdGVuZXIoXCJ3ZWJnbGNvbnRleHRsb3N0XCIsZSwhMSl9O3RoaXMucmVuZGVyQnVmZmVySW1tZWRpYXRlPWZ1bmN0aW9uKGEsYixjKXtSLmluaXRBdHRyaWJ1dGVzKCk7dmFyIGQ9WS5nZXQoYSk7YS5oYXNQb3NpdGlvbnMmJiFkLnBvc2l0aW9uJiYoZC5wb3NpdGlvbj14LmNyZWF0ZUJ1ZmZlcigpKTthLmhhc05vcm1hbHMmJiFkLm5vcm1hbCYmKGQubm9ybWFsPXguY3JlYXRlQnVmZmVyKCkpO2EuaGFzVXZzJiYhZC51diYmKGQudXY9eC5jcmVhdGVCdWZmZXIoKSk7YS5oYXNDb2xvcnMmJiFkLmNvbG9yJiZcbihkLmNvbG9yPXguY3JlYXRlQnVmZmVyKCkpO2I9Yi5nZXRBdHRyaWJ1dGVzKCk7YS5oYXNQb3NpdGlvbnMmJih4LmJpbmRCdWZmZXIoeC5BUlJBWV9CVUZGRVIsZC5wb3NpdGlvbikseC5idWZmZXJEYXRhKHguQVJSQVlfQlVGRkVSLGEucG9zaXRpb25BcnJheSx4LkRZTkFNSUNfRFJBVyksUi5lbmFibGVBdHRyaWJ1dGUoYi5wb3NpdGlvbikseC52ZXJ0ZXhBdHRyaWJQb2ludGVyKGIucG9zaXRpb24sMyx4LkZMT0FULCExLDAsMCkpO2lmKGEuaGFzTm9ybWFscyl7eC5iaW5kQnVmZmVyKHguQVJSQVlfQlVGRkVSLGQubm9ybWFsKTtpZihcIk1lc2hQaG9uZ01hdGVyaWFsXCIhPT1jLnR5cGUmJlwiTWVzaFN0YW5kYXJkTWF0ZXJpYWxcIiE9PWMudHlwZSYmXCJNZXNoUGh5c2ljYWxNYXRlcmlhbFwiIT09Yy50eXBlJiZjLnNoYWRpbmc9PT1USFJFRS5GbGF0U2hhZGluZylmb3IodmFyIGU9MCxnPTMqYS5jb3VudDtlPGc7ZSs9OSl7dmFyIGY9YS5ub3JtYWxBcnJheSxoPShmW2UrMF0rZltlKzNdK1xuZltlKzZdKS8zLGs9KGZbZSsxXStmW2UrNF0rZltlKzddKS8zLGw9KGZbZSsyXStmW2UrNV0rZltlKzhdKS8zO2ZbZSswXT1oO2ZbZSsxXT1rO2ZbZSsyXT1sO2ZbZSszXT1oO2ZbZSs0XT1rO2ZbZSs1XT1sO2ZbZSs2XT1oO2ZbZSs3XT1rO2ZbZSs4XT1sfXguYnVmZmVyRGF0YSh4LkFSUkFZX0JVRkZFUixhLm5vcm1hbEFycmF5LHguRFlOQU1JQ19EUkFXKTtSLmVuYWJsZUF0dHJpYnV0ZShiLm5vcm1hbCk7eC52ZXJ0ZXhBdHRyaWJQb2ludGVyKGIubm9ybWFsLDMseC5GTE9BVCwhMSwwLDApfWEuaGFzVXZzJiZjLm1hcCYmKHguYmluZEJ1ZmZlcih4LkFSUkFZX0JVRkZFUixkLnV2KSx4LmJ1ZmZlckRhdGEoeC5BUlJBWV9CVUZGRVIsYS51dkFycmF5LHguRFlOQU1JQ19EUkFXKSxSLmVuYWJsZUF0dHJpYnV0ZShiLnV2KSx4LnZlcnRleEF0dHJpYlBvaW50ZXIoYi51diwyLHguRkxPQVQsITEsMCwwKSk7YS5oYXNDb2xvcnMmJmMudmVydGV4Q29sb3JzIT09VEhSRUUuTm9Db2xvcnMmJlxuKHguYmluZEJ1ZmZlcih4LkFSUkFZX0JVRkZFUixkLmNvbG9yKSx4LmJ1ZmZlckRhdGEoeC5BUlJBWV9CVUZGRVIsYS5jb2xvckFycmF5LHguRFlOQU1JQ19EUkFXKSxSLmVuYWJsZUF0dHJpYnV0ZShiLmNvbG9yKSx4LnZlcnRleEF0dHJpYlBvaW50ZXIoYi5jb2xvciwzLHguRkxPQVQsITEsMCwwKSk7Ui5kaXNhYmxlVW51c2VkQXR0cmlidXRlcygpO3guZHJhd0FycmF5cyh4LlRSSUFOR0xFUywwLGEuY291bnQpO2EuY291bnQ9MH07dGhpcy5yZW5kZXJCdWZmZXJEaXJlY3Q9ZnVuY3Rpb24oYSxiLGMsZCxlLGYpe3IoZCk7dmFyIGc9cyhhLGIsZCxlKSxrPSExO2E9Yy5pZCtcIl9cIitnLmlkK1wiX1wiK2Qud2lyZWZyYW1lO2EhPT0kJiYoJD1hLGs9ITApO2I9ZS5tb3JwaFRhcmdldEluZmx1ZW5jZXM7aWYodm9pZCAwIT09Yil7YT1bXTtmb3IodmFyIGw9MCxrPWIubGVuZ3RoO2w8aztsKyspe3ZhciBuPWJbbF07YS5wdXNoKFtuLGxdKX1hLnNvcnQoaCk7ODxhLmxlbmd0aCYmKGEubGVuZ3RoPVxuOCk7Zm9yKHZhciBtPWMubW9ycGhBdHRyaWJ1dGVzLGw9MCxrPWEubGVuZ3RoO2w8aztsKyspbj1hW2xdLEhbbF09blswXSwwIT09blswXT8oYj1uWzFdLCEwPT09ZC5tb3JwaFRhcmdldHMmJm0ucG9zaXRpb24mJmMuYWRkQXR0cmlidXRlKFwibW9ycGhUYXJnZXRcIitsLG0ucG9zaXRpb25bYl0pLCEwPT09ZC5tb3JwaE5vcm1hbHMmJm0ubm9ybWFsJiZjLmFkZEF0dHJpYnV0ZShcIm1vcnBoTm9ybWFsXCIrbCxtLm5vcm1hbFtiXSkpOighMD09PWQubW9ycGhUYXJnZXRzJiZjLnJlbW92ZUF0dHJpYnV0ZShcIm1vcnBoVGFyZ2V0XCIrbCksITA9PT1kLm1vcnBoTm9ybWFscyYmYy5yZW1vdmVBdHRyaWJ1dGUoXCJtb3JwaE5vcm1hbFwiK2wpKTtnLmdldFVuaWZvcm1zKCkuc2V0VmFsdWUoeCxcIm1vcnBoVGFyZ2V0SW5mbHVlbmNlc1wiLEgpO2s9ITB9Yj1jLmluZGV4O2w9Yy5hdHRyaWJ1dGVzLnBvc2l0aW9uOyEwPT09ZC53aXJlZnJhbWUmJihiPWhhLmdldFdpcmVmcmFtZUF0dHJpYnV0ZShjKSk7bnVsbCE9PVxuYj8oYT1CYSxhLnNldEluZGV4KGIpKTphPUFhO2lmKGspe2E6e3ZhciBrPXZvaWQgMCxwO2lmKGMgaW5zdGFuY2VvZiBUSFJFRS5JbnN0YW5jZWRCdWZmZXJHZW9tZXRyeSYmKHA9VS5nZXQoXCJBTkdMRV9pbnN0YW5jZWRfYXJyYXlzXCIpLG51bGw9PT1wKSl7Y29uc29sZS5lcnJvcihcIlRIUkVFLldlYkdMUmVuZGVyZXIuc2V0dXBWZXJ0ZXhBdHRyaWJ1dGVzOiB1c2luZyBUSFJFRS5JbnN0YW5jZWRCdWZmZXJHZW9tZXRyeSBidXQgaGFyZHdhcmUgZG9lcyBub3Qgc3VwcG9ydCBleHRlbnNpb24gQU5HTEVfaW5zdGFuY2VkX2FycmF5cy5cIik7YnJlYWsgYX12b2lkIDA9PT1rJiYoaz0wKTtSLmluaXRBdHRyaWJ1dGVzKCk7dmFyIG49Yy5hdHRyaWJ1dGVzLGc9Zy5nZXRBdHRyaWJ1dGVzKCksbT1kLmRlZmF1bHRBdHRyaWJ1dGVWYWx1ZXMscTtmb3IocSBpbiBnKXt2YXIgdT1nW3FdO2lmKDA8PXUpe3ZhciB3PW5bcV07aWYodm9pZCAwIT09dyl7dmFyIHQ9eC5GTE9BVCxEPXcuYXJyYXksdj1cbncubm9ybWFsaXplZDtEIGluc3RhbmNlb2YgRmxvYXQzMkFycmF5P3Q9eC5GTE9BVDpEIGluc3RhbmNlb2YgRmxvYXQ2NEFycmF5P2NvbnNvbGUud2FybihcIlVuc3VwcG9ydGVkIGRhdGEgYnVmZmVyIGZvcm1hdDogRmxvYXQ2NEFycmF5XCIpOkQgaW5zdGFuY2VvZiBVaW50MTZBcnJheT90PXguVU5TSUdORURfU0hPUlQ6RCBpbnN0YW5jZW9mIEludDE2QXJyYXk/dD14LlNIT1JUOkQgaW5zdGFuY2VvZiBVaW50MzJBcnJheT90PXguVU5TSUdORURfSU5UOkQgaW5zdGFuY2VvZiBJbnQzMkFycmF5P3Q9eC5JTlQ6RCBpbnN0YW5jZW9mIEludDhBcnJheT90PXguQllURTpEIGluc3RhbmNlb2YgVWludDhBcnJheSYmKHQ9eC5VTlNJR05FRF9CWVRFKTt2YXIgRD13Lml0ZW1TaXplLHk9aGEuZ2V0QXR0cmlidXRlQnVmZmVyKHcpO2lmKHcgaW5zdGFuY2VvZiBUSFJFRS5JbnRlcmxlYXZlZEJ1ZmZlckF0dHJpYnV0ZSl7dmFyIHo9dy5kYXRhLEE9ei5zdHJpZGUsdz13Lm9mZnNldDt6IGluc3RhbmNlb2ZcblRIUkVFLkluc3RhbmNlZEludGVybGVhdmVkQnVmZmVyPyhSLmVuYWJsZUF0dHJpYnV0ZUFuZERpdmlzb3IodSx6Lm1lc2hQZXJBdHRyaWJ1dGUscCksdm9pZCAwPT09Yy5tYXhJbnN0YW5jZWRDb3VudCYmKGMubWF4SW5zdGFuY2VkQ291bnQ9ei5tZXNoUGVyQXR0cmlidXRlKnouY291bnQpKTpSLmVuYWJsZUF0dHJpYnV0ZSh1KTt4LmJpbmRCdWZmZXIoeC5BUlJBWV9CVUZGRVIseSk7eC52ZXJ0ZXhBdHRyaWJQb2ludGVyKHUsRCx0LHYsQSp6LmFycmF5LkJZVEVTX1BFUl9FTEVNRU5ULChrKkErdykqei5hcnJheS5CWVRFU19QRVJfRUxFTUVOVCl9ZWxzZSB3IGluc3RhbmNlb2YgVEhSRUUuSW5zdGFuY2VkQnVmZmVyQXR0cmlidXRlPyhSLmVuYWJsZUF0dHJpYnV0ZUFuZERpdmlzb3IodSx3Lm1lc2hQZXJBdHRyaWJ1dGUscCksdm9pZCAwPT09Yy5tYXhJbnN0YW5jZWRDb3VudCYmKGMubWF4SW5zdGFuY2VkQ291bnQ9dy5tZXNoUGVyQXR0cmlidXRlKncuY291bnQpKTpSLmVuYWJsZUF0dHJpYnV0ZSh1KSxcbnguYmluZEJ1ZmZlcih4LkFSUkFZX0JVRkZFUix5KSx4LnZlcnRleEF0dHJpYlBvaW50ZXIodSxELHQsdiwwLGsqRCp3LmFycmF5LkJZVEVTX1BFUl9FTEVNRU5UKX1lbHNlIGlmKHZvaWQgMCE9PW0mJih0PW1bcV0sdm9pZCAwIT09dCkpc3dpdGNoKHQubGVuZ3RoKXtjYXNlIDI6eC52ZXJ0ZXhBdHRyaWIyZnYodSx0KTticmVhaztjYXNlIDM6eC52ZXJ0ZXhBdHRyaWIzZnYodSx0KTticmVhaztjYXNlIDQ6eC52ZXJ0ZXhBdHRyaWI0ZnYodSx0KTticmVhaztkZWZhdWx0OngudmVydGV4QXR0cmliMWZ2KHUsdCl9fX1SLmRpc2FibGVVbnVzZWRBdHRyaWJ1dGVzKCl9bnVsbCE9PWImJnguYmluZEJ1ZmZlcih4LkVMRU1FTlRfQVJSQVlfQlVGRkVSLGhhLmdldEF0dHJpYnV0ZUJ1ZmZlcihiKSl9cD1JbmZpbml0eTtudWxsIT09Yj9wPWIuY291bnQ6dm9pZCAwIT09bCYmKHA9bC5jb3VudCk7cT1jLmRyYXdSYW5nZS5zdGFydDtiPWMuZHJhd1JhbmdlLmNvdW50O2w9bnVsbCE9PWY/Zi5zdGFydDpcbjA7az1udWxsIT09Zj9mLmNvdW50OkluZmluaXR5O2Y9TWF0aC5tYXgoMCxxLGwpO3A9TWF0aC5taW4oMCtwLHErYixsK2spLTE7cD1NYXRoLm1heCgwLHAtZisxKTtpZihlIGluc3RhbmNlb2YgVEhSRUUuTWVzaClpZighMD09PWQud2lyZWZyYW1lKVIuc2V0TGluZVdpZHRoKGQud2lyZWZyYW1lTGluZXdpZHRoKihudWxsPT09Qz9aOjEpKSxhLnNldE1vZGUoeC5MSU5FUyk7ZWxzZSBzd2l0Y2goZS5kcmF3TW9kZSl7Y2FzZSBUSFJFRS5UcmlhbmdsZXNEcmF3TW9kZTphLnNldE1vZGUoeC5UUklBTkdMRVMpO2JyZWFrO2Nhc2UgVEhSRUUuVHJpYW5nbGVTdHJpcERyYXdNb2RlOmEuc2V0TW9kZSh4LlRSSUFOR0xFX1NUUklQKTticmVhaztjYXNlIFRIUkVFLlRyaWFuZ2xlRmFuRHJhd01vZGU6YS5zZXRNb2RlKHguVFJJQU5HTEVfRkFOKX1lbHNlIGUgaW5zdGFuY2VvZiBUSFJFRS5MaW5lPyhkPWQubGluZXdpZHRoLHZvaWQgMD09PWQmJihkPTEpLFIuc2V0TGluZVdpZHRoKGQqKG51bGw9PT1cbkM/WjoxKSksZSBpbnN0YW5jZW9mIFRIUkVFLkxpbmVTZWdtZW50cz9hLnNldE1vZGUoeC5MSU5FUyk6YS5zZXRNb2RlKHguTElORV9TVFJJUCkpOmUgaW5zdGFuY2VvZiBUSFJFRS5Qb2ludHMmJmEuc2V0TW9kZSh4LlBPSU5UUyk7YyBpbnN0YW5jZW9mIFRIUkVFLkluc3RhbmNlZEJ1ZmZlckdlb21ldHJ5PzA8Yy5tYXhJbnN0YW5jZWRDb3VudCYmYS5yZW5kZXJJbnN0YW5jZXMoYyxmLHApOmEucmVuZGVyKGYscCl9O3RoaXMucmVuZGVyPWZ1bmN0aW9uKGEsYyxkLGUpe2lmKCExPT09YyBpbnN0YW5jZW9mIFRIUkVFLkNhbWVyYSljb25zb2xlLmVycm9yKFwiVEhSRUUuV2ViR0xSZW5kZXJlci5yZW5kZXI6IGNhbWVyYSBpcyBub3QgYW4gaW5zdGFuY2Ugb2YgVEhSRUUuQ2FtZXJhLlwiKTtlbHNle3ZhciBmPWEuZm9nOyQ9XCJcIjtFPS0xO1Q9bnVsbDshMD09PWEuYXV0b1VwZGF0ZSYmYS51cGRhdGVNYXRyaXhXb3JsZCgpO251bGw9PT1jLnBhcmVudCYmYy51cGRhdGVNYXRyaXhXb3JsZCgpO1xuYy5tYXRyaXhXb3JsZEludmVyc2UuZ2V0SW52ZXJzZShjLm1hdHJpeFdvcmxkKTtxYS5tdWx0aXBseU1hdHJpY2VzKGMucHJvamVjdGlvbk1hdHJpeCxjLm1hdHJpeFdvcmxkSW52ZXJzZSk7d2Euc2V0RnJvbU1hdHJpeChxYSk7Qi5sZW5ndGg9MDtLPUo9LTE7TS5sZW5ndGg9MDtPLmxlbmd0aD0wO3ZhPXRoaXMubG9jYWxDbGlwcGluZ0VuYWJsZWQ7cmE9ZGEuaW5pdCh0aGlzLmNsaXBwaW5nUGxhbmVzLHZhLGMpO24oYSxjKTtGLmxlbmd0aD1KKzE7UC5sZW5ndGg9SysxOyEwPT09Ti5zb3J0T2JqZWN0cyYmKEYuc29ydChrKSxQLnNvcnQobCkpO3JhJiZkYS5iZWdpblNoYWRvd3MoKTtmb3IodmFyIGc9QixoPTAscD0wLG09Zy5sZW5ndGg7cDxtO3ArKyl7dmFyIHU9Z1twXTt1LmNhc3RTaGFkb3cmJihTLnNoYWRvd3NbaCsrXT11KX1TLnNoYWRvd3MubGVuZ3RoPWg7eWEucmVuZGVyKGEsYyk7Zm9yKHZhciBnPUIscj11PTAscz0wLHcsdCxELEgsdj1jLm1hdHJpeFdvcmxkSW52ZXJzZSxcbnk9MCx6PTAsQT0wLEw9MCxoPTAscD1nLmxlbmd0aDtoPHA7aCsrKWlmKG09Z1toXSx3PW0uY29sb3IsdD1tLmludGVuc2l0eSxEPW0uZGlzdGFuY2UsSD1tLnNoYWRvdyYmbS5zaGFkb3cubWFwP20uc2hhZG93Lm1hcC50ZXh0dXJlOm51bGwsbSBpbnN0YW5jZW9mIFRIUkVFLkFtYmllbnRMaWdodCl1Kz13LnIqdCxyKz13LmcqdCxzKz13LmIqdDtlbHNlIGlmKG0gaW5zdGFuY2VvZiBUSFJFRS5EaXJlY3Rpb25hbExpZ2h0KXt2YXIgQz10YS5nZXQobSk7Qy5jb2xvci5jb3B5KG0uY29sb3IpLm11bHRpcGx5U2NhbGFyKG0uaW50ZW5zaXR5KTtDLmRpcmVjdGlvbi5zZXRGcm9tTWF0cml4UG9zaXRpb24obS5tYXRyaXhXb3JsZCk7Vy5zZXRGcm9tTWF0cml4UG9zaXRpb24obS50YXJnZXQubWF0cml4V29ybGQpO0MuZGlyZWN0aW9uLnN1YihXKTtDLmRpcmVjdGlvbi50cmFuc2Zvcm1EaXJlY3Rpb24odik7aWYoQy5zaGFkb3c9bS5jYXN0U2hhZG93KUMuc2hhZG93Qmlhcz1tLnNoYWRvdy5iaWFzLFxuQy5zaGFkb3dSYWRpdXM9bS5zaGFkb3cucmFkaXVzLEMuc2hhZG93TWFwU2l6ZT1tLnNoYWRvdy5tYXBTaXplO1MuZGlyZWN0aW9uYWxTaGFkb3dNYXBbeV09SDtTLmRpcmVjdGlvbmFsU2hhZG93TWF0cml4W3ldPW0uc2hhZG93Lm1hdHJpeDtTLmRpcmVjdGlvbmFsW3krK109Q31lbHNlIGlmKG0gaW5zdGFuY2VvZiBUSFJFRS5TcG90TGlnaHQpe0M9dGEuZ2V0KG0pO0MucG9zaXRpb24uc2V0RnJvbU1hdHJpeFBvc2l0aW9uKG0ubWF0cml4V29ybGQpO0MucG9zaXRpb24uYXBwbHlNYXRyaXg0KHYpO0MuY29sb3IuY29weSh3KS5tdWx0aXBseVNjYWxhcih0KTtDLmRpc3RhbmNlPUQ7Qy5kaXJlY3Rpb24uc2V0RnJvbU1hdHJpeFBvc2l0aW9uKG0ubWF0cml4V29ybGQpO1cuc2V0RnJvbU1hdHJpeFBvc2l0aW9uKG0udGFyZ2V0Lm1hdHJpeFdvcmxkKTtDLmRpcmVjdGlvbi5zdWIoVyk7Qy5kaXJlY3Rpb24udHJhbnNmb3JtRGlyZWN0aW9uKHYpO0MuY29uZUNvcz1NYXRoLmNvcyhtLmFuZ2xlKTtcbkMucGVudW1icmFDb3M9TWF0aC5jb3MobS5hbmdsZSooMS1tLnBlbnVtYnJhKSk7Qy5kZWNheT0wPT09bS5kaXN0YW5jZT8wOm0uZGVjYXk7aWYoQy5zaGFkb3c9bS5jYXN0U2hhZG93KUMuc2hhZG93Qmlhcz1tLnNoYWRvdy5iaWFzLEMuc2hhZG93UmFkaXVzPW0uc2hhZG93LnJhZGl1cyxDLnNoYWRvd01hcFNpemU9bS5zaGFkb3cubWFwU2l6ZTtTLnNwb3RTaGFkb3dNYXBbQV09SDtTLnNwb3RTaGFkb3dNYXRyaXhbQV09bS5zaGFkb3cubWF0cml4O1Muc3BvdFtBKytdPUN9ZWxzZSBpZihtIGluc3RhbmNlb2YgVEhSRUUuUG9pbnRMaWdodCl7Qz10YS5nZXQobSk7Qy5wb3NpdGlvbi5zZXRGcm9tTWF0cml4UG9zaXRpb24obS5tYXRyaXhXb3JsZCk7Qy5wb3NpdGlvbi5hcHBseU1hdHJpeDQodik7Qy5jb2xvci5jb3B5KG0uY29sb3IpLm11bHRpcGx5U2NhbGFyKG0uaW50ZW5zaXR5KTtDLmRpc3RhbmNlPW0uZGlzdGFuY2U7Qy5kZWNheT0wPT09bS5kaXN0YW5jZT8wOm0uZGVjYXk7aWYoQy5zaGFkb3c9XG5tLmNhc3RTaGFkb3cpQy5zaGFkb3dCaWFzPW0uc2hhZG93LmJpYXMsQy5zaGFkb3dSYWRpdXM9bS5zaGFkb3cucmFkaXVzLEMuc2hhZG93TWFwU2l6ZT1tLnNoYWRvdy5tYXBTaXplO1MucG9pbnRTaGFkb3dNYXBbel09SDt2b2lkIDA9PT1TLnBvaW50U2hhZG93TWF0cml4W3pdJiYoUy5wb2ludFNoYWRvd01hdHJpeFt6XT1uZXcgVEhSRUUuTWF0cml4NCk7Vy5zZXRGcm9tTWF0cml4UG9zaXRpb24obS5tYXRyaXhXb3JsZCkubmVnYXRlKCk7Uy5wb2ludFNoYWRvd01hdHJpeFt6XS5pZGVudGl0eSgpLnNldFBvc2l0aW9uKFcpO1MucG9pbnRbeisrXT1DfWVsc2UgbSBpbnN0YW5jZW9mIFRIUkVFLkhlbWlzcGhlcmVMaWdodCYmKEM9dGEuZ2V0KG0pLEMuZGlyZWN0aW9uLnNldEZyb21NYXRyaXhQb3NpdGlvbihtLm1hdHJpeFdvcmxkKSxDLmRpcmVjdGlvbi50cmFuc2Zvcm1EaXJlY3Rpb24odiksQy5kaXJlY3Rpb24ubm9ybWFsaXplKCksQy5za3lDb2xvci5jb3B5KG0uY29sb3IpLm11bHRpcGx5U2NhbGFyKHQpLFxuQy5ncm91bmRDb2xvci5jb3B5KG0uZ3JvdW5kQ29sb3IpLm11bHRpcGx5U2NhbGFyKHQpLFMuaGVtaVtMKytdPUMpO1MuYW1iaWVudFswXT11O1MuYW1iaWVudFsxXT1yO1MuYW1iaWVudFsyXT1zO1MuZGlyZWN0aW9uYWwubGVuZ3RoPXk7Uy5zcG90Lmxlbmd0aD1BO1MucG9pbnQubGVuZ3RoPXo7Uy5oZW1pLmxlbmd0aD1MO1MuaGFzaD15K1wiLFwiK3orXCIsXCIrQStcIixcIitMK1wiLFwiK1Muc2hhZG93cy5sZW5ndGg7cmEmJmRhLmVuZFNoYWRvd3MoKTtpYS5jYWxscz0wO2lhLnZlcnRpY2VzPTA7aWEuZmFjZXM9MDtpYS5wb2ludHM9MDt2b2lkIDA9PT1kJiYoZD1udWxsKTt0aGlzLnNldFJlbmRlclRhcmdldChkKTtnPWEuYmFja2dyb3VuZDtudWxsPT09Zz9iKFYucixWLmcsVi5iLGJhKTpnIGluc3RhbmNlb2YgVEhSRUUuQ29sb3ImJmIoZy5yLGcuZyxnLmIsMSk7KHRoaXMuYXV0b0NsZWFyfHxlKSYmdGhpcy5jbGVhcih0aGlzLmF1dG9DbGVhckNvbG9yLHRoaXMuYXV0b0NsZWFyRGVwdGgsXG50aGlzLmF1dG9DbGVhclN0ZW5jaWwpO2cgaW5zdGFuY2VvZiBUSFJFRS5DdWJlVGV4dHVyZT8obWEucHJvamVjdGlvbk1hdHJpeC5jb3B5KGMucHJvamVjdGlvbk1hdHJpeCksbWEubWF0cml4V29ybGQuZXh0cmFjdFJvdGF0aW9uKGMubWF0cml4V29ybGQpLG1hLm1hdHJpeFdvcmxkSW52ZXJzZS5nZXRJbnZlcnNlKG1hLm1hdHJpeFdvcmxkKSxqYS5tYXRlcmlhbC51bmlmb3Jtcy50Q3ViZS52YWx1ZT1nLGphLm1vZGVsVmlld01hdHJpeC5tdWx0aXBseU1hdHJpY2VzKG1hLm1hdHJpeFdvcmxkSW52ZXJzZSxqYS5tYXRyaXhXb3JsZCksaGEudXBkYXRlKGphKSxOLnJlbmRlckJ1ZmZlckRpcmVjdChtYSxudWxsLGphLmdlb21ldHJ5LGphLm1hdGVyaWFsLGphLG51bGwpKTpnIGluc3RhbmNlb2YgVEhSRUUuVGV4dHVyZSYmKHBhLm1hdGVyaWFsLm1hcD1nLGhhLnVwZGF0ZShwYSksTi5yZW5kZXJCdWZmZXJEaXJlY3QoQ2EsbnVsbCxwYS5nZW9tZXRyeSxwYS5tYXRlcmlhbCxwYSxudWxsKSk7XG5hLm92ZXJyaWRlTWF0ZXJpYWw/KGU9YS5vdmVycmlkZU1hdGVyaWFsLHEoRixjLGYsZSkscShQLGMsZixlKSk6KFIuc2V0QmxlbmRpbmcoVEhSRUUuTm9CbGVuZGluZykscShGLGMsZikscShQLGMsZikpO0RhLnJlbmRlcihhLGMpO0VhLnJlbmRlcihhLGMsZmEpO2QmJmxhLnVwZGF0ZVJlbmRlclRhcmdldE1pcG1hcChkKTtSLnNldERlcHRoVGVzdCghMCk7Ui5zZXREZXB0aFdyaXRlKCEwKTtSLnNldENvbG9yV3JpdGUoITApfX07dGhpcy5zZXRGYWNlQ3VsbGluZz1mdW5jdGlvbihhLGIpe1Iuc2V0Q3VsbEZhY2UoYSk7Ui5zZXRGbGlwU2lkZWQoYj09PVRIUkVFLkZyb250RmFjZURpcmVjdGlvbkNXKX07dGhpcy5hbGxvY1RleHR1cmVVbml0PWZ1bmN0aW9uKCl7dmFyIGE9Z2E7YT49Y2EubWF4VGV4dHVyZXMmJmNvbnNvbGUud2FybihcIldlYkdMUmVuZGVyZXI6IHRyeWluZyB0byB1c2UgXCIrYStcIiB0ZXh0dXJlIHVuaXRzIHdoaWxlIHRoaXMgR1BVIHN1cHBvcnRzIG9ubHkgXCIrY2EubWF4VGV4dHVyZXMpO1xuZ2ErPTE7cmV0dXJuIGF9O3RoaXMuc2V0VGV4dHVyZTJEPWZ1bmN0aW9uKCl7dmFyIGE9ITE7cmV0dXJuIGZ1bmN0aW9uKGIsYyl7YiBpbnN0YW5jZW9mIFRIUkVFLldlYkdMUmVuZGVyVGFyZ2V0JiYoYXx8KGNvbnNvbGUud2FybihcIlRIUkVFLldlYkdMUmVuZGVyZXIuc2V0VGV4dHVyZTJEOiBkb24ndCB1c2UgcmVuZGVyIHRhcmdldHMgYXMgdGV4dHVyZXMuIFVzZSB0aGVpciAudGV4dHVyZSBwcm9wZXJ0eSBpbnN0ZWFkLlwiKSxhPSEwKSxiPWIudGV4dHVyZSk7bGEuc2V0VGV4dHVyZTJEKGIsYyl9fSgpO3RoaXMuc2V0VGV4dHVyZT1mdW5jdGlvbigpe3ZhciBhPSExO3JldHVybiBmdW5jdGlvbihiLGMpe2F8fChjb25zb2xlLndhcm4oXCJUSFJFRS5XZWJHTFJlbmRlcmVyOiAuc2V0VGV4dHVyZSBpcyBkZXByZWNhdGVkLCB1c2Ugc2V0VGV4dHVyZTJEIGluc3RlYWQuXCIpLGE9ITApO2xhLnNldFRleHR1cmUyRChiLGMpfX0oKTt0aGlzLnNldFRleHR1cmVDdWJlPWZ1bmN0aW9uKCl7dmFyIGE9XG4hMTtyZXR1cm4gZnVuY3Rpb24oYixjKXtiIGluc3RhbmNlb2YgVEhSRUUuV2ViR0xSZW5kZXJUYXJnZXRDdWJlJiYoYXx8KGNvbnNvbGUud2FybihcIlRIUkVFLldlYkdMUmVuZGVyZXIuc2V0VGV4dHVyZUN1YmU6IGRvbid0IHVzZSBjdWJlIHJlbmRlciB0YXJnZXRzIGFzIHRleHR1cmVzLiBVc2UgdGhlaXIgLnRleHR1cmUgcHJvcGVydHkgaW5zdGVhZC5cIiksYT0hMCksYj1iLnRleHR1cmUpO2IgaW5zdGFuY2VvZiBUSFJFRS5DdWJlVGV4dHVyZXx8QXJyYXkuaXNBcnJheShiLmltYWdlKSYmNj09PWIuaW1hZ2UubGVuZ3RoP2xhLnNldFRleHR1cmVDdWJlKGIsYyk6bGEuc2V0VGV4dHVyZUN1YmVEeW5hbWljKGIsYyl9fSgpO3RoaXMuZ2V0Q3VycmVudFJlbmRlclRhcmdldD1mdW5jdGlvbigpe3JldHVybiBDfTt0aGlzLnNldFJlbmRlclRhcmdldD1mdW5jdGlvbihhKXsoQz1hKSYmdm9pZCAwPT09WS5nZXQoYSkuX193ZWJnbEZyYW1lYnVmZmVyJiZsYS5zZXR1cFJlbmRlclRhcmdldChhKTtcbnZhciBiPWEgaW5zdGFuY2VvZiBUSFJFRS5XZWJHTFJlbmRlclRhcmdldEN1YmUsYzthPyhjPVkuZ2V0KGEpLGM9Yj9jLl9fd2ViZ2xGcmFtZWJ1ZmZlclthLmFjdGl2ZUN1YmVGYWNlXTpjLl9fd2ViZ2xGcmFtZWJ1ZmZlcixYLmNvcHkoYS5zY2lzc29yKSxlYT1hLnNjaXNzb3JUZXN0LGZhLmNvcHkoYS52aWV3cG9ydCkpOihjPW51bGwsWC5jb3B5KHVhKS5tdWx0aXBseVNjYWxhcihaKSxlYT14YSxmYS5jb3B5KG5hKS5tdWx0aXBseVNjYWxhcihaKSk7TCE9PWMmJih4LmJpbmRGcmFtZWJ1ZmZlcih4LkZSQU1FQlVGRkVSLGMpLEw9Yyk7Ui5zY2lzc29yKFgpO1Iuc2V0U2Npc3NvclRlc3QoZWEpO1Iudmlld3BvcnQoZmEpO2ImJihiPVkuZ2V0KGEudGV4dHVyZSkseC5mcmFtZWJ1ZmZlclRleHR1cmUyRCh4LkZSQU1FQlVGRkVSLHguQ09MT1JfQVRUQUNITUVOVDAseC5URVhUVVJFX0NVQkVfTUFQX1BPU0lUSVZFX1grYS5hY3RpdmVDdWJlRmFjZSxiLl9fd2ViZ2xUZXh0dXJlLGEuYWN0aXZlTWlwTWFwTGV2ZWwpKX07XG50aGlzLnJlYWRSZW5kZXJUYXJnZXRQaXhlbHM9ZnVuY3Rpb24oYSxiLGMsZCxlLGcpe2lmKCExPT09YSBpbnN0YW5jZW9mIFRIUkVFLldlYkdMUmVuZGVyVGFyZ2V0KWNvbnNvbGUuZXJyb3IoXCJUSFJFRS5XZWJHTFJlbmRlcmVyLnJlYWRSZW5kZXJUYXJnZXRQaXhlbHM6IHJlbmRlclRhcmdldCBpcyBub3QgVEhSRUUuV2ViR0xSZW5kZXJUYXJnZXQuXCIpO2Vsc2V7dmFyIGY9WS5nZXQoYSkuX193ZWJnbEZyYW1lYnVmZmVyO2lmKGYpe3ZhciBoPSExO2YhPT1MJiYoeC5iaW5kRnJhbWVidWZmZXIoeC5GUkFNRUJVRkZFUixmKSxoPSEwKTt0cnl7dmFyIGs9YS50ZXh0dXJlO2suZm9ybWF0IT09VEhSRUUuUkdCQUZvcm1hdCYmdChrLmZvcm1hdCkhPT14LmdldFBhcmFtZXRlcih4LklNUExFTUVOVEFUSU9OX0NPTE9SX1JFQURfRk9STUFUKT9jb25zb2xlLmVycm9yKFwiVEhSRUUuV2ViR0xSZW5kZXJlci5yZWFkUmVuZGVyVGFyZ2V0UGl4ZWxzOiByZW5kZXJUYXJnZXQgaXMgbm90IGluIFJHQkEgb3IgaW1wbGVtZW50YXRpb24gZGVmaW5lZCBmb3JtYXQuXCIpOlxuay50eXBlPT09VEhSRUUuVW5zaWduZWRCeXRlVHlwZXx8dChrLnR5cGUpPT09eC5nZXRQYXJhbWV0ZXIoeC5JTVBMRU1FTlRBVElPTl9DT0xPUl9SRUFEX1RZUEUpfHxrLnR5cGU9PT1USFJFRS5GbG9hdFR5cGUmJlUuZ2V0KFwiV0VCR0xfY29sb3JfYnVmZmVyX2Zsb2F0XCIpfHxrLnR5cGU9PT1USFJFRS5IYWxmRmxvYXRUeXBlJiZVLmdldChcIkVYVF9jb2xvcl9idWZmZXJfaGFsZl9mbG9hdFwiKT94LmNoZWNrRnJhbWVidWZmZXJTdGF0dXMoeC5GUkFNRUJVRkZFUik9PT14LkZSQU1FQlVGRkVSX0NPTVBMRVRFPzA8PWImJmI8PWEud2lkdGgtZCYmMDw9YyYmYzw9YS5oZWlnaHQtZSYmeC5yZWFkUGl4ZWxzKGIsYyxkLGUsdChrLmZvcm1hdCksdChrLnR5cGUpLGcpOmNvbnNvbGUuZXJyb3IoXCJUSFJFRS5XZWJHTFJlbmRlcmVyLnJlYWRSZW5kZXJUYXJnZXRQaXhlbHM6IHJlYWRQaXhlbHMgZnJvbSByZW5kZXJUYXJnZXQgZmFpbGVkLiBGcmFtZWJ1ZmZlciBub3QgY29tcGxldGUuXCIpOmNvbnNvbGUuZXJyb3IoXCJUSFJFRS5XZWJHTFJlbmRlcmVyLnJlYWRSZW5kZXJUYXJnZXRQaXhlbHM6IHJlbmRlclRhcmdldCBpcyBub3QgaW4gVW5zaWduZWRCeXRlVHlwZSBvciBpbXBsZW1lbnRhdGlvbiBkZWZpbmVkIHR5cGUuXCIpfWZpbmFsbHl7aCYmXG54LmJpbmRGcmFtZWJ1ZmZlcih4LkZSQU1FQlVGRkVSLEwpfX19fX07XG5USFJFRS5XZWJHTFJlbmRlclRhcmdldD1mdW5jdGlvbihhLGIsYyl7dGhpcy51dWlkPVRIUkVFLk1hdGguZ2VuZXJhdGVVVUlEKCk7dGhpcy53aWR0aD1hO3RoaXMuaGVpZ2h0PWI7dGhpcy5zY2lzc29yPW5ldyBUSFJFRS5WZWN0b3I0KDAsMCxhLGIpO3RoaXMuc2Npc3NvclRlc3Q9ITE7dGhpcy52aWV3cG9ydD1uZXcgVEhSRUUuVmVjdG9yNCgwLDAsYSxiKTtjPWN8fHt9O3ZvaWQgMD09PWMubWluRmlsdGVyJiYoYy5taW5GaWx0ZXI9VEhSRUUuTGluZWFyRmlsdGVyKTt0aGlzLnRleHR1cmU9bmV3IFRIUkVFLlRleHR1cmUodm9pZCAwLHZvaWQgMCxjLndyYXBTLGMud3JhcFQsYy5tYWdGaWx0ZXIsYy5taW5GaWx0ZXIsYy5mb3JtYXQsYy50eXBlLGMuYW5pc290cm9weSxjLmVuY29kaW5nKTt0aGlzLmRlcHRoQnVmZmVyPXZvaWQgMCE9PWMuZGVwdGhCdWZmZXI/Yy5kZXB0aEJ1ZmZlcjohMDt0aGlzLnN0ZW5jaWxCdWZmZXI9dm9pZCAwIT09Yy5zdGVuY2lsQnVmZmVyP2Muc3RlbmNpbEJ1ZmZlcjpcbiEwO3RoaXMuZGVwdGhUZXh0dXJlPW51bGx9O1xuT2JqZWN0LmFzc2lnbihUSFJFRS5XZWJHTFJlbmRlclRhcmdldC5wcm90b3R5cGUsVEhSRUUuRXZlbnREaXNwYXRjaGVyLnByb3RvdHlwZSx7c2V0U2l6ZTpmdW5jdGlvbihhLGIpe2lmKHRoaXMud2lkdGghPT1hfHx0aGlzLmhlaWdodCE9PWIpdGhpcy53aWR0aD1hLHRoaXMuaGVpZ2h0PWIsdGhpcy5kaXNwb3NlKCk7dGhpcy52aWV3cG9ydC5zZXQoMCwwLGEsYik7dGhpcy5zY2lzc29yLnNldCgwLDAsYSxiKX0sY2xvbmU6ZnVuY3Rpb24oKXtyZXR1cm4obmV3IHRoaXMuY29uc3RydWN0b3IpLmNvcHkodGhpcyl9LGNvcHk6ZnVuY3Rpb24oYSl7dGhpcy53aWR0aD1hLndpZHRoO3RoaXMuaGVpZ2h0PWEuaGVpZ2h0O3RoaXMudmlld3BvcnQuY29weShhLnZpZXdwb3J0KTt0aGlzLnRleHR1cmU9YS50ZXh0dXJlLmNsb25lKCk7dGhpcy5kZXB0aEJ1ZmZlcj1hLmRlcHRoQnVmZmVyO3RoaXMuc3RlbmNpbEJ1ZmZlcj1hLnN0ZW5jaWxCdWZmZXI7dGhpcy5kZXB0aFRleHR1cmU9YS5kZXB0aFRleHR1cmU7XG5yZXR1cm4gdGhpc30sZGlzcG9zZTpmdW5jdGlvbigpe3RoaXMuZGlzcGF0Y2hFdmVudCh7dHlwZTpcImRpc3Bvc2VcIn0pfX0pO1RIUkVFLldlYkdMUmVuZGVyVGFyZ2V0Q3ViZT1mdW5jdGlvbihhLGIsYyl7VEhSRUUuV2ViR0xSZW5kZXJUYXJnZXQuY2FsbCh0aGlzLGEsYixjKTt0aGlzLmFjdGl2ZU1pcE1hcExldmVsPXRoaXMuYWN0aXZlQ3ViZUZhY2U9MH07VEhSRUUuV2ViR0xSZW5kZXJUYXJnZXRDdWJlLnByb3RvdHlwZT1PYmplY3QuY3JlYXRlKFRIUkVFLldlYkdMUmVuZGVyVGFyZ2V0LnByb3RvdHlwZSk7VEhSRUUuV2ViR0xSZW5kZXJUYXJnZXRDdWJlLnByb3RvdHlwZS5jb25zdHJ1Y3Rvcj1USFJFRS5XZWJHTFJlbmRlclRhcmdldEN1YmU7XG5USFJFRS5XZWJHTEJ1ZmZlclJlbmRlcmVyPWZ1bmN0aW9uKGEsYixjKXt2YXIgZDt0aGlzLnNldE1vZGU9ZnVuY3Rpb24oYSl7ZD1hfTt0aGlzLnJlbmRlcj1mdW5jdGlvbihiLGYpe2EuZHJhd0FycmF5cyhkLGIsZik7Yy5jYWxscysrO2MudmVydGljZXMrPWY7ZD09PWEuVFJJQU5HTEVTJiYoYy5mYWNlcys9Zi8zKX07dGhpcy5yZW5kZXJJbnN0YW5jZXM9ZnVuY3Rpb24oZSl7dmFyIGY9Yi5nZXQoXCJBTkdMRV9pbnN0YW5jZWRfYXJyYXlzXCIpO2lmKG51bGw9PT1mKWNvbnNvbGUuZXJyb3IoXCJUSFJFRS5XZWJHTEJ1ZmZlclJlbmRlcmVyOiB1c2luZyBUSFJFRS5JbnN0YW5jZWRCdWZmZXJHZW9tZXRyeSBidXQgaGFyZHdhcmUgZG9lcyBub3Qgc3VwcG9ydCBleHRlbnNpb24gQU5HTEVfaW5zdGFuY2VkX2FycmF5cy5cIik7ZWxzZXt2YXIgZz1lLmF0dHJpYnV0ZXMucG9zaXRpb24saD0wLGg9ZyBpbnN0YW5jZW9mIFRIUkVFLkludGVybGVhdmVkQnVmZmVyQXR0cmlidXRlP2cuZGF0YS5jb3VudDpcbmcuY291bnQ7Zi5kcmF3QXJyYXlzSW5zdGFuY2VkQU5HTEUoZCwwLGgsZS5tYXhJbnN0YW5jZWRDb3VudCk7Yy5jYWxscysrO2MudmVydGljZXMrPWgqZS5tYXhJbnN0YW5jZWRDb3VudDtkPT09YS5UUklBTkdMRVMmJihjLmZhY2VzKz1lLm1heEluc3RhbmNlZENvdW50KmgvMyl9fX07XG5USFJFRS5XZWJHTENsaXBwaW5nPWZ1bmN0aW9uKCl7ZnVuY3Rpb24gYSgpe2wudmFsdWUhPT1kJiYobC52YWx1ZT1kLGwubmVlZHNVcGRhdGU9MDxlKTtjLm51bVBsYW5lcz1lfWZ1bmN0aW9uIGIoYSxiLGQsZSl7dmFyIGc9bnVsbCE9PWE/YS5sZW5ndGg6MCxmPW51bGw7aWYoMCE9PWcpe2Y9bC52YWx1ZTtpZighMCE9PWV8fG51bGw9PT1mKXtlPWQrNCpnO2I9Yi5tYXRyaXhXb3JsZEludmVyc2U7ay5nZXROb3JtYWxNYXRyaXgoYik7aWYobnVsbD09PWZ8fGYubGVuZ3RoPGUpZj1uZXcgRmxvYXQzMkFycmF5KGUpO2ZvcihlPTA7ZSE9PWc7KytlLGQrPTQpaC5jb3B5KGFbZV0pLmFwcGx5TWF0cml4NChiLGspLGgubm9ybWFsLnRvQXJyYXkoZixkKSxmW2QrM109aC5jb25zdGFudH1sLnZhbHVlPWY7bC5uZWVkc1VwZGF0ZT0hMH1jLm51bVBsYW5lcz1nO3JldHVybiBmfXZhciBjPXRoaXMsZD1udWxsLGU9MCxmPSExLGc9ITEsaD1uZXcgVEhSRUUuUGxhbmUsaz1uZXcgVEhSRUUuTWF0cml4Myxcbmw9e3ZhbHVlOm51bGwsbmVlZHNVcGRhdGU6ITF9O3RoaXMudW5pZm9ybT1sO3RoaXMubnVtUGxhbmVzPTA7dGhpcy5pbml0PWZ1bmN0aW9uKGEsYyxnKXt2YXIgaD0wIT09YS5sZW5ndGh8fGN8fDAhPT1lfHxmO2Y9YztkPWIoYSxnLDApO2U9YS5sZW5ndGg7cmV0dXJuIGh9O3RoaXMuYmVnaW5TaGFkb3dzPWZ1bmN0aW9uKCl7Zz0hMDtiKG51bGwpfTt0aGlzLmVuZFNoYWRvd3M9ZnVuY3Rpb24oKXtnPSExO2EoKX07dGhpcy5zZXRTdGF0ZT1mdW5jdGlvbihjLGgsayxxLHIpe2lmKCFmfHxudWxsPT09Y3x8MD09PWMubGVuZ3RofHxnJiYhaClnP2IobnVsbCk6YSgpO2Vsc2V7aD1nPzA6ZTt2YXIgcz00Kmgsdj1xLmNsaXBwaW5nU3RhdGV8fG51bGw7bC52YWx1ZT12O3Y9YihjLGsscyxyKTtmb3IoYz0wO2MhPT1zOysrYyl2W2NdPWRbY107cS5jbGlwcGluZ1N0YXRlPXY7dGhpcy5udW1QbGFuZXMrPWh9fX07XG5USFJFRS5XZWJHTEluZGV4ZWRCdWZmZXJSZW5kZXJlcj1mdW5jdGlvbihhLGIsYyl7dmFyIGQsZSxmO3RoaXMuc2V0TW9kZT1mdW5jdGlvbihhKXtkPWF9O3RoaXMuc2V0SW5kZXg9ZnVuY3Rpb24oYyl7Yy5hcnJheSBpbnN0YW5jZW9mIFVpbnQzMkFycmF5JiZiLmdldChcIk9FU19lbGVtZW50X2luZGV4X3VpbnRcIik/KGU9YS5VTlNJR05FRF9JTlQsZj00KTooZT1hLlVOU0lHTkVEX1NIT1JULGY9Mil9O3RoaXMucmVuZGVyPWZ1bmN0aW9uKGIsaCl7YS5kcmF3RWxlbWVudHMoZCxoLGUsYipmKTtjLmNhbGxzKys7Yy52ZXJ0aWNlcys9aDtkPT09YS5UUklBTkdMRVMmJihjLmZhY2VzKz1oLzMpfTt0aGlzLnJlbmRlckluc3RhbmNlcz1mdW5jdGlvbihnLGgsayl7dmFyIGw9Yi5nZXQoXCJBTkdMRV9pbnN0YW5jZWRfYXJyYXlzXCIpO251bGw9PT1sP2NvbnNvbGUuZXJyb3IoXCJUSFJFRS5XZWJHTEJ1ZmZlclJlbmRlcmVyOiB1c2luZyBUSFJFRS5JbnN0YW5jZWRCdWZmZXJHZW9tZXRyeSBidXQgaGFyZHdhcmUgZG9lcyBub3Qgc3VwcG9ydCBleHRlbnNpb24gQU5HTEVfaW5zdGFuY2VkX2FycmF5cy5cIik6XG4obC5kcmF3RWxlbWVudHNJbnN0YW5jZWRBTkdMRShkLGssZSxoKmYsZy5tYXhJbnN0YW5jZWRDb3VudCksYy5jYWxscysrLGMudmVydGljZXMrPWsqZy5tYXhJbnN0YW5jZWRDb3VudCxkPT09YS5UUklBTkdMRVMmJihjLmZhY2VzKz1nLm1heEluc3RhbmNlZENvdW50KmsvMykpfX07XG5USFJFRS5XZWJHTEV4dGVuc2lvbnM9ZnVuY3Rpb24oYSl7dmFyIGI9e307dGhpcy5nZXQ9ZnVuY3Rpb24oYyl7aWYodm9pZCAwIT09YltjXSlyZXR1cm4gYltjXTt2YXIgZDtzd2l0Y2goYyl7Y2FzZSBcIldFQkdMX2RlcHRoX3RleHR1cmVcIjpkPWEuZ2V0RXh0ZW5zaW9uKFwiV0VCR0xfZGVwdGhfdGV4dHVyZVwiKXx8YS5nZXRFeHRlbnNpb24oXCJNT1pfV0VCR0xfZGVwdGhfdGV4dHVyZVwiKXx8YS5nZXRFeHRlbnNpb24oXCJXRUJLSVRfV0VCR0xfZGVwdGhfdGV4dHVyZVwiKTticmVhaztjYXNlIFwiRVhUX3RleHR1cmVfZmlsdGVyX2FuaXNvdHJvcGljXCI6ZD1hLmdldEV4dGVuc2lvbihcIkVYVF90ZXh0dXJlX2ZpbHRlcl9hbmlzb3Ryb3BpY1wiKXx8YS5nZXRFeHRlbnNpb24oXCJNT1pfRVhUX3RleHR1cmVfZmlsdGVyX2FuaXNvdHJvcGljXCIpfHxhLmdldEV4dGVuc2lvbihcIldFQktJVF9FWFRfdGV4dHVyZV9maWx0ZXJfYW5pc290cm9waWNcIik7YnJlYWs7Y2FzZSBcIldFQkdMX2NvbXByZXNzZWRfdGV4dHVyZV9zM3RjXCI6ZD1cbmEuZ2V0RXh0ZW5zaW9uKFwiV0VCR0xfY29tcHJlc3NlZF90ZXh0dXJlX3MzdGNcIil8fGEuZ2V0RXh0ZW5zaW9uKFwiTU9aX1dFQkdMX2NvbXByZXNzZWRfdGV4dHVyZV9zM3RjXCIpfHxhLmdldEV4dGVuc2lvbihcIldFQktJVF9XRUJHTF9jb21wcmVzc2VkX3RleHR1cmVfczN0Y1wiKTticmVhaztjYXNlIFwiV0VCR0xfY29tcHJlc3NlZF90ZXh0dXJlX3B2cnRjXCI6ZD1hLmdldEV4dGVuc2lvbihcIldFQkdMX2NvbXByZXNzZWRfdGV4dHVyZV9wdnJ0Y1wiKXx8YS5nZXRFeHRlbnNpb24oXCJXRUJLSVRfV0VCR0xfY29tcHJlc3NlZF90ZXh0dXJlX3B2cnRjXCIpO2JyZWFrO2Nhc2UgXCJXRUJHTF9jb21wcmVzc2VkX3RleHR1cmVfZXRjMVwiOmQ9YS5nZXRFeHRlbnNpb24oXCJXRUJHTF9jb21wcmVzc2VkX3RleHR1cmVfZXRjMVwiKTticmVhaztkZWZhdWx0OmQ9YS5nZXRFeHRlbnNpb24oYyl9bnVsbD09PWQmJmNvbnNvbGUud2FybihcIlRIUkVFLldlYkdMUmVuZGVyZXI6IFwiK2MrXCIgZXh0ZW5zaW9uIG5vdCBzdXBwb3J0ZWQuXCIpO1xucmV0dXJuIGJbY109ZH19O1xuVEhSRUUuV2ViR0xDYXBhYmlsaXRpZXM9ZnVuY3Rpb24oYSxiLGMpe2Z1bmN0aW9uIGQoYil7aWYoXCJoaWdocFwiPT09Yil7aWYoMDxhLmdldFNoYWRlclByZWNpc2lvbkZvcm1hdChhLlZFUlRFWF9TSEFERVIsYS5ISUdIX0ZMT0FUKS5wcmVjaXNpb24mJjA8YS5nZXRTaGFkZXJQcmVjaXNpb25Gb3JtYXQoYS5GUkFHTUVOVF9TSEFERVIsYS5ISUdIX0ZMT0FUKS5wcmVjaXNpb24pcmV0dXJuXCJoaWdocFwiO2I9XCJtZWRpdW1wXCJ9cmV0dXJuXCJtZWRpdW1wXCI9PT1iJiYwPGEuZ2V0U2hhZGVyUHJlY2lzaW9uRm9ybWF0KGEuVkVSVEVYX1NIQURFUixhLk1FRElVTV9GTE9BVCkucHJlY2lzaW9uJiYwPGEuZ2V0U2hhZGVyUHJlY2lzaW9uRm9ybWF0KGEuRlJBR01FTlRfU0hBREVSLGEuTUVESVVNX0ZMT0FUKS5wcmVjaXNpb24/XCJtZWRpdW1wXCI6XCJsb3dwXCJ9dmFyIGU7dGhpcy5nZXRNYXhBbmlzb3Ryb3B5PWZ1bmN0aW9uKCl7aWYodm9pZCAwIT09ZSlyZXR1cm4gZTt2YXIgYz1iLmdldChcIkVYVF90ZXh0dXJlX2ZpbHRlcl9hbmlzb3Ryb3BpY1wiKTtcbnJldHVybiBlPW51bGwhPT1jP2EuZ2V0UGFyYW1ldGVyKGMuTUFYX1RFWFRVUkVfTUFYX0FOSVNPVFJPUFlfRVhUKTowfTt0aGlzLmdldE1heFByZWNpc2lvbj1kO3RoaXMucHJlY2lzaW9uPXZvaWQgMCE9PWMucHJlY2lzaW9uP2MucHJlY2lzaW9uOlwiaGlnaHBcIjt0aGlzLmxvZ2FyaXRobWljRGVwdGhCdWZmZXI9dm9pZCAwIT09Yy5sb2dhcml0aG1pY0RlcHRoQnVmZmVyP2MubG9nYXJpdGhtaWNEZXB0aEJ1ZmZlcjohMTt0aGlzLm1heFRleHR1cmVzPWEuZ2V0UGFyYW1ldGVyKGEuTUFYX1RFWFRVUkVfSU1BR0VfVU5JVFMpO3RoaXMubWF4VmVydGV4VGV4dHVyZXM9YS5nZXRQYXJhbWV0ZXIoYS5NQVhfVkVSVEVYX1RFWFRVUkVfSU1BR0VfVU5JVFMpO3RoaXMubWF4VGV4dHVyZVNpemU9YS5nZXRQYXJhbWV0ZXIoYS5NQVhfVEVYVFVSRV9TSVpFKTt0aGlzLm1heEN1YmVtYXBTaXplPWEuZ2V0UGFyYW1ldGVyKGEuTUFYX0NVQkVfTUFQX1RFWFRVUkVfU0laRSk7dGhpcy5tYXhBdHRyaWJ1dGVzPVxuYS5nZXRQYXJhbWV0ZXIoYS5NQVhfVkVSVEVYX0FUVFJJQlMpO3RoaXMubWF4VmVydGV4VW5pZm9ybXM9YS5nZXRQYXJhbWV0ZXIoYS5NQVhfVkVSVEVYX1VOSUZPUk1fVkVDVE9SUyk7dGhpcy5tYXhWYXJ5aW5ncz1hLmdldFBhcmFtZXRlcihhLk1BWF9WQVJZSU5HX1ZFQ1RPUlMpO3RoaXMubWF4RnJhZ21lbnRVbmlmb3Jtcz1hLmdldFBhcmFtZXRlcihhLk1BWF9GUkFHTUVOVF9VTklGT1JNX1ZFQ1RPUlMpO3RoaXMudmVydGV4VGV4dHVyZXM9MDx0aGlzLm1heFZlcnRleFRleHR1cmVzO3RoaXMuZmxvYXRGcmFnbWVudFRleHR1cmVzPSEhYi5nZXQoXCJPRVNfdGV4dHVyZV9mbG9hdFwiKTt0aGlzLmZsb2F0VmVydGV4VGV4dHVyZXM9dGhpcy52ZXJ0ZXhUZXh0dXJlcyYmdGhpcy5mbG9hdEZyYWdtZW50VGV4dHVyZXM7Yz1kKHRoaXMucHJlY2lzaW9uKTtjIT09dGhpcy5wcmVjaXNpb24mJihjb25zb2xlLndhcm4oXCJUSFJFRS5XZWJHTFJlbmRlcmVyOlwiLHRoaXMucHJlY2lzaW9uLFwibm90IHN1cHBvcnRlZCwgdXNpbmdcIixcbmMsXCJpbnN0ZWFkLlwiKSx0aGlzLnByZWNpc2lvbj1jKTt0aGlzLmxvZ2FyaXRobWljRGVwdGhCdWZmZXImJih0aGlzLmxvZ2FyaXRobWljRGVwdGhCdWZmZXI9ISFiLmdldChcIkVYVF9mcmFnX2RlcHRoXCIpKX07XG5USFJFRS5XZWJHTEdlb21ldHJpZXM9ZnVuY3Rpb24oYSxiLGMpe2Z1bmN0aW9uIGQoYSl7dmFyIGg9YS50YXJnZXQ7YT1mW2guaWRdO251bGwhPT1hLmluZGV4JiZlKGEuaW5kZXgpO3ZhciBrPWEuYXR0cmlidXRlcyxsO2ZvcihsIGluIGspZShrW2xdKTtoLnJlbW92ZUV2ZW50TGlzdGVuZXIoXCJkaXNwb3NlXCIsZCk7ZGVsZXRlIGZbaC5pZF07bD1iLmdldChoKTtsLndpcmVmcmFtZSYmZShsLndpcmVmcmFtZSk7Yi5kZWxldGUoaCk7aD1iLmdldChhKTtoLndpcmVmcmFtZSYmZShoLndpcmVmcmFtZSk7Yi5kZWxldGUoYSk7Yy5tZW1vcnkuZ2VvbWV0cmllcy0tfWZ1bmN0aW9uIGUoYyl7dmFyIGQ7ZD1jIGluc3RhbmNlb2YgVEhSRUUuSW50ZXJsZWF2ZWRCdWZmZXJBdHRyaWJ1dGU/Yi5nZXQoYy5kYXRhKS5fX3dlYmdsQnVmZmVyOmIuZ2V0KGMpLl9fd2ViZ2xCdWZmZXI7dm9pZCAwIT09ZCYmKGEuZGVsZXRlQnVmZmVyKGQpLGMgaW5zdGFuY2VvZiBUSFJFRS5JbnRlcmxlYXZlZEJ1ZmZlckF0dHJpYnV0ZT9cbmIuZGVsZXRlKGMuZGF0YSk6Yi5kZWxldGUoYykpfXZhciBmPXt9O3RoaXMuZ2V0PWZ1bmN0aW9uKGEpe3ZhciBiPWEuZ2VvbWV0cnk7aWYodm9pZCAwIT09ZltiLmlkXSlyZXR1cm4gZltiLmlkXTtiLmFkZEV2ZW50TGlzdGVuZXIoXCJkaXNwb3NlXCIsZCk7dmFyIGU7YiBpbnN0YW5jZW9mIFRIUkVFLkJ1ZmZlckdlb21ldHJ5P2U9YjpiIGluc3RhbmNlb2YgVEhSRUUuR2VvbWV0cnkmJih2b2lkIDA9PT1iLl9idWZmZXJHZW9tZXRyeSYmKGIuX2J1ZmZlckdlb21ldHJ5PShuZXcgVEhSRUUuQnVmZmVyR2VvbWV0cnkpLnNldEZyb21PYmplY3QoYSkpLGU9Yi5fYnVmZmVyR2VvbWV0cnkpO2ZbYi5pZF09ZTtjLm1lbW9yeS5nZW9tZXRyaWVzKys7cmV0dXJuIGV9fTtcblRIUkVFLldlYkdMTGlnaHRzPWZ1bmN0aW9uKCl7dmFyIGE9e307dGhpcy5nZXQ9ZnVuY3Rpb24oYil7aWYodm9pZCAwIT09YVtiLmlkXSlyZXR1cm4gYVtiLmlkXTt2YXIgYztzd2l0Y2goYi50eXBlKXtjYXNlIFwiRGlyZWN0aW9uYWxMaWdodFwiOmM9e2RpcmVjdGlvbjpuZXcgVEhSRUUuVmVjdG9yMyxjb2xvcjpuZXcgVEhSRUUuQ29sb3Isc2hhZG93OiExLHNoYWRvd0JpYXM6MCxzaGFkb3dSYWRpdXM6MSxzaGFkb3dNYXBTaXplOm5ldyBUSFJFRS5WZWN0b3IyfTticmVhaztjYXNlIFwiU3BvdExpZ2h0XCI6Yz17cG9zaXRpb246bmV3IFRIUkVFLlZlY3RvcjMsZGlyZWN0aW9uOm5ldyBUSFJFRS5WZWN0b3IzLGNvbG9yOm5ldyBUSFJFRS5Db2xvcixkaXN0YW5jZTowLGNvbmVDb3M6MCxwZW51bWJyYUNvczowLGRlY2F5OjAsc2hhZG93OiExLHNoYWRvd0JpYXM6MCxzaGFkb3dSYWRpdXM6MSxzaGFkb3dNYXBTaXplOm5ldyBUSFJFRS5WZWN0b3IyfTticmVhaztjYXNlIFwiUG9pbnRMaWdodFwiOmM9XG57cG9zaXRpb246bmV3IFRIUkVFLlZlY3RvcjMsY29sb3I6bmV3IFRIUkVFLkNvbG9yLGRpc3RhbmNlOjAsZGVjYXk6MCxzaGFkb3c6ITEsc2hhZG93QmlhczowLHNoYWRvd1JhZGl1czoxLHNoYWRvd01hcFNpemU6bmV3IFRIUkVFLlZlY3RvcjJ9O2JyZWFrO2Nhc2UgXCJIZW1pc3BoZXJlTGlnaHRcIjpjPXtkaXJlY3Rpb246bmV3IFRIUkVFLlZlY3RvcjMsc2t5Q29sb3I6bmV3IFRIUkVFLkNvbG9yLGdyb3VuZENvbG9yOm5ldyBUSFJFRS5Db2xvcn19cmV0dXJuIGFbYi5pZF09Y319O1xuVEhSRUUuV2ViR0xPYmplY3RzPWZ1bmN0aW9uKGEsYixjKXtmdW5jdGlvbiBkKGMsZCl7dmFyIGU9YyBpbnN0YW5jZW9mIFRIUkVFLkludGVybGVhdmVkQnVmZmVyQXR0cmlidXRlP2MuZGF0YTpjLGY9Yi5nZXQoZSk7dm9pZCAwPT09Zi5fX3dlYmdsQnVmZmVyPyhmLl9fd2ViZ2xCdWZmZXI9YS5jcmVhdGVCdWZmZXIoKSxhLmJpbmRCdWZmZXIoZCxmLl9fd2ViZ2xCdWZmZXIpLGEuYnVmZmVyRGF0YShkLGUuYXJyYXksZS5keW5hbWljP2EuRFlOQU1JQ19EUkFXOmEuU1RBVElDX0RSQVcpLGYudmVyc2lvbj1lLnZlcnNpb24pOmYudmVyc2lvbiE9PWUudmVyc2lvbiYmKGEuYmluZEJ1ZmZlcihkLGYuX193ZWJnbEJ1ZmZlciksITE9PT1lLmR5bmFtaWN8fC0xPT09ZS51cGRhdGVSYW5nZS5jb3VudD9hLmJ1ZmZlclN1YkRhdGEoZCwwLGUuYXJyYXkpOjA9PT1lLnVwZGF0ZVJhbmdlLmNvdW50P2NvbnNvbGUuZXJyb3IoXCJUSFJFRS5XZWJHTE9iamVjdHMudXBkYXRlQnVmZmVyOiBkeW5hbWljIFRIUkVFLkJ1ZmZlckF0dHJpYnV0ZSBtYXJrZWQgYXMgbmVlZHNVcGRhdGUgYnV0IHVwZGF0ZVJhbmdlLmNvdW50IGlzIDAsIGVuc3VyZSB5b3UgYXJlIHVzaW5nIHNldCBtZXRob2RzIG9yIHVwZGF0aW5nIG1hbnVhbGx5LlwiKTpcbihhLmJ1ZmZlclN1YkRhdGEoZCxlLnVwZGF0ZVJhbmdlLm9mZnNldCplLmFycmF5LkJZVEVTX1BFUl9FTEVNRU5ULGUuYXJyYXkuc3ViYXJyYXkoZS51cGRhdGVSYW5nZS5vZmZzZXQsZS51cGRhdGVSYW5nZS5vZmZzZXQrZS51cGRhdGVSYW5nZS5jb3VudCkpLGUudXBkYXRlUmFuZ2UuY291bnQ9MCksZi52ZXJzaW9uPWUudmVyc2lvbil9ZnVuY3Rpb24gZShhLGIsYyl7aWYoYj5jKXt2YXIgZD1iO2I9YztjPWR9ZD1hW2JdO3JldHVybiB2b2lkIDA9PT1kPyhhW2JdPVtjXSwhMCk6LTE9PT1kLmluZGV4T2YoYyk/KGQucHVzaChjKSwhMCk6ITF9dmFyIGY9bmV3IFRIUkVFLldlYkdMR2VvbWV0cmllcyhhLGIsYyk7dGhpcy5nZXRBdHRyaWJ1dGVCdWZmZXI9ZnVuY3Rpb24oYSl7cmV0dXJuIGEgaW5zdGFuY2VvZiBUSFJFRS5JbnRlcmxlYXZlZEJ1ZmZlckF0dHJpYnV0ZT9iLmdldChhLmRhdGEpLl9fd2ViZ2xCdWZmZXI6Yi5nZXQoYSkuX193ZWJnbEJ1ZmZlcn07dGhpcy5nZXRXaXJlZnJhbWVBdHRyaWJ1dGU9XG5mdW5jdGlvbihjKXt2YXIgZj1iLmdldChjKTtpZih2b2lkIDAhPT1mLndpcmVmcmFtZSlyZXR1cm4gZi53aXJlZnJhbWU7dmFyIGs9W10sbD1jLmluZGV4LG09Yy5hdHRyaWJ1dGVzO2M9bS5wb3NpdGlvbjtpZihudWxsIT09bClmb3IodmFyIG09e30sbD1sLmFycmF5LHA9MCxuPWwubGVuZ3RoO3A8bjtwKz0zKXt2YXIgcT1sW3ArMF0scj1sW3ArMV0scz1sW3ArMl07ZShtLHEscikmJmsucHVzaChxLHIpO2UobSxyLHMpJiZrLnB1c2gocixzKTtlKG0scyxxKSYmay5wdXNoKHMscSl9ZWxzZSBmb3IobD1tLnBvc2l0aW9uLmFycmF5LHA9MCxuPWwubGVuZ3RoLzMtMTtwPG47cCs9MylxPXArMCxyPXArMSxzPXArMixrLnB1c2gocSxyLHIscyxzLHEpO2s9bmV3IFRIUkVFLkJ1ZmZlckF0dHJpYnV0ZShuZXcgKDY1NTM1PGMuY291bnQ/VWludDMyQXJyYXk6VWludDE2QXJyYXkpKGspLDEpO2QoayxhLkVMRU1FTlRfQVJSQVlfQlVGRkVSKTtyZXR1cm4gZi53aXJlZnJhbWU9a307dGhpcy51cGRhdGU9XG5mdW5jdGlvbihiKXt2YXIgYz1mLmdldChiKTtiLmdlb21ldHJ5IGluc3RhbmNlb2YgVEhSRUUuR2VvbWV0cnkmJmMudXBkYXRlRnJvbU9iamVjdChiKTtiPWMuaW5kZXg7dmFyIGU9Yy5hdHRyaWJ1dGVzO251bGwhPT1iJiZkKGIsYS5FTEVNRU5UX0FSUkFZX0JVRkZFUik7Zm9yKHZhciBsIGluIGUpZChlW2xdLGEuQVJSQVlfQlVGRkVSKTtiPWMubW9ycGhBdHRyaWJ1dGVzO2ZvcihsIGluIGIpZm9yKHZhciBlPWJbbF0sbT0wLHA9ZS5sZW5ndGg7bTxwO20rKylkKGVbbV0sYS5BUlJBWV9CVUZGRVIpO3JldHVybiBjfX07XG5USFJFRS5XZWJHTFByb2dyYW09ZnVuY3Rpb24oKXtmdW5jdGlvbiBhKGEpe3N3aXRjaChhKXtjYXNlIFRIUkVFLkxpbmVhckVuY29kaW5nOnJldHVybltcIkxpbmVhclwiLFwiKCB2YWx1ZSApXCJdO2Nhc2UgVEhSRUUuc1JHQkVuY29kaW5nOnJldHVybltcInNSR0JcIixcIiggdmFsdWUgKVwiXTtjYXNlIFRIUkVFLlJHQkVFbmNvZGluZzpyZXR1cm5bXCJSR0JFXCIsXCIoIHZhbHVlIClcIl07Y2FzZSBUSFJFRS5SR0JNN0VuY29kaW5nOnJldHVybltcIlJHQk1cIixcIiggdmFsdWUsIDcuMCApXCJdO2Nhc2UgVEhSRUUuUkdCTTE2RW5jb2Rpbmc6cmV0dXJuW1wiUkdCTVwiLFwiKCB2YWx1ZSwgMTYuMCApXCJdO2Nhc2UgVEhSRUUuUkdCREVuY29kaW5nOnJldHVybltcIlJHQkRcIixcIiggdmFsdWUsIDI1Ni4wIClcIl07Y2FzZSBUSFJFRS5HYW1tYUVuY29kaW5nOnJldHVybltcIkdhbW1hXCIsXCIoIHZhbHVlLCBmbG9hdCggR0FNTUFfRkFDVE9SICkgKVwiXTtkZWZhdWx0OnRocm93IEVycm9yKFwidW5zdXBwb3J0ZWQgZW5jb2Rpbmc6IFwiK1xuYSk7fX1mdW5jdGlvbiBiKGIsYyl7dmFyIGQ9YShjKTtyZXR1cm5cInZlYzQgXCIrYitcIiggdmVjNCB2YWx1ZSApIHsgcmV0dXJuIFwiK2RbMF0rXCJUb0xpbmVhclwiK2RbMV0rXCI7IH1cIn1mdW5jdGlvbiBjKGIsYyl7dmFyIGQ9YShjKTtyZXR1cm5cInZlYzQgXCIrYitcIiggdmVjNCB2YWx1ZSApIHsgcmV0dXJuIExpbmVhclRvXCIrZFswXStkWzFdK1wiOyB9XCJ9ZnVuY3Rpb24gZChhLGIpe3ZhciBjO3N3aXRjaChiKXtjYXNlIFRIUkVFLkxpbmVhclRvbmVNYXBwaW5nOmM9XCJMaW5lYXJcIjticmVhaztjYXNlIFRIUkVFLlJlaW5oYXJkVG9uZU1hcHBpbmc6Yz1cIlJlaW5oYXJkXCI7YnJlYWs7Y2FzZSBUSFJFRS5VbmNoYXJ0ZWQyVG9uZU1hcHBpbmc6Yz1cIlVuY2hhcnRlZDJcIjticmVhaztjYXNlIFRIUkVFLkNpbmVvblRvbmVNYXBwaW5nOmM9XCJPcHRpbWl6ZWRDaW5lb25cIjticmVhaztkZWZhdWx0OnRocm93IEVycm9yKFwidW5zdXBwb3J0ZWQgdG9uZU1hcHBpbmc6IFwiK2IpO31yZXR1cm5cInZlYzMgXCIrYStcblwiKCB2ZWMzIGNvbG9yICkgeyByZXR1cm4gXCIrYytcIlRvbmVNYXBwaW5nKCBjb2xvciApOyB9XCJ9ZnVuY3Rpb24gZShhLGIsYyl7YT1hfHx7fTtyZXR1cm5bYS5kZXJpdmF0aXZlc3x8Yi5lbnZNYXBDdWJlVVZ8fGIuYnVtcE1hcHx8Yi5ub3JtYWxNYXB8fGIuZmxhdFNoYWRpbmc/XCIjZXh0ZW5zaW9uIEdMX09FU19zdGFuZGFyZF9kZXJpdmF0aXZlcyA6IGVuYWJsZVwiOlwiXCIsKGEuZnJhZ0RlcHRofHxiLmxvZ2FyaXRobWljRGVwdGhCdWZmZXIpJiZjLmdldChcIkVYVF9mcmFnX2RlcHRoXCIpP1wiI2V4dGVuc2lvbiBHTF9FWFRfZnJhZ19kZXB0aCA6IGVuYWJsZVwiOlwiXCIsYS5kcmF3QnVmZmVycyYmYy5nZXQoXCJXRUJHTF9kcmF3X2J1ZmZlcnNcIik/XCIjZXh0ZW5zaW9uIEdMX0VYVF9kcmF3X2J1ZmZlcnMgOiByZXF1aXJlXCI6XCJcIiwoYS5zaGFkZXJUZXh0dXJlTE9EfHxiLmVudk1hcCkmJmMuZ2V0KFwiRVhUX3NoYWRlcl90ZXh0dXJlX2xvZFwiKT9cIiNleHRlbnNpb24gR0xfRVhUX3NoYWRlcl90ZXh0dXJlX2xvZCA6IGVuYWJsZVwiOlxuXCJcIl0uZmlsdGVyKGcpLmpvaW4oXCJcXG5cIil9ZnVuY3Rpb24gZihhKXt2YXIgYj1bXSxjO2ZvcihjIGluIGEpe3ZhciBkPWFbY107ITEhPT1kJiZiLnB1c2goXCIjZGVmaW5lIFwiK2MrXCIgXCIrZCl9cmV0dXJuIGIuam9pbihcIlxcblwiKX1mdW5jdGlvbiBnKGEpe3JldHVyblwiXCIhPT1hfWZ1bmN0aW9uIGgoYSxiKXtyZXR1cm4gYS5yZXBsYWNlKC9OVU1fRElSX0xJR0hUUy9nLGIubnVtRGlyTGlnaHRzKS5yZXBsYWNlKC9OVU1fU1BPVF9MSUdIVFMvZyxiLm51bVNwb3RMaWdodHMpLnJlcGxhY2UoL05VTV9QT0lOVF9MSUdIVFMvZyxiLm51bVBvaW50TGlnaHRzKS5yZXBsYWNlKC9OVU1fSEVNSV9MSUdIVFMvZyxiLm51bUhlbWlMaWdodHMpfWZ1bmN0aW9uIGsoYSl7cmV0dXJuIGEucmVwbGFjZSgvI2luY2x1ZGUgKzwoW1xcd1xcZC5dKyk+L2csZnVuY3Rpb24oYSxiKXt2YXIgYz1USFJFRS5TaGFkZXJDaHVua1tiXTtpZih2b2lkIDA9PT1jKXRocm93IEVycm9yKFwiQ2FuIG5vdCByZXNvbHZlICNpbmNsdWRlIDxcIitcbmIrXCI+XCIpO3JldHVybiBrKGMpfSl9ZnVuY3Rpb24gbChhKXtyZXR1cm4gYS5yZXBsYWNlKC9mb3IgXFwoIGludCBpIFxcPSAoXFxkKylcXDsgaSA8IChcXGQrKVxcOyBpIFxcK1xcKyBcXCkgXFx7KFtcXHNcXFNdKz8pKD89XFx9KVxcfS9nLGZ1bmN0aW9uKGEsYixjLGQpe2E9XCJcIjtmb3IoYj1wYXJzZUludChiKTtiPHBhcnNlSW50KGMpO2IrKylhKz1kLnJlcGxhY2UoL1xcWyBpIFxcXS9nLFwiWyBcIitiK1wiIF1cIik7cmV0dXJuIGF9KX12YXIgbT0wO3JldHVybiBmdW5jdGlvbihhLG4scSxyKXt2YXIgcz1hLmNvbnRleHQsdj1xLmV4dGVuc2lvbnMsdD1xLmRlZmluZXMsdT1xLl9fd2ViZ2xTaGFkZXIudmVydGV4U2hhZGVyLEQ9cS5fX3dlYmdsU2hhZGVyLmZyYWdtZW50U2hhZGVyLHc9XCJTSEFET1dNQVBfVFlQRV9CQVNJQ1wiO3Iuc2hhZG93TWFwVHlwZT09PVRIUkVFLlBDRlNoYWRvd01hcD93PVwiU0hBRE9XTUFQX1RZUEVfUENGXCI6ci5zaGFkb3dNYXBUeXBlPT09VEhSRUUuUENGU29mdFNoYWRvd01hcCYmKHc9XCJTSEFET1dNQVBfVFlQRV9QQ0ZfU09GVFwiKTtcbnZhciBJPVwiRU5WTUFQX1RZUEVfQ1VCRVwiLHo9XCJFTlZNQVBfTU9ERV9SRUZMRUNUSU9OXCIseT1cIkVOVk1BUF9CTEVORElOR19NVUxUSVBMWVwiO2lmKHIuZW52TWFwKXtzd2l0Y2gocS5lbnZNYXAubWFwcGluZyl7Y2FzZSBUSFJFRS5DdWJlUmVmbGVjdGlvbk1hcHBpbmc6Y2FzZSBUSFJFRS5DdWJlUmVmcmFjdGlvbk1hcHBpbmc6ST1cIkVOVk1BUF9UWVBFX0NVQkVcIjticmVhaztjYXNlIFRIUkVFLkN1YmVVVlJlZmxlY3Rpb25NYXBwaW5nOmNhc2UgVEhSRUUuQ3ViZVVWUmVmcmFjdGlvbk1hcHBpbmc6ST1cIkVOVk1BUF9UWVBFX0NVQkVfVVZcIjticmVhaztjYXNlIFRIUkVFLkVxdWlyZWN0YW5ndWxhclJlZmxlY3Rpb25NYXBwaW5nOmNhc2UgVEhSRUUuRXF1aXJlY3Rhbmd1bGFyUmVmcmFjdGlvbk1hcHBpbmc6ST1cIkVOVk1BUF9UWVBFX0VRVUlSRUNcIjticmVhaztjYXNlIFRIUkVFLlNwaGVyaWNhbFJlZmxlY3Rpb25NYXBwaW5nOkk9XCJFTlZNQVBfVFlQRV9TUEhFUkVcIn1zd2l0Y2gocS5lbnZNYXAubWFwcGluZyl7Y2FzZSBUSFJFRS5DdWJlUmVmcmFjdGlvbk1hcHBpbmc6Y2FzZSBUSFJFRS5FcXVpcmVjdGFuZ3VsYXJSZWZyYWN0aW9uTWFwcGluZzp6PVxuXCJFTlZNQVBfTU9ERV9SRUZSQUNUSU9OXCJ9c3dpdGNoKHEuY29tYmluZSl7Y2FzZSBUSFJFRS5NdWx0aXBseU9wZXJhdGlvbjp5PVwiRU5WTUFQX0JMRU5ESU5HX01VTFRJUExZXCI7YnJlYWs7Y2FzZSBUSFJFRS5NaXhPcGVyYXRpb246eT1cIkVOVk1BUF9CTEVORElOR19NSVhcIjticmVhaztjYXNlIFRIUkVFLkFkZE9wZXJhdGlvbjp5PVwiRU5WTUFQX0JMRU5ESU5HX0FERFwifX12YXIgQT0wPGEuZ2FtbWFGYWN0b3I/YS5nYW1tYUZhY3RvcjoxLHY9ZSh2LHIsYS5leHRlbnNpb25zKSxHPWYodCksQj1zLmNyZWF0ZVByb2dyYW0oKTtxIGluc3RhbmNlb2YgVEhSRUUuUmF3U2hhZGVyTWF0ZXJpYWw/KHQ9W0ddLmZpbHRlcihnKS5qb2luKFwiXFxuXCIpLHc9W0ddLmZpbHRlcihnKS5qb2luKFwiXFxuXCIpKToodD1bXCJwcmVjaXNpb24gXCIrci5wcmVjaXNpb24rXCIgZmxvYXQ7XCIsXCJwcmVjaXNpb24gXCIrci5wcmVjaXNpb24rXCIgaW50O1wiLFwiI2RlZmluZSBTSEFERVJfTkFNRSBcIitxLl9fd2ViZ2xTaGFkZXIubmFtZSxcbkcsci5zdXBwb3J0c1ZlcnRleFRleHR1cmVzP1wiI2RlZmluZSBWRVJURVhfVEVYVFVSRVNcIjpcIlwiLFwiI2RlZmluZSBHQU1NQV9GQUNUT1IgXCIrQSxcIiNkZWZpbmUgTUFYX0JPTkVTIFwiK3IubWF4Qm9uZXMsci5tYXA/XCIjZGVmaW5lIFVTRV9NQVBcIjpcIlwiLHIuZW52TWFwP1wiI2RlZmluZSBVU0VfRU5WTUFQXCI6XCJcIixyLmVudk1hcD9cIiNkZWZpbmUgXCIrejpcIlwiLHIubGlnaHRNYXA/XCIjZGVmaW5lIFVTRV9MSUdIVE1BUFwiOlwiXCIsci5hb01hcD9cIiNkZWZpbmUgVVNFX0FPTUFQXCI6XCJcIixyLmVtaXNzaXZlTWFwP1wiI2RlZmluZSBVU0VfRU1JU1NJVkVNQVBcIjpcIlwiLHIuYnVtcE1hcD9cIiNkZWZpbmUgVVNFX0JVTVBNQVBcIjpcIlwiLHIubm9ybWFsTWFwP1wiI2RlZmluZSBVU0VfTk9STUFMTUFQXCI6XCJcIixyLmRpc3BsYWNlbWVudE1hcCYmci5zdXBwb3J0c1ZlcnRleFRleHR1cmVzP1wiI2RlZmluZSBVU0VfRElTUExBQ0VNRU5UTUFQXCI6XCJcIixyLnNwZWN1bGFyTWFwP1wiI2RlZmluZSBVU0VfU1BFQ1VMQVJNQVBcIjpcblwiXCIsci5yb3VnaG5lc3NNYXA/XCIjZGVmaW5lIFVTRV9ST1VHSE5FU1NNQVBcIjpcIlwiLHIubWV0YWxuZXNzTWFwP1wiI2RlZmluZSBVU0VfTUVUQUxORVNTTUFQXCI6XCJcIixyLmFscGhhTWFwP1wiI2RlZmluZSBVU0VfQUxQSEFNQVBcIjpcIlwiLHIudmVydGV4Q29sb3JzP1wiI2RlZmluZSBVU0VfQ09MT1JcIjpcIlwiLHIuZmxhdFNoYWRpbmc/XCIjZGVmaW5lIEZMQVRfU0hBREVEXCI6XCJcIixyLnNraW5uaW5nP1wiI2RlZmluZSBVU0VfU0tJTk5JTkdcIjpcIlwiLHIudXNlVmVydGV4VGV4dHVyZT9cIiNkZWZpbmUgQk9ORV9URVhUVVJFXCI6XCJcIixyLm1vcnBoVGFyZ2V0cz9cIiNkZWZpbmUgVVNFX01PUlBIVEFSR0VUU1wiOlwiXCIsci5tb3JwaE5vcm1hbHMmJiExPT09ci5mbGF0U2hhZGluZz9cIiNkZWZpbmUgVVNFX01PUlBITk9STUFMU1wiOlwiXCIsci5kb3VibGVTaWRlZD9cIiNkZWZpbmUgRE9VQkxFX1NJREVEXCI6XCJcIixyLmZsaXBTaWRlZD9cIiNkZWZpbmUgRkxJUF9TSURFRFwiOlwiXCIsXCIjZGVmaW5lIE5VTV9DTElQUElOR19QTEFORVMgXCIrXG5yLm51bUNsaXBwaW5nUGxhbmVzLHIuc2hhZG93TWFwRW5hYmxlZD9cIiNkZWZpbmUgVVNFX1NIQURPV01BUFwiOlwiXCIsci5zaGFkb3dNYXBFbmFibGVkP1wiI2RlZmluZSBcIit3OlwiXCIsci5zaXplQXR0ZW51YXRpb24/XCIjZGVmaW5lIFVTRV9TSVpFQVRURU5VQVRJT05cIjpcIlwiLHIubG9nYXJpdGhtaWNEZXB0aEJ1ZmZlcj9cIiNkZWZpbmUgVVNFX0xPR0RFUFRIQlVGXCI6XCJcIixyLmxvZ2FyaXRobWljRGVwdGhCdWZmZXImJmEuZXh0ZW5zaW9ucy5nZXQoXCJFWFRfZnJhZ19kZXB0aFwiKT9cIiNkZWZpbmUgVVNFX0xPR0RFUFRIQlVGX0VYVFwiOlwiXCIsXCJ1bmlmb3JtIG1hdDQgbW9kZWxNYXRyaXg7XCIsXCJ1bmlmb3JtIG1hdDQgbW9kZWxWaWV3TWF0cml4O1wiLFwidW5pZm9ybSBtYXQ0IHByb2plY3Rpb25NYXRyaXg7XCIsXCJ1bmlmb3JtIG1hdDQgdmlld01hdHJpeDtcIixcInVuaWZvcm0gbWF0MyBub3JtYWxNYXRyaXg7XCIsXCJ1bmlmb3JtIHZlYzMgY2FtZXJhUG9zaXRpb247XCIsXCJhdHRyaWJ1dGUgdmVjMyBwb3NpdGlvbjtcIixcblwiYXR0cmlidXRlIHZlYzMgbm9ybWFsO1wiLFwiYXR0cmlidXRlIHZlYzIgdXY7XCIsXCIjaWZkZWYgVVNFX0NPTE9SXCIsXCJcXHRhdHRyaWJ1dGUgdmVjMyBjb2xvcjtcIixcIiNlbmRpZlwiLFwiI2lmZGVmIFVTRV9NT1JQSFRBUkdFVFNcIixcIlxcdGF0dHJpYnV0ZSB2ZWMzIG1vcnBoVGFyZ2V0MDtcIixcIlxcdGF0dHJpYnV0ZSB2ZWMzIG1vcnBoVGFyZ2V0MTtcIixcIlxcdGF0dHJpYnV0ZSB2ZWMzIG1vcnBoVGFyZ2V0MjtcIixcIlxcdGF0dHJpYnV0ZSB2ZWMzIG1vcnBoVGFyZ2V0MztcIixcIlxcdCNpZmRlZiBVU0VfTU9SUEhOT1JNQUxTXCIsXCJcXHRcXHRhdHRyaWJ1dGUgdmVjMyBtb3JwaE5vcm1hbDA7XCIsXCJcXHRcXHRhdHRyaWJ1dGUgdmVjMyBtb3JwaE5vcm1hbDE7XCIsXCJcXHRcXHRhdHRyaWJ1dGUgdmVjMyBtb3JwaE5vcm1hbDI7XCIsXCJcXHRcXHRhdHRyaWJ1dGUgdmVjMyBtb3JwaE5vcm1hbDM7XCIsXCJcXHQjZWxzZVwiLFwiXFx0XFx0YXR0cmlidXRlIHZlYzMgbW9ycGhUYXJnZXQ0O1wiLFwiXFx0XFx0YXR0cmlidXRlIHZlYzMgbW9ycGhUYXJnZXQ1O1wiLFxuXCJcXHRcXHRhdHRyaWJ1dGUgdmVjMyBtb3JwaFRhcmdldDY7XCIsXCJcXHRcXHRhdHRyaWJ1dGUgdmVjMyBtb3JwaFRhcmdldDc7XCIsXCJcXHQjZW5kaWZcIixcIiNlbmRpZlwiLFwiI2lmZGVmIFVTRV9TS0lOTklOR1wiLFwiXFx0YXR0cmlidXRlIHZlYzQgc2tpbkluZGV4O1wiLFwiXFx0YXR0cmlidXRlIHZlYzQgc2tpbldlaWdodDtcIixcIiNlbmRpZlwiLFwiXFxuXCJdLmZpbHRlcihnKS5qb2luKFwiXFxuXCIpLHc9W3YsXCJwcmVjaXNpb24gXCIrci5wcmVjaXNpb24rXCIgZmxvYXQ7XCIsXCJwcmVjaXNpb24gXCIrci5wcmVjaXNpb24rXCIgaW50O1wiLFwiI2RlZmluZSBTSEFERVJfTkFNRSBcIitxLl9fd2ViZ2xTaGFkZXIubmFtZSxHLHIuYWxwaGFUZXN0P1wiI2RlZmluZSBBTFBIQVRFU1QgXCIrci5hbHBoYVRlc3Q6XCJcIixcIiNkZWZpbmUgR0FNTUFfRkFDVE9SIFwiK0Esci51c2VGb2cmJnIuZm9nP1wiI2RlZmluZSBVU0VfRk9HXCI6XCJcIixyLnVzZUZvZyYmci5mb2dFeHA/XCIjZGVmaW5lIEZPR19FWFAyXCI6XCJcIixyLm1hcD9cIiNkZWZpbmUgVVNFX01BUFwiOlxuXCJcIixyLmVudk1hcD9cIiNkZWZpbmUgVVNFX0VOVk1BUFwiOlwiXCIsci5lbnZNYXA/XCIjZGVmaW5lIFwiK0k6XCJcIixyLmVudk1hcD9cIiNkZWZpbmUgXCIrejpcIlwiLHIuZW52TWFwP1wiI2RlZmluZSBcIit5OlwiXCIsci5saWdodE1hcD9cIiNkZWZpbmUgVVNFX0xJR0hUTUFQXCI6XCJcIixyLmFvTWFwP1wiI2RlZmluZSBVU0VfQU9NQVBcIjpcIlwiLHIuZW1pc3NpdmVNYXA/XCIjZGVmaW5lIFVTRV9FTUlTU0lWRU1BUFwiOlwiXCIsci5idW1wTWFwP1wiI2RlZmluZSBVU0VfQlVNUE1BUFwiOlwiXCIsci5ub3JtYWxNYXA/XCIjZGVmaW5lIFVTRV9OT1JNQUxNQVBcIjpcIlwiLHIuc3BlY3VsYXJNYXA/XCIjZGVmaW5lIFVTRV9TUEVDVUxBUk1BUFwiOlwiXCIsci5yb3VnaG5lc3NNYXA/XCIjZGVmaW5lIFVTRV9ST1VHSE5FU1NNQVBcIjpcIlwiLHIubWV0YWxuZXNzTWFwP1wiI2RlZmluZSBVU0VfTUVUQUxORVNTTUFQXCI6XCJcIixyLmFscGhhTWFwP1wiI2RlZmluZSBVU0VfQUxQSEFNQVBcIjpcIlwiLHIudmVydGV4Q29sb3JzP1wiI2RlZmluZSBVU0VfQ09MT1JcIjpcblwiXCIsci5mbGF0U2hhZGluZz9cIiNkZWZpbmUgRkxBVF9TSEFERURcIjpcIlwiLHIuZG91YmxlU2lkZWQ/XCIjZGVmaW5lIERPVUJMRV9TSURFRFwiOlwiXCIsci5mbGlwU2lkZWQ/XCIjZGVmaW5lIEZMSVBfU0lERURcIjpcIlwiLFwiI2RlZmluZSBOVU1fQ0xJUFBJTkdfUExBTkVTIFwiK3IubnVtQ2xpcHBpbmdQbGFuZXMsci5zaGFkb3dNYXBFbmFibGVkP1wiI2RlZmluZSBVU0VfU0hBRE9XTUFQXCI6XCJcIixyLnNoYWRvd01hcEVuYWJsZWQ/XCIjZGVmaW5lIFwiK3c6XCJcIixyLnByZW11bHRpcGxpZWRBbHBoYT9cIiNkZWZpbmUgUFJFTVVMVElQTElFRF9BTFBIQVwiOlwiXCIsci5waHlzaWNhbGx5Q29ycmVjdExpZ2h0cz9cIiNkZWZpbmUgUEhZU0lDQUxMWV9DT1JSRUNUX0xJR0hUU1wiOlwiXCIsci5sb2dhcml0aG1pY0RlcHRoQnVmZmVyP1wiI2RlZmluZSBVU0VfTE9HREVQVEhCVUZcIjpcIlwiLHIubG9nYXJpdGhtaWNEZXB0aEJ1ZmZlciYmYS5leHRlbnNpb25zLmdldChcIkVYVF9mcmFnX2RlcHRoXCIpP1wiI2RlZmluZSBVU0VfTE9HREVQVEhCVUZfRVhUXCI6XG5cIlwiLHIuZW52TWFwJiZhLmV4dGVuc2lvbnMuZ2V0KFwiRVhUX3NoYWRlcl90ZXh0dXJlX2xvZFwiKT9cIiNkZWZpbmUgVEVYVFVSRV9MT0RfRVhUXCI6XCJcIixcInVuaWZvcm0gbWF0NCB2aWV3TWF0cml4O1wiLFwidW5pZm9ybSB2ZWMzIGNhbWVyYVBvc2l0aW9uO1wiLHIudG9uZU1hcHBpbmchPT1USFJFRS5Ob1RvbmVNYXBwaW5nP1wiI2RlZmluZSBUT05FX01BUFBJTkdcIjpcIlwiLHIudG9uZU1hcHBpbmchPT1USFJFRS5Ob1RvbmVNYXBwaW5nP1RIUkVFLlNoYWRlckNodW5rLnRvbmVtYXBwaW5nX3BhcnNfZnJhZ21lbnQ6XCJcIixyLnRvbmVNYXBwaW5nIT09VEhSRUUuTm9Ub25lTWFwcGluZz9kKFwidG9uZU1hcHBpbmdcIixyLnRvbmVNYXBwaW5nKTpcIlwiLHIub3V0cHV0RW5jb2Rpbmd8fHIubWFwRW5jb2Rpbmd8fHIuZW52TWFwRW5jb2Rpbmd8fHIuZW1pc3NpdmVNYXBFbmNvZGluZz9USFJFRS5TaGFkZXJDaHVuay5lbmNvZGluZ3NfcGFyc19mcmFnbWVudDpcIlwiLHIubWFwRW5jb2Rpbmc/YihcIm1hcFRleGVsVG9MaW5lYXJcIixcbnIubWFwRW5jb2RpbmcpOlwiXCIsci5lbnZNYXBFbmNvZGluZz9iKFwiZW52TWFwVGV4ZWxUb0xpbmVhclwiLHIuZW52TWFwRW5jb2RpbmcpOlwiXCIsci5lbWlzc2l2ZU1hcEVuY29kaW5nP2IoXCJlbWlzc2l2ZU1hcFRleGVsVG9MaW5lYXJcIixyLmVtaXNzaXZlTWFwRW5jb2RpbmcpOlwiXCIsci5vdXRwdXRFbmNvZGluZz9jKFwibGluZWFyVG9PdXRwdXRUZXhlbFwiLHIub3V0cHV0RW5jb2RpbmcpOlwiXCIsci5kZXB0aFBhY2tpbmc/XCIjZGVmaW5lIERFUFRIX1BBQ0tJTkcgXCIrcS5kZXB0aFBhY2tpbmc6XCJcIixcIlxcblwiXS5maWx0ZXIoZykuam9pbihcIlxcblwiKSk7dT1rKHUscik7dT1oKHUscik7RD1rKEQscik7RD1oKEQscik7ITE9PT1xIGluc3RhbmNlb2YgVEhSRUUuU2hhZGVyTWF0ZXJpYWwmJih1PWwodSksRD1sKEQpKTtEPXcrRDt1PVRIUkVFLldlYkdMU2hhZGVyKHMscy5WRVJURVhfU0hBREVSLHQrdSk7RD1USFJFRS5XZWJHTFNoYWRlcihzLHMuRlJBR01FTlRfU0hBREVSLEQpO3MuYXR0YWNoU2hhZGVyKEIsXG51KTtzLmF0dGFjaFNoYWRlcihCLEQpO3ZvaWQgMCE9PXEuaW5kZXgwQXR0cmlidXRlTmFtZT9zLmJpbmRBdHRyaWJMb2NhdGlvbihCLDAscS5pbmRleDBBdHRyaWJ1dGVOYW1lKTohMD09PXIubW9ycGhUYXJnZXRzJiZzLmJpbmRBdHRyaWJMb2NhdGlvbihCLDAsXCJwb3NpdGlvblwiKTtzLmxpbmtQcm9ncmFtKEIpO3I9cy5nZXRQcm9ncmFtSW5mb0xvZyhCKTtJPXMuZ2V0U2hhZGVySW5mb0xvZyh1KTt6PXMuZ2V0U2hhZGVySW5mb0xvZyhEKTtBPXk9ITA7aWYoITE9PT1zLmdldFByb2dyYW1QYXJhbWV0ZXIoQixzLkxJTktfU1RBVFVTKSl5PSExLGNvbnNvbGUuZXJyb3IoXCJUSFJFRS5XZWJHTFByb2dyYW06IHNoYWRlciBlcnJvcjogXCIscy5nZXRFcnJvcigpLFwiZ2wuVkFMSURBVEVfU1RBVFVTXCIscy5nZXRQcm9ncmFtUGFyYW1ldGVyKEIscy5WQUxJREFURV9TVEFUVVMpLFwiZ2wuZ2V0UHJvZ3JhbUluZm9Mb2dcIixyLEkseik7ZWxzZSBpZihcIlwiIT09ciljb25zb2xlLndhcm4oXCJUSFJFRS5XZWJHTFByb2dyYW06IGdsLmdldFByb2dyYW1JbmZvTG9nKClcIixcbnIpO2Vsc2UgaWYoXCJcIj09PUl8fFwiXCI9PT16KUE9ITE7QSYmKHRoaXMuZGlhZ25vc3RpY3M9e3J1bm5hYmxlOnksbWF0ZXJpYWw6cSxwcm9ncmFtTG9nOnIsdmVydGV4U2hhZGVyOntsb2c6SSxwcmVmaXg6dH0sZnJhZ21lbnRTaGFkZXI6e2xvZzp6LHByZWZpeDp3fX0pO3MuZGVsZXRlU2hhZGVyKHUpO3MuZGVsZXRlU2hhZGVyKEQpO3ZhciBGO3RoaXMuZ2V0VW5pZm9ybXM9ZnVuY3Rpb24oKXt2b2lkIDA9PT1GJiYoRj1uZXcgVEhSRUUuV2ViR0xVbmlmb3JtcyhzLEIsYSkpO3JldHVybiBGfTt2YXIgSjt0aGlzLmdldEF0dHJpYnV0ZXM9ZnVuY3Rpb24oKXtpZih2b2lkIDA9PT1KKXtmb3IodmFyIGE9e30sYj1zLmdldFByb2dyYW1QYXJhbWV0ZXIoQixzLkFDVElWRV9BVFRSSUJVVEVTKSxjPTA7YzxiO2MrKyl7dmFyIGQ9cy5nZXRBY3RpdmVBdHRyaWIoQixjKS5uYW1lO2FbZF09cy5nZXRBdHRyaWJMb2NhdGlvbihCLGQpfUo9YX1yZXR1cm4gSn07dGhpcy5kZXN0cm95PWZ1bmN0aW9uKCl7cy5kZWxldGVQcm9ncmFtKEIpO1xudGhpcy5wcm9ncmFtPXZvaWQgMH07T2JqZWN0LmRlZmluZVByb3BlcnRpZXModGhpcyx7dW5pZm9ybXM6e2dldDpmdW5jdGlvbigpe2NvbnNvbGUud2FybihcIlRIUkVFLldlYkdMUHJvZ3JhbTogLnVuaWZvcm1zIGlzIG5vdyAuZ2V0VW5pZm9ybXMoKS5cIik7cmV0dXJuIHRoaXMuZ2V0VW5pZm9ybXMoKX19LGF0dHJpYnV0ZXM6e2dldDpmdW5jdGlvbigpe2NvbnNvbGUud2FybihcIlRIUkVFLldlYkdMUHJvZ3JhbTogLmF0dHJpYnV0ZXMgaXMgbm93IC5nZXRBdHRyaWJ1dGVzKCkuXCIpO3JldHVybiB0aGlzLmdldEF0dHJpYnV0ZXMoKX19fSk7dGhpcy5pZD1tKys7dGhpcy5jb2RlPW47dGhpcy51c2VkVGltZXM9MTt0aGlzLnByb2dyYW09Qjt0aGlzLnZlcnRleFNoYWRlcj11O3RoaXMuZnJhZ21lbnRTaGFkZXI9RDtyZXR1cm4gdGhpc319KCk7XG5USFJFRS5XZWJHTFByb2dyYW1zPWZ1bmN0aW9uKGEsYil7ZnVuY3Rpb24gYyhhLGIpe3ZhciBjO2E/YSBpbnN0YW5jZW9mIFRIUkVFLlRleHR1cmU/Yz1hLmVuY29kaW5nOmEgaW5zdGFuY2VvZiBUSFJFRS5XZWJHTFJlbmRlclRhcmdldCYmKGNvbnNvbGUud2FybihcIlRIUkVFLldlYkdMUHJvZ3JhbXMuZ2V0VGV4dHVyZUVuY29kaW5nRnJvbU1hcDogZG9uJ3QgdXNlIHJlbmRlciB0YXJnZXRzIGFzIHRleHR1cmVzLiBVc2UgdGhlaXIgLnRleHR1cmUgcHJvcGVydHkgaW5zdGVhZC5cIiksYz1hLnRleHR1cmUuZW5jb2RpbmcpOmM9VEhSRUUuTGluZWFyRW5jb2Rpbmc7Yz09PVRIUkVFLkxpbmVhckVuY29kaW5nJiZiJiYoYz1USFJFRS5HYW1tYUVuY29kaW5nKTtyZXR1cm4gY312YXIgZD1bXSxlPXtNZXNoRGVwdGhNYXRlcmlhbDpcImRlcHRoXCIsTWVzaE5vcm1hbE1hdGVyaWFsOlwibm9ybWFsXCIsTWVzaEJhc2ljTWF0ZXJpYWw6XCJiYXNpY1wiLE1lc2hMYW1iZXJ0TWF0ZXJpYWw6XCJsYW1iZXJ0XCIsXG5NZXNoUGhvbmdNYXRlcmlhbDpcInBob25nXCIsTWVzaFN0YW5kYXJkTWF0ZXJpYWw6XCJwaHlzaWNhbFwiLE1lc2hQaHlzaWNhbE1hdGVyaWFsOlwicGh5c2ljYWxcIixMaW5lQmFzaWNNYXRlcmlhbDpcImJhc2ljXCIsTGluZURhc2hlZE1hdGVyaWFsOlwiZGFzaGVkXCIsUG9pbnRzTWF0ZXJpYWw6XCJwb2ludHNcIn0sZj1cInByZWNpc2lvbiBzdXBwb3J0c1ZlcnRleFRleHR1cmVzIG1hcCBtYXBFbmNvZGluZyBlbnZNYXAgZW52TWFwTW9kZSBlbnZNYXBFbmNvZGluZyBsaWdodE1hcCBhb01hcCBlbWlzc2l2ZU1hcCBlbWlzc2l2ZU1hcEVuY29kaW5nIGJ1bXBNYXAgbm9ybWFsTWFwIGRpc3BsYWNlbWVudE1hcCBzcGVjdWxhck1hcCByb3VnaG5lc3NNYXAgbWV0YWxuZXNzTWFwIGFscGhhTWFwIGNvbWJpbmUgdmVydGV4Q29sb3JzIGZvZyB1c2VGb2cgZm9nRXhwIGZsYXRTaGFkaW5nIHNpemVBdHRlbnVhdGlvbiBsb2dhcml0aG1pY0RlcHRoQnVmZmVyIHNraW5uaW5nIG1heEJvbmVzIHVzZVZlcnRleFRleHR1cmUgbW9ycGhUYXJnZXRzIG1vcnBoTm9ybWFscyBtYXhNb3JwaFRhcmdldHMgbWF4TW9ycGhOb3JtYWxzIHByZW11bHRpcGxpZWRBbHBoYSBudW1EaXJMaWdodHMgbnVtUG9pbnRMaWdodHMgbnVtU3BvdExpZ2h0cyBudW1IZW1pTGlnaHRzIHNoYWRvd01hcEVuYWJsZWQgc2hhZG93TWFwVHlwZSB0b25lTWFwcGluZyBwaHlzaWNhbGx5Q29ycmVjdExpZ2h0cyBhbHBoYVRlc3QgZG91YmxlU2lkZWQgZmxpcFNpZGVkIG51bUNsaXBwaW5nUGxhbmVzIGRlcHRoUGFja2luZ1wiLnNwbGl0KFwiIFwiKTtcbnRoaXMuZ2V0UGFyYW1ldGVycz1mdW5jdGlvbihkLGYsayxsLG0pe3ZhciBwPWVbZC50eXBlXSxuO2IuZmxvYXRWZXJ0ZXhUZXh0dXJlcyYmbSYmbS5za2VsZXRvbiYmbS5za2VsZXRvbi51c2VWZXJ0ZXhUZXh0dXJlP249MTAyNDoobj1NYXRoLmZsb29yKChiLm1heFZlcnRleFVuaWZvcm1zLTIwKS80KSx2b2lkIDAhPT1tJiZtIGluc3RhbmNlb2YgVEhSRUUuU2tpbm5lZE1lc2gmJihuPU1hdGgubWluKG0uc2tlbGV0b24uYm9uZXMubGVuZ3RoLG4pLG48bS5za2VsZXRvbi5ib25lcy5sZW5ndGgmJmNvbnNvbGUud2FybihcIldlYkdMUmVuZGVyZXI6IHRvbyBtYW55IGJvbmVzIC0gXCIrbS5za2VsZXRvbi5ib25lcy5sZW5ndGgrXCIsIHRoaXMgR1BVIHN1cHBvcnRzIGp1c3QgXCIrbitcIiAodHJ5IE9wZW5HTCBpbnN0ZWFkIG9mIEFOR0xFKVwiKSkpO3ZhciBxPWEuZ2V0UHJlY2lzaW9uKCk7bnVsbCE9PWQucHJlY2lzaW9uJiYocT1iLmdldE1heFByZWNpc2lvbihkLnByZWNpc2lvbikscSE9PVxuZC5wcmVjaXNpb24mJmNvbnNvbGUud2FybihcIlRIUkVFLldlYkdMUHJvZ3JhbS5nZXRQYXJhbWV0ZXJzOlwiLGQucHJlY2lzaW9uLFwibm90IHN1cHBvcnRlZCwgdXNpbmdcIixxLFwiaW5zdGVhZC5cIikpO3ZhciByPWEuZ2V0Q3VycmVudFJlbmRlclRhcmdldCgpO3JldHVybntzaGFkZXJJRDpwLHByZWNpc2lvbjpxLHN1cHBvcnRzVmVydGV4VGV4dHVyZXM6Yi52ZXJ0ZXhUZXh0dXJlcyxvdXRwdXRFbmNvZGluZzpjKHI/ci50ZXh0dXJlOm51bGwsYS5nYW1tYU91dHB1dCksbWFwOiEhZC5tYXAsbWFwRW5jb2Rpbmc6YyhkLm1hcCxhLmdhbW1hSW5wdXQpLGVudk1hcDohIWQuZW52TWFwLGVudk1hcE1vZGU6ZC5lbnZNYXAmJmQuZW52TWFwLm1hcHBpbmcsZW52TWFwRW5jb2Rpbmc6YyhkLmVudk1hcCxhLmdhbW1hSW5wdXQpLGVudk1hcEN1YmVVVjohIWQuZW52TWFwJiYoZC5lbnZNYXAubWFwcGluZz09PVRIUkVFLkN1YmVVVlJlZmxlY3Rpb25NYXBwaW5nfHxkLmVudk1hcC5tYXBwaW5nPT09XG5USFJFRS5DdWJlVVZSZWZyYWN0aW9uTWFwcGluZyksbGlnaHRNYXA6ISFkLmxpZ2h0TWFwLGFvTWFwOiEhZC5hb01hcCxlbWlzc2l2ZU1hcDohIWQuZW1pc3NpdmVNYXAsZW1pc3NpdmVNYXBFbmNvZGluZzpjKGQuZW1pc3NpdmVNYXAsYS5nYW1tYUlucHV0KSxidW1wTWFwOiEhZC5idW1wTWFwLG5vcm1hbE1hcDohIWQubm9ybWFsTWFwLGRpc3BsYWNlbWVudE1hcDohIWQuZGlzcGxhY2VtZW50TWFwLHJvdWdobmVzc01hcDohIWQucm91Z2huZXNzTWFwLG1ldGFsbmVzc01hcDohIWQubWV0YWxuZXNzTWFwLHNwZWN1bGFyTWFwOiEhZC5zcGVjdWxhck1hcCxhbHBoYU1hcDohIWQuYWxwaGFNYXAsY29tYmluZTpkLmNvbWJpbmUsdmVydGV4Q29sb3JzOmQudmVydGV4Q29sb3JzLGZvZzohIWssdXNlRm9nOmQuZm9nLGZvZ0V4cDprIGluc3RhbmNlb2YgVEhSRUUuRm9nRXhwMixmbGF0U2hhZGluZzpkLnNoYWRpbmc9PT1USFJFRS5GbGF0U2hhZGluZyxzaXplQXR0ZW51YXRpb246ZC5zaXplQXR0ZW51YXRpb24sXG5sb2dhcml0aG1pY0RlcHRoQnVmZmVyOmIubG9nYXJpdGhtaWNEZXB0aEJ1ZmZlcixza2lubmluZzpkLnNraW5uaW5nLG1heEJvbmVzOm4sdXNlVmVydGV4VGV4dHVyZTpiLmZsb2F0VmVydGV4VGV4dHVyZXMmJm0mJm0uc2tlbGV0b24mJm0uc2tlbGV0b24udXNlVmVydGV4VGV4dHVyZSxtb3JwaFRhcmdldHM6ZC5tb3JwaFRhcmdldHMsbW9ycGhOb3JtYWxzOmQubW9ycGhOb3JtYWxzLG1heE1vcnBoVGFyZ2V0czphLm1heE1vcnBoVGFyZ2V0cyxtYXhNb3JwaE5vcm1hbHM6YS5tYXhNb3JwaE5vcm1hbHMsbnVtRGlyTGlnaHRzOmYuZGlyZWN0aW9uYWwubGVuZ3RoLG51bVBvaW50TGlnaHRzOmYucG9pbnQubGVuZ3RoLG51bVNwb3RMaWdodHM6Zi5zcG90Lmxlbmd0aCxudW1IZW1pTGlnaHRzOmYuaGVtaS5sZW5ndGgsbnVtQ2xpcHBpbmdQbGFuZXM6bCxzaGFkb3dNYXBFbmFibGVkOmEuc2hhZG93TWFwLmVuYWJsZWQmJm0ucmVjZWl2ZVNoYWRvdyYmMDxmLnNoYWRvd3MubGVuZ3RoLHNoYWRvd01hcFR5cGU6YS5zaGFkb3dNYXAudHlwZSxcbnRvbmVNYXBwaW5nOmEudG9uZU1hcHBpbmcscGh5c2ljYWxseUNvcnJlY3RMaWdodHM6YS5waHlzaWNhbGx5Q29ycmVjdExpZ2h0cyxwcmVtdWx0aXBsaWVkQWxwaGE6ZC5wcmVtdWx0aXBsaWVkQWxwaGEsYWxwaGFUZXN0OmQuYWxwaGFUZXN0LGRvdWJsZVNpZGVkOmQuc2lkZT09PVRIUkVFLkRvdWJsZVNpZGUsZmxpcFNpZGVkOmQuc2lkZT09PVRIUkVFLkJhY2tTaWRlLGRlcHRoUGFja2luZzp2b2lkIDAhPT1kLmRlcHRoUGFja2luZz9kLmRlcHRoUGFja2luZzohMX19O3RoaXMuZ2V0UHJvZ3JhbUNvZGU9ZnVuY3Rpb24oYSxiKXt2YXIgYz1bXTtiLnNoYWRlcklEP2MucHVzaChiLnNoYWRlcklEKTooYy5wdXNoKGEuZnJhZ21lbnRTaGFkZXIpLGMucHVzaChhLnZlcnRleFNoYWRlcikpO2lmKHZvaWQgMCE9PWEuZGVmaW5lcylmb3IodmFyIGQgaW4gYS5kZWZpbmVzKWMucHVzaChkKSxjLnB1c2goYS5kZWZpbmVzW2RdKTtmb3IoZD0wO2Q8Zi5sZW5ndGg7ZCsrKWMucHVzaChiW2ZbZF1dKTtcbnJldHVybiBjLmpvaW4oKX07dGhpcy5hY3F1aXJlUHJvZ3JhbT1mdW5jdGlvbihiLGMsZSl7Zm9yKHZhciBmLG09MCxwPWQubGVuZ3RoO208cDttKyspe3ZhciBuPWRbbV07aWYobi5jb2RlPT09ZSl7Zj1uOysrZi51c2VkVGltZXM7YnJlYWt9fXZvaWQgMD09PWYmJihmPW5ldyBUSFJFRS5XZWJHTFByb2dyYW0oYSxlLGIsYyksZC5wdXNoKGYpKTtyZXR1cm4gZn07dGhpcy5yZWxlYXNlUHJvZ3JhbT1mdW5jdGlvbihhKXtpZigwPT09LS1hLnVzZWRUaW1lcyl7dmFyIGI9ZC5pbmRleE9mKGEpO2RbYl09ZFtkLmxlbmd0aC0xXTtkLnBvcCgpO2EuZGVzdHJveSgpfX07dGhpcy5wcm9ncmFtcz1kfTtcblRIUkVFLldlYkdMUHJvcGVydGllcz1mdW5jdGlvbigpe3ZhciBhPXt9O3RoaXMuZ2V0PWZ1bmN0aW9uKGIpe2I9Yi51dWlkO3ZhciBjPWFbYl07dm9pZCAwPT09YyYmKGM9e30sYVtiXT1jKTtyZXR1cm4gY307dGhpcy5kZWxldGU9ZnVuY3Rpb24oYil7ZGVsZXRlIGFbYi51dWlkXX07dGhpcy5jbGVhcj1mdW5jdGlvbigpe2E9e319fTtcblRIUkVFLldlYkdMU2hhZGVyPWZ1bmN0aW9uKCl7ZnVuY3Rpb24gYShhKXthPWEuc3BsaXQoXCJcXG5cIik7Zm9yKHZhciBjPTA7YzxhLmxlbmd0aDtjKyspYVtjXT1jKzErXCI6IFwiK2FbY107cmV0dXJuIGEuam9pbihcIlxcblwiKX1yZXR1cm4gZnVuY3Rpb24oYixjLGQpe3ZhciBlPWIuY3JlYXRlU2hhZGVyKGMpO2Iuc2hhZGVyU291cmNlKGUsZCk7Yi5jb21waWxlU2hhZGVyKGUpOyExPT09Yi5nZXRTaGFkZXJQYXJhbWV0ZXIoZSxiLkNPTVBJTEVfU1RBVFVTKSYmY29uc29sZS5lcnJvcihcIlRIUkVFLldlYkdMU2hhZGVyOiBTaGFkZXIgY291bGRuJ3QgY29tcGlsZS5cIik7XCJcIiE9PWIuZ2V0U2hhZGVySW5mb0xvZyhlKSYmY29uc29sZS53YXJuKFwiVEhSRUUuV2ViR0xTaGFkZXI6IGdsLmdldFNoYWRlckluZm9Mb2coKVwiLGM9PT1iLlZFUlRFWF9TSEFERVI/XCJ2ZXJ0ZXhcIjpcImZyYWdtZW50XCIsYi5nZXRTaGFkZXJJbmZvTG9nKGUpLGEoZCkpO3JldHVybiBlfX0oKTtcblRIUkVFLldlYkdMU2hhZG93TWFwPWZ1bmN0aW9uKGEsYixjLGQpe2Z1bmN0aW9uIGUoYixjLGQsZSl7dmFyIGY9Yi5nZW9tZXRyeSxnPW51bGwsZz12LGg9Yi5jdXN0b21EZXB0aE1hdGVyaWFsO2QmJihnPXQsaD1iLmN1c3RvbURpc3RhbmNlTWF0ZXJpYWwpO2g/Zz1oOihoPSExLGMubW9ycGhUYXJnZXRzJiYoZiBpbnN0YW5jZW9mIFRIUkVFLkJ1ZmZlckdlb21ldHJ5P2g9Zi5tb3JwaEF0dHJpYnV0ZXMmJmYubW9ycGhBdHRyaWJ1dGVzLnBvc2l0aW9uJiYwPGYubW9ycGhBdHRyaWJ1dGVzLnBvc2l0aW9uLmxlbmd0aDpmIGluc3RhbmNlb2YgVEhSRUUuR2VvbWV0cnkmJihoPWYubW9ycGhUYXJnZXRzJiYwPGYubW9ycGhUYXJnZXRzLmxlbmd0aCkpLGI9YiBpbnN0YW5jZW9mIFRIUkVFLlNraW5uZWRNZXNoJiZjLnNraW5uaW5nLGY9MCxoJiYoZnw9MSksYiYmKGZ8PTIpLGc9Z1tmXSk7YS5sb2NhbENsaXBwaW5nRW5hYmxlZCYmITA9PT1jLmNsaXBTaGFkb3dzJiYwIT09Yy5jbGlwcGluZ1BsYW5lcy5sZW5ndGgmJlxuKGg9Zy51dWlkLGI9Yy51dWlkLGY9dVtoXSx2b2lkIDA9PT1mJiYoZj17fSx1W2hdPWYpLGg9ZltiXSx2b2lkIDA9PT1oJiYoaD1nLmNsb25lKCksZltiXT1oKSxnPWgpO2cudmlzaWJsZT1jLnZpc2libGU7Zy53aXJlZnJhbWU9Yy53aXJlZnJhbWU7Yj1jLnNpZGU7Ri5yZW5kZXJTaW5nbGVTaWRlZCYmYj09VEhSRUUuRG91YmxlU2lkZSYmKGI9VEhSRUUuRnJvbnRTaWRlKTtGLnJlbmRlclJldmVyc2VTaWRlZCYmKGI9PT1USFJFRS5Gcm9udFNpZGU/Yj1USFJFRS5CYWNrU2lkZTpiPT09VEhSRUUuQmFja1NpZGUmJihiPVRIUkVFLkZyb250U2lkZSkpO2cuc2lkZT1iO2cuY2xpcFNoYWRvd3M9Yy5jbGlwU2hhZG93cztnLmNsaXBwaW5nUGxhbmVzPWMuY2xpcHBpbmdQbGFuZXM7Zy53aXJlZnJhbWVMaW5ld2lkdGg9Yy53aXJlZnJhbWVMaW5ld2lkdGg7Zy5saW5ld2lkdGg9Yy5saW5ld2lkdGg7ZCYmdm9pZCAwIT09Zy51bmlmb3Jtcy5saWdodFBvcyYmZy51bmlmb3Jtcy5saWdodFBvcy52YWx1ZS5jb3B5KGUpO1xucmV0dXJuIGd9ZnVuY3Rpb24gZihhLGIsYyl7aWYoITEhPT1hLnZpc2libGUpe2EubGF5ZXJzLnRlc3QoYi5sYXllcnMpJiYoYSBpbnN0YW5jZW9mIFRIUkVFLk1lc2h8fGEgaW5zdGFuY2VvZiBUSFJFRS5MaW5lfHxhIGluc3RhbmNlb2YgVEhSRUUuUG9pbnRzKSYmYS5jYXN0U2hhZG93JiYoITE9PT1hLmZydXN0dW1DdWxsZWR8fCEwPT09ay5pbnRlcnNlY3RzT2JqZWN0KGEpKSYmITA9PT1hLm1hdGVyaWFsLnZpc2libGUmJihhLm1vZGVsVmlld01hdHJpeC5tdWx0aXBseU1hdHJpY2VzKGMubWF0cml4V29ybGRJbnZlcnNlLGEubWF0cml4V29ybGQpLHMucHVzaChhKSk7YT1hLmNoaWxkcmVuO2Zvcih2YXIgZD0wLGU9YS5sZW5ndGg7ZDxlO2QrKylmKGFbZF0sYixjKX19dmFyIGc9YS5jb250ZXh0LGg9YS5zdGF0ZSxrPW5ldyBUSFJFRS5GcnVzdHVtLGw9bmV3IFRIUkVFLk1hdHJpeDQsbT1iLnNoYWRvd3MscD1uZXcgVEhSRUUuVmVjdG9yMixuPW5ldyBUSFJFRS5WZWN0b3IyKGQubWF4VGV4dHVyZVNpemUsXG5kLm1heFRleHR1cmVTaXplKSxxPW5ldyBUSFJFRS5WZWN0b3IzLHI9bmV3IFRIUkVFLlZlY3RvcjMscz1bXSx2PUFycmF5KDQpLHQ9QXJyYXkoNCksdT17fSxEPVtuZXcgVEhSRUUuVmVjdG9yMygxLDAsMCksbmV3IFRIUkVFLlZlY3RvcjMoLTEsMCwwKSxuZXcgVEhSRUUuVmVjdG9yMygwLDAsMSksbmV3IFRIUkVFLlZlY3RvcjMoMCwwLC0xKSxuZXcgVEhSRUUuVmVjdG9yMygwLDEsMCksbmV3IFRIUkVFLlZlY3RvcjMoMCwtMSwwKV0sdz1bbmV3IFRIUkVFLlZlY3RvcjMoMCwxLDApLG5ldyBUSFJFRS5WZWN0b3IzKDAsMSwwKSxuZXcgVEhSRUUuVmVjdG9yMygwLDEsMCksbmV3IFRIUkVFLlZlY3RvcjMoMCwxLDApLG5ldyBUSFJFRS5WZWN0b3IzKDAsMCwxKSxuZXcgVEhSRUUuVmVjdG9yMygwLDAsLTEpXSxJPVtuZXcgVEhSRUUuVmVjdG9yNCxuZXcgVEhSRUUuVmVjdG9yNCxuZXcgVEhSRUUuVmVjdG9yNCxuZXcgVEhSRUUuVmVjdG9yNCxuZXcgVEhSRUUuVmVjdG9yNCxuZXcgVEhSRUUuVmVjdG9yNF07XG5iPW5ldyBUSFJFRS5NZXNoRGVwdGhNYXRlcmlhbDtiLmRlcHRoUGFja2luZz1USFJFRS5SR0JBRGVwdGhQYWNraW5nO2IuY2xpcHBpbmc9ITA7ZD1USFJFRS5TaGFkZXJMaWIuZGlzdGFuY2VSR0JBO2Zvcih2YXIgej1USFJFRS5Vbmlmb3Jtc1V0aWxzLmNsb25lKGQudW5pZm9ybXMpLHk9MDs0IT09eTsrK3kpe3ZhciBBPTAhPT0oeSYxKSxHPTAhPT0oeSYyKSxCPWIuY2xvbmUoKTtCLm1vcnBoVGFyZ2V0cz1BO0Iuc2tpbm5pbmc9Rzt2W3ldPUI7QT1uZXcgVEhSRUUuU2hhZGVyTWF0ZXJpYWwoe2RlZmluZXM6e1VTRV9TSEFET1dNQVA6XCJcIn0sdW5pZm9ybXM6eix2ZXJ0ZXhTaGFkZXI6ZC52ZXJ0ZXhTaGFkZXIsZnJhZ21lbnRTaGFkZXI6ZC5mcmFnbWVudFNoYWRlcixtb3JwaFRhcmdldHM6QSxza2lubmluZzpHLGNsaXBwaW5nOiEwfSk7dFt5XT1BfXZhciBGPXRoaXM7dGhpcy5lbmFibGVkPSExO3RoaXMuYXV0b1VwZGF0ZT0hMDt0aGlzLm5lZWRzVXBkYXRlPSExO3RoaXMudHlwZT1cblRIUkVFLlBDRlNoYWRvd01hcDt0aGlzLnJlbmRlclNpbmdsZVNpZGVkPXRoaXMucmVuZGVyUmV2ZXJzZVNpZGVkPSEwO3RoaXMucmVuZGVyPWZ1bmN0aW9uKGIsZCl7aWYoITEhPT1GLmVuYWJsZWQmJighMSE9PUYuYXV0b1VwZGF0ZXx8ITEhPT1GLm5lZWRzVXBkYXRlKSYmMCE9PW0ubGVuZ3RoKXtoLmNsZWFyQ29sb3IoMSwxLDEsMSk7aC5kaXNhYmxlKGcuQkxFTkQpO2guc2V0RGVwdGhUZXN0KCEwKTtoLnNldFNjaXNzb3JUZXN0KCExKTtmb3IodmFyIHUsdCx2PTAseT1tLmxlbmd0aDt2PHk7disrKXt2YXIgej1tW3ZdLEE9ei5zaGFkb3c7aWYodm9pZCAwPT09QSljb25zb2xlLndhcm4oXCJUSFJFRS5XZWJHTFNoYWRvd01hcDpcIix6LFwiaGFzIG5vIHNoYWRvdy5cIik7ZWxzZXt2YXIgQz1BLmNhbWVyYTtwLmNvcHkoQS5tYXBTaXplKTtwLm1pbihuKTtpZih6IGluc3RhbmNlb2YgVEhSRUUuUG9pbnRMaWdodCl7dT02O3Q9ITA7dmFyIEw9cC54LEU9cC55O0lbMF0uc2V0KDIqTCxFLEwsXG5FKTtJWzFdLnNldCgwLEUsTCxFKTtJWzJdLnNldCgzKkwsRSxMLEUpO0lbM10uc2V0KEwsRSxMLEUpO0lbNF0uc2V0KDMqTCwwLEwsRSk7SVs1XS5zZXQoTCwwLEwsRSk7cC54Kj00O3AueSo9Mn1lbHNlIHU9MSx0PSExO251bGw9PT1BLm1hcCYmKEEubWFwPW5ldyBUSFJFRS5XZWJHTFJlbmRlclRhcmdldChwLngscC55LHttaW5GaWx0ZXI6VEhSRUUuTmVhcmVzdEZpbHRlcixtYWdGaWx0ZXI6VEhSRUUuTmVhcmVzdEZpbHRlcixmb3JtYXQ6VEhSRUUuUkdCQUZvcm1hdH0pLEMudXBkYXRlUHJvamVjdGlvbk1hdHJpeCgpKTtBIGluc3RhbmNlb2YgVEhSRUUuU3BvdExpZ2h0U2hhZG93JiZBLnVwZGF0ZSh6KTtMPUEubWFwO0E9QS5tYXRyaXg7ci5zZXRGcm9tTWF0cml4UG9zaXRpb24oei5tYXRyaXhXb3JsZCk7Qy5wb3NpdGlvbi5jb3B5KHIpO2Euc2V0UmVuZGVyVGFyZ2V0KEwpO2EuY2xlYXIoKTtmb3IoTD0wO0w8dTtMKyspe3Q/KHEuY29weShDLnBvc2l0aW9uKSxxLmFkZChEW0xdKSxcbkMudXAuY29weSh3W0xdKSxDLmxvb2tBdChxKSxoLnZpZXdwb3J0KElbTF0pKToocS5zZXRGcm9tTWF0cml4UG9zaXRpb24oei50YXJnZXQubWF0cml4V29ybGQpLEMubG9va0F0KHEpKTtDLnVwZGF0ZU1hdHJpeFdvcmxkKCk7Qy5tYXRyaXhXb3JsZEludmVyc2UuZ2V0SW52ZXJzZShDLm1hdHJpeFdvcmxkKTtBLnNldCguNSwwLDAsLjUsMCwuNSwwLC41LDAsMCwuNSwuNSwwLDAsMCwxKTtBLm11bHRpcGx5KEMucHJvamVjdGlvbk1hdHJpeCk7QS5tdWx0aXBseShDLm1hdHJpeFdvcmxkSW52ZXJzZSk7bC5tdWx0aXBseU1hdHJpY2VzKEMucHJvamVjdGlvbk1hdHJpeCxDLm1hdHJpeFdvcmxkSW52ZXJzZSk7ay5zZXRGcm9tTWF0cml4KGwpO3MubGVuZ3RoPTA7ZihiLGQsQyk7Zm9yKHZhciBFPTAsQj1zLmxlbmd0aDtFPEI7RSsrKXt2YXIgRz1zW0VdLFg9Yy51cGRhdGUoRyksZWE9Ry5tYXRlcmlhbDtpZihlYSBpbnN0YW5jZW9mIFRIUkVFLk11bHRpTWF0ZXJpYWwpZm9yKHZhciBmYT1cblguZ3JvdXBzLGVhPWVhLm1hdGVyaWFscyxnYT0wLFY9ZmEubGVuZ3RoO2dhPFY7Z2ErKyl7dmFyIGJhPWZhW2dhXSxhYT1lYVtiYS5tYXRlcmlhbEluZGV4XTshMD09PWFhLnZpc2libGUmJihhYT1lKEcsYWEsdCxyKSxhLnJlbmRlckJ1ZmZlckRpcmVjdChDLG51bGwsWCxhYSxHLGJhKSl9ZWxzZSBhYT1lKEcsZWEsdCxyKSxhLnJlbmRlckJ1ZmZlckRpcmVjdChDLG51bGwsWCxhYSxHLG51bGwpfX19fXU9YS5nZXRDbGVhckNvbG9yKCk7dD1hLmdldENsZWFyQWxwaGEoKTthLnNldENsZWFyQ29sb3IodSx0KTtGLm5lZWRzVXBkYXRlPSExfX19O1xuVEhSRUUuV2ViR0xTdGF0ZT1mdW5jdGlvbihhLGIsYyl7ZnVuY3Rpb24gZChiLGMsZCl7dmFyIGU9bmV3IFVpbnQ4QXJyYXkoNCksZj1hLmNyZWF0ZVRleHR1cmUoKTthLmJpbmRUZXh0dXJlKGIsZik7YS50ZXhQYXJhbWV0ZXJpKGIsYS5URVhUVVJFX01JTl9GSUxURVIsYS5ORUFSRVNUKTthLnRleFBhcmFtZXRlcmkoYixhLlRFWFRVUkVfTUFHX0ZJTFRFUixhLk5FQVJFU1QpO2ZvcihiPTA7YjxkO2IrKylhLnRleEltYWdlMkQoYytiLDAsYS5SR0JBLDEsMSwwLGEuUkdCQSxhLlVOU0lHTkVEX0JZVEUsZSk7cmV0dXJuIGZ9dmFyIGU9dGhpczt0aGlzLmJ1ZmZlcnM9e2NvbG9yOm5ldyBUSFJFRS5XZWJHTENvbG9yQnVmZmVyKGEsdGhpcyksZGVwdGg6bmV3IFRIUkVFLldlYkdMRGVwdGhCdWZmZXIoYSx0aGlzKSxzdGVuY2lsOm5ldyBUSFJFRS5XZWJHTFN0ZW5jaWxCdWZmZXIoYSx0aGlzKX07dmFyIGY9YS5nZXRQYXJhbWV0ZXIoYS5NQVhfVkVSVEVYX0FUVFJJQlMpLGc9bmV3IFVpbnQ4QXJyYXkoZiksXG5oPW5ldyBVaW50OEFycmF5KGYpLGs9bmV3IFVpbnQ4QXJyYXkoZiksbD17fSxtPW51bGwscD1udWxsLG49bnVsbCxxPW51bGwscj1udWxsLHM9bnVsbCx2PW51bGwsdD1udWxsLHU9ITEsRD1udWxsLHc9bnVsbCxJPW51bGwsej1udWxsLHk9bnVsbCxBPW51bGwsRz1hLmdldFBhcmFtZXRlcihhLk1BWF9URVhUVVJFX0lNQUdFX1VOSVRTKSxCPW51bGwsRj17fSxKPW5ldyBUSFJFRS5WZWN0b3I0LFA9bmV3IFRIUkVFLlZlY3RvcjQsSz17fTtLW2EuVEVYVFVSRV8yRF09ZChhLlRFWFRVUkVfMkQsYS5URVhUVVJFXzJELDEpO0tbYS5URVhUVVJFX0NVQkVfTUFQXT1kKGEuVEVYVFVSRV9DVUJFX01BUCxhLlRFWFRVUkVfQ1VCRV9NQVBfUE9TSVRJVkVfWCw2KTt0aGlzLmluaXQ9ZnVuY3Rpb24oKXt0aGlzLmNsZWFyQ29sb3IoMCwwLDAsMSk7dGhpcy5jbGVhckRlcHRoKDEpO3RoaXMuY2xlYXJTdGVuY2lsKDApO3RoaXMuZW5hYmxlKGEuREVQVEhfVEVTVCk7dGhpcy5zZXREZXB0aEZ1bmMoVEhSRUUuTGVzc0VxdWFsRGVwdGgpO1xudGhpcy5zZXRGbGlwU2lkZWQoITEpO3RoaXMuc2V0Q3VsbEZhY2UoVEhSRUUuQ3VsbEZhY2VCYWNrKTt0aGlzLmVuYWJsZShhLkNVTExfRkFDRSk7dGhpcy5lbmFibGUoYS5CTEVORCk7dGhpcy5zZXRCbGVuZGluZyhUSFJFRS5Ob3JtYWxCbGVuZGluZyl9O3RoaXMuaW5pdEF0dHJpYnV0ZXM9ZnVuY3Rpb24oKXtmb3IodmFyIGE9MCxiPWcubGVuZ3RoO2E8YjthKyspZ1thXT0wfTt0aGlzLmVuYWJsZUF0dHJpYnV0ZT1mdW5jdGlvbihjKXtnW2NdPTE7MD09PWhbY10mJihhLmVuYWJsZVZlcnRleEF0dHJpYkFycmF5KGMpLGhbY109MSk7MCE9PWtbY10mJihiLmdldChcIkFOR0xFX2luc3RhbmNlZF9hcnJheXNcIikudmVydGV4QXR0cmliRGl2aXNvckFOR0xFKGMsMCksa1tjXT0wKX07dGhpcy5lbmFibGVBdHRyaWJ1dGVBbmREaXZpc29yPWZ1bmN0aW9uKGIsYyxkKXtnW2JdPTE7MD09PWhbYl0mJihhLmVuYWJsZVZlcnRleEF0dHJpYkFycmF5KGIpLGhbYl09MSk7a1tiXSE9PWMmJihkLnZlcnRleEF0dHJpYkRpdmlzb3JBTkdMRShiLFxuYyksa1tiXT1jKX07dGhpcy5kaXNhYmxlVW51c2VkQXR0cmlidXRlcz1mdW5jdGlvbigpe2Zvcih2YXIgYj0wLGM9aC5sZW5ndGg7YiE9PWM7KytiKWhbYl0hPT1nW2JdJiYoYS5kaXNhYmxlVmVydGV4QXR0cmliQXJyYXkoYiksaFtiXT0wKX07dGhpcy5lbmFibGU9ZnVuY3Rpb24oYil7ITAhPT1sW2JdJiYoYS5lbmFibGUoYiksbFtiXT0hMCl9O3RoaXMuZGlzYWJsZT1mdW5jdGlvbihiKXshMSE9PWxbYl0mJihhLmRpc2FibGUoYiksbFtiXT0hMSl9O3RoaXMuZ2V0Q29tcHJlc3NlZFRleHR1cmVGb3JtYXRzPWZ1bmN0aW9uKCl7aWYobnVsbD09PW0mJihtPVtdLGIuZ2V0KFwiV0VCR0xfY29tcHJlc3NlZF90ZXh0dXJlX3B2cnRjXCIpfHxiLmdldChcIldFQkdMX2NvbXByZXNzZWRfdGV4dHVyZV9zM3RjXCIpfHxiLmdldChcIldFQkdMX2NvbXByZXNzZWRfdGV4dHVyZV9ldGMxXCIpKSlmb3IodmFyIGM9YS5nZXRQYXJhbWV0ZXIoYS5DT01QUkVTU0VEX1RFWFRVUkVfRk9STUFUUyksZD0wO2Q8XG5jLmxlbmd0aDtkKyspbS5wdXNoKGNbZF0pO3JldHVybiBtfTt0aGlzLnNldEJsZW5kaW5nPWZ1bmN0aW9uKGIsZCxlLGYsZyxoLGssbCl7aWYoYiE9PVRIUkVFLk5vQmxlbmRpbmcpe3RoaXMuZW5hYmxlKGEuQkxFTkQpO2lmKGIhPT1wfHxsIT09dSliPT09VEhSRUUuQWRkaXRpdmVCbGVuZGluZz9sPyhhLmJsZW5kRXF1YXRpb25TZXBhcmF0ZShhLkZVTkNfQURELGEuRlVOQ19BREQpLGEuYmxlbmRGdW5jU2VwYXJhdGUoYS5PTkUsYS5PTkUsYS5PTkUsYS5PTkUpKTooYS5ibGVuZEVxdWF0aW9uKGEuRlVOQ19BREQpLGEuYmxlbmRGdW5jKGEuU1JDX0FMUEhBLGEuT05FKSk6Yj09PVRIUkVFLlN1YnRyYWN0aXZlQmxlbmRpbmc/bD8oYS5ibGVuZEVxdWF0aW9uU2VwYXJhdGUoYS5GVU5DX0FERCxhLkZVTkNfQUREKSxhLmJsZW5kRnVuY1NlcGFyYXRlKGEuWkVSTyxhLlpFUk8sYS5PTkVfTUlOVVNfU1JDX0NPTE9SLGEuT05FX01JTlVTX1NSQ19BTFBIQSkpOihhLmJsZW5kRXF1YXRpb24oYS5GVU5DX0FERCksXG5hLmJsZW5kRnVuYyhhLlpFUk8sYS5PTkVfTUlOVVNfU1JDX0NPTE9SKSk6Yj09PVRIUkVFLk11bHRpcGx5QmxlbmRpbmc/bD8oYS5ibGVuZEVxdWF0aW9uU2VwYXJhdGUoYS5GVU5DX0FERCxhLkZVTkNfQUREKSxhLmJsZW5kRnVuY1NlcGFyYXRlKGEuWkVSTyxhLlNSQ19DT0xPUixhLlpFUk8sYS5TUkNfQUxQSEEpKTooYS5ibGVuZEVxdWF0aW9uKGEuRlVOQ19BREQpLGEuYmxlbmRGdW5jKGEuWkVSTyxhLlNSQ19DT0xPUikpOmw/KGEuYmxlbmRFcXVhdGlvblNlcGFyYXRlKGEuRlVOQ19BREQsYS5GVU5DX0FERCksYS5ibGVuZEZ1bmNTZXBhcmF0ZShhLk9ORSxhLk9ORV9NSU5VU19TUkNfQUxQSEEsYS5PTkUsYS5PTkVfTUlOVVNfU1JDX0FMUEhBKSk6KGEuYmxlbmRFcXVhdGlvblNlcGFyYXRlKGEuRlVOQ19BREQsYS5GVU5DX0FERCksYS5ibGVuZEZ1bmNTZXBhcmF0ZShhLlNSQ19BTFBIQSxhLk9ORV9NSU5VU19TUkNfQUxQSEEsYS5PTkUsYS5PTkVfTUlOVVNfU1JDX0FMUEhBKSksXG5wPWIsdT1sO2lmKGI9PT1USFJFRS5DdXN0b21CbGVuZGluZyl7Zz1nfHxkO2g9aHx8ZTtrPWt8fGY7aWYoZCE9PW58fGchPT1zKWEuYmxlbmRFcXVhdGlvblNlcGFyYXRlKGMoZCksYyhnKSksbj1kLHM9ZztpZihlIT09cXx8ZiE9PXJ8fGghPT12fHxrIT09dClhLmJsZW5kRnVuY1NlcGFyYXRlKGMoZSksYyhmKSxjKGgpLGMoaykpLHE9ZSxyPWYsdj1oLHQ9a31lbHNlIHQ9dj1zPXI9cT1uPW51bGx9ZWxzZSB0aGlzLmRpc2FibGUoYS5CTEVORCkscD1ifTt0aGlzLnNldENvbG9yV3JpdGU9ZnVuY3Rpb24oYSl7dGhpcy5idWZmZXJzLmNvbG9yLnNldE1hc2soYSl9O3RoaXMuc2V0RGVwdGhUZXN0PWZ1bmN0aW9uKGEpe3RoaXMuYnVmZmVycy5kZXB0aC5zZXRUZXN0KGEpfTt0aGlzLnNldERlcHRoV3JpdGU9ZnVuY3Rpb24oYSl7dGhpcy5idWZmZXJzLmRlcHRoLnNldE1hc2soYSl9O3RoaXMuc2V0RGVwdGhGdW5jPWZ1bmN0aW9uKGEpe3RoaXMuYnVmZmVycy5kZXB0aC5zZXRGdW5jKGEpfTtcbnRoaXMuc2V0U3RlbmNpbFRlc3Q9ZnVuY3Rpb24oYSl7dGhpcy5idWZmZXJzLnN0ZW5jaWwuc2V0VGVzdChhKX07dGhpcy5zZXRTdGVuY2lsV3JpdGU9ZnVuY3Rpb24oYSl7dGhpcy5idWZmZXJzLnN0ZW5jaWwuc2V0TWFzayhhKX07dGhpcy5zZXRTdGVuY2lsRnVuYz1mdW5jdGlvbihhLGIsYyl7dGhpcy5idWZmZXJzLnN0ZW5jaWwuc2V0RnVuYyhhLGIsYyl9O3RoaXMuc2V0U3RlbmNpbE9wPWZ1bmN0aW9uKGEsYixjKXt0aGlzLmJ1ZmZlcnMuc3RlbmNpbC5zZXRPcChhLGIsYyl9O3RoaXMuc2V0RmxpcFNpZGVkPWZ1bmN0aW9uKGIpe0QhPT1iJiYoYj9hLmZyb250RmFjZShhLkNXKTphLmZyb250RmFjZShhLkNDVyksRD1iKX07dGhpcy5zZXRDdWxsRmFjZT1mdW5jdGlvbihiKXtiIT09VEhSRUUuQ3VsbEZhY2VOb25lPyh0aGlzLmVuYWJsZShhLkNVTExfRkFDRSksYiE9PXcmJihiPT09VEhSRUUuQ3VsbEZhY2VCYWNrP2EuY3VsbEZhY2UoYS5CQUNLKTpiPT09VEhSRUUuQ3VsbEZhY2VGcm9udD9cbmEuY3VsbEZhY2UoYS5GUk9OVCk6YS5jdWxsRmFjZShhLkZST05UX0FORF9CQUNLKSkpOnRoaXMuZGlzYWJsZShhLkNVTExfRkFDRSk7dz1ifTt0aGlzLnNldExpbmVXaWR0aD1mdW5jdGlvbihiKXtiIT09SSYmKGEubGluZVdpZHRoKGIpLEk9Yil9O3RoaXMuc2V0UG9seWdvbk9mZnNldD1mdW5jdGlvbihiLGMsZCl7aWYoYil7aWYodGhpcy5lbmFibGUoYS5QT0xZR09OX09GRlNFVF9GSUxMKSx6IT09Y3x8eSE9PWQpYS5wb2x5Z29uT2Zmc2V0KGMsZCksej1jLHk9ZH1lbHNlIHRoaXMuZGlzYWJsZShhLlBPTFlHT05fT0ZGU0VUX0ZJTEwpfTt0aGlzLmdldFNjaXNzb3JUZXN0PWZ1bmN0aW9uKCl7cmV0dXJuIEF9O3RoaXMuc2V0U2Npc3NvclRlc3Q9ZnVuY3Rpb24oYil7KEE9Yik/dGhpcy5lbmFibGUoYS5TQ0lTU09SX1RFU1QpOnRoaXMuZGlzYWJsZShhLlNDSVNTT1JfVEVTVCl9O3RoaXMuYWN0aXZlVGV4dHVyZT1mdW5jdGlvbihiKXt2b2lkIDA9PT1iJiYoYj1hLlRFWFRVUkUwK1xuRy0xKTtCIT09YiYmKGEuYWN0aXZlVGV4dHVyZShiKSxCPWIpfTt0aGlzLmJpbmRUZXh0dXJlPWZ1bmN0aW9uKGIsYyl7bnVsbD09PUImJmUuYWN0aXZlVGV4dHVyZSgpO3ZhciBkPUZbQl07dm9pZCAwPT09ZCYmKGQ9e3R5cGU6dm9pZCAwLHRleHR1cmU6dm9pZCAwfSxGW0JdPWQpO2lmKGQudHlwZSE9PWJ8fGQudGV4dHVyZSE9PWMpYS5iaW5kVGV4dHVyZShiLGN8fEtbYl0pLGQudHlwZT1iLGQudGV4dHVyZT1jfTt0aGlzLmNvbXByZXNzZWRUZXhJbWFnZTJEPWZ1bmN0aW9uKCl7dHJ5e2EuY29tcHJlc3NlZFRleEltYWdlMkQuYXBwbHkoYSxhcmd1bWVudHMpfWNhdGNoKGIpe2NvbnNvbGUuZXJyb3IoYil9fTt0aGlzLnRleEltYWdlMkQ9ZnVuY3Rpb24oKXt0cnl7YS50ZXhJbWFnZTJELmFwcGx5KGEsYXJndW1lbnRzKX1jYXRjaChiKXtjb25zb2xlLmVycm9yKGIpfX07dGhpcy5jbGVhckNvbG9yPWZ1bmN0aW9uKGEsYixjLGQpe3RoaXMuYnVmZmVycy5jb2xvci5zZXRDbGVhcihhLFxuYixjLGQpfTt0aGlzLmNsZWFyRGVwdGg9ZnVuY3Rpb24oYSl7dGhpcy5idWZmZXJzLmRlcHRoLnNldENsZWFyKGEpfTt0aGlzLmNsZWFyU3RlbmNpbD1mdW5jdGlvbihhKXt0aGlzLmJ1ZmZlcnMuc3RlbmNpbC5zZXRDbGVhcihhKX07dGhpcy5zY2lzc29yPWZ1bmN0aW9uKGIpeyExPT09Si5lcXVhbHMoYikmJihhLnNjaXNzb3IoYi54LGIueSxiLnosYi53KSxKLmNvcHkoYikpfTt0aGlzLnZpZXdwb3J0PWZ1bmN0aW9uKGIpeyExPT09UC5lcXVhbHMoYikmJihhLnZpZXdwb3J0KGIueCxiLnksYi56LGIudyksUC5jb3B5KGIpKX07dGhpcy5yZXNldD1mdW5jdGlvbigpe2Zvcih2YXIgYj0wO2I8aC5sZW5ndGg7YisrKTE9PT1oW2JdJiYoYS5kaXNhYmxlVmVydGV4QXR0cmliQXJyYXkoYiksaFtiXT0wKTtsPXt9O0I9bT1udWxsO0Y9e307dz1EPXA9bnVsbDt0aGlzLmJ1ZmZlcnMuY29sb3IucmVzZXQoKTt0aGlzLmJ1ZmZlcnMuZGVwdGgucmVzZXQoKTt0aGlzLmJ1ZmZlcnMuc3RlbmNpbC5yZXNldCgpfX07XG5USFJFRS5XZWJHTENvbG9yQnVmZmVyPWZ1bmN0aW9uKGEsYil7dmFyIGM9ITEsZD1uZXcgVEhSRUUuVmVjdG9yNCxlPW51bGwsZj1uZXcgVEhSRUUuVmVjdG9yNDt0aGlzLnNldE1hc2s9ZnVuY3Rpb24oYil7ZT09PWJ8fGN8fChhLmNvbG9yTWFzayhiLGIsYixiKSxlPWIpfTt0aGlzLnNldExvY2tlZD1mdW5jdGlvbihhKXtjPWF9O3RoaXMuc2V0Q2xlYXI9ZnVuY3Rpb24oYixjLGUsbCl7ZC5zZXQoYixjLGUsbCk7ITE9PT1mLmVxdWFscyhkKSYmKGEuY2xlYXJDb2xvcihiLGMsZSxsKSxmLmNvcHkoZCkpfTt0aGlzLnJlc2V0PWZ1bmN0aW9uKCl7Yz0hMTtlPW51bGw7Zj1uZXcgVEhSRUUuVmVjdG9yNH19O1xuVEhSRUUuV2ViR0xEZXB0aEJ1ZmZlcj1mdW5jdGlvbihhLGIpe3ZhciBjPSExLGQ9bnVsbCxlPW51bGwsZj1udWxsO3RoaXMuc2V0VGVzdD1mdW5jdGlvbihjKXtjP2IuZW5hYmxlKGEuREVQVEhfVEVTVCk6Yi5kaXNhYmxlKGEuREVQVEhfVEVTVCl9O3RoaXMuc2V0TWFzaz1mdW5jdGlvbihiKXtkPT09Ynx8Y3x8KGEuZGVwdGhNYXNrKGIpLGQ9Yil9O3RoaXMuc2V0RnVuYz1mdW5jdGlvbihiKXtpZihlIT09Yil7aWYoYilzd2l0Y2goYil7Y2FzZSBUSFJFRS5OZXZlckRlcHRoOmEuZGVwdGhGdW5jKGEuTkVWRVIpO2JyZWFrO2Nhc2UgVEhSRUUuQWx3YXlzRGVwdGg6YS5kZXB0aEZ1bmMoYS5BTFdBWVMpO2JyZWFrO2Nhc2UgVEhSRUUuTGVzc0RlcHRoOmEuZGVwdGhGdW5jKGEuTEVTUyk7YnJlYWs7Y2FzZSBUSFJFRS5MZXNzRXF1YWxEZXB0aDphLmRlcHRoRnVuYyhhLkxFUVVBTCk7YnJlYWs7Y2FzZSBUSFJFRS5FcXVhbERlcHRoOmEuZGVwdGhGdW5jKGEuRVFVQUwpO2JyZWFrO2Nhc2UgVEhSRUUuR3JlYXRlckVxdWFsRGVwdGg6YS5kZXB0aEZ1bmMoYS5HRVFVQUwpO1xuYnJlYWs7Y2FzZSBUSFJFRS5HcmVhdGVyRGVwdGg6YS5kZXB0aEZ1bmMoYS5HUkVBVEVSKTticmVhaztjYXNlIFRIUkVFLk5vdEVxdWFsRGVwdGg6YS5kZXB0aEZ1bmMoYS5OT1RFUVVBTCk7YnJlYWs7ZGVmYXVsdDphLmRlcHRoRnVuYyhhLkxFUVVBTCl9ZWxzZSBhLmRlcHRoRnVuYyhhLkxFUVVBTCk7ZT1ifX07dGhpcy5zZXRMb2NrZWQ9ZnVuY3Rpb24oYSl7Yz1hfTt0aGlzLnNldENsZWFyPWZ1bmN0aW9uKGIpe2YhPT1iJiYoYS5jbGVhckRlcHRoKGIpLGY9Yil9O3RoaXMucmVzZXQ9ZnVuY3Rpb24oKXtjPSExO2Y9ZT1kPW51bGx9fTtcblRIUkVFLldlYkdMU3RlbmNpbEJ1ZmZlcj1mdW5jdGlvbihhLGIpe3ZhciBjPSExLGQ9bnVsbCxlPW51bGwsZj1udWxsLGc9bnVsbCxoPW51bGwsaz1udWxsLGw9bnVsbCxtPW51bGw7dGhpcy5zZXRUZXN0PWZ1bmN0aW9uKGMpe2M/Yi5lbmFibGUoYS5TVEVOQ0lMX1RFU1QpOmIuZGlzYWJsZShhLlNURU5DSUxfVEVTVCl9O3RoaXMuc2V0TWFzaz1mdW5jdGlvbihiKXtkPT09Ynx8Y3x8KGEuc3RlbmNpbE1hc2soYiksZD1iKX07dGhpcy5zZXRGdW5jPWZ1bmN0aW9uKGIsYyxkKXtpZihlIT09Ynx8ZiE9PWN8fGchPT1kKWEuc3RlbmNpbEZ1bmMoYixjLGQpLGU9YixmPWMsZz1kfTt0aGlzLnNldE9wPWZ1bmN0aW9uKGIsYyxkKXtpZihoIT09Ynx8ayE9PWN8fGwhPT1kKWEuc3RlbmNpbE9wKGIsYyxkKSxoPWIsaz1jLGw9ZH07dGhpcy5zZXRMb2NrZWQ9ZnVuY3Rpb24oYSl7Yz1hfTt0aGlzLnNldENsZWFyPWZ1bmN0aW9uKGIpe20hPT1iJiYoYS5jbGVhclN0ZW5jaWwoYiksbT1iKX07dGhpcy5yZXNldD1cbmZ1bmN0aW9uKCl7Yz0hMTttPWw9az1oPWc9Zj1lPWQ9bnVsbH19O1xuVEhSRUUuV2ViR0xUZXh0dXJlcz1mdW5jdGlvbihhLGIsYyxkLGUsZixnKXtmdW5jdGlvbiBoKGEsYil7aWYoYS53aWR0aD5ifHxhLmhlaWdodD5iKXt2YXIgYz1iL01hdGgubWF4KGEud2lkdGgsYS5oZWlnaHQpLGQ9ZG9jdW1lbnQuY3JlYXRlRWxlbWVudE5TKFwiaHR0cDovL3d3dy53My5vcmcvMTk5OS94aHRtbFwiLFwiY2FudmFzXCIpO2Qud2lkdGg9TWF0aC5mbG9vcihhLndpZHRoKmMpO2QuaGVpZ2h0PU1hdGguZmxvb3IoYS5oZWlnaHQqYyk7ZC5nZXRDb250ZXh0KFwiMmRcIikuZHJhd0ltYWdlKGEsMCwwLGEud2lkdGgsYS5oZWlnaHQsMCwwLGQud2lkdGgsZC5oZWlnaHQpO2NvbnNvbGUud2FybihcIlRIUkVFLldlYkdMUmVuZGVyZXI6IGltYWdlIGlzIHRvbyBiaWcgKFwiK2Eud2lkdGgrXCJ4XCIrYS5oZWlnaHQrXCIpLiBSZXNpemVkIHRvIFwiK2Qud2lkdGgrXCJ4XCIrZC5oZWlnaHQsYSk7cmV0dXJuIGR9cmV0dXJuIGF9ZnVuY3Rpb24gayhhKXtyZXR1cm4gVEhSRUUuTWF0aC5pc1Bvd2VyT2ZUd28oYS53aWR0aCkmJlRIUkVFLk1hdGguaXNQb3dlck9mVHdvKGEuaGVpZ2h0KX1cbmZ1bmN0aW9uIGwoYil7cmV0dXJuIGI9PT1USFJFRS5OZWFyZXN0RmlsdGVyfHxiPT09VEhSRUUuTmVhcmVzdE1pcE1hcE5lYXJlc3RGaWx0ZXJ8fGI9PT1USFJFRS5OZWFyZXN0TWlwTWFwTGluZWFyRmlsdGVyP2EuTkVBUkVTVDphLkxJTkVBUn1mdW5jdGlvbiBtKGIpe2I9Yi50YXJnZXQ7Yi5yZW1vdmVFdmVudExpc3RlbmVyKFwiZGlzcG9zZVwiLG0pO2E6e3ZhciBjPWQuZ2V0KGIpO2lmKGIuaW1hZ2UmJmMuX19pbWFnZV9fd2ViZ2xUZXh0dXJlQ3ViZSlhLmRlbGV0ZVRleHR1cmUoYy5fX2ltYWdlX193ZWJnbFRleHR1cmVDdWJlKTtlbHNle2lmKHZvaWQgMD09PWMuX193ZWJnbEluaXQpYnJlYWsgYTthLmRlbGV0ZVRleHR1cmUoYy5fX3dlYmdsVGV4dHVyZSl9ZC5kZWxldGUoYil9di50ZXh0dXJlcy0tfWZ1bmN0aW9uIHAoYil7Yj1iLnRhcmdldDtiLnJlbW92ZUV2ZW50TGlzdGVuZXIoXCJkaXNwb3NlXCIscCk7dmFyIGM9ZC5nZXQoYiksZT1kLmdldChiLnRleHR1cmUpO2lmKGIpe3ZvaWQgMCE9PVxuZS5fX3dlYmdsVGV4dHVyZSYmYS5kZWxldGVUZXh0dXJlKGUuX193ZWJnbFRleHR1cmUpO2IuZGVwdGhUZXh0dXJlJiZiLmRlcHRoVGV4dHVyZS5kaXNwb3NlKCk7aWYoYiBpbnN0YW5jZW9mIFRIUkVFLldlYkdMUmVuZGVyVGFyZ2V0Q3ViZSlmb3IoZT0wOzY+ZTtlKyspYS5kZWxldGVGcmFtZWJ1ZmZlcihjLl9fd2ViZ2xGcmFtZWJ1ZmZlcltlXSksYy5fX3dlYmdsRGVwdGhidWZmZXImJmEuZGVsZXRlUmVuZGVyYnVmZmVyKGMuX193ZWJnbERlcHRoYnVmZmVyW2VdKTtlbHNlIGEuZGVsZXRlRnJhbWVidWZmZXIoYy5fX3dlYmdsRnJhbWVidWZmZXIpLGMuX193ZWJnbERlcHRoYnVmZmVyJiZhLmRlbGV0ZVJlbmRlcmJ1ZmZlcihjLl9fd2ViZ2xEZXB0aGJ1ZmZlcik7ZC5kZWxldGUoYi50ZXh0dXJlKTtkLmRlbGV0ZShiKX12LnRleHR1cmVzLS19ZnVuY3Rpb24gbihiLGcpe3ZhciBsPWQuZ2V0KGIpO2lmKDA8Yi52ZXJzaW9uJiZsLl9fdmVyc2lvbiE9PWIudmVyc2lvbil7dmFyIG49XG5iLmltYWdlO2lmKHZvaWQgMD09PW4pY29uc29sZS53YXJuKFwiVEhSRUUuV2ViR0xSZW5kZXJlcjogVGV4dHVyZSBtYXJrZWQgZm9yIHVwZGF0ZSBidXQgaW1hZ2UgaXMgdW5kZWZpbmVkXCIsYik7ZWxzZSBpZighMT09PW4uY29tcGxldGUpY29uc29sZS53YXJuKFwiVEhSRUUuV2ViR0xSZW5kZXJlcjogVGV4dHVyZSBtYXJrZWQgZm9yIHVwZGF0ZSBidXQgaW1hZ2UgaXMgaW5jb21wbGV0ZVwiLGIpO2Vsc2V7dm9pZCAwPT09bC5fX3dlYmdsSW5pdCYmKGwuX193ZWJnbEluaXQ9ITAsYi5hZGRFdmVudExpc3RlbmVyKFwiZGlzcG9zZVwiLG0pLGwuX193ZWJnbFRleHR1cmU9YS5jcmVhdGVUZXh0dXJlKCksdi50ZXh0dXJlcysrKTtjLmFjdGl2ZVRleHR1cmUoYS5URVhUVVJFMCtnKTtjLmJpbmRUZXh0dXJlKGEuVEVYVFVSRV8yRCxsLl9fd2ViZ2xUZXh0dXJlKTthLnBpeGVsU3RvcmVpKGEuVU5QQUNLX0ZMSVBfWV9XRUJHTCxiLmZsaXBZKTthLnBpeGVsU3RvcmVpKGEuVU5QQUNLX1BSRU1VTFRJUExZX0FMUEhBX1dFQkdMLFxuYi5wcmVtdWx0aXBseUFscGhhKTthLnBpeGVsU3RvcmVpKGEuVU5QQUNLX0FMSUdOTUVOVCxiLnVucGFja0FsaWdubWVudCk7dmFyIHA9aChiLmltYWdlLGUubWF4VGV4dHVyZVNpemUpO2lmKChiLndyYXBTIT09VEhSRUUuQ2xhbXBUb0VkZ2VXcmFwcGluZ3x8Yi53cmFwVCE9PVRIUkVFLkNsYW1wVG9FZGdlV3JhcHBpbmd8fGIubWluRmlsdGVyIT09VEhSRUUuTmVhcmVzdEZpbHRlciYmYi5taW5GaWx0ZXIhPT1USFJFRS5MaW5lYXJGaWx0ZXIpJiYhMT09PWsocCkpaWYobj1wLG4gaW5zdGFuY2VvZiBIVE1MSW1hZ2VFbGVtZW50fHxuIGluc3RhbmNlb2YgSFRNTENhbnZhc0VsZW1lbnQpe3ZhciByPWRvY3VtZW50LmNyZWF0ZUVsZW1lbnROUyhcImh0dHA6Ly93d3cudzMub3JnLzE5OTkveGh0bWxcIixcImNhbnZhc1wiKTtyLndpZHRoPVRIUkVFLk1hdGgubmVhcmVzdFBvd2VyT2ZUd28obi53aWR0aCk7ci5oZWlnaHQ9VEhSRUUuTWF0aC5uZWFyZXN0UG93ZXJPZlR3byhuLmhlaWdodCk7ci5nZXRDb250ZXh0KFwiMmRcIikuZHJhd0ltYWdlKG4sXG4wLDAsci53aWR0aCxyLmhlaWdodCk7Y29uc29sZS53YXJuKFwiVEhSRUUuV2ViR0xSZW5kZXJlcjogaW1hZ2UgaXMgbm90IHBvd2VyIG9mIHR3byAoXCIrbi53aWR0aCtcInhcIituLmhlaWdodCtcIikuIFJlc2l6ZWQgdG8gXCIrci53aWR0aCtcInhcIityLmhlaWdodCxuKTtwPXJ9ZWxzZSBwPW47dmFyIG49ayhwKSxyPWYoYi5mb3JtYXQpLHM9ZihiLnR5cGUpO3EoYS5URVhUVVJFXzJELGIsbik7dmFyIEc9Yi5taXBtYXBzO2lmKGIgaW5zdGFuY2VvZiBUSFJFRS5EZXB0aFRleHR1cmUpe0c9YS5ERVBUSF9DT01QT05FTlQ7aWYoYi50eXBlPT09VEhSRUUuRmxvYXRUeXBlKXtpZighdCl0aHJvdyBFcnJvcihcIkZsb2F0IERlcHRoIFRleHR1cmUgb25seSBzdXBwb3J0ZWQgaW4gV2ViR0wyLjBcIik7Rz1hLkRFUFRIX0NPTVBPTkVOVDMyRn1lbHNlIHQmJihHPWEuREVQVEhfQ09NUE9ORU5UMTYpO2MudGV4SW1hZ2UyRChhLlRFWFRVUkVfMkQsMCxHLHAud2lkdGgscC5oZWlnaHQsMCxyLHMsbnVsbCl9ZWxzZSBpZihiIGluc3RhbmNlb2ZcblRIUkVFLkRhdGFUZXh0dXJlKWlmKDA8Ry5sZW5ndGgmJm4pe2Zvcih2YXIgQj0wLEY9Ry5sZW5ndGg7QjxGO0IrKylwPUdbQl0sYy50ZXhJbWFnZTJEKGEuVEVYVFVSRV8yRCxCLHIscC53aWR0aCxwLmhlaWdodCwwLHIscyxwLmRhdGEpO2IuZ2VuZXJhdGVNaXBtYXBzPSExfWVsc2UgYy50ZXhJbWFnZTJEKGEuVEVYVFVSRV8yRCwwLHIscC53aWR0aCxwLmhlaWdodCwwLHIscyxwLmRhdGEpO2Vsc2UgaWYoYiBpbnN0YW5jZW9mIFRIUkVFLkNvbXByZXNzZWRUZXh0dXJlKWZvcihCPTAsRj1HLmxlbmd0aDtCPEY7QisrKXA9R1tCXSxiLmZvcm1hdCE9PVRIUkVFLlJHQkFGb3JtYXQmJmIuZm9ybWF0IT09VEhSRUUuUkdCRm9ybWF0Py0xPGMuZ2V0Q29tcHJlc3NlZFRleHR1cmVGb3JtYXRzKCkuaW5kZXhPZihyKT9jLmNvbXByZXNzZWRUZXhJbWFnZTJEKGEuVEVYVFVSRV8yRCxCLHIscC53aWR0aCxwLmhlaWdodCwwLHAuZGF0YSk6Y29uc29sZS53YXJuKFwiVEhSRUUuV2ViR0xSZW5kZXJlcjogQXR0ZW1wdCB0byBsb2FkIHVuc3VwcG9ydGVkIGNvbXByZXNzZWQgdGV4dHVyZSBmb3JtYXQgaW4gLnVwbG9hZFRleHR1cmUoKVwiKTpcbmMudGV4SW1hZ2UyRChhLlRFWFRVUkVfMkQsQixyLHAud2lkdGgscC5oZWlnaHQsMCxyLHMscC5kYXRhKTtlbHNlIGlmKDA8Ry5sZW5ndGgmJm4pe0I9MDtmb3IoRj1HLmxlbmd0aDtCPEY7QisrKXA9R1tCXSxjLnRleEltYWdlMkQoYS5URVhUVVJFXzJELEIscixyLHMscCk7Yi5nZW5lcmF0ZU1pcG1hcHM9ITF9ZWxzZSBjLnRleEltYWdlMkQoYS5URVhUVVJFXzJELDAscixyLHMscCk7Yi5nZW5lcmF0ZU1pcG1hcHMmJm4mJmEuZ2VuZXJhdGVNaXBtYXAoYS5URVhUVVJFXzJEKTtsLl9fdmVyc2lvbj1iLnZlcnNpb247aWYoYi5vblVwZGF0ZSliLm9uVXBkYXRlKGIpO3JldHVybn19Yy5hY3RpdmVUZXh0dXJlKGEuVEVYVFVSRTArZyk7Yy5iaW5kVGV4dHVyZShhLlRFWFRVUkVfMkQsbC5fX3dlYmdsVGV4dHVyZSl9ZnVuY3Rpb24gcShjLGcsaCl7aD8oYS50ZXhQYXJhbWV0ZXJpKGMsYS5URVhUVVJFX1dSQVBfUyxmKGcud3JhcFMpKSxhLnRleFBhcmFtZXRlcmkoYyxhLlRFWFRVUkVfV1JBUF9ULFxuZihnLndyYXBUKSksYS50ZXhQYXJhbWV0ZXJpKGMsYS5URVhUVVJFX01BR19GSUxURVIsZihnLm1hZ0ZpbHRlcikpLGEudGV4UGFyYW1ldGVyaShjLGEuVEVYVFVSRV9NSU5fRklMVEVSLGYoZy5taW5GaWx0ZXIpKSk6KGEudGV4UGFyYW1ldGVyaShjLGEuVEVYVFVSRV9XUkFQX1MsYS5DTEFNUF9UT19FREdFKSxhLnRleFBhcmFtZXRlcmkoYyxhLlRFWFRVUkVfV1JBUF9ULGEuQ0xBTVBfVE9fRURHRSksZy53cmFwUz09PVRIUkVFLkNsYW1wVG9FZGdlV3JhcHBpbmcmJmcud3JhcFQ9PT1USFJFRS5DbGFtcFRvRWRnZVdyYXBwaW5nfHxjb25zb2xlLndhcm4oXCJUSFJFRS5XZWJHTFJlbmRlcmVyOiBUZXh0dXJlIGlzIG5vdCBwb3dlciBvZiB0d28uIFRleHR1cmUud3JhcFMgYW5kIFRleHR1cmUud3JhcFQgc2hvdWxkIGJlIHNldCB0byBUSFJFRS5DbGFtcFRvRWRnZVdyYXBwaW5nLlwiLGcpLGEudGV4UGFyYW1ldGVyaShjLGEuVEVYVFVSRV9NQUdfRklMVEVSLGwoZy5tYWdGaWx0ZXIpKSxcbmEudGV4UGFyYW1ldGVyaShjLGEuVEVYVFVSRV9NSU5fRklMVEVSLGwoZy5taW5GaWx0ZXIpKSxnLm1pbkZpbHRlciE9PVRIUkVFLk5lYXJlc3RGaWx0ZXImJmcubWluRmlsdGVyIT09VEhSRUUuTGluZWFyRmlsdGVyJiZjb25zb2xlLndhcm4oXCJUSFJFRS5XZWJHTFJlbmRlcmVyOiBUZXh0dXJlIGlzIG5vdCBwb3dlciBvZiB0d28uIFRleHR1cmUubWluRmlsdGVyIHNob3VsZCBiZSBzZXQgdG8gVEhSRUUuTmVhcmVzdEZpbHRlciBvciBUSFJFRS5MaW5lYXJGaWx0ZXIuXCIsZykpOyEoaD1iLmdldChcIkVYVF90ZXh0dXJlX2ZpbHRlcl9hbmlzb3Ryb3BpY1wiKSl8fGcudHlwZT09PVRIUkVFLkZsb2F0VHlwZSYmbnVsbD09PWIuZ2V0KFwiT0VTX3RleHR1cmVfZmxvYXRfbGluZWFyXCIpfHxnLnR5cGU9PT1USFJFRS5IYWxmRmxvYXRUeXBlJiZudWxsPT09Yi5nZXQoXCJPRVNfdGV4dHVyZV9oYWxmX2Zsb2F0X2xpbmVhclwiKXx8ISgxPGcuYW5pc290cm9weXx8ZC5nZXQoZykuX19jdXJyZW50QW5pc290cm9weSl8fFxuKGEudGV4UGFyYW1ldGVyZihjLGguVEVYVFVSRV9NQVhfQU5JU09UUk9QWV9FWFQsTWF0aC5taW4oZy5hbmlzb3Ryb3B5LGUuZ2V0TWF4QW5pc290cm9weSgpKSksZC5nZXQoZykuX19jdXJyZW50QW5pc290cm9weT1nLmFuaXNvdHJvcHkpfWZ1bmN0aW9uIHIoYixlLGcsaCl7dmFyIGs9ZihlLnRleHR1cmUuZm9ybWF0KSxsPWYoZS50ZXh0dXJlLnR5cGUpO2MudGV4SW1hZ2UyRChoLDAsayxlLndpZHRoLGUuaGVpZ2h0LDAsayxsLG51bGwpO2EuYmluZEZyYW1lYnVmZmVyKGEuRlJBTUVCVUZGRVIsYik7YS5mcmFtZWJ1ZmZlclRleHR1cmUyRChhLkZSQU1FQlVGRkVSLGcsaCxkLmdldChlLnRleHR1cmUpLl9fd2ViZ2xUZXh0dXJlLDApO2EuYmluZEZyYW1lYnVmZmVyKGEuRlJBTUVCVUZGRVIsbnVsbCl9ZnVuY3Rpb24gcyhiLGMpe2EuYmluZFJlbmRlcmJ1ZmZlcihhLlJFTkRFUkJVRkZFUixiKTtjLmRlcHRoQnVmZmVyJiYhYy5zdGVuY2lsQnVmZmVyPyhhLnJlbmRlcmJ1ZmZlclN0b3JhZ2UoYS5SRU5ERVJCVUZGRVIsXG5hLkRFUFRIX0NPTVBPTkVOVDE2LGMud2lkdGgsYy5oZWlnaHQpLGEuZnJhbWVidWZmZXJSZW5kZXJidWZmZXIoYS5GUkFNRUJVRkZFUixhLkRFUFRIX0FUVEFDSE1FTlQsYS5SRU5ERVJCVUZGRVIsYikpOmMuZGVwdGhCdWZmZXImJmMuc3RlbmNpbEJ1ZmZlcj8oYS5yZW5kZXJidWZmZXJTdG9yYWdlKGEuUkVOREVSQlVGRkVSLGEuREVQVEhfU1RFTkNJTCxjLndpZHRoLGMuaGVpZ2h0KSxhLmZyYW1lYnVmZmVyUmVuZGVyYnVmZmVyKGEuRlJBTUVCVUZGRVIsYS5ERVBUSF9TVEVOQ0lMX0FUVEFDSE1FTlQsYS5SRU5ERVJCVUZGRVIsYikpOmEucmVuZGVyYnVmZmVyU3RvcmFnZShhLlJFTkRFUkJVRkZFUixhLlJHQkE0LGMud2lkdGgsYy5oZWlnaHQpO2EuYmluZFJlbmRlcmJ1ZmZlcihhLlJFTkRFUkJVRkZFUixudWxsKX12YXIgdj1nLm1lbW9yeSx0PVwidW5kZWZpbmVkXCIhPT10eXBlb2YgV2ViR0wyUmVuZGVyaW5nQ29udGV4dCYmYSBpbnN0YW5jZW9mIFdlYkdMMlJlbmRlcmluZ0NvbnRleHQ7XG50aGlzLnNldFRleHR1cmUyRD1uO3RoaXMuc2V0VGV4dHVyZUN1YmU9ZnVuY3Rpb24oYixnKXt2YXIgbD1kLmdldChiKTtpZig2PT09Yi5pbWFnZS5sZW5ndGgpaWYoMDxiLnZlcnNpb24mJmwuX192ZXJzaW9uIT09Yi52ZXJzaW9uKXtsLl9faW1hZ2VfX3dlYmdsVGV4dHVyZUN1YmV8fChiLmFkZEV2ZW50TGlzdGVuZXIoXCJkaXNwb3NlXCIsbSksbC5fX2ltYWdlX193ZWJnbFRleHR1cmVDdWJlPWEuY3JlYXRlVGV4dHVyZSgpLHYudGV4dHVyZXMrKyk7Yy5hY3RpdmVUZXh0dXJlKGEuVEVYVFVSRTArZyk7Yy5iaW5kVGV4dHVyZShhLlRFWFRVUkVfQ1VCRV9NQVAsbC5fX2ltYWdlX193ZWJnbFRleHR1cmVDdWJlKTthLnBpeGVsU3RvcmVpKGEuVU5QQUNLX0ZMSVBfWV9XRUJHTCxiLmZsaXBZKTtmb3IodmFyIG49YiBpbnN0YW5jZW9mIFRIUkVFLkNvbXByZXNzZWRUZXh0dXJlLHA9Yi5pbWFnZVswXWluc3RhbmNlb2YgVEhSRUUuRGF0YVRleHR1cmUscj1bXSxzPTA7Nj5zO3MrKylyW3NdPVxubnx8cD9wP2IuaW1hZ2Vbc10uaW1hZ2U6Yi5pbWFnZVtzXTpoKGIuaW1hZ2Vbc10sZS5tYXhDdWJlbWFwU2l6ZSk7dmFyIHQ9ayhyWzBdKSxCPWYoYi5mb3JtYXQpLEY9ZihiLnR5cGUpO3EoYS5URVhUVVJFX0NVQkVfTUFQLGIsdCk7Zm9yKHM9MDs2PnM7cysrKWlmKG4pZm9yKHZhciBKLFA9cltzXS5taXBtYXBzLEs9MCxIPVAubGVuZ3RoO0s8SDtLKyspSj1QW0tdLGIuZm9ybWF0IT09VEhSRUUuUkdCQUZvcm1hdCYmYi5mb3JtYXQhPT1USFJFRS5SR0JGb3JtYXQ/LTE8Yy5nZXRDb21wcmVzc2VkVGV4dHVyZUZvcm1hdHMoKS5pbmRleE9mKEIpP2MuY29tcHJlc3NlZFRleEltYWdlMkQoYS5URVhUVVJFX0NVQkVfTUFQX1BPU0lUSVZFX1grcyxLLEIsSi53aWR0aCxKLmhlaWdodCwwLEouZGF0YSk6Y29uc29sZS53YXJuKFwiVEhSRUUuV2ViR0xSZW5kZXJlcjogQXR0ZW1wdCB0byBsb2FkIHVuc3VwcG9ydGVkIGNvbXByZXNzZWQgdGV4dHVyZSBmb3JtYXQgaW4gLnNldFRleHR1cmVDdWJlKClcIik6XG5jLnRleEltYWdlMkQoYS5URVhUVVJFX0NVQkVfTUFQX1BPU0lUSVZFX1grcyxLLEIsSi53aWR0aCxKLmhlaWdodCwwLEIsRixKLmRhdGEpO2Vsc2UgcD9jLnRleEltYWdlMkQoYS5URVhUVVJFX0NVQkVfTUFQX1BPU0lUSVZFX1grcywwLEIscltzXS53aWR0aCxyW3NdLmhlaWdodCwwLEIsRixyW3NdLmRhdGEpOmMudGV4SW1hZ2UyRChhLlRFWFRVUkVfQ1VCRV9NQVBfUE9TSVRJVkVfWCtzLDAsQixCLEYscltzXSk7Yi5nZW5lcmF0ZU1pcG1hcHMmJnQmJmEuZ2VuZXJhdGVNaXBtYXAoYS5URVhUVVJFX0NVQkVfTUFQKTtsLl9fdmVyc2lvbj1iLnZlcnNpb247aWYoYi5vblVwZGF0ZSliLm9uVXBkYXRlKGIpfWVsc2UgYy5hY3RpdmVUZXh0dXJlKGEuVEVYVFVSRTArZyksYy5iaW5kVGV4dHVyZShhLlRFWFRVUkVfQ1VCRV9NQVAsbC5fX2ltYWdlX193ZWJnbFRleHR1cmVDdWJlKX07dGhpcy5zZXRUZXh0dXJlQ3ViZUR5bmFtaWM9ZnVuY3Rpb24oYixlKXtjLmFjdGl2ZVRleHR1cmUoYS5URVhUVVJFMCtcbmUpO2MuYmluZFRleHR1cmUoYS5URVhUVVJFX0NVQkVfTUFQLGQuZ2V0KGIpLl9fd2ViZ2xUZXh0dXJlKX07dGhpcy5zZXR1cFJlbmRlclRhcmdldD1mdW5jdGlvbihiKXt2YXIgZT1kLmdldChiKSxmPWQuZ2V0KGIudGV4dHVyZSk7Yi5hZGRFdmVudExpc3RlbmVyKFwiZGlzcG9zZVwiLHApO2YuX193ZWJnbFRleHR1cmU9YS5jcmVhdGVUZXh0dXJlKCk7di50ZXh0dXJlcysrO3ZhciBnPWIgaW5zdGFuY2VvZiBUSFJFRS5XZWJHTFJlbmRlclRhcmdldEN1YmUsaD1rKGIpO2lmKGcpe2UuX193ZWJnbEZyYW1lYnVmZmVyPVtdO2Zvcih2YXIgbD0wOzY+bDtsKyspZS5fX3dlYmdsRnJhbWVidWZmZXJbbF09YS5jcmVhdGVGcmFtZWJ1ZmZlcigpfWVsc2UgZS5fX3dlYmdsRnJhbWVidWZmZXI9YS5jcmVhdGVGcmFtZWJ1ZmZlcigpO2lmKGcpe2MuYmluZFRleHR1cmUoYS5URVhUVVJFX0NVQkVfTUFQLGYuX193ZWJnbFRleHR1cmUpO3EoYS5URVhUVVJFX0NVQkVfTUFQLGIudGV4dHVyZSxoKTtmb3IobD1cbjA7Nj5sO2wrKylyKGUuX193ZWJnbEZyYW1lYnVmZmVyW2xdLGIsYS5DT0xPUl9BVFRBQ0hNRU5UMCxhLlRFWFRVUkVfQ1VCRV9NQVBfUE9TSVRJVkVfWCtsKTtiLnRleHR1cmUuZ2VuZXJhdGVNaXBtYXBzJiZoJiZhLmdlbmVyYXRlTWlwbWFwKGEuVEVYVFVSRV9DVUJFX01BUCk7Yy5iaW5kVGV4dHVyZShhLlRFWFRVUkVfQ1VCRV9NQVAsbnVsbCl9ZWxzZSBjLmJpbmRUZXh0dXJlKGEuVEVYVFVSRV8yRCxmLl9fd2ViZ2xUZXh0dXJlKSxxKGEuVEVYVFVSRV8yRCxiLnRleHR1cmUsaCkscihlLl9fd2ViZ2xGcmFtZWJ1ZmZlcixiLGEuQ09MT1JfQVRUQUNITUVOVDAsYS5URVhUVVJFXzJEKSxiLnRleHR1cmUuZ2VuZXJhdGVNaXBtYXBzJiZoJiZhLmdlbmVyYXRlTWlwbWFwKGEuVEVYVFVSRV8yRCksYy5iaW5kVGV4dHVyZShhLlRFWFRVUkVfMkQsbnVsbCk7aWYoYi5kZXB0aEJ1ZmZlcil7ZT1kLmdldChiKTtmPWIgaW5zdGFuY2VvZiBUSFJFRS5XZWJHTFJlbmRlclRhcmdldEN1YmU7aWYoYi5kZXB0aFRleHR1cmUpe2lmKGYpdGhyb3cgRXJyb3IoXCJ0YXJnZXQuZGVwdGhUZXh0dXJlIG5vdCBzdXBwb3J0ZWQgaW4gQ3ViZSByZW5kZXIgdGFyZ2V0c1wiKTtcbmlmKGIgaW5zdGFuY2VvZiBUSFJFRS5XZWJHTFJlbmRlclRhcmdldEN1YmUpdGhyb3cgRXJyb3IoXCJEZXB0aCBUZXh0dXJlIHdpdGggY3ViZSByZW5kZXIgdGFyZ2V0cyBpcyBub3Qgc3VwcG9ydGVkIVwiKTthLmJpbmRGcmFtZWJ1ZmZlcihhLkZSQU1FQlVGRkVSLGUuX193ZWJnbEZyYW1lYnVmZmVyKTtpZighKGIuZGVwdGhUZXh0dXJlIGluc3RhbmNlb2YgVEhSRUUuRGVwdGhUZXh0dXJlKSl0aHJvdyBFcnJvcihcInJlbmRlclRhcmdldC5kZXB0aFRleHR1cmUgbXVzdCBiZSBhbiBpbnN0YW5jZSBvZiBUSFJFRS5EZXB0aFRleHR1cmVcIik7ZC5nZXQoYi5kZXB0aFRleHR1cmUpLl9fd2ViZ2xUZXh0dXJlJiZiLmRlcHRoVGV4dHVyZS5pbWFnZS53aWR0aD09PWIud2lkdGgmJmIuZGVwdGhUZXh0dXJlLmltYWdlLmhlaWdodD09PWIuaGVpZ2h0fHwoYi5kZXB0aFRleHR1cmUuaW1hZ2Uud2lkdGg9Yi53aWR0aCxiLmRlcHRoVGV4dHVyZS5pbWFnZS5oZWlnaHQ9Yi5oZWlnaHQsYi5kZXB0aFRleHR1cmUubmVlZHNVcGRhdGU9XG4hMCk7bihiLmRlcHRoVGV4dHVyZSwwKTtiPWQuZ2V0KGIuZGVwdGhUZXh0dXJlKS5fX3dlYmdsVGV4dHVyZTthLmZyYW1lYnVmZmVyVGV4dHVyZTJEKGEuRlJBTUVCVUZGRVIsYS5ERVBUSF9BVFRBQ0hNRU5ULGEuVEVYVFVSRV8yRCxiLDApfWVsc2UgaWYoZilmb3IoZS5fX3dlYmdsRGVwdGhidWZmZXI9W10sZj0wOzY+ZjtmKyspYS5iaW5kRnJhbWVidWZmZXIoYS5GUkFNRUJVRkZFUixlLl9fd2ViZ2xGcmFtZWJ1ZmZlcltmXSksZS5fX3dlYmdsRGVwdGhidWZmZXJbZl09YS5jcmVhdGVSZW5kZXJidWZmZXIoKSxzKGUuX193ZWJnbERlcHRoYnVmZmVyW2ZdLGIpO2Vsc2UgYS5iaW5kRnJhbWVidWZmZXIoYS5GUkFNRUJVRkZFUixlLl9fd2ViZ2xGcmFtZWJ1ZmZlciksZS5fX3dlYmdsRGVwdGhidWZmZXI9YS5jcmVhdGVSZW5kZXJidWZmZXIoKSxzKGUuX193ZWJnbERlcHRoYnVmZmVyLGIpO2EuYmluZEZyYW1lYnVmZmVyKGEuRlJBTUVCVUZGRVIsbnVsbCl9fTt0aGlzLnVwZGF0ZVJlbmRlclRhcmdldE1pcG1hcD1cbmZ1bmN0aW9uKGIpe3ZhciBlPWIudGV4dHVyZTtlLmdlbmVyYXRlTWlwbWFwcyYmayhiKSYmZS5taW5GaWx0ZXIhPT1USFJFRS5OZWFyZXN0RmlsdGVyJiZlLm1pbkZpbHRlciE9PVRIUkVFLkxpbmVhckZpbHRlciYmKGI9YiBpbnN0YW5jZW9mIFRIUkVFLldlYkdMUmVuZGVyVGFyZ2V0Q3ViZT9hLlRFWFRVUkVfQ1VCRV9NQVA6YS5URVhUVVJFXzJELGU9ZC5nZXQoZSkuX193ZWJnbFRleHR1cmUsYy5iaW5kVGV4dHVyZShiLGUpLGEuZ2VuZXJhdGVNaXBtYXAoYiksYy5iaW5kVGV4dHVyZShiLG51bGwpKX19O1xuVEhSRUUuV2ViR0xVbmlmb3Jtcz1mdW5jdGlvbigpe3ZhciBhPW5ldyBUSFJFRS5UZXh0dXJlLGI9bmV3IFRIUkVFLkN1YmVUZXh0dXJlLGM9W10sZD1bXSxlPWZ1bmN0aW9uKGEsYixkKXt2YXIgZT1hWzBdO2lmKDA+PWV8fDA8ZSlyZXR1cm4gYTt2YXIgZj1iKmQsZz1jW2ZdO3ZvaWQgMD09PWcmJihnPW5ldyBGbG9hdDMyQXJyYXkoZiksY1tmXT1nKTtpZigwIT09Yilmb3IoZS50b0FycmF5KGcsMCksZT0xLGY9MDtlIT09YjsrK2UpZis9ZCxhW2VdLnRvQXJyYXkoZyxmKTtyZXR1cm4gZ30sZj1mdW5jdGlvbihhLGIpe3ZhciBjPWRbYl07dm9pZCAwPT09YyYmKGM9bmV3IEludDMyQXJyYXkoYiksZFtiXT1jKTtmb3IodmFyIGU9MDtlIT09YjsrK2UpY1tlXT1hLmFsbG9jVGV4dHVyZVVuaXQoKTtyZXR1cm4gY30sZz1mdW5jdGlvbihhLGIpe2EudW5pZm9ybTFmKHRoaXMuYWRkcixiKX0saD1mdW5jdGlvbihhLGIpe2EudW5pZm9ybTFpKHRoaXMuYWRkcixiKX0saz1mdW5jdGlvbihhLFxuYil7dm9pZCAwPT09Yi54P2EudW5pZm9ybTJmdih0aGlzLmFkZHIsYik6YS51bmlmb3JtMmYodGhpcy5hZGRyLGIueCxiLnkpfSxsPWZ1bmN0aW9uKGEsYil7dm9pZCAwIT09Yi54P2EudW5pZm9ybTNmKHRoaXMuYWRkcixiLngsYi55LGIueik6dm9pZCAwIT09Yi5yP2EudW5pZm9ybTNmKHRoaXMuYWRkcixiLnIsYi5nLGIuYik6YS51bmlmb3JtM2Z2KHRoaXMuYWRkcixiKX0sbT1mdW5jdGlvbihhLGIpe3ZvaWQgMD09PWIueD9hLnVuaWZvcm00ZnYodGhpcy5hZGRyLGIpOmEudW5pZm9ybTRmKHRoaXMuYWRkcixiLngsYi55LGIueixiLncpfSxwPWZ1bmN0aW9uKGEsYil7YS51bmlmb3JtTWF0cml4MmZ2KHRoaXMuYWRkciwhMSxiLmVsZW1lbnRzfHxiKX0sbj1mdW5jdGlvbihhLGIpe2EudW5pZm9ybU1hdHJpeDNmdih0aGlzLmFkZHIsITEsYi5lbGVtZW50c3x8Yil9LHE9ZnVuY3Rpb24oYSxiKXthLnVuaWZvcm1NYXRyaXg0ZnYodGhpcy5hZGRyLCExLGIuZWxlbWVudHN8fGIpfSxyPVxuZnVuY3Rpb24oYixjLGQpe3ZhciBlPWQuYWxsb2NUZXh0dXJlVW5pdCgpO2IudW5pZm9ybTFpKHRoaXMuYWRkcixlKTtkLnNldFRleHR1cmUyRChjfHxhLGUpfSxzPWZ1bmN0aW9uKGEsYyxkKXt2YXIgZT1kLmFsbG9jVGV4dHVyZVVuaXQoKTthLnVuaWZvcm0xaSh0aGlzLmFkZHIsZSk7ZC5zZXRUZXh0dXJlQ3ViZShjfHxiLGUpfSx2PWZ1bmN0aW9uKGEsYil7YS51bmlmb3JtMml2KHRoaXMuYWRkcixiKX0sdD1mdW5jdGlvbihhLGIpe2EudW5pZm9ybTNpdih0aGlzLmFkZHIsYil9LHU9ZnVuY3Rpb24oYSxiKXthLnVuaWZvcm00aXYodGhpcy5hZGRyLGIpfSxEPWZ1bmN0aW9uKGEpe3N3aXRjaChhKXtjYXNlIDUxMjY6cmV0dXJuIGc7Y2FzZSAzNTY2NDpyZXR1cm4gaztjYXNlIDM1NjY1OnJldHVybiBsO2Nhc2UgMzU2NjY6cmV0dXJuIG07Y2FzZSAzNTY3NDpyZXR1cm4gcDtjYXNlIDM1Njc1OnJldHVybiBuO2Nhc2UgMzU2NzY6cmV0dXJuIHE7Y2FzZSAzNTY3ODpyZXR1cm4gcjtjYXNlIDM1NjgwOnJldHVybiBzO1xuY2FzZSA1MTI0OmNhc2UgMzU2NzA6cmV0dXJuIGg7Y2FzZSAzNTY2NzpjYXNlIDM1NjcxOnJldHVybiB2O2Nhc2UgMzU2Njg6Y2FzZSAzNTY3MjpyZXR1cm4gdDtjYXNlIDM1NjY5OmNhc2UgMzU2NzM6cmV0dXJuIHV9fSx3PWZ1bmN0aW9uKGEsYil7YS51bmlmb3JtMWZ2KHRoaXMuYWRkcixiKX0sST1mdW5jdGlvbihhLGIpe2EudW5pZm9ybTFpdih0aGlzLmFkZHIsYil9LHo9ZnVuY3Rpb24oYSxiKXthLnVuaWZvcm0yZnYodGhpcy5hZGRyLGUoYix0aGlzLnNpemUsMikpfSx5PWZ1bmN0aW9uKGEsYil7YS51bmlmb3JtM2Z2KHRoaXMuYWRkcixlKGIsdGhpcy5zaXplLDMpKX0sQT1mdW5jdGlvbihhLGIpe2EudW5pZm9ybTRmdih0aGlzLmFkZHIsZShiLHRoaXMuc2l6ZSw0KSl9LEc9ZnVuY3Rpb24oYSxiKXthLnVuaWZvcm1NYXRyaXgyZnYodGhpcy5hZGRyLCExLGUoYix0aGlzLnNpemUsNCkpfSxCPWZ1bmN0aW9uKGEsYil7YS51bmlmb3JtTWF0cml4M2Z2KHRoaXMuYWRkciwhMSxlKGIsXG50aGlzLnNpemUsOSkpfSxGPWZ1bmN0aW9uKGEsYil7YS51bmlmb3JtTWF0cml4NGZ2KHRoaXMuYWRkciwhMSxlKGIsdGhpcy5zaXplLDE2KSl9LEo9ZnVuY3Rpb24oYixjLGQpe3ZhciBlPWMubGVuZ3RoLGc9ZihkLGUpO2IudW5pZm9ybTFpdih0aGlzLmFkZHIsZyk7Zm9yKGI9MDtiIT09ZTsrK2IpZC5zZXRUZXh0dXJlMkQoY1tiXXx8YSxnW2JdKX0sUD1mdW5jdGlvbihhLGMsZCl7dmFyIGU9Yy5sZW5ndGgsZz1mKGQsZSk7YS51bmlmb3JtMWl2KHRoaXMuYWRkcixnKTtmb3IoYT0wO2EhPT1lOysrYSlkLnNldFRleHR1cmVDdWJlKGNbYV18fGIsZ1thXSl9LEs9ZnVuY3Rpb24oYSl7c3dpdGNoKGEpe2Nhc2UgNTEyNjpyZXR1cm4gdztjYXNlIDM1NjY0OnJldHVybiB6O2Nhc2UgMzU2NjU6cmV0dXJuIHk7Y2FzZSAzNTY2NjpyZXR1cm4gQTtjYXNlIDM1Njc0OnJldHVybiBHO2Nhc2UgMzU2NzU6cmV0dXJuIEI7Y2FzZSAzNTY3NjpyZXR1cm4gRjtjYXNlIDM1Njc4OnJldHVybiBKO2Nhc2UgMzU2ODA6cmV0dXJuIFA7XG5jYXNlIDUxMjQ6Y2FzZSAzNTY3MDpyZXR1cm4gSTtjYXNlIDM1NjY3OmNhc2UgMzU2NzE6cmV0dXJuIHY7Y2FzZSAzNTY2ODpjYXNlIDM1NjcyOnJldHVybiB0O2Nhc2UgMzU2Njk6Y2FzZSAzNTY3MzpyZXR1cm4gdX19LEg9ZnVuY3Rpb24oYSxiLGMpe3RoaXMuaWQ9YTt0aGlzLmFkZHI9Yzt0aGlzLnNldFZhbHVlPUQoYi50eXBlKX0sTT1mdW5jdGlvbihhLGIsYyl7dGhpcy5pZD1hO3RoaXMuYWRkcj1jO3RoaXMuc2l6ZT1iLnNpemU7dGhpcy5zZXRWYWx1ZT1LKGIudHlwZSl9LE89ZnVuY3Rpb24oYSl7dGhpcy5pZD1hO3RoaXMuc2VxPVtdO3RoaXMubWFwPXt9fTtPLnByb3RvdHlwZS5zZXRWYWx1ZT1mdW5jdGlvbihhLGIpe2Zvcih2YXIgYz10aGlzLnNlcSxkPTAsZT1jLmxlbmd0aDtkIT09ZTsrK2Qpe3ZhciBmPWNbZF07Zi5zZXRWYWx1ZShhLGJbZi5pZF0pfX07dmFyIE49LyhbXFx3XFxkX10rKShcXF0pPyhcXFt8XFwuKT8vZyxRPWZ1bmN0aW9uKGEsYixjKXt0aGlzLnNlcT1bXTt0aGlzLm1hcD1cbnt9O3RoaXMucmVuZGVyZXI9YztjPWEuZ2V0UHJvZ3JhbVBhcmFtZXRlcihiLGEuQUNUSVZFX1VOSUZPUk1TKTtmb3IodmFyIGQ9MDtkIT09YzsrK2Qpe3ZhciBlPWEuZ2V0QWN0aXZlVW5pZm9ybShiLGQpLGY9YS5nZXRVbmlmb3JtTG9jYXRpb24oYixlLm5hbWUpLGc9dGhpcyxoPWUubmFtZSxrPWgubGVuZ3RoO2ZvcihOLmxhc3RJbmRleD0wOzspe3ZhciBsPU4uZXhlYyhoKSxtPU4ubGFzdEluZGV4LG49bFsxXSxwPWxbM107XCJdXCI9PT1sWzJdJiYobnw9MCk7aWYodm9pZCAwPT09cHx8XCJbXCI9PT1wJiZtKzI9PT1rKXtoPWc7ZT12b2lkIDA9PT1wP25ldyBIKG4sZSxmKTpuZXcgTShuLGUsZik7aC5zZXEucHVzaChlKTtoLm1hcFtlLmlkXT1lO2JyZWFrfWVsc2UgcD1nLm1hcFtuXSx2b2lkIDA9PT1wJiYocD1uZXcgTyhuKSxuPWcsZz1wLG4uc2VxLnB1c2goZyksbi5tYXBbZy5pZF09ZyksZz1wfX19O1EucHJvdG90eXBlLnNldFZhbHVlPWZ1bmN0aW9uKGEsYixjKXtiPXRoaXMubWFwW2JdO1xudm9pZCAwIT09YiYmYi5zZXRWYWx1ZShhLGMsdGhpcy5yZW5kZXJlcil9O1EucHJvdG90eXBlLnNldD1mdW5jdGlvbihhLGIsYyl7dmFyIGQ9dGhpcy5tYXBbY107dm9pZCAwIT09ZCYmZC5zZXRWYWx1ZShhLGJbY10sdGhpcy5yZW5kZXJlcil9O1EucHJvdG90eXBlLnNldE9wdGlvbmFsPWZ1bmN0aW9uKGEsYixjKXtiPWJbY107dm9pZCAwIT09YiYmdGhpcy5zZXRWYWx1ZShhLGMsYil9O1EudXBsb2FkPWZ1bmN0aW9uKGEsYixjLGQpe2Zvcih2YXIgZT0wLGY9Yi5sZW5ndGg7ZSE9PWY7KytlKXt2YXIgZz1iW2VdLGg9Y1tnLmlkXTshMSE9PWgubmVlZHNVcGRhdGUmJmcuc2V0VmFsdWUoYSxoLnZhbHVlLGQpfX07US5zZXFXaXRoVmFsdWU9ZnVuY3Rpb24oYSxiKXtmb3IodmFyIGM9W10sZD0wLGU9YS5sZW5ndGg7ZCE9PWU7KytkKXt2YXIgZj1hW2RdO2YuaWQgaW4gYiYmYy5wdXNoKGYpfXJldHVybiBjfTtRLnNwbGl0RHluYW1pYz1mdW5jdGlvbihhLGIpe2Zvcih2YXIgYz1udWxsLFxuZD1hLmxlbmd0aCxlPTAsZj0wO2YhPT1kOysrZil7dmFyIGc9YVtmXSxoPWJbZy5pZF07aCYmITA9PT1oLmR5bmFtaWM/KG51bGw9PT1jJiYoYz1bXSksYy5wdXNoKGcpKTooZTxmJiYoYVtlXT1nKSwrK2UpfWU8ZCYmKGEubGVuZ3RoPWUpO3JldHVybiBjfTtRLmV2YWxEeW5hbWljPWZ1bmN0aW9uKGEsYixjLGQpe2Zvcih2YXIgZT0wLGY9YS5sZW5ndGg7ZSE9PWY7KytlKXt2YXIgZz1iW2FbZV0uaWRdLGg9Zy5vblVwZGF0ZUNhbGxiYWNrO3ZvaWQgMCE9PWgmJmguY2FsbChnLGMsZCl9fTtyZXR1cm4gUX0oKTtcblRIUkVFLkxlbnNGbGFyZVBsdWdpbj1mdW5jdGlvbihhLGIpe3ZhciBjLGQsZSxmLGcsaCxrLGwsbSxwLG49YS5jb250ZXh0LHE9YS5zdGF0ZSxyLHMsdix0LHUsRDt0aGlzLnJlbmRlcj1mdW5jdGlvbih3LEkseil7aWYoMCE9PWIubGVuZ3RoKXt3PW5ldyBUSFJFRS5WZWN0b3IzO3ZhciB5PXoudy96LnosQT0uNSp6LnosRz0uNSp6LncsQj0xNi96LncsRj1uZXcgVEhSRUUuVmVjdG9yMihCKnksQiksSj1uZXcgVEhSRUUuVmVjdG9yMygxLDEsMCksUD1uZXcgVEhSRUUuVmVjdG9yMigxLDEpLEs9bmV3IFRIUkVFLkJveDI7Sy5taW4uc2V0KDAsMCk7Sy5tYXguc2V0KHouei0xNix6LnctMTYpO2lmKHZvaWQgMD09PXQpe3ZhciBCPW5ldyBGbG9hdDMyQXJyYXkoWy0xLC0xLDAsMCwxLC0xLDEsMCwxLDEsMSwxLC0xLDEsMCwxXSksSD1uZXcgVWludDE2QXJyYXkoWzAsMSwyLDAsMiwzXSk7cj1uLmNyZWF0ZUJ1ZmZlcigpO3M9bi5jcmVhdGVCdWZmZXIoKTtuLmJpbmRCdWZmZXIobi5BUlJBWV9CVUZGRVIsXG5yKTtuLmJ1ZmZlckRhdGEobi5BUlJBWV9CVUZGRVIsQixuLlNUQVRJQ19EUkFXKTtuLmJpbmRCdWZmZXIobi5FTEVNRU5UX0FSUkFZX0JVRkZFUixzKTtuLmJ1ZmZlckRhdGEobi5FTEVNRU5UX0FSUkFZX0JVRkZFUixILG4uU1RBVElDX0RSQVcpO3U9bi5jcmVhdGVUZXh0dXJlKCk7RD1uLmNyZWF0ZVRleHR1cmUoKTtxLmJpbmRUZXh0dXJlKG4uVEVYVFVSRV8yRCx1KTtuLnRleEltYWdlMkQobi5URVhUVVJFXzJELDAsbi5SR0IsMTYsMTYsMCxuLlJHQixuLlVOU0lHTkVEX0JZVEUsbnVsbCk7bi50ZXhQYXJhbWV0ZXJpKG4uVEVYVFVSRV8yRCxuLlRFWFRVUkVfV1JBUF9TLG4uQ0xBTVBfVE9fRURHRSk7bi50ZXhQYXJhbWV0ZXJpKG4uVEVYVFVSRV8yRCxuLlRFWFRVUkVfV1JBUF9ULG4uQ0xBTVBfVE9fRURHRSk7bi50ZXhQYXJhbWV0ZXJpKG4uVEVYVFVSRV8yRCxuLlRFWFRVUkVfTUFHX0ZJTFRFUixuLk5FQVJFU1QpO24udGV4UGFyYW1ldGVyaShuLlRFWFRVUkVfMkQsbi5URVhUVVJFX01JTl9GSUxURVIsXG5uLk5FQVJFU1QpO3EuYmluZFRleHR1cmUobi5URVhUVVJFXzJELEQpO24udGV4SW1hZ2UyRChuLlRFWFRVUkVfMkQsMCxuLlJHQkEsMTYsMTYsMCxuLlJHQkEsbi5VTlNJR05FRF9CWVRFLG51bGwpO24udGV4UGFyYW1ldGVyaShuLlRFWFRVUkVfMkQsbi5URVhUVVJFX1dSQVBfUyxuLkNMQU1QX1RPX0VER0UpO24udGV4UGFyYW1ldGVyaShuLlRFWFRVUkVfMkQsbi5URVhUVVJFX1dSQVBfVCxuLkNMQU1QX1RPX0VER0UpO24udGV4UGFyYW1ldGVyaShuLlRFWFRVUkVfMkQsbi5URVhUVVJFX01BR19GSUxURVIsbi5ORUFSRVNUKTtuLnRleFBhcmFtZXRlcmkobi5URVhUVVJFXzJELG4uVEVYVFVSRV9NSU5fRklMVEVSLG4uTkVBUkVTVCk7dmFyIEI9dj17dmVydGV4U2hhZGVyOlwidW5pZm9ybSBsb3dwIGludCByZW5kZXJUeXBlO1xcbnVuaWZvcm0gdmVjMyBzY3JlZW5Qb3NpdGlvbjtcXG51bmlmb3JtIHZlYzIgc2NhbGU7XFxudW5pZm9ybSBmbG9hdCByb3RhdGlvbjtcXG51bmlmb3JtIHNhbXBsZXIyRCBvY2NsdXNpb25NYXA7XFxuYXR0cmlidXRlIHZlYzIgcG9zaXRpb247XFxuYXR0cmlidXRlIHZlYzIgdXY7XFxudmFyeWluZyB2ZWMyIHZVVjtcXG52YXJ5aW5nIGZsb2F0IHZWaXNpYmlsaXR5O1xcbnZvaWQgbWFpbigpIHtcXG52VVYgPSB1djtcXG52ZWMyIHBvcyA9IHBvc2l0aW9uO1xcbmlmICggcmVuZGVyVHlwZSA9PSAyICkge1xcbnZlYzQgdmlzaWJpbGl0eSA9IHRleHR1cmUyRCggb2NjbHVzaW9uTWFwLCB2ZWMyKCAwLjEsIDAuMSApICk7XFxudmlzaWJpbGl0eSArPSB0ZXh0dXJlMkQoIG9jY2x1c2lvbk1hcCwgdmVjMiggMC41LCAwLjEgKSApO1xcbnZpc2liaWxpdHkgKz0gdGV4dHVyZTJEKCBvY2NsdXNpb25NYXAsIHZlYzIoIDAuOSwgMC4xICkgKTtcXG52aXNpYmlsaXR5ICs9IHRleHR1cmUyRCggb2NjbHVzaW9uTWFwLCB2ZWMyKCAwLjksIDAuNSApICk7XFxudmlzaWJpbGl0eSArPSB0ZXh0dXJlMkQoIG9jY2x1c2lvbk1hcCwgdmVjMiggMC45LCAwLjkgKSApO1xcbnZpc2liaWxpdHkgKz0gdGV4dHVyZTJEKCBvY2NsdXNpb25NYXAsIHZlYzIoIDAuNSwgMC45ICkgKTtcXG52aXNpYmlsaXR5ICs9IHRleHR1cmUyRCggb2NjbHVzaW9uTWFwLCB2ZWMyKCAwLjEsIDAuOSApICk7XFxudmlzaWJpbGl0eSArPSB0ZXh0dXJlMkQoIG9jY2x1c2lvbk1hcCwgdmVjMiggMC4xLCAwLjUgKSApO1xcbnZpc2liaWxpdHkgKz0gdGV4dHVyZTJEKCBvY2NsdXNpb25NYXAsIHZlYzIoIDAuNSwgMC41ICkgKTtcXG52VmlzaWJpbGl0eSA9ICAgICAgICB2aXNpYmlsaXR5LnIgLyA5LjA7XFxudlZpc2liaWxpdHkgKj0gMS4wIC0gdmlzaWJpbGl0eS5nIC8gOS4wO1xcbnZWaXNpYmlsaXR5ICo9ICAgICAgIHZpc2liaWxpdHkuYiAvIDkuMDtcXG52VmlzaWJpbGl0eSAqPSAxLjAgLSB2aXNpYmlsaXR5LmEgLyA5LjA7XFxucG9zLnggPSBjb3MoIHJvdGF0aW9uICkgKiBwb3NpdGlvbi54IC0gc2luKCByb3RhdGlvbiApICogcG9zaXRpb24ueTtcXG5wb3MueSA9IHNpbiggcm90YXRpb24gKSAqIHBvc2l0aW9uLnggKyBjb3MoIHJvdGF0aW9uICkgKiBwb3NpdGlvbi55O1xcbn1cXG5nbF9Qb3NpdGlvbiA9IHZlYzQoICggcG9zICogc2NhbGUgKyBzY3JlZW5Qb3NpdGlvbi54eSApLnh5LCBzY3JlZW5Qb3NpdGlvbi56LCAxLjAgKTtcXG59XCIsXG5mcmFnbWVudFNoYWRlcjpcInVuaWZvcm0gbG93cCBpbnQgcmVuZGVyVHlwZTtcXG51bmlmb3JtIHNhbXBsZXIyRCBtYXA7XFxudW5pZm9ybSBmbG9hdCBvcGFjaXR5O1xcbnVuaWZvcm0gdmVjMyBjb2xvcjtcXG52YXJ5aW5nIHZlYzIgdlVWO1xcbnZhcnlpbmcgZmxvYXQgdlZpc2liaWxpdHk7XFxudm9pZCBtYWluKCkge1xcbmlmICggcmVuZGVyVHlwZSA9PSAwICkge1xcbmdsX0ZyYWdDb2xvciA9IHZlYzQoIDEuMCwgMC4wLCAxLjAsIDAuMCApO1xcbn0gZWxzZSBpZiAoIHJlbmRlclR5cGUgPT0gMSApIHtcXG5nbF9GcmFnQ29sb3IgPSB0ZXh0dXJlMkQoIG1hcCwgdlVWICk7XFxufSBlbHNlIHtcXG52ZWM0IHRleHR1cmUgPSB0ZXh0dXJlMkQoIG1hcCwgdlVWICk7XFxudGV4dHVyZS5hICo9IG9wYWNpdHkgKiB2VmlzaWJpbGl0eTtcXG5nbF9GcmFnQ29sb3IgPSB0ZXh0dXJlO1xcbmdsX0ZyYWdDb2xvci5yZ2IgKj0gY29sb3I7XFxufVxcbn1cIn0sSD1uLmNyZWF0ZVByb2dyYW0oKSxNPW4uY3JlYXRlU2hhZGVyKG4uRlJBR01FTlRfU0hBREVSKSxcbk89bi5jcmVhdGVTaGFkZXIobi5WRVJURVhfU0hBREVSKSxOPVwicHJlY2lzaW9uIFwiK2EuZ2V0UHJlY2lzaW9uKCkrXCIgZmxvYXQ7XFxuXCI7bi5zaGFkZXJTb3VyY2UoTSxOK0IuZnJhZ21lbnRTaGFkZXIpO24uc2hhZGVyU291cmNlKE8sTitCLnZlcnRleFNoYWRlcik7bi5jb21waWxlU2hhZGVyKE0pO24uY29tcGlsZVNoYWRlcihPKTtuLmF0dGFjaFNoYWRlcihILE0pO24uYXR0YWNoU2hhZGVyKEgsTyk7bi5saW5rUHJvZ3JhbShIKTt0PUg7bT1uLmdldEF0dHJpYkxvY2F0aW9uKHQsXCJwb3NpdGlvblwiKTtwPW4uZ2V0QXR0cmliTG9jYXRpb24odCxcInV2XCIpO2M9bi5nZXRVbmlmb3JtTG9jYXRpb24odCxcInJlbmRlclR5cGVcIik7ZD1uLmdldFVuaWZvcm1Mb2NhdGlvbih0LFwibWFwXCIpO2U9bi5nZXRVbmlmb3JtTG9jYXRpb24odCxcIm9jY2x1c2lvbk1hcFwiKTtmPW4uZ2V0VW5pZm9ybUxvY2F0aW9uKHQsXCJvcGFjaXR5XCIpO2c9bi5nZXRVbmlmb3JtTG9jYXRpb24odCxcImNvbG9yXCIpO2g9bi5nZXRVbmlmb3JtTG9jYXRpb24odCxcblwic2NhbGVcIik7az1uLmdldFVuaWZvcm1Mb2NhdGlvbih0LFwicm90YXRpb25cIik7bD1uLmdldFVuaWZvcm1Mb2NhdGlvbih0LFwic2NyZWVuUG9zaXRpb25cIil9bi51c2VQcm9ncmFtKHQpO3EuaW5pdEF0dHJpYnV0ZXMoKTtxLmVuYWJsZUF0dHJpYnV0ZShtKTtxLmVuYWJsZUF0dHJpYnV0ZShwKTtxLmRpc2FibGVVbnVzZWRBdHRyaWJ1dGVzKCk7bi51bmlmb3JtMWkoZSwwKTtuLnVuaWZvcm0xaShkLDEpO24uYmluZEJ1ZmZlcihuLkFSUkFZX0JVRkZFUixyKTtuLnZlcnRleEF0dHJpYlBvaW50ZXIobSwyLG4uRkxPQVQsITEsMTYsMCk7bi52ZXJ0ZXhBdHRyaWJQb2ludGVyKHAsMixuLkZMT0FULCExLDE2LDgpO24uYmluZEJ1ZmZlcihuLkVMRU1FTlRfQVJSQVlfQlVGRkVSLHMpO3EuZGlzYWJsZShuLkNVTExfRkFDRSk7cS5zZXREZXB0aFdyaXRlKCExKTtIPTA7Zm9yKE09Yi5sZW5ndGg7SDxNO0grKylpZihCPTE2L3oudyxGLnNldChCKnksQiksTz1iW0hdLHcuc2V0KE8ubWF0cml4V29ybGQuZWxlbWVudHNbMTJdLFxuTy5tYXRyaXhXb3JsZC5lbGVtZW50c1sxM10sTy5tYXRyaXhXb3JsZC5lbGVtZW50c1sxNF0pLHcuYXBwbHlNYXRyaXg0KEkubWF0cml4V29ybGRJbnZlcnNlKSx3LmFwcGx5UHJvamVjdGlvbihJLnByb2plY3Rpb25NYXRyaXgpLEouY29weSh3KSxQLng9ei54K0oueCpBK0EtOCxQLnk9ei55K0oueSpHK0ctOCwhMD09PUsuY29udGFpbnNQb2ludChQKSl7cS5hY3RpdmVUZXh0dXJlKG4uVEVYVFVSRTApO3EuYmluZFRleHR1cmUobi5URVhUVVJFXzJELG51bGwpO3EuYWN0aXZlVGV4dHVyZShuLlRFWFRVUkUxKTtxLmJpbmRUZXh0dXJlKG4uVEVYVFVSRV8yRCx1KTtuLmNvcHlUZXhJbWFnZTJEKG4uVEVYVFVSRV8yRCwwLG4uUkdCLFAueCxQLnksMTYsMTYsMCk7bi51bmlmb3JtMWkoYywwKTtuLnVuaWZvcm0yZihoLEYueCxGLnkpO24udW5pZm9ybTNmKGwsSi54LEoueSxKLnopO3EuZGlzYWJsZShuLkJMRU5EKTtxLmVuYWJsZShuLkRFUFRIX1RFU1QpO24uZHJhd0VsZW1lbnRzKG4uVFJJQU5HTEVTLFxuNixuLlVOU0lHTkVEX1NIT1JULDApO3EuYWN0aXZlVGV4dHVyZShuLlRFWFRVUkUwKTtxLmJpbmRUZXh0dXJlKG4uVEVYVFVSRV8yRCxEKTtuLmNvcHlUZXhJbWFnZTJEKG4uVEVYVFVSRV8yRCwwLG4uUkdCQSxQLngsUC55LDE2LDE2LDApO24udW5pZm9ybTFpKGMsMSk7cS5kaXNhYmxlKG4uREVQVEhfVEVTVCk7cS5hY3RpdmVUZXh0dXJlKG4uVEVYVFVSRTEpO3EuYmluZFRleHR1cmUobi5URVhUVVJFXzJELHUpO24uZHJhd0VsZW1lbnRzKG4uVFJJQU5HTEVTLDYsbi5VTlNJR05FRF9TSE9SVCwwKTtPLnBvc2l0aW9uU2NyZWVuLmNvcHkoSik7Ty5jdXN0b21VcGRhdGVDYWxsYmFjaz9PLmN1c3RvbVVwZGF0ZUNhbGxiYWNrKE8pOk8udXBkYXRlTGVuc0ZsYXJlcygpO24udW5pZm9ybTFpKGMsMik7cS5lbmFibGUobi5CTEVORCk7Zm9yKHZhciBOPTAsUT1PLmxlbnNGbGFyZXMubGVuZ3RoO048UTtOKyspe3ZhciBDPU8ubGVuc0ZsYXJlc1tOXTsuMDAxPEMub3BhY2l0eSYmLjAwMTxDLnNjYWxlJiZcbihKLng9Qy54LEoueT1DLnksSi56PUMueixCPUMuc2l6ZSpDLnNjYWxlL3oudyxGLng9Qip5LEYueT1CLG4udW5pZm9ybTNmKGwsSi54LEoueSxKLnopLG4udW5pZm9ybTJmKGgsRi54LEYueSksbi51bmlmb3JtMWYoayxDLnJvdGF0aW9uKSxuLnVuaWZvcm0xZihmLEMub3BhY2l0eSksbi51bmlmb3JtM2YoZyxDLmNvbG9yLnIsQy5jb2xvci5nLEMuY29sb3IuYikscS5zZXRCbGVuZGluZyhDLmJsZW5kaW5nLEMuYmxlbmRFcXVhdGlvbixDLmJsZW5kU3JjLEMuYmxlbmREc3QpLGEuc2V0VGV4dHVyZTJEKEMudGV4dHVyZSwxKSxuLmRyYXdFbGVtZW50cyhuLlRSSUFOR0xFUyw2LG4uVU5TSUdORURfU0hPUlQsMCkpfX1xLmVuYWJsZShuLkNVTExfRkFDRSk7cS5lbmFibGUobi5ERVBUSF9URVNUKTtxLnNldERlcHRoV3JpdGUoITApO2EucmVzZXRHTFN0YXRlKCl9fX07XG5USFJFRS5TcHJpdGVQbHVnaW49ZnVuY3Rpb24oYSxiKXt2YXIgYyxkLGUsZixnLGgsayxsLG0scCxuLHEscixzLHYsdCx1O2Z1bmN0aW9uIEQoYSxiKXtyZXR1cm4gYS5yZW5kZXJPcmRlciE9PWIucmVuZGVyT3JkZXI/YS5yZW5kZXJPcmRlci1iLnJlbmRlck9yZGVyOmEueiE9PWIuej9iLnotYS56OmIuaWQtYS5pZH12YXIgdz1hLmNvbnRleHQsST1hLnN0YXRlLHoseSxBLEcsQj1uZXcgVEhSRUUuVmVjdG9yMyxGPW5ldyBUSFJFRS5RdWF0ZXJuaW9uLEo9bmV3IFRIUkVFLlZlY3RvcjM7dGhpcy5yZW5kZXI9ZnVuY3Rpb24oUCxLKXtpZigwIT09Yi5sZW5ndGgpe2lmKHZvaWQgMD09PUEpe3ZhciBIPW5ldyBGbG9hdDMyQXJyYXkoWy0uNSwtLjUsMCwwLC41LC0uNSwxLDAsLjUsLjUsMSwxLC0uNSwuNSwwLDFdKSxNPW5ldyBVaW50MTZBcnJheShbMCwxLDIsMCwyLDNdKTt6PXcuY3JlYXRlQnVmZmVyKCk7eT13LmNyZWF0ZUJ1ZmZlcigpO3cuYmluZEJ1ZmZlcih3LkFSUkFZX0JVRkZFUixcbnopO3cuYnVmZmVyRGF0YSh3LkFSUkFZX0JVRkZFUixILHcuU1RBVElDX0RSQVcpO3cuYmluZEJ1ZmZlcih3LkVMRU1FTlRfQVJSQVlfQlVGRkVSLHkpO3cuYnVmZmVyRGF0YSh3LkVMRU1FTlRfQVJSQVlfQlVGRkVSLE0sdy5TVEFUSUNfRFJBVyk7dmFyIEg9dy5jcmVhdGVQcm9ncmFtKCksTT13LmNyZWF0ZVNoYWRlcih3LlZFUlRFWF9TSEFERVIpLE89dy5jcmVhdGVTaGFkZXIody5GUkFHTUVOVF9TSEFERVIpO3cuc2hhZGVyU291cmNlKE0sW1wicHJlY2lzaW9uIFwiK2EuZ2V0UHJlY2lzaW9uKCkrXCIgZmxvYXQ7XCIsXCJ1bmlmb3JtIG1hdDQgbW9kZWxWaWV3TWF0cml4O1xcbnVuaWZvcm0gbWF0NCBwcm9qZWN0aW9uTWF0cml4O1xcbnVuaWZvcm0gZmxvYXQgcm90YXRpb247XFxudW5pZm9ybSB2ZWMyIHNjYWxlO1xcbnVuaWZvcm0gdmVjMiB1dk9mZnNldDtcXG51bmlmb3JtIHZlYzIgdXZTY2FsZTtcXG5hdHRyaWJ1dGUgdmVjMiBwb3NpdGlvbjtcXG5hdHRyaWJ1dGUgdmVjMiB1djtcXG52YXJ5aW5nIHZlYzIgdlVWO1xcbnZvaWQgbWFpbigpIHtcXG52VVYgPSB1dk9mZnNldCArIHV2ICogdXZTY2FsZTtcXG52ZWMyIGFsaWduZWRQb3NpdGlvbiA9IHBvc2l0aW9uICogc2NhbGU7XFxudmVjMiByb3RhdGVkUG9zaXRpb247XFxucm90YXRlZFBvc2l0aW9uLnggPSBjb3MoIHJvdGF0aW9uICkgKiBhbGlnbmVkUG9zaXRpb24ueCAtIHNpbiggcm90YXRpb24gKSAqIGFsaWduZWRQb3NpdGlvbi55O1xcbnJvdGF0ZWRQb3NpdGlvbi55ID0gc2luKCByb3RhdGlvbiApICogYWxpZ25lZFBvc2l0aW9uLnggKyBjb3MoIHJvdGF0aW9uICkgKiBhbGlnbmVkUG9zaXRpb24ueTtcXG52ZWM0IGZpbmFsUG9zaXRpb247XFxuZmluYWxQb3NpdGlvbiA9IG1vZGVsVmlld01hdHJpeCAqIHZlYzQoIDAuMCwgMC4wLCAwLjAsIDEuMCApO1xcbmZpbmFsUG9zaXRpb24ueHkgKz0gcm90YXRlZFBvc2l0aW9uO1xcbmZpbmFsUG9zaXRpb24gPSBwcm9qZWN0aW9uTWF0cml4ICogZmluYWxQb3NpdGlvbjtcXG5nbF9Qb3NpdGlvbiA9IGZpbmFsUG9zaXRpb247XFxufVwiXS5qb2luKFwiXFxuXCIpKTtcbncuc2hhZGVyU291cmNlKE8sW1wicHJlY2lzaW9uIFwiK2EuZ2V0UHJlY2lzaW9uKCkrXCIgZmxvYXQ7XCIsXCJ1bmlmb3JtIHZlYzMgY29sb3I7XFxudW5pZm9ybSBzYW1wbGVyMkQgbWFwO1xcbnVuaWZvcm0gZmxvYXQgb3BhY2l0eTtcXG51bmlmb3JtIGludCBmb2dUeXBlO1xcbnVuaWZvcm0gdmVjMyBmb2dDb2xvcjtcXG51bmlmb3JtIGZsb2F0IGZvZ0RlbnNpdHk7XFxudW5pZm9ybSBmbG9hdCBmb2dOZWFyO1xcbnVuaWZvcm0gZmxvYXQgZm9nRmFyO1xcbnVuaWZvcm0gZmxvYXQgYWxwaGFUZXN0O1xcbnZhcnlpbmcgdmVjMiB2VVY7XFxudm9pZCBtYWluKCkge1xcbnZlYzQgdGV4dHVyZSA9IHRleHR1cmUyRCggbWFwLCB2VVYgKTtcXG5pZiAoIHRleHR1cmUuYSA8IGFscGhhVGVzdCApIGRpc2NhcmQ7XFxuZ2xfRnJhZ0NvbG9yID0gdmVjNCggY29sb3IgKiB0ZXh0dXJlLnh5eiwgdGV4dHVyZS5hICogb3BhY2l0eSApO1xcbmlmICggZm9nVHlwZSA+IDAgKSB7XFxuZmxvYXQgZGVwdGggPSBnbF9GcmFnQ29vcmQueiAvIGdsX0ZyYWdDb29yZC53O1xcbmZsb2F0IGZvZ0ZhY3RvciA9IDAuMDtcXG5pZiAoIGZvZ1R5cGUgPT0gMSApIHtcXG5mb2dGYWN0b3IgPSBzbW9vdGhzdGVwKCBmb2dOZWFyLCBmb2dGYXIsIGRlcHRoICk7XFxufSBlbHNlIHtcXG5jb25zdCBmbG9hdCBMT0cyID0gMS40NDI2OTU7XFxuZm9nRmFjdG9yID0gZXhwMiggLSBmb2dEZW5zaXR5ICogZm9nRGVuc2l0eSAqIGRlcHRoICogZGVwdGggKiBMT0cyICk7XFxuZm9nRmFjdG9yID0gMS4wIC0gY2xhbXAoIGZvZ0ZhY3RvciwgMC4wLCAxLjAgKTtcXG59XFxuZ2xfRnJhZ0NvbG9yID0gbWl4KCBnbF9GcmFnQ29sb3IsIHZlYzQoIGZvZ0NvbG9yLCBnbF9GcmFnQ29sb3IudyApLCBmb2dGYWN0b3IgKTtcXG59XFxufVwiXS5qb2luKFwiXFxuXCIpKTtcbncuY29tcGlsZVNoYWRlcihNKTt3LmNvbXBpbGVTaGFkZXIoTyk7dy5hdHRhY2hTaGFkZXIoSCxNKTt3LmF0dGFjaFNoYWRlcihILE8pO3cubGlua1Byb2dyYW0oSCk7QT1IO3Q9dy5nZXRBdHRyaWJMb2NhdGlvbihBLFwicG9zaXRpb25cIik7dT13LmdldEF0dHJpYkxvY2F0aW9uKEEsXCJ1dlwiKTtjPXcuZ2V0VW5pZm9ybUxvY2F0aW9uKEEsXCJ1dk9mZnNldFwiKTtkPXcuZ2V0VW5pZm9ybUxvY2F0aW9uKEEsXCJ1dlNjYWxlXCIpO2U9dy5nZXRVbmlmb3JtTG9jYXRpb24oQSxcInJvdGF0aW9uXCIpO2Y9dy5nZXRVbmlmb3JtTG9jYXRpb24oQSxcInNjYWxlXCIpO2c9dy5nZXRVbmlmb3JtTG9jYXRpb24oQSxcImNvbG9yXCIpO2g9dy5nZXRVbmlmb3JtTG9jYXRpb24oQSxcIm1hcFwiKTtrPXcuZ2V0VW5pZm9ybUxvY2F0aW9uKEEsXCJvcGFjaXR5XCIpO2w9dy5nZXRVbmlmb3JtTG9jYXRpb24oQSxcIm1vZGVsVmlld01hdHJpeFwiKTttPXcuZ2V0VW5pZm9ybUxvY2F0aW9uKEEsXCJwcm9qZWN0aW9uTWF0cml4XCIpO3A9XG53LmdldFVuaWZvcm1Mb2NhdGlvbihBLFwiZm9nVHlwZVwiKTtuPXcuZ2V0VW5pZm9ybUxvY2F0aW9uKEEsXCJmb2dEZW5zaXR5XCIpO3E9dy5nZXRVbmlmb3JtTG9jYXRpb24oQSxcImZvZ05lYXJcIik7cj13LmdldFVuaWZvcm1Mb2NhdGlvbihBLFwiZm9nRmFyXCIpO3M9dy5nZXRVbmlmb3JtTG9jYXRpb24oQSxcImZvZ0NvbG9yXCIpO3Y9dy5nZXRVbmlmb3JtTG9jYXRpb24oQSxcImFscGhhVGVzdFwiKTtIPWRvY3VtZW50LmNyZWF0ZUVsZW1lbnROUyhcImh0dHA6Ly93d3cudzMub3JnLzE5OTkveGh0bWxcIixcImNhbnZhc1wiKTtILndpZHRoPTg7SC5oZWlnaHQ9ODtNPUguZ2V0Q29udGV4dChcIjJkXCIpO00uZmlsbFN0eWxlPVwid2hpdGVcIjtNLmZpbGxSZWN0KDAsMCw4LDgpO0c9bmV3IFRIUkVFLlRleHR1cmUoSCk7Ry5uZWVkc1VwZGF0ZT0hMH13LnVzZVByb2dyYW0oQSk7SS5pbml0QXR0cmlidXRlcygpO0kuZW5hYmxlQXR0cmlidXRlKHQpO0kuZW5hYmxlQXR0cmlidXRlKHUpO0kuZGlzYWJsZVVudXNlZEF0dHJpYnV0ZXMoKTtcbkkuZGlzYWJsZSh3LkNVTExfRkFDRSk7SS5lbmFibGUody5CTEVORCk7dy5iaW5kQnVmZmVyKHcuQVJSQVlfQlVGRkVSLHopO3cudmVydGV4QXR0cmliUG9pbnRlcih0LDIsdy5GTE9BVCwhMSwxNiwwKTt3LnZlcnRleEF0dHJpYlBvaW50ZXIodSwyLHcuRkxPQVQsITEsMTYsOCk7dy5iaW5kQnVmZmVyKHcuRUxFTUVOVF9BUlJBWV9CVUZGRVIseSk7dy51bmlmb3JtTWF0cml4NGZ2KG0sITEsSy5wcm9qZWN0aW9uTWF0cml4LmVsZW1lbnRzKTtJLmFjdGl2ZVRleHR1cmUody5URVhUVVJFMCk7dy51bmlmb3JtMWkoaCwwKTtNPUg9MDsoTz1QLmZvZyk/KHcudW5pZm9ybTNmKHMsTy5jb2xvci5yLE8uY29sb3IuZyxPLmNvbG9yLmIpLE8gaW5zdGFuY2VvZiBUSFJFRS5Gb2c/KHcudW5pZm9ybTFmKHEsTy5uZWFyKSx3LnVuaWZvcm0xZihyLE8uZmFyKSx3LnVuaWZvcm0xaShwLDEpLE09SD0xKTpPIGluc3RhbmNlb2YgVEhSRUUuRm9nRXhwMiYmKHcudW5pZm9ybTFmKG4sTy5kZW5zaXR5KSxcbncudW5pZm9ybTFpKHAsMiksTT1IPTIpKToody51bmlmb3JtMWkocCwwKSxNPUg9MCk7Zm9yKHZhciBPPTAsTj1iLmxlbmd0aDtPPE47TysrKXt2YXIgUT1iW09dO1EubW9kZWxWaWV3TWF0cml4Lm11bHRpcGx5TWF0cmljZXMoSy5tYXRyaXhXb3JsZEludmVyc2UsUS5tYXRyaXhXb3JsZCk7US56PS1RLm1vZGVsVmlld01hdHJpeC5lbGVtZW50c1sxNF19Yi5zb3J0KEQpO2Zvcih2YXIgQz1bXSxPPTAsTj1iLmxlbmd0aDtPPE47TysrKXt2YXIgUT1iW09dLEw9US5tYXRlcmlhbDshMSE9PUwudmlzaWJsZSYmKHcudW5pZm9ybTFmKHYsTC5hbHBoYVRlc3QpLHcudW5pZm9ybU1hdHJpeDRmdihsLCExLFEubW9kZWxWaWV3TWF0cml4LmVsZW1lbnRzKSxRLm1hdHJpeFdvcmxkLmRlY29tcG9zZShCLEYsSiksQ1swXT1KLngsQ1sxXT1KLnksUT0wLFAuZm9nJiZMLmZvZyYmKFE9TSksSCE9PVEmJih3LnVuaWZvcm0xaShwLFEpLEg9USksbnVsbCE9PUwubWFwPyh3LnVuaWZvcm0yZihjLEwubWFwLm9mZnNldC54LFxuTC5tYXAub2Zmc2V0LnkpLHcudW5pZm9ybTJmKGQsTC5tYXAucmVwZWF0LngsTC5tYXAucmVwZWF0LnkpKToody51bmlmb3JtMmYoYywwLDApLHcudW5pZm9ybTJmKGQsMSwxKSksdy51bmlmb3JtMWYoayxMLm9wYWNpdHkpLHcudW5pZm9ybTNmKGcsTC5jb2xvci5yLEwuY29sb3IuZyxMLmNvbG9yLmIpLHcudW5pZm9ybTFmKGUsTC5yb3RhdGlvbiksdy51bmlmb3JtMmZ2KGYsQyksSS5zZXRCbGVuZGluZyhMLmJsZW5kaW5nLEwuYmxlbmRFcXVhdGlvbixMLmJsZW5kU3JjLEwuYmxlbmREc3QpLEkuc2V0RGVwdGhUZXN0KEwuZGVwdGhUZXN0KSxJLnNldERlcHRoV3JpdGUoTC5kZXB0aFdyaXRlKSxMLm1hcD9hLnNldFRleHR1cmUyRChMLm1hcCwwKTphLnNldFRleHR1cmUyRChHLDApLHcuZHJhd0VsZW1lbnRzKHcuVFJJQU5HTEVTLDYsdy5VTlNJR05FRF9TSE9SVCwwKSl9SS5lbmFibGUody5DVUxMX0ZBQ0UpO2EucmVzZXRHTFN0YXRlKCl9fX07XG5PYmplY3QuYXNzaWduKFRIUkVFLHtGYWNlNDpmdW5jdGlvbihhLGIsYyxkLGUsZixnKXtjb25zb2xlLndhcm4oXCJUSFJFRS5GYWNlNCBoYXMgYmVlbiByZW1vdmVkLiBBIFRIUkVFLkZhY2UzIHdpbGwgYmUgY3JlYXRlZCBpbnN0ZWFkLlwiKTtyZXR1cm4gbmV3IFRIUkVFLkZhY2UzKGEsYixjLGUsZixnKX0sTGluZVN0cmlwOjAsTGluZVBpZWNlczoxLE1lc2hGYWNlTWF0ZXJpYWw6VEhSRUUuTXVsdGlNYXRlcmlhbCxQb2ludENsb3VkOmZ1bmN0aW9uKGEsYil7Y29uc29sZS53YXJuKFwiVEhSRUUuUG9pbnRDbG91ZCBoYXMgYmVlbiByZW5hbWVkIHRvIFRIUkVFLlBvaW50cy5cIik7cmV0dXJuIG5ldyBUSFJFRS5Qb2ludHMoYSxiKX0sUGFydGljbGU6VEhSRUUuU3ByaXRlLFBhcnRpY2xlU3lzdGVtOmZ1bmN0aW9uKGEsYil7Y29uc29sZS53YXJuKFwiVEhSRUUuUGFydGljbGVTeXN0ZW0gaGFzIGJlZW4gcmVuYW1lZCB0byBUSFJFRS5Qb2ludHMuXCIpO3JldHVybiBuZXcgVEhSRUUuUG9pbnRzKGEsXG5iKX0sUG9pbnRDbG91ZE1hdGVyaWFsOmZ1bmN0aW9uKGEpe2NvbnNvbGUud2FybihcIlRIUkVFLlBvaW50Q2xvdWRNYXRlcmlhbCBoYXMgYmVlbiByZW5hbWVkIHRvIFRIUkVFLlBvaW50c01hdGVyaWFsLlwiKTtyZXR1cm4gbmV3IFRIUkVFLlBvaW50c01hdGVyaWFsKGEpfSxQYXJ0aWNsZUJhc2ljTWF0ZXJpYWw6ZnVuY3Rpb24oYSl7Y29uc29sZS53YXJuKFwiVEhSRUUuUGFydGljbGVCYXNpY01hdGVyaWFsIGhhcyBiZWVuIHJlbmFtZWQgdG8gVEhSRUUuUG9pbnRzTWF0ZXJpYWwuXCIpO3JldHVybiBuZXcgVEhSRUUuUG9pbnRzTWF0ZXJpYWwoYSl9LFBhcnRpY2xlU3lzdGVtTWF0ZXJpYWw6ZnVuY3Rpb24oYSl7Y29uc29sZS53YXJuKFwiVEhSRUUuUGFydGljbGVTeXN0ZW1NYXRlcmlhbCBoYXMgYmVlbiByZW5hbWVkIHRvIFRIUkVFLlBvaW50c01hdGVyaWFsLlwiKTtyZXR1cm4gbmV3IFRIUkVFLlBvaW50c01hdGVyaWFsKGEpfSxWZXJ0ZXg6ZnVuY3Rpb24oYSxiLGMpe2NvbnNvbGUud2FybihcIlRIUkVFLlZlcnRleCBoYXMgYmVlbiByZW1vdmVkLiBVc2UgVEhSRUUuVmVjdG9yMyBpbnN0ZWFkLlwiKTtcbnJldHVybiBuZXcgVEhSRUUuVmVjdG9yMyhhLGIsYyl9fSk7T2JqZWN0LmFzc2lnbihUSFJFRS5Cb3gyLnByb3RvdHlwZSx7ZW1wdHk6ZnVuY3Rpb24oKXtjb25zb2xlLndhcm4oXCJUSFJFRS5Cb3gyOiAuZW1wdHkoKSBoYXMgYmVlbiByZW5hbWVkIHRvIC5pc0VtcHR5KCkuXCIpO3JldHVybiB0aGlzLmlzRW1wdHkoKX0saXNJbnRlcnNlY3Rpb25Cb3g6ZnVuY3Rpb24oYSl7Y29uc29sZS53YXJuKFwiVEhSRUUuQm94MjogLmlzSW50ZXJzZWN0aW9uQm94KCkgaGFzIGJlZW4gcmVuYW1lZCB0byAuaW50ZXJzZWN0c0JveCgpLlwiKTtyZXR1cm4gdGhpcy5pbnRlcnNlY3RzQm94KGEpfX0pO1xuT2JqZWN0LmFzc2lnbihUSFJFRS5Cb3gzLnByb3RvdHlwZSx7ZW1wdHk6ZnVuY3Rpb24oKXtjb25zb2xlLndhcm4oXCJUSFJFRS5Cb3gzOiAuZW1wdHkoKSBoYXMgYmVlbiByZW5hbWVkIHRvIC5pc0VtcHR5KCkuXCIpO3JldHVybiB0aGlzLmlzRW1wdHkoKX0saXNJbnRlcnNlY3Rpb25Cb3g6ZnVuY3Rpb24oYSl7Y29uc29sZS53YXJuKFwiVEhSRUUuQm94MzogLmlzSW50ZXJzZWN0aW9uQm94KCkgaGFzIGJlZW4gcmVuYW1lZCB0byAuaW50ZXJzZWN0c0JveCgpLlwiKTtyZXR1cm4gdGhpcy5pbnRlcnNlY3RzQm94KGEpfSxpc0ludGVyc2VjdGlvblNwaGVyZTpmdW5jdGlvbihhKXtjb25zb2xlLndhcm4oXCJUSFJFRS5Cb3gzOiAuaXNJbnRlcnNlY3Rpb25TcGhlcmUoKSBoYXMgYmVlbiByZW5hbWVkIHRvIC5pbnRlcnNlY3RzU3BoZXJlKCkuXCIpO3JldHVybiB0aGlzLmludGVyc2VjdHNTcGhlcmUoYSl9fSk7XG5PYmplY3QuYXNzaWduKFRIUkVFLk1hdHJpeDMucHJvdG90eXBlLHttdWx0aXBseVZlY3RvcjM6ZnVuY3Rpb24oYSl7Y29uc29sZS53YXJuKFwiVEhSRUUuTWF0cml4MzogLm11bHRpcGx5VmVjdG9yMygpIGhhcyBiZWVuIHJlbW92ZWQuIFVzZSB2ZWN0b3IuYXBwbHlNYXRyaXgzKCBtYXRyaXggKSBpbnN0ZWFkLlwiKTtyZXR1cm4gYS5hcHBseU1hdHJpeDModGhpcyl9LG11bHRpcGx5VmVjdG9yM0FycmF5OmZ1bmN0aW9uKGEpe2NvbnNvbGUud2FybihcIlRIUkVFLk1hdHJpeDM6IC5tdWx0aXBseVZlY3RvcjNBcnJheSgpIGhhcyBiZWVuIHJlbmFtZWQuIFVzZSBtYXRyaXguYXBwbHlUb1ZlY3RvcjNBcnJheSggYXJyYXkgKSBpbnN0ZWFkLlwiKTtyZXR1cm4gdGhpcy5hcHBseVRvVmVjdG9yM0FycmF5KGEpfX0pO1xuT2JqZWN0LmFzc2lnbihUSFJFRS5NYXRyaXg0LnByb3RvdHlwZSx7ZXh0cmFjdFBvc2l0aW9uOmZ1bmN0aW9uKGEpe2NvbnNvbGUud2FybihcIlRIUkVFLk1hdHJpeDQ6IC5leHRyYWN0UG9zaXRpb24oKSBoYXMgYmVlbiByZW5hbWVkIHRvIC5jb3B5UG9zaXRpb24oKS5cIik7cmV0dXJuIHRoaXMuY29weVBvc2l0aW9uKGEpfSxzZXRSb3RhdGlvbkZyb21RdWF0ZXJuaW9uOmZ1bmN0aW9uKGEpe2NvbnNvbGUud2FybihcIlRIUkVFLk1hdHJpeDQ6IC5zZXRSb3RhdGlvbkZyb21RdWF0ZXJuaW9uKCkgaGFzIGJlZW4gcmVuYW1lZCB0byAubWFrZVJvdGF0aW9uRnJvbVF1YXRlcm5pb24oKS5cIik7cmV0dXJuIHRoaXMubWFrZVJvdGF0aW9uRnJvbVF1YXRlcm5pb24oYSl9LG11bHRpcGx5VmVjdG9yMzpmdW5jdGlvbihhKXtjb25zb2xlLndhcm4oXCJUSFJFRS5NYXRyaXg0OiAubXVsdGlwbHlWZWN0b3IzKCkgaGFzIGJlZW4gcmVtb3ZlZC4gVXNlIHZlY3Rvci5hcHBseU1hdHJpeDQoIG1hdHJpeCApIG9yIHZlY3Rvci5hcHBseVByb2plY3Rpb24oIG1hdHJpeCApIGluc3RlYWQuXCIpO1xucmV0dXJuIGEuYXBwbHlQcm9qZWN0aW9uKHRoaXMpfSxtdWx0aXBseVZlY3RvcjQ6ZnVuY3Rpb24oYSl7Y29uc29sZS53YXJuKFwiVEhSRUUuTWF0cml4NDogLm11bHRpcGx5VmVjdG9yNCgpIGhhcyBiZWVuIHJlbW92ZWQuIFVzZSB2ZWN0b3IuYXBwbHlNYXRyaXg0KCBtYXRyaXggKSBpbnN0ZWFkLlwiKTtyZXR1cm4gYS5hcHBseU1hdHJpeDQodGhpcyl9LG11bHRpcGx5VmVjdG9yM0FycmF5OmZ1bmN0aW9uKGEpe2NvbnNvbGUud2FybihcIlRIUkVFLk1hdHJpeDQ6IC5tdWx0aXBseVZlY3RvcjNBcnJheSgpIGhhcyBiZWVuIHJlbmFtZWQuIFVzZSBtYXRyaXguYXBwbHlUb1ZlY3RvcjNBcnJheSggYXJyYXkgKSBpbnN0ZWFkLlwiKTtyZXR1cm4gdGhpcy5hcHBseVRvVmVjdG9yM0FycmF5KGEpfSxyb3RhdGVBeGlzOmZ1bmN0aW9uKGEpe2NvbnNvbGUud2FybihcIlRIUkVFLk1hdHJpeDQ6IC5yb3RhdGVBeGlzKCkgaGFzIGJlZW4gcmVtb3ZlZC4gVXNlIFZlY3RvcjMudHJhbnNmb3JtRGlyZWN0aW9uKCBtYXRyaXggKSBpbnN0ZWFkLlwiKTtcbmEudHJhbnNmb3JtRGlyZWN0aW9uKHRoaXMpfSxjcm9zc1ZlY3RvcjpmdW5jdGlvbihhKXtjb25zb2xlLndhcm4oXCJUSFJFRS5NYXRyaXg0OiAuY3Jvc3NWZWN0b3IoKSBoYXMgYmVlbiByZW1vdmVkLiBVc2UgdmVjdG9yLmFwcGx5TWF0cml4NCggbWF0cml4ICkgaW5zdGVhZC5cIik7cmV0dXJuIGEuYXBwbHlNYXRyaXg0KHRoaXMpfSx0cmFuc2xhdGU6ZnVuY3Rpb24oYSl7Y29uc29sZS5lcnJvcihcIlRIUkVFLk1hdHJpeDQ6IC50cmFuc2xhdGUoKSBoYXMgYmVlbiByZW1vdmVkLlwiKX0scm90YXRlWDpmdW5jdGlvbihhKXtjb25zb2xlLmVycm9yKFwiVEhSRUUuTWF0cml4NDogLnJvdGF0ZVgoKSBoYXMgYmVlbiByZW1vdmVkLlwiKX0scm90YXRlWTpmdW5jdGlvbihhKXtjb25zb2xlLmVycm9yKFwiVEhSRUUuTWF0cml4NDogLnJvdGF0ZVkoKSBoYXMgYmVlbiByZW1vdmVkLlwiKX0scm90YXRlWjpmdW5jdGlvbihhKXtjb25zb2xlLmVycm9yKFwiVEhSRUUuTWF0cml4NDogLnJvdGF0ZVooKSBoYXMgYmVlbiByZW1vdmVkLlwiKX0sXG5yb3RhdGVCeUF4aXM6ZnVuY3Rpb24oYSxiKXtjb25zb2xlLmVycm9yKFwiVEhSRUUuTWF0cml4NDogLnJvdGF0ZUJ5QXhpcygpIGhhcyBiZWVuIHJlbW92ZWQuXCIpfX0pO09iamVjdC5hc3NpZ24oVEhSRUUuUGxhbmUucHJvdG90eXBlLHtpc0ludGVyc2VjdGlvbkxpbmU6ZnVuY3Rpb24oYSl7Y29uc29sZS53YXJuKFwiVEhSRUUuUGxhbmU6IC5pc0ludGVyc2VjdGlvbkxpbmUoKSBoYXMgYmVlbiByZW5hbWVkIHRvIC5pbnRlcnNlY3RzTGluZSgpLlwiKTtyZXR1cm4gdGhpcy5pbnRlcnNlY3RzTGluZShhKX19KTtPYmplY3QuYXNzaWduKFRIUkVFLlF1YXRlcm5pb24ucHJvdG90eXBlLHttdWx0aXBseVZlY3RvcjM6ZnVuY3Rpb24oYSl7Y29uc29sZS53YXJuKFwiVEhSRUUuUXVhdGVybmlvbjogLm11bHRpcGx5VmVjdG9yMygpIGhhcyBiZWVuIHJlbW92ZWQuIFVzZSBpcyBub3cgdmVjdG9yLmFwcGx5UXVhdGVybmlvbiggcXVhdGVybmlvbiApIGluc3RlYWQuXCIpO3JldHVybiBhLmFwcGx5UXVhdGVybmlvbih0aGlzKX19KTtcbk9iamVjdC5hc3NpZ24oVEhSRUUuUmF5LnByb3RvdHlwZSx7aXNJbnRlcnNlY3Rpb25Cb3g6ZnVuY3Rpb24oYSl7Y29uc29sZS53YXJuKFwiVEhSRUUuUmF5OiAuaXNJbnRlcnNlY3Rpb25Cb3goKSBoYXMgYmVlbiByZW5hbWVkIHRvIC5pbnRlcnNlY3RzQm94KCkuXCIpO3JldHVybiB0aGlzLmludGVyc2VjdHNCb3goYSl9LGlzSW50ZXJzZWN0aW9uUGxhbmU6ZnVuY3Rpb24oYSl7Y29uc29sZS53YXJuKFwiVEhSRUUuUmF5OiAuaXNJbnRlcnNlY3Rpb25QbGFuZSgpIGhhcyBiZWVuIHJlbmFtZWQgdG8gLmludGVyc2VjdHNQbGFuZSgpLlwiKTtyZXR1cm4gdGhpcy5pbnRlcnNlY3RzUGxhbmUoYSl9LGlzSW50ZXJzZWN0aW9uU3BoZXJlOmZ1bmN0aW9uKGEpe2NvbnNvbGUud2FybihcIlRIUkVFLlJheTogLmlzSW50ZXJzZWN0aW9uU3BoZXJlKCkgaGFzIGJlZW4gcmVuYW1lZCB0byAuaW50ZXJzZWN0c1NwaGVyZSgpLlwiKTtyZXR1cm4gdGhpcy5pbnRlcnNlY3RzU3BoZXJlKGEpfX0pO1xuT2JqZWN0LmFzc2lnbihUSFJFRS5WZWN0b3IzLnByb3RvdHlwZSx7c2V0RXVsZXJGcm9tUm90YXRpb25NYXRyaXg6ZnVuY3Rpb24oKXtjb25zb2xlLmVycm9yKFwiVEhSRUUuVmVjdG9yMzogLnNldEV1bGVyRnJvbVJvdGF0aW9uTWF0cml4KCkgaGFzIGJlZW4gcmVtb3ZlZC4gVXNlIEV1bGVyLnNldEZyb21Sb3RhdGlvbk1hdHJpeCgpIGluc3RlYWQuXCIpfSxzZXRFdWxlckZyb21RdWF0ZXJuaW9uOmZ1bmN0aW9uKCl7Y29uc29sZS5lcnJvcihcIlRIUkVFLlZlY3RvcjM6IC5zZXRFdWxlckZyb21RdWF0ZXJuaW9uKCkgaGFzIGJlZW4gcmVtb3ZlZC4gVXNlIEV1bGVyLnNldEZyb21RdWF0ZXJuaW9uKCkgaW5zdGVhZC5cIil9LGdldFBvc2l0aW9uRnJvbU1hdHJpeDpmdW5jdGlvbihhKXtjb25zb2xlLndhcm4oXCJUSFJFRS5WZWN0b3IzOiAuZ2V0UG9zaXRpb25Gcm9tTWF0cml4KCkgaGFzIGJlZW4gcmVuYW1lZCB0byAuc2V0RnJvbU1hdHJpeFBvc2l0aW9uKCkuXCIpO3JldHVybiB0aGlzLnNldEZyb21NYXRyaXhQb3NpdGlvbihhKX0sXG5nZXRTY2FsZUZyb21NYXRyaXg6ZnVuY3Rpb24oYSl7Y29uc29sZS53YXJuKFwiVEhSRUUuVmVjdG9yMzogLmdldFNjYWxlRnJvbU1hdHJpeCgpIGhhcyBiZWVuIHJlbmFtZWQgdG8gLnNldEZyb21NYXRyaXhTY2FsZSgpLlwiKTtyZXR1cm4gdGhpcy5zZXRGcm9tTWF0cml4U2NhbGUoYSl9LGdldENvbHVtbkZyb21NYXRyaXg6ZnVuY3Rpb24oYSxiKXtjb25zb2xlLndhcm4oXCJUSFJFRS5WZWN0b3IzOiAuZ2V0Q29sdW1uRnJvbU1hdHJpeCgpIGhhcyBiZWVuIHJlbmFtZWQgdG8gLnNldEZyb21NYXRyaXhDb2x1bW4oKS5cIik7cmV0dXJuIHRoaXMuc2V0RnJvbU1hdHJpeENvbHVtbihiLGEpfX0pO1xuT2JqZWN0LmFzc2lnbihUSFJFRS5PYmplY3QzRC5wcm90b3R5cGUse2dldENoaWxkQnlOYW1lOmZ1bmN0aW9uKGEpe2NvbnNvbGUud2FybihcIlRIUkVFLk9iamVjdDNEOiAuZ2V0Q2hpbGRCeU5hbWUoKSBoYXMgYmVlbiByZW5hbWVkIHRvIC5nZXRPYmplY3RCeU5hbWUoKS5cIik7cmV0dXJuIHRoaXMuZ2V0T2JqZWN0QnlOYW1lKGEpfSxyZW5kZXJEZXB0aDpmdW5jdGlvbihhKXtjb25zb2xlLndhcm4oXCJUSFJFRS5PYmplY3QzRDogLnJlbmRlckRlcHRoIGhhcyBiZWVuIHJlbW92ZWQuIFVzZSAucmVuZGVyT3JkZXIsIGluc3RlYWQuXCIpfSx0cmFuc2xhdGU6ZnVuY3Rpb24oYSxiKXtjb25zb2xlLndhcm4oXCJUSFJFRS5PYmplY3QzRDogLnRyYW5zbGF0ZSgpIGhhcyBiZWVuIHJlbW92ZWQuIFVzZSAudHJhbnNsYXRlT25BeGlzKCBheGlzLCBkaXN0YW5jZSApIGluc3RlYWQuXCIpO3JldHVybiB0aGlzLnRyYW5zbGF0ZU9uQXhpcyhiLGEpfX0pO1xuT2JqZWN0LmRlZmluZVByb3BlcnRpZXMoVEhSRUUuT2JqZWN0M0QucHJvdG90eXBlLHtldWxlck9yZGVyOntnZXQ6ZnVuY3Rpb24oKXtjb25zb2xlLndhcm4oXCJUSFJFRS5PYmplY3QzRDogLmV1bGVyT3JkZXIgaXMgbm93IC5yb3RhdGlvbi5vcmRlci5cIik7cmV0dXJuIHRoaXMucm90YXRpb24ub3JkZXJ9LHNldDpmdW5jdGlvbihhKXtjb25zb2xlLndhcm4oXCJUSFJFRS5PYmplY3QzRDogLmV1bGVyT3JkZXIgaXMgbm93IC5yb3RhdGlvbi5vcmRlci5cIik7dGhpcy5yb3RhdGlvbi5vcmRlcj1hfX0sdXNlUXVhdGVybmlvbjp7Z2V0OmZ1bmN0aW9uKCl7Y29uc29sZS53YXJuKFwiVEhSRUUuT2JqZWN0M0Q6IC51c2VRdWF0ZXJuaW9uIGhhcyBiZWVuIHJlbW92ZWQuIFRoZSBsaWJyYXJ5IG5vdyB1c2VzIHF1YXRlcm5pb25zIGJ5IGRlZmF1bHQuXCIpfSxzZXQ6ZnVuY3Rpb24oYSl7Y29uc29sZS53YXJuKFwiVEhSRUUuT2JqZWN0M0Q6IC51c2VRdWF0ZXJuaW9uIGhhcyBiZWVuIHJlbW92ZWQuIFRoZSBsaWJyYXJ5IG5vdyB1c2VzIHF1YXRlcm5pb25zIGJ5IGRlZmF1bHQuXCIpfX19KTtcbk9iamVjdC5kZWZpbmVQcm9wZXJ0aWVzKFRIUkVFLkxPRC5wcm90b3R5cGUse29iamVjdHM6e2dldDpmdW5jdGlvbigpe2NvbnNvbGUud2FybihcIlRIUkVFLkxPRDogLm9iamVjdHMgaGFzIGJlZW4gcmVuYW1lZCB0byAubGV2ZWxzLlwiKTtyZXR1cm4gdGhpcy5sZXZlbHN9fX0pO1RIUkVFLlBlcnNwZWN0aXZlQ2FtZXJhLnByb3RvdHlwZS5zZXRMZW5zPWZ1bmN0aW9uKGEsYil7Y29uc29sZS53YXJuKFwiVEhSRUUuUGVyc3BlY3RpdmVDYW1lcmEuc2V0TGVucyBpcyBkZXByZWNhdGVkLiBVc2UgLnNldEZvY2FsTGVuZ3RoIGFuZCAuZmlsbUdhdWdlIGZvciBhIHBob3RvZ3JhcGhpYyBzZXR1cC5cIik7dm9pZCAwIT09YiYmKHRoaXMuZmlsbUdhdWdlPWIpO3RoaXMuc2V0Rm9jYWxMZW5ndGgoYSl9O1xuT2JqZWN0LmRlZmluZVByb3BlcnRpZXMoVEhSRUUuTGlnaHQucHJvdG90eXBlLHtvbmx5U2hhZG93OntzZXQ6ZnVuY3Rpb24oYSl7Y29uc29sZS53YXJuKFwiVEhSRUUuTGlnaHQ6IC5vbmx5U2hhZG93IGhhcyBiZWVuIHJlbW92ZWQuXCIpfX0sc2hhZG93Q2FtZXJhRm92OntzZXQ6ZnVuY3Rpb24oYSl7Y29uc29sZS53YXJuKFwiVEhSRUUuTGlnaHQ6IC5zaGFkb3dDYW1lcmFGb3YgaXMgbm93IC5zaGFkb3cuY2FtZXJhLmZvdi5cIik7dGhpcy5zaGFkb3cuY2FtZXJhLmZvdj1hfX0sc2hhZG93Q2FtZXJhTGVmdDp7c2V0OmZ1bmN0aW9uKGEpe2NvbnNvbGUud2FybihcIlRIUkVFLkxpZ2h0OiAuc2hhZG93Q2FtZXJhTGVmdCBpcyBub3cgLnNoYWRvdy5jYW1lcmEubGVmdC5cIik7dGhpcy5zaGFkb3cuY2FtZXJhLmxlZnQ9YX19LHNoYWRvd0NhbWVyYVJpZ2h0OntzZXQ6ZnVuY3Rpb24oYSl7Y29uc29sZS53YXJuKFwiVEhSRUUuTGlnaHQ6IC5zaGFkb3dDYW1lcmFSaWdodCBpcyBub3cgLnNoYWRvdy5jYW1lcmEucmlnaHQuXCIpO1xudGhpcy5zaGFkb3cuY2FtZXJhLnJpZ2h0PWF9fSxzaGFkb3dDYW1lcmFUb3A6e3NldDpmdW5jdGlvbihhKXtjb25zb2xlLndhcm4oXCJUSFJFRS5MaWdodDogLnNoYWRvd0NhbWVyYVRvcCBpcyBub3cgLnNoYWRvdy5jYW1lcmEudG9wLlwiKTt0aGlzLnNoYWRvdy5jYW1lcmEudG9wPWF9fSxzaGFkb3dDYW1lcmFCb3R0b206e3NldDpmdW5jdGlvbihhKXtjb25zb2xlLndhcm4oXCJUSFJFRS5MaWdodDogLnNoYWRvd0NhbWVyYUJvdHRvbSBpcyBub3cgLnNoYWRvdy5jYW1lcmEuYm90dG9tLlwiKTt0aGlzLnNoYWRvdy5jYW1lcmEuYm90dG9tPWF9fSxzaGFkb3dDYW1lcmFOZWFyOntzZXQ6ZnVuY3Rpb24oYSl7Y29uc29sZS53YXJuKFwiVEhSRUUuTGlnaHQ6IC5zaGFkb3dDYW1lcmFOZWFyIGlzIG5vdyAuc2hhZG93LmNhbWVyYS5uZWFyLlwiKTt0aGlzLnNoYWRvdy5jYW1lcmEubmVhcj1hfX0sc2hhZG93Q2FtZXJhRmFyOntzZXQ6ZnVuY3Rpb24oYSl7Y29uc29sZS53YXJuKFwiVEhSRUUuTGlnaHQ6IC5zaGFkb3dDYW1lcmFGYXIgaXMgbm93IC5zaGFkb3cuY2FtZXJhLmZhci5cIik7XG50aGlzLnNoYWRvdy5jYW1lcmEuZmFyPWF9fSxzaGFkb3dDYW1lcmFWaXNpYmxlOntzZXQ6ZnVuY3Rpb24oYSl7Y29uc29sZS53YXJuKFwiVEhSRUUuTGlnaHQ6IC5zaGFkb3dDYW1lcmFWaXNpYmxlIGhhcyBiZWVuIHJlbW92ZWQuIFVzZSBuZXcgVEhSRUUuQ2FtZXJhSGVscGVyKCBsaWdodC5zaGFkb3cuY2FtZXJhICkgaW5zdGVhZC5cIil9fSxzaGFkb3dCaWFzOntzZXQ6ZnVuY3Rpb24oYSl7Y29uc29sZS53YXJuKFwiVEhSRUUuTGlnaHQ6IC5zaGFkb3dCaWFzIGlzIG5vdyAuc2hhZG93LmJpYXMuXCIpO3RoaXMuc2hhZG93LmJpYXM9YX19LHNoYWRvd0RhcmtuZXNzOntzZXQ6ZnVuY3Rpb24oYSl7Y29uc29sZS53YXJuKFwiVEhSRUUuTGlnaHQ6IC5zaGFkb3dEYXJrbmVzcyBoYXMgYmVlbiByZW1vdmVkLlwiKX19LHNoYWRvd01hcFdpZHRoOntzZXQ6ZnVuY3Rpb24oYSl7Y29uc29sZS53YXJuKFwiVEhSRUUuTGlnaHQ6IC5zaGFkb3dNYXBXaWR0aCBpcyBub3cgLnNoYWRvdy5tYXBTaXplLndpZHRoLlwiKTtcbnRoaXMuc2hhZG93Lm1hcFNpemUud2lkdGg9YX19LHNoYWRvd01hcEhlaWdodDp7c2V0OmZ1bmN0aW9uKGEpe2NvbnNvbGUud2FybihcIlRIUkVFLkxpZ2h0OiAuc2hhZG93TWFwSGVpZ2h0IGlzIG5vdyAuc2hhZG93Lm1hcFNpemUuaGVpZ2h0LlwiKTt0aGlzLnNoYWRvdy5tYXBTaXplLmhlaWdodD1hfX19KTtPYmplY3QuZGVmaW5lUHJvcGVydGllcyhUSFJFRS5CdWZmZXJBdHRyaWJ1dGUucHJvdG90eXBlLHtsZW5ndGg6e2dldDpmdW5jdGlvbigpe2NvbnNvbGUud2FybihcIlRIUkVFLkJ1ZmZlckF0dHJpYnV0ZTogLmxlbmd0aCBoYXMgYmVlbiBkZXByZWNhdGVkLiBQbGVhc2UgdXNlIC5jb3VudC5cIik7cmV0dXJuIHRoaXMuYXJyYXkubGVuZ3RofX19KTtcbk9iamVjdC5hc3NpZ24oVEhSRUUuQnVmZmVyR2VvbWV0cnkucHJvdG90eXBlLHthZGRJbmRleDpmdW5jdGlvbihhKXtjb25zb2xlLndhcm4oXCJUSFJFRS5CdWZmZXJHZW9tZXRyeTogLmFkZEluZGV4KCkgaGFzIGJlZW4gcmVuYW1lZCB0byAuc2V0SW5kZXgoKS5cIik7dGhpcy5zZXRJbmRleChhKX0sYWRkRHJhd0NhbGw6ZnVuY3Rpb24oYSxiLGMpe3ZvaWQgMCE9PWMmJmNvbnNvbGUud2FybihcIlRIUkVFLkJ1ZmZlckdlb21ldHJ5OiAuYWRkRHJhd0NhbGwoKSBubyBsb25nZXIgc3VwcG9ydHMgaW5kZXhPZmZzZXQuXCIpO2NvbnNvbGUud2FybihcIlRIUkVFLkJ1ZmZlckdlb21ldHJ5OiAuYWRkRHJhd0NhbGwoKSBpcyBub3cgLmFkZEdyb3VwKCkuXCIpO3RoaXMuYWRkR3JvdXAoYSxiKX0sY2xlYXJEcmF3Q2FsbHM6ZnVuY3Rpb24oKXtjb25zb2xlLndhcm4oXCJUSFJFRS5CdWZmZXJHZW9tZXRyeTogLmNsZWFyRHJhd0NhbGxzKCkgaXMgbm93IC5jbGVhckdyb3VwcygpLlwiKTt0aGlzLmNsZWFyR3JvdXBzKCl9LFxuY29tcHV0ZVRhbmdlbnRzOmZ1bmN0aW9uKCl7Y29uc29sZS53YXJuKFwiVEhSRUUuQnVmZmVyR2VvbWV0cnk6IC5jb21wdXRlVGFuZ2VudHMoKSBoYXMgYmVlbiByZW1vdmVkLlwiKX0sY29tcHV0ZU9mZnNldHM6ZnVuY3Rpb24oKXtjb25zb2xlLndhcm4oXCJUSFJFRS5CdWZmZXJHZW9tZXRyeTogLmNvbXB1dGVPZmZzZXRzKCkgaGFzIGJlZW4gcmVtb3ZlZC5cIil9fSk7T2JqZWN0LmRlZmluZVByb3BlcnRpZXMoVEhSRUUuQnVmZmVyR2VvbWV0cnkucHJvdG90eXBlLHtkcmF3Y2FsbHM6e2dldDpmdW5jdGlvbigpe2NvbnNvbGUuZXJyb3IoXCJUSFJFRS5CdWZmZXJHZW9tZXRyeTogLmRyYXdjYWxscyBoYXMgYmVlbiByZW5hbWVkIHRvIC5ncm91cHMuXCIpO3JldHVybiB0aGlzLmdyb3Vwc319LG9mZnNldHM6e2dldDpmdW5jdGlvbigpe2NvbnNvbGUud2FybihcIlRIUkVFLkJ1ZmZlckdlb21ldHJ5OiAub2Zmc2V0cyBoYXMgYmVlbiByZW5hbWVkIHRvIC5ncm91cHMuXCIpO3JldHVybiB0aGlzLmdyb3Vwc319fSk7XG5PYmplY3QuZGVmaW5lUHJvcGVydGllcyhUSFJFRS5NYXRlcmlhbC5wcm90b3R5cGUse3dyYXBBcm91bmQ6e2dldDpmdW5jdGlvbigpe2NvbnNvbGUud2FybihcIlRIUkVFLlwiK3RoaXMudHlwZStcIjogLndyYXBBcm91bmQgaGFzIGJlZW4gcmVtb3ZlZC5cIil9LHNldDpmdW5jdGlvbihhKXtjb25zb2xlLndhcm4oXCJUSFJFRS5cIit0aGlzLnR5cGUrXCI6IC53cmFwQXJvdW5kIGhhcyBiZWVuIHJlbW92ZWQuXCIpfX0sd3JhcFJHQjp7Z2V0OmZ1bmN0aW9uKCl7Y29uc29sZS53YXJuKFwiVEhSRUUuXCIrdGhpcy50eXBlK1wiOiAud3JhcFJHQiBoYXMgYmVlbiByZW1vdmVkLlwiKTtyZXR1cm4gbmV3IFRIUkVFLkNvbG9yfX19KTtcbk9iamVjdC5kZWZpbmVQcm9wZXJ0aWVzKFRIUkVFLk1lc2hQaG9uZ01hdGVyaWFsLnByb3RvdHlwZSx7bWV0YWw6e2dldDpmdW5jdGlvbigpe2NvbnNvbGUud2FybihcIlRIUkVFLk1lc2hQaG9uZ01hdGVyaWFsOiAubWV0YWwgaGFzIGJlZW4gcmVtb3ZlZC4gVXNlIFRIUkVFLk1lc2hTdGFuZGFyZE1hdGVyaWFsIGluc3RlYWQuXCIpO3JldHVybiExfSxzZXQ6ZnVuY3Rpb24oYSl7Y29uc29sZS53YXJuKFwiVEhSRUUuTWVzaFBob25nTWF0ZXJpYWw6IC5tZXRhbCBoYXMgYmVlbiByZW1vdmVkLiBVc2UgVEhSRUUuTWVzaFN0YW5kYXJkTWF0ZXJpYWwgaW5zdGVhZFwiKX19fSk7XG5PYmplY3QuZGVmaW5lUHJvcGVydGllcyhUSFJFRS5TaGFkZXJNYXRlcmlhbC5wcm90b3R5cGUse2Rlcml2YXRpdmVzOntnZXQ6ZnVuY3Rpb24oKXtjb25zb2xlLndhcm4oXCJUSFJFRS5TaGFkZXJNYXRlcmlhbDogLmRlcml2YXRpdmVzIGhhcyBiZWVuIG1vdmVkIHRvIC5leHRlbnNpb25zLmRlcml2YXRpdmVzLlwiKTtyZXR1cm4gdGhpcy5leHRlbnNpb25zLmRlcml2YXRpdmVzfSxzZXQ6ZnVuY3Rpb24oYSl7Y29uc29sZS53YXJuKFwiVEhSRUUuIFNoYWRlck1hdGVyaWFsOiAuZGVyaXZhdGl2ZXMgaGFzIGJlZW4gbW92ZWQgdG8gLmV4dGVuc2lvbnMuZGVyaXZhdGl2ZXMuXCIpO3RoaXMuZXh0ZW5zaW9ucy5kZXJpdmF0aXZlcz1hfX19KTtcblRIUkVFLkV2ZW50RGlzcGF0Y2hlci5wcm90b3R5cGU9T2JqZWN0LmFzc2lnbihPYmplY3QuY3JlYXRlKHtjb25zdHJ1Y3RvcjpUSFJFRS5FdmVudERpc3BhdGNoZXIsYXBwbHk6ZnVuY3Rpb24oYSl7Y29uc29sZS53YXJuKFwiVEhSRUUuRXZlbnREaXNwYXRjaGVyOiAuYXBwbHkgaXMgZGVwcmVjYXRlZCwganVzdCBpbmhlcml0IG9yIE9iamVjdC5hc3NpZ24gdGhlIHByb3RvdHlwZSB0byBtaXgtaW4uXCIpO09iamVjdC5hc3NpZ24oYSx0aGlzKX19KSxUSFJFRS5FdmVudERpc3BhdGNoZXIucHJvdG90eXBlKTtcbk9iamVjdC5hc3NpZ24oVEhSRUUuV2ViR0xSZW5kZXJlci5wcm90b3R5cGUse3N1cHBvcnRzRmxvYXRUZXh0dXJlczpmdW5jdGlvbigpe2NvbnNvbGUud2FybihcIlRIUkVFLldlYkdMUmVuZGVyZXI6IC5zdXBwb3J0c0Zsb2F0VGV4dHVyZXMoKSBpcyBub3cgLmV4dGVuc2lvbnMuZ2V0KCAnT0VTX3RleHR1cmVfZmxvYXQnICkuXCIpO3JldHVybiB0aGlzLmV4dGVuc2lvbnMuZ2V0KFwiT0VTX3RleHR1cmVfZmxvYXRcIil9LHN1cHBvcnRzSGFsZkZsb2F0VGV4dHVyZXM6ZnVuY3Rpb24oKXtjb25zb2xlLndhcm4oXCJUSFJFRS5XZWJHTFJlbmRlcmVyOiAuc3VwcG9ydHNIYWxmRmxvYXRUZXh0dXJlcygpIGlzIG5vdyAuZXh0ZW5zaW9ucy5nZXQoICdPRVNfdGV4dHVyZV9oYWxmX2Zsb2F0JyApLlwiKTtyZXR1cm4gdGhpcy5leHRlbnNpb25zLmdldChcIk9FU190ZXh0dXJlX2hhbGZfZmxvYXRcIil9LHN1cHBvcnRzU3RhbmRhcmREZXJpdmF0aXZlczpmdW5jdGlvbigpe2NvbnNvbGUud2FybihcIlRIUkVFLldlYkdMUmVuZGVyZXI6IC5zdXBwb3J0c1N0YW5kYXJkRGVyaXZhdGl2ZXMoKSBpcyBub3cgLmV4dGVuc2lvbnMuZ2V0KCAnT0VTX3N0YW5kYXJkX2Rlcml2YXRpdmVzJyApLlwiKTtcbnJldHVybiB0aGlzLmV4dGVuc2lvbnMuZ2V0KFwiT0VTX3N0YW5kYXJkX2Rlcml2YXRpdmVzXCIpfSxzdXBwb3J0c0NvbXByZXNzZWRUZXh0dXJlUzNUQzpmdW5jdGlvbigpe2NvbnNvbGUud2FybihcIlRIUkVFLldlYkdMUmVuZGVyZXI6IC5zdXBwb3J0c0NvbXByZXNzZWRUZXh0dXJlUzNUQygpIGlzIG5vdyAuZXh0ZW5zaW9ucy5nZXQoICdXRUJHTF9jb21wcmVzc2VkX3RleHR1cmVfczN0YycgKS5cIik7cmV0dXJuIHRoaXMuZXh0ZW5zaW9ucy5nZXQoXCJXRUJHTF9jb21wcmVzc2VkX3RleHR1cmVfczN0Y1wiKX0sc3VwcG9ydHNDb21wcmVzc2VkVGV4dHVyZVBWUlRDOmZ1bmN0aW9uKCl7Y29uc29sZS53YXJuKFwiVEhSRUUuV2ViR0xSZW5kZXJlcjogLnN1cHBvcnRzQ29tcHJlc3NlZFRleHR1cmVQVlJUQygpIGlzIG5vdyAuZXh0ZW5zaW9ucy5nZXQoICdXRUJHTF9jb21wcmVzc2VkX3RleHR1cmVfcHZydGMnICkuXCIpO3JldHVybiB0aGlzLmV4dGVuc2lvbnMuZ2V0KFwiV0VCR0xfY29tcHJlc3NlZF90ZXh0dXJlX3B2cnRjXCIpfSxcbnN1cHBvcnRzQmxlbmRNaW5NYXg6ZnVuY3Rpb24oKXtjb25zb2xlLndhcm4oXCJUSFJFRS5XZWJHTFJlbmRlcmVyOiAuc3VwcG9ydHNCbGVuZE1pbk1heCgpIGlzIG5vdyAuZXh0ZW5zaW9ucy5nZXQoICdFWFRfYmxlbmRfbWlubWF4JyApLlwiKTtyZXR1cm4gdGhpcy5leHRlbnNpb25zLmdldChcIkVYVF9ibGVuZF9taW5tYXhcIil9LHN1cHBvcnRzVmVydGV4VGV4dHVyZXM6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5jYXBhYmlsaXRpZXMudmVydGV4VGV4dHVyZXN9LHN1cHBvcnRzSW5zdGFuY2VkQXJyYXlzOmZ1bmN0aW9uKCl7Y29uc29sZS53YXJuKFwiVEhSRUUuV2ViR0xSZW5kZXJlcjogLnN1cHBvcnRzSW5zdGFuY2VkQXJyYXlzKCkgaXMgbm93IC5leHRlbnNpb25zLmdldCggJ0FOR0xFX2luc3RhbmNlZF9hcnJheXMnICkuXCIpO3JldHVybiB0aGlzLmV4dGVuc2lvbnMuZ2V0KFwiQU5HTEVfaW5zdGFuY2VkX2FycmF5c1wiKX0sZW5hYmxlU2Npc3NvclRlc3Q6ZnVuY3Rpb24oYSl7Y29uc29sZS53YXJuKFwiVEhSRUUuV2ViR0xSZW5kZXJlcjogLmVuYWJsZVNjaXNzb3JUZXN0KCkgaXMgbm93IC5zZXRTY2lzc29yVGVzdCgpLlwiKTtcbnRoaXMuc2V0U2Npc3NvclRlc3QoYSl9LGluaXRNYXRlcmlhbDpmdW5jdGlvbigpe2NvbnNvbGUud2FybihcIlRIUkVFLldlYkdMUmVuZGVyZXI6IC5pbml0TWF0ZXJpYWwoKSBoYXMgYmVlbiByZW1vdmVkLlwiKX0sYWRkUHJlUGx1Z2luOmZ1bmN0aW9uKCl7Y29uc29sZS53YXJuKFwiVEhSRUUuV2ViR0xSZW5kZXJlcjogLmFkZFByZVBsdWdpbigpIGhhcyBiZWVuIHJlbW92ZWQuXCIpfSxhZGRQb3N0UGx1Z2luOmZ1bmN0aW9uKCl7Y29uc29sZS53YXJuKFwiVEhSRUUuV2ViR0xSZW5kZXJlcjogLmFkZFBvc3RQbHVnaW4oKSBoYXMgYmVlbiByZW1vdmVkLlwiKX0sdXBkYXRlU2hhZG93TWFwOmZ1bmN0aW9uKCl7Y29uc29sZS53YXJuKFwiVEhSRUUuV2ViR0xSZW5kZXJlcjogLnVwZGF0ZVNoYWRvd01hcCgpIGhhcyBiZWVuIHJlbW92ZWQuXCIpfX0pO1xuT2JqZWN0LmRlZmluZVByb3BlcnRpZXMoVEhSRUUuV2ViR0xSZW5kZXJlci5wcm90b3R5cGUse3NoYWRvd01hcEVuYWJsZWQ6e2dldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLnNoYWRvd01hcC5lbmFibGVkfSxzZXQ6ZnVuY3Rpb24oYSl7Y29uc29sZS53YXJuKFwiVEhSRUUuV2ViR0xSZW5kZXJlcjogLnNoYWRvd01hcEVuYWJsZWQgaXMgbm93IC5zaGFkb3dNYXAuZW5hYmxlZC5cIik7dGhpcy5zaGFkb3dNYXAuZW5hYmxlZD1hfX0sc2hhZG93TWFwVHlwZTp7Z2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuc2hhZG93TWFwLnR5cGV9LHNldDpmdW5jdGlvbihhKXtjb25zb2xlLndhcm4oXCJUSFJFRS5XZWJHTFJlbmRlcmVyOiAuc2hhZG93TWFwVHlwZSBpcyBub3cgLnNoYWRvd01hcC50eXBlLlwiKTt0aGlzLnNoYWRvd01hcC50eXBlPWF9fSxzaGFkb3dNYXBDdWxsRmFjZTp7Z2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuc2hhZG93TWFwLmN1bGxGYWNlfSxzZXQ6ZnVuY3Rpb24oYSl7Y29uc29sZS53YXJuKFwiVEhSRUUuV2ViR0xSZW5kZXJlcjogLnNoYWRvd01hcEN1bGxGYWNlIGlzIG5vdyAuc2hhZG93TWFwLmN1bGxGYWNlLlwiKTtcbnRoaXMuc2hhZG93TWFwLmN1bGxGYWNlPWF9fX0pO09iamVjdC5kZWZpbmVQcm9wZXJ0aWVzKFRIUkVFLldlYkdMU2hhZG93TWFwLnByb3RvdHlwZSx7Y3VsbEZhY2U6e2dldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLnJlbmRlclJldmVyc2VTaWRlZD9USFJFRS5DdWxsRmFjZUZyb250OlRIUkVFLkN1bGxGYWNlQmFja30sc2V0OmZ1bmN0aW9uKGEpe2E9YSE9PVRIUkVFLkN1bGxGYWNlQmFjaztjb25zb2xlLndhcm4oXCJXZWJHTFJlbmRlcmVyOiAuc2hhZG93TWFwLmN1bGxGYWNlIGlzIGRlcHJlY2F0ZWQuIFNldCAuc2hhZG93TWFwLnJlbmRlclJldmVyc2VTaWRlZCB0byBcIithK1wiLlwiKTt0aGlzLnJlbmRlclJldmVyc2VTaWRlZD1hfX19KTtcbk9iamVjdC5kZWZpbmVQcm9wZXJ0aWVzKFRIUkVFLldlYkdMUmVuZGVyVGFyZ2V0LnByb3RvdHlwZSx7d3JhcFM6e2dldDpmdW5jdGlvbigpe2NvbnNvbGUud2FybihcIlRIUkVFLldlYkdMUmVuZGVyVGFyZ2V0OiAud3JhcFMgaXMgbm93IC50ZXh0dXJlLndyYXBTLlwiKTtyZXR1cm4gdGhpcy50ZXh0dXJlLndyYXBTfSxzZXQ6ZnVuY3Rpb24oYSl7Y29uc29sZS53YXJuKFwiVEhSRUUuV2ViR0xSZW5kZXJUYXJnZXQ6IC53cmFwUyBpcyBub3cgLnRleHR1cmUud3JhcFMuXCIpO3RoaXMudGV4dHVyZS53cmFwUz1hfX0sd3JhcFQ6e2dldDpmdW5jdGlvbigpe2NvbnNvbGUud2FybihcIlRIUkVFLldlYkdMUmVuZGVyVGFyZ2V0OiAud3JhcFQgaXMgbm93IC50ZXh0dXJlLndyYXBULlwiKTtyZXR1cm4gdGhpcy50ZXh0dXJlLndyYXBUfSxzZXQ6ZnVuY3Rpb24oYSl7Y29uc29sZS53YXJuKFwiVEhSRUUuV2ViR0xSZW5kZXJUYXJnZXQ6IC53cmFwVCBpcyBub3cgLnRleHR1cmUud3JhcFQuXCIpO3RoaXMudGV4dHVyZS53cmFwVD1cbmF9fSxtYWdGaWx0ZXI6e2dldDpmdW5jdGlvbigpe2NvbnNvbGUud2FybihcIlRIUkVFLldlYkdMUmVuZGVyVGFyZ2V0OiAubWFnRmlsdGVyIGlzIG5vdyAudGV4dHVyZS5tYWdGaWx0ZXIuXCIpO3JldHVybiB0aGlzLnRleHR1cmUubWFnRmlsdGVyfSxzZXQ6ZnVuY3Rpb24oYSl7Y29uc29sZS53YXJuKFwiVEhSRUUuV2ViR0xSZW5kZXJUYXJnZXQ6IC5tYWdGaWx0ZXIgaXMgbm93IC50ZXh0dXJlLm1hZ0ZpbHRlci5cIik7dGhpcy50ZXh0dXJlLm1hZ0ZpbHRlcj1hfX0sbWluRmlsdGVyOntnZXQ6ZnVuY3Rpb24oKXtjb25zb2xlLndhcm4oXCJUSFJFRS5XZWJHTFJlbmRlclRhcmdldDogLm1pbkZpbHRlciBpcyBub3cgLnRleHR1cmUubWluRmlsdGVyLlwiKTtyZXR1cm4gdGhpcy50ZXh0dXJlLm1pbkZpbHRlcn0sc2V0OmZ1bmN0aW9uKGEpe2NvbnNvbGUud2FybihcIlRIUkVFLldlYkdMUmVuZGVyVGFyZ2V0OiAubWluRmlsdGVyIGlzIG5vdyAudGV4dHVyZS5taW5GaWx0ZXIuXCIpO3RoaXMudGV4dHVyZS5taW5GaWx0ZXI9XG5hfX0sYW5pc290cm9weTp7Z2V0OmZ1bmN0aW9uKCl7Y29uc29sZS53YXJuKFwiVEhSRUUuV2ViR0xSZW5kZXJUYXJnZXQ6IC5hbmlzb3Ryb3B5IGlzIG5vdyAudGV4dHVyZS5hbmlzb3Ryb3B5LlwiKTtyZXR1cm4gdGhpcy50ZXh0dXJlLmFuaXNvdHJvcHl9LHNldDpmdW5jdGlvbihhKXtjb25zb2xlLndhcm4oXCJUSFJFRS5XZWJHTFJlbmRlclRhcmdldDogLmFuaXNvdHJvcHkgaXMgbm93IC50ZXh0dXJlLmFuaXNvdHJvcHkuXCIpO3RoaXMudGV4dHVyZS5hbmlzb3Ryb3B5PWF9fSxvZmZzZXQ6e2dldDpmdW5jdGlvbigpe2NvbnNvbGUud2FybihcIlRIUkVFLldlYkdMUmVuZGVyVGFyZ2V0OiAub2Zmc2V0IGlzIG5vdyAudGV4dHVyZS5vZmZzZXQuXCIpO3JldHVybiB0aGlzLnRleHR1cmUub2Zmc2V0fSxzZXQ6ZnVuY3Rpb24oYSl7Y29uc29sZS53YXJuKFwiVEhSRUUuV2ViR0xSZW5kZXJUYXJnZXQ6IC5vZmZzZXQgaXMgbm93IC50ZXh0dXJlLm9mZnNldC5cIik7dGhpcy50ZXh0dXJlLm9mZnNldD1cbmF9fSxyZXBlYXQ6e2dldDpmdW5jdGlvbigpe2NvbnNvbGUud2FybihcIlRIUkVFLldlYkdMUmVuZGVyVGFyZ2V0OiAucmVwZWF0IGlzIG5vdyAudGV4dHVyZS5yZXBlYXQuXCIpO3JldHVybiB0aGlzLnRleHR1cmUucmVwZWF0fSxzZXQ6ZnVuY3Rpb24oYSl7Y29uc29sZS53YXJuKFwiVEhSRUUuV2ViR0xSZW5kZXJUYXJnZXQ6IC5yZXBlYXQgaXMgbm93IC50ZXh0dXJlLnJlcGVhdC5cIik7dGhpcy50ZXh0dXJlLnJlcGVhdD1hfX0sZm9ybWF0OntnZXQ6ZnVuY3Rpb24oKXtjb25zb2xlLndhcm4oXCJUSFJFRS5XZWJHTFJlbmRlclRhcmdldDogLmZvcm1hdCBpcyBub3cgLnRleHR1cmUuZm9ybWF0LlwiKTtyZXR1cm4gdGhpcy50ZXh0dXJlLmZvcm1hdH0sc2V0OmZ1bmN0aW9uKGEpe2NvbnNvbGUud2FybihcIlRIUkVFLldlYkdMUmVuZGVyVGFyZ2V0OiAuZm9ybWF0IGlzIG5vdyAudGV4dHVyZS5mb3JtYXQuXCIpO3RoaXMudGV4dHVyZS5mb3JtYXQ9YX19LHR5cGU6e2dldDpmdW5jdGlvbigpe2NvbnNvbGUud2FybihcIlRIUkVFLldlYkdMUmVuZGVyVGFyZ2V0OiAudHlwZSBpcyBub3cgLnRleHR1cmUudHlwZS5cIik7XG5yZXR1cm4gdGhpcy50ZXh0dXJlLnR5cGV9LHNldDpmdW5jdGlvbihhKXtjb25zb2xlLndhcm4oXCJUSFJFRS5XZWJHTFJlbmRlclRhcmdldDogLnR5cGUgaXMgbm93IC50ZXh0dXJlLnR5cGUuXCIpO3RoaXMudGV4dHVyZS50eXBlPWF9fSxnZW5lcmF0ZU1pcG1hcHM6e2dldDpmdW5jdGlvbigpe2NvbnNvbGUud2FybihcIlRIUkVFLldlYkdMUmVuZGVyVGFyZ2V0OiAuZ2VuZXJhdGVNaXBtYXBzIGlzIG5vdyAudGV4dHVyZS5nZW5lcmF0ZU1pcG1hcHMuXCIpO3JldHVybiB0aGlzLnRleHR1cmUuZ2VuZXJhdGVNaXBtYXBzfSxzZXQ6ZnVuY3Rpb24oYSl7Y29uc29sZS53YXJuKFwiVEhSRUUuV2ViR0xSZW5kZXJUYXJnZXQ6IC5nZW5lcmF0ZU1pcG1hcHMgaXMgbm93IC50ZXh0dXJlLmdlbmVyYXRlTWlwbWFwcy5cIik7dGhpcy50ZXh0dXJlLmdlbmVyYXRlTWlwbWFwcz1hfX19KTtcbk9iamVjdC5hc3NpZ24oVEhSRUUuQXVkaW8ucHJvdG90eXBlLHtsb2FkOmZ1bmN0aW9uKGEpe2NvbnNvbGUud2FybihcIlRIUkVFLkF1ZGlvOiAubG9hZCBoYXMgYmVlbiBkZXByZWNhdGVkLiBQbGVhc2UgdXNlIFRIUkVFLkF1ZGlvTG9hZGVyLlwiKTt2YXIgYj10aGlzOyhuZXcgVEhSRUUuQXVkaW9Mb2FkZXIpLmxvYWQoYSxmdW5jdGlvbihhKXtiLnNldEJ1ZmZlcihhKX0pO3JldHVybiB0aGlzfX0pO09iamVjdC5hc3NpZ24oVEhSRUUuQXVkaW9BbmFseXNlci5wcm90b3R5cGUse2dldERhdGE6ZnVuY3Rpb24oYSl7Y29uc29sZS53YXJuKFwiVEhSRUUuQXVkaW9BbmFseXNlcjogLmdldERhdGEoKSBpcyBub3cgLmdldEZyZXF1ZW5jeURhdGEoKS5cIik7cmV0dXJuIHRoaXMuZ2V0RnJlcXVlbmN5RGF0YSgpfX0pO1xuVEhSRUUuR2VvbWV0cnlVdGlscz17bWVyZ2U6ZnVuY3Rpb24oYSxiLGMpe2NvbnNvbGUud2FybihcIlRIUkVFLkdlb21ldHJ5VXRpbHM6IC5tZXJnZSgpIGhhcyBiZWVuIG1vdmVkIHRvIEdlb21ldHJ5LiBVc2UgZ2VvbWV0cnkubWVyZ2UoIGdlb21ldHJ5MiwgbWF0cml4LCBtYXRlcmlhbEluZGV4T2Zmc2V0ICkgaW5zdGVhZC5cIik7dmFyIGQ7YiBpbnN0YW5jZW9mIFRIUkVFLk1lc2gmJihiLm1hdHJpeEF1dG9VcGRhdGUmJmIudXBkYXRlTWF0cml4KCksZD1iLm1hdHJpeCxiPWIuZ2VvbWV0cnkpO2EubWVyZ2UoYixkLGMpfSxjZW50ZXI6ZnVuY3Rpb24oYSl7Y29uc29sZS53YXJuKFwiVEhSRUUuR2VvbWV0cnlVdGlsczogLmNlbnRlcigpIGhhcyBiZWVuIG1vdmVkIHRvIEdlb21ldHJ5LiBVc2UgZ2VvbWV0cnkuY2VudGVyKCkgaW5zdGVhZC5cIik7cmV0dXJuIGEuY2VudGVyKCl9fTtcblRIUkVFLkltYWdlVXRpbHM9e2Nyb3NzT3JpZ2luOnZvaWQgMCxsb2FkVGV4dHVyZTpmdW5jdGlvbihhLGIsYyxkKXtjb25zb2xlLndhcm4oXCJUSFJFRS5JbWFnZVV0aWxzLmxvYWRUZXh0dXJlIGhhcyBiZWVuIGRlcHJlY2F0ZWQuIFVzZSBUSFJFRS5UZXh0dXJlTG9hZGVyKCkgaW5zdGVhZC5cIik7dmFyIGU9bmV3IFRIUkVFLlRleHR1cmVMb2FkZXI7ZS5zZXRDcm9zc09yaWdpbih0aGlzLmNyb3NzT3JpZ2luKTthPWUubG9hZChhLGMsdm9pZCAwLGQpO2ImJihhLm1hcHBpbmc9Yik7cmV0dXJuIGF9LGxvYWRUZXh0dXJlQ3ViZTpmdW5jdGlvbihhLGIsYyxkKXtjb25zb2xlLndhcm4oXCJUSFJFRS5JbWFnZVV0aWxzLmxvYWRUZXh0dXJlQ3ViZSBoYXMgYmVlbiBkZXByZWNhdGVkLiBVc2UgVEhSRUUuQ3ViZVRleHR1cmVMb2FkZXIoKSBpbnN0ZWFkLlwiKTt2YXIgZT1uZXcgVEhSRUUuQ3ViZVRleHR1cmVMb2FkZXI7ZS5zZXRDcm9zc09yaWdpbih0aGlzLmNyb3NzT3JpZ2luKTthPWUubG9hZChhLFxuYyx2b2lkIDAsZCk7YiYmKGEubWFwcGluZz1iKTtyZXR1cm4gYX0sbG9hZENvbXByZXNzZWRUZXh0dXJlOmZ1bmN0aW9uKCl7Y29uc29sZS5lcnJvcihcIlRIUkVFLkltYWdlVXRpbHMubG9hZENvbXByZXNzZWRUZXh0dXJlIGhhcyBiZWVuIHJlbW92ZWQuIFVzZSBUSFJFRS5ERFNMb2FkZXIgaW5zdGVhZC5cIil9LGxvYWRDb21wcmVzc2VkVGV4dHVyZUN1YmU6ZnVuY3Rpb24oKXtjb25zb2xlLmVycm9yKFwiVEhSRUUuSW1hZ2VVdGlscy5sb2FkQ29tcHJlc3NlZFRleHR1cmVDdWJlIGhhcyBiZWVuIHJlbW92ZWQuIFVzZSBUSFJFRS5ERFNMb2FkZXIgaW5zdGVhZC5cIil9fTtcblRIUkVFLlByb2plY3Rvcj1mdW5jdGlvbigpe2NvbnNvbGUuZXJyb3IoXCJUSFJFRS5Qcm9qZWN0b3IgaGFzIGJlZW4gbW92ZWQgdG8gL2V4YW1wbGVzL2pzL3JlbmRlcmVycy9Qcm9qZWN0b3IuanMuXCIpO3RoaXMucHJvamVjdFZlY3Rvcj1mdW5jdGlvbihhLGIpe2NvbnNvbGUud2FybihcIlRIUkVFLlByb2plY3RvcjogLnByb2plY3RWZWN0b3IoKSBpcyBub3cgdmVjdG9yLnByb2plY3QoKS5cIik7YS5wcm9qZWN0KGIpfTt0aGlzLnVucHJvamVjdFZlY3Rvcj1mdW5jdGlvbihhLGIpe2NvbnNvbGUud2FybihcIlRIUkVFLlByb2plY3RvcjogLnVucHJvamVjdFZlY3RvcigpIGlzIG5vdyB2ZWN0b3IudW5wcm9qZWN0KCkuXCIpO2EudW5wcm9qZWN0KGIpfTt0aGlzLnBpY2tpbmdSYXk9ZnVuY3Rpb24oYSxiKXtjb25zb2xlLmVycm9yKFwiVEhSRUUuUHJvamVjdG9yOiAucGlja2luZ1JheSgpIGlzIG5vdyByYXljYXN0ZXIuc2V0RnJvbUNhbWVyYSgpLlwiKX19O1xuVEhSRUUuQ2FudmFzUmVuZGVyZXI9ZnVuY3Rpb24oKXtjb25zb2xlLmVycm9yKFwiVEhSRUUuQ2FudmFzUmVuZGVyZXIgaGFzIGJlZW4gbW92ZWQgdG8gL2V4YW1wbGVzL2pzL3JlbmRlcmVycy9DYW52YXNSZW5kZXJlci5qc1wiKTt0aGlzLmRvbUVsZW1lbnQ9ZG9jdW1lbnQuY3JlYXRlRWxlbWVudE5TKFwiaHR0cDovL3d3dy53My5vcmcvMTk5OS94aHRtbFwiLFwiY2FudmFzXCIpO3RoaXMuY2xlYXI9ZnVuY3Rpb24oKXt9O3RoaXMucmVuZGVyPWZ1bmN0aW9uKCl7fTt0aGlzLnNldENsZWFyQ29sb3I9ZnVuY3Rpb24oKXt9O3RoaXMuc2V0U2l6ZT1mdW5jdGlvbigpe319O1xuVEhSRUUuQ3VydmVVdGlscz17dGFuZ2VudFF1YWRyYXRpY0JlemllcjpmdW5jdGlvbihhLGIsYyxkKXtyZXR1cm4gMiooMS1hKSooYy1iKSsyKmEqKGQtYyl9LHRhbmdlbnRDdWJpY0JlemllcjpmdW5jdGlvbihhLGIsYyxkLGUpe3JldHVybi0zKmIqKDEtYSkqKDEtYSkrMypjKigxLWEpKigxLWEpLTYqYSpjKigxLWEpKzYqYSpkKigxLWEpLTMqYSphKmQrMyphKmEqZX0sdGFuZ2VudFNwbGluZTpmdW5jdGlvbihhLGIsYyxkLGUpe3JldHVybiA2KmEqYS02KmErKDMqYSphLTQqYSsxKSsoLTYqYSphKzYqYSkrKDMqYSphLTIqYSl9LGludGVycG9sYXRlOmZ1bmN0aW9uKGEsYixjLGQsZSl7YT0uNSooYy1hKTtkPS41KihkLWIpO3ZhciBmPWUqZTtyZXR1cm4oMipiLTIqYythK2QpKmUqZisoLTMqYiszKmMtMiphLWQpKmYrYSplK2J9fTtcblRIUkVFLlNjZW5lVXRpbHM9e2NyZWF0ZU11bHRpTWF0ZXJpYWxPYmplY3Q6ZnVuY3Rpb24oYSxiKXtmb3IodmFyIGM9bmV3IFRIUkVFLkdyb3VwLGQ9MCxlPWIubGVuZ3RoO2Q8ZTtkKyspYy5hZGQobmV3IFRIUkVFLk1lc2goYSxiW2RdKSk7cmV0dXJuIGN9LGRldGFjaDpmdW5jdGlvbihhLGIsYyl7YS5hcHBseU1hdHJpeChiLm1hdHJpeFdvcmxkKTtiLnJlbW92ZShhKTtjLmFkZChhKX0sYXR0YWNoOmZ1bmN0aW9uKGEsYixjKXt2YXIgZD1uZXcgVEhSRUUuTWF0cml4NDtkLmdldEludmVyc2UoYy5tYXRyaXhXb3JsZCk7YS5hcHBseU1hdHJpeChkKTtiLnJlbW92ZShhKTtjLmFkZChhKX19O1xuVEhSRUUuU2hhcGVVdGlscz17YXJlYTpmdW5jdGlvbihhKXtmb3IodmFyIGI9YS5sZW5ndGgsYz0wLGQ9Yi0xLGU9MDtlPGI7ZD1lKyspYys9YVtkXS54KmFbZV0ueS1hW2VdLngqYVtkXS55O3JldHVybi41KmN9LHRyaWFuZ3VsYXRlOmZ1bmN0aW9uKCl7cmV0dXJuIGZ1bmN0aW9uKGEsYil7dmFyIGM9YS5sZW5ndGg7aWYoMz5jKXJldHVybiBudWxsO3ZhciBkPVtdLGU9W10sZj1bXSxnLGgsaztpZigwPFRIUkVFLlNoYXBlVXRpbHMuYXJlYShhKSlmb3IoaD0wO2g8YztoKyspZVtoXT1oO2Vsc2UgZm9yKGg9MDtoPGM7aCsrKWVbaF09Yy0xLWg7dmFyIGw9MipjO2ZvcihoPWMtMTsyPGM7KXtpZigwPj1sLS0pe2NvbnNvbGUud2FybihcIlRIUkVFLlNoYXBlVXRpbHM6IFVuYWJsZSB0byB0cmlhbmd1bGF0ZSBwb2x5Z29uISBpbiB0cmlhbmd1bGF0ZSgpXCIpO2JyZWFrfWc9aDtjPD1nJiYoZz0wKTtoPWcrMTtjPD1oJiYoaD0wKTtrPWgrMTtjPD1rJiYoaz0wKTt2YXIgbTthOnt2YXIgcD1cbm09dm9pZCAwLG49dm9pZCAwLHE9dm9pZCAwLHI9dm9pZCAwLHM9dm9pZCAwLHY9dm9pZCAwLHQ9dm9pZCAwLHU9dm9pZCAwLHA9YVtlW2ddXS54LG49YVtlW2ddXS55LHE9YVtlW2hdXS54LHI9YVtlW2hdXS55LHM9YVtlW2tdXS54LHY9YVtlW2tdXS55O2lmKE51bWJlci5FUFNJTE9OPihxLXApKih2LW4pLShyLW4pKihzLXApKW09ITE7ZWxzZXt2YXIgRD12b2lkIDAsdz12b2lkIDAsST12b2lkIDAsej12b2lkIDAseT12b2lkIDAsQT12b2lkIDAsRz12b2lkIDAsQj12b2lkIDAsRj12b2lkIDAsSj12b2lkIDAsRj1CPUc9dT10PXZvaWQgMCxEPXMtcSx3PXYtcixJPXAtcyx6PW4tdix5PXEtcCxBPXItbjtmb3IobT0wO208YzttKyspaWYodD1hW2VbbV1dLngsdT1hW2VbbV1dLnksISh0PT09cCYmdT09PW58fHQ9PT1xJiZ1PT09cnx8dD09PXMmJnU9PT12KSYmKEc9dC1wLEI9dS1uLEY9dC1xLEo9dS1yLHQtPXMsdS09dixGPUQqSi13KkYsRz15KkItQSpHLEI9SSp1LXoqdCxGPj0tTnVtYmVyLkVQU0lMT04mJlxuQj49LU51bWJlci5FUFNJTE9OJiZHPj0tTnVtYmVyLkVQU0lMT04pKXttPSExO2JyZWFrIGF9bT0hMH19aWYobSl7ZC5wdXNoKFthW2VbZ11dLGFbZVtoXV0sYVtlW2tdXV0pO2YucHVzaChbZVtnXSxlW2hdLGVba11dKTtnPWg7Zm9yKGs9aCsxO2s8YztnKyssaysrKWVbZ109ZVtrXTtjLS07bD0yKmN9fXJldHVybiBiP2Y6ZH19KCksdHJpYW5ndWxhdGVTaGFwZTpmdW5jdGlvbihhLGIpe2Z1bmN0aW9uIGMoYSl7dmFyIGI9YS5sZW5ndGg7MjxiJiZhW2ItMV0uZXF1YWxzKGFbMF0pJiZhLnBvcCgpfWZ1bmN0aW9uIGQoYSxiLGMpe3JldHVybiBhLnghPT1iLng/YS54PGIueD9hLng8PWMueCYmYy54PD1iLng6Yi54PD1jLngmJmMueDw9YS54OmEueTxiLnk/YS55PD1jLnkmJmMueTw9Yi55OmIueTw9Yy55JiZjLnk8PWEueX1mdW5jdGlvbiBlKGEsYixjLGUsZil7dmFyIGc9Yi54LWEueCxoPWIueS1hLnksaz1lLngtYy54LGw9ZS55LWMueSxtPWEueC1jLngsbj1hLnktYy55LHA9aCprLVxuZypsLEc9aCptLWcqbjtpZihNYXRoLmFicyhwKT5OdW1iZXIuRVBTSUxPTil7aWYoMDxwKXtpZigwPkd8fEc+cClyZXR1cm5bXTtrPWwqbS1rKm47aWYoMD5rfHxrPnApcmV0dXJuW119ZWxzZXtpZigwPEd8fEc8cClyZXR1cm5bXTtrPWwqbS1rKm47aWYoMDxrfHxrPHApcmV0dXJuW119aWYoMD09PWspcmV0dXJuIWZ8fDAhPT1HJiZHIT09cD9bYV06W107aWYoaz09PXApcmV0dXJuIWZ8fDAhPT1HJiZHIT09cD9bYl06W107aWYoMD09PUcpcmV0dXJuW2NdO2lmKEc9PT1wKXJldHVybltlXTtmPWsvcDtyZXR1cm5be3g6YS54K2YqZyx5OmEueStmKmh9XX1pZigwIT09R3x8bCptIT09aypuKXJldHVybltdO2g9MD09PWcmJjA9PT1oO2s9MD09PWsmJjA9PT1sO2lmKGgmJmspcmV0dXJuIGEueCE9PWMueHx8YS55IT09Yy55P1tdOlthXTtpZihoKXJldHVybiBkKGMsZSxhKT9bYV06W107aWYoaylyZXR1cm4gZChhLGIsYyk/W2NdOltdOzAhPT1nPyhhLng8Yi54PyhnPWEsaz1hLngsaD1iLFxuYT1iLngpOihnPWIsaz1iLngsaD1hLGE9YS54KSxjLng8ZS54PyhiPWMscD1jLngsbD1lLGM9ZS54KTooYj1lLHA9ZS54LGw9YyxjPWMueCkpOihhLnk8Yi55PyhnPWEsaz1hLnksaD1iLGE9Yi55KTooZz1iLGs9Yi55LGg9YSxhPWEueSksYy55PGUueT8oYj1jLHA9Yy55LGw9ZSxjPWUueSk6KGI9ZSxwPWUueSxsPWMsYz1jLnkpKTtyZXR1cm4gazw9cD9hPHA/W106YT09PXA/Zj9bXTpbYl06YTw9Yz9bYixoXTpbYixsXTprPmM/W106az09PWM/Zj9bXTpbZ106YTw9Yz9bZyxoXTpbZyxsXX1mdW5jdGlvbiBmKGEsYixjLGQpe3ZhciBlPWIueC1hLngsZj1iLnktYS55O2I9Yy54LWEueDtjPWMueS1hLnk7dmFyIGc9ZC54LWEueDtkPWQueS1hLnk7YT1lKmMtZipiO2U9ZSpkLWYqZztyZXR1cm4gTWF0aC5hYnMoYSk+TnVtYmVyLkVQU0lMT04/KGI9ZypjLWQqYiwwPGE/MDw9ZSYmMDw9YjowPD1lfHwwPD1iKTowPGV9YyhhKTtiLmZvckVhY2goYyk7dmFyIGcsaCxrLGwsbSxwPXt9O2s9XG5hLmNvbmNhdCgpO2c9MDtmb3IoaD1iLmxlbmd0aDtnPGg7ZysrKUFycmF5LnByb3RvdHlwZS5wdXNoLmFwcGx5KGssYltnXSk7Zz0wO2ZvcihoPWsubGVuZ3RoO2c8aDtnKyspbT1rW2ddLngrXCI6XCIra1tnXS55LHZvaWQgMCE9PXBbbV0mJmNvbnNvbGUud2FybihcIlRIUkVFLlNoYXBlVXRpbHM6IER1cGxpY2F0ZSBwb2ludFwiLG0sZykscFttXT1nO2c9ZnVuY3Rpb24oYSxiKXtmdW5jdGlvbiBjKGEsYil7dmFyIGQ9aC5sZW5ndGgtMSxlPWEtMTswPmUmJihlPWQpO3ZhciBnPWErMTtnPmQmJihnPTApO2Q9ZihoW2FdLGhbZV0saFtnXSxrW2JdKTtpZighZClyZXR1cm4hMTtkPWsubGVuZ3RoLTE7ZT1iLTE7MD5lJiYoZT1kKTtnPWIrMTtnPmQmJihnPTApO3JldHVybihkPWYoa1tiXSxrW2VdLGtbZ10saFthXSkpPyEwOiExfWZ1bmN0aW9uIGQoYSxiKXt2YXIgYyxmO2ZvcihjPTA7YzxoLmxlbmd0aDtjKyspaWYoZj1jKzEsZiU9aC5sZW5ndGgsZj1lKGEsYixoW2NdLGhbZl0sITApLDA8XG5mLmxlbmd0aClyZXR1cm4hMDtyZXR1cm4hMX1mdW5jdGlvbiBnKGEsYyl7dmFyIGQsZixoLGs7Zm9yKGQ9MDtkPGwubGVuZ3RoO2QrKylmb3IoZj1iW2xbZF1dLGg9MDtoPGYubGVuZ3RoO2grKylpZihrPWgrMSxrJT1mLmxlbmd0aCxrPWUoYSxjLGZbaF0sZltrXSwhMCksMDxrLmxlbmd0aClyZXR1cm4hMDtyZXR1cm4hMX12YXIgaD1hLmNvbmNhdCgpLGssbD1bXSxtLG4scCxBLEcsQj1bXSxGLEosUCxLPTA7Zm9yKG09Yi5sZW5ndGg7SzxtO0srKylsLnB1c2goSyk7Rj0wO2Zvcih2YXIgSD0yKmwubGVuZ3RoOzA8bC5sZW5ndGg7KXtILS07aWYoMD5IKXtjb25zb2xlLmxvZyhcIkluZmluaXRlIExvb3AhIEhvbGVzIGxlZnQ6XCIrbC5sZW5ndGgrXCIsIFByb2JhYmx5IEhvbGUgb3V0c2lkZSBTaGFwZSFcIik7YnJlYWt9Zm9yKG49RjtuPGgubGVuZ3RoO24rKyl7cD1oW25dO209LTE7Zm9yKEs9MDtLPGwubGVuZ3RoO0srKylpZihBPWxbS10sRz1wLngrXCI6XCIrcC55K1wiOlwiK0Esdm9pZCAwPT09XG5CW0ddKXtrPWJbQV07Zm9yKEo9MDtKPGsubGVuZ3RoO0orKylpZihBPWtbSl0sYyhuLEopJiYhZChwLEEpJiYhZyhwLEEpKXttPUo7bC5zcGxpY2UoSywxKTtGPWguc2xpY2UoMCxuKzEpO0E9aC5zbGljZShuKTtKPWsuc2xpY2UobSk7UD1rLnNsaWNlKDAsbSsxKTtoPUYuY29uY2F0KEopLmNvbmNhdChQKS5jb25jYXQoQSk7Rj1uO2JyZWFrfWlmKDA8PW0pYnJlYWs7QltHXT0hMH1pZigwPD1tKWJyZWFrfX1yZXR1cm4gaH0oYSxiKTt2YXIgbj1USFJFRS5TaGFwZVV0aWxzLnRyaWFuZ3VsYXRlKGcsITEpO2c9MDtmb3IoaD1uLmxlbmd0aDtnPGg7ZysrKWZvcihsPW5bZ10saz0wOzM+aztrKyspbT1sW2tdLngrXCI6XCIrbFtrXS55LG09cFttXSx2b2lkIDAhPT1tJiYobFtrXT1tKTtyZXR1cm4gbi5jb25jYXQoKX0saXNDbG9ja1dpc2U6ZnVuY3Rpb24oYSl7cmV0dXJuIDA+VEhSRUUuU2hhcGVVdGlscy5hcmVhKGEpfSxiMjpmdW5jdGlvbigpe3JldHVybiBmdW5jdGlvbihhLGIsYyxkKXt2YXIgZT1cbjEtYTtyZXR1cm4gZSplKmIrMiooMS1hKSphKmMrYSphKmR9fSgpLGIzOmZ1bmN0aW9uKCl7cmV0dXJuIGZ1bmN0aW9uKGEsYixjLGQsZSl7dmFyIGY9MS1hLGc9MS1hO3JldHVybiBmKmYqZipiKzMqZypnKmEqYyszKigxLWEpKmEqYSpkK2EqYSphKmV9fSgpfTtUSFJFRS5DdXJ2ZT1mdW5jdGlvbigpe307XG5USFJFRS5DdXJ2ZS5wcm90b3R5cGU9e2NvbnN0cnVjdG9yOlRIUkVFLkN1cnZlLGdldFBvaW50OmZ1bmN0aW9uKGEpe2NvbnNvbGUud2FybihcIlRIUkVFLkN1cnZlOiBXYXJuaW5nLCBnZXRQb2ludCgpIG5vdCBpbXBsZW1lbnRlZCFcIik7cmV0dXJuIG51bGx9LGdldFBvaW50QXQ6ZnVuY3Rpb24oYSl7YT10aGlzLmdldFV0b1RtYXBwaW5nKGEpO3JldHVybiB0aGlzLmdldFBvaW50KGEpfSxnZXRQb2ludHM6ZnVuY3Rpb24oYSl7YXx8KGE9NSk7Zm9yKHZhciBiPVtdLGM9MDtjPD1hO2MrKyliLnB1c2godGhpcy5nZXRQb2ludChjL2EpKTtyZXR1cm4gYn0sZ2V0U3BhY2VkUG9pbnRzOmZ1bmN0aW9uKGEpe2F8fChhPTUpO2Zvcih2YXIgYj1bXSxjPTA7Yzw9YTtjKyspYi5wdXNoKHRoaXMuZ2V0UG9pbnRBdChjL2EpKTtyZXR1cm4gYn0sZ2V0TGVuZ3RoOmZ1bmN0aW9uKCl7dmFyIGE9dGhpcy5nZXRMZW5ndGhzKCk7cmV0dXJuIGFbYS5sZW5ndGgtMV19LGdldExlbmd0aHM6ZnVuY3Rpb24oYSl7YXx8XG4oYT10aGlzLl9fYXJjTGVuZ3RoRGl2aXNpb25zP3RoaXMuX19hcmNMZW5ndGhEaXZpc2lvbnM6MjAwKTtpZih0aGlzLmNhY2hlQXJjTGVuZ3RocyYmdGhpcy5jYWNoZUFyY0xlbmd0aHMubGVuZ3RoPT09YSsxJiYhdGhpcy5uZWVkc1VwZGF0ZSlyZXR1cm4gdGhpcy5jYWNoZUFyY0xlbmd0aHM7dGhpcy5uZWVkc1VwZGF0ZT0hMTt2YXIgYj1bXSxjLGQ9dGhpcy5nZXRQb2ludCgwKSxlLGY9MDtiLnB1c2goMCk7Zm9yKGU9MTtlPD1hO2UrKyljPXRoaXMuZ2V0UG9pbnQoZS9hKSxmKz1jLmRpc3RhbmNlVG8oZCksYi5wdXNoKGYpLGQ9YztyZXR1cm4gdGhpcy5jYWNoZUFyY0xlbmd0aHM9Yn0sdXBkYXRlQXJjTGVuZ3RoczpmdW5jdGlvbigpe3RoaXMubmVlZHNVcGRhdGU9ITA7dGhpcy5nZXRMZW5ndGhzKCl9LGdldFV0b1RtYXBwaW5nOmZ1bmN0aW9uKGEsYil7dmFyIGM9dGhpcy5nZXRMZW5ndGhzKCksZD0wLGU9Yy5sZW5ndGgsZjtmPWI/YjphKmNbZS0xXTtmb3IodmFyIGc9MCxoPWUtXG4xLGs7Zzw9aDspaWYoZD1NYXRoLmZsb29yKGcrKGgtZykvMiksaz1jW2RdLWYsMD5rKWc9ZCsxO2Vsc2UgaWYoMDxrKWg9ZC0xO2Vsc2V7aD1kO2JyZWFrfWQ9aDtpZihjW2RdPT09ZilyZXR1cm4gZC8oZS0xKTtnPWNbZF07cmV0dXJuIGM9KGQrKGYtZykvKGNbZCsxXS1nKSkvKGUtMSl9LGdldFRhbmdlbnQ6ZnVuY3Rpb24oYSl7dmFyIGI9YS0xRS00O2ErPTFFLTQ7MD5iJiYoYj0wKTsxPGEmJihhPTEpO2I9dGhpcy5nZXRQb2ludChiKTtyZXR1cm4gdGhpcy5nZXRQb2ludChhKS5jbG9uZSgpLnN1YihiKS5ub3JtYWxpemUoKX0sZ2V0VGFuZ2VudEF0OmZ1bmN0aW9uKGEpe2E9dGhpcy5nZXRVdG9UbWFwcGluZyhhKTtyZXR1cm4gdGhpcy5nZXRUYW5nZW50KGEpfX07XG5USFJFRS5DdXJ2ZS5jcmVhdGU9ZnVuY3Rpb24oYSxiKXthLnByb3RvdHlwZT1PYmplY3QuY3JlYXRlKFRIUkVFLkN1cnZlLnByb3RvdHlwZSk7YS5wcm90b3R5cGUuY29uc3RydWN0b3I9YTthLnByb3RvdHlwZS5nZXRQb2ludD1iO3JldHVybiBhfTtUSFJFRS5DdXJ2ZVBhdGg9ZnVuY3Rpb24oKXt0aGlzLmN1cnZlcz1bXTt0aGlzLmF1dG9DbG9zZT0hMX07XG5USFJFRS5DdXJ2ZVBhdGgucHJvdG90eXBlPU9iamVjdC5hc3NpZ24oT2JqZWN0LmNyZWF0ZShUSFJFRS5DdXJ2ZS5wcm90b3R5cGUpLHtjb25zdHJ1Y3RvcjpUSFJFRS5DdXJ2ZVBhdGgsYWRkOmZ1bmN0aW9uKGEpe3RoaXMuY3VydmVzLnB1c2goYSl9LGNsb3NlUGF0aDpmdW5jdGlvbigpe3ZhciBhPXRoaXMuY3VydmVzWzBdLmdldFBvaW50KDApLGI9dGhpcy5jdXJ2ZXNbdGhpcy5jdXJ2ZXMubGVuZ3RoLTFdLmdldFBvaW50KDEpO2EuZXF1YWxzKGIpfHx0aGlzLmN1cnZlcy5wdXNoKG5ldyBUSFJFRS5MaW5lQ3VydmUoYixhKSl9LGdldFBvaW50OmZ1bmN0aW9uKGEpe3ZhciBiPWEqdGhpcy5nZXRMZW5ndGgoKSxjPXRoaXMuZ2V0Q3VydmVMZW5ndGhzKCk7Zm9yKGE9MDthPGMubGVuZ3RoOyl7aWYoY1thXT49YilyZXR1cm4gYj1jW2FdLWIsYT10aGlzLmN1cnZlc1thXSxjPWEuZ2V0TGVuZ3RoKCksYS5nZXRQb2ludEF0KDA9PT1jPzA6MS1iL2MpO2ErK31yZXR1cm4gbnVsbH0sZ2V0TGVuZ3RoOmZ1bmN0aW9uKCl7dmFyIGE9XG50aGlzLmdldEN1cnZlTGVuZ3RocygpO3JldHVybiBhW2EubGVuZ3RoLTFdfSx1cGRhdGVBcmNMZW5ndGhzOmZ1bmN0aW9uKCl7dGhpcy5uZWVkc1VwZGF0ZT0hMDt0aGlzLmNhY2hlTGVuZ3Rocz1udWxsO3RoaXMuZ2V0TGVuZ3RocygpfSxnZXRDdXJ2ZUxlbmd0aHM6ZnVuY3Rpb24oKXtpZih0aGlzLmNhY2hlTGVuZ3RocyYmdGhpcy5jYWNoZUxlbmd0aHMubGVuZ3RoPT09dGhpcy5jdXJ2ZXMubGVuZ3RoKXJldHVybiB0aGlzLmNhY2hlTGVuZ3Rocztmb3IodmFyIGE9W10sYj0wLGM9MCxkPXRoaXMuY3VydmVzLmxlbmd0aDtjPGQ7YysrKWIrPXRoaXMuY3VydmVzW2NdLmdldExlbmd0aCgpLGEucHVzaChiKTtyZXR1cm4gdGhpcy5jYWNoZUxlbmd0aHM9YX0sZ2V0U3BhY2VkUG9pbnRzOmZ1bmN0aW9uKGEpe2F8fChhPTQwKTtmb3IodmFyIGI9W10sYz0wO2M8PWE7YysrKWIucHVzaCh0aGlzLmdldFBvaW50KGMvYSkpO3RoaXMuYXV0b0Nsb3NlJiZiLnB1c2goYlswXSk7cmV0dXJuIGJ9LFxuZ2V0UG9pbnRzOmZ1bmN0aW9uKGEpe2E9YXx8MTI7Zm9yKHZhciBiPVtdLGMsZD0wLGU9dGhpcy5jdXJ2ZXM7ZDxlLmxlbmd0aDtkKyspZm9yKHZhciBmPWVbZF0sZj1mLmdldFBvaW50cyhmIGluc3RhbmNlb2YgVEhSRUUuRWxsaXBzZUN1cnZlPzIqYTpmIGluc3RhbmNlb2YgVEhSRUUuTGluZUN1cnZlPzE6ZiBpbnN0YW5jZW9mIFRIUkVFLlNwbGluZUN1cnZlP2EqZi5wb2ludHMubGVuZ3RoOmEpLGc9MDtnPGYubGVuZ3RoO2crKyl7dmFyIGg9ZltnXTtjJiZjLmVxdWFscyhoKXx8KGIucHVzaChoKSxjPWgpfXRoaXMuYXV0b0Nsb3NlJiYxPGIubGVuZ3RoJiYhYltiLmxlbmd0aC0xXS5lcXVhbHMoYlswXSkmJmIucHVzaChiWzBdKTtyZXR1cm4gYn0sY3JlYXRlUG9pbnRzR2VvbWV0cnk6ZnVuY3Rpb24oYSl7YT10aGlzLmdldFBvaW50cyhhKTtyZXR1cm4gdGhpcy5jcmVhdGVHZW9tZXRyeShhKX0sY3JlYXRlU3BhY2VkUG9pbnRzR2VvbWV0cnk6ZnVuY3Rpb24oYSl7YT10aGlzLmdldFNwYWNlZFBvaW50cyhhKTtcbnJldHVybiB0aGlzLmNyZWF0ZUdlb21ldHJ5KGEpfSxjcmVhdGVHZW9tZXRyeTpmdW5jdGlvbihhKXtmb3IodmFyIGI9bmV3IFRIUkVFLkdlb21ldHJ5LGM9MCxkPWEubGVuZ3RoO2M8ZDtjKyspe3ZhciBlPWFbY107Yi52ZXJ0aWNlcy5wdXNoKG5ldyBUSFJFRS5WZWN0b3IzKGUueCxlLnksZS56fHwwKSl9cmV0dXJuIGJ9fSk7VEhSRUUuRm9udD1mdW5jdGlvbihhKXt0aGlzLmRhdGE9YX07XG5PYmplY3QuYXNzaWduKFRIUkVFLkZvbnQucHJvdG90eXBlLHtnZW5lcmF0ZVNoYXBlczpmdW5jdGlvbihhLGIsYyl7dm9pZCAwPT09YiYmKGI9MTAwKTt2b2lkIDA9PT1jJiYoYz00KTt2YXIgZD10aGlzLmRhdGE7YT1TdHJpbmcoYSkuc3BsaXQoXCJcIik7dmFyIGU9Yi9kLnJlc29sdXRpb24sZj0wO2I9W107Zm9yKHZhciBnPTA7ZzxhLmxlbmd0aDtnKyspe3ZhciBoO2g9ZTt2YXIgaz1mLGw9ZC5nbHlwaHNbYVtnXV18fGQuZ2x5cGhzW1wiP1wiXTtpZihsKXt2YXIgbT1uZXcgVEhSRUUuU2hhcGVQYXRoLHA9W10sbj1USFJFRS5TaGFwZVV0aWxzLmIyLHE9VEhSRUUuU2hhcGVVdGlscy5iMyxyPXZvaWQgMCxzPXZvaWQgMCx2PXM9cj12b2lkIDAsdD12b2lkIDAsdT12b2lkIDAsRD12b2lkIDAsdz12b2lkIDAsST12b2lkIDAsdD12b2lkIDA7aWYobC5vKWZvcih2YXIgej1sLl9jYWNoZWRPdXRsaW5lfHwobC5fY2FjaGVkT3V0bGluZT1sLm8uc3BsaXQoXCIgXCIpKSx5PTAsQT16Lmxlbmd0aDt5PFxuQTspc3dpdGNoKHpbeSsrXSl7Y2FzZSBcIm1cIjpyPXpbeSsrXSpoK2s7cz16W3krK10qaDttLm1vdmVUbyhyLHMpO2JyZWFrO2Nhc2UgXCJsXCI6cj16W3krK10qaCtrO3M9elt5KytdKmg7bS5saW5lVG8ocixzKTticmVhaztjYXNlIFwicVwiOnI9elt5KytdKmgraztzPXpbeSsrXSpoO3U9elt5KytdKmgraztEPXpbeSsrXSpoO20ucXVhZHJhdGljQ3VydmVUbyh1LEQscixzKTtpZih0PXBbcC5sZW5ndGgtMV0pZm9yKHZhciB2PXQueCx0PXQueSxHPTE7Rzw9YztHKyspe3ZhciBCPUcvYztuKEIsdix1LHIpO24oQix0LEQscyl9YnJlYWs7Y2FzZSBcImJcIjppZihyPXpbeSsrXSpoK2sscz16W3krK10qaCx1PXpbeSsrXSpoK2ssRD16W3krK10qaCx3PXpbeSsrXSpoK2ssST16W3krK10qaCxtLmJlemllckN1cnZlVG8odSxELHcsSSxyLHMpLHQ9cFtwLmxlbmd0aC0xXSlmb3Iodj10LngsdD10LnksRz0xO0c8PWM7RysrKUI9Ry9jLHEoQix2LHUsdyxyKSxxKEIsdCxELEkscyl9aD17b2Zmc2V0OmwuaGEqXG5oLHBhdGg6bX19ZWxzZSBoPXZvaWQgMDtmKz1oLm9mZnNldDtiLnB1c2goaC5wYXRoKX1jPVtdO2Q9MDtmb3IoYT1iLmxlbmd0aDtkPGE7ZCsrKUFycmF5LnByb3RvdHlwZS5wdXNoLmFwcGx5KGMsYltkXS50b1NoYXBlcygpKTtyZXR1cm4gY319KTtUSFJFRS5QYXRoPWZ1bmN0aW9uKGEpe1RIUkVFLkN1cnZlUGF0aC5jYWxsKHRoaXMpO3RoaXMuY3VycmVudFBvaW50PW5ldyBUSFJFRS5WZWN0b3IyO2EmJnRoaXMuZnJvbVBvaW50cyhhKX07XG5USFJFRS5QYXRoLnByb3RvdHlwZT1PYmplY3QuYXNzaWduKE9iamVjdC5jcmVhdGUoVEhSRUUuQ3VydmVQYXRoLnByb3RvdHlwZSkse2NvbnN0cnVjdG9yOlRIUkVFLlBhdGgsZnJvbVBvaW50czpmdW5jdGlvbihhKXt0aGlzLm1vdmVUbyhhWzBdLngsYVswXS55KTtmb3IodmFyIGI9MSxjPWEubGVuZ3RoO2I8YztiKyspdGhpcy5saW5lVG8oYVtiXS54LGFbYl0ueSl9LG1vdmVUbzpmdW5jdGlvbihhLGIpe3RoaXMuY3VycmVudFBvaW50LnNldChhLGIpfSxsaW5lVG86ZnVuY3Rpb24oYSxiKXt2YXIgYz1uZXcgVEhSRUUuTGluZUN1cnZlKHRoaXMuY3VycmVudFBvaW50LmNsb25lKCksbmV3IFRIUkVFLlZlY3RvcjIoYSxiKSk7dGhpcy5jdXJ2ZXMucHVzaChjKTt0aGlzLmN1cnJlbnRQb2ludC5zZXQoYSxiKX0scXVhZHJhdGljQ3VydmVUbzpmdW5jdGlvbihhLGIsYyxkKXthPW5ldyBUSFJFRS5RdWFkcmF0aWNCZXppZXJDdXJ2ZSh0aGlzLmN1cnJlbnRQb2ludC5jbG9uZSgpLG5ldyBUSFJFRS5WZWN0b3IyKGEsXG5iKSxuZXcgVEhSRUUuVmVjdG9yMihjLGQpKTt0aGlzLmN1cnZlcy5wdXNoKGEpO3RoaXMuY3VycmVudFBvaW50LnNldChjLGQpfSxiZXppZXJDdXJ2ZVRvOmZ1bmN0aW9uKGEsYixjLGQsZSxmKXthPW5ldyBUSFJFRS5DdWJpY0JlemllckN1cnZlKHRoaXMuY3VycmVudFBvaW50LmNsb25lKCksbmV3IFRIUkVFLlZlY3RvcjIoYSxiKSxuZXcgVEhSRUUuVmVjdG9yMihjLGQpLG5ldyBUSFJFRS5WZWN0b3IyKGUsZikpO3RoaXMuY3VydmVzLnB1c2goYSk7dGhpcy5jdXJyZW50UG9pbnQuc2V0KGUsZil9LHNwbGluZVRocnU6ZnVuY3Rpb24oYSl7dmFyIGI9W3RoaXMuY3VycmVudFBvaW50LmNsb25lKCldLmNvbmNhdChhKSxiPW5ldyBUSFJFRS5TcGxpbmVDdXJ2ZShiKTt0aGlzLmN1cnZlcy5wdXNoKGIpO3RoaXMuY3VycmVudFBvaW50LmNvcHkoYVthLmxlbmd0aC0xXSl9LGFyYzpmdW5jdGlvbihhLGIsYyxkLGUsZil7dGhpcy5hYnNhcmMoYSt0aGlzLmN1cnJlbnRQb2ludC54LGIrdGhpcy5jdXJyZW50UG9pbnQueSxcbmMsZCxlLGYpfSxhYnNhcmM6ZnVuY3Rpb24oYSxiLGMsZCxlLGYpe3RoaXMuYWJzZWxsaXBzZShhLGIsYyxjLGQsZSxmKX0sZWxsaXBzZTpmdW5jdGlvbihhLGIsYyxkLGUsZixnLGgpe3RoaXMuYWJzZWxsaXBzZShhK3RoaXMuY3VycmVudFBvaW50LngsYit0aGlzLmN1cnJlbnRQb2ludC55LGMsZCxlLGYsZyxoKX0sYWJzZWxsaXBzZTpmdW5jdGlvbihhLGIsYyxkLGUsZixnLGgpe2E9bmV3IFRIUkVFLkVsbGlwc2VDdXJ2ZShhLGIsYyxkLGUsZixnLGgpOzA8dGhpcy5jdXJ2ZXMubGVuZ3RoJiYoYj1hLmdldFBvaW50KDApLGIuZXF1YWxzKHRoaXMuY3VycmVudFBvaW50KXx8dGhpcy5saW5lVG8oYi54LGIueSkpO3RoaXMuY3VydmVzLnB1c2goYSk7YT1hLmdldFBvaW50KDEpO3RoaXMuY3VycmVudFBvaW50LmNvcHkoYSl9fSk7VEhSRUUuU2hhcGVQYXRoPWZ1bmN0aW9uKCl7dGhpcy5zdWJQYXRocz1bXTt0aGlzLmN1cnJlbnRQYXRoPW51bGx9O1xuVEhSRUUuU2hhcGVQYXRoLnByb3RvdHlwZT17bW92ZVRvOmZ1bmN0aW9uKGEsYil7dGhpcy5jdXJyZW50UGF0aD1uZXcgVEhSRUUuUGF0aDt0aGlzLnN1YlBhdGhzLnB1c2godGhpcy5jdXJyZW50UGF0aCk7dGhpcy5jdXJyZW50UGF0aC5tb3ZlVG8oYSxiKX0sbGluZVRvOmZ1bmN0aW9uKGEsYil7dGhpcy5jdXJyZW50UGF0aC5saW5lVG8oYSxiKX0scXVhZHJhdGljQ3VydmVUbzpmdW5jdGlvbihhLGIsYyxkKXt0aGlzLmN1cnJlbnRQYXRoLnF1YWRyYXRpY0N1cnZlVG8oYSxiLGMsZCl9LGJlemllckN1cnZlVG86ZnVuY3Rpb24oYSxiLGMsZCxlLGYpe3RoaXMuY3VycmVudFBhdGguYmV6aWVyQ3VydmVUbyhhLGIsYyxkLGUsZil9LHNwbGluZVRocnU6ZnVuY3Rpb24oYSl7dGhpcy5jdXJyZW50UGF0aC5zcGxpbmVUaHJ1KGEpfSx0b1NoYXBlczpmdW5jdGlvbihhLGIpe2Z1bmN0aW9uIGMoYSl7Zm9yKHZhciBiPVtdLGM9MCxkPWEubGVuZ3RoO2M8ZDtjKyspe3ZhciBlPWFbY10sZj1uZXcgVEhSRUUuU2hhcGU7XG5mLmN1cnZlcz1lLmN1cnZlcztiLnB1c2goZil9cmV0dXJuIGJ9ZnVuY3Rpb24gZChhLGIpe2Zvcih2YXIgYz1iLmxlbmd0aCxkPSExLGU9Yy0xLGY9MDtmPGM7ZT1mKyspe3ZhciBnPWJbZV0saD1iW2ZdLGs9aC54LWcueCxsPWgueS1nLnk7aWYoTWF0aC5hYnMobCk+TnVtYmVyLkVQU0lMT04pe2lmKDA+bCYmKGc9YltmXSxrPS1rLGg9YltlXSxsPS1sKSwhKGEueTxnLnl8fGEueT5oLnkpKWlmKGEueT09PWcueSl7aWYoYS54PT09Zy54KXJldHVybiEwfWVsc2V7ZT1sKihhLngtZy54KS1rKihhLnktZy55KTtpZigwPT09ZSlyZXR1cm4hMDswPmV8fChkPSFkKX19ZWxzZSBpZihhLnk9PT1nLnkmJihoLng8PWEueCYmYS54PD1nLnh8fGcueDw9YS54JiZhLng8PWgueCkpcmV0dXJuITB9cmV0dXJuIGR9dmFyIGU9VEhSRUUuU2hhcGVVdGlscy5pc0Nsb2NrV2lzZSxmPXRoaXMuc3ViUGF0aHM7aWYoMD09PWYubGVuZ3RoKXJldHVybltdO2lmKCEwPT09YilyZXR1cm4gYyhmKTt2YXIgZyxcbmgsayxsPVtdO2lmKDE9PT1mLmxlbmd0aClyZXR1cm4gaD1mWzBdLGs9bmV3IFRIUkVFLlNoYXBlLGsuY3VydmVzPWguY3VydmVzLGwucHVzaChrKSxsO3ZhciBtPSFlKGZbMF0uZ2V0UG9pbnRzKCkpLG09YT8hbTptO2s9W107dmFyIHA9W10sbj1bXSxxPTAscjtwW3FdPXZvaWQgMDtuW3FdPVtdO2Zvcih2YXIgcz0wLHY9Zi5sZW5ndGg7czx2O3MrKyloPWZbc10scj1oLmdldFBvaW50cygpLGc9ZShyKSwoZz1hPyFnOmcpPyghbSYmcFtxXSYmcSsrLHBbcV09e3M6bmV3IFRIUkVFLlNoYXBlLHA6cn0scFtxXS5zLmN1cnZlcz1oLmN1cnZlcyxtJiZxKyssbltxXT1bXSk6bltxXS5wdXNoKHtoOmgscDpyWzBdfSk7aWYoIXBbMF0pcmV0dXJuIGMoZik7aWYoMTxwLmxlbmd0aCl7cz0hMTtoPVtdO2U9MDtmb3IoZj1wLmxlbmd0aDtlPGY7ZSsrKWtbZV09W107ZT0wO2ZvcihmPXAubGVuZ3RoO2U8ZjtlKyspZm9yKGc9bltlXSxtPTA7bTxnLmxlbmd0aDttKyspe3E9Z1ttXTtyPSEwO2Zvcih2PVxuMDt2PHAubGVuZ3RoO3YrKylkKHEucCxwW3ZdLnApJiYoZSE9PXYmJmgucHVzaCh7ZnJvbXM6ZSx0b3M6dixob2xlOm19KSxyPyhyPSExLGtbdl0ucHVzaChxKSk6cz0hMCk7ciYma1tlXS5wdXNoKHEpfTA8aC5sZW5ndGgmJihzfHwobj1rKSl9cz0wO2ZvcihlPXAubGVuZ3RoO3M8ZTtzKyspZm9yKGs9cFtzXS5zLGwucHVzaChrKSxoPW5bc10sZj0wLGc9aC5sZW5ndGg7ZjxnO2YrKylrLmhvbGVzLnB1c2goaFtmXS5oKTtyZXR1cm4gbH19O1RIUkVFLlNoYXBlPWZ1bmN0aW9uKCl7VEhSRUUuUGF0aC5hcHBseSh0aGlzLGFyZ3VtZW50cyk7dGhpcy5ob2xlcz1bXX07XG5USFJFRS5TaGFwZS5wcm90b3R5cGU9T2JqZWN0LmFzc2lnbihPYmplY3QuY3JlYXRlKFRIUkVFLlBhdGgucHJvdG90eXBlKSx7Y29uc3RydWN0b3I6VEhSRUUuU2hhcGUsZXh0cnVkZTpmdW5jdGlvbihhKXtyZXR1cm4gbmV3IFRIUkVFLkV4dHJ1ZGVHZW9tZXRyeSh0aGlzLGEpfSxtYWtlR2VvbWV0cnk6ZnVuY3Rpb24oYSl7cmV0dXJuIG5ldyBUSFJFRS5TaGFwZUdlb21ldHJ5KHRoaXMsYSl9LGdldFBvaW50c0hvbGVzOmZ1bmN0aW9uKGEpe2Zvcih2YXIgYj1bXSxjPTAsZD10aGlzLmhvbGVzLmxlbmd0aDtjPGQ7YysrKWJbY109dGhpcy5ob2xlc1tjXS5nZXRQb2ludHMoYSk7cmV0dXJuIGJ9LGV4dHJhY3RBbGxQb2ludHM6ZnVuY3Rpb24oYSl7cmV0dXJue3NoYXBlOnRoaXMuZ2V0UG9pbnRzKGEpLGhvbGVzOnRoaXMuZ2V0UG9pbnRzSG9sZXMoYSl9fSxleHRyYWN0UG9pbnRzOmZ1bmN0aW9uKGEpe3JldHVybiB0aGlzLmV4dHJhY3RBbGxQb2ludHMoYSl9fSk7XG5USFJFRS5MaW5lQ3VydmU9ZnVuY3Rpb24oYSxiKXt0aGlzLnYxPWE7dGhpcy52Mj1ifTtUSFJFRS5MaW5lQ3VydmUucHJvdG90eXBlPU9iamVjdC5jcmVhdGUoVEhSRUUuQ3VydmUucHJvdG90eXBlKTtUSFJFRS5MaW5lQ3VydmUucHJvdG90eXBlLmNvbnN0cnVjdG9yPVRIUkVFLkxpbmVDdXJ2ZTtUSFJFRS5MaW5lQ3VydmUucHJvdG90eXBlLmdldFBvaW50PWZ1bmN0aW9uKGEpe2lmKDE9PT1hKXJldHVybiB0aGlzLnYyLmNsb25lKCk7dmFyIGI9dGhpcy52Mi5jbG9uZSgpLnN1Yih0aGlzLnYxKTtiLm11bHRpcGx5U2NhbGFyKGEpLmFkZCh0aGlzLnYxKTtyZXR1cm4gYn07VEhSRUUuTGluZUN1cnZlLnByb3RvdHlwZS5nZXRQb2ludEF0PWZ1bmN0aW9uKGEpe3JldHVybiB0aGlzLmdldFBvaW50KGEpfTtUSFJFRS5MaW5lQ3VydmUucHJvdG90eXBlLmdldFRhbmdlbnQ9ZnVuY3Rpb24oYSl7cmV0dXJuIHRoaXMudjIuY2xvbmUoKS5zdWIodGhpcy52MSkubm9ybWFsaXplKCl9O1xuVEhSRUUuUXVhZHJhdGljQmV6aWVyQ3VydmU9ZnVuY3Rpb24oYSxiLGMpe3RoaXMudjA9YTt0aGlzLnYxPWI7dGhpcy52Mj1jfTtUSFJFRS5RdWFkcmF0aWNCZXppZXJDdXJ2ZS5wcm90b3R5cGU9T2JqZWN0LmNyZWF0ZShUSFJFRS5DdXJ2ZS5wcm90b3R5cGUpO1RIUkVFLlF1YWRyYXRpY0JlemllckN1cnZlLnByb3RvdHlwZS5jb25zdHJ1Y3Rvcj1USFJFRS5RdWFkcmF0aWNCZXppZXJDdXJ2ZTtUSFJFRS5RdWFkcmF0aWNCZXppZXJDdXJ2ZS5wcm90b3R5cGUuZ2V0UG9pbnQ9ZnVuY3Rpb24oYSl7dmFyIGI9VEhSRUUuU2hhcGVVdGlscy5iMjtyZXR1cm4gbmV3IFRIUkVFLlZlY3RvcjIoYihhLHRoaXMudjAueCx0aGlzLnYxLngsdGhpcy52Mi54KSxiKGEsdGhpcy52MC55LHRoaXMudjEueSx0aGlzLnYyLnkpKX07XG5USFJFRS5RdWFkcmF0aWNCZXppZXJDdXJ2ZS5wcm90b3R5cGUuZ2V0VGFuZ2VudD1mdW5jdGlvbihhKXt2YXIgYj1USFJFRS5DdXJ2ZVV0aWxzLnRhbmdlbnRRdWFkcmF0aWNCZXppZXI7cmV0dXJuKG5ldyBUSFJFRS5WZWN0b3IyKGIoYSx0aGlzLnYwLngsdGhpcy52MS54LHRoaXMudjIueCksYihhLHRoaXMudjAueSx0aGlzLnYxLnksdGhpcy52Mi55KSkpLm5vcm1hbGl6ZSgpfTtUSFJFRS5DdWJpY0JlemllckN1cnZlPWZ1bmN0aW9uKGEsYixjLGQpe3RoaXMudjA9YTt0aGlzLnYxPWI7dGhpcy52Mj1jO3RoaXMudjM9ZH07VEhSRUUuQ3ViaWNCZXppZXJDdXJ2ZS5wcm90b3R5cGU9T2JqZWN0LmNyZWF0ZShUSFJFRS5DdXJ2ZS5wcm90b3R5cGUpO1RIUkVFLkN1YmljQmV6aWVyQ3VydmUucHJvdG90eXBlLmNvbnN0cnVjdG9yPVRIUkVFLkN1YmljQmV6aWVyQ3VydmU7XG5USFJFRS5DdWJpY0JlemllckN1cnZlLnByb3RvdHlwZS5nZXRQb2ludD1mdW5jdGlvbihhKXt2YXIgYj1USFJFRS5TaGFwZVV0aWxzLmIzO3JldHVybiBuZXcgVEhSRUUuVmVjdG9yMihiKGEsdGhpcy52MC54LHRoaXMudjEueCx0aGlzLnYyLngsdGhpcy52My54KSxiKGEsdGhpcy52MC55LHRoaXMudjEueSx0aGlzLnYyLnksdGhpcy52My55KSl9O1RIUkVFLkN1YmljQmV6aWVyQ3VydmUucHJvdG90eXBlLmdldFRhbmdlbnQ9ZnVuY3Rpb24oYSl7dmFyIGI9VEhSRUUuQ3VydmVVdGlscy50YW5nZW50Q3ViaWNCZXppZXI7cmV0dXJuKG5ldyBUSFJFRS5WZWN0b3IyKGIoYSx0aGlzLnYwLngsdGhpcy52MS54LHRoaXMudjIueCx0aGlzLnYzLngpLGIoYSx0aGlzLnYwLnksdGhpcy52MS55LHRoaXMudjIueSx0aGlzLnYzLnkpKSkubm9ybWFsaXplKCl9O1RIUkVFLlNwbGluZUN1cnZlPWZ1bmN0aW9uKGEpe3RoaXMucG9pbnRzPXZvaWQgMD09YT9bXTphfTtcblRIUkVFLlNwbGluZUN1cnZlLnByb3RvdHlwZT1PYmplY3QuY3JlYXRlKFRIUkVFLkN1cnZlLnByb3RvdHlwZSk7VEhSRUUuU3BsaW5lQ3VydmUucHJvdG90eXBlLmNvbnN0cnVjdG9yPVRIUkVFLlNwbGluZUN1cnZlO1RIUkVFLlNwbGluZUN1cnZlLnByb3RvdHlwZS5nZXRQb2ludD1mdW5jdGlvbihhKXt2YXIgYj10aGlzLnBvaW50czthKj1iLmxlbmd0aC0xO3ZhciBjPU1hdGguZmxvb3IoYSk7YS09Yzt2YXIgZD1iWzA9PT1jP2M6Yy0xXSxlPWJbY10sZj1iW2M+Yi5sZW5ndGgtMj9iLmxlbmd0aC0xOmMrMV0sYj1iW2M+Yi5sZW5ndGgtMz9iLmxlbmd0aC0xOmMrMl0sYz1USFJFRS5DdXJ2ZVV0aWxzLmludGVycG9sYXRlO3JldHVybiBuZXcgVEhSRUUuVmVjdG9yMihjKGQueCxlLngsZi54LGIueCxhKSxjKGQueSxlLnksZi55LGIueSxhKSl9O1xuVEhSRUUuRWxsaXBzZUN1cnZlPWZ1bmN0aW9uKGEsYixjLGQsZSxmLGcsaCl7dGhpcy5hWD1hO3RoaXMuYVk9Yjt0aGlzLnhSYWRpdXM9Yzt0aGlzLnlSYWRpdXM9ZDt0aGlzLmFTdGFydEFuZ2xlPWU7dGhpcy5hRW5kQW5nbGU9Zjt0aGlzLmFDbG9ja3dpc2U9Zzt0aGlzLmFSb3RhdGlvbj1ofHwwfTtUSFJFRS5FbGxpcHNlQ3VydmUucHJvdG90eXBlPU9iamVjdC5jcmVhdGUoVEhSRUUuQ3VydmUucHJvdG90eXBlKTtUSFJFRS5FbGxpcHNlQ3VydmUucHJvdG90eXBlLmNvbnN0cnVjdG9yPVRIUkVFLkVsbGlwc2VDdXJ2ZTtcblRIUkVFLkVsbGlwc2VDdXJ2ZS5wcm90b3R5cGUuZ2V0UG9pbnQ9ZnVuY3Rpb24oYSl7Zm9yKHZhciBiPTIqTWF0aC5QSSxjPXRoaXMuYUVuZEFuZ2xlLXRoaXMuYVN0YXJ0QW5nbGUsZD1NYXRoLmFicyhjKTxOdW1iZXIuRVBTSUxPTjswPmM7KWMrPWI7Zm9yKDtjPmI7KWMtPWI7YzxOdW1iZXIuRVBTSUxPTiYmKGM9ZD8wOmIpOyEwIT09dGhpcy5hQ2xvY2t3aXNlfHxkfHwoYz1jPT09Yj8tYjpjLWIpO2I9dGhpcy5hU3RhcnRBbmdsZSthKmM7YT10aGlzLmFYK3RoaXMueFJhZGl1cypNYXRoLmNvcyhiKTt2YXIgZT10aGlzLmFZK3RoaXMueVJhZGl1cypNYXRoLnNpbihiKTswIT09dGhpcy5hUm90YXRpb24mJihiPU1hdGguY29zKHRoaXMuYVJvdGF0aW9uKSxjPU1hdGguc2luKHRoaXMuYVJvdGF0aW9uKSxkPWEtdGhpcy5hWCxlLT10aGlzLmFZLGE9ZCpiLWUqYyt0aGlzLmFYLGU9ZCpjK2UqYit0aGlzLmFZKTtyZXR1cm4gbmV3IFRIUkVFLlZlY3RvcjIoYSxlKX07XG5USFJFRS5BcmNDdXJ2ZT1mdW5jdGlvbihhLGIsYyxkLGUsZil7VEhSRUUuRWxsaXBzZUN1cnZlLmNhbGwodGhpcyxhLGIsYyxjLGQsZSxmKX07VEhSRUUuQXJjQ3VydmUucHJvdG90eXBlPU9iamVjdC5jcmVhdGUoVEhSRUUuRWxsaXBzZUN1cnZlLnByb3RvdHlwZSk7VEhSRUUuQXJjQ3VydmUucHJvdG90eXBlLmNvbnN0cnVjdG9yPVRIUkVFLkFyY0N1cnZlO1RIUkVFLkxpbmVDdXJ2ZTM9VEhSRUUuQ3VydmUuY3JlYXRlKGZ1bmN0aW9uKGEsYil7dGhpcy52MT1hO3RoaXMudjI9Yn0sZnVuY3Rpb24oYSl7aWYoMT09PWEpcmV0dXJuIHRoaXMudjIuY2xvbmUoKTt2YXIgYj1uZXcgVEhSRUUuVmVjdG9yMztiLnN1YlZlY3RvcnModGhpcy52Mix0aGlzLnYxKTtiLm11bHRpcGx5U2NhbGFyKGEpO2IuYWRkKHRoaXMudjEpO3JldHVybiBifSk7XG5USFJFRS5RdWFkcmF0aWNCZXppZXJDdXJ2ZTM9VEhSRUUuQ3VydmUuY3JlYXRlKGZ1bmN0aW9uKGEsYixjKXt0aGlzLnYwPWE7dGhpcy52MT1iO3RoaXMudjI9Y30sZnVuY3Rpb24oYSl7dmFyIGI9VEhSRUUuU2hhcGVVdGlscy5iMjtyZXR1cm4gbmV3IFRIUkVFLlZlY3RvcjMoYihhLHRoaXMudjAueCx0aGlzLnYxLngsdGhpcy52Mi54KSxiKGEsdGhpcy52MC55LHRoaXMudjEueSx0aGlzLnYyLnkpLGIoYSx0aGlzLnYwLnosdGhpcy52MS56LHRoaXMudjIueikpfSk7XG5USFJFRS5DdWJpY0JlemllckN1cnZlMz1USFJFRS5DdXJ2ZS5jcmVhdGUoZnVuY3Rpb24oYSxiLGMsZCl7dGhpcy52MD1hO3RoaXMudjE9Yjt0aGlzLnYyPWM7dGhpcy52Mz1kfSxmdW5jdGlvbihhKXt2YXIgYj1USFJFRS5TaGFwZVV0aWxzLmIzO3JldHVybiBuZXcgVEhSRUUuVmVjdG9yMyhiKGEsdGhpcy52MC54LHRoaXMudjEueCx0aGlzLnYyLngsdGhpcy52My54KSxiKGEsdGhpcy52MC55LHRoaXMudjEueSx0aGlzLnYyLnksdGhpcy52My55KSxiKGEsdGhpcy52MC56LHRoaXMudjEueix0aGlzLnYyLnosdGhpcy52My56KSl9KTtcblRIUkVFLlNwbGluZUN1cnZlMz1USFJFRS5DdXJ2ZS5jcmVhdGUoZnVuY3Rpb24oYSl7Y29uc29sZS53YXJuKFwiVEhSRUUuU3BsaW5lQ3VydmUzIHdpbGwgYmUgZGVwcmVjYXRlZC4gUGxlYXNlIHVzZSBUSFJFRS5DYXRtdWxsUm9tQ3VydmUzXCIpO3RoaXMucG9pbnRzPXZvaWQgMD09YT9bXTphfSxmdW5jdGlvbihhKXt2YXIgYj10aGlzLnBvaW50czthKj1iLmxlbmd0aC0xO3ZhciBjPU1hdGguZmxvb3IoYSk7YS09Yzt2YXIgZD1iWzA9PWM/YzpjLTFdLGU9YltjXSxmPWJbYz5iLmxlbmd0aC0yP2IubGVuZ3RoLTE6YysxXSxiPWJbYz5iLmxlbmd0aC0zP2IubGVuZ3RoLTE6YysyXSxjPVRIUkVFLkN1cnZlVXRpbHMuaW50ZXJwb2xhdGU7cmV0dXJuIG5ldyBUSFJFRS5WZWN0b3IzKGMoZC54LGUueCxmLngsYi54LGEpLGMoZC55LGUueSxmLnksYi55LGEpLGMoZC56LGUueixmLnosYi56LGEpKX0pO1xuVEhSRUUuQ2F0bXVsbFJvbUN1cnZlMz1mdW5jdGlvbigpe2Z1bmN0aW9uIGEoKXt9dmFyIGI9bmV3IFRIUkVFLlZlY3RvcjMsYz1uZXcgYSxkPW5ldyBhLGU9bmV3IGE7YS5wcm90b3R5cGUuaW5pdD1mdW5jdGlvbihhLGIsYyxkKXt0aGlzLmMwPWE7dGhpcy5jMT1jO3RoaXMuYzI9LTMqYSszKmItMipjLWQ7dGhpcy5jMz0yKmEtMipiK2MrZH07YS5wcm90b3R5cGUuaW5pdE5vbnVuaWZvcm1DYXRtdWxsUm9tPWZ1bmN0aW9uKGEsYixjLGQsZSxtLHApe2E9KChiLWEpL2UtKGMtYSkvKGUrbSkrKGMtYikvbSkqbTtkPSgoYy1iKS9tLShkLWIpLyhtK3ApKyhkLWMpL3ApKm07dGhpcy5pbml0KGIsYyxhLGQpfTthLnByb3RvdHlwZS5pbml0Q2F0bXVsbFJvbT1mdW5jdGlvbihhLGIsYyxkLGUpe3RoaXMuaW5pdChiLGMsZSooYy1hKSxlKihkLWIpKX07YS5wcm90b3R5cGUuY2FsYz1mdW5jdGlvbihhKXt2YXIgYj1hKmE7cmV0dXJuIHRoaXMuYzArdGhpcy5jMSphK3RoaXMuYzIqYit0aGlzLmMzKlxuYiphfTtyZXR1cm4gVEhSRUUuQ3VydmUuY3JlYXRlKGZ1bmN0aW9uKGEpe3RoaXMucG9pbnRzPWF8fFtdO3RoaXMuY2xvc2VkPSExfSxmdW5jdGlvbihhKXt2YXIgZz10aGlzLnBvaW50cyxoLGs7az1nLmxlbmd0aDsyPmsmJmNvbnNvbGUubG9nKFwiZHVoLCB5b3UgbmVlZCBhdCBsZWFzdCAyIHBvaW50c1wiKTthKj1rLSh0aGlzLmNsb3NlZD8wOjEpO2g9TWF0aC5mbG9vcihhKTthLT1oO3RoaXMuY2xvc2VkP2grPTA8aD8wOihNYXRoLmZsb29yKE1hdGguYWJzKGgpL2cubGVuZ3RoKSsxKSpnLmxlbmd0aDowPT09YSYmaD09PWstMSYmKGg9ay0yLGE9MSk7dmFyIGwsbSxwO3RoaXMuY2xvc2VkfHwwPGg/bD1nWyhoLTEpJWtdOihiLnN1YlZlY3RvcnMoZ1swXSxnWzFdKS5hZGQoZ1swXSksbD1iKTttPWdbaCVrXTtwPWdbKGgrMSkla107dGhpcy5jbG9zZWR8fGgrMjxrP2c9Z1soaCsyKSVrXTooYi5zdWJWZWN0b3JzKGdbay0xXSxnW2stMl0pLmFkZChnW2stMV0pLGc9Yik7aWYodm9pZCAwPT09XG50aGlzLnR5cGV8fFwiY2VudHJpcGV0YWxcIj09PXRoaXMudHlwZXx8XCJjaG9yZGFsXCI9PT10aGlzLnR5cGUpe3ZhciBuPVwiY2hvcmRhbFwiPT09dGhpcy50eXBlPy41Oi4yNTtrPU1hdGgucG93KGwuZGlzdGFuY2VUb1NxdWFyZWQobSksbik7aD1NYXRoLnBvdyhtLmRpc3RhbmNlVG9TcXVhcmVkKHApLG4pO249TWF0aC5wb3cocC5kaXN0YW5jZVRvU3F1YXJlZChnKSxuKTsxRS00PmgmJihoPTEpOzFFLTQ+ayYmKGs9aCk7MUUtND5uJiYobj1oKTtjLmluaXROb251bmlmb3JtQ2F0bXVsbFJvbShsLngsbS54LHAueCxnLngsayxoLG4pO2QuaW5pdE5vbnVuaWZvcm1DYXRtdWxsUm9tKGwueSxtLnkscC55LGcueSxrLGgsbik7ZS5pbml0Tm9udW5pZm9ybUNhdG11bGxSb20obC56LG0ueixwLnosZy56LGssaCxuKX1lbHNlXCJjYXRtdWxscm9tXCI9PT10aGlzLnR5cGUmJihrPXZvaWQgMCE9PXRoaXMudGVuc2lvbj90aGlzLnRlbnNpb246LjUsYy5pbml0Q2F0bXVsbFJvbShsLngsbS54LHAueCxnLngsXG5rKSxkLmluaXRDYXRtdWxsUm9tKGwueSxtLnkscC55LGcueSxrKSxlLmluaXRDYXRtdWxsUm9tKGwueixtLnoscC56LGcueixrKSk7cmV0dXJuIG5ldyBUSFJFRS5WZWN0b3IzKGMuY2FsYyhhKSxkLmNhbGMoYSksZS5jYWxjKGEpKX0pfSgpO1RIUkVFLkNsb3NlZFNwbGluZUN1cnZlMz1mdW5jdGlvbihhKXtjb25zb2xlLndhcm4oXCJUSFJFRS5DbG9zZWRTcGxpbmVDdXJ2ZTMgaGFzIGJlZW4gZGVwcmVjYXRlZC4gUGxlYXNlIHVzZSBUSFJFRS5DYXRtdWxsUm9tQ3VydmUzLlwiKTtUSFJFRS5DYXRtdWxsUm9tQ3VydmUzLmNhbGwodGhpcyxhKTt0aGlzLnR5cGU9XCJjYXRtdWxscm9tXCI7dGhpcy5jbG9zZWQ9ITB9O1RIUkVFLkNsb3NlZFNwbGluZUN1cnZlMy5wcm90b3R5cGU9T2JqZWN0LmNyZWF0ZShUSFJFRS5DYXRtdWxsUm9tQ3VydmUzLnByb3RvdHlwZSk7XG5USFJFRS5Cb3hHZW9tZXRyeT1mdW5jdGlvbihhLGIsYyxkLGUsZil7VEhSRUUuR2VvbWV0cnkuY2FsbCh0aGlzKTt0aGlzLnR5cGU9XCJCb3hHZW9tZXRyeVwiO3RoaXMucGFyYW1ldGVycz17d2lkdGg6YSxoZWlnaHQ6YixkZXB0aDpjLHdpZHRoU2VnbWVudHM6ZCxoZWlnaHRTZWdtZW50czplLGRlcHRoU2VnbWVudHM6Zn07dGhpcy5mcm9tQnVmZmVyR2VvbWV0cnkobmV3IFRIUkVFLkJveEJ1ZmZlckdlb21ldHJ5KGEsYixjLGQsZSxmKSk7dGhpcy5tZXJnZVZlcnRpY2VzKCl9O1RIUkVFLkJveEdlb21ldHJ5LnByb3RvdHlwZT1PYmplY3QuY3JlYXRlKFRIUkVFLkdlb21ldHJ5LnByb3RvdHlwZSk7VEhSRUUuQm94R2VvbWV0cnkucHJvdG90eXBlLmNvbnN0cnVjdG9yPVRIUkVFLkJveEdlb21ldHJ5O1RIUkVFLkN1YmVHZW9tZXRyeT1USFJFRS5Cb3hHZW9tZXRyeTtcblRIUkVFLkJveEJ1ZmZlckdlb21ldHJ5PWZ1bmN0aW9uKGEsYixjLGQsZSxmKXtmdW5jdGlvbiBnKGEsYixjLGQsZSxmLGcsayxsLEosUCl7dmFyIEs9Zi9sLEg9Zy9KLE09Zi8yLE89Zy8yLE49ay8yO2c9bCsxO2Zvcih2YXIgUT1KKzEsQz1mPTAsTD1uZXcgVEhSRUUuVmVjdG9yMyxFPTA7RTxRO0UrKylmb3IodmFyICQ9RSpILU8sVD0wO1Q8ZztUKyspTFthXT0oVCpLLU0pKmQsTFtiXT0kKmUsTFtjXT1OLHBbcl09TC54LHBbcisxXT1MLnkscFtyKzJdPUwueixMW2FdPTAsTFtiXT0wLExbY109MDxrPzE6LTEsbltyXT1MLngsbltyKzFdPUwueSxuW3IrMl09TC56LHFbc109VC9sLHFbcysxXT0xLUUvSixyKz0zLHMrPTIsZis9MTtmb3IoRT0wO0U8SjtFKyspZm9yKFQ9MDtUPGw7VCsrKWE9dCtUK2cqKEUrMSksYj10KyhUKzEpK2cqKEUrMSksYz10KyhUKzEpK2cqRSxtW3ZdPXQrVCtnKkUsbVt2KzFdPWEsbVt2KzJdPWMsbVt2KzNdPWEsbVt2KzRdPWIsbVt2KzVdPWMsdis9NixDKz1cbjY7aC5hZGRHcm91cCh1LEMsUCk7dSs9Qzt0Kz1mfVRIUkVFLkJ1ZmZlckdlb21ldHJ5LmNhbGwodGhpcyk7dGhpcy50eXBlPVwiQm94QnVmZmVyR2VvbWV0cnlcIjt0aGlzLnBhcmFtZXRlcnM9e3dpZHRoOmEsaGVpZ2h0OmIsZGVwdGg6Yyx3aWR0aFNlZ21lbnRzOmQsaGVpZ2h0U2VnbWVudHM6ZSxkZXB0aFNlZ21lbnRzOmZ9O3ZhciBoPXRoaXM7ZD1NYXRoLmZsb29yKGQpfHwxO2U9TWF0aC5mbG9vcihlKXx8MTtmPU1hdGguZmxvb3IoZil8fDE7dmFyIGs9ZnVuY3Rpb24oYSxiLGMpe2E9MCsoYSsxKSooYisxKSoyKyhhKzEpKihjKzEpKjI7cmV0dXJuIGErPShjKzEpKihiKzEpKjJ9KGQsZSxmKSxsPWZ1bmN0aW9uKGEsYixjKXthPTArYSpiKjIrYSpjKjI7YSs9YypiKjI7cmV0dXJuIDYqYX0oZCxlLGYpLG09bmV3ICg2NTUzNTxsP1VpbnQzMkFycmF5OlVpbnQxNkFycmF5KShsKSxwPW5ldyBGbG9hdDMyQXJyYXkoMyprKSxuPW5ldyBGbG9hdDMyQXJyYXkoMyprKSxxPW5ldyBGbG9hdDMyQXJyYXkoMipcbmspLHI9MCxzPTAsdj0wLHQ9MCx1PTA7ZyhcInpcIixcInlcIixcInhcIiwtMSwtMSxjLGIsYSxmLGUsMCk7ZyhcInpcIixcInlcIixcInhcIiwxLC0xLGMsYiwtYSxmLGUsMSk7ZyhcInhcIixcInpcIixcInlcIiwxLDEsYSxjLGIsZCxmLDIpO2coXCJ4XCIsXCJ6XCIsXCJ5XCIsMSwtMSxhLGMsLWIsZCxmLDMpO2coXCJ4XCIsXCJ5XCIsXCJ6XCIsMSwtMSxhLGIsYyxkLGUsNCk7ZyhcInhcIixcInlcIixcInpcIiwtMSwtMSxhLGIsLWMsZCxlLDUpO3RoaXMuc2V0SW5kZXgobmV3IFRIUkVFLkJ1ZmZlckF0dHJpYnV0ZShtLDEpKTt0aGlzLmFkZEF0dHJpYnV0ZShcInBvc2l0aW9uXCIsbmV3IFRIUkVFLkJ1ZmZlckF0dHJpYnV0ZShwLDMpKTt0aGlzLmFkZEF0dHJpYnV0ZShcIm5vcm1hbFwiLG5ldyBUSFJFRS5CdWZmZXJBdHRyaWJ1dGUobiwzKSk7dGhpcy5hZGRBdHRyaWJ1dGUoXCJ1dlwiLG5ldyBUSFJFRS5CdWZmZXJBdHRyaWJ1dGUocSwyKSl9O1RIUkVFLkJveEJ1ZmZlckdlb21ldHJ5LnByb3RvdHlwZT1PYmplY3QuY3JlYXRlKFRIUkVFLkJ1ZmZlckdlb21ldHJ5LnByb3RvdHlwZSk7XG5USFJFRS5Cb3hCdWZmZXJHZW9tZXRyeS5wcm90b3R5cGUuY29uc3RydWN0b3I9VEhSRUUuQm94QnVmZmVyR2VvbWV0cnk7VEhSRUUuQ2lyY2xlR2VvbWV0cnk9ZnVuY3Rpb24oYSxiLGMsZCl7VEhSRUUuR2VvbWV0cnkuY2FsbCh0aGlzKTt0aGlzLnR5cGU9XCJDaXJjbGVHZW9tZXRyeVwiO3RoaXMucGFyYW1ldGVycz17cmFkaXVzOmEsc2VnbWVudHM6Yix0aGV0YVN0YXJ0OmMsdGhldGFMZW5ndGg6ZH07dGhpcy5mcm9tQnVmZmVyR2VvbWV0cnkobmV3IFRIUkVFLkNpcmNsZUJ1ZmZlckdlb21ldHJ5KGEsYixjLGQpKX07VEhSRUUuQ2lyY2xlR2VvbWV0cnkucHJvdG90eXBlPU9iamVjdC5jcmVhdGUoVEhSRUUuR2VvbWV0cnkucHJvdG90eXBlKTtUSFJFRS5DaXJjbGVHZW9tZXRyeS5wcm90b3R5cGUuY29uc3RydWN0b3I9VEhSRUUuQ2lyY2xlR2VvbWV0cnk7XG5USFJFRS5DaXJjbGVCdWZmZXJHZW9tZXRyeT1mdW5jdGlvbihhLGIsYyxkKXtUSFJFRS5CdWZmZXJHZW9tZXRyeS5jYWxsKHRoaXMpO3RoaXMudHlwZT1cIkNpcmNsZUJ1ZmZlckdlb21ldHJ5XCI7dGhpcy5wYXJhbWV0ZXJzPXtyYWRpdXM6YSxzZWdtZW50czpiLHRoZXRhU3RhcnQ6Yyx0aGV0YUxlbmd0aDpkfTthPWF8fDUwO2I9dm9pZCAwIT09Yj9NYXRoLm1heCgzLGIpOjg7Yz12b2lkIDAhPT1jP2M6MDtkPXZvaWQgMCE9PWQ/ZDoyKk1hdGguUEk7dmFyIGU9YisyLGY9bmV3IEZsb2F0MzJBcnJheSgzKmUpLGc9bmV3IEZsb2F0MzJBcnJheSgzKmUpLGU9bmV3IEZsb2F0MzJBcnJheSgyKmUpO2dbMl09MTtlWzBdPS41O2VbMV09LjU7Zm9yKHZhciBoPTAsaz0zLGw9MjtoPD1iO2grKyxrKz0zLGwrPTIpe3ZhciBtPWMraC9iKmQ7ZltrXT1hKk1hdGguY29zKG0pO2ZbaysxXT1hKk1hdGguc2luKG0pO2dbaysyXT0xO2VbbF09KGZba10vYSsxKS8yO2VbbCsxXT0oZltrKzFdL2ErMSkvMn1jPVxuW107Zm9yKGs9MTtrPD1iO2srKyljLnB1c2goayxrKzEsMCk7dGhpcy5zZXRJbmRleChuZXcgVEhSRUUuQnVmZmVyQXR0cmlidXRlKG5ldyBVaW50MTZBcnJheShjKSwxKSk7dGhpcy5hZGRBdHRyaWJ1dGUoXCJwb3NpdGlvblwiLG5ldyBUSFJFRS5CdWZmZXJBdHRyaWJ1dGUoZiwzKSk7dGhpcy5hZGRBdHRyaWJ1dGUoXCJub3JtYWxcIixuZXcgVEhSRUUuQnVmZmVyQXR0cmlidXRlKGcsMykpO3RoaXMuYWRkQXR0cmlidXRlKFwidXZcIixuZXcgVEhSRUUuQnVmZmVyQXR0cmlidXRlKGUsMikpO3RoaXMuYm91bmRpbmdTcGhlcmU9bmV3IFRIUkVFLlNwaGVyZShuZXcgVEhSRUUuVmVjdG9yMyxhKX07VEhSRUUuQ2lyY2xlQnVmZmVyR2VvbWV0cnkucHJvdG90eXBlPU9iamVjdC5jcmVhdGUoVEhSRUUuQnVmZmVyR2VvbWV0cnkucHJvdG90eXBlKTtUSFJFRS5DaXJjbGVCdWZmZXJHZW9tZXRyeS5wcm90b3R5cGUuY29uc3RydWN0b3I9VEhSRUUuQ2lyY2xlQnVmZmVyR2VvbWV0cnk7XG5USFJFRS5DeWxpbmRlckJ1ZmZlckdlb21ldHJ5PWZ1bmN0aW9uKGEsYixjLGQsZSxmLGcsaCl7ZnVuY3Rpb24gayhjKXt2YXIgZSxmLGssbT1uZXcgVEhSRUUuVmVjdG9yMixuPW5ldyBUSFJFRS5WZWN0b3IzLHA9MCxEPSEwPT09Yz9hOmIsSz0hMD09PWM/MTotMTtmPXQ7Zm9yKGU9MTtlPD1kO2UrKylyLnNldFhZWih0LDAsdypLLDApLHMuc2V0WFlaKHQsMCxLLDApLG0ueD0uNSxtLnk9LjUsdi5zZXRYWSh0LG0ueCxtLnkpLHQrKztrPXQ7Zm9yKGU9MDtlPD1kO2UrKyl7dmFyIEg9ZS9kKmgrZyxNPU1hdGguY29zKEgpLEg9TWF0aC5zaW4oSCk7bi54PUQqSDtuLnk9dypLO24uej1EKk07ci5zZXRYWVoodCxuLngsbi55LG4ueik7cy5zZXRYWVoodCwwLEssMCk7bS54PS41Kk0rLjU7bS55PS41KkgqSysuNTt2LnNldFhZKHQsbS54LG0ueSk7dCsrfWZvcihlPTA7ZTxkO2UrKyltPWYrZSxuPWsrZSwhMD09PWM/KHEuc2V0WCh1LG4pLHUrKyxxLnNldFgodSxuKzEpKToocS5zZXRYKHUsXG5uKzEpLHUrKyxxLnNldFgodSxuKSksdSsrLHEuc2V0WCh1LG0pLHUrKyxwKz0zO2wuYWRkR3JvdXAoSSxwLCEwPT09Yz8xOjIpO0krPXB9VEhSRUUuQnVmZmVyR2VvbWV0cnkuY2FsbCh0aGlzKTt0aGlzLnR5cGU9XCJDeWxpbmRlckJ1ZmZlckdlb21ldHJ5XCI7dGhpcy5wYXJhbWV0ZXJzPXtyYWRpdXNUb3A6YSxyYWRpdXNCb3R0b206YixoZWlnaHQ6YyxyYWRpYWxTZWdtZW50czpkLGhlaWdodFNlZ21lbnRzOmUsb3BlbkVuZGVkOmYsdGhldGFTdGFydDpnLHRoZXRhTGVuZ3RoOmh9O3ZhciBsPXRoaXM7YT12b2lkIDAhPT1hP2E6MjA7Yj12b2lkIDAhPT1iP2I6MjA7Yz12b2lkIDAhPT1jP2M6MTAwO2Q9TWF0aC5mbG9vcihkKXx8ODtlPU1hdGguZmxvb3IoZSl8fDE7Zj12b2lkIDAhPT1mP2Y6ITE7Zz12b2lkIDAhPT1nP2c6MDtoPXZvaWQgMCE9PWg/aDoyKk1hdGguUEk7dmFyIG09MDshMT09PWYmJigwPGEmJm0rKywwPGImJm0rKyk7dmFyIHA9ZnVuY3Rpb24oKXt2YXIgYT0oZCsxKSpcbihlKzEpOyExPT09ZiYmKGErPShkKzEpKm0rZCptKTtyZXR1cm4gYX0oKSxuPWZ1bmN0aW9uKCl7dmFyIGE9ZCplKjY7ITE9PT1mJiYoYSs9ZCptKjMpO3JldHVybiBhfSgpLHE9bmV3IFRIUkVFLkJ1ZmZlckF0dHJpYnV0ZShuZXcgKDY1NTM1PG4/VWludDMyQXJyYXk6VWludDE2QXJyYXkpKG4pLDEpLHI9bmV3IFRIUkVFLkJ1ZmZlckF0dHJpYnV0ZShuZXcgRmxvYXQzMkFycmF5KDMqcCksMykscz1uZXcgVEhSRUUuQnVmZmVyQXR0cmlidXRlKG5ldyBGbG9hdDMyQXJyYXkoMypwKSwzKSx2PW5ldyBUSFJFRS5CdWZmZXJBdHRyaWJ1dGUobmV3IEZsb2F0MzJBcnJheSgyKnApLDIpLHQ9MCx1PTAsRD1bXSx3PWMvMixJPTA7KGZ1bmN0aW9uKCl7dmFyIGYsayxtPW5ldyBUSFJFRS5WZWN0b3IzLG49bmV3IFRIUkVFLlZlY3RvcjMscD0wLEY9KGItYSkvYztmb3Ioaz0wO2s8PWU7aysrKXt2YXIgSj1bXSxQPWsvZSxLPVAqKGItYSkrYTtmb3IoZj0wO2Y8PWQ7ZisrKXt2YXIgSD1mL2Q7bi54PVxuSypNYXRoLnNpbihIKmgrZyk7bi55PS1QKmMrdztuLno9SypNYXRoLmNvcyhIKmgrZyk7ci5zZXRYWVoodCxuLngsbi55LG4ueik7bS5jb3B5KG4pO2lmKDA9PT1hJiYwPT09a3x8MD09PWImJms9PT1lKW0ueD1NYXRoLnNpbihIKmgrZyksbS56PU1hdGguY29zKEgqaCtnKTttLnNldFkoTWF0aC5zcXJ0KG0ueCptLngrbS56Km0ueikqRikubm9ybWFsaXplKCk7cy5zZXRYWVoodCxtLngsbS55LG0ueik7di5zZXRYWSh0LEgsMS1QKTtKLnB1c2godCk7dCsrfUQucHVzaChKKX1mb3IoZj0wO2Y8ZDtmKyspZm9yKGs9MDtrPGU7aysrKW09RFtrKzFdW2ZdLG49RFtrKzFdW2YrMV0sRj1EW2tdW2YrMV0scS5zZXRYKHUsRFtrXVtmXSksdSsrLHEuc2V0WCh1LG0pLHUrKyxxLnNldFgodSxGKSx1KysscS5zZXRYKHUsbSksdSsrLHEuc2V0WCh1LG4pLHUrKyxxLnNldFgodSxGKSx1KysscCs9NjtsLmFkZEdyb3VwKEkscCwwKTtJKz1wfSkoKTshMT09PWYmJigwPGEmJmsoITApLDA8YiYmayghMSkpO1xudGhpcy5zZXRJbmRleChxKTt0aGlzLmFkZEF0dHJpYnV0ZShcInBvc2l0aW9uXCIscik7dGhpcy5hZGRBdHRyaWJ1dGUoXCJub3JtYWxcIixzKTt0aGlzLmFkZEF0dHJpYnV0ZShcInV2XCIsdil9O1RIUkVFLkN5bGluZGVyQnVmZmVyR2VvbWV0cnkucHJvdG90eXBlPU9iamVjdC5jcmVhdGUoVEhSRUUuQnVmZmVyR2VvbWV0cnkucHJvdG90eXBlKTtUSFJFRS5DeWxpbmRlckJ1ZmZlckdlb21ldHJ5LnByb3RvdHlwZS5jb25zdHJ1Y3Rvcj1USFJFRS5DeWxpbmRlckJ1ZmZlckdlb21ldHJ5O1xuVEhSRUUuQ3lsaW5kZXJHZW9tZXRyeT1mdW5jdGlvbihhLGIsYyxkLGUsZixnLGgpe1RIUkVFLkdlb21ldHJ5LmNhbGwodGhpcyk7dGhpcy50eXBlPVwiQ3lsaW5kZXJHZW9tZXRyeVwiO3RoaXMucGFyYW1ldGVycz17cmFkaXVzVG9wOmEscmFkaXVzQm90dG9tOmIsaGVpZ2h0OmMscmFkaWFsU2VnbWVudHM6ZCxoZWlnaHRTZWdtZW50czplLG9wZW5FbmRlZDpmLHRoZXRhU3RhcnQ6Zyx0aGV0YUxlbmd0aDpofTt0aGlzLmZyb21CdWZmZXJHZW9tZXRyeShuZXcgVEhSRUUuQ3lsaW5kZXJCdWZmZXJHZW9tZXRyeShhLGIsYyxkLGUsZixnLGgpKTt0aGlzLm1lcmdlVmVydGljZXMoKX07VEhSRUUuQ3lsaW5kZXJHZW9tZXRyeS5wcm90b3R5cGU9T2JqZWN0LmNyZWF0ZShUSFJFRS5HZW9tZXRyeS5wcm90b3R5cGUpO1RIUkVFLkN5bGluZGVyR2VvbWV0cnkucHJvdG90eXBlLmNvbnN0cnVjdG9yPVRIUkVFLkN5bGluZGVyR2VvbWV0cnk7XG5USFJFRS5Db25lQnVmZmVyR2VvbWV0cnk9ZnVuY3Rpb24oYSxiLGMsZCxlLGYsZyl7VEhSRUUuQ3lsaW5kZXJCdWZmZXJHZW9tZXRyeS5jYWxsKHRoaXMsMCxhLGIsYyxkLGUsZixnKTt0aGlzLnR5cGU9XCJDb25lQnVmZmVyR2VvbWV0cnlcIjt0aGlzLnBhcmFtZXRlcnM9e3JhZGl1czphLGhlaWdodDpiLHJhZGlhbFNlZ21lbnRzOmMsaGVpZ2h0U2VnbWVudHM6ZCx0aGV0YVN0YXJ0OmYsdGhldGFMZW5ndGg6Z319O1RIUkVFLkNvbmVCdWZmZXJHZW9tZXRyeS5wcm90b3R5cGU9T2JqZWN0LmNyZWF0ZShUSFJFRS5CdWZmZXJHZW9tZXRyeS5wcm90b3R5cGUpO1RIUkVFLkNvbmVCdWZmZXJHZW9tZXRyeS5wcm90b3R5cGUuY29uc3RydWN0b3I9VEhSRUUuQ29uZUJ1ZmZlckdlb21ldHJ5O1xuVEhSRUUuQ29uZUdlb21ldHJ5PWZ1bmN0aW9uKGEsYixjLGQsZSxmLGcpe1RIUkVFLkN5bGluZGVyR2VvbWV0cnkuY2FsbCh0aGlzLDAsYSxiLGMsZCxlLGYsZyk7dGhpcy50eXBlPVwiQ29uZUdlb21ldHJ5XCI7dGhpcy5wYXJhbWV0ZXJzPXtyYWRpdXM6YSxoZWlnaHQ6YixyYWRpYWxTZWdtZW50czpjLGhlaWdodFNlZ21lbnRzOmQsb3BlbkVuZGVkOmUsdGhldGFTdGFydDpmLHRoZXRhTGVuZ3RoOmd9fTtUSFJFRS5Db25lR2VvbWV0cnkucHJvdG90eXBlPU9iamVjdC5jcmVhdGUoVEhSRUUuQ3lsaW5kZXJHZW9tZXRyeS5wcm90b3R5cGUpO1RIUkVFLkNvbmVHZW9tZXRyeS5wcm90b3R5cGUuY29uc3RydWN0b3I9VEhSRUUuQ29uZUdlb21ldHJ5O1xuVEhSRUUuRWRnZXNHZW9tZXRyeT1mdW5jdGlvbihhLGIpe2Z1bmN0aW9uIGMoYSxiKXtyZXR1cm4gYS1ifVRIUkVFLkJ1ZmZlckdlb21ldHJ5LmNhbGwodGhpcyk7dmFyIGQ9TWF0aC5jb3MoVEhSRUUuTWF0aC5ERUcyUkFEKih2b2lkIDAhPT1iP2I6MSkpLGU9WzAsMF0sZj17fSxnPVtcImFcIixcImJcIixcImNcIl0saDthIGluc3RhbmNlb2YgVEhSRUUuQnVmZmVyR2VvbWV0cnk/KGg9bmV3IFRIUkVFLkdlb21ldHJ5LGguZnJvbUJ1ZmZlckdlb21ldHJ5KGEpKTpoPWEuY2xvbmUoKTtoLm1lcmdlVmVydGljZXMoKTtoLmNvbXB1dGVGYWNlTm9ybWFscygpO3ZhciBrPWgudmVydGljZXM7aD1oLmZhY2VzO2Zvcih2YXIgbD0wLG09aC5sZW5ndGg7bDxtO2wrKylmb3IodmFyIHA9aFtsXSxuPTA7Mz5uO24rKyl7ZVswXT1wW2dbbl1dO2VbMV09cFtnWyhuKzEpJTNdXTtlLnNvcnQoYyk7dmFyIHE9ZS50b1N0cmluZygpO3ZvaWQgMD09PWZbcV0/ZltxXT17dmVydDE6ZVswXSx2ZXJ0MjplWzFdLGZhY2UxOmwsXG5mYWNlMjp2b2lkIDB9OmZbcV0uZmFjZTI9bH1lPVtdO2ZvcihxIGluIGYpaWYoZz1mW3FdLHZvaWQgMD09PWcuZmFjZTJ8fGhbZy5mYWNlMV0ubm9ybWFsLmRvdChoW2cuZmFjZTJdLm5vcm1hbCk8PWQpbD1rW2cudmVydDFdLGUucHVzaChsLngpLGUucHVzaChsLnkpLGUucHVzaChsLnopLGw9a1tnLnZlcnQyXSxlLnB1c2gobC54KSxlLnB1c2gobC55KSxlLnB1c2gobC56KTt0aGlzLmFkZEF0dHJpYnV0ZShcInBvc2l0aW9uXCIsbmV3IFRIUkVFLkJ1ZmZlckF0dHJpYnV0ZShuZXcgRmxvYXQzMkFycmF5KGUpLDMpKX07VEhSRUUuRWRnZXNHZW9tZXRyeS5wcm90b3R5cGU9T2JqZWN0LmNyZWF0ZShUSFJFRS5CdWZmZXJHZW9tZXRyeS5wcm90b3R5cGUpO1RIUkVFLkVkZ2VzR2VvbWV0cnkucHJvdG90eXBlLmNvbnN0cnVjdG9yPVRIUkVFLkVkZ2VzR2VvbWV0cnk7XG5USFJFRS5FeHRydWRlR2VvbWV0cnk9ZnVuY3Rpb24oYSxiKXtcInVuZGVmaW5lZFwiIT09dHlwZW9mIGEmJihUSFJFRS5HZW9tZXRyeS5jYWxsKHRoaXMpLHRoaXMudHlwZT1cIkV4dHJ1ZGVHZW9tZXRyeVwiLGE9QXJyYXkuaXNBcnJheShhKT9hOlthXSx0aGlzLmFkZFNoYXBlTGlzdChhLGIpLHRoaXMuY29tcHV0ZUZhY2VOb3JtYWxzKCkpfTtUSFJFRS5FeHRydWRlR2VvbWV0cnkucHJvdG90eXBlPU9iamVjdC5jcmVhdGUoVEhSRUUuR2VvbWV0cnkucHJvdG90eXBlKTtUSFJFRS5FeHRydWRlR2VvbWV0cnkucHJvdG90eXBlLmNvbnN0cnVjdG9yPVRIUkVFLkV4dHJ1ZGVHZW9tZXRyeTtUSFJFRS5FeHRydWRlR2VvbWV0cnkucHJvdG90eXBlLmFkZFNoYXBlTGlzdD1mdW5jdGlvbihhLGIpe2Zvcih2YXIgYz1hLmxlbmd0aCxkPTA7ZDxjO2QrKyl0aGlzLmFkZFNoYXBlKGFbZF0sYil9O1xuVEhSRUUuRXh0cnVkZUdlb21ldHJ5LnByb3RvdHlwZS5hZGRTaGFwZT1mdW5jdGlvbihhLGIpe2Z1bmN0aW9uIGMoYSxiLGMpe2J8fGNvbnNvbGUuZXJyb3IoXCJUSFJFRS5FeHRydWRlR2VvbWV0cnk6IHZlYyBkb2VzIG5vdCBleGlzdFwiKTtyZXR1cm4gYi5jbG9uZSgpLm11bHRpcGx5U2NhbGFyKGMpLmFkZChhKX1mdW5jdGlvbiBkKGEsYixjKXt2YXIgZD0xLGQ9YS54LWIueCxlPWEueS1iLnksZj1jLngtYS54LGc9Yy55LWEueSxoPWQqZCtlKmU7aWYoTWF0aC5hYnMoZCpnLWUqZik+TnVtYmVyLkVQU0lMT04pe3ZhciBrPU1hdGguc3FydChoKSxsPU1hdGguc3FydChmKmYrZypnKSxoPWIueC1lL2s7Yj1iLnkrZC9rO2Y9KChjLngtZy9sLWgpKmctKGMueStmL2wtYikqZikvKGQqZy1lKmYpO2M9aCtkKmYtYS54O2E9YitlKmYtYS55O2Q9YypjK2EqYTtpZigyPj1kKXJldHVybiBuZXcgVEhSRUUuVmVjdG9yMihjLGEpO2Q9TWF0aC5zcXJ0KGQvMil9ZWxzZSBhPSExLGQ+TnVtYmVyLkVQU0lMT04/XG5mPk51bWJlci5FUFNJTE9OJiYoYT0hMCk6ZDwtTnVtYmVyLkVQU0lMT04/ZjwtTnVtYmVyLkVQU0lMT04mJihhPSEwKTpNYXRoLnNpZ24oZSk9PT1NYXRoLnNpZ24oZykmJihhPSEwKSxhPyhjPS1lLGE9ZCxkPU1hdGguc3FydChoKSk6KGM9ZCxhPWUsZD1NYXRoLnNxcnQoaC8yKSk7cmV0dXJuIG5ldyBUSFJFRS5WZWN0b3IyKGMvZCxhL2QpfWZ1bmN0aW9uIGUoYSxiKXt2YXIgYyxkO2ZvcihFPWEubGVuZ3RoOzA8PS0tRTspe2M9RTtkPUUtMTswPmQmJihkPWEubGVuZ3RoLTEpO2Zvcih2YXIgZT0wLGY9cSsyKm0sZT0wO2U8ZjtlKyspe3ZhciBnPVEqZSxoPVEqKGUrMSksaz1iK2MrZyxnPWIrZCtnLGw9YitkK2gsaD1iK2MraCxrPWsrQixnPWcrQixsPWwrQixoPWgrQjtHLmZhY2VzLnB1c2gobmV3IFRIUkVFLkZhY2UzKGssZyxoLG51bGwsbnVsbCwxKSk7Ry5mYWNlcy5wdXNoKG5ldyBUSFJFRS5GYWNlMyhnLGwsaCxudWxsLG51bGwsMSkpO2s9dC5nZW5lcmF0ZVNpZGVXYWxsVVYoRyxcbmssZyxsLGgpO0cuZmFjZVZlcnRleFV2c1swXS5wdXNoKFtrWzBdLGtbMV0sa1szXV0pO0cuZmFjZVZlcnRleFV2c1swXS5wdXNoKFtrWzFdLGtbMl0sa1szXV0pfX19ZnVuY3Rpb24gZihhLGIsYyl7Ry52ZXJ0aWNlcy5wdXNoKG5ldyBUSFJFRS5WZWN0b3IzKGEsYixjKSl9ZnVuY3Rpb24gZyhhLGIsYyl7YSs9QjtiKz1CO2MrPUI7Ry5mYWNlcy5wdXNoKG5ldyBUSFJFRS5GYWNlMyhhLGIsYyxudWxsLG51bGwsMCkpO2E9dC5nZW5lcmF0ZVRvcFVWKEcsYSxiLGMpO0cuZmFjZVZlcnRleFV2c1swXS5wdXNoKGEpfXZhciBoPXZvaWQgMCE9PWIuYW1vdW50P2IuYW1vdW50OjEwMCxrPXZvaWQgMCE9PWIuYmV2ZWxUaGlja25lc3M/Yi5iZXZlbFRoaWNrbmVzczo2LGw9dm9pZCAwIT09Yi5iZXZlbFNpemU/Yi5iZXZlbFNpemU6ay0yLG09dm9pZCAwIT09Yi5iZXZlbFNlZ21lbnRzP2IuYmV2ZWxTZWdtZW50czozLHA9dm9pZCAwIT09Yi5iZXZlbEVuYWJsZWQ/Yi5iZXZlbEVuYWJsZWQ6ITAsXG5uPXZvaWQgMCE9PWIuY3VydmVTZWdtZW50cz9iLmN1cnZlU2VnbWVudHM6MTIscT12b2lkIDAhPT1iLnN0ZXBzP2Iuc3RlcHM6MSxyPWIuZXh0cnVkZVBhdGgscyx2PSExLHQ9dm9pZCAwIT09Yi5VVkdlbmVyYXRvcj9iLlVWR2VuZXJhdG9yOlRIUkVFLkV4dHJ1ZGVHZW9tZXRyeS5Xb3JsZFVWR2VuZXJhdG9yLHUsRCx3LEk7ciYmKHM9ci5nZXRTcGFjZWRQb2ludHMocSksdj0hMCxwPSExLHU9dm9pZCAwIT09Yi5mcmFtZXM/Yi5mcmFtZXM6bmV3IFRIUkVFLlR1YmVHZW9tZXRyeS5GcmVuZXRGcmFtZXMocixxLCExKSxEPW5ldyBUSFJFRS5WZWN0b3IzLHc9bmV3IFRIUkVFLlZlY3RvcjMsST1uZXcgVEhSRUUuVmVjdG9yMyk7cHx8KGw9az1tPTApO3ZhciB6LHksQSxHPXRoaXMsQj10aGlzLnZlcnRpY2VzLmxlbmd0aCxyPWEuZXh0cmFjdFBvaW50cyhuKSxuPXIuc2hhcGUsRj1yLmhvbGVzO2lmKHI9IVRIUkVFLlNoYXBlVXRpbHMuaXNDbG9ja1dpc2Uobikpe249bi5yZXZlcnNlKCk7XG55PTA7Zm9yKEE9Ri5sZW5ndGg7eTxBO3krKyl6PUZbeV0sVEhSRUUuU2hhcGVVdGlscy5pc0Nsb2NrV2lzZSh6KSYmKEZbeV09ei5yZXZlcnNlKCkpO3I9ITF9dmFyIEo9VEhSRUUuU2hhcGVVdGlscy50cmlhbmd1bGF0ZVNoYXBlKG4sRiksUD1uO3k9MDtmb3IoQT1GLmxlbmd0aDt5PEE7eSsrKXo9Rlt5XSxuPW4uY29uY2F0KHopO3ZhciBLLEgsTSxPLE4sUT1uLmxlbmd0aCxDLEw9Si5sZW5ndGgscj1bXSxFPTA7TT1QLmxlbmd0aDtLPU0tMTtmb3IoSD1FKzE7RTxNO0UrKyxLKyssSCsrKUs9PT1NJiYoSz0wKSxIPT09TSYmKEg9MCkscltFXT1kKFBbRV0sUFtLXSxQW0hdKTt2YXIgJD1bXSxULFg9ci5jb25jYXQoKTt5PTA7Zm9yKEE9Ri5sZW5ndGg7eTxBO3krKyl7ej1GW3ldO1Q9W107RT0wO009ei5sZW5ndGg7Sz1NLTE7Zm9yKEg9RSsxO0U8TTtFKyssSysrLEgrKylLPT09TSYmKEs9MCksSD09PU0mJihIPTApLFRbRV09ZCh6W0VdLHpbS10seltIXSk7JC5wdXNoKFQpO1g9WC5jb25jYXQoVCl9Zm9yKEs9XG4wO0s8bTtLKyspe009Sy9tO089ayooMS1NKTtIPWwqTWF0aC5zaW4oTSpNYXRoLlBJLzIpO0U9MDtmb3IoTT1QLmxlbmd0aDtFPE07RSsrKU49YyhQW0VdLHJbRV0sSCksZihOLngsTi55LC1PKTt5PTA7Zm9yKEE9Ri5sZW5ndGg7eTxBO3krKylmb3Ioej1GW3ldLFQ9JFt5XSxFPTAsTT16Lmxlbmd0aDtFPE07RSsrKU49Yyh6W0VdLFRbRV0sSCksZihOLngsTi55LC1PKX1IPWw7Zm9yKEU9MDtFPFE7RSsrKU49cD9jKG5bRV0sWFtFXSxIKTpuW0VdLHY/KHcuY29weSh1Lm5vcm1hbHNbMF0pLm11bHRpcGx5U2NhbGFyKE4ueCksRC5jb3B5KHUuYmlub3JtYWxzWzBdKS5tdWx0aXBseVNjYWxhcihOLnkpLEkuY29weShzWzBdKS5hZGQodykuYWRkKEQpLGYoSS54LEkueSxJLnopKTpmKE4ueCxOLnksMCk7Zm9yKE09MTtNPD1xO00rKylmb3IoRT0wO0U8UTtFKyspTj1wP2MobltFXSxYW0VdLEgpOm5bRV0sdj8ody5jb3B5KHUubm9ybWFsc1tNXSkubXVsdGlwbHlTY2FsYXIoTi54KSxELmNvcHkodS5iaW5vcm1hbHNbTV0pLm11bHRpcGx5U2NhbGFyKE4ueSksXG5JLmNvcHkoc1tNXSkuYWRkKHcpLmFkZChEKSxmKEkueCxJLnksSS56KSk6ZihOLngsTi55LGgvcSpNKTtmb3IoSz1tLTE7MDw9SztLLS0pe009Sy9tO089ayooMS1NKTtIPWwqTWF0aC5zaW4oTSpNYXRoLlBJLzIpO0U9MDtmb3IoTT1QLmxlbmd0aDtFPE07RSsrKU49YyhQW0VdLHJbRV0sSCksZihOLngsTi55LGgrTyk7eT0wO2ZvcihBPUYubGVuZ3RoO3k8QTt5KyspZm9yKHo9Rlt5XSxUPSRbeV0sRT0wLE09ei5sZW5ndGg7RTxNO0UrKylOPWMoeltFXSxUW0VdLEgpLHY/ZihOLngsTi55K3NbcS0xXS55LHNbcS0xXS54K08pOmYoTi54LE4ueSxoK08pfShmdW5jdGlvbigpe2lmKHApe3ZhciBhO2E9MCpRO2ZvcihFPTA7RTxMO0UrKylDPUpbRV0sZyhDWzJdK2EsQ1sxXSthLENbMF0rYSk7YT1xKzIqbTthKj1RO2ZvcihFPTA7RTxMO0UrKylDPUpbRV0sZyhDWzBdK2EsQ1sxXSthLENbMl0rYSl9ZWxzZXtmb3IoRT0wO0U8TDtFKyspQz1KW0VdLGcoQ1syXSxDWzFdLENbMF0pO2ZvcihFPVxuMDtFPEw7RSsrKUM9SltFXSxnKENbMF0rUSpxLENbMV0rUSpxLENbMl0rUSpxKX19KSgpOyhmdW5jdGlvbigpe3ZhciBhPTA7ZShQLGEpO2ErPVAubGVuZ3RoO3k9MDtmb3IoQT1GLmxlbmd0aDt5PEE7eSsrKXo9Rlt5XSxlKHosYSksYSs9ei5sZW5ndGh9KSgpfTtcblRIUkVFLkV4dHJ1ZGVHZW9tZXRyeS5Xb3JsZFVWR2VuZXJhdG9yPXtnZW5lcmF0ZVRvcFVWOmZ1bmN0aW9uKGEsYixjLGQpe2E9YS52ZXJ0aWNlcztiPWFbYl07Yz1hW2NdO2Q9YVtkXTtyZXR1cm5bbmV3IFRIUkVFLlZlY3RvcjIoYi54LGIueSksbmV3IFRIUkVFLlZlY3RvcjIoYy54LGMueSksbmV3IFRIUkVFLlZlY3RvcjIoZC54LGQueSldfSxnZW5lcmF0ZVNpZGVXYWxsVVY6ZnVuY3Rpb24oYSxiLGMsZCxlKXthPWEudmVydGljZXM7Yj1hW2JdO2M9YVtjXTtkPWFbZF07ZT1hW2VdO3JldHVybi4wMT5NYXRoLmFicyhiLnktYy55KT9bbmV3IFRIUkVFLlZlY3RvcjIoYi54LDEtYi56KSxuZXcgVEhSRUUuVmVjdG9yMihjLngsMS1jLnopLG5ldyBUSFJFRS5WZWN0b3IyKGQueCwxLWQueiksbmV3IFRIUkVFLlZlY3RvcjIoZS54LDEtZS56KV06W25ldyBUSFJFRS5WZWN0b3IyKGIueSwxLWIueiksbmV3IFRIUkVFLlZlY3RvcjIoYy55LDEtYy56KSxuZXcgVEhSRUUuVmVjdG9yMihkLnksXG4xLWQueiksbmV3IFRIUkVFLlZlY3RvcjIoZS55LDEtZS56KV19fTtUSFJFRS5TaGFwZUdlb21ldHJ5PWZ1bmN0aW9uKGEsYil7VEhSRUUuR2VvbWV0cnkuY2FsbCh0aGlzKTt0aGlzLnR5cGU9XCJTaGFwZUdlb21ldHJ5XCI7ITE9PT1BcnJheS5pc0FycmF5KGEpJiYoYT1bYV0pO3RoaXMuYWRkU2hhcGVMaXN0KGEsYik7dGhpcy5jb21wdXRlRmFjZU5vcm1hbHMoKX07VEhSRUUuU2hhcGVHZW9tZXRyeS5wcm90b3R5cGU9T2JqZWN0LmNyZWF0ZShUSFJFRS5HZW9tZXRyeS5wcm90b3R5cGUpO1RIUkVFLlNoYXBlR2VvbWV0cnkucHJvdG90eXBlLmNvbnN0cnVjdG9yPVRIUkVFLlNoYXBlR2VvbWV0cnk7VEhSRUUuU2hhcGVHZW9tZXRyeS5wcm90b3R5cGUuYWRkU2hhcGVMaXN0PWZ1bmN0aW9uKGEsYil7Zm9yKHZhciBjPTAsZD1hLmxlbmd0aDtjPGQ7YysrKXRoaXMuYWRkU2hhcGUoYVtjXSxiKTtyZXR1cm4gdGhpc307XG5USFJFRS5TaGFwZUdlb21ldHJ5LnByb3RvdHlwZS5hZGRTaGFwZT1mdW5jdGlvbihhLGIpe3ZvaWQgMD09PWImJihiPXt9KTt2YXIgYz1iLm1hdGVyaWFsLGQ9dm9pZCAwPT09Yi5VVkdlbmVyYXRvcj9USFJFRS5FeHRydWRlR2VvbWV0cnkuV29ybGRVVkdlbmVyYXRvcjpiLlVWR2VuZXJhdG9yLGUsZixnLGg9dGhpcy52ZXJ0aWNlcy5sZW5ndGg7ZT1hLmV4dHJhY3RQb2ludHModm9pZCAwIT09Yi5jdXJ2ZVNlZ21lbnRzP2IuY3VydmVTZWdtZW50czoxMik7dmFyIGs9ZS5zaGFwZSxsPWUuaG9sZXM7aWYoIVRIUkVFLlNoYXBlVXRpbHMuaXNDbG9ja1dpc2UoaykpZm9yKGs9ay5yZXZlcnNlKCksZT0wLGY9bC5sZW5ndGg7ZTxmO2UrKylnPWxbZV0sVEhSRUUuU2hhcGVVdGlscy5pc0Nsb2NrV2lzZShnKSYmKGxbZV09Zy5yZXZlcnNlKCkpO3ZhciBtPVRIUkVFLlNoYXBlVXRpbHMudHJpYW5ndWxhdGVTaGFwZShrLGwpO2U9MDtmb3IoZj1sLmxlbmd0aDtlPGY7ZSsrKWc9bFtlXSxrPWsuY29uY2F0KGcpO1xubD1rLmxlbmd0aDtmPW0ubGVuZ3RoO2ZvcihlPTA7ZTxsO2UrKylnPWtbZV0sdGhpcy52ZXJ0aWNlcy5wdXNoKG5ldyBUSFJFRS5WZWN0b3IzKGcueCxnLnksMCkpO2ZvcihlPTA7ZTxmO2UrKylsPW1bZV0saz1sWzBdK2gsZz1sWzFdK2gsbD1sWzJdK2gsdGhpcy5mYWNlcy5wdXNoKG5ldyBUSFJFRS5GYWNlMyhrLGcsbCxudWxsLG51bGwsYykpLHRoaXMuZmFjZVZlcnRleFV2c1swXS5wdXNoKGQuZ2VuZXJhdGVUb3BVVih0aGlzLGssZyxsKSl9O1xuVEhSRUUuTGF0aGVCdWZmZXJHZW9tZXRyeT1mdW5jdGlvbihhLGIsYyxkKXtUSFJFRS5CdWZmZXJHZW9tZXRyeS5jYWxsKHRoaXMpO3RoaXMudHlwZT1cIkxhdGhlQnVmZmVyR2VvbWV0cnlcIjt0aGlzLnBhcmFtZXRlcnM9e3BvaW50czphLHNlZ21lbnRzOmIscGhpU3RhcnQ6YyxwaGlMZW5ndGg6ZH07Yj1NYXRoLmZsb29yKGIpfHwxMjtjPWN8fDA7ZD1kfHwyKk1hdGguUEk7ZD1USFJFRS5NYXRoLmNsYW1wKGQsMCwyKk1hdGguUEkpO2Zvcih2YXIgZT0oYisxKSphLmxlbmd0aCxmPWIqYS5sZW5ndGgqNixnPW5ldyBUSFJFRS5CdWZmZXJBdHRyaWJ1dGUobmV3ICg2NTUzNTxmP1VpbnQzMkFycmF5OlVpbnQxNkFycmF5KShmKSwxKSxoPW5ldyBUSFJFRS5CdWZmZXJBdHRyaWJ1dGUobmV3IEZsb2F0MzJBcnJheSgzKmUpLDMpLGs9bmV3IFRIUkVFLkJ1ZmZlckF0dHJpYnV0ZShuZXcgRmxvYXQzMkFycmF5KDIqZSksMiksbD0wLG09MCxwPTEvYixuPW5ldyBUSFJFRS5WZWN0b3IzLHE9bmV3IFRIUkVFLlZlY3RvcjIsXG5lPTA7ZTw9YjtlKyspZm9yKHZhciBmPWMrZSpwKmQscj1NYXRoLnNpbihmKSxzPU1hdGguY29zKGYpLGY9MDtmPD1hLmxlbmd0aC0xO2YrKyluLng9YVtmXS54KnIsbi55PWFbZl0ueSxuLno9YVtmXS54KnMsaC5zZXRYWVoobCxuLngsbi55LG4ueikscS54PWUvYixxLnk9Zi8oYS5sZW5ndGgtMSksay5zZXRYWShsLHEueCxxLnkpLGwrKztmb3IoZT0wO2U8YjtlKyspZm9yKGY9MDtmPGEubGVuZ3RoLTE7ZisrKWM9ZitlKmEubGVuZ3RoLGw9YythLmxlbmd0aCxwPWMrYS5sZW5ndGgrMSxuPWMrMSxnLnNldFgobSxjKSxtKyssZy5zZXRYKG0sbCksbSsrLGcuc2V0WChtLG4pLG0rKyxnLnNldFgobSxsKSxtKyssZy5zZXRYKG0scCksbSsrLGcuc2V0WChtLG4pLG0rKzt0aGlzLnNldEluZGV4KGcpO3RoaXMuYWRkQXR0cmlidXRlKFwicG9zaXRpb25cIixoKTt0aGlzLmFkZEF0dHJpYnV0ZShcInV2XCIsayk7dGhpcy5jb21wdXRlVmVydGV4Tm9ybWFscygpO2lmKGQ9PT0yKk1hdGguUEkpZm9yKGQ9XG50aGlzLmF0dHJpYnV0ZXMubm9ybWFsLmFycmF5LGc9bmV3IFRIUkVFLlZlY3RvcjMsaD1uZXcgVEhSRUUuVmVjdG9yMyxrPW5ldyBUSFJFRS5WZWN0b3IzLGM9YiphLmxlbmd0aCozLGY9ZT0wO2U8YS5sZW5ndGg7ZSsrLGYrPTMpZy54PWRbZiswXSxnLnk9ZFtmKzFdLGcuej1kW2YrMl0saC54PWRbYytmKzBdLGgueT1kW2MrZisxXSxoLno9ZFtjK2YrMl0say5hZGRWZWN0b3JzKGcsaCkubm9ybWFsaXplKCksZFtmKzBdPWRbYytmKzBdPWsueCxkW2YrMV09ZFtjK2YrMV09ay55LGRbZisyXT1kW2MrZisyXT1rLnp9O1RIUkVFLkxhdGhlQnVmZmVyR2VvbWV0cnkucHJvdG90eXBlPU9iamVjdC5jcmVhdGUoVEhSRUUuQnVmZmVyR2VvbWV0cnkucHJvdG90eXBlKTtUSFJFRS5MYXRoZUJ1ZmZlckdlb21ldHJ5LnByb3RvdHlwZS5jb25zdHJ1Y3Rvcj1USFJFRS5MYXRoZUJ1ZmZlckdlb21ldHJ5O1xuVEhSRUUuTGF0aGVHZW9tZXRyeT1mdW5jdGlvbihhLGIsYyxkKXtUSFJFRS5HZW9tZXRyeS5jYWxsKHRoaXMpO3RoaXMudHlwZT1cIkxhdGhlR2VvbWV0cnlcIjt0aGlzLnBhcmFtZXRlcnM9e3BvaW50czphLHNlZ21lbnRzOmIscGhpU3RhcnQ6YyxwaGlMZW5ndGg6ZH07dGhpcy5mcm9tQnVmZmVyR2VvbWV0cnkobmV3IFRIUkVFLkxhdGhlQnVmZmVyR2VvbWV0cnkoYSxiLGMsZCkpO3RoaXMubWVyZ2VWZXJ0aWNlcygpfTtUSFJFRS5MYXRoZUdlb21ldHJ5LnByb3RvdHlwZT1PYmplY3QuY3JlYXRlKFRIUkVFLkdlb21ldHJ5LnByb3RvdHlwZSk7VEhSRUUuTGF0aGVHZW9tZXRyeS5wcm90b3R5cGUuY29uc3RydWN0b3I9VEhSRUUuTGF0aGVHZW9tZXRyeTtcblRIUkVFLlBsYW5lR2VvbWV0cnk9ZnVuY3Rpb24oYSxiLGMsZCl7VEhSRUUuR2VvbWV0cnkuY2FsbCh0aGlzKTt0aGlzLnR5cGU9XCJQbGFuZUdlb21ldHJ5XCI7dGhpcy5wYXJhbWV0ZXJzPXt3aWR0aDphLGhlaWdodDpiLHdpZHRoU2VnbWVudHM6YyxoZWlnaHRTZWdtZW50czpkfTt0aGlzLmZyb21CdWZmZXJHZW9tZXRyeShuZXcgVEhSRUUuUGxhbmVCdWZmZXJHZW9tZXRyeShhLGIsYyxkKSl9O1RIUkVFLlBsYW5lR2VvbWV0cnkucHJvdG90eXBlPU9iamVjdC5jcmVhdGUoVEhSRUUuR2VvbWV0cnkucHJvdG90eXBlKTtUSFJFRS5QbGFuZUdlb21ldHJ5LnByb3RvdHlwZS5jb25zdHJ1Y3Rvcj1USFJFRS5QbGFuZUdlb21ldHJ5O1xuVEhSRUUuUGxhbmVCdWZmZXJHZW9tZXRyeT1mdW5jdGlvbihhLGIsYyxkKXtUSFJFRS5CdWZmZXJHZW9tZXRyeS5jYWxsKHRoaXMpO3RoaXMudHlwZT1cIlBsYW5lQnVmZmVyR2VvbWV0cnlcIjt0aGlzLnBhcmFtZXRlcnM9e3dpZHRoOmEsaGVpZ2h0OmIsd2lkdGhTZWdtZW50czpjLGhlaWdodFNlZ21lbnRzOmR9O3ZhciBlPWEvMixmPWIvMjtjPU1hdGguZmxvb3IoYyl8fDE7ZD1NYXRoLmZsb29yKGQpfHwxO3ZhciBnPWMrMSxoPWQrMSxrPWEvYyxsPWIvZDtiPW5ldyBGbG9hdDMyQXJyYXkoZypoKjMpO2E9bmV3IEZsb2F0MzJBcnJheShnKmgqMyk7Zm9yKHZhciBtPW5ldyBGbG9hdDMyQXJyYXkoZypoKjIpLHA9MCxuPTAscT0wO3E8aDtxKyspZm9yKHZhciByPXEqbC1mLHM9MDtzPGc7cysrKWJbcF09cyprLWUsYltwKzFdPS1yLGFbcCsyXT0xLG1bbl09cy9jLG1bbisxXT0xLXEvZCxwKz0zLG4rPTI7cD0wO2U9bmV3ICg2NTUzNTxiLmxlbmd0aC8zP1VpbnQzMkFycmF5OlVpbnQxNkFycmF5KShjKlxuZCo2KTtmb3IocT0wO3E8ZDtxKyspZm9yKHM9MDtzPGM7cysrKWY9cytnKihxKzEpLGg9cysxK2cqKHErMSksaz1zKzErZypxLGVbcF09cytnKnEsZVtwKzFdPWYsZVtwKzJdPWssZVtwKzNdPWYsZVtwKzRdPWgsZVtwKzVdPWsscCs9Njt0aGlzLnNldEluZGV4KG5ldyBUSFJFRS5CdWZmZXJBdHRyaWJ1dGUoZSwxKSk7dGhpcy5hZGRBdHRyaWJ1dGUoXCJwb3NpdGlvblwiLG5ldyBUSFJFRS5CdWZmZXJBdHRyaWJ1dGUoYiwzKSk7dGhpcy5hZGRBdHRyaWJ1dGUoXCJub3JtYWxcIixuZXcgVEhSRUUuQnVmZmVyQXR0cmlidXRlKGEsMykpO3RoaXMuYWRkQXR0cmlidXRlKFwidXZcIixuZXcgVEhSRUUuQnVmZmVyQXR0cmlidXRlKG0sMikpfTtUSFJFRS5QbGFuZUJ1ZmZlckdlb21ldHJ5LnByb3RvdHlwZT1PYmplY3QuY3JlYXRlKFRIUkVFLkJ1ZmZlckdlb21ldHJ5LnByb3RvdHlwZSk7VEhSRUUuUGxhbmVCdWZmZXJHZW9tZXRyeS5wcm90b3R5cGUuY29uc3RydWN0b3I9VEhSRUUuUGxhbmVCdWZmZXJHZW9tZXRyeTtcblRIUkVFLlJpbmdCdWZmZXJHZW9tZXRyeT1mdW5jdGlvbihhLGIsYyxkLGUsZil7VEhSRUUuQnVmZmVyR2VvbWV0cnkuY2FsbCh0aGlzKTt0aGlzLnR5cGU9XCJSaW5nQnVmZmVyR2VvbWV0cnlcIjt0aGlzLnBhcmFtZXRlcnM9e2lubmVyUmFkaXVzOmEsb3V0ZXJSYWRpdXM6Yix0aGV0YVNlZ21lbnRzOmMscGhpU2VnbWVudHM6ZCx0aGV0YVN0YXJ0OmUsdGhldGFMZW5ndGg6Zn07YT1hfHwyMDtiPWJ8fDUwO2U9dm9pZCAwIT09ZT9lOjA7Zj12b2lkIDAhPT1mP2Y6MipNYXRoLlBJO2M9dm9pZCAwIT09Yz9NYXRoLm1heCgzLGMpOjg7ZD12b2lkIDAhPT1kP01hdGgubWF4KDEsZCk6MTt2YXIgZz0oYysxKSooZCsxKSxoPWMqZCo2LGg9bmV3IFRIUkVFLkJ1ZmZlckF0dHJpYnV0ZShuZXcgKDY1NTM1PGg/VWludDMyQXJyYXk6VWludDE2QXJyYXkpKGgpLDEpLGs9bmV3IFRIUkVFLkJ1ZmZlckF0dHJpYnV0ZShuZXcgRmxvYXQzMkFycmF5KDMqZyksMyksbD1uZXcgVEhSRUUuQnVmZmVyQXR0cmlidXRlKG5ldyBGbG9hdDMyQXJyYXkoMypcbmcpLDMpLGc9bmV3IFRIUkVFLkJ1ZmZlckF0dHJpYnV0ZShuZXcgRmxvYXQzMkFycmF5KDIqZyksMiksbT0wLHA9MCxuLHE9YSxyPShiLWEpL2Qscz1uZXcgVEhSRUUuVmVjdG9yMyx2PW5ldyBUSFJFRS5WZWN0b3IyLHQ7Zm9yKGE9MDthPD1kO2ErKyl7Zm9yKHQ9MDt0PD1jO3QrKyluPWUrdC9jKmYscy54PXEqTWF0aC5jb3Mobikscy55PXEqTWF0aC5zaW4obiksay5zZXRYWVoobSxzLngscy55LHMueiksbC5zZXRYWVoobSwwLDAsMSksdi54PShzLngvYisxKS8yLHYueT0ocy55L2IrMSkvMixnLnNldFhZKG0sdi54LHYueSksbSsrO3ErPXJ9Zm9yKGE9MDthPGQ7YSsrKWZvcihiPWEqKGMrMSksdD0wO3Q8Yzt0KyspZT1uPXQrYixmPW4rYysxLG09bitjKzIsbis9MSxoLnNldFgocCxlKSxwKyssaC5zZXRYKHAsZikscCsrLGguc2V0WChwLG0pLHArKyxoLnNldFgocCxlKSxwKyssaC5zZXRYKHAsbSkscCsrLGguc2V0WChwLG4pLHArKzt0aGlzLnNldEluZGV4KGgpO3RoaXMuYWRkQXR0cmlidXRlKFwicG9zaXRpb25cIixcbmspO3RoaXMuYWRkQXR0cmlidXRlKFwibm9ybWFsXCIsbCk7dGhpcy5hZGRBdHRyaWJ1dGUoXCJ1dlwiLGcpfTtUSFJFRS5SaW5nQnVmZmVyR2VvbWV0cnkucHJvdG90eXBlPU9iamVjdC5jcmVhdGUoVEhSRUUuQnVmZmVyR2VvbWV0cnkucHJvdG90eXBlKTtUSFJFRS5SaW5nQnVmZmVyR2VvbWV0cnkucHJvdG90eXBlLmNvbnN0cnVjdG9yPVRIUkVFLlJpbmdCdWZmZXJHZW9tZXRyeTtUSFJFRS5SaW5nR2VvbWV0cnk9ZnVuY3Rpb24oYSxiLGMsZCxlLGYpe1RIUkVFLkdlb21ldHJ5LmNhbGwodGhpcyk7dGhpcy50eXBlPVwiUmluZ0dlb21ldHJ5XCI7dGhpcy5wYXJhbWV0ZXJzPXtpbm5lclJhZGl1czphLG91dGVyUmFkaXVzOmIsdGhldGFTZWdtZW50czpjLHBoaVNlZ21lbnRzOmQsdGhldGFTdGFydDplLHRoZXRhTGVuZ3RoOmZ9O3RoaXMuZnJvbUJ1ZmZlckdlb21ldHJ5KG5ldyBUSFJFRS5SaW5nQnVmZmVyR2VvbWV0cnkoYSxiLGMsZCxlLGYpKX07XG5USFJFRS5SaW5nR2VvbWV0cnkucHJvdG90eXBlPU9iamVjdC5jcmVhdGUoVEhSRUUuR2VvbWV0cnkucHJvdG90eXBlKTtUSFJFRS5SaW5nR2VvbWV0cnkucHJvdG90eXBlLmNvbnN0cnVjdG9yPVRIUkVFLlJpbmdHZW9tZXRyeTtUSFJFRS5TcGhlcmVHZW9tZXRyeT1mdW5jdGlvbihhLGIsYyxkLGUsZixnKXtUSFJFRS5HZW9tZXRyeS5jYWxsKHRoaXMpO3RoaXMudHlwZT1cIlNwaGVyZUdlb21ldHJ5XCI7dGhpcy5wYXJhbWV0ZXJzPXtyYWRpdXM6YSx3aWR0aFNlZ21lbnRzOmIsaGVpZ2h0U2VnbWVudHM6YyxwaGlTdGFydDpkLHBoaUxlbmd0aDplLHRoZXRhU3RhcnQ6Zix0aGV0YUxlbmd0aDpnfTt0aGlzLmZyb21CdWZmZXJHZW9tZXRyeShuZXcgVEhSRUUuU3BoZXJlQnVmZmVyR2VvbWV0cnkoYSxiLGMsZCxlLGYsZykpfTtUSFJFRS5TcGhlcmVHZW9tZXRyeS5wcm90b3R5cGU9T2JqZWN0LmNyZWF0ZShUSFJFRS5HZW9tZXRyeS5wcm90b3R5cGUpO1xuVEhSRUUuU3BoZXJlR2VvbWV0cnkucHJvdG90eXBlLmNvbnN0cnVjdG9yPVRIUkVFLlNwaGVyZUdlb21ldHJ5O1xuVEhSRUUuU3BoZXJlQnVmZmVyR2VvbWV0cnk9ZnVuY3Rpb24oYSxiLGMsZCxlLGYsZyl7VEhSRUUuQnVmZmVyR2VvbWV0cnkuY2FsbCh0aGlzKTt0aGlzLnR5cGU9XCJTcGhlcmVCdWZmZXJHZW9tZXRyeVwiO3RoaXMucGFyYW1ldGVycz17cmFkaXVzOmEsd2lkdGhTZWdtZW50czpiLGhlaWdodFNlZ21lbnRzOmMscGhpU3RhcnQ6ZCxwaGlMZW5ndGg6ZSx0aGV0YVN0YXJ0OmYsdGhldGFMZW5ndGg6Z307YT1hfHw1MDtiPU1hdGgubWF4KDMsTWF0aC5mbG9vcihiKXx8OCk7Yz1NYXRoLm1heCgyLE1hdGguZmxvb3IoYyl8fDYpO2Q9dm9pZCAwIT09ZD9kOjA7ZT12b2lkIDAhPT1lP2U6MipNYXRoLlBJO2Y9dm9pZCAwIT09Zj9mOjA7Zz12b2lkIDAhPT1nP2c6TWF0aC5QSTtmb3IodmFyIGg9ZitnLGs9KGIrMSkqKGMrMSksbD1uZXcgVEhSRUUuQnVmZmVyQXR0cmlidXRlKG5ldyBGbG9hdDMyQXJyYXkoMyprKSwzKSxtPW5ldyBUSFJFRS5CdWZmZXJBdHRyaWJ1dGUobmV3IEZsb2F0MzJBcnJheSgzKlxuayksMyksaz1uZXcgVEhSRUUuQnVmZmVyQXR0cmlidXRlKG5ldyBGbG9hdDMyQXJyYXkoMiprKSwyKSxwPTAsbj1bXSxxPW5ldyBUSFJFRS5WZWN0b3IzLHI9MDtyPD1jO3IrKyl7Zm9yKHZhciBzPVtdLHY9ci9jLHQ9MDt0PD1iO3QrKyl7dmFyIHU9dC9iLEQ9LWEqTWF0aC5jb3MoZCt1KmUpKk1hdGguc2luKGYrdipnKSx3PWEqTWF0aC5jb3MoZit2KmcpLEk9YSpNYXRoLnNpbihkK3UqZSkqTWF0aC5zaW4oZit2KmcpO3Euc2V0KEQsdyxJKS5ub3JtYWxpemUoKTtsLnNldFhZWihwLEQsdyxJKTttLnNldFhZWihwLHEueCxxLnkscS56KTtrLnNldFhZKHAsdSwxLXYpO3MucHVzaChwKTtwKyt9bi5wdXNoKHMpfWQ9W107Zm9yKHI9MDtyPGM7cisrKWZvcih0PTA7dDxiO3QrKyllPW5bcl1bdCsxXSxnPW5bcl1bdF0scD1uW3IrMV1bdF0scT1uW3IrMV1bdCsxXSwoMCE9PXJ8fDA8ZikmJmQucHVzaChlLGcscSksKHIhPT1jLTF8fGg8TWF0aC5QSSkmJmQucHVzaChnLHAscSk7dGhpcy5zZXRJbmRleChuZXcgKDY1NTM1PFxubC5jb3VudD9USFJFRS5VaW50MzJBdHRyaWJ1dGU6VEhSRUUuVWludDE2QXR0cmlidXRlKShkLDEpKTt0aGlzLmFkZEF0dHJpYnV0ZShcInBvc2l0aW9uXCIsbCk7dGhpcy5hZGRBdHRyaWJ1dGUoXCJub3JtYWxcIixtKTt0aGlzLmFkZEF0dHJpYnV0ZShcInV2XCIsayk7dGhpcy5ib3VuZGluZ1NwaGVyZT1uZXcgVEhSRUUuU3BoZXJlKG5ldyBUSFJFRS5WZWN0b3IzLGEpfTtUSFJFRS5TcGhlcmVCdWZmZXJHZW9tZXRyeS5wcm90b3R5cGU9T2JqZWN0LmNyZWF0ZShUSFJFRS5CdWZmZXJHZW9tZXRyeS5wcm90b3R5cGUpO1RIUkVFLlNwaGVyZUJ1ZmZlckdlb21ldHJ5LnByb3RvdHlwZS5jb25zdHJ1Y3Rvcj1USFJFRS5TcGhlcmVCdWZmZXJHZW9tZXRyeTtcblRIUkVFLlRleHRHZW9tZXRyeT1mdW5jdGlvbihhLGIpe2I9Ynx8e307dmFyIGM9Yi5mb250O2lmKCExPT09YyBpbnN0YW5jZW9mIFRIUkVFLkZvbnQpcmV0dXJuIGNvbnNvbGUuZXJyb3IoXCJUSFJFRS5UZXh0R2VvbWV0cnk6IGZvbnQgcGFyYW1ldGVyIGlzIG5vdCBhbiBpbnN0YW5jZSBvZiBUSFJFRS5Gb250LlwiKSxuZXcgVEhSRUUuR2VvbWV0cnk7Yz1jLmdlbmVyYXRlU2hhcGVzKGEsYi5zaXplLGIuY3VydmVTZWdtZW50cyk7Yi5hbW91bnQ9dm9pZCAwIT09Yi5oZWlnaHQ/Yi5oZWlnaHQ6NTA7dm9pZCAwPT09Yi5iZXZlbFRoaWNrbmVzcyYmKGIuYmV2ZWxUaGlja25lc3M9MTApO3ZvaWQgMD09PWIuYmV2ZWxTaXplJiYoYi5iZXZlbFNpemU9OCk7dm9pZCAwPT09Yi5iZXZlbEVuYWJsZWQmJihiLmJldmVsRW5hYmxlZD0hMSk7VEhSRUUuRXh0cnVkZUdlb21ldHJ5LmNhbGwodGhpcyxjLGIpO3RoaXMudHlwZT1cIlRleHRHZW9tZXRyeVwifTtcblRIUkVFLlRleHRHZW9tZXRyeS5wcm90b3R5cGU9T2JqZWN0LmNyZWF0ZShUSFJFRS5FeHRydWRlR2VvbWV0cnkucHJvdG90eXBlKTtUSFJFRS5UZXh0R2VvbWV0cnkucHJvdG90eXBlLmNvbnN0cnVjdG9yPVRIUkVFLlRleHRHZW9tZXRyeTtcblRIUkVFLlRvcnVzQnVmZmVyR2VvbWV0cnk9ZnVuY3Rpb24oYSxiLGMsZCxlKXtUSFJFRS5CdWZmZXJHZW9tZXRyeS5jYWxsKHRoaXMpO3RoaXMudHlwZT1cIlRvcnVzQnVmZmVyR2VvbWV0cnlcIjt0aGlzLnBhcmFtZXRlcnM9e3JhZGl1czphLHR1YmU6YixyYWRpYWxTZWdtZW50czpjLHR1YnVsYXJTZWdtZW50czpkLGFyYzplfTthPWF8fDEwMDtiPWJ8fDQwO2M9TWF0aC5mbG9vcihjKXx8ODtkPU1hdGguZmxvb3IoZCl8fDY7ZT1lfHwyKk1hdGguUEk7dmFyIGY9KGMrMSkqKGQrMSksZz1jKmQqNixnPW5ldyAoNjU1MzU8Zz9VaW50MzJBcnJheTpVaW50MTZBcnJheSkoZyksaD1uZXcgRmxvYXQzMkFycmF5KDMqZiksaz1uZXcgRmxvYXQzMkFycmF5KDMqZiksZj1uZXcgRmxvYXQzMkFycmF5KDIqZiksbD0wLG09MCxwPTAsbj1uZXcgVEhSRUUuVmVjdG9yMyxxPW5ldyBUSFJFRS5WZWN0b3IzLHI9bmV3IFRIUkVFLlZlY3RvcjMscyx2O2ZvcihzPTA7czw9YztzKyspZm9yKHY9MDt2PD1kO3YrKyl7dmFyIHQ9XG52L2QqZSx1PXMvYypNYXRoLlBJKjI7cS54PShhK2IqTWF0aC5jb3ModSkpKk1hdGguY29zKHQpO3EueT0oYStiKk1hdGguY29zKHUpKSpNYXRoLnNpbih0KTtxLno9YipNYXRoLnNpbih1KTtoW2xdPXEueDtoW2wrMV09cS55O2hbbCsyXT1xLno7bi54PWEqTWF0aC5jb3ModCk7bi55PWEqTWF0aC5zaW4odCk7ci5zdWJWZWN0b3JzKHEsbikubm9ybWFsaXplKCk7a1tsXT1yLng7a1tsKzFdPXIueTtrW2wrMl09ci56O2ZbbV09di9kO2ZbbSsxXT1zL2M7bCs9MzttKz0yfWZvcihzPTE7czw9YztzKyspZm9yKHY9MTt2PD1kO3YrKylhPShkKzEpKihzLTEpK3YtMSxiPShkKzEpKihzLTEpK3YsZT0oZCsxKSpzK3YsZ1twXT0oZCsxKSpzK3YtMSxnW3ArMV09YSxnW3ArMl09ZSxnW3ArM109YSxnW3ArNF09YixnW3ArNV09ZSxwKz02O3RoaXMuc2V0SW5kZXgobmV3IFRIUkVFLkJ1ZmZlckF0dHJpYnV0ZShnLDEpKTt0aGlzLmFkZEF0dHJpYnV0ZShcInBvc2l0aW9uXCIsbmV3IFRIUkVFLkJ1ZmZlckF0dHJpYnV0ZShoLFxuMykpO3RoaXMuYWRkQXR0cmlidXRlKFwibm9ybWFsXCIsbmV3IFRIUkVFLkJ1ZmZlckF0dHJpYnV0ZShrLDMpKTt0aGlzLmFkZEF0dHJpYnV0ZShcInV2XCIsbmV3IFRIUkVFLkJ1ZmZlckF0dHJpYnV0ZShmLDIpKX07VEhSRUUuVG9ydXNCdWZmZXJHZW9tZXRyeS5wcm90b3R5cGU9T2JqZWN0LmNyZWF0ZShUSFJFRS5CdWZmZXJHZW9tZXRyeS5wcm90b3R5cGUpO1RIUkVFLlRvcnVzQnVmZmVyR2VvbWV0cnkucHJvdG90eXBlLmNvbnN0cnVjdG9yPVRIUkVFLlRvcnVzQnVmZmVyR2VvbWV0cnk7XG5USFJFRS5Ub3J1c0dlb21ldHJ5PWZ1bmN0aW9uKGEsYixjLGQsZSl7VEhSRUUuR2VvbWV0cnkuY2FsbCh0aGlzKTt0aGlzLnR5cGU9XCJUb3J1c0dlb21ldHJ5XCI7dGhpcy5wYXJhbWV0ZXJzPXtyYWRpdXM6YSx0dWJlOmIscmFkaWFsU2VnbWVudHM6Yyx0dWJ1bGFyU2VnbWVudHM6ZCxhcmM6ZX07dGhpcy5mcm9tQnVmZmVyR2VvbWV0cnkobmV3IFRIUkVFLlRvcnVzQnVmZmVyR2VvbWV0cnkoYSxiLGMsZCxlKSl9O1RIUkVFLlRvcnVzR2VvbWV0cnkucHJvdG90eXBlPU9iamVjdC5jcmVhdGUoVEhSRUUuR2VvbWV0cnkucHJvdG90eXBlKTtUSFJFRS5Ub3J1c0dlb21ldHJ5LnByb3RvdHlwZS5jb25zdHJ1Y3Rvcj1USFJFRS5Ub3J1c0dlb21ldHJ5O1xuVEhSRUUuVG9ydXNLbm90QnVmZmVyR2VvbWV0cnk9ZnVuY3Rpb24oYSxiLGMsZCxlLGYpe2Z1bmN0aW9uIGcoYSxiLGMsZCxlKXt2YXIgZj1NYXRoLmNvcyhhKSxnPU1hdGguc2luKGEpO2EqPWMvYjtiPU1hdGguY29zKGEpO2UueD1kKigyK2IpKi41KmY7ZS55PWQqKDIrYikqZyouNTtlLno9ZCpNYXRoLnNpbihhKSouNX1USFJFRS5CdWZmZXJHZW9tZXRyeS5jYWxsKHRoaXMpO3RoaXMudHlwZT1cIlRvcnVzS25vdEJ1ZmZlckdlb21ldHJ5XCI7dGhpcy5wYXJhbWV0ZXJzPXtyYWRpdXM6YSx0dWJlOmIsdHVidWxhclNlZ21lbnRzOmMscmFkaWFsU2VnbWVudHM6ZCxwOmUscTpmfTthPWF8fDEwMDtiPWJ8fDQwO2M9TWF0aC5mbG9vcihjKXx8NjQ7ZD1NYXRoLmZsb29yKGQpfHw4O2U9ZXx8MjtmPWZ8fDM7dmFyIGg9KGQrMSkqKGMrMSksaz1kKmMqNixrPW5ldyBUSFJFRS5CdWZmZXJBdHRyaWJ1dGUobmV3ICg2NTUzNTxrP1VpbnQzMkFycmF5OlVpbnQxNkFycmF5KShrKSwxKSxsPW5ldyBUSFJFRS5CdWZmZXJBdHRyaWJ1dGUobmV3IEZsb2F0MzJBcnJheSgzKlxuaCksMyksbT1uZXcgVEhSRUUuQnVmZmVyQXR0cmlidXRlKG5ldyBGbG9hdDMyQXJyYXkoMypoKSwzKSxoPW5ldyBUSFJFRS5CdWZmZXJBdHRyaWJ1dGUobmV3IEZsb2F0MzJBcnJheSgyKmgpLDIpLHAsbixxPTAscj0wLHM9bmV3IFRIUkVFLlZlY3RvcjMsdj1uZXcgVEhSRUUuVmVjdG9yMyx0PW5ldyBUSFJFRS5WZWN0b3IyLHU9bmV3IFRIUkVFLlZlY3RvcjMsRD1uZXcgVEhSRUUuVmVjdG9yMyx3PW5ldyBUSFJFRS5WZWN0b3IzLEk9bmV3IFRIUkVFLlZlY3RvcjMsej1uZXcgVEhSRUUuVmVjdG9yMztmb3IocD0wO3A8PWM7KytwKWZvcihuPXAvYyplKk1hdGguUEkqMixnKG4sZSxmLGEsdSksZyhuKy4wMSxlLGYsYSxEKSxJLnN1YlZlY3RvcnMoRCx1KSx6LmFkZFZlY3RvcnMoRCx1KSx3LmNyb3NzVmVjdG9ycyhJLHopLHouY3Jvc3NWZWN0b3JzKHcsSSksdy5ub3JtYWxpemUoKSx6Lm5vcm1hbGl6ZSgpLG49MDtuPD1kOysrbil7dmFyIHk9bi9kKk1hdGguUEkqMixBPS1iKk1hdGguY29zKHkpLFxueT1iKk1hdGguc2luKHkpO3MueD11LngrKEEqei54K3kqdy54KTtzLnk9dS55KyhBKnoueSt5KncueSk7cy56PXUueisoQSp6LnoreSp3LnopO2wuc2V0WFlaKHEscy54LHMueSxzLnopO3Yuc3ViVmVjdG9ycyhzLHUpLm5vcm1hbGl6ZSgpO20uc2V0WFlaKHEsdi54LHYueSx2LnopO3QueD1wL2M7dC55PW4vZDtoLnNldFhZKHEsdC54LHQueSk7cSsrfWZvcihuPTE7bjw9YztuKyspZm9yKHA9MTtwPD1kO3ArKylhPShkKzEpKm4rKHAtMSksYj0oZCsxKSpuK3AsZT0oZCsxKSoobi0xKStwLGsuc2V0WChyLChkKzEpKihuLTEpKyhwLTEpKSxyKyssay5zZXRYKHIsYSkscisrLGsuc2V0WChyLGUpLHIrKyxrLnNldFgocixhKSxyKyssay5zZXRYKHIsYikscisrLGsuc2V0WChyLGUpLHIrKzt0aGlzLnNldEluZGV4KGspO3RoaXMuYWRkQXR0cmlidXRlKFwicG9zaXRpb25cIixsKTt0aGlzLmFkZEF0dHJpYnV0ZShcIm5vcm1hbFwiLG0pO3RoaXMuYWRkQXR0cmlidXRlKFwidXZcIixoKX07XG5USFJFRS5Ub3J1c0tub3RCdWZmZXJHZW9tZXRyeS5wcm90b3R5cGU9T2JqZWN0LmNyZWF0ZShUSFJFRS5CdWZmZXJHZW9tZXRyeS5wcm90b3R5cGUpO1RIUkVFLlRvcnVzS25vdEJ1ZmZlckdlb21ldHJ5LnByb3RvdHlwZS5jb25zdHJ1Y3Rvcj1USFJFRS5Ub3J1c0tub3RCdWZmZXJHZW9tZXRyeTtcblRIUkVFLlRvcnVzS25vdEdlb21ldHJ5PWZ1bmN0aW9uKGEsYixjLGQsZSxmLGcpe1RIUkVFLkdlb21ldHJ5LmNhbGwodGhpcyk7dGhpcy50eXBlPVwiVG9ydXNLbm90R2VvbWV0cnlcIjt0aGlzLnBhcmFtZXRlcnM9e3JhZGl1czphLHR1YmU6Yix0dWJ1bGFyU2VnbWVudHM6YyxyYWRpYWxTZWdtZW50czpkLHA6ZSxxOmZ9O3ZvaWQgMCE9PWcmJmNvbnNvbGUud2FybihcIlRIUkVFLlRvcnVzS25vdEdlb21ldHJ5OiBoZWlnaHRTY2FsZSBoYXMgYmVlbiBkZXByZWNhdGVkLiBVc2UgLnNjYWxlKCB4LCB5LCB6ICkgaW5zdGVhZC5cIik7dGhpcy5mcm9tQnVmZmVyR2VvbWV0cnkobmV3IFRIUkVFLlRvcnVzS25vdEJ1ZmZlckdlb21ldHJ5KGEsYixjLGQsZSxmKSk7dGhpcy5tZXJnZVZlcnRpY2VzKCl9O1RIUkVFLlRvcnVzS25vdEdlb21ldHJ5LnByb3RvdHlwZT1PYmplY3QuY3JlYXRlKFRIUkVFLkdlb21ldHJ5LnByb3RvdHlwZSk7XG5USFJFRS5Ub3J1c0tub3RHZW9tZXRyeS5wcm90b3R5cGUuY29uc3RydWN0b3I9VEhSRUUuVG9ydXNLbm90R2VvbWV0cnk7XG5USFJFRS5UdWJlR2VvbWV0cnk9ZnVuY3Rpb24oYSxiLGMsZCxlLGYpe1RIUkVFLkdlb21ldHJ5LmNhbGwodGhpcyk7dGhpcy50eXBlPVwiVHViZUdlb21ldHJ5XCI7dGhpcy5wYXJhbWV0ZXJzPXtwYXRoOmEsc2VnbWVudHM6YixyYWRpdXM6YyxyYWRpYWxTZWdtZW50czpkLGNsb3NlZDplLHRhcGVyOmZ9O2I9Ynx8NjQ7Yz1jfHwxO2Q9ZHx8ODtlPWV8fCExO2Y9Znx8VEhSRUUuVHViZUdlb21ldHJ5Lk5vVGFwZXI7dmFyIGc9W10saCxrLGw9YisxLG0scCxuLHEscixzPW5ldyBUSFJFRS5WZWN0b3IzLHYsdCx1O3Y9bmV3IFRIUkVFLlR1YmVHZW9tZXRyeS5GcmVuZXRGcmFtZXMoYSxiLGUpO3Q9di5ub3JtYWxzO3U9di5iaW5vcm1hbHM7dGhpcy50YW5nZW50cz12LnRhbmdlbnRzO3RoaXMubm9ybWFscz10O3RoaXMuYmlub3JtYWxzPXU7Zm9yKHY9MDt2PGw7disrKWZvcihnW3ZdPVtdLG09di8obC0xKSxyPWEuZ2V0UG9pbnRBdChtKSxoPXRbdl0saz11W3ZdLG49YypmKG0pLG09MDttPFxuZDttKyspcD1tL2QqMipNYXRoLlBJLHE9LW4qTWF0aC5jb3MocCkscD1uKk1hdGguc2luKHApLHMuY29weShyKSxzLngrPXEqaC54K3Aqay54LHMueSs9cSpoLnkrcCprLnkscy56Kz1xKmgueitwKmsueixnW3ZdW21dPXRoaXMudmVydGljZXMucHVzaChuZXcgVEhSRUUuVmVjdG9yMyhzLngscy55LHMueikpLTE7Zm9yKHY9MDt2PGI7disrKWZvcihtPTA7bTxkO20rKylmPWU/KHYrMSklYjp2KzEsbD0obSsxKSVkLGE9Z1t2XVttXSxjPWdbZl1bbV0sZj1nW2ZdW2xdLGw9Z1t2XVtsXSxzPW5ldyBUSFJFRS5WZWN0b3IyKHYvYixtL2QpLHQ9bmV3IFRIUkVFLlZlY3RvcjIoKHYrMSkvYixtL2QpLHU9bmV3IFRIUkVFLlZlY3RvcjIoKHYrMSkvYiwobSsxKS9kKSxoPW5ldyBUSFJFRS5WZWN0b3IyKHYvYiwobSsxKS9kKSx0aGlzLmZhY2VzLnB1c2gobmV3IFRIUkVFLkZhY2UzKGEsYyxsKSksdGhpcy5mYWNlVmVydGV4VXZzWzBdLnB1c2goW3MsdCxoXSksdGhpcy5mYWNlcy5wdXNoKG5ldyBUSFJFRS5GYWNlMyhjLFxuZixsKSksdGhpcy5mYWNlVmVydGV4VXZzWzBdLnB1c2goW3QuY2xvbmUoKSx1LGguY2xvbmUoKV0pO3RoaXMuY29tcHV0ZUZhY2VOb3JtYWxzKCk7dGhpcy5jb21wdXRlVmVydGV4Tm9ybWFscygpfTtUSFJFRS5UdWJlR2VvbWV0cnkucHJvdG90eXBlPU9iamVjdC5jcmVhdGUoVEhSRUUuR2VvbWV0cnkucHJvdG90eXBlKTtUSFJFRS5UdWJlR2VvbWV0cnkucHJvdG90eXBlLmNvbnN0cnVjdG9yPVRIUkVFLlR1YmVHZW9tZXRyeTtUSFJFRS5UdWJlR2VvbWV0cnkuTm9UYXBlcj1mdW5jdGlvbihhKXtyZXR1cm4gMX07VEhSRUUuVHViZUdlb21ldHJ5LlNpbnVzb2lkYWxUYXBlcj1mdW5jdGlvbihhKXtyZXR1cm4gTWF0aC5zaW4oTWF0aC5QSSphKX07XG5USFJFRS5UdWJlR2VvbWV0cnkuRnJlbmV0RnJhbWVzPWZ1bmN0aW9uKGEsYixjKXt2YXIgZD1uZXcgVEhSRUUuVmVjdG9yMyxlPVtdLGY9W10sZz1bXSxoPW5ldyBUSFJFRS5WZWN0b3IzLGs9bmV3IFRIUkVFLk1hdHJpeDQ7Yis9MTt2YXIgbCxtLHA7dGhpcy50YW5nZW50cz1lO3RoaXMubm9ybWFscz1mO3RoaXMuYmlub3JtYWxzPWc7Zm9yKGw9MDtsPGI7bCsrKW09bC8oYi0xKSxlW2xdPWEuZ2V0VGFuZ2VudEF0KG0pLGVbbF0ubm9ybWFsaXplKCk7ZlswXT1uZXcgVEhSRUUuVmVjdG9yMztnWzBdPW5ldyBUSFJFRS5WZWN0b3IzO2E9TnVtYmVyLk1BWF9WQUxVRTtsPU1hdGguYWJzKGVbMF0ueCk7bT1NYXRoLmFicyhlWzBdLnkpO3A9TWF0aC5hYnMoZVswXS56KTtsPD1hJiYoYT1sLGQuc2V0KDEsMCwwKSk7bTw9YSYmKGE9bSxkLnNldCgwLDEsMCkpO3A8PWEmJmQuc2V0KDAsMCwxKTtoLmNyb3NzVmVjdG9ycyhlWzBdLGQpLm5vcm1hbGl6ZSgpO2ZbMF0uY3Jvc3NWZWN0b3JzKGVbMF0sXG5oKTtnWzBdLmNyb3NzVmVjdG9ycyhlWzBdLGZbMF0pO2ZvcihsPTE7bDxiO2wrKylmW2xdPWZbbC0xXS5jbG9uZSgpLGdbbF09Z1tsLTFdLmNsb25lKCksaC5jcm9zc1ZlY3RvcnMoZVtsLTFdLGVbbF0pLGgubGVuZ3RoKCk+TnVtYmVyLkVQU0lMT04mJihoLm5vcm1hbGl6ZSgpLGQ9TWF0aC5hY29zKFRIUkVFLk1hdGguY2xhbXAoZVtsLTFdLmRvdChlW2xdKSwtMSwxKSksZltsXS5hcHBseU1hdHJpeDQoay5tYWtlUm90YXRpb25BeGlzKGgsZCkpKSxnW2xdLmNyb3NzVmVjdG9ycyhlW2xdLGZbbF0pO2lmKGMpZm9yKGQ9TWF0aC5hY29zKFRIUkVFLk1hdGguY2xhbXAoZlswXS5kb3QoZltiLTFdKSwtMSwxKSksZC89Yi0xLDA8ZVswXS5kb3QoaC5jcm9zc1ZlY3RvcnMoZlswXSxmW2ItMV0pKSYmKGQ9LWQpLGw9MTtsPGI7bCsrKWZbbF0uYXBwbHlNYXRyaXg0KGsubWFrZVJvdGF0aW9uQXhpcyhlW2xdLGQqbCkpLGdbbF0uY3Jvc3NWZWN0b3JzKGVbbF0sZltsXSl9O1xuVEhSRUUuUG9seWhlZHJvbkdlb21ldHJ5PWZ1bmN0aW9uKGEsYixjLGQpe2Z1bmN0aW9uIGUoYSl7dmFyIGI9YS5ub3JtYWxpemUoKS5jbG9uZSgpO2IuaW5kZXg9ay52ZXJ0aWNlcy5wdXNoKGIpLTE7dmFyIGM9TWF0aC5hdGFuMihhLnosLWEueCkvMi9NYXRoLlBJKy41O2E9TWF0aC5hdGFuMigtYS55LE1hdGguc3FydChhLngqYS54K2EueiphLnopKS9NYXRoLlBJKy41O2IudXY9bmV3IFRIUkVFLlZlY3RvcjIoYywxLWEpO3JldHVybiBifWZ1bmN0aW9uIGYoYSxiLGMpe3ZhciBkPW5ldyBUSFJFRS5GYWNlMyhhLmluZGV4LGIuaW5kZXgsYy5pbmRleCxbYS5jbG9uZSgpLGIuY2xvbmUoKSxjLmNsb25lKCldKTtrLmZhY2VzLnB1c2goZCk7di5jb3B5KGEpLmFkZChiKS5hZGQoYykuZGl2aWRlU2NhbGFyKDMpO2Q9TWF0aC5hdGFuMih2LnosLXYueCk7ay5mYWNlVmVydGV4VXZzWzBdLnB1c2goW2goYS51dixhLGQpLGgoYi51dixiLGQpLGgoYy51dixjLGQpXSl9ZnVuY3Rpb24gZyhhLFxuYil7Zm9yKHZhciBjPU1hdGgucG93KDIsYiksZD1lKGsudmVydGljZXNbYS5hXSksZz1lKGsudmVydGljZXNbYS5iXSksaD1lKGsudmVydGljZXNbYS5jXSksbD1bXSxtPTA7bTw9YzttKyspe2xbbV09W107Zm9yKHZhciBuPWUoZC5jbG9uZSgpLmxlcnAoaCxtL2MpKSxwPWUoZy5jbG9uZSgpLmxlcnAoaCxtL2MpKSxxPWMtbSxyPTA7cjw9cTtyKyspbFttXVtyXT0wPT09ciYmbT09PWM/bjplKG4uY2xvbmUoKS5sZXJwKHAsci9xKSl9Zm9yKG09MDttPGM7bSsrKWZvcihyPTA7cjwyKihjLW0pLTE7cisrKWQ9TWF0aC5mbG9vcihyLzIpLDA9PT1yJTI/ZihsW21dW2QrMV0sbFttKzFdW2RdLGxbbV1bZF0pOmYobFttXVtkKzFdLGxbbSsxXVtkKzFdLGxbbSsxXVtkXSl9ZnVuY3Rpb24gaChhLGIsYyl7MD5jJiYxPT09YS54JiYoYT1uZXcgVEhSRUUuVmVjdG9yMihhLngtMSxhLnkpKTswPT09Yi54JiYwPT09Yi56JiYoYT1uZXcgVEhSRUUuVmVjdG9yMihjLzIvTWF0aC5QSSsuNSxhLnkpKTtcbnJldHVybiBhLmNsb25lKCl9VEhSRUUuR2VvbWV0cnkuY2FsbCh0aGlzKTt0aGlzLnR5cGU9XCJQb2x5aGVkcm9uR2VvbWV0cnlcIjt0aGlzLnBhcmFtZXRlcnM9e3ZlcnRpY2VzOmEsaW5kaWNlczpiLHJhZGl1czpjLGRldGFpbDpkfTtjPWN8fDE7ZD1kfHwwO2Zvcih2YXIgaz10aGlzLGw9MCxtPWEubGVuZ3RoO2w8bTtsKz0zKWUobmV3IFRIUkVFLlZlY3RvcjMoYVtsXSxhW2wrMV0sYVtsKzJdKSk7YT10aGlzLnZlcnRpY2VzO2Zvcih2YXIgcD1bXSxuPWw9MCxtPWIubGVuZ3RoO2w8bTtsKz0zLG4rKyl7dmFyIHE9YVtiW2xdXSxyPWFbYltsKzFdXSxzPWFbYltsKzJdXTtwW25dPW5ldyBUSFJFRS5GYWNlMyhxLmluZGV4LHIuaW5kZXgscy5pbmRleCxbcS5jbG9uZSgpLHIuY2xvbmUoKSxzLmNsb25lKCldKX1mb3IodmFyIHY9bmV3IFRIUkVFLlZlY3RvcjMsbD0wLG09cC5sZW5ndGg7bDxtO2wrKylnKHBbbF0sZCk7bD0wO2ZvcihtPXRoaXMuZmFjZVZlcnRleFV2c1swXS5sZW5ndGg7bDxcbm07bCsrKWI9dGhpcy5mYWNlVmVydGV4VXZzWzBdW2xdLGQ9YlswXS54LGE9YlsxXS54LHA9YlsyXS54LG49TWF0aC5tYXgoZCxhLHApLHE9TWF0aC5taW4oZCxhLHApLC45PG4mJi4xPnEmJiguMj5kJiYoYlswXS54Kz0xKSwuMj5hJiYoYlsxXS54Kz0xKSwuMj5wJiYoYlsyXS54Kz0xKSk7bD0wO2ZvcihtPXRoaXMudmVydGljZXMubGVuZ3RoO2w8bTtsKyspdGhpcy52ZXJ0aWNlc1tsXS5tdWx0aXBseVNjYWxhcihjKTt0aGlzLm1lcmdlVmVydGljZXMoKTt0aGlzLmNvbXB1dGVGYWNlTm9ybWFscygpO3RoaXMuYm91bmRpbmdTcGhlcmU9bmV3IFRIUkVFLlNwaGVyZShuZXcgVEhSRUUuVmVjdG9yMyxjKX07VEhSRUUuUG9seWhlZHJvbkdlb21ldHJ5LnByb3RvdHlwZT1PYmplY3QuY3JlYXRlKFRIUkVFLkdlb21ldHJ5LnByb3RvdHlwZSk7VEhSRUUuUG9seWhlZHJvbkdlb21ldHJ5LnByb3RvdHlwZS5jb25zdHJ1Y3Rvcj1USFJFRS5Qb2x5aGVkcm9uR2VvbWV0cnk7XG5USFJFRS5Eb2RlY2FoZWRyb25HZW9tZXRyeT1mdW5jdGlvbihhLGIpe3ZhciBjPSgxK01hdGguc3FydCg1KSkvMixkPTEvYztUSFJFRS5Qb2x5aGVkcm9uR2VvbWV0cnkuY2FsbCh0aGlzLFstMSwtMSwtMSwtMSwtMSwxLC0xLDEsLTEsLTEsMSwxLDEsLTEsLTEsMSwtMSwxLDEsMSwtMSwxLDEsMSwwLC1kLC1jLDAsLWQsYywwLGQsLWMsMCxkLGMsLWQsLWMsMCwtZCxjLDAsZCwtYywwLGQsYywwLC1jLDAsLWQsYywwLC1kLC1jLDAsZCxjLDAsZF0sWzMsMTEsNywzLDcsMTUsMywxNSwxMyw3LDE5LDE3LDcsMTcsNiw3LDYsMTUsMTcsNCw4LDE3LDgsMTAsMTcsMTAsNiw4LDAsMTYsOCwxNiwyLDgsMiwxMCwwLDEyLDEsMCwxLDE4LDAsMTgsMTYsNiwxMCwyLDYsMiwxMyw2LDEzLDE1LDIsMTYsMTgsMiwxOCwzLDIsMywxMywxOCwxLDksMTgsOSwxMSwxOCwxMSwzLDQsMTQsMTIsNCwxMiwwLDQsMCw4LDExLDksNSwxMSw1LDE5LDExLDE5LDcsMTksNSwxNCwxOSwxNCw0LDE5LDQsMTcsMSxcbjEyLDE0LDEsMTQsNSwxLDUsOV0sYSxiKTt0aGlzLnR5cGU9XCJEb2RlY2FoZWRyb25HZW9tZXRyeVwiO3RoaXMucGFyYW1ldGVycz17cmFkaXVzOmEsZGV0YWlsOmJ9fTtUSFJFRS5Eb2RlY2FoZWRyb25HZW9tZXRyeS5wcm90b3R5cGU9T2JqZWN0LmNyZWF0ZShUSFJFRS5Qb2x5aGVkcm9uR2VvbWV0cnkucHJvdG90eXBlKTtUSFJFRS5Eb2RlY2FoZWRyb25HZW9tZXRyeS5wcm90b3R5cGUuY29uc3RydWN0b3I9VEhSRUUuRG9kZWNhaGVkcm9uR2VvbWV0cnk7XG5USFJFRS5JY29zYWhlZHJvbkdlb21ldHJ5PWZ1bmN0aW9uKGEsYil7dmFyIGM9KDErTWF0aC5zcXJ0KDUpKS8yO1RIUkVFLlBvbHloZWRyb25HZW9tZXRyeS5jYWxsKHRoaXMsWy0xLGMsMCwxLGMsMCwtMSwtYywwLDEsLWMsMCwwLC0xLGMsMCwxLGMsMCwtMSwtYywwLDEsLWMsYywwLC0xLGMsMCwxLC1jLDAsLTEsLWMsMCwxXSxbMCwxMSw1LDAsNSwxLDAsMSw3LDAsNywxMCwwLDEwLDExLDEsNSw5LDUsMTEsNCwxMSwxMCwyLDEwLDcsNiw3LDEsOCwzLDksNCwzLDQsMiwzLDIsNiwzLDYsOCwzLDgsOSw0LDksNSwyLDQsMTEsNiwyLDEwLDgsNiw3LDksOCwxXSxhLGIpO3RoaXMudHlwZT1cIkljb3NhaGVkcm9uR2VvbWV0cnlcIjt0aGlzLnBhcmFtZXRlcnM9e3JhZGl1czphLGRldGFpbDpifX07VEhSRUUuSWNvc2FoZWRyb25HZW9tZXRyeS5wcm90b3R5cGU9T2JqZWN0LmNyZWF0ZShUSFJFRS5Qb2x5aGVkcm9uR2VvbWV0cnkucHJvdG90eXBlKTtcblRIUkVFLkljb3NhaGVkcm9uR2VvbWV0cnkucHJvdG90eXBlLmNvbnN0cnVjdG9yPVRIUkVFLkljb3NhaGVkcm9uR2VvbWV0cnk7VEhSRUUuT2N0YWhlZHJvbkdlb21ldHJ5PWZ1bmN0aW9uKGEsYil7VEhSRUUuUG9seWhlZHJvbkdlb21ldHJ5LmNhbGwodGhpcyxbMSwwLDAsLTEsMCwwLDAsMSwwLDAsLTEsMCwwLDAsMSwwLDAsLTFdLFswLDIsNCwwLDQsMywwLDMsNSwwLDUsMiwxLDIsNSwxLDUsMywxLDMsNCwxLDQsMl0sYSxiKTt0aGlzLnR5cGU9XCJPY3RhaGVkcm9uR2VvbWV0cnlcIjt0aGlzLnBhcmFtZXRlcnM9e3JhZGl1czphLGRldGFpbDpifX07VEhSRUUuT2N0YWhlZHJvbkdlb21ldHJ5LnByb3RvdHlwZT1PYmplY3QuY3JlYXRlKFRIUkVFLlBvbHloZWRyb25HZW9tZXRyeS5wcm90b3R5cGUpO1RIUkVFLk9jdGFoZWRyb25HZW9tZXRyeS5wcm90b3R5cGUuY29uc3RydWN0b3I9VEhSRUUuT2N0YWhlZHJvbkdlb21ldHJ5O1xuVEhSRUUuVGV0cmFoZWRyb25HZW9tZXRyeT1mdW5jdGlvbihhLGIpe1RIUkVFLlBvbHloZWRyb25HZW9tZXRyeS5jYWxsKHRoaXMsWzEsMSwxLC0xLC0xLDEsLTEsMSwtMSwxLC0xLC0xXSxbMiwxLDAsMCwzLDIsMSwzLDAsMiwzLDFdLGEsYik7dGhpcy50eXBlPVwiVGV0cmFoZWRyb25HZW9tZXRyeVwiO3RoaXMucGFyYW1ldGVycz17cmFkaXVzOmEsZGV0YWlsOmJ9fTtUSFJFRS5UZXRyYWhlZHJvbkdlb21ldHJ5LnByb3RvdHlwZT1PYmplY3QuY3JlYXRlKFRIUkVFLlBvbHloZWRyb25HZW9tZXRyeS5wcm90b3R5cGUpO1RIUkVFLlRldHJhaGVkcm9uR2VvbWV0cnkucHJvdG90eXBlLmNvbnN0cnVjdG9yPVRIUkVFLlRldHJhaGVkcm9uR2VvbWV0cnk7XG5USFJFRS5QYXJhbWV0cmljR2VvbWV0cnk9ZnVuY3Rpb24oYSxiLGMpe1RIUkVFLkdlb21ldHJ5LmNhbGwodGhpcyk7dGhpcy50eXBlPVwiUGFyYW1ldHJpY0dlb21ldHJ5XCI7dGhpcy5wYXJhbWV0ZXJzPXtmdW5jOmEsc2xpY2VzOmIsc3RhY2tzOmN9O3ZhciBkPXRoaXMudmVydGljZXMsZT10aGlzLmZhY2VzLGY9dGhpcy5mYWNlVmVydGV4VXZzWzBdLGcsaCxrLGwsbT1iKzE7Zm9yKGc9MDtnPD1jO2crKylmb3IobD1nL2MsaD0wO2g8PWI7aCsrKWs9aC9iLGs9YShrLGwpLGQucHVzaChrKTt2YXIgcCxuLHEscjtmb3IoZz0wO2c8YztnKyspZm9yKGg9MDtoPGI7aCsrKWE9ZyptK2gsZD1nKm0raCsxLGw9KGcrMSkqbStoKzEsaz0oZysxKSptK2gscD1uZXcgVEhSRUUuVmVjdG9yMihoL2IsZy9jKSxuPW5ldyBUSFJFRS5WZWN0b3IyKChoKzEpL2IsZy9jKSxxPW5ldyBUSFJFRS5WZWN0b3IyKChoKzEpL2IsKGcrMSkvYykscj1uZXcgVEhSRUUuVmVjdG9yMihoL2IsKGcrMSkvYyksZS5wdXNoKG5ldyBUSFJFRS5GYWNlMyhhLFxuZCxrKSksZi5wdXNoKFtwLG4scl0pLGUucHVzaChuZXcgVEhSRUUuRmFjZTMoZCxsLGspKSxmLnB1c2goW24uY2xvbmUoKSxxLHIuY2xvbmUoKV0pO3RoaXMuY29tcHV0ZUZhY2VOb3JtYWxzKCk7dGhpcy5jb21wdXRlVmVydGV4Tm9ybWFscygpfTtUSFJFRS5QYXJhbWV0cmljR2VvbWV0cnkucHJvdG90eXBlPU9iamVjdC5jcmVhdGUoVEhSRUUuR2VvbWV0cnkucHJvdG90eXBlKTtUSFJFRS5QYXJhbWV0cmljR2VvbWV0cnkucHJvdG90eXBlLmNvbnN0cnVjdG9yPVRIUkVFLlBhcmFtZXRyaWNHZW9tZXRyeTtcblRIUkVFLldpcmVmcmFtZUdlb21ldHJ5PWZ1bmN0aW9uKGEpe2Z1bmN0aW9uIGIoYSxiKXtyZXR1cm4gYS1ifVRIUkVFLkJ1ZmZlckdlb21ldHJ5LmNhbGwodGhpcyk7dmFyIGM9WzAsMF0sZD17fSxlPVtcImFcIixcImJcIixcImNcIl07aWYoYSBpbnN0YW5jZW9mIFRIUkVFLkdlb21ldHJ5KXt2YXIgZj1hLnZlcnRpY2VzLGc9YS5mYWNlcyxoPTAsaz1uZXcgVWludDMyQXJyYXkoNipnLmxlbmd0aCk7YT0wO2Zvcih2YXIgbD1nLmxlbmd0aDthPGw7YSsrKWZvcih2YXIgbT1nW2FdLHA9MDszPnA7cCsrKXtjWzBdPW1bZVtwXV07Y1sxXT1tW2VbKHArMSklM11dO2Muc29ydChiKTt2YXIgbj1jLnRvU3RyaW5nKCk7dm9pZCAwPT09ZFtuXSYmKGtbMipoXT1jWzBdLGtbMipoKzFdPWNbMV0sZFtuXT0hMCxoKyspfWM9bmV3IEZsb2F0MzJBcnJheSg2KmgpO2E9MDtmb3IobD1oO2E8bDthKyspZm9yKHA9MDsyPnA7cCsrKWQ9ZltrWzIqYStwXV0saD02KmErMypwLGNbaCswXT1kLngsY1toKzFdPWQueSxcbmNbaCsyXT1kLno7dGhpcy5hZGRBdHRyaWJ1dGUoXCJwb3NpdGlvblwiLG5ldyBUSFJFRS5CdWZmZXJBdHRyaWJ1dGUoYywzKSl9ZWxzZSBpZihhIGluc3RhbmNlb2YgVEhSRUUuQnVmZmVyR2VvbWV0cnkpe2lmKG51bGwhPT1hLmluZGV4KXtsPWEuaW5kZXguYXJyYXk7Zj1hLmF0dHJpYnV0ZXMucG9zaXRpb247ZT1hLmdyb3VwcztoPTA7MD09PWUubGVuZ3RoJiZhLmFkZEdyb3VwKDAsbC5sZW5ndGgpO2s9bmV3IFVpbnQzMkFycmF5KDIqbC5sZW5ndGgpO2c9MDtmb3IobT1lLmxlbmd0aDtnPG07KytnKXthPWVbZ107cD1hLnN0YXJ0O249YS5jb3VudDthPXA7Zm9yKHZhciBxPXArbjthPHE7YSs9Mylmb3IocD0wOzM+cDtwKyspY1swXT1sW2ErcF0sY1sxXT1sW2ErKHArMSklM10sYy5zb3J0KGIpLG49Yy50b1N0cmluZygpLHZvaWQgMD09PWRbbl0mJihrWzIqaF09Y1swXSxrWzIqaCsxXT1jWzFdLGRbbl09ITAsaCsrKX1jPW5ldyBGbG9hdDMyQXJyYXkoNipoKTthPTA7Zm9yKGw9aDthPFxubDthKyspZm9yKHA9MDsyPnA7cCsrKWg9NiphKzMqcCxkPWtbMiphK3BdLGNbaCswXT1mLmdldFgoZCksY1toKzFdPWYuZ2V0WShkKSxjW2grMl09Zi5nZXRaKGQpfWVsc2UgZm9yKGY9YS5hdHRyaWJ1dGVzLnBvc2l0aW9uLmFycmF5LGg9Zi5sZW5ndGgvMyxrPWgvMyxjPW5ldyBGbG9hdDMyQXJyYXkoNipoKSxhPTAsbD1rO2E8bDthKyspZm9yKHA9MDszPnA7cCsrKWg9MTgqYSs2KnAsaz05KmErMypwLGNbaCswXT1mW2tdLGNbaCsxXT1mW2srMV0sY1toKzJdPWZbaysyXSxkPTkqYSsocCsxKSUzKjMsY1toKzNdPWZbZF0sY1toKzRdPWZbZCsxXSxjW2grNV09ZltkKzJdO3RoaXMuYWRkQXR0cmlidXRlKFwicG9zaXRpb25cIixuZXcgVEhSRUUuQnVmZmVyQXR0cmlidXRlKGMsMykpfX07VEhSRUUuV2lyZWZyYW1lR2VvbWV0cnkucHJvdG90eXBlPU9iamVjdC5jcmVhdGUoVEhSRUUuQnVmZmVyR2VvbWV0cnkucHJvdG90eXBlKTtcblRIUkVFLldpcmVmcmFtZUdlb21ldHJ5LnByb3RvdHlwZS5jb25zdHJ1Y3Rvcj1USFJFRS5XaXJlZnJhbWVHZW9tZXRyeTtUSFJFRS5BeGlzSGVscGVyPWZ1bmN0aW9uKGEpe2E9YXx8MTt2YXIgYj1uZXcgRmxvYXQzMkFycmF5KFswLDAsMCxhLDAsMCwwLDAsMCwwLGEsMCwwLDAsMCwwLDAsYV0pLGM9bmV3IEZsb2F0MzJBcnJheShbMSwwLDAsMSwuNiwwLDAsMSwwLC42LDEsMCwwLDAsMSwwLC42LDFdKTthPW5ldyBUSFJFRS5CdWZmZXJHZW9tZXRyeTthLmFkZEF0dHJpYnV0ZShcInBvc2l0aW9uXCIsbmV3IFRIUkVFLkJ1ZmZlckF0dHJpYnV0ZShiLDMpKTthLmFkZEF0dHJpYnV0ZShcImNvbG9yXCIsbmV3IFRIUkVFLkJ1ZmZlckF0dHJpYnV0ZShjLDMpKTtiPW5ldyBUSFJFRS5MaW5lQmFzaWNNYXRlcmlhbCh7dmVydGV4Q29sb3JzOlRIUkVFLlZlcnRleENvbG9yc30pO1RIUkVFLkxpbmVTZWdtZW50cy5jYWxsKHRoaXMsYSxiKX07VEhSRUUuQXhpc0hlbHBlci5wcm90b3R5cGU9T2JqZWN0LmNyZWF0ZShUSFJFRS5MaW5lU2VnbWVudHMucHJvdG90eXBlKTtcblRIUkVFLkF4aXNIZWxwZXIucHJvdG90eXBlLmNvbnN0cnVjdG9yPVRIUkVFLkF4aXNIZWxwZXI7XG5USFJFRS5BcnJvd0hlbHBlcj1mdW5jdGlvbigpe3ZhciBhPW5ldyBUSFJFRS5CdWZmZXJHZW9tZXRyeTthLmFkZEF0dHJpYnV0ZShcInBvc2l0aW9uXCIsbmV3IFRIUkVFLkZsb2F0MzJBdHRyaWJ1dGUoWzAsMCwwLDAsMSwwXSwzKSk7dmFyIGI9bmV3IFRIUkVFLkN5bGluZGVyQnVmZmVyR2VvbWV0cnkoMCwuNSwxLDUsMSk7Yi50cmFuc2xhdGUoMCwtLjUsMCk7cmV0dXJuIGZ1bmN0aW9uKGMsZCxlLGYsZyxoKXtUSFJFRS5PYmplY3QzRC5jYWxsKHRoaXMpO3ZvaWQgMD09PWYmJihmPTE2Nzc2OTYwKTt2b2lkIDA9PT1lJiYoZT0xKTt2b2lkIDA9PT1nJiYoZz0uMiplKTt2b2lkIDA9PT1oJiYoaD0uMipnKTt0aGlzLnBvc2l0aW9uLmNvcHkoZCk7dGhpcy5saW5lPW5ldyBUSFJFRS5MaW5lKGEsbmV3IFRIUkVFLkxpbmVCYXNpY01hdGVyaWFsKHtjb2xvcjpmfSkpO3RoaXMubGluZS5tYXRyaXhBdXRvVXBkYXRlPSExO3RoaXMuYWRkKHRoaXMubGluZSk7dGhpcy5jb25lPW5ldyBUSFJFRS5NZXNoKGIsXG5uZXcgVEhSRUUuTWVzaEJhc2ljTWF0ZXJpYWwoe2NvbG9yOmZ9KSk7dGhpcy5jb25lLm1hdHJpeEF1dG9VcGRhdGU9ITE7dGhpcy5hZGQodGhpcy5jb25lKTt0aGlzLnNldERpcmVjdGlvbihjKTt0aGlzLnNldExlbmd0aChlLGcsaCl9fSgpO1RIUkVFLkFycm93SGVscGVyLnByb3RvdHlwZT1PYmplY3QuY3JlYXRlKFRIUkVFLk9iamVjdDNELnByb3RvdHlwZSk7VEhSRUUuQXJyb3dIZWxwZXIucHJvdG90eXBlLmNvbnN0cnVjdG9yPVRIUkVFLkFycm93SGVscGVyO1xuVEhSRUUuQXJyb3dIZWxwZXIucHJvdG90eXBlLnNldERpcmVjdGlvbj1mdW5jdGlvbigpe3ZhciBhPW5ldyBUSFJFRS5WZWN0b3IzLGI7cmV0dXJuIGZ1bmN0aW9uKGMpey45OTk5OTxjLnk/dGhpcy5xdWF0ZXJuaW9uLnNldCgwLDAsMCwxKTotLjk5OTk5PmMueT90aGlzLnF1YXRlcm5pb24uc2V0KDEsMCwwLDApOihhLnNldChjLnosMCwtYy54KS5ub3JtYWxpemUoKSxiPU1hdGguYWNvcyhjLnkpLHRoaXMucXVhdGVybmlvbi5zZXRGcm9tQXhpc0FuZ2xlKGEsYikpfX0oKTtUSFJFRS5BcnJvd0hlbHBlci5wcm90b3R5cGUuc2V0TGVuZ3RoPWZ1bmN0aW9uKGEsYixjKXt2b2lkIDA9PT1iJiYoYj0uMiphKTt2b2lkIDA9PT1jJiYoYz0uMipiKTt0aGlzLmxpbmUuc2NhbGUuc2V0KDEsTWF0aC5tYXgoMCxhLWIpLDEpO3RoaXMubGluZS51cGRhdGVNYXRyaXgoKTt0aGlzLmNvbmUuc2NhbGUuc2V0KGMsYixjKTt0aGlzLmNvbmUucG9zaXRpb24ueT1hO3RoaXMuY29uZS51cGRhdGVNYXRyaXgoKX07XG5USFJFRS5BcnJvd0hlbHBlci5wcm90b3R5cGUuc2V0Q29sb3I9ZnVuY3Rpb24oYSl7dGhpcy5saW5lLm1hdGVyaWFsLmNvbG9yLmNvcHkoYSk7dGhpcy5jb25lLm1hdGVyaWFsLmNvbG9yLmNvcHkoYSl9O1RIUkVFLkJveEhlbHBlcj1mdW5jdGlvbihhLGIpe3ZvaWQgMD09PWImJihiPTE2Nzc2OTYwKTt2YXIgYz1uZXcgVWludDE2QXJyYXkoWzAsMSwxLDIsMiwzLDMsMCw0LDUsNSw2LDYsNyw3LDQsMCw0LDEsNSwyLDYsMyw3XSksZD1uZXcgRmxvYXQzMkFycmF5KDI0KSxlPW5ldyBUSFJFRS5CdWZmZXJHZW9tZXRyeTtlLnNldEluZGV4KG5ldyBUSFJFRS5CdWZmZXJBdHRyaWJ1dGUoYywxKSk7ZS5hZGRBdHRyaWJ1dGUoXCJwb3NpdGlvblwiLG5ldyBUSFJFRS5CdWZmZXJBdHRyaWJ1dGUoZCwzKSk7VEhSRUUuTGluZVNlZ21lbnRzLmNhbGwodGhpcyxlLG5ldyBUSFJFRS5MaW5lQmFzaWNNYXRlcmlhbCh7Y29sb3I6Yn0pKTt2b2lkIDAhPT1hJiZ0aGlzLnVwZGF0ZShhKX07XG5USFJFRS5Cb3hIZWxwZXIucHJvdG90eXBlPU9iamVjdC5jcmVhdGUoVEhSRUUuTGluZVNlZ21lbnRzLnByb3RvdHlwZSk7VEhSRUUuQm94SGVscGVyLnByb3RvdHlwZS5jb25zdHJ1Y3Rvcj1USFJFRS5Cb3hIZWxwZXI7XG5USFJFRS5Cb3hIZWxwZXIucHJvdG90eXBlLnVwZGF0ZT1mdW5jdGlvbigpe3ZhciBhPW5ldyBUSFJFRS5Cb3gzO3JldHVybiBmdW5jdGlvbihiKXtiIGluc3RhbmNlb2YgVEhSRUUuQm94Mz9hLmNvcHkoYik6YS5zZXRGcm9tT2JqZWN0KGIpO2lmKCFhLmlzRW1wdHkoKSl7Yj1hLm1pbjt2YXIgYz1hLm1heCxkPXRoaXMuZ2VvbWV0cnkuYXR0cmlidXRlcy5wb3NpdGlvbixlPWQuYXJyYXk7ZVswXT1jLng7ZVsxXT1jLnk7ZVsyXT1jLno7ZVszXT1iLng7ZVs0XT1jLnk7ZVs1XT1jLno7ZVs2XT1iLng7ZVs3XT1iLnk7ZVs4XT1jLno7ZVs5XT1jLng7ZVsxMF09Yi55O2VbMTFdPWMuejtlWzEyXT1jLng7ZVsxM109Yy55O2VbMTRdPWIuejtlWzE1XT1iLng7ZVsxNl09Yy55O2VbMTddPWIuejtlWzE4XT1iLng7ZVsxOV09Yi55O2VbMjBdPWIuejtlWzIxXT1jLng7ZVsyMl09Yi55O2VbMjNdPWIuejtkLm5lZWRzVXBkYXRlPSEwO3RoaXMuZ2VvbWV0cnkuY29tcHV0ZUJvdW5kaW5nU3BoZXJlKCl9fX0oKTtcblRIUkVFLkJvdW5kaW5nQm94SGVscGVyPWZ1bmN0aW9uKGEsYil7dmFyIGM9dm9pZCAwIT09Yj9iOjg5NDc4NDg7dGhpcy5vYmplY3Q9YTt0aGlzLmJveD1uZXcgVEhSRUUuQm94MztUSFJFRS5NZXNoLmNhbGwodGhpcyxuZXcgVEhSRUUuQm94R2VvbWV0cnkoMSwxLDEpLG5ldyBUSFJFRS5NZXNoQmFzaWNNYXRlcmlhbCh7Y29sb3I6Yyx3aXJlZnJhbWU6ITB9KSl9O1RIUkVFLkJvdW5kaW5nQm94SGVscGVyLnByb3RvdHlwZT1PYmplY3QuY3JlYXRlKFRIUkVFLk1lc2gucHJvdG90eXBlKTtUSFJFRS5Cb3VuZGluZ0JveEhlbHBlci5wcm90b3R5cGUuY29uc3RydWN0b3I9VEhSRUUuQm91bmRpbmdCb3hIZWxwZXI7VEhSRUUuQm91bmRpbmdCb3hIZWxwZXIucHJvdG90eXBlLnVwZGF0ZT1mdW5jdGlvbigpe3RoaXMuYm94LnNldEZyb21PYmplY3QodGhpcy5vYmplY3QpO3RoaXMuYm94LnNpemUodGhpcy5zY2FsZSk7dGhpcy5ib3guY2VudGVyKHRoaXMucG9zaXRpb24pfTtcblRIUkVFLkNhbWVyYUhlbHBlcj1mdW5jdGlvbihhKXtmdW5jdGlvbiBiKGEsYixkKXtjKGEsZCk7YyhiLGQpfWZ1bmN0aW9uIGMoYSxiKXtkLnZlcnRpY2VzLnB1c2gobmV3IFRIUkVFLlZlY3RvcjMpO2QuY29sb3JzLnB1c2gobmV3IFRIUkVFLkNvbG9yKGIpKTt2b2lkIDA9PT1mW2FdJiYoZlthXT1bXSk7ZlthXS5wdXNoKGQudmVydGljZXMubGVuZ3RoLTEpfXZhciBkPW5ldyBUSFJFRS5HZW9tZXRyeSxlPW5ldyBUSFJFRS5MaW5lQmFzaWNNYXRlcmlhbCh7Y29sb3I6MTY3NzcyMTUsdmVydGV4Q29sb3JzOlRIUkVFLkZhY2VDb2xvcnN9KSxmPXt9O2IoXCJuMVwiLFwibjJcIiwxNjc1NTIwMCk7YihcIm4yXCIsXCJuNFwiLDE2NzU1MjAwKTtiKFwibjRcIixcIm4zXCIsMTY3NTUyMDApO2IoXCJuM1wiLFwibjFcIiwxNjc1NTIwMCk7YihcImYxXCIsXCJmMlwiLDE2NzU1MjAwKTtiKFwiZjJcIixcImY0XCIsMTY3NTUyMDApO2IoXCJmNFwiLFwiZjNcIiwxNjc1NTIwMCk7YihcImYzXCIsXCJmMVwiLDE2NzU1MjAwKTtiKFwibjFcIixcImYxXCIsMTY3NTUyMDApO1xuYihcIm4yXCIsXCJmMlwiLDE2NzU1MjAwKTtiKFwibjNcIixcImYzXCIsMTY3NTUyMDApO2IoXCJuNFwiLFwiZjRcIiwxNjc1NTIwMCk7YihcInBcIixcIm4xXCIsMTY3MTE2ODApO2IoXCJwXCIsXCJuMlwiLDE2NzExNjgwKTtiKFwicFwiLFwibjNcIiwxNjcxMTY4MCk7YihcInBcIixcIm40XCIsMTY3MTE2ODApO2IoXCJ1MVwiLFwidTJcIiw0Mzc3NSk7YihcInUyXCIsXCJ1M1wiLDQzNzc1KTtiKFwidTNcIixcInUxXCIsNDM3NzUpO2IoXCJjXCIsXCJ0XCIsMTY3NzcyMTUpO2IoXCJwXCIsXCJjXCIsMzM1NTQ0Myk7YihcImNuMVwiLFwiY24yXCIsMzM1NTQ0Myk7YihcImNuM1wiLFwiY240XCIsMzM1NTQ0Myk7YihcImNmMVwiLFwiY2YyXCIsMzM1NTQ0Myk7YihcImNmM1wiLFwiY2Y0XCIsMzM1NTQ0Myk7VEhSRUUuTGluZVNlZ21lbnRzLmNhbGwodGhpcyxkLGUpO3RoaXMuY2FtZXJhPWE7dGhpcy5jYW1lcmEudXBkYXRlUHJvamVjdGlvbk1hdHJpeCYmdGhpcy5jYW1lcmEudXBkYXRlUHJvamVjdGlvbk1hdHJpeCgpO3RoaXMubWF0cml4PWEubWF0cml4V29ybGQ7dGhpcy5tYXRyaXhBdXRvVXBkYXRlPVxuITE7dGhpcy5wb2ludE1hcD1mO3RoaXMudXBkYXRlKCl9O1RIUkVFLkNhbWVyYUhlbHBlci5wcm90b3R5cGU9T2JqZWN0LmNyZWF0ZShUSFJFRS5MaW5lU2VnbWVudHMucHJvdG90eXBlKTtUSFJFRS5DYW1lcmFIZWxwZXIucHJvdG90eXBlLmNvbnN0cnVjdG9yPVRIUkVFLkNhbWVyYUhlbHBlcjtcblRIUkVFLkNhbWVyYUhlbHBlci5wcm90b3R5cGUudXBkYXRlPWZ1bmN0aW9uKCl7ZnVuY3Rpb24gYShhLGcsaCxrKXtkLnNldChnLGgsaykudW5wcm9qZWN0KGUpO2E9Y1thXTtpZih2b2lkIDAhPT1hKWZvcihnPTAsaD1hLmxlbmd0aDtnPGg7ZysrKWIudmVydGljZXNbYVtnXV0uY29weShkKX12YXIgYixjLGQ9bmV3IFRIUkVFLlZlY3RvcjMsZT1uZXcgVEhSRUUuQ2FtZXJhO3JldHVybiBmdW5jdGlvbigpe2I9dGhpcy5nZW9tZXRyeTtjPXRoaXMucG9pbnRNYXA7ZS5wcm9qZWN0aW9uTWF0cml4LmNvcHkodGhpcy5jYW1lcmEucHJvamVjdGlvbk1hdHJpeCk7YShcImNcIiwwLDAsLTEpO2EoXCJ0XCIsMCwwLDEpO2EoXCJuMVwiLC0xLC0xLC0xKTthKFwibjJcIiwxLC0xLC0xKTthKFwibjNcIiwtMSwxLC0xKTthKFwibjRcIiwxLDEsLTEpO2EoXCJmMVwiLC0xLC0xLDEpO2EoXCJmMlwiLDEsLTEsMSk7YShcImYzXCIsLTEsMSwxKTthKFwiZjRcIiwxLDEsMSk7YShcInUxXCIsLjcsMS4xLC0xKTthKFwidTJcIiwtLjcsMS4xLFxuLTEpO2EoXCJ1M1wiLDAsMiwtMSk7YShcImNmMVwiLC0xLDAsMSk7YShcImNmMlwiLDEsMCwxKTthKFwiY2YzXCIsMCwtMSwxKTthKFwiY2Y0XCIsMCwxLDEpO2EoXCJjbjFcIiwtMSwwLC0xKTthKFwiY24yXCIsMSwwLC0xKTthKFwiY24zXCIsMCwtMSwtMSk7YShcImNuNFwiLDAsMSwtMSk7Yi52ZXJ0aWNlc05lZWRVcGRhdGU9ITB9fSgpO1xuVEhSRUUuRGlyZWN0aW9uYWxMaWdodEhlbHBlcj1mdW5jdGlvbihhLGIpe1RIUkVFLk9iamVjdDNELmNhbGwodGhpcyk7dGhpcy5saWdodD1hO3RoaXMubGlnaHQudXBkYXRlTWF0cml4V29ybGQoKTt0aGlzLm1hdHJpeD1hLm1hdHJpeFdvcmxkO3RoaXMubWF0cml4QXV0b1VwZGF0ZT0hMTt2b2lkIDA9PT1iJiYoYj0xKTt2YXIgYz1uZXcgVEhSRUUuQnVmZmVyR2VvbWV0cnk7Yy5hZGRBdHRyaWJ1dGUoXCJwb3NpdGlvblwiLG5ldyBUSFJFRS5GbG9hdDMyQXR0cmlidXRlKFstYixiLDAsYixiLDAsYiwtYiwwLC1iLC1iLDAsLWIsYiwwXSwzKSk7dmFyIGQ9bmV3IFRIUkVFLkxpbmVCYXNpY01hdGVyaWFsKHtmb2c6ITF9KTt0aGlzLmFkZChuZXcgVEhSRUUuTGluZShjLGQpKTtjPW5ldyBUSFJFRS5CdWZmZXJHZW9tZXRyeTtjLmFkZEF0dHJpYnV0ZShcInBvc2l0aW9uXCIsbmV3IFRIUkVFLkZsb2F0MzJBdHRyaWJ1dGUoWzAsMCwwLDAsMCwxXSwzKSk7dGhpcy5hZGQobmV3IFRIUkVFLkxpbmUoYyxcbmQpKTt0aGlzLnVwZGF0ZSgpfTtUSFJFRS5EaXJlY3Rpb25hbExpZ2h0SGVscGVyLnByb3RvdHlwZT1PYmplY3QuY3JlYXRlKFRIUkVFLk9iamVjdDNELnByb3RvdHlwZSk7VEhSRUUuRGlyZWN0aW9uYWxMaWdodEhlbHBlci5wcm90b3R5cGUuY29uc3RydWN0b3I9VEhSRUUuRGlyZWN0aW9uYWxMaWdodEhlbHBlcjtUSFJFRS5EaXJlY3Rpb25hbExpZ2h0SGVscGVyLnByb3RvdHlwZS5kaXNwb3NlPWZ1bmN0aW9uKCl7dmFyIGE9dGhpcy5jaGlsZHJlblswXSxiPXRoaXMuY2hpbGRyZW5bMV07YS5nZW9tZXRyeS5kaXNwb3NlKCk7YS5tYXRlcmlhbC5kaXNwb3NlKCk7Yi5nZW9tZXRyeS5kaXNwb3NlKCk7Yi5tYXRlcmlhbC5kaXNwb3NlKCl9O1xuVEhSRUUuRGlyZWN0aW9uYWxMaWdodEhlbHBlci5wcm90b3R5cGUudXBkYXRlPWZ1bmN0aW9uKCl7dmFyIGE9bmV3IFRIUkVFLlZlY3RvcjMsYj1uZXcgVEhSRUUuVmVjdG9yMyxjPW5ldyBUSFJFRS5WZWN0b3IzO3JldHVybiBmdW5jdGlvbigpe2Euc2V0RnJvbU1hdHJpeFBvc2l0aW9uKHRoaXMubGlnaHQubWF0cml4V29ybGQpO2Iuc2V0RnJvbU1hdHJpeFBvc2l0aW9uKHRoaXMubGlnaHQudGFyZ2V0Lm1hdHJpeFdvcmxkKTtjLnN1YlZlY3RvcnMoYixhKTt2YXIgZD10aGlzLmNoaWxkcmVuWzBdLGU9dGhpcy5jaGlsZHJlblsxXTtkLmxvb2tBdChjKTtkLm1hdGVyaWFsLmNvbG9yLmNvcHkodGhpcy5saWdodC5jb2xvcikubXVsdGlwbHlTY2FsYXIodGhpcy5saWdodC5pbnRlbnNpdHkpO2UubG9va0F0KGMpO2Uuc2NhbGUuej1jLmxlbmd0aCgpfX0oKTtcblRIUkVFLkVkZ2VzSGVscGVyPWZ1bmN0aW9uKGEsYixjKXtiPXZvaWQgMCE9PWI/YjoxNjc3NzIxNTtUSFJFRS5MaW5lU2VnbWVudHMuY2FsbCh0aGlzLG5ldyBUSFJFRS5FZGdlc0dlb21ldHJ5KGEuZ2VvbWV0cnksYyksbmV3IFRIUkVFLkxpbmVCYXNpY01hdGVyaWFsKHtjb2xvcjpifSkpO3RoaXMubWF0cml4PWEubWF0cml4V29ybGQ7dGhpcy5tYXRyaXhBdXRvVXBkYXRlPSExfTtUSFJFRS5FZGdlc0hlbHBlci5wcm90b3R5cGU9T2JqZWN0LmNyZWF0ZShUSFJFRS5MaW5lU2VnbWVudHMucHJvdG90eXBlKTtUSFJFRS5FZGdlc0hlbHBlci5wcm90b3R5cGUuY29uc3RydWN0b3I9VEhSRUUuRWRnZXNIZWxwZXI7XG5USFJFRS5GYWNlTm9ybWFsc0hlbHBlcj1mdW5jdGlvbihhLGIsYyxkKXt0aGlzLm9iamVjdD1hO3RoaXMuc2l6ZT12b2lkIDAhPT1iP2I6MTthPXZvaWQgMCE9PWM/YzoxNjc3Njk2MDtkPXZvaWQgMCE9PWQ/ZDoxO2I9MDtjPXRoaXMub2JqZWN0Lmdlb21ldHJ5O2MgaW5zdGFuY2VvZiBUSFJFRS5HZW9tZXRyeT9iPWMuZmFjZXMubGVuZ3RoOmNvbnNvbGUud2FybihcIlRIUkVFLkZhY2VOb3JtYWxzSGVscGVyOiBvbmx5IFRIUkVFLkdlb21ldHJ5IGlzIHN1cHBvcnRlZC4gVXNlIFRIUkVFLlZlcnRleE5vcm1hbHNIZWxwZXIsIGluc3RlYWQuXCIpO2M9bmV3IFRIUkVFLkJ1ZmZlckdlb21ldHJ5O2I9bmV3IFRIUkVFLkZsb2F0MzJBdHRyaWJ1dGUoNipiLDMpO2MuYWRkQXR0cmlidXRlKFwicG9zaXRpb25cIixiKTtUSFJFRS5MaW5lU2VnbWVudHMuY2FsbCh0aGlzLGMsbmV3IFRIUkVFLkxpbmVCYXNpY01hdGVyaWFsKHtjb2xvcjphLGxpbmV3aWR0aDpkfSkpO3RoaXMubWF0cml4QXV0b1VwZGF0ZT1cbiExO3RoaXMudXBkYXRlKCl9O1RIUkVFLkZhY2VOb3JtYWxzSGVscGVyLnByb3RvdHlwZT1PYmplY3QuY3JlYXRlKFRIUkVFLkxpbmVTZWdtZW50cy5wcm90b3R5cGUpO1RIUkVFLkZhY2VOb3JtYWxzSGVscGVyLnByb3RvdHlwZS5jb25zdHJ1Y3Rvcj1USFJFRS5GYWNlTm9ybWFsc0hlbHBlcjtcblRIUkVFLkZhY2VOb3JtYWxzSGVscGVyLnByb3RvdHlwZS51cGRhdGU9ZnVuY3Rpb24oKXt2YXIgYT1uZXcgVEhSRUUuVmVjdG9yMyxiPW5ldyBUSFJFRS5WZWN0b3IzLGM9bmV3IFRIUkVFLk1hdHJpeDM7cmV0dXJuIGZ1bmN0aW9uKCl7dGhpcy5vYmplY3QudXBkYXRlTWF0cml4V29ybGQoITApO2MuZ2V0Tm9ybWFsTWF0cml4KHRoaXMub2JqZWN0Lm1hdHJpeFdvcmxkKTtmb3IodmFyIGQ9dGhpcy5vYmplY3QubWF0cml4V29ybGQsZT10aGlzLmdlb21ldHJ5LmF0dHJpYnV0ZXMucG9zaXRpb24sZj10aGlzLm9iamVjdC5nZW9tZXRyeSxnPWYudmVydGljZXMsZj1mLmZhY2VzLGg9MCxrPTAsbD1mLmxlbmd0aDtrPGw7aysrKXt2YXIgbT1mW2tdLHA9bS5ub3JtYWw7YS5jb3B5KGdbbS5hXSkuYWRkKGdbbS5iXSkuYWRkKGdbbS5jXSkuZGl2aWRlU2NhbGFyKDMpLmFwcGx5TWF0cml4NChkKTtiLmNvcHkocCkuYXBwbHlNYXRyaXgzKGMpLm5vcm1hbGl6ZSgpLm11bHRpcGx5U2NhbGFyKHRoaXMuc2l6ZSkuYWRkKGEpO1xuZS5zZXRYWVooaCxhLngsYS55LGEueik7aCs9MTtlLnNldFhZWihoLGIueCxiLnksYi56KTtoKz0xfWUubmVlZHNVcGRhdGU9ITA7cmV0dXJuIHRoaXN9fSgpO1xuVEhSRUUuR3JpZEhlbHBlcj1mdW5jdGlvbihhLGIsYyxkKXtiPWJ8fDE7Yz1uZXcgVEhSRUUuQ29sb3Iodm9pZCAwIT09Yz9jOjQ0NzM5MjQpO2Q9bmV3IFRIUkVFLkNvbG9yKHZvaWQgMCE9PWQ/ZDo4OTQ3ODQ4KTtmb3IodmFyIGU9Yi8yLGY9MiphL2IsZz1bXSxoPVtdLGs9MCxsPTAsbT0tYTtrPD1iO2srKyxtKz1mKXtnLnB1c2goLWEsMCxtLGEsMCxtKTtnLnB1c2gobSwwLC1hLG0sMCxhKTt2YXIgcD1rPT09ZT9jOmQ7cC50b0FycmF5KGgsbCk7bCs9MztwLnRvQXJyYXkoaCxsKTtsKz0zO3AudG9BcnJheShoLGwpO2wrPTM7cC50b0FycmF5KGgsbCk7bCs9M31hPW5ldyBUSFJFRS5CdWZmZXJHZW9tZXRyeTthLmFkZEF0dHJpYnV0ZShcInBvc2l0aW9uXCIsbmV3IFRIUkVFLkZsb2F0MzJBdHRyaWJ1dGUoZywzKSk7YS5hZGRBdHRyaWJ1dGUoXCJjb2xvclwiLG5ldyBUSFJFRS5GbG9hdDMyQXR0cmlidXRlKGgsMykpO2c9bmV3IFRIUkVFLkxpbmVCYXNpY01hdGVyaWFsKHt2ZXJ0ZXhDb2xvcnM6VEhSRUUuVmVydGV4Q29sb3JzfSk7XG5USFJFRS5MaW5lU2VnbWVudHMuY2FsbCh0aGlzLGEsZyl9O1RIUkVFLkdyaWRIZWxwZXIucHJvdG90eXBlPU9iamVjdC5jcmVhdGUoVEhSRUUuTGluZVNlZ21lbnRzLnByb3RvdHlwZSk7VEhSRUUuR3JpZEhlbHBlci5wcm90b3R5cGUuY29uc3RydWN0b3I9VEhSRUUuR3JpZEhlbHBlcjtUSFJFRS5HcmlkSGVscGVyLnByb3RvdHlwZS5zZXRDb2xvcnM9ZnVuY3Rpb24oKXtjb25zb2xlLmVycm9yKFwiVEhSRUUuR3JpZEhlbHBlcjogc2V0Q29sb3JzKCkgaGFzIGJlZW4gZGVwcmVjYXRlZCwgcGFzcyB0aGVtIGluIHRoZSBjb25zdHJ1Y3RvciBpbnN0ZWFkLlwiKX07XG5USFJFRS5IZW1pc3BoZXJlTGlnaHRIZWxwZXI9ZnVuY3Rpb24oYSxiKXtUSFJFRS5PYmplY3QzRC5jYWxsKHRoaXMpO3RoaXMubGlnaHQ9YTt0aGlzLmxpZ2h0LnVwZGF0ZU1hdHJpeFdvcmxkKCk7dGhpcy5tYXRyaXg9YS5tYXRyaXhXb3JsZDt0aGlzLm1hdHJpeEF1dG9VcGRhdGU9ITE7dGhpcy5jb2xvcnM9W25ldyBUSFJFRS5Db2xvcixuZXcgVEhSRUUuQ29sb3JdO3ZhciBjPW5ldyBUSFJFRS5TcGhlcmVHZW9tZXRyeShiLDQsMik7Yy5yb3RhdGVYKC1NYXRoLlBJLzIpO2Zvcih2YXIgZD0wOzg+ZDtkKyspYy5mYWNlc1tkXS5jb2xvcj10aGlzLmNvbG9yc1s0PmQ/MDoxXTtkPW5ldyBUSFJFRS5NZXNoQmFzaWNNYXRlcmlhbCh7dmVydGV4Q29sb3JzOlRIUkVFLkZhY2VDb2xvcnMsd2lyZWZyYW1lOiEwfSk7dGhpcy5saWdodFNwaGVyZT1uZXcgVEhSRUUuTWVzaChjLGQpO3RoaXMuYWRkKHRoaXMubGlnaHRTcGhlcmUpO3RoaXMudXBkYXRlKCl9O1xuVEhSRUUuSGVtaXNwaGVyZUxpZ2h0SGVscGVyLnByb3RvdHlwZT1PYmplY3QuY3JlYXRlKFRIUkVFLk9iamVjdDNELnByb3RvdHlwZSk7VEhSRUUuSGVtaXNwaGVyZUxpZ2h0SGVscGVyLnByb3RvdHlwZS5jb25zdHJ1Y3Rvcj1USFJFRS5IZW1pc3BoZXJlTGlnaHRIZWxwZXI7VEhSRUUuSGVtaXNwaGVyZUxpZ2h0SGVscGVyLnByb3RvdHlwZS5kaXNwb3NlPWZ1bmN0aW9uKCl7dGhpcy5saWdodFNwaGVyZS5nZW9tZXRyeS5kaXNwb3NlKCk7dGhpcy5saWdodFNwaGVyZS5tYXRlcmlhbC5kaXNwb3NlKCl9O1xuVEhSRUUuSGVtaXNwaGVyZUxpZ2h0SGVscGVyLnByb3RvdHlwZS51cGRhdGU9ZnVuY3Rpb24oKXt2YXIgYT1uZXcgVEhSRUUuVmVjdG9yMztyZXR1cm4gZnVuY3Rpb24oKXt0aGlzLmNvbG9yc1swXS5jb3B5KHRoaXMubGlnaHQuY29sb3IpLm11bHRpcGx5U2NhbGFyKHRoaXMubGlnaHQuaW50ZW5zaXR5KTt0aGlzLmNvbG9yc1sxXS5jb3B5KHRoaXMubGlnaHQuZ3JvdW5kQ29sb3IpLm11bHRpcGx5U2NhbGFyKHRoaXMubGlnaHQuaW50ZW5zaXR5KTt0aGlzLmxpZ2h0U3BoZXJlLmxvb2tBdChhLnNldEZyb21NYXRyaXhQb3NpdGlvbih0aGlzLmxpZ2h0Lm1hdHJpeFdvcmxkKS5uZWdhdGUoKSk7dGhpcy5saWdodFNwaGVyZS5nZW9tZXRyeS5jb2xvcnNOZWVkVXBkYXRlPSEwfX0oKTtcblRIUkVFLlBvaW50TGlnaHRIZWxwZXI9ZnVuY3Rpb24oYSxiKXt0aGlzLmxpZ2h0PWE7dGhpcy5saWdodC51cGRhdGVNYXRyaXhXb3JsZCgpO3ZhciBjPW5ldyBUSFJFRS5TcGhlcmVCdWZmZXJHZW9tZXRyeShiLDQsMiksZD1uZXcgVEhSRUUuTWVzaEJhc2ljTWF0ZXJpYWwoe3dpcmVmcmFtZTohMCxmb2c6ITF9KTtkLmNvbG9yLmNvcHkodGhpcy5saWdodC5jb2xvcikubXVsdGlwbHlTY2FsYXIodGhpcy5saWdodC5pbnRlbnNpdHkpO1RIUkVFLk1lc2guY2FsbCh0aGlzLGMsZCk7dGhpcy5tYXRyaXg9dGhpcy5saWdodC5tYXRyaXhXb3JsZDt0aGlzLm1hdHJpeEF1dG9VcGRhdGU9ITF9O1RIUkVFLlBvaW50TGlnaHRIZWxwZXIucHJvdG90eXBlPU9iamVjdC5jcmVhdGUoVEhSRUUuTWVzaC5wcm90b3R5cGUpO1RIUkVFLlBvaW50TGlnaHRIZWxwZXIucHJvdG90eXBlLmNvbnN0cnVjdG9yPVRIUkVFLlBvaW50TGlnaHRIZWxwZXI7XG5USFJFRS5Qb2ludExpZ2h0SGVscGVyLnByb3RvdHlwZS5kaXNwb3NlPWZ1bmN0aW9uKCl7dGhpcy5nZW9tZXRyeS5kaXNwb3NlKCk7dGhpcy5tYXRlcmlhbC5kaXNwb3NlKCl9O1RIUkVFLlBvaW50TGlnaHRIZWxwZXIucHJvdG90eXBlLnVwZGF0ZT1mdW5jdGlvbigpe3RoaXMubWF0ZXJpYWwuY29sb3IuY29weSh0aGlzLmxpZ2h0LmNvbG9yKS5tdWx0aXBseVNjYWxhcih0aGlzLmxpZ2h0LmludGVuc2l0eSl9O1xuVEhSRUUuU2tlbGV0b25IZWxwZXI9ZnVuY3Rpb24oYSl7dGhpcy5ib25lcz10aGlzLmdldEJvbmVMaXN0KGEpO2Zvcih2YXIgYj1uZXcgVEhSRUUuR2VvbWV0cnksYz0wO2M8dGhpcy5ib25lcy5sZW5ndGg7YysrKXRoaXMuYm9uZXNbY10ucGFyZW50IGluc3RhbmNlb2YgVEhSRUUuQm9uZSYmKGIudmVydGljZXMucHVzaChuZXcgVEhSRUUuVmVjdG9yMyksYi52ZXJ0aWNlcy5wdXNoKG5ldyBUSFJFRS5WZWN0b3IzKSxiLmNvbG9ycy5wdXNoKG5ldyBUSFJFRS5Db2xvcigwLDAsMSkpLGIuY29sb3JzLnB1c2gobmV3IFRIUkVFLkNvbG9yKDAsMSwwKSkpO2IuZHluYW1pYz0hMDtjPW5ldyBUSFJFRS5MaW5lQmFzaWNNYXRlcmlhbCh7dmVydGV4Q29sb3JzOlRIUkVFLlZlcnRleENvbG9ycyxkZXB0aFRlc3Q6ITEsZGVwdGhXcml0ZTohMSx0cmFuc3BhcmVudDohMH0pO1RIUkVFLkxpbmVTZWdtZW50cy5jYWxsKHRoaXMsYixjKTt0aGlzLnJvb3Q9YTt0aGlzLm1hdHJpeD1hLm1hdHJpeFdvcmxkO1xudGhpcy5tYXRyaXhBdXRvVXBkYXRlPSExO3RoaXMudXBkYXRlKCl9O1RIUkVFLlNrZWxldG9uSGVscGVyLnByb3RvdHlwZT1PYmplY3QuY3JlYXRlKFRIUkVFLkxpbmVTZWdtZW50cy5wcm90b3R5cGUpO1RIUkVFLlNrZWxldG9uSGVscGVyLnByb3RvdHlwZS5jb25zdHJ1Y3Rvcj1USFJFRS5Ta2VsZXRvbkhlbHBlcjtUSFJFRS5Ta2VsZXRvbkhlbHBlci5wcm90b3R5cGUuZ2V0Qm9uZUxpc3Q9ZnVuY3Rpb24oYSl7dmFyIGI9W107YSBpbnN0YW5jZW9mIFRIUkVFLkJvbmUmJmIucHVzaChhKTtmb3IodmFyIGM9MDtjPGEuY2hpbGRyZW4ubGVuZ3RoO2MrKyliLnB1c2guYXBwbHkoYix0aGlzLmdldEJvbmVMaXN0KGEuY2hpbGRyZW5bY10pKTtyZXR1cm4gYn07XG5USFJFRS5Ta2VsZXRvbkhlbHBlci5wcm90b3R5cGUudXBkYXRlPWZ1bmN0aW9uKCl7Zm9yKHZhciBhPXRoaXMuZ2VvbWV0cnksYj0obmV3IFRIUkVFLk1hdHJpeDQpLmdldEludmVyc2UodGhpcy5yb290Lm1hdHJpeFdvcmxkKSxjPW5ldyBUSFJFRS5NYXRyaXg0LGQ9MCxlPTA7ZTx0aGlzLmJvbmVzLmxlbmd0aDtlKyspe3ZhciBmPXRoaXMuYm9uZXNbZV07Zi5wYXJlbnQgaW5zdGFuY2VvZiBUSFJFRS5Cb25lJiYoYy5tdWx0aXBseU1hdHJpY2VzKGIsZi5tYXRyaXhXb3JsZCksYS52ZXJ0aWNlc1tkXS5zZXRGcm9tTWF0cml4UG9zaXRpb24oYyksYy5tdWx0aXBseU1hdHJpY2VzKGIsZi5wYXJlbnQubWF0cml4V29ybGQpLGEudmVydGljZXNbZCsxXS5zZXRGcm9tTWF0cml4UG9zaXRpb24oYyksZCs9Mil9YS52ZXJ0aWNlc05lZWRVcGRhdGU9ITA7YS5jb21wdXRlQm91bmRpbmdTcGhlcmUoKX07XG5USFJFRS5TcG90TGlnaHRIZWxwZXI9ZnVuY3Rpb24oYSl7VEhSRUUuT2JqZWN0M0QuY2FsbCh0aGlzKTt0aGlzLmxpZ2h0PWE7dGhpcy5saWdodC51cGRhdGVNYXRyaXhXb3JsZCgpO3RoaXMubWF0cml4PWEubWF0cml4V29ybGQ7dGhpcy5tYXRyaXhBdXRvVXBkYXRlPSExO2E9bmV3IFRIUkVFLkJ1ZmZlckdlb21ldHJ5O2Zvcih2YXIgYj1bMCwwLDAsMCwwLDEsMCwwLDAsMSwwLDEsMCwwLDAsLTEsMCwxLDAsMCwwLDAsMSwxLDAsMCwwLDAsLTEsMV0sYz0wLGQ9MTszMj5jO2MrKyxkKyspe3ZhciBlPWMvMzIqTWF0aC5QSSoyLGY9ZC8zMipNYXRoLlBJKjI7Yi5wdXNoKE1hdGguY29zKGUpLE1hdGguc2luKGUpLDEsTWF0aC5jb3MoZiksTWF0aC5zaW4oZiksMSl9YS5hZGRBdHRyaWJ1dGUoXCJwb3NpdGlvblwiLG5ldyBUSFJFRS5GbG9hdDMyQXR0cmlidXRlKGIsMykpO2I9bmV3IFRIUkVFLkxpbmVCYXNpY01hdGVyaWFsKHtmb2c6ITF9KTt0aGlzLmNvbmU9bmV3IFRIUkVFLkxpbmVTZWdtZW50cyhhLFxuYik7dGhpcy5hZGQodGhpcy5jb25lKTt0aGlzLnVwZGF0ZSgpfTtUSFJFRS5TcG90TGlnaHRIZWxwZXIucHJvdG90eXBlPU9iamVjdC5jcmVhdGUoVEhSRUUuT2JqZWN0M0QucHJvdG90eXBlKTtUSFJFRS5TcG90TGlnaHRIZWxwZXIucHJvdG90eXBlLmNvbnN0cnVjdG9yPVRIUkVFLlNwb3RMaWdodEhlbHBlcjtUSFJFRS5TcG90TGlnaHRIZWxwZXIucHJvdG90eXBlLmRpc3Bvc2U9ZnVuY3Rpb24oKXt0aGlzLmNvbmUuZ2VvbWV0cnkuZGlzcG9zZSgpO3RoaXMuY29uZS5tYXRlcmlhbC5kaXNwb3NlKCl9O1xuVEhSRUUuU3BvdExpZ2h0SGVscGVyLnByb3RvdHlwZS51cGRhdGU9ZnVuY3Rpb24oKXt2YXIgYT1uZXcgVEhSRUUuVmVjdG9yMyxiPW5ldyBUSFJFRS5WZWN0b3IzO3JldHVybiBmdW5jdGlvbigpe3ZhciBjPXRoaXMubGlnaHQuZGlzdGFuY2U/dGhpcy5saWdodC5kaXN0YW5jZToxRTMsZD1jKk1hdGgudGFuKHRoaXMubGlnaHQuYW5nbGUpO3RoaXMuY29uZS5zY2FsZS5zZXQoZCxkLGMpO2Euc2V0RnJvbU1hdHJpeFBvc2l0aW9uKHRoaXMubGlnaHQubWF0cml4V29ybGQpO2Iuc2V0RnJvbU1hdHJpeFBvc2l0aW9uKHRoaXMubGlnaHQudGFyZ2V0Lm1hdHJpeFdvcmxkKTt0aGlzLmNvbmUubG9va0F0KGIuc3ViKGEpKTt0aGlzLmNvbmUubWF0ZXJpYWwuY29sb3IuY29weSh0aGlzLmxpZ2h0LmNvbG9yKS5tdWx0aXBseVNjYWxhcih0aGlzLmxpZ2h0LmludGVuc2l0eSl9fSgpO1xuVEhSRUUuVmVydGV4Tm9ybWFsc0hlbHBlcj1mdW5jdGlvbihhLGIsYyxkKXt0aGlzLm9iamVjdD1hO3RoaXMuc2l6ZT12b2lkIDAhPT1iP2I6MTthPXZvaWQgMCE9PWM/YzoxNjcxMTY4MDtkPXZvaWQgMCE9PWQ/ZDoxO2I9MDtjPXRoaXMub2JqZWN0Lmdlb21ldHJ5O2MgaW5zdGFuY2VvZiBUSFJFRS5HZW9tZXRyeT9iPTMqYy5mYWNlcy5sZW5ndGg6YyBpbnN0YW5jZW9mIFRIUkVFLkJ1ZmZlckdlb21ldHJ5JiYoYj1jLmF0dHJpYnV0ZXMubm9ybWFsLmNvdW50KTtjPW5ldyBUSFJFRS5CdWZmZXJHZW9tZXRyeTtiPW5ldyBUSFJFRS5GbG9hdDMyQXR0cmlidXRlKDYqYiwzKTtjLmFkZEF0dHJpYnV0ZShcInBvc2l0aW9uXCIsYik7VEhSRUUuTGluZVNlZ21lbnRzLmNhbGwodGhpcyxjLG5ldyBUSFJFRS5MaW5lQmFzaWNNYXRlcmlhbCh7Y29sb3I6YSxsaW5ld2lkdGg6ZH0pKTt0aGlzLm1hdHJpeEF1dG9VcGRhdGU9ITE7dGhpcy51cGRhdGUoKX07XG5USFJFRS5WZXJ0ZXhOb3JtYWxzSGVscGVyLnByb3RvdHlwZT1PYmplY3QuY3JlYXRlKFRIUkVFLkxpbmVTZWdtZW50cy5wcm90b3R5cGUpO1RIUkVFLlZlcnRleE5vcm1hbHNIZWxwZXIucHJvdG90eXBlLmNvbnN0cnVjdG9yPVRIUkVFLlZlcnRleE5vcm1hbHNIZWxwZXI7XG5USFJFRS5WZXJ0ZXhOb3JtYWxzSGVscGVyLnByb3RvdHlwZS51cGRhdGU9ZnVuY3Rpb24oKXt2YXIgYT1uZXcgVEhSRUUuVmVjdG9yMyxiPW5ldyBUSFJFRS5WZWN0b3IzLGM9bmV3IFRIUkVFLk1hdHJpeDM7cmV0dXJuIGZ1bmN0aW9uKCl7dmFyIGQ9W1wiYVwiLFwiYlwiLFwiY1wiXTt0aGlzLm9iamVjdC51cGRhdGVNYXRyaXhXb3JsZCghMCk7Yy5nZXROb3JtYWxNYXRyaXgodGhpcy5vYmplY3QubWF0cml4V29ybGQpO3ZhciBlPXRoaXMub2JqZWN0Lm1hdHJpeFdvcmxkLGY9dGhpcy5nZW9tZXRyeS5hdHRyaWJ1dGVzLnBvc2l0aW9uLGc9dGhpcy5vYmplY3QuZ2VvbWV0cnk7aWYoZyBpbnN0YW5jZW9mIFRIUkVFLkdlb21ldHJ5KWZvcih2YXIgaD1nLnZlcnRpY2VzLGs9Zy5mYWNlcyxsPWc9MCxtPWsubGVuZ3RoO2w8bTtsKyspZm9yKHZhciBwPWtbbF0sbj0wLHE9cC52ZXJ0ZXhOb3JtYWxzLmxlbmd0aDtuPHE7bisrKXt2YXIgcj1wLnZlcnRleE5vcm1hbHNbbl07YS5jb3B5KGhbcFtkW25dXV0pLmFwcGx5TWF0cml4NChlKTtcbmIuY29weShyKS5hcHBseU1hdHJpeDMoYykubm9ybWFsaXplKCkubXVsdGlwbHlTY2FsYXIodGhpcy5zaXplKS5hZGQoYSk7Zi5zZXRYWVooZyxhLngsYS55LGEueik7Zys9MTtmLnNldFhZWihnLGIueCxiLnksYi56KTtnKz0xfWVsc2UgaWYoZyBpbnN0YW5jZW9mIFRIUkVFLkJ1ZmZlckdlb21ldHJ5KWZvcihkPWcuYXR0cmlidXRlcy5wb3NpdGlvbixoPWcuYXR0cmlidXRlcy5ub3JtYWwsbj1nPTAscT1kLmNvdW50O248cTtuKyspYS5zZXQoZC5nZXRYKG4pLGQuZ2V0WShuKSxkLmdldFoobikpLmFwcGx5TWF0cml4NChlKSxiLnNldChoLmdldFgobiksaC5nZXRZKG4pLGguZ2V0WihuKSksYi5hcHBseU1hdHJpeDMoYykubm9ybWFsaXplKCkubXVsdGlwbHlTY2FsYXIodGhpcy5zaXplKS5hZGQoYSksZi5zZXRYWVooZyxhLngsYS55LGEueiksZys9MSxmLnNldFhZWihnLGIueCxiLnksYi56KSxnKz0xO2YubmVlZHNVcGRhdGU9ITA7cmV0dXJuIHRoaXN9fSgpO1xuVEhSRUUuV2lyZWZyYW1lSGVscGVyPWZ1bmN0aW9uKGEsYil7dmFyIGM9dm9pZCAwIT09Yj9iOjE2Nzc3MjE1O1RIUkVFLkxpbmVTZWdtZW50cy5jYWxsKHRoaXMsbmV3IFRIUkVFLldpcmVmcmFtZUdlb21ldHJ5KGEuZ2VvbWV0cnkpLG5ldyBUSFJFRS5MaW5lQmFzaWNNYXRlcmlhbCh7Y29sb3I6Y30pKTt0aGlzLm1hdHJpeD1hLm1hdHJpeFdvcmxkO3RoaXMubWF0cml4QXV0b1VwZGF0ZT0hMX07VEhSRUUuV2lyZWZyYW1lSGVscGVyLnByb3RvdHlwZT1PYmplY3QuY3JlYXRlKFRIUkVFLkxpbmVTZWdtZW50cy5wcm90b3R5cGUpO1RIUkVFLldpcmVmcmFtZUhlbHBlci5wcm90b3R5cGUuY29uc3RydWN0b3I9VEhSRUUuV2lyZWZyYW1lSGVscGVyO1RIUkVFLkltbWVkaWF0ZVJlbmRlck9iamVjdD1mdW5jdGlvbihhKXtUSFJFRS5PYmplY3QzRC5jYWxsKHRoaXMpO3RoaXMubWF0ZXJpYWw9YTt0aGlzLnJlbmRlcj1mdW5jdGlvbihhKXt9fTtcblRIUkVFLkltbWVkaWF0ZVJlbmRlck9iamVjdC5wcm90b3R5cGU9T2JqZWN0LmNyZWF0ZShUSFJFRS5PYmplY3QzRC5wcm90b3R5cGUpO1RIUkVFLkltbWVkaWF0ZVJlbmRlck9iamVjdC5wcm90b3R5cGUuY29uc3RydWN0b3I9VEhSRUUuSW1tZWRpYXRlUmVuZGVyT2JqZWN0O1RIUkVFLk1vcnBoQmxlbmRNZXNoPWZ1bmN0aW9uKGEsYil7VEhSRUUuTWVzaC5jYWxsKHRoaXMsYSxiKTt0aGlzLmFuaW1hdGlvbnNNYXA9e307dGhpcy5hbmltYXRpb25zTGlzdD1bXTt2YXIgYz10aGlzLmdlb21ldHJ5Lm1vcnBoVGFyZ2V0cy5sZW5ndGg7dGhpcy5jcmVhdGVBbmltYXRpb24oXCJfX2RlZmF1bHRcIiwwLGMtMSxjLzEpO3RoaXMuc2V0QW5pbWF0aW9uV2VpZ2h0KFwiX19kZWZhdWx0XCIsMSl9O1RIUkVFLk1vcnBoQmxlbmRNZXNoLnByb3RvdHlwZT1PYmplY3QuY3JlYXRlKFRIUkVFLk1lc2gucHJvdG90eXBlKTtUSFJFRS5Nb3JwaEJsZW5kTWVzaC5wcm90b3R5cGUuY29uc3RydWN0b3I9VEhSRUUuTW9ycGhCbGVuZE1lc2g7XG5USFJFRS5Nb3JwaEJsZW5kTWVzaC5wcm90b3R5cGUuY3JlYXRlQW5pbWF0aW9uPWZ1bmN0aW9uKGEsYixjLGQpe2I9e3N0YXJ0OmIsZW5kOmMsbGVuZ3RoOmMtYisxLGZwczpkLGR1cmF0aW9uOihjLWIpL2QsbGFzdEZyYW1lOjAsY3VycmVudEZyYW1lOjAsYWN0aXZlOiExLHRpbWU6MCxkaXJlY3Rpb246MSx3ZWlnaHQ6MSxkaXJlY3Rpb25CYWNrd2FyZHM6ITEsbWlycm9yZWRMb29wOiExfTt0aGlzLmFuaW1hdGlvbnNNYXBbYV09Yjt0aGlzLmFuaW1hdGlvbnNMaXN0LnB1c2goYil9O1xuVEhSRUUuTW9ycGhCbGVuZE1lc2gucHJvdG90eXBlLmF1dG9DcmVhdGVBbmltYXRpb25zPWZ1bmN0aW9uKGEpe2Zvcih2YXIgYj0vKFthLXpdKylfPyhcXGQrKS9pLGMsZD17fSxlPXRoaXMuZ2VvbWV0cnksZj0wLGc9ZS5tb3JwaFRhcmdldHMubGVuZ3RoO2Y8ZztmKyspe3ZhciBoPWUubW9ycGhUYXJnZXRzW2ZdLm5hbWUubWF0Y2goYik7aWYoaCYmMTxoLmxlbmd0aCl7dmFyIGs9aFsxXTtkW2tdfHwoZFtrXT17c3RhcnQ6SW5maW5pdHksZW5kOi1JbmZpbml0eX0pO2g9ZFtrXTtmPGguc3RhcnQmJihoLnN0YXJ0PWYpO2Y+aC5lbmQmJihoLmVuZD1mKTtjfHwoYz1rKX19Zm9yKGsgaW4gZCloPWRba10sdGhpcy5jcmVhdGVBbmltYXRpb24oayxoLnN0YXJ0LGguZW5kLGEpO3RoaXMuZmlyc3RBbmltYXRpb249Y307XG5USFJFRS5Nb3JwaEJsZW5kTWVzaC5wcm90b3R5cGUuc2V0QW5pbWF0aW9uRGlyZWN0aW9uRm9yd2FyZD1mdW5jdGlvbihhKXtpZihhPXRoaXMuYW5pbWF0aW9uc01hcFthXSlhLmRpcmVjdGlvbj0xLGEuZGlyZWN0aW9uQmFja3dhcmRzPSExfTtUSFJFRS5Nb3JwaEJsZW5kTWVzaC5wcm90b3R5cGUuc2V0QW5pbWF0aW9uRGlyZWN0aW9uQmFja3dhcmQ9ZnVuY3Rpb24oYSl7aWYoYT10aGlzLmFuaW1hdGlvbnNNYXBbYV0pYS5kaXJlY3Rpb249LTEsYS5kaXJlY3Rpb25CYWNrd2FyZHM9ITB9O1RIUkVFLk1vcnBoQmxlbmRNZXNoLnByb3RvdHlwZS5zZXRBbmltYXRpb25GUFM9ZnVuY3Rpb24oYSxiKXt2YXIgYz10aGlzLmFuaW1hdGlvbnNNYXBbYV07YyYmKGMuZnBzPWIsYy5kdXJhdGlvbj0oYy5lbmQtYy5zdGFydCkvYy5mcHMpfTtcblRIUkVFLk1vcnBoQmxlbmRNZXNoLnByb3RvdHlwZS5zZXRBbmltYXRpb25EdXJhdGlvbj1mdW5jdGlvbihhLGIpe3ZhciBjPXRoaXMuYW5pbWF0aW9uc01hcFthXTtjJiYoYy5kdXJhdGlvbj1iLGMuZnBzPShjLmVuZC1jLnN0YXJ0KS9jLmR1cmF0aW9uKX07VEhSRUUuTW9ycGhCbGVuZE1lc2gucHJvdG90eXBlLnNldEFuaW1hdGlvbldlaWdodD1mdW5jdGlvbihhLGIpe3ZhciBjPXRoaXMuYW5pbWF0aW9uc01hcFthXTtjJiYoYy53ZWlnaHQ9Yil9O1RIUkVFLk1vcnBoQmxlbmRNZXNoLnByb3RvdHlwZS5zZXRBbmltYXRpb25UaW1lPWZ1bmN0aW9uKGEsYil7dmFyIGM9dGhpcy5hbmltYXRpb25zTWFwW2FdO2MmJihjLnRpbWU9Yil9O1RIUkVFLk1vcnBoQmxlbmRNZXNoLnByb3RvdHlwZS5nZXRBbmltYXRpb25UaW1lPWZ1bmN0aW9uKGEpe3ZhciBiPTA7aWYoYT10aGlzLmFuaW1hdGlvbnNNYXBbYV0pYj1hLnRpbWU7cmV0dXJuIGJ9O1xuVEhSRUUuTW9ycGhCbGVuZE1lc2gucHJvdG90eXBlLmdldEFuaW1hdGlvbkR1cmF0aW9uPWZ1bmN0aW9uKGEpe3ZhciBiPS0xO2lmKGE9dGhpcy5hbmltYXRpb25zTWFwW2FdKWI9YS5kdXJhdGlvbjtyZXR1cm4gYn07VEhSRUUuTW9ycGhCbGVuZE1lc2gucHJvdG90eXBlLnBsYXlBbmltYXRpb249ZnVuY3Rpb24oYSl7dmFyIGI9dGhpcy5hbmltYXRpb25zTWFwW2FdO2I/KGIudGltZT0wLGIuYWN0aXZlPSEwKTpjb25zb2xlLndhcm4oXCJUSFJFRS5Nb3JwaEJsZW5kTWVzaDogYW5pbWF0aW9uW1wiK2ErXCJdIHVuZGVmaW5lZCBpbiAucGxheUFuaW1hdGlvbigpXCIpfTtUSFJFRS5Nb3JwaEJsZW5kTWVzaC5wcm90b3R5cGUuc3RvcEFuaW1hdGlvbj1mdW5jdGlvbihhKXtpZihhPXRoaXMuYW5pbWF0aW9uc01hcFthXSlhLmFjdGl2ZT0hMX07XG5USFJFRS5Nb3JwaEJsZW5kTWVzaC5wcm90b3R5cGUudXBkYXRlPWZ1bmN0aW9uKGEpe2Zvcih2YXIgYj0wLGM9dGhpcy5hbmltYXRpb25zTGlzdC5sZW5ndGg7YjxjO2IrKyl7dmFyIGQ9dGhpcy5hbmltYXRpb25zTGlzdFtiXTtpZihkLmFjdGl2ZSl7dmFyIGU9ZC5kdXJhdGlvbi9kLmxlbmd0aDtkLnRpbWUrPWQuZGlyZWN0aW9uKmE7aWYoZC5taXJyb3JlZExvb3Ape2lmKGQudGltZT5kLmR1cmF0aW9ufHwwPmQudGltZSlkLmRpcmVjdGlvbio9LTEsZC50aW1lPmQuZHVyYXRpb24mJihkLnRpbWU9ZC5kdXJhdGlvbixkLmRpcmVjdGlvbkJhY2t3YXJkcz0hMCksMD5kLnRpbWUmJihkLnRpbWU9MCxkLmRpcmVjdGlvbkJhY2t3YXJkcz0hMSl9ZWxzZSBkLnRpbWUlPWQuZHVyYXRpb24sMD5kLnRpbWUmJihkLnRpbWUrPWQuZHVyYXRpb24pO3ZhciBmPWQuc3RhcnQrVEhSRUUuTWF0aC5jbGFtcChNYXRoLmZsb29yKGQudGltZS9lKSwwLGQubGVuZ3RoLTEpLGc9ZC53ZWlnaHQ7ZiE9PWQuY3VycmVudEZyYW1lJiZcbih0aGlzLm1vcnBoVGFyZ2V0SW5mbHVlbmNlc1tkLmxhc3RGcmFtZV09MCx0aGlzLm1vcnBoVGFyZ2V0SW5mbHVlbmNlc1tkLmN1cnJlbnRGcmFtZV09MSpnLHRoaXMubW9ycGhUYXJnZXRJbmZsdWVuY2VzW2ZdPTAsZC5sYXN0RnJhbWU9ZC5jdXJyZW50RnJhbWUsZC5jdXJyZW50RnJhbWU9Zik7ZT1kLnRpbWUlZS9lO2QuZGlyZWN0aW9uQmFja3dhcmRzJiYoZT0xLWUpO2QuY3VycmVudEZyYW1lIT09ZC5sYXN0RnJhbWU/KHRoaXMubW9ycGhUYXJnZXRJbmZsdWVuY2VzW2QuY3VycmVudEZyYW1lXT1lKmcsdGhpcy5tb3JwaFRhcmdldEluZmx1ZW5jZXNbZC5sYXN0RnJhbWVdPSgxLWUpKmcpOnRoaXMubW9ycGhUYXJnZXRJbmZsdWVuY2VzW2QuY3VycmVudEZyYW1lXT1nfX19O1xuIiwiLyoqXG4gKiBAYXV0aG9yIG1yZG9vYiAvIGh0dHA6Ly9tcmRvb2IuY29tL1xuICogQGF1dGhvciBzdXBlcmVnZ2JlcnQgLyBodHRwOi8vd3d3LnBhdWxicnVudC5jby51ay9cbiAqIEBhdXRob3IganVsaWFud2EgLyBodHRwczovL2dpdGh1Yi5jb20vanVsaWFud2FcbiAqL1xuXG5USFJFRS5SZW5kZXJhYmxlT2JqZWN0ID0gZnVuY3Rpb24gKCkge1xuXG5cdHRoaXMuaWQgPSAwO1xuXG5cdHRoaXMub2JqZWN0ID0gbnVsbDtcblx0dGhpcy56ID0gMDtcblx0dGhpcy5yZW5kZXJPcmRlciA9IDA7XG5cbn07XG5cbi8vXG5cblRIUkVFLlJlbmRlcmFibGVGYWNlID0gZnVuY3Rpb24gKCkge1xuXG5cdHRoaXMuaWQgPSAwO1xuXG5cdHRoaXMudjEgPSBuZXcgVEhSRUUuUmVuZGVyYWJsZVZlcnRleCgpO1xuXHR0aGlzLnYyID0gbmV3IFRIUkVFLlJlbmRlcmFibGVWZXJ0ZXgoKTtcblx0dGhpcy52MyA9IG5ldyBUSFJFRS5SZW5kZXJhYmxlVmVydGV4KCk7XG5cblx0dGhpcy5ub3JtYWxNb2RlbCA9IG5ldyBUSFJFRS5WZWN0b3IzKCk7XG5cblx0dGhpcy52ZXJ0ZXhOb3JtYWxzTW9kZWwgPSBbIG5ldyBUSFJFRS5WZWN0b3IzKCksIG5ldyBUSFJFRS5WZWN0b3IzKCksIG5ldyBUSFJFRS5WZWN0b3IzKCkgXTtcblx0dGhpcy52ZXJ0ZXhOb3JtYWxzTGVuZ3RoID0gMDtcblxuXHR0aGlzLmNvbG9yID0gbmV3IFRIUkVFLkNvbG9yKCk7XG5cdHRoaXMubWF0ZXJpYWwgPSBudWxsO1xuXHR0aGlzLnV2cyA9IFsgbmV3IFRIUkVFLlZlY3RvcjIoKSwgbmV3IFRIUkVFLlZlY3RvcjIoKSwgbmV3IFRIUkVFLlZlY3RvcjIoKSBdO1xuXG5cdHRoaXMueiA9IDA7XG5cdHRoaXMucmVuZGVyT3JkZXIgPSAwO1xuXG59O1xuXG4vL1xuXG5USFJFRS5SZW5kZXJhYmxlVmVydGV4ID0gZnVuY3Rpb24gKCkge1xuXG5cdHRoaXMucG9zaXRpb24gPSBuZXcgVEhSRUUuVmVjdG9yMygpO1xuXHR0aGlzLnBvc2l0aW9uV29ybGQgPSBuZXcgVEhSRUUuVmVjdG9yMygpO1xuXHR0aGlzLnBvc2l0aW9uU2NyZWVuID0gbmV3IFRIUkVFLlZlY3RvcjQoKTtcblxuXHR0aGlzLnZpc2libGUgPSB0cnVlO1xuXG59O1xuXG5USFJFRS5SZW5kZXJhYmxlVmVydGV4LnByb3RvdHlwZS5jb3B5ID0gZnVuY3Rpb24gKCB2ZXJ0ZXggKSB7XG5cblx0dGhpcy5wb3NpdGlvbldvcmxkLmNvcHkoIHZlcnRleC5wb3NpdGlvbldvcmxkICk7XG5cdHRoaXMucG9zaXRpb25TY3JlZW4uY29weSggdmVydGV4LnBvc2l0aW9uU2NyZWVuICk7XG5cbn07XG5cbi8vXG5cblRIUkVFLlJlbmRlcmFibGVMaW5lID0gZnVuY3Rpb24gKCkge1xuXG5cdHRoaXMuaWQgPSAwO1xuXG5cdHRoaXMudjEgPSBuZXcgVEhSRUUuUmVuZGVyYWJsZVZlcnRleCgpO1xuXHR0aGlzLnYyID0gbmV3IFRIUkVFLlJlbmRlcmFibGVWZXJ0ZXgoKTtcblxuXHR0aGlzLnZlcnRleENvbG9ycyA9IFsgbmV3IFRIUkVFLkNvbG9yKCksIG5ldyBUSFJFRS5Db2xvcigpIF07XG5cdHRoaXMubWF0ZXJpYWwgPSBudWxsO1xuXG5cdHRoaXMueiA9IDA7XG5cdHRoaXMucmVuZGVyT3JkZXIgPSAwO1xuXG59O1xuXG4vL1xuXG5USFJFRS5SZW5kZXJhYmxlU3ByaXRlID0gZnVuY3Rpb24gKCkge1xuXG5cdHRoaXMuaWQgPSAwO1xuXG5cdHRoaXMub2JqZWN0ID0gbnVsbDtcblxuXHR0aGlzLnggPSAwO1xuXHR0aGlzLnkgPSAwO1xuXHR0aGlzLnogPSAwO1xuXG5cdHRoaXMucm90YXRpb24gPSAwO1xuXHR0aGlzLnNjYWxlID0gbmV3IFRIUkVFLlZlY3RvcjIoKTtcblxuXHR0aGlzLm1hdGVyaWFsID0gbnVsbDtcblx0dGhpcy5yZW5kZXJPcmRlciA9IDA7XG5cbn07XG5cbi8vXG5cblRIUkVFLlByb2plY3RvciA9IGZ1bmN0aW9uICgpIHtcblxuXHR2YXIgX29iamVjdCwgX29iamVjdENvdW50LCBfb2JqZWN0UG9vbCA9IFtdLCBfb2JqZWN0UG9vbExlbmd0aCA9IDAsXG5cdF92ZXJ0ZXgsIF92ZXJ0ZXhDb3VudCwgX3ZlcnRleFBvb2wgPSBbXSwgX3ZlcnRleFBvb2xMZW5ndGggPSAwLFxuXHRfZmFjZSwgX2ZhY2VDb3VudCwgX2ZhY2VQb29sID0gW10sIF9mYWNlUG9vbExlbmd0aCA9IDAsXG5cdF9saW5lLCBfbGluZUNvdW50LCBfbGluZVBvb2wgPSBbXSwgX2xpbmVQb29sTGVuZ3RoID0gMCxcblx0X3Nwcml0ZSwgX3Nwcml0ZUNvdW50LCBfc3ByaXRlUG9vbCA9IFtdLCBfc3ByaXRlUG9vbExlbmd0aCA9IDAsXG5cblx0X3JlbmRlckRhdGEgPSB7IG9iamVjdHM6IFtdLCBsaWdodHM6IFtdLCBlbGVtZW50czogW10gfSxcblxuXHRfdmVjdG9yMyA9IG5ldyBUSFJFRS5WZWN0b3IzKCksXG5cdF92ZWN0b3I0ID0gbmV3IFRIUkVFLlZlY3RvcjQoKSxcblxuXHRfY2xpcEJveCA9IG5ldyBUSFJFRS5Cb3gzKCBuZXcgVEhSRUUuVmVjdG9yMyggLSAxLCAtIDEsIC0gMSApLCBuZXcgVEhSRUUuVmVjdG9yMyggMSwgMSwgMSApICksXG5cdF9ib3VuZGluZ0JveCA9IG5ldyBUSFJFRS5Cb3gzKCksXG5cdF9wb2ludHMzID0gbmV3IEFycmF5KCAzICksXG5cdF9wb2ludHM0ID0gbmV3IEFycmF5KCA0ICksXG5cblx0X3ZpZXdNYXRyaXggPSBuZXcgVEhSRUUuTWF0cml4NCgpLFxuXHRfdmlld1Byb2plY3Rpb25NYXRyaXggPSBuZXcgVEhSRUUuTWF0cml4NCgpLFxuXG5cdF9tb2RlbE1hdHJpeCxcblx0X21vZGVsVmlld1Byb2plY3Rpb25NYXRyaXggPSBuZXcgVEhSRUUuTWF0cml4NCgpLFxuXG5cdF9ub3JtYWxNYXRyaXggPSBuZXcgVEhSRUUuTWF0cml4MygpLFxuXG5cdF9mcnVzdHVtID0gbmV3IFRIUkVFLkZydXN0dW0oKSxcblxuXHRfY2xpcHBlZFZlcnRleDFQb3NpdGlvblNjcmVlbiA9IG5ldyBUSFJFRS5WZWN0b3I0KCksXG5cdF9jbGlwcGVkVmVydGV4MlBvc2l0aW9uU2NyZWVuID0gbmV3IFRIUkVFLlZlY3RvcjQoKTtcblxuXHQvL1xuXG5cdHRoaXMucHJvamVjdFZlY3RvciA9IGZ1bmN0aW9uICggdmVjdG9yLCBjYW1lcmEgKSB7XG5cblx0XHRjb25zb2xlLndhcm4oICdUSFJFRS5Qcm9qZWN0b3I6IC5wcm9qZWN0VmVjdG9yKCkgaXMgbm93IHZlY3Rvci5wcm9qZWN0KCkuJyApO1xuXHRcdHZlY3Rvci5wcm9qZWN0KCBjYW1lcmEgKTtcblxuXHR9O1xuXG5cdHRoaXMudW5wcm9qZWN0VmVjdG9yID0gZnVuY3Rpb24gKCB2ZWN0b3IsIGNhbWVyYSApIHtcblxuXHRcdGNvbnNvbGUud2FybiggJ1RIUkVFLlByb2plY3RvcjogLnVucHJvamVjdFZlY3RvcigpIGlzIG5vdyB2ZWN0b3IudW5wcm9qZWN0KCkuJyApO1xuXHRcdHZlY3Rvci51bnByb2plY3QoIGNhbWVyYSApO1xuXG5cdH07XG5cblx0dGhpcy5waWNraW5nUmF5ID0gZnVuY3Rpb24gKCB2ZWN0b3IsIGNhbWVyYSApIHtcblxuXHRcdGNvbnNvbGUuZXJyb3IoICdUSFJFRS5Qcm9qZWN0b3I6IC5waWNraW5nUmF5KCkgaXMgbm93IHJheWNhc3Rlci5zZXRGcm9tQ2FtZXJhKCkuJyApO1xuXG5cdH07XG5cblx0Ly9cblxuXHR2YXIgUmVuZGVyTGlzdCA9IGZ1bmN0aW9uICgpIHtcblxuXHRcdHZhciBub3JtYWxzID0gW107XG5cdFx0dmFyIHV2cyA9IFtdO1xuXG5cdFx0dmFyIG9iamVjdCA9IG51bGw7XG5cdFx0dmFyIG1hdGVyaWFsID0gbnVsbDtcblxuXHRcdHZhciBub3JtYWxNYXRyaXggPSBuZXcgVEhSRUUuTWF0cml4MygpO1xuXG5cdFx0ZnVuY3Rpb24gc2V0T2JqZWN0KCB2YWx1ZSApIHtcblxuXHRcdFx0b2JqZWN0ID0gdmFsdWU7XG5cdFx0XHRtYXRlcmlhbCA9IG9iamVjdC5tYXRlcmlhbDtcblxuXHRcdFx0bm9ybWFsTWF0cml4LmdldE5vcm1hbE1hdHJpeCggb2JqZWN0Lm1hdHJpeFdvcmxkICk7XG5cblx0XHRcdG5vcm1hbHMubGVuZ3RoID0gMDtcblx0XHRcdHV2cy5sZW5ndGggPSAwO1xuXG5cdFx0fVxuXG5cdFx0ZnVuY3Rpb24gcHJvamVjdFZlcnRleCggdmVydGV4ICkge1xuXG5cdFx0XHR2YXIgcG9zaXRpb24gPSB2ZXJ0ZXgucG9zaXRpb247XG5cdFx0XHR2YXIgcG9zaXRpb25Xb3JsZCA9IHZlcnRleC5wb3NpdGlvbldvcmxkO1xuXHRcdFx0dmFyIHBvc2l0aW9uU2NyZWVuID0gdmVydGV4LnBvc2l0aW9uU2NyZWVuO1xuXG5cdFx0XHRwb3NpdGlvbldvcmxkLmNvcHkoIHBvc2l0aW9uICkuYXBwbHlNYXRyaXg0KCBfbW9kZWxNYXRyaXggKTtcblx0XHRcdHBvc2l0aW9uU2NyZWVuLmNvcHkoIHBvc2l0aW9uV29ybGQgKS5hcHBseU1hdHJpeDQoIF92aWV3UHJvamVjdGlvbk1hdHJpeCApO1xuXG5cdFx0XHR2YXIgaW52VyA9IDEgLyBwb3NpdGlvblNjcmVlbi53O1xuXG5cdFx0XHRwb3NpdGlvblNjcmVlbi54ICo9IGludlc7XG5cdFx0XHRwb3NpdGlvblNjcmVlbi55ICo9IGludlc7XG5cdFx0XHRwb3NpdGlvblNjcmVlbi56ICo9IGludlc7XG5cblx0XHRcdHZlcnRleC52aXNpYmxlID0gcG9zaXRpb25TY3JlZW4ueCA+PSAtIDEgJiYgcG9zaXRpb25TY3JlZW4ueCA8PSAxICYmXG5cdFx0XHRcdFx0IHBvc2l0aW9uU2NyZWVuLnkgPj0gLSAxICYmIHBvc2l0aW9uU2NyZWVuLnkgPD0gMSAmJlxuXHRcdFx0XHRcdCBwb3NpdGlvblNjcmVlbi56ID49IC0gMSAmJiBwb3NpdGlvblNjcmVlbi56IDw9IDE7XG5cblx0XHR9XG5cblx0XHRmdW5jdGlvbiBwdXNoVmVydGV4KCB4LCB5LCB6ICkge1xuXG5cdFx0XHRfdmVydGV4ID0gZ2V0TmV4dFZlcnRleEluUG9vbCgpO1xuXHRcdFx0X3ZlcnRleC5wb3NpdGlvbi5zZXQoIHgsIHksIHogKTtcblxuXHRcdFx0cHJvamVjdFZlcnRleCggX3ZlcnRleCApO1xuXG5cdFx0fVxuXG5cdFx0ZnVuY3Rpb24gcHVzaE5vcm1hbCggeCwgeSwgeiApIHtcblxuXHRcdFx0bm9ybWFscy5wdXNoKCB4LCB5LCB6ICk7XG5cblx0XHR9XG5cblx0XHRmdW5jdGlvbiBwdXNoVXYoIHgsIHkgKSB7XG5cblx0XHRcdHV2cy5wdXNoKCB4LCB5ICk7XG5cblx0XHR9XG5cblx0XHRmdW5jdGlvbiBjaGVja1RyaWFuZ2xlVmlzaWJpbGl0eSggdjEsIHYyLCB2MyApIHtcblxuXHRcdFx0aWYgKCB2MS52aXNpYmxlID09PSB0cnVlIHx8IHYyLnZpc2libGUgPT09IHRydWUgfHwgdjMudmlzaWJsZSA9PT0gdHJ1ZSApIHJldHVybiB0cnVlO1xuXG5cdFx0XHRfcG9pbnRzM1sgMCBdID0gdjEucG9zaXRpb25TY3JlZW47XG5cdFx0XHRfcG9pbnRzM1sgMSBdID0gdjIucG9zaXRpb25TY3JlZW47XG5cdFx0XHRfcG9pbnRzM1sgMiBdID0gdjMucG9zaXRpb25TY3JlZW47XG5cblx0XHRcdHJldHVybiBfY2xpcEJveC5pbnRlcnNlY3RzQm94KCBfYm91bmRpbmdCb3guc2V0RnJvbVBvaW50cyggX3BvaW50czMgKSApO1xuXG5cdFx0fVxuXG5cdFx0ZnVuY3Rpb24gY2hlY2tCYWNrZmFjZUN1bGxpbmcoIHYxLCB2MiwgdjMgKSB7XG5cblx0XHRcdHJldHVybiAoICggdjMucG9zaXRpb25TY3JlZW4ueCAtIHYxLnBvc2l0aW9uU2NyZWVuLnggKSAqXG5cdFx0XHRcdCAgICAoIHYyLnBvc2l0aW9uU2NyZWVuLnkgLSB2MS5wb3NpdGlvblNjcmVlbi55ICkgLVxuXHRcdFx0XHQgICAgKCB2My5wb3NpdGlvblNjcmVlbi55IC0gdjEucG9zaXRpb25TY3JlZW4ueSApICpcblx0XHRcdFx0ICAgICggdjIucG9zaXRpb25TY3JlZW4ueCAtIHYxLnBvc2l0aW9uU2NyZWVuLnggKSApIDwgMDtcblxuXHRcdH1cblxuXHRcdGZ1bmN0aW9uIHB1c2hMaW5lKCBhLCBiICkge1xuXG5cdFx0XHR2YXIgdjEgPSBfdmVydGV4UG9vbFsgYSBdO1xuXHRcdFx0dmFyIHYyID0gX3ZlcnRleFBvb2xbIGIgXTtcblxuXHRcdFx0X2xpbmUgPSBnZXROZXh0TGluZUluUG9vbCgpO1xuXG5cdFx0XHRfbGluZS5pZCA9IG9iamVjdC5pZDtcblx0XHRcdF9saW5lLnYxLmNvcHkoIHYxICk7XG5cdFx0XHRfbGluZS52Mi5jb3B5KCB2MiApO1xuXHRcdFx0X2xpbmUueiA9ICggdjEucG9zaXRpb25TY3JlZW4ueiArIHYyLnBvc2l0aW9uU2NyZWVuLnogKSAvIDI7XG5cdFx0XHRfbGluZS5yZW5kZXJPcmRlciA9IG9iamVjdC5yZW5kZXJPcmRlcjtcblxuXHRcdFx0X2xpbmUubWF0ZXJpYWwgPSBvYmplY3QubWF0ZXJpYWw7XG5cblx0XHRcdF9yZW5kZXJEYXRhLmVsZW1lbnRzLnB1c2goIF9saW5lICk7XG5cblx0XHR9XG5cblx0XHRmdW5jdGlvbiBwdXNoVHJpYW5nbGUoIGEsIGIsIGMgKSB7XG5cblx0XHRcdHZhciB2MSA9IF92ZXJ0ZXhQb29sWyBhIF07XG5cdFx0XHR2YXIgdjIgPSBfdmVydGV4UG9vbFsgYiBdO1xuXHRcdFx0dmFyIHYzID0gX3ZlcnRleFBvb2xbIGMgXTtcblxuXHRcdFx0aWYgKCBjaGVja1RyaWFuZ2xlVmlzaWJpbGl0eSggdjEsIHYyLCB2MyApID09PSBmYWxzZSApIHJldHVybjtcblxuXHRcdFx0aWYgKCBtYXRlcmlhbC5zaWRlID09PSBUSFJFRS5Eb3VibGVTaWRlIHx8IGNoZWNrQmFja2ZhY2VDdWxsaW5nKCB2MSwgdjIsIHYzICkgPT09IHRydWUgKSB7XG5cblx0XHRcdFx0X2ZhY2UgPSBnZXROZXh0RmFjZUluUG9vbCgpO1xuXG5cdFx0XHRcdF9mYWNlLmlkID0gb2JqZWN0LmlkO1xuXHRcdFx0XHRfZmFjZS52MS5jb3B5KCB2MSApO1xuXHRcdFx0XHRfZmFjZS52Mi5jb3B5KCB2MiApO1xuXHRcdFx0XHRfZmFjZS52My5jb3B5KCB2MyApO1xuXHRcdFx0XHRfZmFjZS56ID0gKCB2MS5wb3NpdGlvblNjcmVlbi56ICsgdjIucG9zaXRpb25TY3JlZW4ueiArIHYzLnBvc2l0aW9uU2NyZWVuLnogKSAvIDM7XG5cdFx0XHRcdF9mYWNlLnJlbmRlck9yZGVyID0gb2JqZWN0LnJlbmRlck9yZGVyO1xuXG5cdFx0XHRcdC8vIHVzZSBmaXJzdCB2ZXJ0ZXggbm9ybWFsIGFzIGZhY2Ugbm9ybWFsXG5cblx0XHRcdFx0X2ZhY2Uubm9ybWFsTW9kZWwuZnJvbUFycmF5KCBub3JtYWxzLCBhICogMyApO1xuXHRcdFx0XHRfZmFjZS5ub3JtYWxNb2RlbC5hcHBseU1hdHJpeDMoIG5vcm1hbE1hdHJpeCApLm5vcm1hbGl6ZSgpO1xuXG5cdFx0XHRcdGZvciAoIHZhciBpID0gMDsgaSA8IDM7IGkgKysgKSB7XG5cblx0XHRcdFx0XHR2YXIgbm9ybWFsID0gX2ZhY2UudmVydGV4Tm9ybWFsc01vZGVsWyBpIF07XG5cdFx0XHRcdFx0bm9ybWFsLmZyb21BcnJheSggbm9ybWFscywgYXJndW1lbnRzWyBpIF0gKiAzICk7XG5cdFx0XHRcdFx0bm9ybWFsLmFwcGx5TWF0cml4Myggbm9ybWFsTWF0cml4ICkubm9ybWFsaXplKCk7XG5cblx0XHRcdFx0XHR2YXIgdXYgPSBfZmFjZS51dnNbIGkgXTtcblx0XHRcdFx0XHR1di5mcm9tQXJyYXkoIHV2cywgYXJndW1lbnRzWyBpIF0gKiAyICk7XG5cblx0XHRcdFx0fVxuXG5cdFx0XHRcdF9mYWNlLnZlcnRleE5vcm1hbHNMZW5ndGggPSAzO1xuXG5cdFx0XHRcdF9mYWNlLm1hdGVyaWFsID0gb2JqZWN0Lm1hdGVyaWFsO1xuXG5cdFx0XHRcdF9yZW5kZXJEYXRhLmVsZW1lbnRzLnB1c2goIF9mYWNlICk7XG5cblx0XHRcdH1cblxuXHRcdH1cblxuXHRcdHJldHVybiB7XG5cdFx0XHRzZXRPYmplY3Q6IHNldE9iamVjdCxcblx0XHRcdHByb2plY3RWZXJ0ZXg6IHByb2plY3RWZXJ0ZXgsXG5cdFx0XHRjaGVja1RyaWFuZ2xlVmlzaWJpbGl0eTogY2hlY2tUcmlhbmdsZVZpc2liaWxpdHksXG5cdFx0XHRjaGVja0JhY2tmYWNlQ3VsbGluZzogY2hlY2tCYWNrZmFjZUN1bGxpbmcsXG5cdFx0XHRwdXNoVmVydGV4OiBwdXNoVmVydGV4LFxuXHRcdFx0cHVzaE5vcm1hbDogcHVzaE5vcm1hbCxcblx0XHRcdHB1c2hVdjogcHVzaFV2LFxuXHRcdFx0cHVzaExpbmU6IHB1c2hMaW5lLFxuXHRcdFx0cHVzaFRyaWFuZ2xlOiBwdXNoVHJpYW5nbGVcblx0XHR9XG5cblx0fTtcblxuXHR2YXIgcmVuZGVyTGlzdCA9IG5ldyBSZW5kZXJMaXN0KCk7XG5cblx0dGhpcy5wcm9qZWN0U2NlbmUgPSBmdW5jdGlvbiAoIHNjZW5lLCBjYW1lcmEsIHNvcnRPYmplY3RzLCBzb3J0RWxlbWVudHMgKSB7XG5cblx0XHRfZmFjZUNvdW50ID0gMDtcblx0XHRfbGluZUNvdW50ID0gMDtcblx0XHRfc3ByaXRlQ291bnQgPSAwO1xuXG5cdFx0X3JlbmRlckRhdGEuZWxlbWVudHMubGVuZ3RoID0gMDtcblxuXHRcdGlmICggc2NlbmUuYXV0b1VwZGF0ZSA9PT0gdHJ1ZSApIHNjZW5lLnVwZGF0ZU1hdHJpeFdvcmxkKCk7XG5cdFx0aWYgKCBjYW1lcmEucGFyZW50ID09PSBudWxsICkgY2FtZXJhLnVwZGF0ZU1hdHJpeFdvcmxkKCk7XG5cblx0XHRfdmlld01hdHJpeC5jb3B5KCBjYW1lcmEubWF0cml4V29ybGRJbnZlcnNlLmdldEludmVyc2UoIGNhbWVyYS5tYXRyaXhXb3JsZCApICk7XG5cdFx0X3ZpZXdQcm9qZWN0aW9uTWF0cml4Lm11bHRpcGx5TWF0cmljZXMoIGNhbWVyYS5wcm9qZWN0aW9uTWF0cml4LCBfdmlld01hdHJpeCApO1xuXG5cdFx0X2ZydXN0dW0uc2V0RnJvbU1hdHJpeCggX3ZpZXdQcm9qZWN0aW9uTWF0cml4ICk7XG5cblx0XHQvL1xuXG5cdFx0X29iamVjdENvdW50ID0gMDtcblxuXHRcdF9yZW5kZXJEYXRhLm9iamVjdHMubGVuZ3RoID0gMDtcblx0XHRfcmVuZGVyRGF0YS5saWdodHMubGVuZ3RoID0gMDtcblxuXHRcdGZ1bmN0aW9uIGFkZE9iamVjdCggb2JqZWN0ICkge1xuXG5cdFx0XHRfb2JqZWN0ID0gZ2V0TmV4dE9iamVjdEluUG9vbCgpO1xuXHRcdFx0X29iamVjdC5pZCA9IG9iamVjdC5pZDtcblx0XHRcdF9vYmplY3Qub2JqZWN0ID0gb2JqZWN0O1xuXG5cdFx0XHRfdmVjdG9yMy5zZXRGcm9tTWF0cml4UG9zaXRpb24oIG9iamVjdC5tYXRyaXhXb3JsZCApO1xuXHRcdFx0X3ZlY3RvcjMuYXBwbHlQcm9qZWN0aW9uKCBfdmlld1Byb2plY3Rpb25NYXRyaXggKTtcblx0XHRcdF9vYmplY3QueiA9IF92ZWN0b3IzLno7XG5cdFx0XHRfb2JqZWN0LnJlbmRlck9yZGVyID0gb2JqZWN0LnJlbmRlck9yZGVyO1xuXG5cdFx0XHRfcmVuZGVyRGF0YS5vYmplY3RzLnB1c2goIF9vYmplY3QgKTtcblxuXHRcdH1cblxuXHRcdHNjZW5lLnRyYXZlcnNlVmlzaWJsZSggZnVuY3Rpb24gKCBvYmplY3QgKSB7XG5cblx0XHRcdGlmICggb2JqZWN0IGluc3RhbmNlb2YgVEhSRUUuTGlnaHQgKSB7XG5cblx0XHRcdFx0X3JlbmRlckRhdGEubGlnaHRzLnB1c2goIG9iamVjdCApO1xuXG5cdFx0XHR9IGVsc2UgaWYgKCBvYmplY3QgaW5zdGFuY2VvZiBUSFJFRS5NZXNoIHx8IG9iamVjdCBpbnN0YW5jZW9mIFRIUkVFLkxpbmUgKSB7XG5cblx0XHRcdFx0aWYgKCBvYmplY3QubWF0ZXJpYWwudmlzaWJsZSA9PT0gZmFsc2UgKSByZXR1cm47XG5cdFx0XHRcdGlmICggb2JqZWN0LmZydXN0dW1DdWxsZWQgPT09IHRydWUgJiYgX2ZydXN0dW0uaW50ZXJzZWN0c09iamVjdCggb2JqZWN0ICkgPT09IGZhbHNlICkgcmV0dXJuO1xuXG5cdFx0XHRcdGFkZE9iamVjdCggb2JqZWN0ICk7XG5cblx0XHRcdH0gZWxzZSBpZiAoIG9iamVjdCBpbnN0YW5jZW9mIFRIUkVFLlNwcml0ZSApIHtcblxuXHRcdFx0XHRpZiAoIG9iamVjdC5tYXRlcmlhbC52aXNpYmxlID09PSBmYWxzZSApIHJldHVybjtcblx0XHRcdFx0aWYgKCBvYmplY3QuZnJ1c3R1bUN1bGxlZCA9PT0gdHJ1ZSAmJiBfZnJ1c3R1bS5pbnRlcnNlY3RzU3ByaXRlKCBvYmplY3QgKSA9PT0gZmFsc2UgKSByZXR1cm47XG5cblx0XHRcdFx0YWRkT2JqZWN0KCBvYmplY3QgKTtcblxuXHRcdFx0fVxuXG5cdFx0fSApO1xuXG5cdFx0aWYgKCBzb3J0T2JqZWN0cyA9PT0gdHJ1ZSApIHtcblxuXHRcdFx0X3JlbmRlckRhdGEub2JqZWN0cy5zb3J0KCBwYWludGVyU29ydCApO1xuXG5cdFx0fVxuXG5cdFx0Ly9cblxuXHRcdGZvciAoIHZhciBvID0gMCwgb2wgPSBfcmVuZGVyRGF0YS5vYmplY3RzLmxlbmd0aDsgbyA8IG9sOyBvICsrICkge1xuXG5cdFx0XHR2YXIgb2JqZWN0ID0gX3JlbmRlckRhdGEub2JqZWN0c1sgbyBdLm9iamVjdDtcblx0XHRcdHZhciBnZW9tZXRyeSA9IG9iamVjdC5nZW9tZXRyeTtcblxuXHRcdFx0cmVuZGVyTGlzdC5zZXRPYmplY3QoIG9iamVjdCApO1xuXG5cdFx0XHRfbW9kZWxNYXRyaXggPSBvYmplY3QubWF0cml4V29ybGQ7XG5cblx0XHRcdF92ZXJ0ZXhDb3VudCA9IDA7XG5cblx0XHRcdGlmICggb2JqZWN0IGluc3RhbmNlb2YgVEhSRUUuTWVzaCApIHtcblxuXHRcdFx0XHRpZiAoIGdlb21ldHJ5IGluc3RhbmNlb2YgVEhSRUUuQnVmZmVyR2VvbWV0cnkgKSB7XG5cblx0XHRcdFx0XHR2YXIgYXR0cmlidXRlcyA9IGdlb21ldHJ5LmF0dHJpYnV0ZXM7XG5cdFx0XHRcdFx0dmFyIGdyb3VwcyA9IGdlb21ldHJ5Lmdyb3VwcztcblxuXHRcdFx0XHRcdGlmICggYXR0cmlidXRlcy5wb3NpdGlvbiA9PT0gdW5kZWZpbmVkICkgY29udGludWU7XG5cblx0XHRcdFx0XHR2YXIgcG9zaXRpb25zID0gYXR0cmlidXRlcy5wb3NpdGlvbi5hcnJheTtcblxuXHRcdFx0XHRcdGZvciAoIHZhciBpID0gMCwgbCA9IHBvc2l0aW9ucy5sZW5ndGg7IGkgPCBsOyBpICs9IDMgKSB7XG5cblx0XHRcdFx0XHRcdHJlbmRlckxpc3QucHVzaFZlcnRleCggcG9zaXRpb25zWyBpIF0sIHBvc2l0aW9uc1sgaSArIDEgXSwgcG9zaXRpb25zWyBpICsgMiBdICk7XG5cblx0XHRcdFx0XHR9XG5cblx0XHRcdFx0XHRpZiAoIGF0dHJpYnV0ZXMubm9ybWFsICE9PSB1bmRlZmluZWQgKSB7XG5cblx0XHRcdFx0XHRcdHZhciBub3JtYWxzID0gYXR0cmlidXRlcy5ub3JtYWwuYXJyYXk7XG5cblx0XHRcdFx0XHRcdGZvciAoIHZhciBpID0gMCwgbCA9IG5vcm1hbHMubGVuZ3RoOyBpIDwgbDsgaSArPSAzICkge1xuXG5cdFx0XHRcdFx0XHRcdHJlbmRlckxpc3QucHVzaE5vcm1hbCggbm9ybWFsc1sgaSBdLCBub3JtYWxzWyBpICsgMSBdLCBub3JtYWxzWyBpICsgMiBdICk7XG5cblx0XHRcdFx0XHRcdH1cblxuXHRcdFx0XHRcdH1cblxuXHRcdFx0XHRcdGlmICggYXR0cmlidXRlcy51diAhPT0gdW5kZWZpbmVkICkge1xuXG5cdFx0XHRcdFx0XHR2YXIgdXZzID0gYXR0cmlidXRlcy51di5hcnJheTtcblxuXHRcdFx0XHRcdFx0Zm9yICggdmFyIGkgPSAwLCBsID0gdXZzLmxlbmd0aDsgaSA8IGw7IGkgKz0gMiApIHtcblxuXHRcdFx0XHRcdFx0XHRyZW5kZXJMaXN0LnB1c2hVdiggdXZzWyBpIF0sIHV2c1sgaSArIDEgXSApO1xuXG5cdFx0XHRcdFx0XHR9XG5cblx0XHRcdFx0XHR9XG5cblx0XHRcdFx0XHRpZiAoIGdlb21ldHJ5LmluZGV4ICE9PSBudWxsICkge1xuXG5cdFx0XHRcdFx0XHR2YXIgaW5kaWNlcyA9IGdlb21ldHJ5LmluZGV4LmFycmF5O1xuXG5cdFx0XHRcdFx0XHRpZiAoIGdyb3Vwcy5sZW5ndGggPiAwICkge1xuXG5cdFx0XHRcdFx0XHRcdGZvciAoIHZhciBvID0gMDsgbyA8IGdyb3Vwcy5sZW5ndGg7IG8gKysgKSB7XG5cblx0XHRcdFx0XHRcdFx0XHR2YXIgZ3JvdXAgPSBncm91cHNbIG8gXTtcblxuXHRcdFx0XHRcdFx0XHRcdGZvciAoIHZhciBpID0gZ3JvdXAuc3RhcnQsIGwgPSBncm91cC5zdGFydCArIGdyb3VwLmNvdW50OyBpIDwgbDsgaSArPSAzICkge1xuXG5cdFx0XHRcdFx0XHRcdFx0XHRyZW5kZXJMaXN0LnB1c2hUcmlhbmdsZSggaW5kaWNlc1sgaSBdLCBpbmRpY2VzWyBpICsgMSBdLCBpbmRpY2VzWyBpICsgMiBdICk7XG5cblx0XHRcdFx0XHRcdFx0XHR9XG5cblx0XHRcdFx0XHRcdFx0fVxuXG5cdFx0XHRcdFx0XHR9IGVsc2Uge1xuXG5cdFx0XHRcdFx0XHRcdGZvciAoIHZhciBpID0gMCwgbCA9IGluZGljZXMubGVuZ3RoOyBpIDwgbDsgaSArPSAzICkge1xuXG5cdFx0XHRcdFx0XHRcdFx0cmVuZGVyTGlzdC5wdXNoVHJpYW5nbGUoIGluZGljZXNbIGkgXSwgaW5kaWNlc1sgaSArIDEgXSwgaW5kaWNlc1sgaSArIDIgXSApO1xuXG5cdFx0XHRcdFx0XHRcdH1cblxuXHRcdFx0XHRcdFx0fVxuXG5cdFx0XHRcdFx0fSBlbHNlIHtcblxuXHRcdFx0XHRcdFx0Zm9yICggdmFyIGkgPSAwLCBsID0gcG9zaXRpb25zLmxlbmd0aCAvIDM7IGkgPCBsOyBpICs9IDMgKSB7XG5cblx0XHRcdFx0XHRcdFx0cmVuZGVyTGlzdC5wdXNoVHJpYW5nbGUoIGksIGkgKyAxLCBpICsgMiApO1xuXG5cdFx0XHRcdFx0XHR9XG5cblx0XHRcdFx0XHR9XG5cblx0XHRcdFx0fSBlbHNlIGlmICggZ2VvbWV0cnkgaW5zdGFuY2VvZiBUSFJFRS5HZW9tZXRyeSApIHtcblxuXHRcdFx0XHRcdHZhciB2ZXJ0aWNlcyA9IGdlb21ldHJ5LnZlcnRpY2VzO1xuXHRcdFx0XHRcdHZhciBmYWNlcyA9IGdlb21ldHJ5LmZhY2VzO1xuXHRcdFx0XHRcdHZhciBmYWNlVmVydGV4VXZzID0gZ2VvbWV0cnkuZmFjZVZlcnRleFV2c1sgMCBdO1xuXG5cdFx0XHRcdFx0X25vcm1hbE1hdHJpeC5nZXROb3JtYWxNYXRyaXgoIF9tb2RlbE1hdHJpeCApO1xuXG5cdFx0XHRcdFx0dmFyIG1hdGVyaWFsID0gb2JqZWN0Lm1hdGVyaWFsO1xuXG5cdFx0XHRcdFx0dmFyIGlzRmFjZU1hdGVyaWFsID0gbWF0ZXJpYWwgaW5zdGFuY2VvZiBUSFJFRS5NdWx0aU1hdGVyaWFsO1xuXHRcdFx0XHRcdHZhciBvYmplY3RNYXRlcmlhbHMgPSBpc0ZhY2VNYXRlcmlhbCA9PT0gdHJ1ZSA/IG9iamVjdC5tYXRlcmlhbCA6IG51bGw7XG5cblx0XHRcdFx0XHRmb3IgKCB2YXIgdiA9IDAsIHZsID0gdmVydGljZXMubGVuZ3RoOyB2IDwgdmw7IHYgKysgKSB7XG5cblx0XHRcdFx0XHRcdHZhciB2ZXJ0ZXggPSB2ZXJ0aWNlc1sgdiBdO1xuXG5cdFx0XHRcdFx0XHRfdmVjdG9yMy5jb3B5KCB2ZXJ0ZXggKTtcblxuXHRcdFx0XHRcdFx0aWYgKCBtYXRlcmlhbC5tb3JwaFRhcmdldHMgPT09IHRydWUgKSB7XG5cblx0XHRcdFx0XHRcdFx0dmFyIG1vcnBoVGFyZ2V0cyA9IGdlb21ldHJ5Lm1vcnBoVGFyZ2V0cztcblx0XHRcdFx0XHRcdFx0dmFyIG1vcnBoSW5mbHVlbmNlcyA9IG9iamVjdC5tb3JwaFRhcmdldEluZmx1ZW5jZXM7XG5cblx0XHRcdFx0XHRcdFx0Zm9yICggdmFyIHQgPSAwLCB0bCA9IG1vcnBoVGFyZ2V0cy5sZW5ndGg7IHQgPCB0bDsgdCArKyApIHtcblxuXHRcdFx0XHRcdFx0XHRcdHZhciBpbmZsdWVuY2UgPSBtb3JwaEluZmx1ZW5jZXNbIHQgXTtcblxuXHRcdFx0XHRcdFx0XHRcdGlmICggaW5mbHVlbmNlID09PSAwICkgY29udGludWU7XG5cblx0XHRcdFx0XHRcdFx0XHR2YXIgdGFyZ2V0ID0gbW9ycGhUYXJnZXRzWyB0IF07XG5cdFx0XHRcdFx0XHRcdFx0dmFyIHRhcmdldFZlcnRleCA9IHRhcmdldC52ZXJ0aWNlc1sgdiBdO1xuXG5cdFx0XHRcdFx0XHRcdFx0X3ZlY3RvcjMueCArPSAoIHRhcmdldFZlcnRleC54IC0gdmVydGV4LnggKSAqIGluZmx1ZW5jZTtcblx0XHRcdFx0XHRcdFx0XHRfdmVjdG9yMy55ICs9ICggdGFyZ2V0VmVydGV4LnkgLSB2ZXJ0ZXgueSApICogaW5mbHVlbmNlO1xuXHRcdFx0XHRcdFx0XHRcdF92ZWN0b3IzLnogKz0gKCB0YXJnZXRWZXJ0ZXgueiAtIHZlcnRleC56ICkgKiBpbmZsdWVuY2U7XG5cblx0XHRcdFx0XHRcdFx0fVxuXG5cdFx0XHRcdFx0XHR9XG5cblx0XHRcdFx0XHRcdHJlbmRlckxpc3QucHVzaFZlcnRleCggX3ZlY3RvcjMueCwgX3ZlY3RvcjMueSwgX3ZlY3RvcjMueiApO1xuXG5cdFx0XHRcdFx0fVxuXG5cdFx0XHRcdFx0Zm9yICggdmFyIGYgPSAwLCBmbCA9IGZhY2VzLmxlbmd0aDsgZiA8IGZsOyBmICsrICkge1xuXG5cdFx0XHRcdFx0XHR2YXIgZmFjZSA9IGZhY2VzWyBmIF07XG5cblx0XHRcdFx0XHRcdG1hdGVyaWFsID0gaXNGYWNlTWF0ZXJpYWwgPT09IHRydWVcblx0XHRcdFx0XHRcdFx0ID8gb2JqZWN0TWF0ZXJpYWxzLm1hdGVyaWFsc1sgZmFjZS5tYXRlcmlhbEluZGV4IF1cblx0XHRcdFx0XHRcdFx0IDogb2JqZWN0Lm1hdGVyaWFsO1xuXG5cdFx0XHRcdFx0XHRpZiAoIG1hdGVyaWFsID09PSB1bmRlZmluZWQgKSBjb250aW51ZTtcblxuXHRcdFx0XHRcdFx0dmFyIHNpZGUgPSBtYXRlcmlhbC5zaWRlO1xuXG5cdFx0XHRcdFx0XHR2YXIgdjEgPSBfdmVydGV4UG9vbFsgZmFjZS5hIF07XG5cdFx0XHRcdFx0XHR2YXIgdjIgPSBfdmVydGV4UG9vbFsgZmFjZS5iIF07XG5cdFx0XHRcdFx0XHR2YXIgdjMgPSBfdmVydGV4UG9vbFsgZmFjZS5jIF07XG5cblx0XHRcdFx0XHRcdGlmICggcmVuZGVyTGlzdC5jaGVja1RyaWFuZ2xlVmlzaWJpbGl0eSggdjEsIHYyLCB2MyApID09PSBmYWxzZSApIGNvbnRpbnVlO1xuXG5cdFx0XHRcdFx0XHR2YXIgdmlzaWJsZSA9IHJlbmRlckxpc3QuY2hlY2tCYWNrZmFjZUN1bGxpbmcoIHYxLCB2MiwgdjMgKTtcblxuXHRcdFx0XHRcdFx0aWYgKCBzaWRlICE9PSBUSFJFRS5Eb3VibGVTaWRlICkge1xuXG5cdFx0XHRcdFx0XHRcdGlmICggc2lkZSA9PT0gVEhSRUUuRnJvbnRTaWRlICYmIHZpc2libGUgPT09IGZhbHNlICkgY29udGludWU7XG5cdFx0XHRcdFx0XHRcdGlmICggc2lkZSA9PT0gVEhSRUUuQmFja1NpZGUgJiYgdmlzaWJsZSA9PT0gdHJ1ZSApIGNvbnRpbnVlO1xuXG5cdFx0XHRcdFx0XHR9XG5cblx0XHRcdFx0XHRcdF9mYWNlID0gZ2V0TmV4dEZhY2VJblBvb2woKTtcblxuXHRcdFx0XHRcdFx0X2ZhY2UuaWQgPSBvYmplY3QuaWQ7XG5cdFx0XHRcdFx0XHRfZmFjZS52MS5jb3B5KCB2MSApO1xuXHRcdFx0XHRcdFx0X2ZhY2UudjIuY29weSggdjIgKTtcblx0XHRcdFx0XHRcdF9mYWNlLnYzLmNvcHkoIHYzICk7XG5cblx0XHRcdFx0XHRcdF9mYWNlLm5vcm1hbE1vZGVsLmNvcHkoIGZhY2Uubm9ybWFsICk7XG5cblx0XHRcdFx0XHRcdGlmICggdmlzaWJsZSA9PT0gZmFsc2UgJiYgKCBzaWRlID09PSBUSFJFRS5CYWNrU2lkZSB8fCBzaWRlID09PSBUSFJFRS5Eb3VibGVTaWRlICkgKSB7XG5cblx0XHRcdFx0XHRcdFx0X2ZhY2Uubm9ybWFsTW9kZWwubmVnYXRlKCk7XG5cblx0XHRcdFx0XHRcdH1cblxuXHRcdFx0XHRcdFx0X2ZhY2Uubm9ybWFsTW9kZWwuYXBwbHlNYXRyaXgzKCBfbm9ybWFsTWF0cml4ICkubm9ybWFsaXplKCk7XG5cblx0XHRcdFx0XHRcdHZhciBmYWNlVmVydGV4Tm9ybWFscyA9IGZhY2UudmVydGV4Tm9ybWFscztcblxuXHRcdFx0XHRcdFx0Zm9yICggdmFyIG4gPSAwLCBubCA9IE1hdGgubWluKCBmYWNlVmVydGV4Tm9ybWFscy5sZW5ndGgsIDMgKTsgbiA8IG5sOyBuICsrICkge1xuXG5cdFx0XHRcdFx0XHRcdHZhciBub3JtYWxNb2RlbCA9IF9mYWNlLnZlcnRleE5vcm1hbHNNb2RlbFsgbiBdO1xuXHRcdFx0XHRcdFx0XHRub3JtYWxNb2RlbC5jb3B5KCBmYWNlVmVydGV4Tm9ybWFsc1sgbiBdICk7XG5cblx0XHRcdFx0XHRcdFx0aWYgKCB2aXNpYmxlID09PSBmYWxzZSAmJiAoIHNpZGUgPT09IFRIUkVFLkJhY2tTaWRlIHx8IHNpZGUgPT09IFRIUkVFLkRvdWJsZVNpZGUgKSApIHtcblxuXHRcdFx0XHRcdFx0XHRcdG5vcm1hbE1vZGVsLm5lZ2F0ZSgpO1xuXG5cdFx0XHRcdFx0XHRcdH1cblxuXHRcdFx0XHRcdFx0XHRub3JtYWxNb2RlbC5hcHBseU1hdHJpeDMoIF9ub3JtYWxNYXRyaXggKS5ub3JtYWxpemUoKTtcblxuXHRcdFx0XHRcdFx0fVxuXG5cdFx0XHRcdFx0XHRfZmFjZS52ZXJ0ZXhOb3JtYWxzTGVuZ3RoID0gZmFjZVZlcnRleE5vcm1hbHMubGVuZ3RoO1xuXG5cdFx0XHRcdFx0XHR2YXIgdmVydGV4VXZzID0gZmFjZVZlcnRleFV2c1sgZiBdO1xuXG5cdFx0XHRcdFx0XHRpZiAoIHZlcnRleFV2cyAhPT0gdW5kZWZpbmVkICkge1xuXG5cdFx0XHRcdFx0XHRcdGZvciAoIHZhciB1ID0gMDsgdSA8IDM7IHUgKysgKSB7XG5cblx0XHRcdFx0XHRcdFx0XHRfZmFjZS51dnNbIHUgXS5jb3B5KCB2ZXJ0ZXhVdnNbIHUgXSApO1xuXG5cdFx0XHRcdFx0XHRcdH1cblxuXHRcdFx0XHRcdFx0fVxuXG5cdFx0XHRcdFx0XHRfZmFjZS5jb2xvciA9IGZhY2UuY29sb3I7XG5cdFx0XHRcdFx0XHRfZmFjZS5tYXRlcmlhbCA9IG1hdGVyaWFsO1xuXG5cdFx0XHRcdFx0XHRfZmFjZS56ID0gKCB2MS5wb3NpdGlvblNjcmVlbi56ICsgdjIucG9zaXRpb25TY3JlZW4ueiArIHYzLnBvc2l0aW9uU2NyZWVuLnogKSAvIDM7XG5cdFx0XHRcdFx0XHRfZmFjZS5yZW5kZXJPcmRlciA9IG9iamVjdC5yZW5kZXJPcmRlcjtcblxuXHRcdFx0XHRcdFx0X3JlbmRlckRhdGEuZWxlbWVudHMucHVzaCggX2ZhY2UgKTtcblxuXHRcdFx0XHRcdH1cblxuXHRcdFx0XHR9XG5cblx0XHRcdH0gZWxzZSBpZiAoIG9iamVjdCBpbnN0YW5jZW9mIFRIUkVFLkxpbmUgKSB7XG5cblx0XHRcdFx0aWYgKCBnZW9tZXRyeSBpbnN0YW5jZW9mIFRIUkVFLkJ1ZmZlckdlb21ldHJ5ICkge1xuXG5cdFx0XHRcdFx0dmFyIGF0dHJpYnV0ZXMgPSBnZW9tZXRyeS5hdHRyaWJ1dGVzO1xuXG5cdFx0XHRcdFx0aWYgKCBhdHRyaWJ1dGVzLnBvc2l0aW9uICE9PSB1bmRlZmluZWQgKSB7XG5cblx0XHRcdFx0XHRcdHZhciBwb3NpdGlvbnMgPSBhdHRyaWJ1dGVzLnBvc2l0aW9uLmFycmF5O1xuXG5cdFx0XHRcdFx0XHRmb3IgKCB2YXIgaSA9IDAsIGwgPSBwb3NpdGlvbnMubGVuZ3RoOyBpIDwgbDsgaSArPSAzICkge1xuXG5cdFx0XHRcdFx0XHRcdHJlbmRlckxpc3QucHVzaFZlcnRleCggcG9zaXRpb25zWyBpIF0sIHBvc2l0aW9uc1sgaSArIDEgXSwgcG9zaXRpb25zWyBpICsgMiBdICk7XG5cblx0XHRcdFx0XHRcdH1cblxuXHRcdFx0XHRcdFx0aWYgKCBnZW9tZXRyeS5pbmRleCAhPT0gbnVsbCApIHtcblxuXHRcdFx0XHRcdFx0XHR2YXIgaW5kaWNlcyA9IGdlb21ldHJ5LmluZGV4LmFycmF5O1xuXG5cdFx0XHRcdFx0XHRcdGZvciAoIHZhciBpID0gMCwgbCA9IGluZGljZXMubGVuZ3RoOyBpIDwgbDsgaSArPSAyICkge1xuXG5cdFx0XHRcdFx0XHRcdFx0cmVuZGVyTGlzdC5wdXNoTGluZSggaW5kaWNlc1sgaSBdLCBpbmRpY2VzWyBpICsgMSBdICk7XG5cblx0XHRcdFx0XHRcdFx0fVxuXG5cdFx0XHRcdFx0XHR9IGVsc2Uge1xuXG5cdFx0XHRcdFx0XHRcdHZhciBzdGVwID0gb2JqZWN0IGluc3RhbmNlb2YgVEhSRUUuTGluZVNlZ21lbnRzID8gMiA6IDE7XG5cblx0XHRcdFx0XHRcdFx0Zm9yICggdmFyIGkgPSAwLCBsID0gKCBwb3NpdGlvbnMubGVuZ3RoIC8gMyApIC0gMTsgaSA8IGw7IGkgKz0gc3RlcCApIHtcblxuXHRcdFx0XHRcdFx0XHRcdHJlbmRlckxpc3QucHVzaExpbmUoIGksIGkgKyAxICk7XG5cblx0XHRcdFx0XHRcdFx0fVxuXG5cdFx0XHRcdFx0XHR9XG5cblx0XHRcdFx0XHR9XG5cblx0XHRcdFx0fSBlbHNlIGlmICggZ2VvbWV0cnkgaW5zdGFuY2VvZiBUSFJFRS5HZW9tZXRyeSApIHtcblxuXHRcdFx0XHRcdF9tb2RlbFZpZXdQcm9qZWN0aW9uTWF0cml4Lm11bHRpcGx5TWF0cmljZXMoIF92aWV3UHJvamVjdGlvbk1hdHJpeCwgX21vZGVsTWF0cml4ICk7XG5cblx0XHRcdFx0XHR2YXIgdmVydGljZXMgPSBvYmplY3QuZ2VvbWV0cnkudmVydGljZXM7XG5cblx0XHRcdFx0XHRpZiAoIHZlcnRpY2VzLmxlbmd0aCA9PT0gMCApIGNvbnRpbnVlO1xuXG5cdFx0XHRcdFx0djEgPSBnZXROZXh0VmVydGV4SW5Qb29sKCk7XG5cdFx0XHRcdFx0djEucG9zaXRpb25TY3JlZW4uY29weSggdmVydGljZXNbIDAgXSApLmFwcGx5TWF0cml4NCggX21vZGVsVmlld1Byb2plY3Rpb25NYXRyaXggKTtcblxuXHRcdFx0XHRcdHZhciBzdGVwID0gb2JqZWN0IGluc3RhbmNlb2YgVEhSRUUuTGluZVNlZ21lbnRzID8gMiA6IDE7XG5cblx0XHRcdFx0XHRmb3IgKCB2YXIgdiA9IDEsIHZsID0gdmVydGljZXMubGVuZ3RoOyB2IDwgdmw7IHYgKysgKSB7XG5cblx0XHRcdFx0XHRcdHYxID0gZ2V0TmV4dFZlcnRleEluUG9vbCgpO1xuXHRcdFx0XHRcdFx0djEucG9zaXRpb25TY3JlZW4uY29weSggdmVydGljZXNbIHYgXSApLmFwcGx5TWF0cml4NCggX21vZGVsVmlld1Byb2plY3Rpb25NYXRyaXggKTtcblxuXHRcdFx0XHRcdFx0aWYgKCAoIHYgKyAxICkgJSBzdGVwID4gMCApIGNvbnRpbnVlO1xuXG5cdFx0XHRcdFx0XHR2MiA9IF92ZXJ0ZXhQb29sWyBfdmVydGV4Q291bnQgLSAyIF07XG5cblx0XHRcdFx0XHRcdF9jbGlwcGVkVmVydGV4MVBvc2l0aW9uU2NyZWVuLmNvcHkoIHYxLnBvc2l0aW9uU2NyZWVuICk7XG5cdFx0XHRcdFx0XHRfY2xpcHBlZFZlcnRleDJQb3NpdGlvblNjcmVlbi5jb3B5KCB2Mi5wb3NpdGlvblNjcmVlbiApO1xuXG5cdFx0XHRcdFx0XHRpZiAoIGNsaXBMaW5lKCBfY2xpcHBlZFZlcnRleDFQb3NpdGlvblNjcmVlbiwgX2NsaXBwZWRWZXJ0ZXgyUG9zaXRpb25TY3JlZW4gKSA9PT0gdHJ1ZSApIHtcblxuXHRcdFx0XHRcdFx0XHQvLyBQZXJmb3JtIHRoZSBwZXJzcGVjdGl2ZSBkaXZpZGVcblx0XHRcdFx0XHRcdFx0X2NsaXBwZWRWZXJ0ZXgxUG9zaXRpb25TY3JlZW4ubXVsdGlwbHlTY2FsYXIoIDEgLyBfY2xpcHBlZFZlcnRleDFQb3NpdGlvblNjcmVlbi53ICk7XG5cdFx0XHRcdFx0XHRcdF9jbGlwcGVkVmVydGV4MlBvc2l0aW9uU2NyZWVuLm11bHRpcGx5U2NhbGFyKCAxIC8gX2NsaXBwZWRWZXJ0ZXgyUG9zaXRpb25TY3JlZW4udyApO1xuXG5cdFx0XHRcdFx0XHRcdF9saW5lID0gZ2V0TmV4dExpbmVJblBvb2woKTtcblxuXHRcdFx0XHRcdFx0XHRfbGluZS5pZCA9IG9iamVjdC5pZDtcblx0XHRcdFx0XHRcdFx0X2xpbmUudjEucG9zaXRpb25TY3JlZW4uY29weSggX2NsaXBwZWRWZXJ0ZXgxUG9zaXRpb25TY3JlZW4gKTtcblx0XHRcdFx0XHRcdFx0X2xpbmUudjIucG9zaXRpb25TY3JlZW4uY29weSggX2NsaXBwZWRWZXJ0ZXgyUG9zaXRpb25TY3JlZW4gKTtcblxuXHRcdFx0XHRcdFx0XHRfbGluZS56ID0gTWF0aC5tYXgoIF9jbGlwcGVkVmVydGV4MVBvc2l0aW9uU2NyZWVuLnosIF9jbGlwcGVkVmVydGV4MlBvc2l0aW9uU2NyZWVuLnogKTtcblx0XHRcdFx0XHRcdFx0X2xpbmUucmVuZGVyT3JkZXIgPSBvYmplY3QucmVuZGVyT3JkZXI7XG5cblx0XHRcdFx0XHRcdFx0X2xpbmUubWF0ZXJpYWwgPSBvYmplY3QubWF0ZXJpYWw7XG5cblx0XHRcdFx0XHRcdFx0aWYgKCBvYmplY3QubWF0ZXJpYWwudmVydGV4Q29sb3JzID09PSBUSFJFRS5WZXJ0ZXhDb2xvcnMgKSB7XG5cblx0XHRcdFx0XHRcdFx0XHRfbGluZS52ZXJ0ZXhDb2xvcnNbIDAgXS5jb3B5KCBvYmplY3QuZ2VvbWV0cnkuY29sb3JzWyB2IF0gKTtcblx0XHRcdFx0XHRcdFx0XHRfbGluZS52ZXJ0ZXhDb2xvcnNbIDEgXS5jb3B5KCBvYmplY3QuZ2VvbWV0cnkuY29sb3JzWyB2IC0gMSBdICk7XG5cblx0XHRcdFx0XHRcdFx0fVxuXG5cdFx0XHRcdFx0XHRcdF9yZW5kZXJEYXRhLmVsZW1lbnRzLnB1c2goIF9saW5lICk7XG5cblx0XHRcdFx0XHRcdH1cblxuXHRcdFx0XHRcdH1cblxuXHRcdFx0XHR9XG5cblx0XHRcdH0gZWxzZSBpZiAoIG9iamVjdCBpbnN0YW5jZW9mIFRIUkVFLlNwcml0ZSApIHtcblxuXHRcdFx0XHRfdmVjdG9yNC5zZXQoIF9tb2RlbE1hdHJpeC5lbGVtZW50c1sgMTIgXSwgX21vZGVsTWF0cml4LmVsZW1lbnRzWyAxMyBdLCBfbW9kZWxNYXRyaXguZWxlbWVudHNbIDE0IF0sIDEgKTtcblx0XHRcdFx0X3ZlY3RvcjQuYXBwbHlNYXRyaXg0KCBfdmlld1Byb2plY3Rpb25NYXRyaXggKTtcblxuXHRcdFx0XHR2YXIgaW52VyA9IDEgLyBfdmVjdG9yNC53O1xuXG5cdFx0XHRcdF92ZWN0b3I0LnogKj0gaW52VztcblxuXHRcdFx0XHRpZiAoIF92ZWN0b3I0LnogPj0gLSAxICYmIF92ZWN0b3I0LnogPD0gMSApIHtcblxuXHRcdFx0XHRcdF9zcHJpdGUgPSBnZXROZXh0U3ByaXRlSW5Qb29sKCk7XG5cdFx0XHRcdFx0X3Nwcml0ZS5pZCA9IG9iamVjdC5pZDtcblx0XHRcdFx0XHRfc3ByaXRlLnggPSBfdmVjdG9yNC54ICogaW52Vztcblx0XHRcdFx0XHRfc3ByaXRlLnkgPSBfdmVjdG9yNC55ICogaW52Vztcblx0XHRcdFx0XHRfc3ByaXRlLnogPSBfdmVjdG9yNC56O1xuXHRcdFx0XHRcdF9zcHJpdGUucmVuZGVyT3JkZXIgPSBvYmplY3QucmVuZGVyT3JkZXI7XG5cdFx0XHRcdFx0X3Nwcml0ZS5vYmplY3QgPSBvYmplY3Q7XG5cblx0XHRcdFx0XHRfc3ByaXRlLnJvdGF0aW9uID0gb2JqZWN0LnJvdGF0aW9uO1xuXG5cdFx0XHRcdFx0X3Nwcml0ZS5zY2FsZS54ID0gb2JqZWN0LnNjYWxlLnggKiBNYXRoLmFicyggX3Nwcml0ZS54IC0gKCBfdmVjdG9yNC54ICsgY2FtZXJhLnByb2plY3Rpb25NYXRyaXguZWxlbWVudHNbIDAgXSApIC8gKCBfdmVjdG9yNC53ICsgY2FtZXJhLnByb2plY3Rpb25NYXRyaXguZWxlbWVudHNbIDEyIF0gKSApO1xuXHRcdFx0XHRcdF9zcHJpdGUuc2NhbGUueSA9IG9iamVjdC5zY2FsZS55ICogTWF0aC5hYnMoIF9zcHJpdGUueSAtICggX3ZlY3RvcjQueSArIGNhbWVyYS5wcm9qZWN0aW9uTWF0cml4LmVsZW1lbnRzWyA1IF0gKSAvICggX3ZlY3RvcjQudyArIGNhbWVyYS5wcm9qZWN0aW9uTWF0cml4LmVsZW1lbnRzWyAxMyBdICkgKTtcblxuXHRcdFx0XHRcdF9zcHJpdGUubWF0ZXJpYWwgPSBvYmplY3QubWF0ZXJpYWw7XG5cblx0XHRcdFx0XHRfcmVuZGVyRGF0YS5lbGVtZW50cy5wdXNoKCBfc3ByaXRlICk7XG5cblx0XHRcdFx0fVxuXG5cdFx0XHR9XG5cblx0XHR9XG5cblx0XHRpZiAoIHNvcnRFbGVtZW50cyA9PT0gdHJ1ZSApIHtcblxuXHRcdFx0X3JlbmRlckRhdGEuZWxlbWVudHMuc29ydCggcGFpbnRlclNvcnQgKTtcblxuXHRcdH1cblxuXHRcdHJldHVybiBfcmVuZGVyRGF0YTtcblxuXHR9O1xuXG5cdC8vIFBvb2xzXG5cblx0ZnVuY3Rpb24gZ2V0TmV4dE9iamVjdEluUG9vbCgpIHtcblxuXHRcdGlmICggX29iamVjdENvdW50ID09PSBfb2JqZWN0UG9vbExlbmd0aCApIHtcblxuXHRcdFx0dmFyIG9iamVjdCA9IG5ldyBUSFJFRS5SZW5kZXJhYmxlT2JqZWN0KCk7XG5cdFx0XHRfb2JqZWN0UG9vbC5wdXNoKCBvYmplY3QgKTtcblx0XHRcdF9vYmplY3RQb29sTGVuZ3RoICsrO1xuXHRcdFx0X29iamVjdENvdW50ICsrO1xuXHRcdFx0cmV0dXJuIG9iamVjdDtcblxuXHRcdH1cblxuXHRcdHJldHVybiBfb2JqZWN0UG9vbFsgX29iamVjdENvdW50ICsrIF07XG5cblx0fVxuXG5cdGZ1bmN0aW9uIGdldE5leHRWZXJ0ZXhJblBvb2woKSB7XG5cblx0XHRpZiAoIF92ZXJ0ZXhDb3VudCA9PT0gX3ZlcnRleFBvb2xMZW5ndGggKSB7XG5cblx0XHRcdHZhciB2ZXJ0ZXggPSBuZXcgVEhSRUUuUmVuZGVyYWJsZVZlcnRleCgpO1xuXHRcdFx0X3ZlcnRleFBvb2wucHVzaCggdmVydGV4ICk7XG5cdFx0XHRfdmVydGV4UG9vbExlbmd0aCArKztcblx0XHRcdF92ZXJ0ZXhDb3VudCArKztcblx0XHRcdHJldHVybiB2ZXJ0ZXg7XG5cblx0XHR9XG5cblx0XHRyZXR1cm4gX3ZlcnRleFBvb2xbIF92ZXJ0ZXhDb3VudCArKyBdO1xuXG5cdH1cblxuXHRmdW5jdGlvbiBnZXROZXh0RmFjZUluUG9vbCgpIHtcblxuXHRcdGlmICggX2ZhY2VDb3VudCA9PT0gX2ZhY2VQb29sTGVuZ3RoICkge1xuXG5cdFx0XHR2YXIgZmFjZSA9IG5ldyBUSFJFRS5SZW5kZXJhYmxlRmFjZSgpO1xuXHRcdFx0X2ZhY2VQb29sLnB1c2goIGZhY2UgKTtcblx0XHRcdF9mYWNlUG9vbExlbmd0aCArKztcblx0XHRcdF9mYWNlQ291bnQgKys7XG5cdFx0XHRyZXR1cm4gZmFjZTtcblxuXHRcdH1cblxuXHRcdHJldHVybiBfZmFjZVBvb2xbIF9mYWNlQ291bnQgKysgXTtcblxuXG5cdH1cblxuXHRmdW5jdGlvbiBnZXROZXh0TGluZUluUG9vbCgpIHtcblxuXHRcdGlmICggX2xpbmVDb3VudCA9PT0gX2xpbmVQb29sTGVuZ3RoICkge1xuXG5cdFx0XHR2YXIgbGluZSA9IG5ldyBUSFJFRS5SZW5kZXJhYmxlTGluZSgpO1xuXHRcdFx0X2xpbmVQb29sLnB1c2goIGxpbmUgKTtcblx0XHRcdF9saW5lUG9vbExlbmd0aCArKztcblx0XHRcdF9saW5lQ291bnQgKys7XG5cdFx0XHRyZXR1cm4gbGluZTtcblxuXHRcdH1cblxuXHRcdHJldHVybiBfbGluZVBvb2xbIF9saW5lQ291bnQgKysgXTtcblxuXHR9XG5cblx0ZnVuY3Rpb24gZ2V0TmV4dFNwcml0ZUluUG9vbCgpIHtcblxuXHRcdGlmICggX3Nwcml0ZUNvdW50ID09PSBfc3ByaXRlUG9vbExlbmd0aCApIHtcblxuXHRcdFx0dmFyIHNwcml0ZSA9IG5ldyBUSFJFRS5SZW5kZXJhYmxlU3ByaXRlKCk7XG5cdFx0XHRfc3ByaXRlUG9vbC5wdXNoKCBzcHJpdGUgKTtcblx0XHRcdF9zcHJpdGVQb29sTGVuZ3RoICsrO1xuXHRcdFx0X3Nwcml0ZUNvdW50ICsrO1xuXHRcdFx0cmV0dXJuIHNwcml0ZTtcblxuXHRcdH1cblxuXHRcdHJldHVybiBfc3ByaXRlUG9vbFsgX3Nwcml0ZUNvdW50ICsrIF07XG5cblx0fVxuXG5cdC8vXG5cblx0ZnVuY3Rpb24gcGFpbnRlclNvcnQoIGEsIGIgKSB7XG5cblx0XHRpZiAoIGEucmVuZGVyT3JkZXIgIT09IGIucmVuZGVyT3JkZXIgKSB7XG5cblx0XHRcdHJldHVybiBhLnJlbmRlck9yZGVyIC0gYi5yZW5kZXJPcmRlcjtcblxuXHRcdH0gZWxzZSBpZiAoIGEueiAhPT0gYi56ICkge1xuXG5cdFx0XHRyZXR1cm4gYi56IC0gYS56O1xuXG5cdFx0fSBlbHNlIGlmICggYS5pZCAhPT0gYi5pZCApIHtcblxuXHRcdFx0cmV0dXJuIGEuaWQgLSBiLmlkO1xuXG5cdFx0fSBlbHNlIHtcblxuXHRcdFx0cmV0dXJuIDA7XG5cblx0XHR9XG5cblx0fVxuXG5cdGZ1bmN0aW9uIGNsaXBMaW5lKCBzMSwgczIgKSB7XG5cblx0XHR2YXIgYWxwaGExID0gMCwgYWxwaGEyID0gMSxcblxuXHRcdC8vIENhbGN1bGF0ZSB0aGUgYm91bmRhcnkgY29vcmRpbmF0ZSBvZiBlYWNoIHZlcnRleCBmb3IgdGhlIG5lYXIgYW5kIGZhciBjbGlwIHBsYW5lcyxcblx0XHQvLyBaID0gLTEgYW5kIFogPSArMSwgcmVzcGVjdGl2ZWx5LlxuXHRcdGJjMW5lYXIgPSAgczEueiArIHMxLncsXG5cdFx0YmMybmVhciA9ICBzMi56ICsgczIudyxcblx0XHRiYzFmYXIgPSAgLSBzMS56ICsgczEudyxcblx0XHRiYzJmYXIgPSAgLSBzMi56ICsgczIudztcblxuXHRcdGlmICggYmMxbmVhciA+PSAwICYmIGJjMm5lYXIgPj0gMCAmJiBiYzFmYXIgPj0gMCAmJiBiYzJmYXIgPj0gMCApIHtcblxuXHRcdFx0Ly8gQm90aCB2ZXJ0aWNlcyBsaWUgZW50aXJlbHkgd2l0aGluIGFsbCBjbGlwIHBsYW5lcy5cblx0XHRcdHJldHVybiB0cnVlO1xuXG5cdFx0fSBlbHNlIGlmICggKCBiYzFuZWFyIDwgMCAmJiBiYzJuZWFyIDwgMCApIHx8ICggYmMxZmFyIDwgMCAmJiBiYzJmYXIgPCAwICkgKSB7XG5cblx0XHRcdC8vIEJvdGggdmVydGljZXMgbGllIGVudGlyZWx5IG91dHNpZGUgb25lIG9mIHRoZSBjbGlwIHBsYW5lcy5cblx0XHRcdHJldHVybiBmYWxzZTtcblxuXHRcdH0gZWxzZSB7XG5cblx0XHRcdC8vIFRoZSBsaW5lIHNlZ21lbnQgc3BhbnMgYXQgbGVhc3Qgb25lIGNsaXAgcGxhbmUuXG5cblx0XHRcdGlmICggYmMxbmVhciA8IDAgKSB7XG5cblx0XHRcdFx0Ly8gdjEgbGllcyBvdXRzaWRlIHRoZSBuZWFyIHBsYW5lLCB2MiBpbnNpZGVcblx0XHRcdFx0YWxwaGExID0gTWF0aC5tYXgoIGFscGhhMSwgYmMxbmVhciAvICggYmMxbmVhciAtIGJjMm5lYXIgKSApO1xuXG5cdFx0XHR9IGVsc2UgaWYgKCBiYzJuZWFyIDwgMCApIHtcblxuXHRcdFx0XHQvLyB2MiBsaWVzIG91dHNpZGUgdGhlIG5lYXIgcGxhbmUsIHYxIGluc2lkZVxuXHRcdFx0XHRhbHBoYTIgPSBNYXRoLm1pbiggYWxwaGEyLCBiYzFuZWFyIC8gKCBiYzFuZWFyIC0gYmMybmVhciApICk7XG5cblx0XHRcdH1cblxuXHRcdFx0aWYgKCBiYzFmYXIgPCAwICkge1xuXG5cdFx0XHRcdC8vIHYxIGxpZXMgb3V0c2lkZSB0aGUgZmFyIHBsYW5lLCB2MiBpbnNpZGVcblx0XHRcdFx0YWxwaGExID0gTWF0aC5tYXgoIGFscGhhMSwgYmMxZmFyIC8gKCBiYzFmYXIgLSBiYzJmYXIgKSApO1xuXG5cdFx0XHR9IGVsc2UgaWYgKCBiYzJmYXIgPCAwICkge1xuXG5cdFx0XHRcdC8vIHYyIGxpZXMgb3V0c2lkZSB0aGUgZmFyIHBsYW5lLCB2MiBpbnNpZGVcblx0XHRcdFx0YWxwaGEyID0gTWF0aC5taW4oIGFscGhhMiwgYmMxZmFyIC8gKCBiYzFmYXIgLSBiYzJmYXIgKSApO1xuXG5cdFx0XHR9XG5cblx0XHRcdGlmICggYWxwaGEyIDwgYWxwaGExICkge1xuXG5cdFx0XHRcdC8vIFRoZSBsaW5lIHNlZ21lbnQgc3BhbnMgdHdvIGJvdW5kYXJpZXMsIGJ1dCBpcyBvdXRzaWRlIGJvdGggb2YgdGhlbS5cblx0XHRcdFx0Ly8gKFRoaXMgY2FuJ3QgaGFwcGVuIHdoZW4gd2UncmUgb25seSBjbGlwcGluZyBhZ2FpbnN0IGp1c3QgbmVhci9mYXIgYnV0IGdvb2Rcblx0XHRcdFx0Ly8gIHRvIGxlYXZlIHRoZSBjaGVjayBoZXJlIGZvciBmdXR1cmUgdXNhZ2UgaWYgb3RoZXIgY2xpcCBwbGFuZXMgYXJlIGFkZGVkLilcblx0XHRcdFx0cmV0dXJuIGZhbHNlO1xuXG5cdFx0XHR9IGVsc2Uge1xuXG5cdFx0XHRcdC8vIFVwZGF0ZSB0aGUgczEgYW5kIHMyIHZlcnRpY2VzIHRvIG1hdGNoIHRoZSBjbGlwcGVkIGxpbmUgc2VnbWVudC5cblx0XHRcdFx0czEubGVycCggczIsIGFscGhhMSApO1xuXHRcdFx0XHRzMi5sZXJwKCBzMSwgMSAtIGFscGhhMiApO1xuXG5cdFx0XHRcdHJldHVybiB0cnVlO1xuXG5cdFx0XHR9XG5cblx0XHR9XG5cblx0fVxuXG59O1xuIiwiLyohYXJ0LXRlbXBsYXRlIC0gVGVtcGxhdGUgRW5naW5lIHwgaHR0cDovL2F1aS5naXRodWIuY29tL2FydFRlbXBsYXRlLyovXG4hZnVuY3Rpb24oKXtmdW5jdGlvbiBhKGEpe3JldHVybiBhLnJlcGxhY2UodCxcIlwiKS5yZXBsYWNlKHUsXCIsXCIpLnJlcGxhY2UodixcIlwiKS5yZXBsYWNlKHcsXCJcIikucmVwbGFjZSh4LFwiXCIpLnNwbGl0KHkpfWZ1bmN0aW9uIGIoYSl7cmV0dXJuXCInXCIrYS5yZXBsYWNlKC8oJ3xcXFxcKS9nLFwiXFxcXCQxXCIpLnJlcGxhY2UoL1xcci9nLFwiXFxcXHJcIikucmVwbGFjZSgvXFxuL2csXCJcXFxcblwiKStcIidcIn1mdW5jdGlvbiBjKGMsZCl7ZnVuY3Rpb24gZShhKXtyZXR1cm4gbSs9YS5zcGxpdCgvXFxuLykubGVuZ3RoLTEsayYmKGE9YS5yZXBsYWNlKC9cXHMrL2csXCIgXCIpLnJlcGxhY2UoLzwhLS1bXFx3XFxXXSo/LS0+L2csXCJcIikpLGEmJihhPXNbMV0rYihhKStzWzJdK1wiXFxuXCIpLGF9ZnVuY3Rpb24gZihiKXt2YXIgYz1tO2lmKGo/Yj1qKGIsZCk6ZyYmKGI9Yi5yZXBsYWNlKC9cXG4vZyxmdW5jdGlvbigpe3JldHVybiBtKyssXCIkbGluZT1cIittK1wiO1wifSkpLDA9PT1iLmluZGV4T2YoXCI9XCIpKXt2YXIgZT1sJiYhL149Wz0jXS8udGVzdChiKTtpZihiPWIucmVwbGFjZSgvXj1bPSNdP3xbXFxzO10qJC9nLFwiXCIpLGUpe3ZhciBmPWIucmVwbGFjZSgvXFxzKlxcKFteXFwpXStcXCkvLFwiXCIpO25bZl18fC9eKGluY2x1ZGV8cHJpbnQpJC8udGVzdChmKXx8KGI9XCIkZXNjYXBlKFwiK2IrXCIpXCIpfWVsc2UgYj1cIiRzdHJpbmcoXCIrYitcIilcIjtiPXNbMV0rYitzWzJdfXJldHVybiBnJiYoYj1cIiRsaW5lPVwiK2MrXCI7XCIrYikscihhKGIpLGZ1bmN0aW9uKGEpe2lmKGEmJiFwW2FdKXt2YXIgYjtiPVwicHJpbnRcIj09PWE/dTpcImluY2x1ZGVcIj09PWE/djpuW2FdP1wiJHV0aWxzLlwiK2E6b1thXT9cIiRoZWxwZXJzLlwiK2E6XCIkZGF0YS5cIithLHcrPWErXCI9XCIrYitcIixcIixwW2FdPSEwfX0pLGIrXCJcXG5cIn12YXIgZz1kLmRlYnVnLGg9ZC5vcGVuVGFnLGk9ZC5jbG9zZVRhZyxqPWQucGFyc2VyLGs9ZC5jb21wcmVzcyxsPWQuZXNjYXBlLG09MSxwPXskZGF0YToxLCRmaWxlbmFtZToxLCR1dGlsczoxLCRoZWxwZXJzOjEsJG91dDoxLCRsaW5lOjF9LHE9XCJcIi50cmltLHM9cT9bXCIkb3V0PScnO1wiLFwiJG91dCs9XCIsXCI7XCIsXCIkb3V0XCJdOltcIiRvdXQ9W107XCIsXCIkb3V0LnB1c2goXCIsXCIpO1wiLFwiJG91dC5qb2luKCcnKVwiXSx0PXE/XCIkb3V0Kz10ZXh0O3JldHVybiAkb3V0O1wiOlwiJG91dC5wdXNoKHRleHQpO1wiLHU9XCJmdW5jdGlvbigpe3ZhciB0ZXh0PScnLmNvbmNhdC5hcHBseSgnJyxhcmd1bWVudHMpO1wiK3QrXCJ9XCIsdj1cImZ1bmN0aW9uKGZpbGVuYW1lLGRhdGEpe2RhdGE9ZGF0YXx8JGRhdGE7dmFyIHRleHQ9JHV0aWxzLiRpbmNsdWRlKGZpbGVuYW1lLGRhdGEsJGZpbGVuYW1lKTtcIit0K1wifVwiLHc9XCIndXNlIHN0cmljdCc7dmFyICR1dGlscz10aGlzLCRoZWxwZXJzPSR1dGlscy4kaGVscGVycyxcIisoZz9cIiRsaW5lPTAsXCI6XCJcIikseD1zWzBdLHk9XCJyZXR1cm4gbmV3IFN0cmluZyhcIitzWzNdK1wiKTtcIjtyKGMuc3BsaXQoaCksZnVuY3Rpb24oYSl7YT1hLnNwbGl0KGkpO3ZhciBiPWFbMF0sYz1hWzFdOzE9PT1hLmxlbmd0aD94Kz1lKGIpOih4Kz1mKGIpLGMmJih4Kz1lKGMpKSl9KTt2YXIgej13K3greTtnJiYoej1cInRyeXtcIit6K1wifWNhdGNoKGUpe3Rocm93IHtmaWxlbmFtZTokZmlsZW5hbWUsbmFtZTonUmVuZGVyIEVycm9yJyxtZXNzYWdlOmUubWVzc2FnZSxsaW5lOiRsaW5lLHNvdXJjZTpcIitiKGMpK1wiLnNwbGl0KC9cXFxcbi8pWyRsaW5lLTFdLnJlcGxhY2UoL15cXFxccysvLCcnKX07fVwiKTt0cnl7dmFyIEE9bmV3IEZ1bmN0aW9uKFwiJGRhdGFcIixcIiRmaWxlbmFtZVwiLHopO3JldHVybiBBLnByb3RvdHlwZT1uLEF9Y2F0Y2goQil7dGhyb3cgQi50ZW1wPVwiZnVuY3Rpb24gYW5vbnltb3VzKCRkYXRhLCRmaWxlbmFtZSkge1wiK3orXCJ9XCIsQn19dmFyIGQ9ZnVuY3Rpb24oYSxiKXtyZXR1cm5cInN0cmluZ1wiPT10eXBlb2YgYj9xKGIse2ZpbGVuYW1lOmF9KTpnKGEsYil9O2QudmVyc2lvbj1cIjMuMC4wXCIsZC5jb25maWc9ZnVuY3Rpb24oYSxiKXtlW2FdPWJ9O3ZhciBlPWQuZGVmYXVsdHM9e29wZW5UYWc6XCI8JVwiLGNsb3NlVGFnOlwiJT5cIixlc2NhcGU6ITAsY2FjaGU6ITAsY29tcHJlc3M6ITEscGFyc2VyOm51bGx9LGY9ZC5jYWNoZT17fTtkLnJlbmRlcj1mdW5jdGlvbihhLGIpe3JldHVybiBxKGEsYil9O3ZhciBnPWQucmVuZGVyRmlsZT1mdW5jdGlvbihhLGIpe3ZhciBjPWQuZ2V0KGEpfHxwKHtmaWxlbmFtZTphLG5hbWU6XCJSZW5kZXIgRXJyb3JcIixtZXNzYWdlOlwiVGVtcGxhdGUgbm90IGZvdW5kXCJ9KTtyZXR1cm4gYj9jKGIpOmN9O2QuZ2V0PWZ1bmN0aW9uKGEpe3ZhciBiO2lmKGZbYV0pYj1mW2FdO2Vsc2UgaWYoXCJvYmplY3RcIj09dHlwZW9mIGRvY3VtZW50KXt2YXIgYz1kb2N1bWVudC5nZXRFbGVtZW50QnlJZChhKTtpZihjKXt2YXIgZD0oYy52YWx1ZXx8Yy5pbm5lckhUTUwpLnJlcGxhY2UoL15cXHMqfFxccyokL2csXCJcIik7Yj1xKGQse2ZpbGVuYW1lOmF9KX19cmV0dXJuIGJ9O3ZhciBoPWZ1bmN0aW9uKGEsYil7cmV0dXJuXCJzdHJpbmdcIiE9dHlwZW9mIGEmJihiPXR5cGVvZiBhLFwibnVtYmVyXCI9PT1iP2ErPVwiXCI6YT1cImZ1bmN0aW9uXCI9PT1iP2goYS5jYWxsKGEpKTpcIlwiKSxhfSxpPXtcIjxcIjpcIiYjNjA7XCIsXCI+XCI6XCImIzYyO1wiLCdcIic6XCImIzM0O1wiLFwiJ1wiOlwiJiMzOTtcIixcIiZcIjpcIiYjMzg7XCJ9LGo9ZnVuY3Rpb24oYSl7cmV0dXJuIGlbYV19LGs9ZnVuY3Rpb24oYSl7cmV0dXJuIGgoYSkucmVwbGFjZSgvJig/IVtcXHcjXSs7KXxbPD5cIiddL2csail9LGw9QXJyYXkuaXNBcnJheXx8ZnVuY3Rpb24oYSl7cmV0dXJuXCJbb2JqZWN0IEFycmF5XVwiPT09e30udG9TdHJpbmcuY2FsbChhKX0sbT1mdW5jdGlvbihhLGIpe3ZhciBjLGQ7aWYobChhKSlmb3IoYz0wLGQ9YS5sZW5ndGg7ZD5jO2MrKyliLmNhbGwoYSxhW2NdLGMsYSk7ZWxzZSBmb3IoYyBpbiBhKWIuY2FsbChhLGFbY10sYyl9LG49ZC51dGlscz17JGhlbHBlcnM6e30sJGluY2x1ZGU6Zywkc3RyaW5nOmgsJGVzY2FwZTprLCRlYWNoOm19O2QuaGVscGVyPWZ1bmN0aW9uKGEsYil7b1thXT1ifTt2YXIgbz1kLmhlbHBlcnM9bi4kaGVscGVycztkLm9uZXJyb3I9ZnVuY3Rpb24oYSl7dmFyIGI9XCJUZW1wbGF0ZSBFcnJvclxcblxcblwiO2Zvcih2YXIgYyBpbiBhKWIrPVwiPFwiK2MrXCI+XFxuXCIrYVtjXStcIlxcblxcblwiO1wib2JqZWN0XCI9PXR5cGVvZiBjb25zb2xlJiZjb25zb2xlLmVycm9yKGIpfTt2YXIgcD1mdW5jdGlvbihhKXtyZXR1cm4gZC5vbmVycm9yKGEpLGZ1bmN0aW9uKCl7cmV0dXJuXCJ7VGVtcGxhdGUgRXJyb3J9XCJ9fSxxPWQuY29tcGlsZT1mdW5jdGlvbihhLGIpe2Z1bmN0aW9uIGQoYyl7dHJ5e3JldHVybiBuZXcgaShjLGgpK1wiXCJ9Y2F0Y2goZCl7cmV0dXJuIGIuZGVidWc/cChkKSgpOihiLmRlYnVnPSEwLHEoYSxiKShjKSl9fWI9Ynx8e307Zm9yKHZhciBnIGluIGUpdm9pZCAwPT09YltnXSYmKGJbZ109ZVtnXSk7dmFyIGg9Yi5maWxlbmFtZTt0cnl7dmFyIGk9YyhhLGIpfWNhdGNoKGope3JldHVybiBqLmZpbGVuYW1lPWh8fFwiYW5vbnltb3VzXCIsai5uYW1lPVwiU3ludGF4IEVycm9yXCIscChqKX1yZXR1cm4gZC5wcm90b3R5cGU9aS5wcm90b3R5cGUsZC50b1N0cmluZz1mdW5jdGlvbigpe3JldHVybiBpLnRvU3RyaW5nKCl9LGgmJmIuY2FjaGUmJihmW2hdPWQpLGR9LHI9bi4kZWFjaCxzPVwiYnJlYWssY2FzZSxjYXRjaCxjb250aW51ZSxkZWJ1Z2dlcixkZWZhdWx0LGRlbGV0ZSxkbyxlbHNlLGZhbHNlLGZpbmFsbHksZm9yLGZ1bmN0aW9uLGlmLGluLGluc3RhbmNlb2YsbmV3LG51bGwscmV0dXJuLHN3aXRjaCx0aGlzLHRocm93LHRydWUsdHJ5LHR5cGVvZix2YXIsdm9pZCx3aGlsZSx3aXRoLGFic3RyYWN0LGJvb2xlYW4sYnl0ZSxjaGFyLGNsYXNzLGNvbnN0LGRvdWJsZSxlbnVtLGV4cG9ydCxleHRlbmRzLGZpbmFsLGZsb2F0LGdvdG8saW1wbGVtZW50cyxpbXBvcnQsaW50LGludGVyZmFjZSxsb25nLG5hdGl2ZSxwYWNrYWdlLHByaXZhdGUscHJvdGVjdGVkLHB1YmxpYyxzaG9ydCxzdGF0aWMsc3VwZXIsc3luY2hyb25pemVkLHRocm93cyx0cmFuc2llbnQsdm9sYXRpbGUsYXJndW1lbnRzLGxldCx5aWVsZCx1bmRlZmluZWRcIix0PS9cXC9cXCpbXFx3XFxXXSo/XFwqXFwvfFxcL1xcL1teXFxuXSpcXG58XFwvXFwvW15cXG5dKiR8XCIoPzpbXlwiXFxcXF18XFxcXFtcXHdcXFddKSpcInwnKD86W14nXFxcXF18XFxcXFtcXHdcXFddKSonfFxccypcXC5cXHMqWyRcXHdcXC5dKy9nLHU9L1teXFx3JF0rL2csdj1uZXcgUmVnRXhwKFtcIlxcXFxiXCIrcy5yZXBsYWNlKC8sL2csXCJcXFxcYnxcXFxcYlwiKStcIlxcXFxiXCJdLmpvaW4oXCJ8XCIpLFwiZ1wiKSx3PS9eXFxkW14sXSp8LFxcZFteLF0qL2cseD0vXiwrfCwrJC9nLHk9L14kfCwrLztcImZ1bmN0aW9uXCI9PXR5cGVvZiBkZWZpbmU/ZGVmaW5lKGZ1bmN0aW9uKCl7cmV0dXJuIGR9KTpcInVuZGVmaW5lZFwiIT10eXBlb2YgZXhwb3J0cz9tb2R1bGUuZXhwb3J0cz1kOnRoaXMudGVtcGxhdGU9ZH0oKTsiLCIhZnVuY3Rpb24oZ2xvYmFsKSB7XG5cbiAgaWYgKGdsb2JhbC50ZW1wbGF0ZSkge1xuICAgIGdsb2JhbC50ZW1wbGF0ZS5jb25maWcoJ29wZW5UYWcnLCc8IycpO1xuICAgIGdsb2JhbC50ZW1wbGF0ZS5jb25maWcoJ2Nsb3NlVGFnJywnIz4nKTtcbiAgfVxuXG4gIGdsb2JhbC5zbm90ID0ge307XG5cbiAgZ2xvYmFsLnNub3QudXRpbCA9IHtcbiAgICBsZWZ0X3BvczogbGVmdF9wb3MsXG4gICAgdG9wX3BvczogdG9wX3BvcyxcbiAgICBzdGFuZGFyZGxpemF0aW9uOiBzdGFuZGFyZGxpemF0aW9uLFxuICAgIGlzX21vYmlsZTogaXNfbW9iaWxlLFxuICAgIGlzX3dlY2hhdF9sb2dpbjogaXNfd2VjaGF0X2xvZ2luLFxuICAgIGdldF93aW5kb3dfd2lkdGg6IGdldF93aW5kb3dfd2lkdGgsXG4gICAgZ2V0X3dpbmRvd19oZWlnaHQ6IGdldF93aW5kb3dfaGVpZ2h0LFxuICAgIHBvc2l0aW9uX3RvX3JvdGF0aW9uOiBwb3NpdGlvbl90b19yb3RhdGlvbixcbiAgICBkaXN0YW5jZTJEOiBkaXN0YW5jZTJELFxuICAgIGRpc3RhbmNlM0Q6IGRpc3RhbmNlM0QsXG4gICAgZXBzaWxvbjogZXBzaWxvbixcbiAgICBjc3NfdGV4dF90b19tYXRyaXg6IGNzc190ZXh0X3RvX21hdHJpeCxcbiAgICBtYXRyaXhfdG9fY3NzX3RleHQ6IG1hdHJpeF90b19jc3NfdGV4dCxcbiAgICB3ZWJnbF9kZXRlY3Q6IHdlYmdsX2RldGVjdCxcbiAgICB3ZWJnbF9lbmFibGVkOiB3ZWJnbF9kZXRlY3QoKSxcbiAgICBsb2FkX2pzOiBsb2FkX2pzLFxuICAgIHJvdGF0aW9uX3RvX3Bvc2l0aW9uOiByb3RhdGlvbl90b19wb3NpdGlvbixcblxuICAgIHZfc2V0X2Zyb21fbWF0cml4X3Bvc2l0aW9uOiB2X3NldF9mcm9tX21hdHJpeF9wb3NpdGlvbixcbiAgICBtX21ha2Vfcm90YXRpb25fYXhpczogbV9tYWtlX3JvdGF0aW9uX2F4aXMsXG4gICAgbV9tdWx0aXBseTogbV9tdWx0aXBseSxcbiAgICBtX3NldF9wb3NpdGlvbjogbV9zZXRfcG9zaXRpb24sXG4gICAgbV9tYWtlX3JvdGF0aW9uX2Zyb21fcXVhdGVybmlvbjogbV9tYWtlX3JvdGF0aW9uX2Zyb21fcXVhdGVybmlvbixcblxuICAgIG1lcmdlX2pzb246IG1lcmdlX2pzb24sXG4gICAgb2N0cmVlX2NvbGxpc2lvbjogb2N0cmVlX2NvbGxpc2lvbixcblxuICB9O1xuXG4gIGZ1bmN0aW9uIHRvcF9wb3MoZWxlbSkge1xuICAgIHZhciBjdXJ0b3AgPSAwO1xuICAgIGlmIChlbGVtLm9mZnNldFBhcmVudCkge1xuICAgICAgZG8geyBcbiAgICAgICAgICBjdXJ0b3AgKz0gZWxlbS5vZmZzZXRUb3A7IFxuICAgICAgfSB3aGlsZSAoZWxlbSA9IGVsZW0ub2Zmc2V0UGFyZW50KTtcbiAgICB9XG4gICAgcmV0dXJuIGN1cnRvcDtcbiAgfTtcblxuICBmdW5jdGlvbiBsZWZ0X3BvcyhlbGVtKSB7XG4gICAgdmFyIGN1cmxlZnQgPSAwO1xuICAgIGlmIChlbGVtLm9mZnNldFBhcmVudCkge1xuICAgICAgICBkbyB7IFxuICAgICAgICAgICAgY3VybGVmdCArPSBlbGVtLm9mZnNldExlZnQ7IFxuICAgICAgICB9IHdoaWxlIChlbGVtID0gZWxlbS5vZmZzZXRQYXJlbnQpO1xuICAgIH1cbiAgICByZXR1cm4gY3VybGVmdDtcbiAgfTtcbiAgXG4gIGZ1bmN0aW9uIGlzX21vYmlsZSgpIHtcbiAgICByZXR1cm4gZ2V0X3dpbmRvd193aWR0aCgpIDwgNTAwO1xuICB9XG4gIFxuICBmdW5jdGlvbiBpc193ZWNoYXRfbG9naW4oKSB7XG4gICAgcmV0dXJuIHdpbmRvdy5uYXZpZ2F0b3IudXNlckFnZW50LmluZGV4T2YoJ01pY3JvTWVzc2VuZ2VyJykgPj0gMCA/IHRydWUgOiBmYWxzZTtcbiAgfVxuICBcbiAgZnVuY3Rpb24gZ2V0X3dpbmRvd193aWR0aCgpIHtcbiAgICByZXR1cm4gZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50LmNsaWVudFdpZHRoO1xuICB9XG4gIFxuICBmdW5jdGlvbiBnZXRfd2luZG93X2hlaWdodCgpIHtcbiAgICByZXR1cm4gZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50LmNsaWVudEhlaWdodDtcbiAgfVxuICBcbiAgZnVuY3Rpb24gcG9zaXRpb25fdG9fcm90YXRpb24oeCwgeSwgeikge1xuICAgIHZhciByID0gZGlzdGFuY2UzRCh4LCB5LCB6LCAwLCAwLCAwKTtcbiAgICB2YXIgcnggPSBNYXRoLmFzaW4oeiAvIHIpO1xuICAgIHZhciByeSA9IE1hdGguYXNpbih5IC8gciAvIE1hdGguY29zKHJ4KSk7XG4gICAgaWYgKHggPCAwKSB7XG4gICAgICAgIHJ5ID0gcnkgPiAwID8gTWF0aC5QSSAtIHJ5IDogLSBNYXRoLlBJIC0gcnk7XG4gICAgfVxuICBcbiAgICByZXR1cm4ge1xuICAgICAgcng6IC0gcnggKiAxODAgLyBNYXRoLlBJLFxuICAgICAgcnk6IChyeSA8IDAgPyByeSArIE1hdGguUEkgKiAyIDogcnkpICogMTgwIC8gTWF0aC5QSVxuICAgIH07XG4gIH1cbiAgXG4gIGZ1bmN0aW9uIGRpc3RhbmNlMkQoYSwgYiwgYywgZCkge1xuICAgIHJldHVybiBNYXRoLnBvdygoYSAtIGMpICogKGEgLSBjKSArIChiIC0gZCkgKiAoYiAtIGQpLCAwLjUpO1xuICB9XG4gIFxuICBmdW5jdGlvbiBkaXN0YW5jZTNEKGEsIGIsIGMsIGQsIGUsIGYpIHtcbiAgICByZXR1cm4gTWF0aC5wb3coKGEgLSBkKSAqIChhIC0gZCkgKyAoYiAtIGUpICogKGIgLSBlKSArIChjIC0gZikgKiAoYyAtIGYpLCAwLjUpO1xuICB9XG4gIFxuICBmdW5jdGlvbiBlcHNpbG9uKHZhbHVlKSB7XG4gICAgcmV0dXJuIE1hdGguYWJzKHZhbHVlKSA8IDAuMDAwMDAxID8gMCA6IHZhbHVlLnRvRml4ZWQoNSk7XG4gIH07XG4gIFxuICBmdW5jdGlvbiBjc3NfdGV4dF90b19tYXRyaXgodCkge1xuICAgIHZhciBtID0gbmV3IFdlYktpdENTU01hdHJpeCh0KTtcbiAgICByZXR1cm4gW1xuICAgICAgZXBzaWxvbihtLm0xMSksIGVwc2lsb24obS5tMTIpLCBlcHNpbG9uKG0ubTEzKSwgZXBzaWxvbihtLm0xNCksXG4gICAgICBlcHNpbG9uKG0ubTIxKSwgZXBzaWxvbihtLm0yMiksIGVwc2lsb24obS5tMjMpLCBlcHNpbG9uKG0ubTI0KSxcbiAgICAgIGVwc2lsb24obS5tMzEpLCBlcHNpbG9uKG0ubTMyKSwgZXBzaWxvbihtLm0zMyksIGVwc2lsb24obS5tMzQpLFxuICAgICAgZXBzaWxvbihtLm00MSksIGVwc2lsb24obS5tNDIpLCBlcHNpbG9uKG0ubTQzKSwgZXBzaWxvbihtLm00NClcbiAgICBdO1xuICB9XG4gIFxuICBmdW5jdGlvbiBtYXRyaXhfdG9fY3NzX3RleHQoYSwgYiwgYywgZCxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGUsIGYsIGcsIGgsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpLCBqLCBrLCBsLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbSwgbiwgbywgcCkge1xuICAgICAgaWYgKHR5cGVvZihhKSA9PSAnb2JqZWN0Jykge1xuICAgICAgICAgIHJldHVybiAnbWF0cml4M2QoJyArIChhLmpvaW4oJywnKSkgKyAnKSc7XG4gICAgICB9XG4gICAgICByZXR1cm4gJ21hdHJpeDNkKCcgKyBhICsgJywnICsgYiArICcsJyArIGMgKyAnLCcgKyBkKycsJyArIGUgKyAnLCcgKyBmICsgJywnICsgZyArICcsJyArIGggKyAnLCcgKyBpICsgJywnICsgaiArICcsJyArIGsgKyAnLCcgKyBsICsgJywnICsgbSArICcsJyArIG4gKyAnLCcgKyBvKyAnLCcgKyBwICsgJyknO1xuICB9XG4gIFxuICB3aW5kb3cucmVxdWVzdEFuaW1hdGlvbkZyYW1lPSAoZnVuY3Rpb24gKCkgeyBcbiAgICByZXR1cm4gd2luZG93LnJlcXVlc3RBbmltYXRpb25GcmFtZSB8fCBcbiAgICB3aW5kb3cud2Via2l0UmVxdWVzdEFuaW1hdGlvbkZyYW1lIHx8IFxuICAgIHdpbmRvdy5tb3pSZXF1ZXN0QW5pbWF0aW9uRnJhbWUgfHwgXG4gICAgd2luZG93Lm9SZXF1ZXN0QW5pbWF0aW9uRnJhbWUgfHwgXG4gICAgLy8gaWYgYWxsIGVsc2UgZmFpbHMsIHVzZSBzZXRUaW1lb3V0IFxuICAgIGZ1bmN0aW9uIChjYWxsYmFjaykgeyBcbiAgICAgIHJldHVybiB3aW5kb3cuc2V0VGltZW91dChjYWxsYmFjaywgMTAwMCAvIDYwKTsgLy8gc2hvb3QgZm9yIDYwIGZwcyBcbiAgICB9OyBcbiAgfSkoKTsgXG4gIFxuICBmdW5jdGlvbiB3ZWJnbF9kZXRlY3QocmV0dXJuX2NvbnRleHQpIHtcbiAgICBpZiAoISF3aW5kb3cuV2ViR0xSZW5kZXJpbmdDb250ZXh0KSB7XG4gICAgICB2YXIgY2FudmFzID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImNhbnZhc1wiKTtcbiAgICAgIHZhciBuYW1lcyA9IFsnd2ViZ2wnLCAnZXhwZXJpbWVudGFsLXdlYmdsJywgJ21vei13ZWJnbCcsICd3ZWJraXQtM2QnXTtcbiAgICAgIHZhciBjb250ZXh0ID0gZmFsc2U7XG4gIFxuICAgICAgZm9yICh2YXIgaSA9IDA7aSA8IDQ7IGkrKykge1xuICAgICAgICB0cnkge1xuICAgICAgICAgIGNvbnRleHQgPSBjYW52YXMuZ2V0Q29udGV4dChuYW1lc1tpXSk7XG4gICAgICAgICAgaWYgKGNvbnRleHQgJiYgdHlwZW9mIGNvbnRleHQuZ2V0UGFyYW1ldGVyID09ICdmdW5jdGlvbicpIHtcbiAgICAgICAgICAgIC8vIFdlYkdMIGlzIGVuYWJsZWRcbiAgICAgICAgICAgIGlmIChyZXR1cm5fY29udGV4dCkge1xuICAgICAgICAgICAgICAvLyByZXR1cm4gV2ViR0wgb2JqZWN0IGlmIHRoZSBmdW5jdGlvbidzIGFyZ3VtZW50IGlzIHByZXNlbnRcbiAgICAgICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgICAgICBuYW1lOiBuYW1lc1tpXSxcbiAgICAgICAgICAgICAgICBnbDogY29udGV4dFxuICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgLy8gZWxzZSwgcmV0dXJuIGp1c3QgdHJ1ZVxuICAgICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgICAgfVxuICAgICAgICB9IGNhdGNoKGUpIHt9XG4gICAgICB9XG4gIFxuICAgICAgLy8gV2ViR0wgaXMgc3VwcG9ydGVkLCBidXQgZGlzYWJsZWRcbiAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG4gIFxuICAgIC8vIFdlYkdMIG5vdCBzdXBwb3J0ZWRcbiAgICByZXR1cm4gZmFsc2U7XG4gIH1cbiAgXG4gIGZ1bmN0aW9uIGxvYWRfanMoZmlsZSwgY2FsbGJhY2spIHtcbiAgICB2YXIgX2RvYyA9IGRvY3VtZW50LmdldEVsZW1lbnRzQnlUYWdOYW1lKCdoZWFkJylbMF07XG4gICAgdmFyIGpzID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnc2NyaXB0Jyk7XG4gICAganMuc2V0QXR0cmlidXRlKCd0eXBlJywgJ3RleHQvamF2YXNjcmlwdCcpO1xuICAgIGpzLnNldEF0dHJpYnV0ZSgnc3JjJywgZmlsZSk7XG4gICAgX2RvYy5hcHBlbmRDaGlsZChqcyk7XG4gICAgaWYgKCEvKkBjY19vbiFAKi8wKSB7IC8vaWYgbm90IGllXG4gICAgICAvL2ZpcmVmb3gy44CBZmlyZWZveDPjgIFzYWZhcmkzLjEr44CBb3BlcmE5LjYrIHN1cHBvcnQganMub25sb2FkXG4gICAgICBqcy5vbmxvYWQgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIGNhbGxiYWNrKCk7XG4gICAgICB9XG4gICAgfSBlbHNlIHtcbiAgICAgIC8vaWU244CBaWU3IHN1cHBvcnQganMub25yZWFkeXN0YXRlY2hhbmdlXG4gICAgICBqcy5vblJlYWR5U3RhdGVDaGFuZ2UgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIGlmIChqcy5yZWFkeVN0YXRlID09ICdsb2FkZWQnIHx8IGpzLnJlYWR5U3RhdGUgPT0gJ2NvbXBsZXRlJykge1xuICAgICAgICAgIGNhbGxiYWNrKCk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG4gIH1cbiAgXG4gIGZ1bmN0aW9uIHJvdGF0aW9uX3RvX3Bvc2l0aW9uKHosIHJ4LCByeSwgcnopIHtcbiAgICB6ID0gLSB6O1xuICAgIHJ4ID0gLSByeDtcbiAgXG4gICAgdmFyIHggPSBzbm90LmJnX3NpemUgLyAyO1xuICAgIHZhciB5ID0gc25vdC5iZ19zaXplIC8gMjtcbiAgXG4gICAgdmFyIHRyYW5zZm9ybSA9IGNzc190ZXh0X3RvX21hdHJpeCgndHJhbnNsYXRlM2QoJyArIHggKyAncHgsJyArIHkgKyAncHgsMCkgcm90YXRlWSgnICsgKDApICsgJ2RlZykgcm90YXRlWCgnICsgKDApICsgJ2RlZykgcm90YXRlWSgnICsgKHJ5ID8gLSByeSA6IDApICsgJ2RlZykgcm90YXRlWCgnICsgKHJ4ID8gLSByeCA6IDApICsgJ2RlZykgcm90YXRlWignICsgKHJ6ID8gcnogOiAwKSArJ2RlZykgdHJhbnNsYXRlWignICsgeiArICdweCknICk7XG4gICAgcmV0dXJuIFsgLSB0cmFuc2Zvcm1bMTJdICsgc25vdC5iZ19zaXplIC8gMiwgdHJhbnNmb3JtWzEzXSAtIHNub3QuYmdfc2l6ZSAvIDIsIC0gdHJhbnNmb3JtWzE0XV07XG4gIH1cblxuICBmdW5jdGlvbiBtX21ha2Vfcm90YXRpb25fYXhpcyhwb2ludCwgcm90YXRpb24pIHtcbiAgICByZXR1cm4gbmV3IFRIUkVFLk1hdHJpeDQoKS5tYWtlUm90YXRpb25BeGlzKHBvaW50LCByb3RhdGlvbik7XG4gIH1cblxuICBmdW5jdGlvbiBtX211bHRpcGx5KCkge1xuICAgIHZhciBtYXRzID0gYXJndW1lbnRzO1xuXG4gICAgdmFyIGwgPSBtYXRzLmxlbmd0aDtcbiAgICB3aGlsZSAobCA+IDEpIHtcbiAgICAgIHZhciBsYXN0MiA9IG1hdHNbbCAtIDJdO1xuICAgICAgdmFyIGxhc3QxID0gbWF0c1tsIC0gMV07XG4gICAgICBtYXRzW2wgLSAyXSA9IG5ldyBUSFJFRS5NYXRyaXg0KCkubXVsdGlwbHlNYXRyaWNlcyhcbiAgICAgICAgbGFzdDIsXG4gICAgICAgIGxhc3QxXG4gICAgICApO1xuICAgICAgbC0tO1xuICAgIH1cbiAgICByZXR1cm4gbWF0c1swXTtcbiAgfVxuXG4gIGZ1bmN0aW9uIHZfc2V0X2Zyb21fbWF0cml4X3Bvc2l0aW9uKG1hdDQpIHtcbiAgICByZXR1cm4gbmV3IFRIUkVFLlZlY3RvcjMoKS5zZXRGcm9tTWF0cml4UG9zaXRpb24obWF0NCk7XG4gIH1cblxuICBmdW5jdGlvbiBtX3NldF9wb3NpdGlvbihwKSB7XG4gICAgcmV0dXJuIG5ldyBUSFJFRS5NYXRyaXg0KCkuc2V0UG9zaXRpb24ocCk7XG4gIH1cblxuICBmdW5jdGlvbiBtX21ha2Vfcm90YXRpb25fZnJvbV9xdWF0ZXJuaW9uKHEpIHtcbiAgICByZXR1cm4gbmV3IFRIUkVFLk1hdHJpeDQoKS5tYWtlUm90YXRpb25Gcm9tUXVhdGVybmlvbihxKTtcbiAgfVxuXG4gIGZ1bmN0aW9uIG1lcmdlX2pzb24ob2JqLCBqc29uKSB7XG4gICAgZm9yICh2YXIgaSBpbiBqc29uKSB7XG4gICAgICBpZiAob2JqW2ldID09IHVuZGVmaW5lZCkge1xuICAgICAgICBvYmpbaV0gPSBqc29uW2ldO1xuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIGZ1bmN0aW9uIHN0YW5kYXJkbGl6YXRpb24ocG9pbnQsIHIpIHtcbiAgICByID0gciB8fCAxO1xuICAgIHZhciBkaXN0YW5jZV90b19vcmlnaW4gPSBkaXN0YW5jZTNEKDAsIDAsIDAsIHBvaW50LngsIHBvaW50LnksIHBvaW50LnopO1xuICAgIHBvaW50LnggKj0gciAvIGRpc3RhbmNlX3RvX29yaWdpbjtcbiAgICBwb2ludC55ICo9IHIgLyBkaXN0YW5jZV90b19vcmlnaW47XG4gICAgcG9pbnQueiAqPSByIC8gZGlzdGFuY2VfdG9fb3JpZ2luO1xuICB9XG5cbiAgZnVuY3Rpb24gaXNfcG9pbnRfaW5zaWRlKHBvaW50LCBhLCBiKSB7XG4gICAgaWYgKHBvaW50LnggPj0gYi54ICYmIHBvaW50LnkgPj0gYi55ICYmIHBvaW50LnogPj0gYi56ICYmXG4gICAgICAgIHBvaW50LnggPCBhLnggJiYgcG9pbnQueSA8IGEueSAmJiBwb2ludC56IDwgYS56KSB7XG4gICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9XG4gICAgcmV0dXJuIGZhbHNlO1xuICB9XG4gIGZ1bmN0aW9uIGdldF9pbnNpZGVfcG9pbnRzKHBvaW50cywgYSwgYikge1xuICAgIHZhciBjYW5kaWRhdGVzID0gW107XG4gICAgZm9yICh2YXIgaSBpbiBwb2ludHMpIHtcbiAgICAgIGlmIChpc19wb2ludF9pbnNpZGUocG9pbnRzW2ldLCBhLCBiKSkge1xuICAgICAgICBjYW5kaWRhdGVzLnB1c2gocG9pbnRzW2ldKTtcbiAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIGNhbmRpZGF0ZXM7XG4gIH1cbiAgLypcbiAgICogc2VlIC4uL2ltYWdlcy9vY3RyZWUucG5nXG4gICAqXG4gICAqIGEueCA+IGIueFxuICAgKiBhLnkgPiBiLnlcbiAgICogYS56ID4gYi56XG4gICAqL1xuICBmdW5jdGlvbiBvY3RyZWVfY29sbGlzaW9uKGEsIGIsIHBvaW50c19hLCBwb2ludHNfYiwgcmVzLCBkZXB0aCA9IDEpIHtcbiAgICBpZiAoIXBvaW50c19hLmxlbmd0aCB8fCAhcG9pbnRzX2IubGVuZ3RoKSB7XG4gICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuICAgIGlmIChkZXB0aCA+IDcpIHtcbiAgICAgIHJlcy5wdXNoKHtcbiAgICAgICAgcG9pbnRzX2E6IHBvaW50c19hLFxuICAgICAgICBwb2ludHNfYjogcG9pbnRzX2IsXG4gICAgICB9KTtcbiAgICAgIHJldHVybiB0cnVlO1xuICAgIH1cblxuICAgIC8vIHJhbmRvbSBzcGxpdFxuICAgIHZhciBoYWxmID0ge1xuICAgICAgeDogKGEueCAtIGIueCkgLyAoTWF0aC5yYW5kb20oKSAqIDAuMiAtIDAuMSArIDIpLFxuICAgICAgeTogKGEueSAtIGIueSkgLyAoTWF0aC5yYW5kb20oKSAqIDAuMiAtIDAuMSArIDIpLFxuICAgICAgejogKGEueiAtIGIueikgLyAoTWF0aC5yYW5kb20oKSAqIDAuMiAtIDAuMSArIDIpLFxuICAgIH07XG4gICAgdmFyIGJfeHl6ID0ge1xuICAgICAgeDogYi54ICsgaGFsZi54LFxuICAgICAgeTogYi55ICsgaGFsZi55LFxuICAgICAgejogYi56ICsgaGFsZi56LFxuICAgIH07XG4gICAgdmFyIGJfeCA9IHtcbiAgICAgIHg6IGJfeHl6LngsXG4gICAgICB5OiBiLnksXG4gICAgICB6OiBiLnosXG4gICAgfTtcbiAgICB2YXIgYl95ID0ge1xuICAgICAgeDogYi54LFxuICAgICAgeTogYl94eXoueSxcbiAgICAgIHo6IGIueixcbiAgICB9O1xuICAgIHZhciBiX3ogPSB7XG4gICAgICB4OiBiLngsXG4gICAgICB5OiBiLnksXG4gICAgICB6OiBiX3h5ei56LFxuICAgIH07XG4gICAgdmFyIGJfeHogPSB7XG4gICAgICB4OiBiX3h5ei54LFxuICAgICAgeTogYi55LFxuICAgICAgejogYl94eXoueixcbiAgICB9O1xuICAgIHZhciBiX3h5ID0ge1xuICAgICAgeDogYl94eXoueCxcbiAgICAgIHk6IGJfeHl6LnksXG4gICAgICB6OiBiLnosXG4gICAgfTtcbiAgICB2YXIgYl95eiA9IHtcbiAgICAgIHg6IGIueCxcbiAgICAgIHk6IGJfeHl6LnksXG4gICAgICB6OiBiX3h5ei56LFxuICAgIH07XG5cbiAgICB2YXIgYV96ID0ge1xuICAgICAgeDogYS54LFxuICAgICAgeTogYS55LFxuICAgICAgejogYS56IC0gaGFsZi56LFxuICAgIH07XG4gICAgdmFyIGFfeCA9IHtcbiAgICAgIHg6IGEueCAtIGhhbGYueCxcbiAgICAgIHk6IGEueSxcbiAgICAgIHo6IGEueixcbiAgICB9O1xuICAgIHZhciBhX3kgPSB7XG4gICAgICB4OiBhLngsXG4gICAgICB5OiBhLnkgLSBoYWxmLnksXG4gICAgICB6OiBhLnosXG4gICAgfTtcbiAgICB2YXIgYV94eSA9IHtcbiAgICAgIHg6IGFfeC54LFxuICAgICAgeTogYV95LnksXG4gICAgICB6OiBhLnosXG4gICAgfTtcbiAgICB2YXIgYV95eiA9IHtcbiAgICAgIHg6IGEueCxcbiAgICAgIHk6IGFfeS55LFxuICAgICAgejogYV96LnosXG4gICAgfTtcbiAgICB2YXIgYV94eiA9IHtcbiAgICAgIHg6IGFfeC54LFxuICAgICAgeTogYS55LFxuICAgICAgejogYV96LnosXG4gICAgfTtcblxuICAgIGZ1bmN0aW9uIHN1Yl9jb2xsaXNpb24oYSwgYikge1xuICAgICAgdmFyIGNhbmRpZGF0ZXNfYSA9IGdldF9pbnNpZGVfcG9pbnRzKHBvaW50c19hLCBhLCBiKTtcbiAgICAgIHZhciBjYW5kaWRhdGVzX2IgPSBnZXRfaW5zaWRlX3BvaW50cyhwb2ludHNfYiwgYSwgYik7XG4gICAgICByZXR1cm4gb2N0cmVlX2NvbGxpc2lvbihhLCBiLCBjYW5kaWRhdGVzX2EsIGNhbmRpZGF0ZXNfYiwgcmVzLCBkZXB0aCArIDEpO1xuICAgIH1cblxuICAgIHZhciBwYWlycyA9IFtcbiAgICAgIFthX3gsIGJfeXpdLFxuICAgICAgW2EsIGJfeHl6XSxcbiAgICAgIFthX3h5LCBiX3pdLFxuICAgICAgW2FfeSwgYl94el0sXG5cbiAgICAgIFthX3h6LCBiX3ldLFxuICAgICAgW2FfeiwgYl94eV0sXG4gICAgICBbYl94eXosIGJdLFxuICAgICAgW2FfeXosIGJfeF0sXG4gICAgXTtcblxuICAgIHZhciBmb3VuZCA9IGZhbHNlO1xuICAgIGZvciAodmFyIGkgaW4gcGFpcnMpIHtcbiAgICAgIGlmIChzdWJfY29sbGlzaW9uKHBhaXJzW2ldWzBdLCBwYWlyc1tpXVsxXSkpIHtcbiAgICAgICAgZm91bmQgPSB0cnVlO1xuICAgICAgfVxuICAgIH1cblxuICAgIHJldHVybiBmb3VuZDtcbiAgfVxuXG59KHdpbmRvdyk7XG4iLCIhZnVuY3Rpb24oZ2xvYmFsKSB7XG5cbiAgdmFyIFBJID0gTWF0aC5QSTtcbiAgdmFyIHNpbiA9IE1hdGguc2luO1xuICB2YXIgY29zID0gTWF0aC5jb3M7XG4gIHZhciB0YW4gPSBNYXRoLnRhbjtcbiAgdmFyIGFjb3MgPSBNYXRoLmFjb3M7XG4gIHZhciBhdGFuID0gTWF0aC5hdGFuO1xuICB2YXIgcG93ID0gTWF0aC5wb3c7XG4gIHZhciBmbG9vciA9IE1hdGguZmxvb3I7XG4gIHZhciBzcXJ0ID0gTWF0aC5zcXJ0O1xuXG4gIHZhciBzbm90ID0ge1xuICAgIGRlYnVnOiBmYWxzZSxcbiAgICBjb250YWluZXI6IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdzbm90LWNvbnRhaW5lcicpLFxuICAgIGRvbTogZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3Nub3Qtd3JhcCcpLFxuXG4gICAgY2FtZXJhX2xvb2tfYXQ6IHtcbiAgICAgIHg6IDAsXG4gICAgICB5OiAwLFxuICAgICAgejogMSxcbiAgICB9LFxuICAgIGNvbnRyb2xzOiB7XG4gICAgICBzY3JlZW5fb3JpZW50YXRpb246IDAsXG4gICAgICBneXJvX2RhdGE6IHtcbiAgICAgICAgYWxwaGE6IDAsXG4gICAgICAgIGJldGE6IDkwICogUEkgLyAxODAsXG4gICAgICAgIGdhbW1hOiAwXG4gICAgICB9LFxuICAgIH0sXG4gICAgbW91c2Vfc2Vuc2l0aXZpdHk6IDAuMyxcbiAgICBhdXRvX3JvdGF0aW9uOiAwLFxuICAgIGZyYW1lczogMCxcbiAgICBiZ19yb3RhdGlvbjogWzAsIDAsIDAsIDAsIDAsIDBdLFxuXG4gICAgcGF1c2VfYW5pbWF0aW9uOiBmYWxzZSxcblxuXG4gICAgYmdfc2l6ZTogMTAyNCxcblxuICAgIGdlbmVyYXRvcjoge30sXG4gICAgZ3lybzogZmFsc2UsXG4gICAgcnk6IDAsICAgICAgICAvLyBSb3RhdGUgKiBkZWdyZWUgYXJvdW5kIHkgYXhpc1xuICAgIHJ4OiAwLCAgICAgICAgLy8gUm90YXRlICogZGVncmVlIGFyb3VuZCB4IGF4aXNcbiAgICBkZXN0X3J4OiAwLFxuICAgIGRlc3Rfcnk6IDAsXG4gICAgZGVzdF9yejogMCxcblxuICAgIG1heF9mb3Y6IDEyMCwgLy8gTWF4IGZpZWxkIG9mIHZpZXcgKGRlZ3JlZSlcbiAgICBtaW5fZm92OiA2MCwgICAvLyBNaW4gZmllbGQgb2YgdmlldyAoZGVncmVlKVxuICAgIGZvdjogOTAsICAgICAgLy8gRGVmYXVsdCBmaWVsZCBvZiB2aWV3XG4gICAgc21vb3RoOiAwLjgzLFxuICAgIG1pbl9kZXRlY3RfZGlzdGFuY2U6IDIwLFxuICAgIG9uX2NsaWNrOiBmdW5jdGlvbigpIHt9LFxuICAgIG9uX3Nwcml0ZV9jbGljazogZnVuY3Rpb24oKSB7fSxcbiAgfTtcbiAgdmFyIGNhbWVyYV9kb20gPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnc25vdC1jYW1lcmEnKTtcbiAgdmFyIHByZXZfZ3lybztcblxuICB2YXIgY2FtZXJhX2Jhc2VfdHJhbnNmb3JtO1xuICB2YXIgcHJldmlvdXNfcXVhdCA9IG5ldyBUSFJFRS5RdWF0ZXJuaW9uKCk7XG5cbiAgZnVuY3Rpb24gX3BvaW50U3RhbmRhcmRsaXphdGlvbih4LCB5LCB6KSB7XG4gICAgdmFyIHJhdGlvID0gMjAwIC8gZGlzdGFuY2UzRCh4LCB5LCB6LCAwLCAwLCAwKTtcbiAgICByZXR1cm4gW3ggKiByYXRpbywgeSAqIHJhdGlvLCB6ICogcmF0aW9dO1xuICB9XG5cbiAgaWYgKGdsb2JhbC5zbm90KSB7XG4gICAgZm9yICh2YXIgaSBpbiBzbm90KSB7XG4gICAgICBnbG9iYWwuc25vdFtpXSA9IHNub3RbaV07XG4gICAgfVxuICAgIHNub3QgPSBnbG9iYWwuc25vdDtcbiAgfSBlbHNlIHtcbiAgICBjb25zb2xlLmVycm9yKCdzbm90LXV0aWxzLmpzIGlzIG1pc3NpbmcnKTtcbiAgICByZXR1cm47XG4gIH1cbiAgdmFyIG1fbWFrZV9yb3RhdGlvbl9heGlzID0gc25vdC51dGlsLm1fbWFrZV9yb3RhdGlvbl9heGlzO1xuICB2YXIgbV9tdWx0aXBseSA9IHNub3QudXRpbC5tX211bHRpcGx5O1xuICB2YXIgbV9zZXRfcG9zaXRpb24gPSBzbm90LnV0aWwubV9zZXRfcG9zaXRpb247XG4gIHZhciBtX21ha2Vfcm90YXRpb25fZnJvbV9xdWF0ZXJuaW9uID0gc25vdC51dGlsLm1fbWFrZV9yb3RhdGlvbl9mcm9tX3F1YXRlcm5pb247XG4gIHZhciB2X3NldF9mcm9tX21hdHJpeF9wb3NpdGlvbiA9IHNub3QudXRpbC52X3NldF9mcm9tX21hdHJpeF9wb3NpdGlvbjtcblxuICB2YXIgdXRpbCA9IGdsb2JhbC5zbm90LnV0aWw7XG4gIHZhciBlcHNpbG9uID0gdXRpbC5lcHNpbG9uO1xuICB2YXIgZGlzdGFuY2UzRCA9IHV0aWwuZGlzdGFuY2UzRDtcbiAgdmFyIGRpc3RhbmNlMkQgPSB1dGlsLmRpc3RhbmNlMkQ7XG5cbiAgdmFyIHNldF9mb3YgPSBmdW5jdGlvbiAoZGVncmVlKSB7XG4gICAgaWYgKGRlZ3JlZSA8IHNub3QubWluX2ZvdiB8fCBkZWdyZWUgPiBzbm90Lm1heF9mb3YpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgc25vdC5mb3YgPSBkZWdyZWU7XG4gICAgc25vdC5jb250YWluZXIuc3R5bGVbJy13ZWJraXQtdHJhbnNmb3JtJ10gPSAnc2NhbGUoJyArIHRhbihzbm90Lm1heF9mb3YgLyAyICogUEkgLyAxODApIC8gdGFuKHNub3QuZm92IC8gMiAqIFBJIC8gMTgwKSArICcpJztcbiAgfVxuXG4gIGZ1bmN0aW9uIHJlc2V0KCkge1xuICAgIHZhciBzcHJpdGVzID0gZG9jdW1lbnQuZ2V0RWxlbWVudHNCeUNsYXNzTmFtZSgnc3ByaXRlJyk7XG4gICAgZm9yICh2YXIgaSA9IDA7IGkgPCBzcHJpdGVzLmxlbmd0aDsgKysgaSkge1xuICAgICAgc3ByaXRlc1tpXS5yZW1vdmUoKTtcbiAgICB9XG4gIH1cblxuICB2YXIgaW5pdCA9IGZ1bmN0aW9uKGNvbmZpZykge1xuICAgIHJlc2V0KCk7XG5cbiAgICBjYW5jZWxBbmltYXRpb25GcmFtZShzbm90Ll9hbmltYXRlSWQpO1xuXG4gICAgZm9yICh2YXIgaSBpbiBjb25maWcpIHtcbiAgICAgIGlmIChpID09ICdnZW5lcmF0b3InKSB7XG4gICAgICAgIHV0aWwubWVyZ2VfanNvbihzbm90LmdlbmVyYXRvciwgY29uZmlnLmdlbmVyYXRvcik7XG4gICAgICB9XG4gICAgICBzbm90W2ldID0gY29uZmlnW2ldO1xuICAgIH1cbiAgICBwcmV2X2d5cm8gPSBzbm90Lmd5cm87XG5cbiAgICBzbm90LmRlc3RfcnggPSBzbm90LnJ4O1xuICAgIHNub3QuZGVzdF9yeSA9IHNub3Qucnk7XG5cbiAgICBzbm90LndpZHRoID0gc25vdC5kb20ub2Zmc2V0V2lkdGg7XG4gICAgc25vdC5oZWlnaHQgPSBzbm90LmRvbS5vZmZzZXRIZWlnaHQ7XG5cbiAgICAvL2NvbXB1dGUgdGhlIG1heCBIb3Jpem9udGFsIEZpZWxkIG9mIHZpZXdcbiAgICAvL3BlcnNwZWN0aXZlPSBwcm9qZWN0aXZlU2NyZWVuV2lkdGgvMlxuICAgIC8vICAgICAgICAgICA9IHdpZHRoLzIvdGFuKG1heF9mb3YvMilcbiAgICBzbm90LnBlcnNwZWN0aXZlID0gc25vdC53aWR0aCAvIDIgLyB0YW4oc25vdC5tYXhfZm92IC8gMiAqIFBJIC8gMTgwKTtcblxuICAgIHNub3QuY29udGFpbmVyLnN0eWxlWyctd2Via2l0LXBlcnNwZWN0aXZlJ10gPSBzbm90LnBlcnNwZWN0aXZlICsgJ3B4JztcblxuICAgIC8vY2FtZXJhIG9mZnNldFxuICAgIC8vIFogaXMgZGVwdGgoZnJvbnQpIFkgaXMgaGVpZ2h0IFggaXMgcmlnaHRcbiAgICAvL1xuICAgIC8vIHRyYW5zbGF0ZVogc2V0Rk9WXG4gICAgLy8gcm90YXRlWCByb3RhdGUgYXJvdW5kIFggYXhpc1xuICAgIC8vIHJvdGF0ZVkgcm90YXRlIGFyb3VuZCBZIGF4aXNcbiAgICAvLyB0cmFuc2xhdGVYIHRyYW5zbGF0ZSB0aGUgQ2FtZXJhIHRvIGNlbnRlclxuICAgIC8vIHRyYW5zbGF0ZVlcbiAgICBjYW1lcmFfYmFzZV90cmFuc2Zvcm0gPSAndHJhbnNsYXRlWCgnICsgZXBzaWxvbigtIChzbm90LmJnX3NpemUgLSBzbm90LndpZHRoKSAvIDIpICsgJ3B4KSB0cmFuc2xhdGVZKCcgKyBlcHNpbG9uKC0gKHNub3QuYmdfc2l6ZSAtIHNub3QuaGVpZ2h0KSAvIDIpICsgJ3B4KSc7XG4gICAgY2FtZXJhX2RvbS5zdHlsZVsnLXdlYmtpdC10cmFuc2Zvcm0nXSA9ICd0cmFuc2xhdGVaKC0nICsgc25vdC5wZXJzcGVjdGl2ZSArICdweCkgcm90YXRlWSgnICsgZXBzaWxvbihzbm90LnJ4KSArICdkZWcpIHJvdGF0ZVgoJyArIGVwc2lsb24oc25vdC5yeSkgKyAnZGVnKScgKyBjYW1lcmFfYmFzZV90cmFuc2Zvcm07XG5cbiAgICBzZXRfZm92KHNub3QuZm92KTtcblxuICAgIGlmIChjb25maWcuYmdfaW1ncykge1xuICAgICAgbG9hZF9iZ19pbWdzKGNvbmZpZy5iZ19pbWdzLCBjb25maWcuYmdfcm90YXRpb24gfHwgc25vdC5iZ19yb3RhdGlvbik7XG4gICAgfVxuXG4gICAgaWYgKGNvbmZpZykge1xuICAgICAgbG9hZF9zcHJpdGVzKGNvbmZpZy5zcHJpdGVzKTtcbiAgICB9XG5cbiAgICBpZiAodXRpbC5pc19tb2JpbGUoKSkge1xuICAgIH1cblxuICAgIGlmIChjb25maWcuY2FsbGJhY2spIHtcbiAgICAgIGNvbmZpZy5jYWxsYmFjaygpO1xuICAgIH1cbiAgICBzbm90LmluaXRfY29udHJvbHMoKTtcbiAgICB1cGRhdGUoKTtcbiAgfVxuXG4gIGZ1bmN0aW9uIGxvYWRfYmdfaW1ncyhiZ19pbWdzLCBiZ19yb3RhdGlvbikge1xuICAgIHZhciBiZ19jb25maWcgPSB7XG4gICAgICBmcm9udCA6ICdyb3RhdGVZKDkwZGVnKScgKyAnICAgICAgICAgICAgICAgIHJvdGF0ZVooJyArIGJnX3JvdGF0aW9uWzBdICsgJ2RlZykgIHRyYW5zbGF0ZVooLScgKyAoc25vdC5iZ19zaXplIC8gMikgKyAncHgpJyxcbiAgICAgIGJvdHRvbTogJ3JvdGF0ZVkoOTBkZWcpJyArICdyb3RhdGVYKDkwZGVnKSAgcm90YXRlWignICsgYmdfcm90YXRpb25bMV0gKyAnZGVnKSAgdHJhbnNsYXRlWigtJyArIChzbm90LmJnX3NpemUgLyAyKSArICdweCkgcm90YXRlWig5MGRlZyknLFxuICAgICAgbGVmdCAgOiAncm90YXRlWSg5MGRlZyknICsgJ3JvdGF0ZVkoOTBkZWcpICByb3RhdGVaKCcgKyBiZ19yb3RhdGlvblsyXSArICdkZWcpICB0cmFuc2xhdGVaKC0nICsgKHNub3QuYmdfc2l6ZSAvIDIpICsgJ3B4KScsXG4gICAgICBiYWNrICA6ICdyb3RhdGVZKDkwZGVnKScgKyAncm90YXRlWSgxODBkZWcpIHJvdGF0ZVooJyArIGJnX3JvdGF0aW9uWzNdICsgJ2RlZykgIHRyYW5zbGF0ZVooLScgKyAoc25vdC5iZ19zaXplIC8gMikgKyAncHgpJyxcbiAgICAgIHRvcCAgIDogJ3JvdGF0ZVkoOTBkZWcpJyArICdyb3RhdGVYKC05MGRlZykgcm90YXRlWignICsgYmdfcm90YXRpb25bNF0gKyAnZGVnKSAgdHJhbnNsYXRlWigtJyArIChzbm90LmJnX3NpemUgLyAyKSArICdweCkgcm90YXRlWigtOTBkZWcpJyxcbiAgICAgIHJpZ2h0IDogJ3JvdGF0ZVkoOTBkZWcpJyArICdyb3RhdGVZKC05MGRlZykgcm90YXRlWignICsgYmdfcm90YXRpb25bNV0gKyAnZGVnKSAgdHJhbnNsYXRlWigtJyArIChzbm90LmJnX3NpemUgLyAyKSArICdweCknXG4gICAgfTtcblxuICAgIHZhciBiZ19kb207XG4gICAgdmFyIGNvdW50ID0gMDtcbiAgICBmb3IgKHZhciBpIGluIGJnX2NvbmZpZykge1xuICAgICAgYmdfZG9tID0gZG9jdW1lbnQuZ2V0RWxlbWVudHNCeUNsYXNzTmFtZSgnc25vdC1iZyAnICsgaSlbMF07XG4gICAgICBiZ19kb20uc3R5bGVbJy13ZWJraXQtdHJhbnNmb3JtJ10gPSBiZ19jb25maWdbaV07XG4gICAgICBiZ19kb20uc3R5bGVbJ3dpZHRoJ10gPSBzbm90LmJnX3NpemUgKyAyICsgJ3B4JzsgICAgICAgIC8vIDIgbW9yZSBwaXhlbHMgZm9yIG92ZXJsYXBwaW5nIGdhcHMgKCBjaHJvbWUncyBidWcgKVxuICAgICAgYmdfZG9tLnN0eWxlWydoZWlnaHQnXSA9IHNub3QuYmdfc2l6ZSArIDIgKyAncHgnOyAgICAgICAvLyAyIG1vcmUgcGl4ZWxzIGZvciBvdmVybGFwcGluZyBnYXBzICggY2hyb21lJ3MgYnVnIClcblxuICAgICAgYmdfZG9tLnNldEF0dHJpYnV0ZSgnc3JjJywgYmdfaW1nc1tjb3VudF0pO1xuICAgICAgYmdfZG9tLnNldEF0dHJpYnV0ZSgnZGF0YS1pbmRleCcsIGNvdW50KTtcbiAgICAgICsrY291bnQ7XG4gICAgfVxuICB9XG5cbiAgdmFyIGxvYWRfc3ByaXRlcyA9IGZ1bmN0aW9uKHNwcml0ZXMpIHtcbiAgICBmb3IgKHZhciBpIGluIHNwcml0ZXMpIHtcbiAgICAgIHZhciB0ID0gc3ByaXRlc1tpXTtcbiAgICAgIGlmICh0LnN0YW5kYXJkbGl6YXRpb24pIHtcbiAgICAgICAgdmFyIHN0YW5kYXJkID0gX3BvaW50U3RhbmRhcmRsaXphdGlvbih0LngsdC55LHQueik7XG4gICAgICAgIHQueD1zdGFuZGFyZFswXTtcbiAgICAgICAgdC55PXN0YW5kYXJkWzFdO1xuICAgICAgICB0Lno9c3RhbmRhcmRbMl07XG4gICAgICB9XG5cbiAgICAgIHZhciB0ZW1wX3dyYXBwZXIgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcbiAgICAgIHRlbXBfd3JhcHBlci5pbm5lckhUTUwgPSB0ZW1wbGF0ZShzbm90LmdlbmVyYXRvclt0LmdlbmVyYXRvcl0sIHQpO1xuICAgICAgdmFyIGVsZW1lbnQgPSB0ZW1wX3dyYXBwZXIuZmlyc3RDaGlsZDtcbiAgICAgIGVsZW1lbnQuZGF0YSA9IHNwcml0ZXNbaV07XG4gICAgICBhZGRfc3ByaXRlX2J5X3Bvc2l0aW9uKGVsZW1lbnQsIHQpO1xuICAgIH1cbiAgfVxuXG4gIGZ1bmN0aW9uIGFkZF9zcHJpdGVfYnlfcG9zaXRpb24oZWxlbWVudCwgcCkge1xuXG4gICAgdmFyIHggPSAtIHAueDtcbiAgICB2YXIgeiA9IC0gcC56O1xuICAgIHZhciB5ID0gLSBwLnk7XG5cbiAgICB2YXIgc3ByaXRlQ29udGFpbmVyID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XG4gICAgc3ByaXRlQ29udGFpbmVyLnN0eWxlLmRpc3BsYXkgPSAnaW5saW5lLWJsb2NrJztcbiAgICBzcHJpdGVDb250YWluZXIuc3R5bGUucG9zaXRpb24gPSAnYWJzb2x1dGUnO1xuICAgIHNwcml0ZUNvbnRhaW5lci5jbGFzc05hbWUgPSAnc3ByaXRlLWNvbnRhaW5lcic7XG4gICAgc3ByaXRlQ29udGFpbmVyLmlkID0gZWxlbWVudC5kYXRhLmlkO1xuXG4gICAgc3ByaXRlQ29udGFpbmVyLnN0eWxlWyctd2Via2l0LXRyYW5zZm9ybS1vcmlnaW4teCddID0gJzAnO1xuICAgIHNwcml0ZUNvbnRhaW5lci5zdHlsZVsnLXdlYmtpdC10cmFuc2Zvcm0tb3JpZ2luLXknXSA9ICcwJztcblxuICAgIHZhciBhcmMgPSB4ID09IDAgJiYgeiA9PSAwID8gMCA6IGFjb3MoIHogLyBwb3coeCAqIHggKyB6ICogeiwgMC41KSk7XG5cbiAgICBhcmMgPSB4IDwgMCA/IDIgKiBQSSAtIGFyYyA6IGFyYztcbiAgICBhcmMgPSBhcmMgKiAxODAgLyBQSTtcblxuICAgIHZhciByID0gZGlzdGFuY2UzRCh4LCB5LCB6LCAwLCAwLCAwKTtcbiAgICB4ICs9IHNub3QuYmdfc2l6ZSAvIDI7XG4gICAgeSArPSBzbm90LmJnX3NpemUgLyAyO1xuXG4gICAgc3ByaXRlQ29udGFpbmVyLnN0eWxlWyctd2Via2l0LXRyYW5zZm9ybSddID0gJ3RyYW5zbGF0ZTNkKCcgKyBlcHNpbG9uKHgpICsgJ3B4LCcgKyBlcHNpbG9uKHkpICsgJ3B4LCcgKyBlcHNpbG9uKHopICsgJ3B4KSByb3RhdGVZKCcgKyBlcHNpbG9uKGFyYykgKyAnZGVnKSByb3RhdGVYKCcgKyBlcHNpbG9uKC0gKHkgLSBzbm90LmJnX3NpemUgLyAyKSAvIHIgKiA5MCkrJ2RlZykgcm90YXRlWSgxODBkZWcpJztcblxuICAgIHZhciBzcHJpdGVXcmFwID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XG4gICAgc3ByaXRlV3JhcC5jbGFzc05hbWU9J3Nwcml0ZS13cmFwJztcbiAgICBzcHJpdGVXcmFwLmFwcGVuZENoaWxkKGVsZW1lbnQpO1xuICAgIHNwcml0ZVdyYXAuc2V0QXR0cmlidXRlKCdkYXRhLXZpc2libGUnLCBlbGVtZW50LmRhdGEudmlzaWJsZSA9PSBmYWxzZSA/IGZhbHNlIDogdHJ1ZSk7XG5cbiAgICBzcHJpdGVDb250YWluZXIuYXBwZW5kQ2hpbGQoc3ByaXRlV3JhcCk7XG4gICAgY2FtZXJhX2RvbS5hcHBlbmRDaGlsZChzcHJpdGVDb250YWluZXIpO1xuICB9XG5cbiAgdmFyIHVwZGF0ZV9zcHJpdGVfdmlzaWJpbGl0eSA9IGZ1bmN0aW9uKGlkKSB7XG4gICAgdmFyIHZpc2libGUgPSBzbm90LnNwcml0ZXNbaWRdLnZpc2libGU7XG4gICAgdmFyIHNwcml0ZUNvbnRhaW5lciA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKGlkKTtcbiAgICBzcHJpdGVDb250YWluZXIuZmlyc3RDaGlsZC5zZXRBdHRyaWJ1dGUoJ2RhdGEtdmlzaWJsZScsIHZpc2libGUgPyB0cnVlIDogZmFsc2UpO1xuICB9XG5cbiAgdmFyIHVwZGF0ZV9zcHJpdGVfcG9zaXRpb24gPSBmdW5jdGlvbihpZCkge1xuICAgIHZhciB4ID0gc25vdC5zcHJpdGVzW2lkXS54O1xuICAgIHZhciB5ID0gc25vdC5zcHJpdGVzW2lkXS55O1xuICAgIHZhciB6ID0gc25vdC5zcHJpdGVzW2lkXS56O1xuICAgIHo9LXo7XG4gICAgeT0teTtcbiAgICB2YXIgYXJjID0geCA9PSAwICYmIHogPT0gMCA/IDAgOiBhY29zKCB6IC8gcG93KHggKiB4ICsgeiAqIHosIDAuNSkpO1xuXG4gICAgYXJjID0geCA8IDAgPyAyICogUEkgLSBhcmMgOiBhcmM7XG4gICAgYXJjID0gYXJjICogMTgwLyBQSTtcblxuICAgIHZhciByID0gZGlzdGFuY2UzRCh4LCB5LCB6LCAwLCAwLCAwKTtcbiAgICB4ICs9IHNub3QuYmdfc2l6ZSAvIDI7XG4gICAgeSArPSBzbm90LmJnX3NpemUgLyAyO1xuXG4gICAgdmFyIHNwcml0ZUNvbnRhaW5lciA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKGlkKTtcblxuICAgIHNwcml0ZUNvbnRhaW5lci5zdHlsZVsnLXdlYmtpdC10cmFuc2Zvcm0nXSA9ICd0cmFuc2xhdGUzZCgnICsgZXBzaWxvbih4KSArICdweCwnICsgZXBzaWxvbih5KSArICdweCwnICsgZXBzaWxvbih6KSArICdweCkgcm90YXRlWSgnICsgZXBzaWxvbihhcmMpICsgJ2RlZykgcm90YXRlWCgnICsgZXBzaWxvbigtICh5IC0gc25vdC5iZ19zaXplIC8gMikgLyByICogOTApICsgJ2RlZykgcm90YXRlWSgxODBkZWcpJztcbiAgfVxuXG4gIGZ1bmN0aW9uIHJ1bigpIHtcbiAgICBzbm90Ll9hbmltYXRlSWQgPSByZXF1ZXN0QW5pbWF0aW9uRnJhbWUocnVuKTtcbiAgICBpZiAoIXNub3QucGF1c2VfYW5pbWF0aW9uKSB7XG4gICAgICB1cGRhdGUoKTtcbiAgICB9XG4gIH1cblxuICB2YXIgY2FtZXJhX2V1bGVyID0gbmV3IFRIUkVFLkV1bGVyKCk7XG4gIHZhciB0YXJnZXRfcXVhdCA9IG5ldyBUSFJFRS5RdWF0ZXJuaW9uKCk7XG4gIHZhciByb3RhdGVfOTBfcXVhdCA9IG5ldyBUSFJFRS5RdWF0ZXJuaW9uKC0gc3FydCggMC41ICksIDAsIDAsIHNxcnQoIDAuNSApKVxuICB2YXIgYWRqdXN0X3NjcmVlbl9xdWF0cyA9IHtcbiAgICAwOiBuZXcgVEhSRUUuUXVhdGVybmlvbigpLnNldEZyb21BeGlzQW5nbGUobmV3IFRIUkVFLlZlY3RvcjMoMCwgMCwgMSksIDApLFxuICAgIDkwOiBuZXcgVEhSRUUuUXVhdGVybmlvbigpLnNldEZyb21BeGlzQW5nbGUobmV3IFRIUkVFLlZlY3RvcjMoMCwgMCwgMSksIC0gOTApLFxuICAgIDE4MDogbmV3IFRIUkVFLlF1YXRlcm5pb24oKS5zZXRGcm9tQXhpc0FuZ2xlKG5ldyBUSFJFRS5WZWN0b3IzKDAsIDAsIDEpLCAtIDE4MCksXG4gICAgJy05MCc6IG5ldyBUSFJFRS5RdWF0ZXJuaW9uKCkuc2V0RnJvbUF4aXNBbmdsZShuZXcgVEhSRUUuVmVjdG9yMygwLCAwLCAxKSwgOTApLFxuICB9O1xuICB2YXIgbG9va19hdF9ldWxlciA9IG5ldyBUSFJFRS5FdWxlcigpO1xuXG4gIGZ1bmN0aW9uIHVwZGF0ZV9jYW1lcmEoeCwgeSwgeikge1xuXG4gICAgY2FtZXJhX2V1bGVyLnNldCh5LCB4LCB6LCAnWVhaJyk7IC8vICdaWFknIGZvciB0aGUgZGV2aWNlLCBidXQgJ1lYWicgZm9yIHVzXG5cbiAgICB0YXJnZXRfcXVhdC5zZXRGcm9tRXVsZXIoY2FtZXJhX2V1bGVyKTsgLy8gb3JpZW50IHRoZSBkZXZpY2VcblxuICAgIHRhcmdldF9xdWF0Lm11bHRpcGx5KHJvdGF0ZV85MF9xdWF0KTsgLy8gY2FtZXJhIGxvb2tzIG91dCB0aGUgYmFjayBvZiB0aGUgZGV2aWNlLCBub3QgdGhlIHRvcFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gLSBQSS8yIGFyb3VuZCB0aGUgeC1heGlzXG4gICAgdGFyZ2V0X3F1YXQubXVsdGlwbHkoYWRqdXN0X3NjcmVlbl9xdWF0c1tzbm90LmNvbnRyb2xzLnNjcmVlbl9vcmllbnRhdGlvbl0pOyAvLyBhZGp1c3QgZm9yIHNjcmVlbiBvcmllbnRhdGlvblxuXG4gICAgdmFyIHNsZXJwX3F1YXQgPSBuZXcgVEhSRUUuUXVhdGVybmlvbigpO1xuICAgIFRIUkVFLlF1YXRlcm5pb24uc2xlcnAodGFyZ2V0X3F1YXQsIHByZXZpb3VzX3F1YXQsIHNsZXJwX3F1YXQsIHNub3Quc21vb3RoKTtcbiAgICBwcmV2aW91c19xdWF0ID0gc2xlcnBfcXVhdDtcbiAgICB2YXIgbG9va19hdF9xdWF0ID0gc2xlcnBfcXVhdC5jbG9uZSgpO1xuICAgIGxvb2tfYXRfcXVhdC54ICo9IC0xO1xuICAgIGxvb2tfYXRfcXVhdC56ICo9IC0xO1xuICAgIHZhciBsb29rX2F0X21hdCA9IG1fbWFrZV9yb3RhdGlvbl9mcm9tX3F1YXRlcm5pb24obG9va19hdF9xdWF0Lm5vcm1hbGl6ZSgpKS50cmFuc3Bvc2UoKTtcbiAgICBmb3IgKHZhciBpID0gMDsgaSA8IGxvb2tfYXRfbWF0LmVsZW1lbnRzLmxlbmd0aDsgKytpKSB7XG4gICAgICBsb29rX2F0X21hdC5lbGVtZW50c1tpXSA9IGVwc2lsb24obG9va19hdF9tYXQuZWxlbWVudHNbaV0pO1xuICAgIH1cbiAgICB2YXIgbG9va19hdF9yb3QgPSBsb29rX2F0X2V1bGVyLnNldEZyb21Sb3RhdGlvbk1hdHJpeChsb29rX2F0X21hdCwgJ1haWScpO1xuXG4gICAgc25vdC5yeCA9IGxvb2tfYXRfcm90Ll94ICogMTgwIC8gUEk7XG4gICAgc25vdC5yeSA9IC0gbG9va19hdF9yb3QuX3kgKiAxODAgLyBQSTtcbiAgICBzbm90LnJ6ID0gbG9va19hdF9yb3QuX3ogKiAxODAgLyBQSTtcblxuICAgIHNub3QuY2FtZXJhX2xvb2tfYXQgPSB2X3NldF9mcm9tX21hdHJpeF9wb3NpdGlvbihtX211bHRpcGx5KFxuICAgICAgbV9tYWtlX3JvdGF0aW9uX2F4aXMoe3g6IDAsIHk6IDEsIHo6IDB9LCBsb29rX2F0X3JvdC5feSksXG4gICAgICBtX21ha2Vfcm90YXRpb25fYXhpcyh7eDogMCwgeTogMCwgejogMX0sIGxvb2tfYXRfcm90Ll96KSxcbiAgICAgIG1fbWFrZV9yb3RhdGlvbl9heGlzKHt4OiAxLCB5OiAwLCB6OiAwfSwgLSBsb29rX2F0X3JvdC5feCksXG4gICAgICBtX3NldF9wb3NpdGlvbih7eDogMCwgeTogMCwgejogMX0pXG4gICAgKSk7IC8vIGJhZCBwZXJmb3JtYW5jZSBoZXJlXG5cbiAgICBjYW1lcmFfZG9tLnN0eWxlLnRyYW5zZm9ybSA9ICd0cmFuc2xhdGVaKCcgKyBlcHNpbG9uKHNub3QucGVyc3BlY3RpdmUpICsgJ3B4KScgKyBcIiBtYXRyaXgzZChcIiArIGxvb2tfYXRfbWF0LmVsZW1lbnRzICsgXCIpXCIrIGNhbWVyYV9iYXNlX3RyYW5zZm9ybTtcbiAgfVxuXG4gIGZ1bmN0aW9uIHVwZGF0ZSgpIHtcbiAgICBzbm90LmZyYW1lcysrO1xuXG4gICAgaWYgKHNub3QuZ3lybykge1xuICAgICAgaWYgKHNub3QuY29udHJvbHMuZ3lyb19kYXRhLmFscGhhID09PSAtMSAmJiBzbm90LmNvbnRyb2xzLmd5cm9fZGF0YS5iZXRhID09PSAtMSAmJiBzbm90LmNvbnRyb2xzLmd5cm9fZGF0YS5nYW1tYSA9PT0gLSAxKSB7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cblxuICAgICAgdXBkYXRlX2NhbWVyYShzbm90LmNvbnRyb2xzLmd5cm9fZGF0YS5hbHBoYSwgc25vdC5jb250cm9scy5neXJvX2RhdGEuYmV0YSwgLSBzbm90LmNvbnRyb2xzLmd5cm9fZGF0YS5nYW1tYSk7XG4gICAgfSBlbHNlIHtcbiAgICAgIGlmIChwcmV2X2d5cm8pIHtcbiAgICAgICAgc25vdC5kZXN0X3J4ID0gMDtcbiAgICAgICAgc25vdC5kZXN0X3J5ID0gMDtcbiAgICAgIH1cbiAgICAgIHNub3QuZGVzdF9yeSAtPSBzbm90LmF1dG9fcm90YXRpb247XG4gICAgICB1cGRhdGVfY2FtZXJhKC0gc25vdC5kZXN0X3J5ICogUEkgLyAxODAsIHNub3QuZGVzdF9yeCAqIFBJIC8gMTgwICsgUEkvMiwgMCk7XG4gICAgfVxuICAgIHByZXZfZ3lybyA9IHNub3QuZ3lybztcblxuICAgIGZvciAodmFyIGkgaW4gc25vdC5zcHJpdGVzKSB7XG4gICAgICB2YXIgc3ByaXRlID0gc25vdC5zcHJpdGVzW2ldO1xuICAgICAgaWYgKHNwcml0ZS5uZWVkX3VwZGF0ZV9wb3NpdGlvbikge1xuICAgICAgICBzcHJpdGUubmVlZF91cGRhdGVfcG9zaXRpb24gPSBmYWxzZTtcbiAgICAgICAgdXBkYXRlX3Nwcml0ZV9wb3NpdGlvbihzcHJpdGUuaWQpO1xuICAgICAgfVxuICAgICAgaWYgKHNwcml0ZS5uZWVkX3VwZGF0ZV92aXNpYmlsaXR5KSB7XG4gICAgICAgIHNwcml0ZS5uZWVkX3VwZGF0ZV92aXNpYmlsaXR5ID0gZmFsc2U7XG4gICAgICAgIHVwZGF0ZV9zcHJpdGVfdmlzaWJpbGl0eShzcHJpdGUuaWQpO1xuICAgICAgfVxuICAgIH1cbiAgICBpZiAoc25vdC5kZWJ1Zykge1xuICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2xvZ2dlcicpLmlubmVySFRNTCA9ICdyeDonICsgcGFyc2VJbnQoc25vdC5yeCkgKyAnICcgK1xuICAgICAgICAgICAgICAgICAgICAgICAgJ3J5OicgKyBwYXJzZUludChzbm90LnJ5KSArICcgJyArXG4gICAgICAgICAgICAgICAgICAgICAgICAncno6JyArIHBhcnNlSW50KHNub3QucnopO1xuICAgIH1cbiAgfVxuXG5cbiAgc25vdC5jb250cm9scy5tb3VzZV9jbGljayA9IGZ1bmN0aW9uKHgsIHkpIHtcbiAgICB2YXIgUiA9IDEwMDtcbiAgICB2YXIgZm92ID0gc25vdC5mb3Y7XG4gICAgdmFyIGJnX3NpemUgPSBzbm90LmJnX3NpemU7XG4gICAgdmFyIGFyY0ZhY3RvciA9IE1hdGguUEkgLyAxODA7XG4gICAgdmFyIHJ6ID0gc25vdC5yeiAqIGFyY0ZhY3RvcjtcbiAgICB2YXIgd2lkdGggPSBzbm90LndpZHRoO1xuICAgIHZhciBoZWlnaHQgPSBzbm90LmhlaWdodDtcblxuICAgIHZhciByeSA9ICh4IC8gd2lkdGggLSAwLjUpICogZm92O1xuICAgIHZhciByeCA9ICh5IC8gaGVpZ2h0LTAuNSkgKiBmb3YgKiBoZWlnaHQgLyB3aWR0aDtcbiAgICB2YXIgciA9IGNvcyhmb3YgLyAyICogYXJjRmFjdG9yKSAqIGJnX3NpemU7XG4gICAgdmFyIHJhdGlveCA9ICh4IC0gd2lkdGggLyAyKSAvIHdpZHRoICogMjtcbiAgICB2YXIgcmF0aW95ID0gKHkgLSBoZWlnaHQgLyAyKSAvIHdpZHRoICogMjtcbiAgICB2YXIgUCA9IHNpbihmb3YgLyAyICogYXJjRmFjdG9yKSAqIGJnX3NpemU7XG5cbiAgICByeSA9IGF0YW4ocmF0aW94ICogUCAvIHIpO1xuICAgIHJ4ID0gYXRhbihyYXRpb3kgKiBQIC8gcik7XG5cbiAgICByeSAqPSAxODAgLyBQSTtcbiAgICByeCAqPSAxODAgLyBQSTtcblxuICAgIHZhciB4eXoyID0gdXRpbC5yb3RhdGlvbl90b19wb3NpdGlvbihSLCByeCwgMCk7XG5cbiAgICB2YXIgcnIgPSBkaXN0YW5jZTNEKC0gdGFuKHJ5ICogYXJjRmFjdG9yKSAqIHh5ejJbMl0sIC0geHl6MlsxXSwgeHl6MlsyXSwgMCwgMCwgMCk7XG4gICAgdmFyIHJhdGlvID0gUiAvIHJyO1xuXG4gICAgdmFyIG5ld194ID0gLSB0YW4ocnkgKiBQSSAvIDE4MCkgKiB4eXoyWzJdICogcmF0aW87XG4gICAgdmFyIG5ld195ID0gLSB4eXoyWzFdICogcmF0aW87XG4gICAgdmFyIG5ld196ID0geHl6MlsyXSAqIHJhdGlvO1xuXG4gICAgdmFyIHBvcyA9IHZfc2V0X2Zyb21fbWF0cml4X3Bvc2l0aW9uKG1fbXVsdGlwbHkoXG4gICAgICBtX21ha2Vfcm90YXRpb25fYXhpcyh7eDogMCwgeTogMSwgejogMH0sIHNub3QucnkgKiBQSSAvIDE4MCksXG4gICAgICBtX21ha2Vfcm90YXRpb25fYXhpcyh7eDogMCwgeTogMCwgejogMX0sIC0gc25vdC5yeiAqIFBJIC8gMTgwKSxcbiAgICAgIG1fbWFrZV9yb3RhdGlvbl9heGlzKHt4OiAxLCB5OiAwLCB6OiAwfSwgLSBzbm90LnJ4ICogUEkgLyAxODApLFxuICAgICAgbV9zZXRfcG9zaXRpb24oe3g6IG5ld194LCB5OiBuZXdfeSwgejogbmV3X3p9KVxuICAgICkpO1xuXG4gICAgYXggPSBwb3MueDtcbiAgICBheSA9IHBvcy55O1xuICAgIGF6ID0gcG9zLno7XG5cbiAgICB2YXIgbWluX29mZnNldCA9IDAuNDtcbiAgICB2YXIgbWluX2Rpc3RhbmNlID0gc25vdC5taW5fZGV0ZWN0X2Rpc3RhbmNlO1xuICAgIHZhciBuZWFyZXN0O1xuXG4gICAgdmFyIHNwcml0ZUNvbnRhaW5lcnMgPSBkb2N1bWVudC5nZXRFbGVtZW50c0J5Q2xhc3NOYW1lKCdzcHJpdGUtY29udGFpbmVyJyk7XG4gICAgZm9yICh2YXIgaSA9IDAgO2kgPCBzcHJpdGVDb250YWluZXJzLmxlbmd0aDsgKytpKSB7XG4gICAgICB2YXIgc2VsZiA9IHNwcml0ZUNvbnRhaW5lcnNbaV07XG4gICAgICB2YXIgbWF0cml4ID0gdXRpbC5jc3NfdGV4dF90b19tYXRyaXgoc2VsZi5zdHlsZS53ZWJraXRUcmFuc2Zvcm0pO1xuICAgICAgdmFyIHJhdGVfID0gMTAwIC8gZGlzdGFuY2UzRCgwLCAwLCAwLCBzbm90LmJnX3NpemUgLyAyIC0gbWF0cml4WzEyXSwgbWF0cml4WzEzXSAtIHNub3QuYmdfc2l6ZSAvIDIsIC0gbWF0cml4WzE0XSk7XG5cbiAgICAgIHZhciBkaXN0YW5jZSA9IGRpc3RhbmNlM0QoYXgsIC0gYXksIGF6LCAoc25vdC5iZ19zaXplIC8gMiAtIG1hdHJpeFsxMl0pICogcmF0ZV8sIHJhdGVfICogKG1hdHJpeFsxM10gLSBzbm90LmJnX3NpemUgLyAyKSwgcmF0ZV8gKiAoIC0gbWF0cml4WzE0XSkpO1xuICAgICAgaWYgKGRpc3RhbmNlIDwgbWluX2Rpc3RhbmNlKSB7XG4gICAgICAgIG1pbl9kaXN0YW5jZSA9IGRpc3RhbmNlO1xuICAgICAgICBuZWFyZXN0ID0gc2VsZi5jaGlsZHJlblswXTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICB2YXIgcm90YXRpb24gPSB1dGlsLnBvc2l0aW9uX3RvX3JvdGF0aW9uKGF4LCBheiwgYXkpO1xuICAgIGlmIChuZWFyZXN0KSB7XG4gICAgICBzbm90Lm9uX3Nwcml0ZV9jbGljayhzbm90LnNwcml0ZXNbbmVhcmVzdC5wYXJlbnRFbGVtZW50LmlkXSwgbmVhcmVzdCk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHNub3Qub25fY2xpY2soe1xuICAgICAgICB4OiBheCxcbiAgICAgICAgeTogYXksXG4gICAgICAgIHo6IGF6LFxuICAgICAgfSwge1xuICAgICAgICByeDogcm90YXRpb25bMF0sXG4gICAgICAgIHJ5OiByb3RhdGlvblsxXVxuICAgICAgfSk7XG4gICAgfVxuICB9XG5cbiAgdXRpbC5tZXJnZV9qc29uKHNub3QsIHtcbiAgICBzZXRfZm92OiBzZXRfZm92LFxuICAgIGluaXQ6IGluaXQsXG4gICAgcnVuOiBydW4sXG4gICAgdXBkYXRlOiB1cGRhdGUsXG4gICAgbG9hZF9zcHJpdGVzOiBsb2FkX3Nwcml0ZXMsXG4gIH0pO1xufSh3aW5kb3cpO1xuIiwiIWZ1bmN0aW9uKGdsb2JhbCkge1xuXG4gIHZhciBQSSA9IE1hdGguUEk7XG4gIHZhciBzbm90ID0ge1xuXG4gICAgY2FtZXJhX2xvb2tfYXQ6IHtcbiAgICAgIHg6IDAsXG4gICAgICB5OiAwLFxuICAgICAgejogMSxcbiAgICB9LFxuICAgIGNvbnRyb2xzOiB7XG4gICAgICBzY3JlZW5fb3JpZW50YXRpb246IDAsXG4gICAgICBneXJvX2RhdGE6IHtcbiAgICAgICAgYWxwaGE6IDAsXG4gICAgICAgIGJldGE6IDkwICogUEkgLyAxODAsXG4gICAgICAgIGdhbW1hOiAwXG4gICAgICB9LFxuICAgIH0sXG4gICAgbW91c2Vfc2Vuc2l0aXZpdHk6IDAuMyxcbiAgICBhdXRvX3JvdGF0aW9uOiAwLFxuICAgIGZyYW1lczowLFxuICAgIGJnX3JvdGF0aW9uOiBbMCwgMCwgMCwgMCwgMCwgMF0sXG5cbiAgICBwYXVzZV9hbmltYXRpb246IGZhbHNlLFxuICAgIGdlbmVyYXRvcjoge30sXG5cbiAgICBkb20gICAgICA6IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdzbm90LXdyYXAnKSxcbiAgICBjYW1lcmEgICA6IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdzbm90LWNhbWVyYScpLFxuICAgIGNvbnRhaW5lcjogZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3Nub3QtY29udGFpbmVyJyksXG5cbiAgICBiZ19zaXplOiAxMDI0LFxuXG4gICAgZ3lybzogZmFsc2UsXG5cbiAgICBzbW9vdGg6IDAuODMsXG4gICAgcXVhdGVybmlvbjoge30sXG5cbiAgICByejogMCxcbiAgICByeTogMCwgICAgICAgLy8gUm90YXRlICogZGVncmVlIGFyb3VuZCB5IGF4aXNcbiAgICByeDogMCwgICAgICAgLy8gUm90YXRlICogZGVncmVlIGFyb3VuZCB4IGF4aXNcblxuICAgIGRlc3Rfcng6IDAsXG4gICAgZGVzdF9yeTogMCxcbiAgICBkZXN0X3J6OiAwLFxuXG4gICAgbWF4X2ZvdjogMTIwLCAvLyBNYXggZmllbGQgb2YgdmlldyAoZGVncmVlKVxuICAgIG1pbl9mb3Y6IDYwLCAgLy8gTWluIGZpZWxkIG9mIHZpZXcgKGRlZ3JlZSlcbiAgICBmb3Y6IDkwLCAgICAgLy8gRGVmYXVsdCBmaWVsZCBvZiB2aWV3XG4gIH07XG5cbiAgdmFyIHV0aWwgPSBnbG9iYWwuc25vdC51dGlsO1xuICB1dGlsLm1lcmdlX2pzb24oZ2xvYmFsLnNub3QsIHNub3QpO1xuICBzbm90ID0gZ2xvYmFsLnNub3Q7XG4gIHZhciBlcHNpbG9uID0gdXRpbC5lcHNpbG9uO1xuICB2YXIgZGlzdGFuY2UzRCA9IHV0aWwuZGlzdGFuY2UzRDtcbiAgdmFyIGRpc3RhbmNlMkQgPSB1dGlsLmRpc3RhbmNlMkQ7XG5cbiAgdmFyIGNhbWVyYTtcbiAgdmFyIHNjZW5lO1xuICB2YXIgcmVuZGVyZXI7XG4gIHZhciBiZ19tYXRlcmlhbHMgPSBbXTtcbiAgdmFyIHN1c3BlY3RzID0gW107XG4gIHZhciBzcHJpdGVzID0ge307XG4gIHZhciBfb3ZlcmRyYXcgPSAxO1xuICBUSFJFRS5JbWFnZVV0aWxzLmNyb3NzT3JpZ2luID0gJyonO1xuXG4gIHZhciBtb3VzZV9kb3duX3g7XG4gIHZhciBtb3VzZV9kb3duX3J4O1xuICB2YXIgbW91c2VfZG93bl9yeTtcbiAgdmFyIG1vdXNlX2Rvd25feTtcbiAgdmFyIGlzX21vdXNlX2Rvd24gPSBmYWxzZTtcblxuICAvLzAgICAgIDEgICAgMiAgICAzICAgIDQgICA1XG4gIC8vZnJvbnQgZG93biBsZWZ0IGJhY2sgdG9wIHJpZ2h0XG4gIC8vZnJvbnQgZG93biBsZWZ0IGJhY2sgdG9wIHJpZ2h0XG4gIHZhciBpbWdfaW5kZXhfY29udmVydCA9IFszLCAwLCA0LCAxLCA1LCAyXTtcbiAgZnVuY3Rpb24gbG9hZF9iZ19pbWdzKGltZ3MpIHtcbiAgICBpZiAoaW1ncy5sZW5ndGggPT0gMSkge1xuICAgICAgdmFyIFNwaGVyZUdlb21ldHJ5ID0gbmV3IFRIUkVFLlNwaGVyZUdlb21ldHJ5KHNub3QuYmdfc2l6ZSwgMzIsIDMyKTtcbiAgICAgIFNwaGVyZUdlb21ldHJ5LnNjYWxlKC0gMSwgMSwgMSk7XG4gICAgICB2YXIgU3BoZXJlTWF0ZXJpYWwgPSBuZXcgVEhSRUUuTWVzaEJhc2ljTWF0ZXJpYWwoe1xuICAgICAgICBtYXA6IG5ldyBUSFJFRS5UZXh0dXJlTG9hZGVyKCkubG9hZChpbWdzWzBdKVxuICAgICAgfSk7XG4gICAgICB2YXIgU3BoZXJlTWVzaCA9IG5ldyBUSFJFRS5NZXNoKFNwaGVyZUdlb21ldHJ5LCBTcGhlcmVNYXRlcmlhbCk7XG4gICAgICBzY2VuZS5hZGQoU3BoZXJlTWVzaCk7XG4gICAgfSBlbHNlIGlmIChpbWcubGVuZ3RoID09IDYpIHtcbiAgICAgIHZhciBzaXplID0gc25vdC5iZ19zaXplO1xuICAgICAgdmFyIHByZWNpc2lvbiA9IDE7XG4gICAgICB2YXIgZ2VvbWV0cnkgPSBuZXcgVEhSRUUuQm94R2VvbWV0cnkoc2l6ZSwgc2l6ZSwgc2l6ZSwgcHJlY2lzaW9uLCBwcmVjaXNpb24sIHByZWNpc2lvbik7XG4gICAgICBmb3IgKHZhciBpbmRleCA9IDA7aW5kZXggPCA2OyArK2luZGV4KSB7XG4gICAgICAgIHZhciBpbWdfdXJsID0gaW1nc1tpbWdfaW5kZXhfY29udmVydFtpbmRleF1dO1xuICAgICAgICBiZ19tYXRlcmlhbHMucHVzaChuZXcgVEhSRUUuTWVzaEJhc2ljTWF0ZXJpYWwoe1xuICAgICAgICAgIG1hcDogVEhSRUUuSW1hZ2VVdGlscy5sb2FkVGV4dHVyZShpbWdfdXJsLCBUSFJFRS5VVk1hcHBpbmcpLFxuICAgICAgICAgIG92ZXJkcmF3OiBfb3ZlcmRyYXdcbiAgICAgICAgfSkpO1xuICAgICAgfVxuICAgICAgdmFyIG1hdGVyaWFsPSBuZXcgVEhSRUUuTWVzaEZhY2VNYXRlcmlhbChiZ19tYXRlcmlhbHMpO1xuICAgICAgdmFyIG1lc2ggPSBuZXcgVEhSRUUuTWVzaChnZW9tZXRyeSwgbWF0ZXJpYWwpO1xuICAgICAgbWVzaC5zY2FsZS54ID0gLSAxO1xuXG4gICAgICBzY2VuZS5hZGQobWVzaCk7XG4gICAgfVxuICB9XG4gIGZ1bmN0aW9uIGluaXQoY29uZmlnKSB7XG4gICAgZm9yICh2YXIgaSBpbiBjb25maWcpIHtcbiAgICAgIGlmIChpID09ICdnZW5lcmF0b3InKSB7XG4gICAgICAgIGZvciAodmFyIGogaW4gY29uZmlnLmdlbmVyYXRvcikge1xuICAgICAgICAgIHNub3QuZ2VuZXJhdG9yW2pdID0gY29uZmlnLmdlbmVyYXRvcltqXTtcbiAgICAgICAgfVxuICAgICAgICBjb250aW51ZTtcbiAgICAgIH1cbiAgICAgIHNub3RbaV0gPSBjb25maWdbaV07XG4gICAgfVxuICAgIHZhciBzbW9vdGggPSBzbm90LnNtb290aDtcbiAgICBzbm90LnNtb290aCA9IDA7XG4gICAgZm9yICh2YXIgaSBpbiBzcHJpdGVzKSB7XG4gICAgICBzY2VuZS5yZW1vdmUoc2NlbmUuZ2V0T2JqZWN0QnlOYW1lKGkpKTtcbiAgICB9XG4gICAgc3ByaXRlcyA9IHt9O1xuXG4gICAgdmFyIGNvbnRhaW5lciA9IHNub3QuY29udGFpbmVyO1xuICAgIGNhbWVyYSA9IG5ldyBUSFJFRS5QZXJzcGVjdGl2ZUNhbWVyYShzbm90LmZvdiwgd2luZG93LmlubmVyV2lkdGggLyB3aW5kb3cuaW5uZXJIZWlnaHQsIDEsIHNub3QuYmdfc2l6ZSk7XG4gICAgY2FtZXJhLnRhcmdldCA9IG5ldyBUSFJFRS5WZWN0b3IzKDAsIDAsIDApO1xuICAgIHNub3QuY2FtZXJhID0gY2FtZXJhO1xuXG4gICAgc2NlbmUgPSBuZXcgVEhSRUUuU2NlbmUoKTtcblxuICAgIGlmIChjb25maWcuY2FsbGJhY2spIHtcbiAgICAgIGNvbmZpZy5jYWxsYmFjaygpO1xuICAgIH1cbiAgICBsb2FkX2JnX2ltZ3MoY29uZmlnLmJnX2ltZ3MpO1xuXG4gICAgdmFyIFNwaGVyZUdlb21ldHJ5ID0gbmV3IFRIUkVFLlNwaGVyZUdlb21ldHJ5KHNub3QuYmdfc2l6ZSAqIDIsIDMyLCAzMik7XG4gICAgdmFyIFNwaGVyZU1hdGVyaWFsID0gbmV3IFRIUkVFLk1lc2hCYXNpY01hdGVyaWFsKHtzaWRlOiBUSFJFRS5Eb3VibGVTaWRlfSk7XG4gICAgdmFyIFNwaGVyZU1lc2ggPSBuZXcgVEhSRUUuTWVzaChTcGhlcmVHZW9tZXRyeSwgU3BoZXJlTWF0ZXJpYWwpO1xuICAgIHNjZW5lLmFkZChTcGhlcmVNZXNoKTtcbiAgICBzdXNwZWN0cy5wdXNoKFNwaGVyZU1lc2gpO1xuXG4gICAgbG9hZF9zcHJpdGVzKGNvbmZpZy5zcHJpdGVzKTtcblxuICAgIHJlbmRlcmVyID0gbmV3IFRIUkVFLldlYkdMUmVuZGVyZXIoKTtcblxuICAgIHJlbmRlcmVyLnNldFBpeGVsUmF0aW8od2luZG93LmRldmljZVBpeGVsUmF0aW8pO1xuICAgIHJlbmRlcmVyLnNldFNpemUod2luZG93LmlubmVyV2lkdGgsIHdpbmRvdy5pbm5lckhlaWdodCk7XG4gICAgY29udGFpbmVyLmFwcGVuZENoaWxkKHJlbmRlcmVyLmRvbUVsZW1lbnQpO1xuXG4gICAgdXBkYXRlKCk7XG4gICAgc25vdC5zbW9vdGggPSBzbW9vdGg7XG4gICAgc25vdC5pbml0X2NvbnRyb2xzKCk7XG4gIH1cblxuICBzbm90LmNvbnRyb2xzLm1vdXNlX2NsaWNrID0gZnVuY3Rpb24oeCwgeSkge1xuICAgIHZhciByYXljYXN0ZXIgPSBuZXcgVEhSRUUuUmF5Y2FzdGVyKCk7XG4gICAgdmFyIG1vdXNlID0gbmV3IFRIUkVFLlZlY3RvcjIoKTtcbiAgICBtb3VzZS5zZXQoKHggLyB3aW5kb3cuaW5uZXJXaWR0aCkgKiAyIC0gMSwgLSAoeSAvIHdpbmRvdy5pbm5lckhlaWdodCkgKiAyICsgMSk7XG4gICAgcmF5Y2FzdGVyLnNldEZyb21DYW1lcmEobW91c2UsIGNhbWVyYSk7XG4gICAgcmF5Y2FzdGVyLmZhciA9IHNub3QuYmdfc2l6ZSAqIDI7XG4gICAgdmFyIGludGVyc2VjdHMgPSByYXljYXN0ZXIuaW50ZXJzZWN0T2JqZWN0cyhzdXNwZWN0cyk7XG4gICAgaWYgKGludGVyc2VjdHMubGVuZ3RoICE9IDApIHtcbiAgICAgIHZhciBwb2ludCA9IGludGVyc2VjdHNbMF0ucG9pbnQ7XG4gICAgICBpZiAoaW50ZXJzZWN0c1swXS5vYmplY3QuZGF0YSkge1xuICAgICAgICBzbm90Lm9uX3Nwcml0ZV9jbGljayhpbnRlcnNlY3RzWzBdLm9iamVjdC5kYXRhKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHZhciByb3RhdGlvbiA9IHV0aWwucG9zaXRpb25fdG9fcm90YXRpb24ocG9pbnQueCwgcG9pbnQueSwgcG9pbnQueik7XG4gICAgICAgIHNub3Qub25fY2xpY2socG9pbnQsIHJvdGF0aW9uKTtcbiAgICAgIH1cbiAgICB9XG4gIH07XG5cbiAgdmFyIHNxcnQgPSBNYXRoLnNxcnQ7XG4gIHZhciBjYW1lcmFfZXVsZXIgPSBuZXcgVEhSRUUuRXVsZXIoKTtcbiAgdmFyIHRhcmdldF9xdWF0ID0gbmV3IFRIUkVFLlF1YXRlcm5pb24oKTtcbiAgdmFyIHJvdGF0ZV85MF9xdWF0ID0gbmV3IFRIUkVFLlF1YXRlcm5pb24oLSBzcXJ0KCAwLjUgKSwgMCwgMCwgc3FydCggMC41ICkpXG4gIHZhciBhZGp1c3Rfc2NyZWVuX3F1YXRzID0ge1xuICAgIDA6IG5ldyBUSFJFRS5RdWF0ZXJuaW9uKCkuc2V0RnJvbUF4aXNBbmdsZShuZXcgVEhSRUUuVmVjdG9yMygwLCAwLCAxKSwgMCksXG4gICAgOTA6IG5ldyBUSFJFRS5RdWF0ZXJuaW9uKCkuc2V0RnJvbUF4aXNBbmdsZShuZXcgVEhSRUUuVmVjdG9yMygwLCAwLCAxKSwgLSA5MCksXG4gICAgMTgwOiBuZXcgVEhSRUUuUXVhdGVybmlvbigpLnNldEZyb21BeGlzQW5nbGUobmV3IFRIUkVFLlZlY3RvcjMoMCwgMCwgMSksIC0gMTgwKSxcbiAgICAnLTkwJzogbmV3IFRIUkVFLlF1YXRlcm5pb24oKS5zZXRGcm9tQXhpc0FuZ2xlKG5ldyBUSFJFRS5WZWN0b3IzKDAsIDAsIDEpLCA5MCksXG4gIH07XG5cbiAgZnVuY3Rpb24gdXBkYXRlKCkge1xuXG4gICAgc25vdC5yeSArPSBzbm90LmF1dG9fcm90YXRpb247XG5cbiAgICB2YXIgcnkgPSBzbm90LmRlc3RfcnggKiBNYXRoLlBJIC8gMTgwICsgTWF0aC5QSSAvIDI7XG4gICAgdmFyIHJ4ID0gLSBzbm90LmRlc3RfcnkgKiBNYXRoLlBJIC8gMTgwICsgTWF0aC5QSTtcbiAgICB2YXIgcnogPSAwO1xuXG4gICAgaWYgKHNub3QuZ3lybykge1xuICAgICAgcnkgPSBzbm90LmNvbnRyb2xzLmd5cm9fZGF0YS5iZXRhO1xuICAgICAgcnggPSBzbm90LmNvbnRyb2xzLmd5cm9fZGF0YS5hbHBoYTtcbiAgICAgIHJ6ID0gLSBzbm90LmNvbnRyb2xzLmd5cm9fZGF0YS5nYW1tYTtcbiAgICB9XG5cbiAgICBjYW1lcmEuYXV0b1VwZGF0ZU1hdHJpeCA9IGZhbHNlO1xuXG4gICAgY2FtZXJhX2V1bGVyLnNldChyeSwgcngsIHJ6LCAnWVhaJyk7IC8vICdaWFknIGZvciB0aGUgZGV2aWNlLCBidXQgJ1lYWicgZm9yIHVzXG5cbiAgICB0YXJnZXRfcXVhdC5zZXRGcm9tRXVsZXIoY2FtZXJhX2V1bGVyKTsgLy8gb3JpZW50IHRoZSBkZXZpY2VcbiAgICB0YXJnZXRfcXVhdC5tdWx0aXBseShyb3RhdGVfOTBfcXVhdCk7IC8vIGNhbWVyYSBsb29rcyBvdXQgdGhlIGJhY2sgb2YgdGhlIGRldmljZSwgbm90IHRoZSB0b3BcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIC0gUEkvMiBhcm91bmQgdGhlIHgtYXhpc1xuICAgIHRhcmdldF9xdWF0Lm11bHRpcGx5KGFkanVzdF9zY3JlZW5fcXVhdHNbc25vdC5jb250cm9scy5zY3JlZW5fb3JpZW50YXRpb25dKTsgLy8gYWRqdXN0IGZvciBzY3JlZW4gb3JpZW50YXRpb25cblxuICAgIHZhciBuZXdfcXVhdCA9IG5ldyBUSFJFRS5RdWF0ZXJuaW9uKCk7XG4gICAgVEhSRUUuUXVhdGVybmlvbi5zbGVycChjYW1lcmEucXVhdGVybmlvbiwgdGFyZ2V0X3F1YXQsIG5ld19xdWF0LCAxIC0gc25vdC5zbW9vdGgpO1xuICAgIGNhbWVyYS5xdWF0ZXJuaW9uLmNvcHkobmV3X3F1YXQpO1xuICAgIGNhbWVyYS5xdWF0ZXJuaW9uLm5vcm1hbGl6ZSgpO1xuXG4gICAgdmFyIGV1bGVyID0gbmV3IFRIUkVFLkV1bGVyKCk7XG4gICAgZXVsZXIub3JkZXIgPSAnWVhaJztcbiAgICBldWxlci5zZXRGcm9tUXVhdGVybmlvbihjYW1lcmEucXVhdGVybmlvbilcbiAgICBzbm90LnJ4ID0gZXVsZXIueCAqIDE4MCAvIE1hdGguUEk7XG4gICAgc25vdC5yeSA9IGV1bGVyLnkgKiAxODAgLyBNYXRoLlBJIC0gMTgwO1xuICAgIHNub3QucnogPSBldWxlci56ICogMTgwIC8gTWF0aC5QSTtcblxuICAgIGNhbWVyYS5mb3YgPSBzbm90LmZvdjtcbiAgICBjYW1lcmEudXBkYXRlUHJvamVjdGlvbk1hdHJpeCgpO1xuICAgIHJlbmRlcmVyLnJlbmRlcihzY2VuZSwgY2FtZXJhKTtcblxuICAgIGlmIChzbm90LmRlYnVnKSB7XG4gICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnbG9nZ2VyJykuaW5uZXJIVE1MID0gJ3J4OicgKyBwYXJzZUludChzbm90LnJ4KSArICcgJyArXG4gICAgICAgICAgICAgICAgICAgICAgICAncnk6JyArIHBhcnNlSW50KHNub3QucnkpICsgJyAnICtcbiAgICAgICAgICAgICAgICAgICAgICAgICdyejonICsgcGFyc2VJbnQoc25vdC5yeik7XG4gICAgfVxuICB9XG5cbiAgZnVuY3Rpb24gc2V0X2Zvdihmb3YpIHtcbiAgICBzbm90LmZvdiA9IGZvdjtcbiAgICBzbm90LmZvdiA9IHNub3QuZm92ID4gc25vdC5tYXhfZm92ID8gc25vdC5tYXhfZm92IDogc25vdC5mb3Y7XG4gICAgc25vdC5mb3YgPSBzbm90LmZvdiA8IHNub3QubWluX2ZvdiA/IHNub3QubWluX2ZvdiA6IHNub3QuZm92O1xuICB9XG5cbiAgZnVuY3Rpb24gc2V0X3J4KHJ4KSB7XG4gICAgc25vdC5kZXN0X3J4ID0gcng7XG4gIH1cblxuICBmdW5jdGlvbiBzZXRfcnkocnkpIHtcbiAgICBzbm90LmRlc3RfcnkgPSByeTtcbiAgfVxuXG4gIGZ1bmN0aW9uIGxvYWRfc3ByaXRlcyhzcHMpIHtcbiAgICBmb3IgKHZhciBpIGluIHNwcykge1xuICAgICAgdmFyIGZ1bmN0aW9uTmFtZSA9IHNwc1tpXS5nZW5lcmF0b3I7XG4gICAgICB2YXIgbWVzaCA9IHNub3QuZ2VuZXJhdG9yW2Z1bmN0aW9uTmFtZV0oc3BzW2ldKTtcblxuICAgICAgbWVzaC5kYXRhID0gc3BzW2ldO1xuICAgICAgc3ByaXRlc1ttZXNoLm5hbWVdID0gdHJ1ZTtcbiAgICAgIHN1c3BlY3RzLnB1c2gobWVzaCk7XG4gICAgICBzY2VuZS5hZGQobWVzaCk7XG5cbiAgICB9XG4gIH1cblxuICBmdW5jdGlvbiBydW4oKSB7XG4gICAgc25vdC5fYW5pbWF0ZUlkID0gcmVxdWVzdEFuaW1hdGlvbkZyYW1lKHJ1bik7XG4gICAgaWYgKCFzbm90LnBhdXNlX2FuaW1hdGlvbikge1xuICAgICAgdXBkYXRlKCk7XG4gICAgfVxuICB9XG5cbiAgdXRpbC5tZXJnZV9qc29uKGdsb2JhbC5zbm90LCB7XG4gICAgc2V0X2Zvdjogc2V0X2ZvdixcbiAgICBzZXRfcng6IHNldF9yeCxcbiAgICBzZXRfcnk6IHNldF9yeSxcbiAgICBpbml0OiBpbml0LFxuICAgIHJ1bjogcnVuLFxuICAgIGxvYWRfc3ByaXRlczogbG9hZF9zcHJpdGVzXG4gIH0pO1xufSh3aW5kb3cpO1xuIiwiIWZ1bmN0aW9uKGdsb2JhbCkge1xuXG4gIHZhciBkb21fb2Zmc2V0X3RvcDtcbiAgdmFyIGRvbV9vZmZzZXRfbGVmdDtcbiAgc25vdC5pbml0X2NvbnRyb2xzID0gZnVuY3Rpb24oKSB7XG5cbiAgICBkb21fb2Zmc2V0X2xlZnQgPSB1dGlsLmxlZnRfcG9zKHNub3QuZG9tKTtcbiAgICBkb21fb2Zmc2V0X3RvcCA9IHV0aWwudG9wX3Bvcyhzbm90LmRvbSk7XG4gICAgc25vdC5jb250YWluZXIuYWRkRXZlbnRMaXN0ZW5lcigndG91Y2hzdGFydCcsIG1vdXNlX2Rvd24sIGZhbHNlKTtcbiAgICBzbm90LmNvbnRhaW5lci5hZGRFdmVudExpc3RlbmVyKCd0b3VjaG1vdmUnICwgbW91c2VfbW92ZSwgZmFsc2UpO1xuICAgIHNub3QuY29udGFpbmVyLmFkZEV2ZW50TGlzdGVuZXIoJ3RvdWNoZW5kJyAgLCBtb3VzZV91cCAgLCBmYWxzZSk7XG5cbiAgICBzbm90LmNvbnRhaW5lci5hZGRFdmVudExpc3RlbmVyKCdtb3VzZWRvd24nICwgbW91c2VfZG93biAsIGZhbHNlKTtcbiAgICBzbm90LmNvbnRhaW5lci5hZGRFdmVudExpc3RlbmVyKCdtb3VzZW1vdmUnICwgbW91c2VfbW92ZSAsIGZhbHNlKTtcbiAgICBzbm90LmNvbnRhaW5lci5hZGRFdmVudExpc3RlbmVyKCdtb3VzZXVwJyAgICwgbW91c2VfdXAgICAsIGZhbHNlKTtcbiAgICBzbm90LmNvbnRhaW5lci5hZGRFdmVudExpc3RlbmVyKCdtb3VzZXdoZWVsJywgbW91c2Vfd2hlZWwsIGZhbHNlKTtcblxuICAgIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKCdvcmllbnRhdGlvbmNoYW5nZScsIGZ1bmN0aW9uKGV2KSB7XG4gICAgICBzbm90LmNvbnRyb2xzLnNjcmVlbl9vcmllbnRhdGlvbiA9IHdpbmRvdy5vcmllbnRhdGlvbiB8fCAwO1xuICAgIH0sIGZhbHNlKTtcblxuICAgIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKCdkZXZpY2VvcmllbnRhdGlvbicsIGZ1bmN0aW9uKGV2KSB7XG4gICAgICBpZiAoZXYuYWxwaGEgIT09IG51bGwpIHtcbiAgICAgICAgc25vdC5jb250cm9scy5neXJvX2RhdGEuYmV0YSA9IGV2LmJldGEgICogTWF0aC5QSSAvIDE4MCA7XG4gICAgICAgIHNub3QuY29udHJvbHMuZ3lyb19kYXRhLmdhbW1hID0gZXYuZ2FtbWEgICogTWF0aC5QSSAvIDE4MDtcbiAgICAgICAgc25vdC5jb250cm9scy5neXJvX2RhdGEuYWxwaGEgPSBldi5hbHBoYSAgKiBNYXRoLlBJIC8gMTgwO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgc25vdC5jb250cm9scy5neXJvX2RhdGEuYmV0YSA9IHNub3QuY29udHJvbHMuZ3lyb19kYXRhLmdhbW1hID0gc25vdC5jb250cm9scy5neXJvX2RhdGEuYWxwaGEgPSAtMTtcbiAgICAgIH1cbiAgICB9LCB0cnVlKTtcbiAgfVxuXG4gIHZhciB1dGlsID0gc25vdC51dGlsO1xuICB2YXIgZGlzdGFuY2UzRCA9IHV0aWwuZGlzdGFuY2UzRDtcbiAgdmFyIGRpc3RhbmNlMkQgPSB1dGlsLmRpc3RhbmNlMkQ7XG4gIHZhciBmbG9vciA9IE1hdGguZmxvb3I7XG4gIHZhciBjb3MgPSBNYXRoLmNvcztcbiAgdmFyIHNpbiA9IE1hdGguc2luO1xuICB2YXIgYXRhbiA9IE1hdGguYXRhbjtcbiAgdmFyIHRhbiA9IE1hdGgudGFuO1xuICB2YXIgUEkgPSBNYXRoLlBJO1xuXG4gIHZhciBtX21ha2Vfcm90YXRpb25fYXhpcyA9IHNub3QudXRpbC5tX21ha2Vfcm90YXRpb25fYXhpcztcbiAgdmFyIG1fbXVsdGlwbHkgPSBzbm90LnV0aWwubV9tdWx0aXBseTtcbiAgdmFyIG1fc2V0X3Bvc2l0aW9uID0gc25vdC51dGlsLm1fc2V0X3Bvc2l0aW9uO1xuICB2YXIgbV9tYWtlX3JvdGF0aW9uX2Zyb21fcXVhdGVybmlvbiA9IHNub3QudXRpbC5tX21ha2Vfcm90YXRpb25fZnJvbV9xdWF0ZXJuaW9uO1xuICB2YXIgdl9zZXRfZnJvbV9tYXRyaXhfcG9zaXRpb24gPSBzbm90LnV0aWwudl9zZXRfZnJvbV9tYXRyaXhfcG9zaXRpb247XG5cbiAgdmFyIHRvdWNoZXMgPSB7XG4gICAgZng6IDAsICAgLy8gRmlyc3QgIGZpbmdlciB4XG4gICAgZnk6IDAsICAgLy8gRmlyc3QgIGZpbmdlciB5XG4gICAgc3g6IDAsICAgLy8gU2Vjb25kIGZpbmdlciB4XG4gICAgc3k6IDAgICAgLy8gU2Vjb25kIGZpbmdlciB5XG4gIH07XG5cbiAgdmFyIG1vdXNlX21vdmUgPSBmdW5jdGlvbihldmVudCkge1xuXG4gICAgZXZlbnQucHJldmVudERlZmF1bHQoKTtcbiAgICBldmVudC5zdG9wUHJvcGFnYXRpb24oKTtcblxuICAgIHZhciB4ID0gTWF0aC5mbG9vcihldmVudC5jbGllbnRYID49IDAgPyBldmVudC5jbGllbnRYIDogZXZlbnQudG91Y2hlc1swXS5wYWdlWCk7XG4gICAgdmFyIHkgPSBNYXRoLmZsb29yKGV2ZW50LmNsaWVudFkgPj0gMCA/IGV2ZW50LmNsaWVudFkgOiBldmVudC50b3VjaGVzWzBdLnBhZ2VZKTtcbiAgICB4IC09IGRvbV9vZmZzZXRfbGVmdDtcbiAgICB5IC09IGRvbV9vZmZzZXRfdG9wO1xuXG4gICAgdG91Y2hlcy5jbGljayA9IGZhbHNlO1xuXG4gICAgaWYgKCF0b3VjaGVzLmlzX3RvdWNoaW5nKSB7XG4gICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuXG4gICAgaWYgKGV2ZW50LnRvdWNoZXMgJiYgZXZlbnQudG91Y2hlcy5sZW5ndGggPiAxKSB7XG5cbiAgICAgIHZhciBjZnggPSB4OyAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gQ3VycmVudCBmcmlzdCAgZmluZ2VyIHhcbiAgICAgIHZhciBjZnkgPSB5OyAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gQ3VycmVudCBmaXJzdCAgZmluZ2VyIHlcbiAgICAgIHZhciBjc3ggPSBldmVudC50b3VjaGVzWzFdLnBhZ2VYOyAgICAgLy8gQ3VycmVudCBzZWNvbmQgZmluZ2VyIHhcbiAgICAgIHZhciBjc3kgPSBldmVudC50b3VjaGVzWzFdLnBhZ2VZOyAgICAgLy8gQ3VycmVudCBzZWNvbmQgZmluZ2VyIHlcblxuICAgICAgdmFyIGRpcyA9IGRpc3RhbmNlMkQodG91Y2hlcy5meCwgdG91Y2hlcy5meSwgdG91Y2hlcy5zeCwgdG91Y2hlcy5zeSkgLSBkaXN0YW5jZTJEKGNmeCwgY2Z5LCBjc3gsIGNzeSk7XG5cbiAgICAgIHZhciByYXRpbyA9IDAuMTI7XG4gICAgICBzbm90LnNldF9mb3Yoc25vdC5mb3YgKyBkaXMgKiByYXRpbyk7XG5cbiAgICAgIHRvdWNoZXMuZnggPSBjZng7XG4gICAgICB0b3VjaGVzLmZ5ID0gY2Z5O1xuICAgICAgdG91Y2hlcy5zeCA9IGNzeDtcbiAgICAgIHRvdWNoZXMuc3kgPSBjc3k7XG5cbiAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG5cbiAgICB2YXIgcmF0aW8gPSBzbm90Lm1vdXNlX3NlbnNpdGl2aXR5O1xuXG4gICAgc25vdC5kZXN0X3J5ID0gc25vdC5kZXN0X3J5ICsgKHRvdWNoZXMuZnggLSB4KSAqIHJhdGlvO1xuICAgIHNub3QuZGVzdF9yeCA9IHNub3QuZGVzdF9yeCAtICh0b3VjaGVzLmZ5IC0geSkgKiByYXRpbztcblxuICAgIHRvdWNoZXMuZnggPSB4O1xuICAgIHRvdWNoZXMuZnkgPSB5O1xuXG4gICAgc25vdC5kZXN0X3J4ID0gc25vdC5kZXN0X3J4ID4gOTAgPyA5MCA6IHNub3QuZGVzdF9yeDtcbiAgICBzbm90LmRlc3RfcnggPSBzbm90LmRlc3RfcnggPCAtOTAgPyAtOTAgOiBzbm90LmRlc3Rfcng7XG5cbiAgfTtcblxuICB2YXIgbW91c2VfZG93biA9IGZ1bmN0aW9uIChldmVudCkge1xuXG4gICAgZXZlbnQucHJldmVudERlZmF1bHQoKTtcbiAgICBldmVudC5zdG9wUHJvcGFnYXRpb24oKTtcblxuICAgIHZhciB4ID0gZmxvb3IoZXZlbnQuY2xpZW50WCA+PSAwID8gZXZlbnQuY2xpZW50WCA6IGV2ZW50LnRvdWNoZXNbMF0uY2xpZW50WCk7XG4gICAgdmFyIHkgPSBmbG9vcihldmVudC5jbGllbnRZID49IDAgPyBldmVudC5jbGllbnRZIDogZXZlbnQudG91Y2hlc1swXS5jbGllbnRZKTtcbiAgICB4IC09IGRvbV9vZmZzZXRfbGVmdDtcbiAgICB5IC09IGRvbV9vZmZzZXRfdG9wO1xuXG4gICAgdG91Y2hlcy5tb3VzZV9kb3duX3ggPSB4O1xuICAgIHRvdWNoZXMubW91c2VfZG93bl95ID0geTtcbiAgICB0b3VjaGVzLmZ4ID0geDtcbiAgICB0b3VjaGVzLmZ5ID0geTtcbiAgICB0b3VjaGVzLmNsaWNrID0gdHJ1ZTtcblxuICAgIGlmIChldmVudC50b3VjaGVzICYmIGV2ZW50LnRvdWNoZXMubGVuZ3RoID4gMSkge1xuXG4gICAgICB0b3VjaGVzLnN4ID0gZXZlbnQudG91Y2hlc1sxXS5wYWdlWDtcbiAgICAgIHRvdWNoZXMuc3kgPSBldmVudC50b3VjaGVzWzFdLnBhZ2VZO1xuXG4gICAgfVxuXG4gICAgdG91Y2hlcy5pc190b3VjaGluZyA9IHRydWU7XG4gIH1cblxuICB2YXIgbW91c2Vfd2hlZWwgPSBmdW5jdGlvbiAoZXZlbnQpIHtcblxuICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XG4gICAgZXZlbnQuc3RvcFByb3BhZ2F0aW9uKCk7XG5cbiAgICB2YXIgb2Zmc2V0ID0gZXZlbnQuZGVsdGFZO1xuICAgIHNub3Quc2V0X2Zvdihzbm90LmZvdiArIG9mZnNldCAqIDAuMDYpO1xuXG4gIH1cblxuICB2YXIgbW91c2VfdXAgPSBmdW5jdGlvbihldmVudCkge1xuICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XG4gICAgZXZlbnQuc3RvcFByb3BhZ2F0aW9uKCk7XG5cbiAgICB2YXIgeCA9IGZsb29yKGV2ZW50LmNsaWVudFggPj0gMCA/IGV2ZW50LmNsaWVudFggOiBldmVudC5jaGFuZ2VkVG91Y2hlc1swXS5wYWdlWCk7XG4gICAgdmFyIHkgPSBmbG9vcihldmVudC5jbGllbnRZID49IDAgPyBldmVudC5jbGllbnRZIDogZXZlbnQuY2hhbmdlZFRvdWNoZXNbMF0ucGFnZVkpO1xuICAgIHggLT0gZG9tX29mZnNldF9sZWZ0O1xuICAgIHkgLT0gZG9tX29mZnNldF90b3A7XG5cbiAgICAvL1NjcmVlbiBjb29yZGluYXRlIHRvIFNwaGVyZSAzZCBjb29yZGluYXRlXG4gICAgaWYgKGRpc3RhbmNlMkQodG91Y2hlcy5tb3VzZV9kb3duX3gsIHRvdWNoZXMubW91c2VfZG93bl95LCB4LCB5KSA8IDUpIHtcbiAgICAgIHNub3QuY29udHJvbHMubW91c2VfY2xpY2soeCwgeSk7XG4gICAgfVxuICAgIHRvdWNoZXMuaXNfdG91Y2hpbmcgPSBmYWxzZTtcbiAgfVxuXG59KHdpbmRvdyk7XG4iXX0=
